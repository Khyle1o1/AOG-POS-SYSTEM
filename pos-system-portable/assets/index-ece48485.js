var qh=Object.defineProperty;var Bh=(r,e,t)=>e in r?qh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var cn=(r,e,t)=>(Bh(r,typeof e!="symbol"?e+"":e,t),t);import{r as Sr,a as Uh,b as zh,c as gt,g as xc,d as lo,e as Hh}from"./vendor-36f7ab30.js";import{_ as vr,a as dl}from"./charts-add538b4.js";import{u as Wh,L as ds,H as Kh,R as Vh,a as Ma,N as Xl}from"./router-c7111a09.js";import{S as Gh,A as vo,W as $h,a as Ws,X as ba,U as wc,L as Yh,M as Qh,b as Jh,c as Va,P as js,B as Xh,d as Zl,e as ed,f as Zh,E as ec,g as tc,C as Zo,h as td,i as ef,K as rd,j as tf,k as rf,l as nd,R as Ks,m as id,n as Tl,T as ad,o as Nc,p as sd,q as od,r as ld,s as el,t as nf,u as Ao,v as af,w as rc,x as co,y as vs,z as cd,F as sf,D as tl,G as of,H as lf,I as cf,J as rl,N as uf,O as df,Q as au,V as su,Y as ou}from"./ui-bee34684.js";import{f as _r,a as br,s as lu,e as cu,b as hf,c as ff,d as pf,g as mf}from"./utils-570e0bc6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var ud={exports:{}},hl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf=Sr,yf=Symbol.for("react.element"),vf=Symbol.for("react.fragment"),bf=Object.prototype.hasOwnProperty,xf=gf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wf={key:!0,ref:!0,__self:!0,__source:!0};function dd(r,e,t){var n,a={},i=null,c=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)bf.call(e,n)&&!wf.hasOwnProperty(n)&&(a[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:yf,type:r,key:i,ref:c,props:a,_owner:xf.current}}hl.Fragment=vf;hl.jsx=dd;hl.jsxs=dd;ud.exports=hl;var o=ud.exports,nc={},uu=Uh;nc.createRoot=uu.createRoot,nc.hydrateRoot=uu.hydrateRoot;var fl=function(){function r(){this.listeners=[]}var e=r.prototype;return e.subscribe=function(n){var a=this,i=n||function(){};return this.listeners.push(i),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(c){return c!==i}),a.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},r}(),hd=typeof window>"u";function kn(){}function Nf(r,e){return typeof r=="function"?r(e):r}function Sf(r){return typeof r=="number"&&r>=0&&r!==1/0}function nl(r){return Array.isArray(r)?r:[r]}function jf(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Ml(r,e,t){return pl(r)?typeof e=="function"?vr({},t,{queryKey:r,queryFn:e}):vr({},e,{queryKey:r}):r}function Ba(r,e,t){return pl(r)?[vr({},e,{queryKey:r}),t]:[r||{},e]}function Af(r,e){if(r===!0&&e===!0||r==null&&e==null)return"all";if(r===!1&&e===!1)return"none";var t=r??!e;return t?"active":"inactive"}function du(r,e){var t=r.active,n=r.exact,a=r.fetching,i=r.inactive,c=r.predicate,u=r.queryKey,h=r.stale;if(pl(u)){if(n){if(e.queryHash!==Sc(u,e.options))return!1}else if(!il(e.queryKey,u))return!1}var y=Af(t,i);if(y==="none")return!1;if(y!=="all"){var x=e.isActive();if(y==="active"&&!x||y==="inactive"&&x)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||typeof a=="boolean"&&e.isFetching()!==a||c&&!c(e))}function hu(r,e){var t=r.exact,n=r.fetching,a=r.predicate,i=r.mutationKey;if(pl(i)){if(!e.options.mutationKey)return!1;if(t){if(ps(e.options.mutationKey)!==ps(i))return!1}else if(!il(e.options.mutationKey,i))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||a&&!a(e))}function Sc(r,e){var t=(e==null?void 0:e.queryKeyHashFn)||ps;return t(r)}function ps(r){var e=nl(r);return _f(e)}function _f(r){return JSON.stringify(r,function(e,t){return ic(t)?Object.keys(t).sort().reduce(function(n,a){return n[a]=t[a],n},{}):t})}function il(r,e){return fd(nl(r),nl(e))}function fd(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!fd(r[t],e[t])}):!1}function pd(r,e){if(r===e)return r;var t=Array.isArray(r)&&Array.isArray(e);if(t||ic(r)&&ic(e)){for(var n=t?r.length:Object.keys(r).length,a=t?e:Object.keys(e),i=a.length,c=t?[]:{},u=0,h=0;h<i;h++){var y=t?h:a[h];c[y]=pd(r[y],e[y]),c[y]===r[y]&&u++}return n===i&&u===n?r:c}return e}function ic(r){if(!fu(r))return!1;var e=r.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!fu(t)||!t.hasOwnProperty("isPrototypeOf"))}function fu(r){return Object.prototype.toString.call(r)==="[object Object]"}function pl(r){return typeof r=="string"||Array.isArray(r)}function Lf(r){return new Promise(function(e){setTimeout(e,r)})}function pu(r){Promise.resolve().then(r).catch(function(e){return setTimeout(function(){throw e})})}function md(){if(typeof AbortController=="function")return new AbortController}var Pf=function(r){dl(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(a){var i;if(!hd&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("visibilitychange",c,!1),window.addEventListener("focus",c,!1),function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("focus",c)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setFocused(u):c.onFocus()})},t.setFocused=function(a){this.focused=a,a&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(a){a()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(fl),Qo=new Pf,kf=function(r){dl(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(a){var i;if(!hd&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("online",c,!1),window.addEventListener("offline",c,!1),function(){window.removeEventListener("online",c),window.removeEventListener("offline",c)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setOnline(u):c.onOnline()})},t.setOnline=function(a){this.online=a,a&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(a){a()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(fl),Jo=new kf;function Cf(r){return Math.min(1e3*Math.pow(2,r),3e4)}function al(r){return typeof(r==null?void 0:r.cancel)=="function"}var gd=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function Rl(r){return r instanceof gd}var yd=function(e){var t=this,n=!1,a,i,c,u;this.abort=e.abort,this.cancel=function(w){return a==null?void 0:a(w)},this.cancelRetry=function(){n=!0},this.continueRetry=function(){n=!1},this.continue=function(){return i==null?void 0:i()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(w,m){c=w,u=m});var h=function(m){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(m),i==null||i(),c(m))},y=function(m){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(m),i==null||i(),u(m))},x=function(){return new Promise(function(m){i=m,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){i=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},b=function w(){if(!t.isResolved){var m;try{m=e.fn()}catch(P){m=Promise.reject(P)}a=function(L){if(!t.isResolved&&(y(new gd(L)),t.abort==null||t.abort(),al(m)))try{m.cancel()}catch{}},t.isTransportCancelable=al(m),Promise.resolve(m).then(h).catch(function(P){var L,E;if(!t.isResolved){var k=(L=e.retry)!=null?L:3,A=(E=e.retryDelay)!=null?E:Cf,F=typeof A=="function"?A(t.failureCount,P):A,q=k===!0||typeof k=="number"&&t.failureCount<k||typeof k=="function"&&k(t.failureCount,P);if(n||!q){y(P);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,P),Lf(F).then(function(){if(!Qo.isFocused()||!Jo.isOnline())return x()}).then(function(){n?y(P):w()})}})}};b()},Ff=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=r.prototype;return e.batch=function(n){var a;this.transactions++;try{a=n()}finally{this.transactions--,this.transactions||this.flush()}return a},e.schedule=function(n){var a=this;this.transactions?this.queue.push(n):pu(function(){a.notifyFn(n)})},e.batchCalls=function(n){var a=this;return function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];a.schedule(function(){n.apply(void 0,c)})}},e.flush=function(){var n=this,a=this.queue;this.queue=[],a.length&&pu(function(){n.batchNotifyFn(function(){a.forEach(function(i){n.notifyFn(i)})})})},e.setNotifyFunction=function(n){this.notifyFn=n},e.setBatchNotifyFunction=function(n){this.batchNotifyFn=n},r}(),mn=new Ff,vd=console;function bd(){return vd}function Df(r){vd=r}var Ef=function(){function r(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=r.prototype;return e.setOptions=function(n){var a;this.options=vr({},this.defaultOptions,n),this.meta=n==null?void 0:n.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},e.setDefaultOptions=function(n){this.defaultOptions=n},e.scheduleGc=function(){var n=this;this.clearGcTimeout(),Sf(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){n.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(n,a){var i,c,u=this.state.data,h=Nf(n,u);return(i=(c=this.options).isDataEqual)!=null&&i.call(c,u,h)?h=u:this.options.structuralSharing!==!1&&(h=pd(u,h)),this.dispatch({data:h,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt}),h},e.setState=function(n,a){this.dispatch({type:"setState",state:n,setStateOptions:a})},e.cancel=function(n){var a,i=this.promise;return(a=this.retryer)==null||a.cancel(n),i?i.then(kn).catch(kn):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(n){return n.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(n){return n.getCurrentResult().isStale})},e.isStaleByTime=function(n){return n===void 0&&(n=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!jf(this.state.dataUpdatedAt,n)},e.onFocus=function(){var n,a=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});a&&a.refetch(),(n=this.retryer)==null||n.continue()},e.onOnline=function(){var n,a=this.observers.find(function(i){return i.shouldFetchOnReconnect()});a&&a.refetch(),(n=this.retryer)==null||n.continue()},e.addObserver=function(n){this.observers.indexOf(n)===-1&&(this.observers.push(n),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))},e.removeObserver=function(n){this.observers.indexOf(n)!==-1&&(this.observers=this.observers.filter(function(a){return a!==n}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:n}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(n,a){var i=this,c,u,h;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var y;return(y=this.retryer)==null||y.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){var x=this.observers.find(function(A){return A.options.queryFn});x&&this.setOptions(x.options)}var b=nl(this.queryKey),w=md(),m={queryKey:b,pageParam:void 0,meta:this.meta};Object.defineProperty(m,"signal",{enumerable:!0,get:function(){if(w)return i.abortSignalConsumed=!0,w.signal}});var P=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(m)):Promise.reject("Missing queryFn")},L={fetchOptions:a,options:this.options,queryKey:b,state:this.state,fetchFn:P,meta:this.meta};if((c=this.options.behavior)!=null&&c.onFetch){var E;(E=this.options.behavior)==null||E.onFetch(L)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((u=L.fetchOptions)==null?void 0:u.meta)){var k;this.dispatch({type:"fetch",meta:(k=L.fetchOptions)==null?void 0:k.meta})}return this.retryer=new yd({fn:L.fetchFn,abort:w==null||(h=w.abort)==null?void 0:h.bind(w),onSuccess:function(F){i.setData(F),i.cache.config.onSuccess==null||i.cache.config.onSuccess(F,i),i.cacheTime===0&&i.optionalRemove()},onError:function(F){Rl(F)&&F.silent||i.dispatch({type:"error",error:F}),Rl(F)||(i.cache.config.onError==null||i.cache.config.onError(F,i),bd().error(F)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:L.options.retry,retryDelay:L.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(n){var a=this;this.state=this.reducer(this.state,n),mn.batch(function(){a.observers.forEach(function(i){i.onQueryUpdate(n)}),a.cache.notify({query:a,type:"queryUpdated",action:n})})},e.getDefaultState=function(n){var a=typeof n.initialData=="function"?n.initialData():n.initialData,i=typeof n.initialData<"u",c=i?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0,u=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:u?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:u?"success":"idle"}},e.reducer=function(n,a){var i,c;switch(a.type){case"failed":return vr({},n,{fetchFailureCount:n.fetchFailureCount+1});case"pause":return vr({},n,{isPaused:!0});case"continue":return vr({},n,{isPaused:!1});case"fetch":return vr({},n,{fetchFailureCount:0,fetchMeta:(i=a.meta)!=null?i:null,isFetching:!0,isPaused:!1},!n.dataUpdatedAt&&{error:null,status:"loading"});case"success":return vr({},n,{data:a.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(c=a.dataUpdatedAt)!=null?c:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var u=a.error;return Rl(u)&&u.revert&&this.revertState?vr({},this.revertState):vr({},n,{error:u,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return vr({},n,{isInvalidated:!0});case"setState":return vr({},n,a.state);default:return n}},r}(),If=function(r){dl(e,r);function e(n){var a;return a=r.call(this)||this,a.config=n||{},a.queries=[],a.queriesMap={},a}var t=e.prototype;return t.build=function(a,i,c){var u,h=i.queryKey,y=(u=i.queryHash)!=null?u:Sc(h,i),x=this.get(y);return x||(x=new Ef({cache:this,queryKey:h,queryHash:y,options:a.defaultQueryOptions(i),state:c,defaultOptions:a.getQueryDefaults(h),meta:i.meta}),this.add(x)),x},t.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},t.remove=function(a){var i=this.queriesMap[a.queryHash];i&&(a.destroy(),this.queries=this.queries.filter(function(c){return c!==a}),i===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},t.clear=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){a.remove(i)})})},t.get=function(a){return this.queriesMap[a]},t.getAll=function(){return this.queries},t.find=function(a,i){var c=Ba(a,i),u=c[0];return typeof u.exact>"u"&&(u.exact=!0),this.queries.find(function(h){return du(u,h)})},t.findAll=function(a,i){var c=Ba(a,i),u=c[0];return Object.keys(u).length>0?this.queries.filter(function(h){return du(u,h)}):this.queries},t.notify=function(a){var i=this;mn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){i.onFocus()})})},t.onOnline=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){i.onOnline()})})},e}(fl),Of=function(){function r(t){this.options=vr({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||Tf(),this.meta=t.meta}var e=r.prototype;return e.setState=function(n){this.dispatch({type:"setState",state:n})},e.addObserver=function(n){this.observers.indexOf(n)===-1&&this.observers.push(n)},e.removeObserver=function(n){this.observers=this.observers.filter(function(a){return a!==n})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(kn).catch(kn)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var n=this,a,i=this.state.status==="loading",c=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),c=c.then(function(){n.mutationCache.config.onMutate==null||n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return n.options.onMutate==null?void 0:n.options.onMutate(n.state.variables)}).then(function(u){u!==n.state.context&&n.dispatch({type:"loading",context:u,variables:n.state.variables})})),c.then(function(){return n.executeMutation()}).then(function(u){a=u,n.mutationCache.config.onSuccess==null||n.mutationCache.config.onSuccess(a,n.state.variables,n.state.context,n)}).then(function(){return n.options.onSuccess==null?void 0:n.options.onSuccess(a,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(a,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:a}),a}).catch(function(u){return n.mutationCache.config.onError==null||n.mutationCache.config.onError(u,n.state.variables,n.state.context,n),bd().error(u),Promise.resolve().then(function(){return n.options.onError==null?void 0:n.options.onError(u,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(void 0,u,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:u}),u})})},e.executeMutation=function(){var n=this,a;return this.retryer=new yd({fn:function(){return n.options.mutationFn?n.options.mutationFn(n.state.variables):Promise.reject("No mutationFn found")},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(n){var a=this;this.state=Mf(this.state,n),mn.batch(function(){a.observers.forEach(function(i){i.onMutationUpdate(n)}),a.mutationCache.notify(a)})},r}();function Tf(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Mf(r,e){switch(e.type){case"failed":return vr({},r,{failureCount:r.failureCount+1});case"pause":return vr({},r,{isPaused:!0});case"continue":return vr({},r,{isPaused:!1});case"loading":return vr({},r,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return vr({},r,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return vr({},r,{data:void 0,error:e.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return vr({},r,e.state);default:return r}}var Rf=function(r){dl(e,r);function e(n){var a;return a=r.call(this)||this,a.config=n||{},a.mutations=[],a.mutationId=0,a}var t=e.prototype;return t.build=function(a,i,c){var u=new Of({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(i),state:c,defaultOptions:i.mutationKey?a.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(u),u},t.add=function(a){this.mutations.push(a),this.notify(a)},t.remove=function(a){this.mutations=this.mutations.filter(function(i){return i!==a}),a.cancel(),this.notify(a)},t.clear=function(){var a=this;mn.batch(function(){a.mutations.forEach(function(i){a.remove(i)})})},t.getAll=function(){return this.mutations},t.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(i){return hu(a,i)})},t.findAll=function(a){return this.mutations.filter(function(i){return hu(a,i)})},t.notify=function(a){var i=this;mn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var a=this.mutations.filter(function(i){return i.state.isPaused});return mn.batch(function(){return a.reduce(function(i,c){return i.then(function(){return c.continue().catch(kn)})},Promise.resolve())})},e}(fl);function qf(){return{onFetch:function(e){e.fetchFn=function(){var t,n,a,i,c,u,h=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,y=(a=e.fetchOptions)==null||(i=a.meta)==null?void 0:i.fetchMore,x=y==null?void 0:y.pageParam,b=(y==null?void 0:y.direction)==="forward",w=(y==null?void 0:y.direction)==="backward",m=((c=e.state.data)==null?void 0:c.pages)||[],P=((u=e.state.data)==null?void 0:u.pageParams)||[],L=md(),E=L==null?void 0:L.signal,k=P,A=!1,F=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},q=function(V,he,$,Y){return k=Y?[he].concat(k):[].concat(k,[he]),Y?[$].concat(V):[].concat(V,[$])},K=function(V,he,$,Y){if(A)return Promise.reject("Cancelled");if(typeof $>"u"&&!he&&V.length)return Promise.resolve(V);var ne={queryKey:e.queryKey,signal:E,pageParam:$,meta:e.meta},ie=F(ne),ge=Promise.resolve(ie).then(function(j){return q(V,$,j,Y)});if(al(ie)){var Oe=ge;Oe.cancel=ie.cancel}return ge},X;if(!m.length)X=K([]);else if(b){var M=typeof x<"u",T=M?x:mu(e.options,m);X=K(m,M,T)}else if(w){var Z=typeof x<"u",oe=Z?x:Bf(e.options,m);X=K(m,Z,oe,!0)}else(function(){k=[];var R=typeof e.options.getNextPageParam>"u",V=h&&m[0]?h(m[0],0,m):!0;X=V?K([],R,P[0]):Promise.resolve(q([],P[0],m[0]));for(var he=function(ne){X=X.then(function(ie){var ge=h&&m[ne]?h(m[ne],ne,m):!0;if(ge){var Oe=R?P[ne]:mu(e.options,ie);return K(ie,R,Oe)}return Promise.resolve(q(ie,P[ne],m[ne]))})},$=1;$<m.length;$++)he($)})();var C=X.then(function(R){return{pages:R,pageParams:k}}),N=C;return N.cancel=function(){A=!0,L==null||L.abort(),al(X)&&X.cancel()},C}}}}function mu(r,e){return r.getNextPageParam==null?void 0:r.getNextPageParam(e[e.length-1],e)}function Bf(r,e){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(e[0],e)}var Uf=function(){function r(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new If,this.mutationCache=t.mutationCache||new Rf,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=r.prototype;return e.mount=function(){var n=this;this.unsubscribeFocus=Qo.subscribe(function(){Qo.isFocused()&&Jo.isOnline()&&(n.mutationCache.onFocus(),n.queryCache.onFocus())}),this.unsubscribeOnline=Jo.subscribe(function(){Qo.isFocused()&&Jo.isOnline()&&(n.mutationCache.onOnline(),n.queryCache.onOnline())})},e.unmount=function(){var n,a;(n=this.unsubscribeFocus)==null||n.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},e.isFetching=function(n,a){var i=Ba(n,a),c=i[0];return c.fetching=!0,this.queryCache.findAll(c).length},e.isMutating=function(n){return this.mutationCache.findAll(vr({},n,{fetching:!0})).length},e.getQueryData=function(n,a){var i;return(i=this.queryCache.find(n,a))==null?void 0:i.state.data},e.getQueriesData=function(n){return this.getQueryCache().findAll(n).map(function(a){var i=a.queryKey,c=a.state,u=c.data;return[i,u]})},e.setQueryData=function(n,a,i){var c=Ml(n),u=this.defaultQueryOptions(c);return this.queryCache.build(this,u).setData(a,i)},e.setQueriesData=function(n,a,i){var c=this;return mn.batch(function(){return c.getQueryCache().findAll(n).map(function(u){var h=u.queryKey;return[h,c.setQueryData(h,a,i)]})})},e.getQueryState=function(n,a){var i;return(i=this.queryCache.find(n,a))==null?void 0:i.state},e.removeQueries=function(n,a){var i=Ba(n,a),c=i[0],u=this.queryCache;mn.batch(function(){u.findAll(c).forEach(function(h){u.remove(h)})})},e.resetQueries=function(n,a,i){var c=this,u=Ba(n,a,i),h=u[0],y=u[1],x=this.queryCache,b=vr({},h,{active:!0});return mn.batch(function(){return x.findAll(h).forEach(function(w){w.reset()}),c.refetchQueries(b,y)})},e.cancelQueries=function(n,a,i){var c=this,u=Ba(n,a,i),h=u[0],y=u[1],x=y===void 0?{}:y;typeof x.revert>"u"&&(x.revert=!0);var b=mn.batch(function(){return c.queryCache.findAll(h).map(function(w){return w.cancel(x)})});return Promise.all(b).then(kn).catch(kn)},e.invalidateQueries=function(n,a,i){var c,u,h,y=this,x=Ba(n,a,i),b=x[0],w=x[1],m=vr({},b,{active:(c=(u=b.refetchActive)!=null?u:b.active)!=null?c:!0,inactive:(h=b.refetchInactive)!=null?h:!1});return mn.batch(function(){return y.queryCache.findAll(b).forEach(function(P){P.invalidate()}),y.refetchQueries(m,w)})},e.refetchQueries=function(n,a,i){var c=this,u=Ba(n,a,i),h=u[0],y=u[1],x=mn.batch(function(){return c.queryCache.findAll(h).map(function(w){return w.fetch(void 0,vr({},y,{meta:{refetchPage:h==null?void 0:h.refetchPage}}))})}),b=Promise.all(x).then(kn);return y!=null&&y.throwOnError||(b=b.catch(kn)),b},e.fetchQuery=function(n,a,i){var c=Ml(n,a,i),u=this.defaultQueryOptions(c);typeof u.retry>"u"&&(u.retry=!1);var h=this.queryCache.build(this,u);return h.isStaleByTime(u.staleTime)?h.fetch(u):Promise.resolve(h.state.data)},e.prefetchQuery=function(n,a,i){return this.fetchQuery(n,a,i).then(kn).catch(kn)},e.fetchInfiniteQuery=function(n,a,i){var c=Ml(n,a,i);return c.behavior=qf(),this.fetchQuery(c)},e.prefetchInfiniteQuery=function(n,a,i){return this.fetchInfiniteQuery(n,a,i).then(kn).catch(kn)},e.cancelMutations=function(){var n=this,a=mn.batch(function(){return n.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(a).then(kn).catch(kn)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(n){return this.mutationCache.build(this,n).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(n){this.defaultOptions=n},e.setQueryDefaults=function(n,a){var i=this.queryDefaults.find(function(c){return ps(n)===ps(c.queryKey)});i?i.defaultOptions=a:this.queryDefaults.push({queryKey:n,defaultOptions:a})},e.getQueryDefaults=function(n){var a;return n?(a=this.queryDefaults.find(function(i){return il(n,i.queryKey)}))==null?void 0:a.defaultOptions:void 0},e.setMutationDefaults=function(n,a){var i=this.mutationDefaults.find(function(c){return ps(n)===ps(c.mutationKey)});i?i.defaultOptions=a:this.mutationDefaults.push({mutationKey:n,defaultOptions:a})},e.getMutationDefaults=function(n){var a;return n?(a=this.mutationDefaults.find(function(i){return il(n,i.mutationKey)}))==null?void 0:a.defaultOptions:void 0},e.defaultQueryOptions=function(n){if(n!=null&&n._defaulted)return n;var a=vr({},this.defaultOptions.queries,this.getQueryDefaults(n==null?void 0:n.queryKey),n,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Sc(a.queryKey,a)),a},e.defaultQueryObserverOptions=function(n){return this.defaultQueryOptions(n)},e.defaultMutationOptions=function(n){return n!=null&&n._defaulted?n:vr({},this.defaultOptions.mutations,this.getMutationDefaults(n==null?void 0:n.mutationKey),n,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),zf=zh.unstable_batchedUpdates;mn.setBatchNotifyFunction(zf);var Hf=console;Df(Hf);var gu=gt.createContext(void 0),Wf=gt.createContext(!1);function Kf(r){return r&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=gu),window.ReactQueryClientContext):gu}var Vf=function(e){var t=e.client,n=e.contextSharing,a=n===void 0?!1:n,i=e.children;gt.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var c=Kf(a);return gt.createElement(Wf.Provider,{value:a},gt.createElement(c.Provider,{value:t},i))};const yu=r=>{let e;const t=new Set,n=(x,b)=>{const w=typeof x=="function"?x(e):x;if(!Object.is(w,e)){const m=e;e=b??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(P=>P(e,m))}},a=()=>e,h={setState:n,getState:a,getInitialState:()=>y,subscribe:x=>(t.add(x),()=>t.delete(x)),destroy:()=>{t.clear()}},y=e=r(n,a,h);return h},Gf=r=>r?yu(r):yu;var xd={exports:{}},wd={},Nd={exports:{}},Sd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Sr;function $f(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Yf=typeof Object.is=="function"?Object.is:$f,Qf=$s.useState,Jf=$s.useEffect,Xf=$s.useLayoutEffect,Zf=$s.useDebugValue;function ep(r,e){var t=e(),n=Qf({inst:{value:t,getSnapshot:e}}),a=n[0].inst,i=n[1];return Xf(function(){a.value=t,a.getSnapshot=e,ql(a)&&i({inst:a})},[r,t,e]),Jf(function(){return ql(a)&&i({inst:a}),r(function(){ql(a)&&i({inst:a})})},[r]),Zf(t),t}function ql(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Yf(r,t)}catch{return!0}}function tp(r,e){return e()}var rp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tp:ep;Sd.useSyncExternalStore=$s.useSyncExternalStore!==void 0?$s.useSyncExternalStore:rp;Nd.exports=Sd;var np=Nd.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Sr,ip=np;function ap(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var sp=typeof Object.is=="function"?Object.is:ap,op=ip.useSyncExternalStore,lp=ml.useRef,cp=ml.useEffect,up=ml.useMemo,dp=ml.useDebugValue;wd.useSyncExternalStoreWithSelector=function(r,e,t,n,a){var i=lp(null);if(i.current===null){var c={hasValue:!1,value:null};i.current=c}else c=i.current;i=up(function(){function h(m){if(!y){if(y=!0,x=m,m=n(m),a!==void 0&&c.hasValue){var P=c.value;if(a(P,m))return b=P}return b=m}if(P=b,sp(x,m))return P;var L=n(m);return a!==void 0&&a(P,L)?(x=m,P):(x=m,b=L)}var y=!1,x,b,w=t===void 0?null:t;return[function(){return h(e())},w===null?void 0:function(){return h(w())}]},[e,t,n,a]);var u=op(r,i[0],i[1]);return cp(function(){c.hasValue=!0,c.value=u},[u]),dp(u),u};xd.exports=wd;var hp=xd.exports;const fp=xc(hp),{useDebugValue:pp}=gt,{useSyncExternalStoreWithSelector:mp}=fp;const gp=r=>r;function yp(r,e=gp,t){const n=mp(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return pp(n),n}const vu=r=>{const e=typeof r=="function"?Gf(r):r,t=(n,a)=>yp(e,n,a);return Object.assign(t,e),t},vp=r=>r?vu(r):vu;function bp(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var i;const c=h=>h===null?null:JSON.parse(h,e==null?void 0:e.reviver),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(c):c(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,e==null?void 0:e.replacer)),removeItem:a=>t.removeItem(a)}}const bo=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return bo(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return bo(n)(t)}}}},xp=(r,e)=>(t,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,k)=>({...k,...E}),...e},c=!1;const u=new Set,h=new Set;let y;try{y=i.getStorage()}catch{}if(!y)return r((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...E)},n,a);const x=bo(i.serialize),b=()=>{const E=i.partialize({...n()});let k;const A=x({state:E,version:i.version}).then(F=>y.setItem(i.name,F)).catch(F=>{k=F});if(k)throw k;return A},w=a.setState;a.setState=(E,k)=>{w(E,k),b()};const m=r((...E)=>{t(...E),b()},n,a);let P;const L=()=>{var E;if(!y)return;c=!1,u.forEach(A=>A(n()));const k=((E=i.onRehydrateStorage)==null?void 0:E.call(i,n()))||void 0;return bo(y.getItem.bind(y))(i.name).then(A=>{if(A)return i.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==i.version){if(i.migrate)return i.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var F;return P=i.merge(A,(F=n())!=null?F:m),t(P,!0),b()}).then(()=>{k==null||k(P,void 0),c=!0,h.forEach(A=>A(P))}).catch(A=>{k==null||k(void 0,A)})};return a.persist={setOptions:E=>{i={...i,...E},E.getStorage&&(y=E.getStorage())},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>L(),hasHydrated:()=>c,onHydrate:E=>(u.add(E),()=>{u.delete(E)}),onFinishHydration:E=>(h.add(E),()=>{h.delete(E)})},L(),P||m},wp=(r,e)=>(t,n,a)=>{let i={storage:bp(()=>localStorage),partialize:L=>L,version:0,merge:(L,E)=>({...E,...L}),...e},c=!1;const u=new Set,h=new Set;let y=i.storage;if(!y)return r((...L)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...L)},n,a);const x=()=>{const L=i.partialize({...n()});return y.setItem(i.name,{state:L,version:i.version})},b=a.setState;a.setState=(L,E)=>{b(L,E),x()};const w=r((...L)=>{t(...L),x()},n,a);a.getInitialState=()=>w;let m;const P=()=>{var L,E;if(!y)return;c=!1,u.forEach(A=>{var F;return A((F=n())!=null?F:w)});const k=((E=i.onRehydrateStorage)==null?void 0:E.call(i,(L=n())!=null?L:w))||void 0;return bo(y.getItem.bind(y))(i.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==i.version){if(i.migrate)return[!0,i.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var F;const[q,K]=A;if(m=i.merge(K,(F=n())!=null?F:w),t(m,!0),q)return x()}).then(()=>{k==null||k(m,void 0),m=n(),c=!0,h.forEach(A=>A(m))}).catch(A=>{k==null||k(void 0,A)})};return a.persist={setOptions:L=>{i={...i,...L},L.storage&&(y=L.storage)},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>P(),hasHydrated:()=>c,onHydrate:L=>(u.add(L),()=>{u.delete(L)}),onFinishHydration:L=>(h.add(L),()=>{h.delete(L)})},i.skipHydration||P(),m||w},Np=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?xp(r,e):wp(r,e),Sp=Np;var jd={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(lo,function(){var t=function(l,f){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var D in _)Object.prototype.hasOwnProperty.call(_,D)&&(v[D]=_[D])})(l,f)},n=function(){return(n=Object.assign||function(l){for(var f,v=1,_=arguments.length;v<_;v++)for(var D in f=arguments[v])Object.prototype.hasOwnProperty.call(f,D)&&(l[D]=f[D]);return l}).apply(this,arguments)};function a(l,f,v){if(v||arguments.length===2)for(var _,D=0,U=f.length;D<U;D++)!_&&D in f||((_=_||Array.prototype.slice.call(f,0,D))[D]=f[D]);return l.concat(_||Array.prototype.slice.call(f))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:lo,c=Object.keys,u=Array.isArray;function h(l,f){return typeof f!="object"||c(f).forEach(function(v){l[v]=f[v]}),l}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var y=Object.getPrototypeOf,x={}.hasOwnProperty;function b(l,f){return x.call(l,f)}function w(l,f){typeof f=="function"&&(f=f(y(l))),(typeof Reflect>"u"?c:Reflect.ownKeys)(f).forEach(function(v){P(l,v,f[v])})}var m=Object.defineProperty;function P(l,f,v,_){m(l,f,h(v&&b(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},_))}function L(l){return{from:function(f){return l.prototype=Object.create(f.prototype),P(l.prototype,"constructor",l),{extend:w.bind(null,l.prototype)}}}}var E=Object.getOwnPropertyDescriptor,k=[].slice;function A(l,f,v){return k.call(l,f,v)}function F(l,f){return f(l)}function q(l){if(!l)throw new Error("Assertion Failed")}function K(l){i.setImmediate?setImmediate(l):setTimeout(l,0)}function X(l,f){if(typeof f=="string"&&b(l,f))return l[f];if(!f)return l;if(typeof f!="string"){for(var v=[],_=0,D=f.length;_<D;++_){var U=X(l,f[_]);v.push(U)}return v}var ee=f.indexOf(".");if(ee!==-1){var ce=l[f.substr(0,ee)];return ce==null?void 0:X(ce,f.substr(ee+1))}}function M(l,f,v){if(l&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof f!="string"&&"length"in f){q(typeof v!="string"&&"length"in v);for(var _=0,D=f.length;_<D;++_)M(l,f[_],v[_])}else{var U,ee,ce=f.indexOf(".");ce!==-1?(U=f.substr(0,ce),(ee=f.substr(ce+1))===""?v===void 0?u(l)&&!isNaN(parseInt(U))?l.splice(U,1):delete l[U]:l[U]=v:M(ce=!(ce=l[U])||!b(l,U)?l[U]={}:ce,ee,v)):v===void 0?u(l)&&!isNaN(parseInt(f))?l.splice(f,1):delete l[f]:l[f]=v}}function T(l){var f,v={};for(f in l)b(l,f)&&(v[f]=l[f]);return v}var Z=[].concat;function oe(l){return Z.apply([],l)}var Xe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(f){return f+l+"Array"})}))).filter(function(l){return i[l]}),C=new Set(Xe.map(function(l){return i[l]})),N=null;function R(l){return N=new WeakMap,l=function f(v){if(!v||typeof v!="object")return v;var _=N.get(v);if(_)return _;if(u(v)){_=[],N.set(v,_);for(var D=0,U=v.length;D<U;++D)_.push(f(v[D]))}else if(C.has(v.constructor))_=v;else{var ee,ce=y(v);for(ee in _=ce===Object.prototype?{}:Object.create(ce),N.set(v,_),v)b(v,ee)&&(_[ee]=f(v[ee]))}return _}(l),N=null,l}var V={}.toString;function he(l){return V.call(l).slice(8,-1)}var $=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof $=="symbol"?function(l){var f;return l!=null&&(f=l[$])&&f.apply(l)}:function(){return null};function ne(l,f){return f=l.indexOf(f),0<=f&&l.splice(f,1),0<=f}var ie={};function ge(l){var f,v,_,D;if(arguments.length===1){if(u(l))return l.slice();if(this===ie&&typeof l=="string")return[l];if(D=Y(l)){for(v=[];!(_=D.next()).done;)v.push(_.value);return v}if(l==null)return[l];if(typeof(f=l.length)!="number")return[l];for(v=new Array(f);f--;)v[f]=l[f];return v}for(f=arguments.length,v=new Array(f);f--;)v[f]=arguments[f];return v}var Oe=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ue),j={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(l,f){this.name=l,this.message=f}function Q(l,f){return l+". Errors: "+Object.keys(f).map(function(v){return f[v].toString()}).filter(function(v,_,D){return D.indexOf(v)===_}).join(`
`)}function te(l,f,v,_){this.failures=f,this.failedKeys=_,this.successCount=v,this.message=Q(l,f)}function ae(l,f){this.name="BulkError",this.failures=Object.keys(f).map(function(v){return f[v]}),this.failuresByPos=f,this.message=Q(l,this.failures)}L(H).from(Error).extend({toString:function(){return this.name+": "+this.message}}),L(te).from(H),L(ae).from(H);var we=Xr.reduce(function(l,f){return l[f]=f+"Error",l},{}),Fe=H,fe=Xr.reduce(function(l,f){var v=f+"Error";function _(D,U){this.name=v,D?typeof D=="string"?(this.message="".concat(D).concat(U?`
 `+U:""),this.inner=U||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=j[f]||v,this.inner=null)}return L(_).from(Fe),l[f]=_,l},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Je=Ue.reduce(function(l,f){return l[f+"Error"]=fe[f],l},{}),et=Xr.reduce(function(l,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(l[f+"Error"]=fe[f]),l},{});function Ve(){}function lt(l){return l}function Ft(l,f){return l==null||l===lt?f:function(v){return f(l(v))}}function qe(l,f){return function(){l.apply(this,arguments),f.apply(this,arguments)}}function le(l,f){return l===Ve?f:function(){var v=l.apply(this,arguments);v!==void 0&&(arguments[0]=v);var _=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var U=f.apply(this,arguments);return _&&(this.onsuccess=this.onsuccess?qe(_,this.onsuccess):_),D&&(this.onerror=this.onerror?qe(D,this.onerror):D),U!==void 0?U:v}}function Mt(l,f){return l===Ve?f:function(){l.apply(this,arguments);var v=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?qe(v,this.onsuccess):v),_&&(this.onerror=this.onerror?qe(_,this.onerror):_)}}function jt(l,f){return l===Ve?f:function(v){var _=l.apply(this,arguments);h(v,_);var D=this.onsuccess,U=this.onerror;return this.onsuccess=null,this.onerror=null,v=f.apply(this,arguments),D&&(this.onsuccess=this.onsuccess?qe(D,this.onsuccess):D),U&&(this.onerror=this.onerror?qe(U,this.onerror):U),_===void 0?v===void 0?void 0:v:h(_,v)}}function rt(l,f){return l===Ve?f:function(){return f.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function J(l,f){return l===Ve?f:function(){var v=l.apply(this,arguments);if(v&&typeof v.then=="function"){for(var _=this,D=arguments.length,U=new Array(D);D--;)U[D]=arguments[D];return v.then(function(){return f.apply(_,U)})}return f.apply(this,arguments)}}et.ModifyError=te,et.DexieError=H,et.BulkError=ae;var de=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xe(l){de=l}var Be={},Ge=100,Xe=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,y(l),l];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,y(f),l]}(),Ue=Xe[0],Xr=Xe[1],Xe=Xe[2],Xr=Xr&&Xr.then,bt=Ue&&Ue.constructor,Lt=!!Xe,wt=function(l,f){zr.push([l,f]),ct&&(queueMicrotask(De),ct=!1)},qt=!0,ct=!0,dr=[],Wt=[],Or=lt,Yt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},ut=Yt,zr=[],Vt=0,gn=[];function at(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=ut;if(typeof l!="function"){if(l!==Be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&lr(this,this._value))}this._state=null,this._value=null,++f.ref,function v(_,D){try{D(function(U){if(_._state===null){if(U===_)throw new TypeError("A promise cannot be resolved with itself.");var ee=_._lib&&mt();U&&typeof U.then=="function"?v(_,function(ce,ye){U instanceof at?U._then(ce,ye):U.then(ce,ye)}):(_._state=!0,_._value=U,Rt(_)),ee&&Et()}},lr.bind(null,_))}catch(U){lr(_,U)}}(this,l)}var un={get:function(){var l=ut,f=si;function v(_,D){var U=this,ee=!l.global&&(l!==ut||f!==si),ce=ee&&!Kr(),ye=new at(function(Ne,_e){tr(U,new rn(Vi(_,l,ee,ce),Vi(D,l,ee,ce),Ne,_e,l))});return this._consoleTask&&(ye._consoleTask=this._consoleTask),ye}return v.prototype=Be,v},set:function(l){P(this,"then",l&&l.prototype===Be?un:{get:function(){return l},set:un.set})}};function rn(l,f,v,_,D){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof f=="function"?f:null,this.resolve=v,this.reject=_,this.psd=D}function lr(l,f){var v,_;Wt.push(f),l._state===null&&(v=l._lib&&mt(),f=Or(f),l._state=!1,l._value=f,_=l,dr.some(function(D){return D._value===_._value})||dr.push(_),Rt(l),v&&Et())}function Rt(l){var f=l._listeners;l._listeners=[];for(var v=0,_=f.length;v<_;++v)tr(l,f[v]);var D=l._PSD;--D.ref||D.finalize(),Vt===0&&(++Vt,wt(function(){--Vt==0&&xt()},[]))}function tr(l,f){if(l._state!==null){var v=l._state?f.onFulfilled:f.onRejected;if(v===null)return(l._state?f.resolve:f.reject)(l._value);++f.psd.ref,++Vt,wt(Xn,[v,l,f])}else l._listeners.push(f)}function Xn(l,f,v){try{var _,D=f._value;!f._state&&Wt.length&&(Wt=[]),_=de&&f._consoleTask?f._consoleTask.run(function(){return l(D)}):l(D),f._state||Wt.indexOf(D)!==-1||function(U){for(var ee=dr.length;ee;)if(dr[--ee]._value===U._value)return dr.splice(ee,1)}(f),v.resolve(_)}catch(U){v.reject(U)}finally{--Vt==0&&xt(),--v.psd.ref||v.psd.finalize()}}function De(){Dn(Yt,function(){mt()&&Et()})}function mt(){var l=qt;return ct=qt=!1,l}function Et(){var l,f,v;do for(;0<zr.length;)for(l=zr,zr=[],v=l.length,f=0;f<v;++f){var _=l[f];_[0].apply(null,_[1])}while(0<zr.length);ct=qt=!0}function xt(){var l=dr;dr=[],l.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)});for(var f=gn.slice(0),v=f.length;v;)f[--v]()}function sr(l){return new at(Be,!1,l)}function Ht(l,f){var v=ut;return function(){var _=mt(),D=ut;try{return Yr(v,!0),l.apply(this,arguments)}catch(U){f&&f(U)}finally{Yr(D,!1),_&&Et()}}}w(at.prototype,{then:un,_then:function(l,f){tr(this,new rn(null,null,l,f,ut))},catch:function(l){if(arguments.length===1)return this.then(null,l);var f=l,v=arguments[1];return typeof f=="function"?this.then(null,function(_){return(_ instanceof f?v:sr)(_)}):this.then(null,function(_){return(_&&_.name===f?v:sr)(_)})},finally:function(l){return this.then(function(f){return at.resolve(l()).then(function(){return f})},function(f){return at.resolve(l()).then(function(){return sr(f)})})},timeout:function(l,f){var v=this;return l<1/0?new at(function(_,D){var U=setTimeout(function(){return D(new fe.Timeout(f))},l);v.then(_,D).finally(clearTimeout.bind(null,U))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(at.prototype,Symbol.toStringTag,"Dexie.Promise"),Yt.env=Pi(),w(at,{all:function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.length===0&&f([]);var _=l.length;l.forEach(function(D,U){return at.resolve(D).then(function(ee){l[U]=ee,--_||f(l)},v)})})},resolve:function(l){return l instanceof at?l:l&&typeof l.then=="function"?new at(function(f,v){l.then(f,v)}):new at(Be,!0,l)},reject:sr,race:function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.map(function(_){return at.resolve(_).then(f,v)})})},PSD:{get:function(){return ut},set:function(l){return ut=l}},totalEchoes:{get:function(){return si}},newPSD:Wr,usePSD:Dn,scheduler:{get:function(){return wt},set:function(l){wt=l}},rejectionMapper:{get:function(){return Or},set:function(l){Or=l}},follow:function(l,f){return new at(function(v,_){return Wr(function(D,U){var ee=ut;ee.unhandleds=[],ee.onunhandled=U,ee.finalize=qe(function(){var ce,ye=this;ce=function(){ye.unhandleds.length===0?D():U(ye.unhandleds[0])},gn.push(function Ne(){ce(),gn.splice(gn.indexOf(Ne),1)}),++Vt,wt(function(){--Vt==0&&xt()},[])},ee.finalize),l()},f,v,_)})}}),bt&&(bt.allSettled&&P(at,"allSettled",function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f){l.length===0&&f([]);var v=l.length,_=new Array(v);l.forEach(function(D,U){return at.resolve(D).then(function(ee){return _[U]={status:"fulfilled",value:ee}},function(ee){return _[U]={status:"rejected",reason:ee}}).then(function(){return--v||f(_)})})})}),bt.any&&typeof AggregateError<"u"&&P(at,"any",function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.length===0&&v(new AggregateError([]));var _=l.length,D=new Array(_);l.forEach(function(U,ee){return at.resolve(U).then(function(ce){return f(ce)},function(ce){D[ee]=ce,--_||v(new AggregateError(D))})})})}),bt.withResolvers&&(at.withResolvers=bt.withResolvers));var Bt={awaits:0,echoes:0,id:0},mr=0,hr=[],Hr=0,si=0,oi=0;function Wr(l,f,v,_){var D=ut,U=Object.create(D);return U.parent=D,U.ref=0,U.global=!1,U.id=++oi,Yt.env,U.env=Lt?{Promise:at,PromiseProp:{value:at,configurable:!0,writable:!0},all:at.all,race:at.race,allSettled:at.allSettled,any:at.any,resolve:at.resolve,reject:at.reject}:{},f&&h(U,f),++D.ref,U.finalize=function(){--this.parent.ref||this.parent.finalize()},_=Dn(U,l,v,_),U.ref===0&&U.finalize(),_}function nn(){return Bt.id||(Bt.id=++mr),++Bt.awaits,Bt.echoes+=Ge,Bt.id}function Kr(){return!!Bt.awaits&&(--Bt.awaits==0&&(Bt.id=0),Bt.echoes=Bt.awaits*Ge,!0)}function _n(l){return Bt.echoes&&l&&l.constructor===bt?(nn(),l.then(function(f){return Kr(),f},function(f){return Kr(),fr(f)})):l}function Fn(){var l=hr[hr.length-1];hr.pop(),Yr(l,!1)}function Yr(l,f){var v,_=ut;(f?!Bt.echoes||Hr++&&l===ut:!Hr||--Hr&&l===ut)||queueMicrotask(f?(function(D){++si,Bt.echoes&&--Bt.echoes!=0||(Bt.echoes=Bt.awaits=Bt.id=0),hr.push(ut),Yr(D,!0)}).bind(null,l):Fn),l!==ut&&(ut=l,_===Yt&&(Yt.env=Pi()),Lt&&(v=Yt.env.Promise,f=l.env,(_.global||l.global)&&(Object.defineProperty(i,"Promise",f.PromiseProp),v.all=f.all,v.race=f.race,v.resolve=f.resolve,v.reject=f.reject,f.allSettled&&(v.allSettled=f.allSettled),f.any&&(v.any=f.any))))}function Pi(){var l=i.Promise;return Lt?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function Dn(l,f,v,_,D){var U=ut;try{return Yr(l,!0),f(v,_,D)}finally{Yr(U,!1)}}function Vi(l,f,v,_){return typeof l!="function"?l:function(){var D=ut;v&&nn(),Yr(f,!0);try{return l.apply(this,arguments)}finally{Yr(D,!1),_&&queueMicrotask(Kr)}}}function ki(l){Promise===bt&&Bt.echoes===0?Hr===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+Xr).indexOf("[native code]")===-1&&(nn=Kr=Ve);var fr=at.reject,Zn=String.fromCharCode(65535),Un="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_s="String expected.",zn=[],Gi="__dbnames",Qa="readonly",$i="readwrite";function li(l,f){return l?f?function(){return l.apply(this,arguments)&&f.apply(this,arguments)}:l:f}var Ja={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xa(l){return typeof l!="string"||/\./.test(l)?function(f){return f}:function(f){return f[l]===void 0&&l in f&&delete(f=R(f))[l],f}}function Yi(){throw fe.Type()}function Jt(l,f){try{var v=Ar(l),_=Ar(f);if(v!==_)return v==="Array"?1:_==="Array"?-1:v==="binary"?1:_==="binary"?-1:v==="string"?1:_==="string"?-1:v==="Date"?1:_!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return f<l?1:l<f?-1:0;case"binary":return function(D,U){for(var ee=D.length,ce=U.length,ye=ee<ce?ee:ce,Ne=0;Ne<ye;++Ne)if(D[Ne]!==U[Ne])return D[Ne]<U[Ne]?-1:1;return ee===ce?0:ee<ce?-1:1}(Xa(l),Xa(f));case"Array":return function(D,U){for(var ee=D.length,ce=U.length,ye=ee<ce?ee:ce,Ne=0;Ne<ye;++Ne){var _e=Jt(D[Ne],U[Ne]);if(_e!==0)return _e}return ee===ce?0:ee<ce?-1:1}(l,f)}}catch{}return NaN}function Ar(l){var f=typeof l;return f!="object"?f:ArrayBuffer.isView(l)?"binary":(l=he(l),l==="ArrayBuffer"?"binary":l)}function Xa(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}var Za=(or.prototype._trans=function(l,f,v){var _=this._tx||ut.trans,D=this.name,U=de&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function ee(Ne,_e,ue){if(!ue.schema[D])throw new fe.NotFound("Table "+D+" not part of transaction");return f(ue.idbtrans,ue)}var ce=mt();try{var ye=_&&_.db._novip===this.db._novip?_===ut.trans?_._promise(l,ee,v):Wr(function(){return _._promise(l,ee,v)},{trans:_,transless:ut.transless||ut}):function Ne(_e,ue,ke,me){if(_e.idbdb&&(_e._state.openComplete||ut.letThrough||_e._vip)){var Se=_e._createTransaction(ue,ke,_e._dbSchema);try{Se.create(),_e._state.PR1398_maxLoop=3}catch(Pe){return Pe.name===we.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return Ne(_e,ue,ke,me)})):fr(Pe)}return Se._promise(ue,function(Pe,je){return Wr(function(){return ut.trans=Se,me(Pe,je,Se)})}).then(function(Pe){if(ue==="readwrite")try{Se.idbtrans.commit()}catch{}return ue==="readonly"?Pe:Se._completion.then(function(){return Pe})})}if(_e._state.openComplete)return fr(new fe.DatabaseClosed(_e._state.dbOpenError));if(!_e._state.isBeingOpened){if(!_e._state.autoOpen)return fr(new fe.DatabaseClosed);_e.open().catch(Ve)}return _e._state.dbReadyPromise.then(function(){return Ne(_e,ue,ke,me)})}(this.db,l,[this.name],ee);return U&&(ye._consoleTask=U,ye=ye.catch(function(Ne){return console.trace(Ne),fr(Ne)})),ye}finally{ce&&Et()}},or.prototype.get=function(l,f){var v=this;return l&&l.constructor===Object?this.where(l).first(f):l==null?fr(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return v.core.get({trans:_,key:l}).then(function(D){return v.hook.reading.fire(D)})}).then(f)},or.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(u(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var f=c(l);if(f.length===1)return this.where(f[0]).equals(l[f[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(ce){if(ce.compound&&f.every(function(Ne){return 0<=ce.keyPath.indexOf(Ne)})){for(var ye=0;ye<f.length;++ye)if(f.indexOf(ce.keyPath[ye])===-1)return!1;return!0}return!1}).sort(function(ce,ye){return ce.keyPath.length-ye.keyPath.length})[0];if(v&&this.db._maxKey!==Zn){var U=v.keyPath.slice(0,f.length);return this.where(U).equals(U.map(function(ye){return l[ye]}))}!v&&de&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var _=this.schema.idxByName;function D(ce,ye){return Jt(ce,ye)===0}var ee=f.reduce(function(ue,ye){var Ne=ue[0],_e=ue[1],ue=_[ye],ke=l[ye];return[Ne||ue,Ne||!ue?li(_e,ue&&ue.multi?function(me){return me=X(me,ye),u(me)&&me.some(function(Se){return D(ke,Se)})}:function(me){return D(ke,X(me,ye))}):_e]},[null,null]),U=ee[0],ee=ee[1];return U?this.where(U.name).equals(l[U.keyPath]).filter(ee):v?this.filter(ee):this.where(f).equals("")},or.prototype.filter=function(l){return this.toCollection().and(l)},or.prototype.count=function(l){return this.toCollection().count(l)},or.prototype.offset=function(l){return this.toCollection().offset(l)},or.prototype.limit=function(l){return this.toCollection().limit(l)},or.prototype.each=function(l){return this.toCollection().each(l)},or.prototype.toArray=function(l){return this.toCollection().toArray(l)},or.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},or.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,u(l)?"[".concat(l.join("+"),"]"):l))},or.prototype.reverse=function(){return this.toCollection().reverse()},or.prototype.mapToClass=function(l){var f,v=this.db,_=this.name;function D(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof Yi&&(function(ye,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Class extends value "+String(Ne)+" is not a constructor or null");function _e(){this.constructor=ye}t(ye,Ne),ye.prototype=Ne===null?Object.create(Ne):(_e.prototype=Ne.prototype,new _e)}(D,f=l),Object.defineProperty(D.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),D.prototype.table=function(){return _},l=D);for(var U=new Set,ee=l.prototype;ee;ee=y(ee))Object.getOwnPropertyNames(ee).forEach(function(ye){return U.add(ye)});function ce(ye){if(!ye)return ye;var Ne,_e=Object.create(l.prototype);for(Ne in ye)if(!U.has(Ne))try{_e[Ne]=ye[Ne]}catch{}return _e}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ce,this.hook("reading",ce),l},or.prototype.defineClass=function(){return this.mapToClass(function(l){h(this,l)})},or.prototype.add=function(l,f){var v=this,_=this.schema.primKey,D=_.auto,U=_.keyPath,ee=l;return U&&D&&(ee=xa(U)(l)),this._trans("readwrite",function(ce){return v.core.mutate({trans:ce,type:"add",keys:f!=null?[f]:null,values:[ee]})}).then(function(ce){return ce.numFailures?at.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(U)try{M(l,U,ce)}catch{}return ce})},or.prototype.update=function(l,f){return typeof l!="object"||u(l)?this.where(":id").equals(l).modify(f):(l=X(l,this.schema.primKey.keyPath),l===void 0?fr(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(f))},or.prototype.put=function(l,f){var v=this,_=this.schema.primKey,D=_.auto,U=_.keyPath,ee=l;return U&&D&&(ee=xa(U)(l)),this._trans("readwrite",function(ce){return v.core.mutate({trans:ce,type:"put",values:[ee],keys:f!=null?[f]:null})}).then(function(ce){return ce.numFailures?at.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(U)try{M(l,U,ce)}catch{}return ce})},or.prototype.delete=function(l){var f=this;return this._trans("readwrite",function(v){return f.core.mutate({trans:v,type:"delete",keys:[l]})}).then(function(v){return v.numFailures?at.reject(v.failures[0]):void 0})},or.prototype.clear=function(){var l=this;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"deleteRange",range:Ja})}).then(function(f){return f.numFailures?at.reject(f.failures[0]):void 0})},or.prototype.bulkGet=function(l){var f=this;return this._trans("readonly",function(v){return f.core.getMany({keys:l,trans:v}).then(function(_){return _.map(function(D){return f.hook.reading.fire(D)})})})},or.prototype.bulkAdd=function(l,f,v){var _=this,D=Array.isArray(f)?f:void 0,U=(v=v||(D?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(ee){var Ne=_.schema.primKey,ce=Ne.auto,Ne=Ne.keyPath;if(Ne&&D)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==l.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ye=l.length,Ne=Ne&&ce?l.map(xa(Ne)):l;return _.core.mutate({trans:ee,type:"add",keys:D,values:Ne,wantResults:U}).then(function(Se){var ue=Se.numFailures,ke=Se.results,me=Se.lastResult,Se=Se.failures;if(ue===0)return U?ke:me;throw new ae("".concat(_.name,".bulkAdd(): ").concat(ue," of ").concat(ye," operations failed"),Se)})})},or.prototype.bulkPut=function(l,f,v){var _=this,D=Array.isArray(f)?f:void 0,U=(v=v||(D?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(ee){var Ne=_.schema.primKey,ce=Ne.auto,Ne=Ne.keyPath;if(Ne&&D)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==l.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ye=l.length,Ne=Ne&&ce?l.map(xa(Ne)):l;return _.core.mutate({trans:ee,type:"put",keys:D,values:Ne,wantResults:U}).then(function(Se){var ue=Se.numFailures,ke=Se.results,me=Se.lastResult,Se=Se.failures;if(ue===0)return U?ke:me;throw new ae("".concat(_.name,".bulkPut(): ").concat(ue," of ").concat(ye," operations failed"),Se)})})},or.prototype.bulkUpdate=function(l){var f=this,v=this.core,_=l.map(function(ee){return ee.key}),D=l.map(function(ee){return ee.changes}),U=[];return this._trans("readwrite",function(ee){return v.getMany({trans:ee,keys:_,cache:"clone"}).then(function(ce){var ye=[],Ne=[];l.forEach(function(ue,ke){var me=ue.key,Se=ue.changes,Pe=ce[ke];if(Pe){for(var je=0,Te=Object.keys(Se);je<Te.length;je++){var Me=Te[je],Re=Se[Me];if(Me===f.schema.primKey.keyPath){if(Jt(Re,me)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else M(Pe,Me,Re)}U.push(ke),ye.push(me),Ne.push(Pe)}});var _e=ye.length;return v.mutate({trans:ee,type:"put",keys:ye,values:Ne,updates:{keys:_,changeSpecs:D}}).then(function(ue){var ke=ue.numFailures,me=ue.failures;if(ke===0)return _e;for(var Se=0,Pe=Object.keys(me);Se<Pe.length;Se++){var je,Te=Pe[Se],Me=U[Number(Te)];Me!=null&&(je=me[Te],delete me[Te],me[Me]=je)}throw new ae("".concat(f.name,".bulkUpdate(): ").concat(ke," of ").concat(_e," operations failed"),me)})})})},or.prototype.bulkDelete=function(l){var f=this,v=l.length;return this._trans("readwrite",function(_){return f.core.mutate({trans:_,type:"delete",keys:l})}).then(function(ee){var D=ee.numFailures,U=ee.lastResult,ee=ee.failures;if(D===0)return U;throw new ae("".concat(f.name,".bulkDelete(): ").concat(D," of ").concat(v," operations failed"),ee)})},or);function or(){}function ci(l){function f(ee,ce){if(ce){for(var ye=arguments.length,Ne=new Array(ye-1);--ye;)Ne[ye-1]=arguments[ye];return v[ee].subscribe.apply(null,Ne),l}if(typeof ee=="string")return v[ee]}var v={};f.addEventType=U;for(var _=1,D=arguments.length;_<D;++_)U(arguments[_]);return f;function U(ee,ce,ye){if(typeof ee!="object"){var Ne;ce=ce||rt;var _e={subscribers:[],fire:ye=ye||Ve,subscribe:function(ue){_e.subscribers.indexOf(ue)===-1&&(_e.subscribers.push(ue),_e.fire=ce(_e.fire,ue))},unsubscribe:function(ue){_e.subscribers=_e.subscribers.filter(function(ke){return ke!==ue}),_e.fire=_e.subscribers.reduce(ce,ye)}};return v[ee]=f[ee]=_e}c(Ne=ee).forEach(function(ue){var ke=Ne[ue];if(u(ke))U(ue,Ne[ue][0],Ne[ue][1]);else{if(ke!=="asap")throw new fe.InvalidArgument("Invalid event config");var me=U(ue,lt,function(){for(var Se=arguments.length,Pe=new Array(Se);Se--;)Pe[Se]=arguments[Se];me.subscribers.forEach(function(je){K(function(){je.apply(null,Pe)})})})}})}}function Qi(l,f){return L(f).from({prototype:l}),f}function an(l,f){return!(l.filter||l.algorithm||l.or)&&(f?l.justLimit:!l.replayFilter)}function Ci(l,f){l.filter=li(l.filter,f)}function sn(l,f,v){var _=l.replayFilter;l.replayFilter=_?function(){return li(_(),f())}:f,l.justLimit=v&&!_}function Fi(l,f){if(l.isPrimKey)return f.primaryKey;var v=f.getIndexByKeyPath(l.index);if(!v)throw new fe.Schema("KeyPath "+l.index+" on object store "+f.name+" is not indexed");return v}function es(l,f,v){var _=Fi(l,f.schema);return f.openCursor({trans:v,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:_,range:l.range}})}function wa(l,f,v,_){var D=l.replayFilter?li(l.filter,l.replayFilter()):l.filter;if(l.or){var U={},ee=function(ce,ye,Ne){var _e,ue;D&&!D(ye,Ne,function(ke){return ye.stop(ke)},function(ke){return ye.fail(ke)})||((ue=""+(_e=ye.primaryKey))=="[object ArrayBuffer]"&&(ue=""+new Uint8Array(_e)),b(U,ue)||(U[ue]=!0,f(ce,ye,Ne)))};return Promise.all([l.or._iterate(ee,v),ts(es(l,_,v),l.algorithm,ee,!l.keysOnly&&l.valueMapper)])}return ts(es(l,_,v),li(l.algorithm,D),f,!l.keysOnly&&l.valueMapper)}function ts(l,f,v,_){var D=Ht(_?function(U,ee,ce){return v(_(U),ee,ce)}:v);return l.then(function(U){if(U)return U.start(function(){var ee=function(){return U.continue()};f&&!f(U,function(ce){return ee=ce},function(ce){U.stop(ce),ee=Ve},function(ce){U.fail(ce),ee=Ve})||D(U.value,U,function(ce){return ee=ce}),ee()})})}var Ji=(rs.prototype.execute=function(l){var f=this["@@propmod"];if(f.add!==void 0){var v=f.add;if(u(v))return a(a([],u(l)?l:[],!0),v,!0).sort();if(typeof v=="number")return(Number(l)||0)+v;if(typeof v=="bigint")try{return BigInt(l)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(f.remove!==void 0){var _=f.remove;if(u(_))return u(l)?l.filter(function(D){return!_.includes(D)}).sort():[];if(typeof _=="number")return Number(l)-_;if(typeof _=="bigint")try{return BigInt(l)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return v=(v=f.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof l=="string"&&l.startsWith(v)?f.replacePrefix[1]+l.substring(v.length):l},rs);function rs(l){this["@@propmod"]=l}var Ys=(Zt.prototype._read=function(l,f){var v=this._ctx;return v.error?v.table._trans(null,fr.bind(null,v.error)):v.table._trans("readonly",l).then(f)},Zt.prototype._write=function(l){var f=this._ctx;return f.error?f.table._trans(null,fr.bind(null,f.error)):f.table._trans("readwrite",l,"locked")},Zt.prototype._addAlgorithm=function(l){var f=this._ctx;f.algorithm=li(f.algorithm,l)},Zt.prototype._iterate=function(l,f){return wa(this._ctx,l,f,this._ctx.table.core)},Zt.prototype.clone=function(l){var f=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return l&&h(v,l),f._ctx=v,f},Zt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Zt.prototype.each=function(l){var f=this._ctx;return this._read(function(v){return wa(f,l,v,f.table.core)})},Zt.prototype.count=function(l){var f=this;return this._read(function(v){var _=f._ctx,D=_.table.core;if(an(_,!0))return D.count({trans:v,query:{index:Fi(_,D.schema),range:_.range}}).then(function(ee){return Math.min(ee,_.limit)});var U=0;return wa(_,function(){return++U,!1},v,D).then(function(){return U})}).then(l)},Zt.prototype.sortBy=function(l,f){var v=l.split(".").reverse(),_=v[0],D=v.length-1;function U(ye,Ne){return Ne?U(ye[v[Ne]],Ne-1):ye[_]}var ee=this._ctx.dir==="next"?1:-1;function ce(ye,Ne){return Jt(U(ye,D),U(Ne,D))*ee}return this.toArray(function(ye){return ye.sort(ce)}).then(f)},Zt.prototype.toArray=function(l){var f=this;return this._read(function(v){var _=f._ctx;if(_.dir==="next"&&an(_,!0)&&0<_.limit){var D=_.valueMapper,U=Fi(_,_.table.core.schema);return _.table.core.query({trans:v,limit:_.limit,values:!0,query:{index:U,range:_.range}}).then(function(ce){return ce=ce.result,D?ce.map(D):ce})}var ee=[];return wa(_,function(ce){return ee.push(ce)},v,_.table.core).then(function(){return ee})},l)},Zt.prototype.offset=function(l){var f=this._ctx;return l<=0||(f.offset+=l,an(f)?sn(f,function(){var v=l;return function(_,D){return v===0||(v===1?--v:D(function(){_.advance(v),v=0}),!1)}}):sn(f,function(){var v=l;return function(){return--v<0}})),this},Zt.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),sn(this._ctx,function(){var f=l;return function(v,_,D){return--f<=0&&_(D),0<=f}},!0),this},Zt.prototype.until=function(l,f){return Ci(this._ctx,function(v,_,D){return!l(v.value)||(_(D),f)}),this},Zt.prototype.first=function(l){return this.limit(1).toArray(function(f){return f[0]}).then(l)},Zt.prototype.last=function(l){return this.reverse().first(l)},Zt.prototype.filter=function(l){var f;return Ci(this._ctx,function(v){return l(v.value)}),(f=this._ctx).isMatch=li(f.isMatch,l),this},Zt.prototype.and=function(l){return this.filter(l)},Zt.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},Zt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Zt.prototype.desc=function(){return this.reverse()},Zt.prototype.eachKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,_){l(_.key,_)})},Zt.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},Zt.prototype.eachPrimaryKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,_){l(_.primaryKey,_)})},Zt.prototype.keys=function(l){var f=this._ctx;f.keysOnly=!f.isMatch;var v=[];return this.each(function(_,D){v.push(D.key)}).then(function(){return v}).then(l)},Zt.prototype.primaryKeys=function(l){var f=this._ctx;if(f.dir==="next"&&an(f,!0)&&0<f.limit)return this._read(function(_){var D=Fi(f,f.table.core.schema);return f.table.core.query({trans:_,values:!1,limit:f.limit,query:{index:D,range:f.range}})}).then(function(_){return _.result}).then(l);f.keysOnly=!f.isMatch;var v=[];return this.each(function(_,D){v.push(D.primaryKey)}).then(function(){return v}).then(l)},Zt.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},Zt.prototype.firstKey=function(l){return this.limit(1).keys(function(f){return f[0]}).then(l)},Zt.prototype.lastKey=function(l){return this.reverse().firstKey(l)},Zt.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var f={};return Ci(this._ctx,function(D){var _=D.primaryKey.toString(),D=b(f,_);return f[_]=!0,!D}),this},Zt.prototype.modify=function(l){var f=this,v=this._ctx;return this._write(function(_){var D,U,ee;ee=typeof l=="function"?l:(D=c(l),U=D.length,function(je){for(var Te=!1,Me=0;Me<U;++Me){var Re=D[Me],Ke=l[Re],nt=X(je,Re);Ke instanceof Ji?(M(je,Re,Ke.execute(nt)),Te=!0):nt!==Ke&&(M(je,Re,Ke),Te=!0)}return Te});var ce=v.table.core,ue=ce.schema.primaryKey,ye=ue.outbound,Ne=ue.extractKey,_e=200,ue=f.db._options.modifyChunkSize;ue&&(_e=typeof ue=="object"?ue[ce.name]||ue["*"]||200:ue);function ke(je,Re){var Me=Re.failures,Re=Re.numFailures;Se+=je-Re;for(var Ke=0,nt=c(Me);Ke<nt.length;Ke++){var dt=nt[Ke];me.push(Me[dt])}}var me=[],Se=0,Pe=[];return f.clone().primaryKeys().then(function(je){function Te(Re){var Ke=Math.min(_e,je.length-Re);return ce.getMany({trans:_,keys:je.slice(Re,Re+Ke),cache:"immutable"}).then(function(nt){for(var dt=[],it=[],st=ye?[]:null,ht=[],ot=0;ot<Ke;++ot){var ft=nt[ot],St={value:R(ft),primKey:je[Re+ot]};ee.call(St,St.value,St)!==!1&&(St.value==null?ht.push(je[Re+ot]):ye||Jt(Ne(ft),Ne(St.value))===0?(it.push(St.value),ye&&st.push(je[Re+ot])):(ht.push(je[Re+ot]),dt.push(St.value)))}return Promise.resolve(0<dt.length&&ce.mutate({trans:_,type:"add",values:dt}).then(function(At){for(var Ct in At.failures)ht.splice(parseInt(Ct),1);ke(dt.length,At)})).then(function(){return(0<it.length||Me&&typeof l=="object")&&ce.mutate({trans:_,type:"put",keys:st,values:it,criteria:Me,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<Re}).then(function(At){return ke(it.length,At)})}).then(function(){return(0<ht.length||Me&&l===ns)&&ce.mutate({trans:_,type:"delete",keys:ht,criteria:Me,isAdditionalChunk:0<Re}).then(function(At){return ke(ht.length,At)})}).then(function(){return je.length>Re+Ke&&Te(Re+_e)})})}var Me=an(v)&&v.limit===1/0&&(typeof l!="function"||l===ns)&&{index:v.index,range:v.range};return Te(0).then(function(){if(0<me.length)throw new te("Error modifying one or more objects",me,Se,Pe);return je.length})})})},Zt.prototype.delete=function(){var l=this._ctx,f=l.range;return an(l)&&(l.isPrimKey||f.type===3)?this._write(function(v){var _=l.table.core.schema.primaryKey,D=f;return l.table.core.count({trans:v,query:{index:_,range:D}}).then(function(U){return l.table.core.mutate({trans:v,type:"deleteRange",range:D}).then(function(ee){var ce=ee.failures;if(ee.lastResult,ee.results,ee=ee.numFailures,ee)throw new te("Could not delete some values",Object.keys(ce).map(function(ye){return ce[ye]}),U-ee);return U-ee})})}):this.modify(ns)},Zt);function Zt(){}var ns=function(l,f){return f.value=null};function Qs(l,f){return l<f?-1:l===f?0:1}function Js(l,f){return f<l?-1:l===f?0:1}function Lr(l,f,v){return l=l instanceof Ls?new l.Collection(l):l,l._ctx.error=new(v||TypeError)(f),l}function Hn(l){return new l.Collection(l,function(){return Qr("")}).limit(0)}function ui(l,f,v,_){var D,U,ee,ce,ye,Ne,_e,ue=v.length;if(!v.every(function(Se){return typeof Se=="string"}))return Lr(l,_s);function ke(Se){D=Se==="next"?function(je){return je.toUpperCase()}:function(je){return je.toLowerCase()},U=Se==="next"?function(je){return je.toLowerCase()}:function(je){return je.toUpperCase()},ee=Se==="next"?Qs:Js;var Pe=v.map(function(je){return{lower:U(je),upper:D(je)}}).sort(function(je,Te){return ee(je.lower,Te.lower)});ce=Pe.map(function(je){return je.upper}),ye=Pe.map(function(je){return je.lower}),_e=(Ne=Se)==="next"?"":_}ke("next"),l=new l.Collection(l,function(){return Wn(ce[0],ye[ue-1]+_)}),l._ondirectionchange=function(Se){ke(Se)};var me=0;return l._addAlgorithm(function(Se,Pe,je){var Te=Se.key;if(typeof Te!="string")return!1;var Me=U(Te);if(f(Me,ye,me))return!0;for(var Re=null,Ke=me;Ke<ue;++Ke){var nt=function(dt,it,st,ht,ot,ft){for(var St=Math.min(dt.length,ht.length),At=-1,Ct=0;Ct<St;++Ct){var nr=it[Ct];if(nr!==ht[Ct])return ot(dt[Ct],st[Ct])<0?dt.substr(0,Ct)+st[Ct]+st.substr(Ct+1):ot(dt[Ct],ht[Ct])<0?dt.substr(0,Ct)+ht[Ct]+st.substr(Ct+1):0<=At?dt.substr(0,At)+it[At]+st.substr(At+1):null;ot(dt[Ct],nr)<0&&(At=Ct)}return St<ht.length&&ft==="next"?dt+st.substr(dt.length):St<dt.length&&ft==="prev"?dt.substr(0,st.length):At<0?null:dt.substr(0,At)+ht[At]+st.substr(At+1)}(Te,Me,ce[Ke],ye[Ke],ee,Ne);nt===null&&Re===null?me=Ke+1:(Re===null||0<ee(Re,nt))&&(Re=nt)}return Pe(Re!==null?function(){Se.continue(Re+_e)}:je),!1}),l}function Wn(l,f,v,_){return{type:2,lower:l,upper:f,lowerOpen:v,upperOpen:_}}function Qr(l){return{type:1,lower:l,upper:l}}var Ls=(Object.defineProperty(Pr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Pr.prototype.between=function(l,f,v,_){v=v!==!1,_=_===!0;try{return 0<this._cmp(l,f)||this._cmp(l,f)===0&&(v||_)&&(!v||!_)?Hn(this):new this.Collection(this,function(){return Wn(l,f,!v,!_)})}catch{return Lr(this,Un)}},Pr.prototype.equals=function(l){return l==null?Lr(this,Un):new this.Collection(this,function(){return Qr(l)})},Pr.prototype.above=function(l){return l==null?Lr(this,Un):new this.Collection(this,function(){return Wn(l,void 0,!0)})},Pr.prototype.aboveOrEqual=function(l){return l==null?Lr(this,Un):new this.Collection(this,function(){return Wn(l,void 0,!1)})},Pr.prototype.below=function(l){return l==null?Lr(this,Un):new this.Collection(this,function(){return Wn(void 0,l,!1,!0)})},Pr.prototype.belowOrEqual=function(l){return l==null?Lr(this,Un):new this.Collection(this,function(){return Wn(void 0,l)})},Pr.prototype.startsWith=function(l){return typeof l!="string"?Lr(this,_s):this.between(l,l+Zn,!0,!0)},Pr.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):ui(this,function(f,v){return f.indexOf(v[0])===0},[l],Zn)},Pr.prototype.equalsIgnoreCase=function(l){return ui(this,function(f,v){return f===v[0]},[l],"")},Pr.prototype.anyOfIgnoreCase=function(){var l=ge.apply(ie,arguments);return l.length===0?Hn(this):ui(this,function(f,v){return v.indexOf(f)!==-1},l,"")},Pr.prototype.startsWithAnyOfIgnoreCase=function(){var l=ge.apply(ie,arguments);return l.length===0?Hn(this):ui(this,function(f,v){return v.some(function(_){return f.indexOf(_)===0})},l,Zn)},Pr.prototype.anyOf=function(){var l=this,f=ge.apply(ie,arguments),v=this._cmp;try{f.sort(v)}catch{return Lr(this,Un)}if(f.length===0)return Hn(this);var _=new this.Collection(this,function(){return Wn(f[0],f[f.length-1])});_._ondirectionchange=function(U){v=U==="next"?l._ascending:l._descending,f.sort(v)};var D=0;return _._addAlgorithm(function(U,ee,ce){for(var ye=U.key;0<v(ye,f[D]);)if(++D===f.length)return ee(ce),!1;return v(ye,f[D])===0||(ee(function(){U.continue(f[D])}),!1)}),_},Pr.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Pr.prototype.noneOf=function(){var l=ge.apply(ie,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return Lr(this,Un)}var f=l.reduce(function(v,_){return v?v.concat([[v[v.length-1][1],_]]):[[-1/0,_]]},null);return f.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Pr.prototype.inAnyRange=function(Te,f){var v=this,_=this._cmp,D=this._ascending,U=this._descending,ee=this._min,ce=this._max;if(Te.length===0)return Hn(this);if(!Te.every(function(Me){return Me[0]!==void 0&&Me[1]!==void 0&&D(Me[0],Me[1])<=0}))return Lr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var ye=!f||f.includeLowers!==!1,Ne=f&&f.includeUppers===!0,_e,ue=D;function ke(Me,Re){return ue(Me[0],Re[0])}try{(_e=Te.reduce(function(Me,Re){for(var Ke=0,nt=Me.length;Ke<nt;++Ke){var dt=Me[Ke];if(_(Re[0],dt[1])<0&&0<_(Re[1],dt[0])){dt[0]=ee(dt[0],Re[0]),dt[1]=ce(dt[1],Re[1]);break}}return Ke===nt&&Me.push(Re),Me},[])).sort(ke)}catch{return Lr(this,Un)}var me=0,Se=Ne?function(Me){return 0<D(Me,_e[me][1])}:function(Me){return 0<=D(Me,_e[me][1])},Pe=ye?function(Me){return 0<U(Me,_e[me][0])}:function(Me){return 0<=U(Me,_e[me][0])},je=Se,Te=new this.Collection(this,function(){return Wn(_e[0][0],_e[_e.length-1][1],!ye,!Ne)});return Te._ondirectionchange=function(Me){ue=Me==="next"?(je=Se,D):(je=Pe,U),_e.sort(ke)},Te._addAlgorithm(function(Me,Re,Ke){for(var nt,dt=Me.key;je(dt);)if(++me===_e.length)return Re(Ke),!1;return!Se(nt=dt)&&!Pe(nt)||(v._cmp(dt,_e[me][1])===0||v._cmp(dt,_e[me][0])===0||Re(function(){ue===D?Me.continue(_e[me][0]):Me.continue(_e[me][1])}),!1)}),Te},Pr.prototype.startsWithAnyOf=function(){var l=ge.apply(ie,arguments);return l.every(function(f){return typeof f=="string"})?l.length===0?Hn(this):this.inAnyRange(l.map(function(f){return[f,f+Zn]})):Lr(this,"startsWithAnyOf() only works with strings")},Pr);function Pr(){}function Dt(l){return Ht(function(f){return Xi(f),l(f.target.error),!1})}function Xi(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var Zi="storagemutated",En="x-storagemutated-1",Kn=ci(null,Zi),Ps=(dn.prototype._lock=function(){return q(!ut.global),++this._reculock,this._reculock!==1||ut.global||(ut.lockOwnerFor=this),this},dn.prototype._unlock=function(){if(q(!ut.global),--this._reculock==0)for(ut.global||(ut.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{Dn(l[1],l[0])}catch{}}return this},dn.prototype._locked=function(){return this._reculock&&ut.lockOwnerFor!==this},dn.prototype.create=function(l){var f=this;if(!this.mode)return this;var v=this.db.idbdb,_=this.db._state.dbOpenError;if(q(!this.idbtrans),!l&&!v)switch(_&&_.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(_);case"MissingAPIError":throw new fe.MissingAPI(_.message,_);default:throw new fe.OpenFailed(_)}if(!this.active)throw new fe.TransactionInactive;return q(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ht(function(D){Xi(D),f._reject(l.error)}),l.onabort=Ht(function(D){Xi(D),f.active&&f._reject(new fe.Abort(l.error)),f.active=!1,f.on("abort").fire(D)}),l.oncomplete=Ht(function(){f.active=!1,f._resolve(),"mutatedParts"in l&&Kn.storagemutated.fire(l.mutatedParts)}),this},dn.prototype._promise=function(l,f,v){var _=this;if(l==="readwrite"&&this.mode!=="readwrite")return fr(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return fr(new fe.TransactionInactive);if(this._locked())return new at(function(U,ee){_._blockedFuncs.push([function(){_._promise(l,f,v).then(U,ee)},ut])});if(v)return Wr(function(){var U=new at(function(ee,ce){_._lock();var ye=f(ee,ce,_);ye&&ye.then&&ye.then(ee,ce)});return U.finally(function(){return _._unlock()}),U._lib=!0,U});var D=new at(function(U,ee){var ce=f(U,ee,_);ce&&ce.then&&ce.then(U,ee)});return D._lib=!0,D},dn.prototype._root=function(){return this.parent?this.parent._root():this},dn.prototype.waitFor=function(l){var f,v=this._root(),_=at.resolve(l);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return _}):(v._waitingFor=_,v._waitingQueue=[],f=v.idbtrans.objectStore(v.storeNames[0]),function U(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(f.get(-1/0).onsuccess=U)}());var D=v._waitingFor;return new at(function(U,ee){_.then(function(ce){return v._waitingQueue.push(Ht(U.bind(null,ce)))},function(ce){return v._waitingQueue.push(Ht(ee.bind(null,ce)))}).finally(function(){v._waitingFor===D&&(v._waitingFor=null)})})},dn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},dn.prototype.table=function(l){var f=this._memoizedTables||(this._memoizedTables={});if(b(f,l))return f[l];var v=this.schema[l];if(!v)throw new fe.NotFound("Table "+l+" not part of transaction");return v=new this.db.Table(l,v,this),v.core=this.db.core.table(l),f[l]=v},dn);function dn(){}function ea(l,f,v,_,D,U,ee){return{name:l,keyPath:f,unique:v,multi:_,auto:D,compound:U,src:(v&&!ee?"&":"")+(_?"*":"")+(D?"++":"")+ks(f)}}function ks(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function is(l,f,v){return{name:l,primKey:f,indexes:v,mappedClass:null,idxByName:(_=function(D){return[D.name,D]},v.reduce(function(D,U,ee){return ee=_(U,ee),ee&&(D[ee[0]]=ee[1]),D},{}))};var _}var ta=function(l){try{return l.only([[]]),ta=function(){return[[]]},[[]]}catch{return ta=function(){return Zn},Zn}};function ra(l){return l==null?function(){}:typeof l=="string"?(f=l).split(".").length===1?function(v){return v[f]}:function(v){return X(v,f)}:function(v){return X(v,l)};var f}function Di(l){return[].slice.call(l)}var Ei=0;function na(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function ia(l,f,ye){function _(je){if(je.type===3)return null;if(je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=je.lower,Se=je.upper,Pe=je.lowerOpen,je=je.upperOpen;return me===void 0?Se===void 0?null:f.upperBound(Se,!!je):Se===void 0?f.lowerBound(me,!!Pe):f.bound(me,Se,!!Pe,!!je)}function D(ke){var me,Se=ke.name;return{name:Se,schema:ke,mutate:function(Pe){var je=Pe.trans,Te=Pe.type,Me=Pe.keys,Re=Pe.values,Ke=Pe.range;return new Promise(function(nt,dt){nt=Ht(nt);var it=je.objectStore(Se),st=it.keyPath==null,ht=Te==="put"||Te==="add";if(!ht&&Te!=="delete"&&Te!=="deleteRange")throw new Error("Invalid operation type: "+Te);var ot,ft=(Me||Re||{length:1}).length;if(Me&&Re&&Me.length!==Re.length)throw new Error("Given keys array must have same length as given values array.");if(ft===0)return nt({numFailures:0,failures:{},results:[],lastResult:void 0});function St(Zr){++nr,Xi(Zr)}var At=[],Ct=[],nr=0;if(Te==="deleteRange"){if(Ke.type===4)return nt({numFailures:nr,failures:Ct,results:[],lastResult:void 0});Ke.type===3?At.push(ot=it.clear()):At.push(ot=it.delete(_(Ke)))}else{var st=ht?st?[Re,Me]:[Re,null]:[Me,null],It=st[0],Dr=st[1];if(ht)for(var kr=0;kr<ft;++kr)At.push(ot=Dr&&Dr[kr]!==void 0?it[Te](It[kr],Dr[kr]):it[Te](It[kr])),ot.onerror=St;else for(kr=0;kr<ft;++kr)At.push(ot=it[Te](It[kr])),ot.onerror=St}function ha(Zr){Zr=Zr.target.result,At.forEach(function(ri,fn){return ri.error!=null&&(Ct[fn]=ri.error)}),nt({numFailures:nr,failures:Ct,results:Te==="delete"?Me:At.map(function(ri){return ri.result}),lastResult:Zr})}ot.onerror=function(Zr){St(Zr),ha(Zr)},ot.onsuccess=ha})},getMany:function(Pe){var je=Pe.trans,Te=Pe.keys;return new Promise(function(Me,Re){Me=Ht(Me);for(var Ke,nt=je.objectStore(Se),dt=Te.length,it=new Array(dt),st=0,ht=0,ot=function(At){At=At.target,it[At._pos]=At.result,++ht===st&&Me(it)},ft=Dt(Re),St=0;St<dt;++St)Te[St]!=null&&((Ke=nt.get(Te[St]))._pos=St,Ke.onsuccess=ot,Ke.onerror=ft,++st);st===0&&Me(it)})},get:function(Pe){var je=Pe.trans,Te=Pe.key;return new Promise(function(Me,Re){Me=Ht(Me);var Ke=je.objectStore(Se).get(Te);Ke.onsuccess=function(nt){return Me(nt.target.result)},Ke.onerror=Dt(Re)})},query:(me=Ne,function(Pe){return new Promise(function(je,Te){je=Ht(je);var Me,Re,Ke,st=Pe.trans,nt=Pe.values,dt=Pe.limit,ot=Pe.query,it=dt===1/0?void 0:dt,ht=ot.index,ot=ot.range,st=st.objectStore(Se),ht=ht.isPrimaryKey?st:st.index(ht.name),ot=_(ot);if(dt===0)return je({result:[]});me?((it=nt?ht.getAll(ot,it):ht.getAllKeys(ot,it)).onsuccess=function(ft){return je({result:ft.target.result})},it.onerror=Dt(Te)):(Me=0,Re=!nt&&"openKeyCursor"in ht?ht.openKeyCursor(ot):ht.openCursor(ot),Ke=[],Re.onsuccess=function(ft){var St=Re.result;return St?(Ke.push(nt?St.value:St.primaryKey),++Me===dt?je({result:Ke}):void St.continue()):je({result:Ke})},Re.onerror=Dt(Te))})}),openCursor:function(Pe){var je=Pe.trans,Te=Pe.values,Me=Pe.query,Re=Pe.reverse,Ke=Pe.unique;return new Promise(function(nt,dt){nt=Ht(nt);var ht=Me.index,it=Me.range,st=je.objectStore(Se),st=ht.isPrimaryKey?st:st.index(ht.name),ht=Re?Ke?"prevunique":"prev":Ke?"nextunique":"next",ot=!Te&&"openKeyCursor"in st?st.openKeyCursor(_(it),ht):st.openCursor(_(it),ht);ot.onerror=Dt(dt),ot.onsuccess=Ht(function(ft){var St,At,Ct,nr,It=ot.result;It?(It.___id=++Ei,It.done=!1,St=It.continue.bind(It),At=(At=It.continuePrimaryKey)&&At.bind(It),Ct=It.advance.bind(It),nr=function(){throw new Error("Cursor not stopped")},It.trans=je,It.stop=It.continue=It.continuePrimaryKey=It.advance=function(){throw new Error("Cursor not started")},It.fail=Ht(dt),It.next=function(){var Dr=this,kr=1;return this.start(function(){return kr--?Dr.continue():Dr.stop()}).then(function(){return Dr})},It.start=function(Dr){function kr(){if(ot.result)try{Dr()}catch(Zr){It.fail(Zr)}else It.done=!0,It.start=function(){throw new Error("Cursor behind last entry")},It.stop()}var ha=new Promise(function(Zr,ri){Zr=Ht(Zr),ot.onerror=Dt(ri),It.fail=ri,It.stop=function(fn){It.stop=It.continue=It.continuePrimaryKey=It.advance=nr,Zr(fn)}});return ot.onsuccess=Ht(function(Zr){ot.onsuccess=kr,kr()}),It.continue=St,It.continuePrimaryKey=At,It.advance=Ct,kr(),ha},nt(It)):nt(null)},dt)})},count:function(Pe){var je=Pe.query,Te=Pe.trans,Me=je.index,Re=je.range;return new Promise(function(Ke,nt){var dt=Te.objectStore(Se),it=Me.isPrimaryKey?dt:dt.index(Me.name),dt=_(Re),it=dt?it.count(dt):it.count();it.onsuccess=Ht(function(st){return Ke(st.target.result)}),it.onerror=Dt(nt)})}}}var U,ee,ce,_e=(ee=ye,ce=Di((U=l).objectStoreNames),{schema:{name:U.name,tables:ce.map(function(ke){return ee.objectStore(ke)}).map(function(ke){var me=ke.keyPath,je=ke.autoIncrement,Se=u(me),Pe={},je={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:Se,keyPath:me,autoIncrement:je,unique:!0,extractKey:ra(me)},indexes:Di(ke.indexNames).map(function(Te){return ke.index(Te)}).map(function(Ke){var Me=Ke.name,Re=Ke.unique,nt=Ke.multiEntry,Ke=Ke.keyPath,nt={name:Me,compound:u(Ke),keyPath:Ke,unique:Re,multiEntry:nt,extractKey:ra(Ke)};return Pe[na(Ke)]=nt}),getIndexByKeyPath:function(Te){return Pe[na(Te)]}};return Pe[":id"]=je.primaryKey,me!=null&&(Pe[na(me)]=je.primaryKey),je})},hasGetAll:0<ce.length&&"getAll"in ee.objectStore(ce[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ye=_e.schema,Ne=_e.hasGetAll,_e=ye.tables.map(D),ue={};return _e.forEach(function(ke){return ue[ke.name]=ke}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(ke){if(!ue[ke])throw new Error("Table '".concat(ke,"' not found"));return ue[ke]},MIN_KEY:-1/0,MAX_KEY:ta(f),schema:ye}}function as(l,f,v,_){var D=v.IDBKeyRange;return v.indexedDB,{dbcore:(_=ia(f,D,_),l.dbcore.reduce(function(U,ee){return ee=ee.create,n(n({},U),ee(U))},_))}}function di(l,_){var v=_.db,_=as(l._middlewares,v,l._deps,_);l.core=_.dbcore,l.tables.forEach(function(D){var U=D.name;l.core.schema.tables.some(function(ee){return ee.name===U})&&(D.core=l.core.table(U),l[U]instanceof l.Table&&(l[U].core=D.core))})}function aa(l,f,v,_){v.forEach(function(D){var U=_[D];f.forEach(function(ee){var ce=function ye(Ne,_e){return E(Ne,_e)||(Ne=y(Ne))&&ye(Ne,_e)}(ee,D);(!ce||"value"in ce&&ce.value===void 0)&&(ee===l.Transaction.prototype||ee instanceof l.Transaction?P(ee,D,{get:function(){return this.table(D)},set:function(ye){m(this,D,{value:ye,writable:!0,configurable:!0,enumerable:!0})}}):ee[D]=new l.Table(D,U))})})}function Na(l,f){f.forEach(function(v){for(var _ in v)v[_]instanceof l.Table&&delete v[_]})}function Cs(l,f){return l._cfg.version-f._cfg.version}function Fs(l,f,v,_){var D=l._dbSchema;v.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=is("$meta",Ds("")[0],[]),l._storeNames.push("$meta"));var U=l._createTransaction("readwrite",l._storeNames,D);U.create(v),U._completion.catch(_);var ee=U._reject.bind(U),ce=ut.transless||ut;Wr(function(){return ut.trans=U,ut.transless=ce,f!==0?(di(l,v),Ne=f,((ye=U).storeNames.includes("$meta")?ye.table("$meta").get("version").then(function(_e){return _e??Ne}):at.resolve(Ne)).then(function(_e){return ke=_e,me=U,Se=v,Pe=[],_e=(ue=l)._versions,je=ue._dbSchema=Ii(0,ue.idbdb,Se),(_e=_e.filter(function(Te){return Te._cfg.version>=ke})).length!==0?(_e.forEach(function(Te){Pe.push(function(){var Me=je,Re=Te._cfg.dbschema;ti(ue,Me,Se),ti(ue,Re,Se),je=ue._dbSchema=Re;var Ke=Vn(Me,Re);Ke.add.forEach(function(ht){ss(Se,ht[0],ht[1].primKey,ht[1].indexes)}),Ke.change.forEach(function(ht){if(ht.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var ot=Se.objectStore(ht.name);ht.add.forEach(function(ft){return yn(ot,ft)}),ht.change.forEach(function(ft){ot.deleteIndex(ft.name),yn(ot,ft)}),ht.del.forEach(function(ft){return ot.deleteIndex(ft)})});var nt=Te._cfg.contentUpgrade;if(nt&&Te._cfg.version>ke){di(ue,Se),me._memoizedTables={};var dt=T(Re);Ke.del.forEach(function(ht){dt[ht]=Me[ht]}),Na(ue,[ue.Transaction.prototype]),aa(ue,[ue.Transaction.prototype],c(dt),dt),me.schema=dt;var it,st=Oe(nt);return st&&nn(),Ke=at.follow(function(){var ht;(it=nt(me))&&st&&(ht=Kr.bind(null,null),it.then(ht,ht))}),it&&typeof it.then=="function"?at.resolve(it):Ke.then(function(){return it})}}),Pe.push(function(Me){var Re,Ke,nt=Te._cfg.dbschema;Re=nt,Ke=Me,[].slice.call(Ke.db.objectStoreNames).forEach(function(dt){return Re[dt]==null&&Ke.db.deleteObjectStore(dt)}),Na(ue,[ue.Transaction.prototype]),aa(ue,[ue.Transaction.prototype],ue._storeNames,ue._dbSchema),me.schema=ue._dbSchema}),Pe.push(function(Me){ue.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ue.idbdb.version/10)===Te._cfg.version?(ue.idbdb.deleteObjectStore("$meta"),delete ue._dbSchema.$meta,ue._storeNames=ue._storeNames.filter(function(Re){return Re!=="$meta"})):Me.objectStore("$meta").put(Te._cfg.version,"version"))})}),function Te(){return Pe.length?at.resolve(Pe.shift()(me.idbtrans)).then(Te):at.resolve()}().then(function(){hi(je,Se)})):at.resolve();var ue,ke,me,Se,Pe,je}).catch(ee)):(c(D).forEach(function(_e){ss(v,_e,D[_e].primKey,D[_e].indexes)}),di(l,v),void at.follow(function(){return l.on.populate.fire(U)}).catch(ee));var ye,Ne})}function ei(l,f){hi(l._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var v=Ii(0,l.idbdb,f);ti(l,l._dbSchema,f);for(var _=0,D=Vn(v,l._dbSchema).change;_<D.length;_++){var U=function(ee){if(ee.change.length||ee.recreate)return console.warn("Unable to patch indexes of table ".concat(ee.name," because it has changes on the type of index or primary key.")),{value:void 0};var ce=f.objectStore(ee.name);ee.add.forEach(function(ye){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ee.name,".").concat(ye.src)),yn(ce,ye)})}(D[_]);if(typeof U=="object")return U.value}}function Vn(l,f){var v,_={del:[],add:[],change:[]};for(v in l)f[v]||_.del.push(v);for(v in f){var D=l[v],U=f[v];if(D){var ee={name:v,def:U,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(U.primKey.keyPath||"")||D.primKey.auto!==U.primKey.auto)ee.recreate=!0,_.change.push(ee);else{var ce=D.idxByName,ye=U.idxByName,Ne=void 0;for(Ne in ce)ye[Ne]||ee.del.push(Ne);for(Ne in ye){var _e=ce[Ne],ue=ye[Ne];_e?_e.src!==ue.src&&ee.change.push(ue):ee.add.push(ue)}(0<ee.del.length||0<ee.add.length||0<ee.change.length)&&_.change.push(ee)}}else _.add.push([v,U])}return _}function ss(l,f,v,_){var D=l.db.createObjectStore(f,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return _.forEach(function(U){return yn(D,U)}),D}function hi(l,f){c(l).forEach(function(v){f.db.objectStoreNames.contains(v)||(de&&console.debug("Dexie: Creating missing table",v),ss(f,v,l[v].primKey,l[v].indexes))})}function yn(l,f){l.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function Ii(l,f,v){var _={};return A(f.objectStoreNames,0).forEach(function(D){for(var U=v.objectStore(D),ee=ea(ks(Ne=U.keyPath),Ne||"",!0,!1,!!U.autoIncrement,Ne&&typeof Ne!="string",!0),ce=[],ye=0;ye<U.indexNames.length;++ye){var _e=U.index(U.indexNames[ye]),Ne=_e.keyPath,_e=ea(_e.name,Ne,!!_e.unique,!!_e.multiEntry,!1,Ne&&typeof Ne!="string",!1);ce.push(_e)}_[D]=is(D,ee,ce)}),_}function ti(l,f,v){for(var _=v.db.objectStoreNames,D=0;D<_.length;++D){var U=_[D],ee=v.objectStore(U);l._hasGetAll="getAll"in ee;for(var ce=0;ce<ee.indexNames.length;++ce){var ye=ee.indexNames[ce],Ne=ee.index(ye).keyPath,_e=typeof Ne=="string"?Ne:"["+A(Ne).join("+")+"]";!f[U]||(Ne=f[U].idxByName[_e])&&(Ne.name=ye,delete f[U].idxByName[_e],f[U].idxByName[ye]=Ne)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function Ds(l){return l.split(",").map(function(f,v){var _=(f=f.trim()).replace(/([&*]|\+\+)/g,""),D=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return ea(_,D||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),u(D),v===0)})}var Sa=(ja.prototype._parseStoresSpec=function(l,f){c(l).forEach(function(v){if(l[v]!==null){var _=Ds(l[v]),D=_.shift();if(D.unique=!0,D.multi)throw new fe.Schema("Primary key cannot be multi-valued");_.forEach(function(U){if(U.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),f[v]=is(v,D,_)}})},ja.prototype.stores=function(v){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,v):v;var v=f._versions,_={},D={};return v.forEach(function(U){h(_,U._cfg.storesSource),D=U._cfg.dbschema={},U._parseStoresSpec(_,D)}),f._dbSchema=D,Na(f,[f._allTables,f,f.Transaction.prototype]),aa(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],c(D),D),f._storeNames=c(D),this},ja.prototype.upgrade=function(l){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||Ve,l),this},ja);function ja(){}function sa(l,f){var v=l._dbNamesDB;return v||(v=l._dbNamesDB=new bn(Gi,{addons:[],indexedDB:l,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function oa(l){return l&&typeof l.databases=="function"}function Aa(l){return Wr(function(){return ut.letThrough=!0,l()})}function Oi(l){return!("from"in l)}var Cr=function(l,f){if(!this){var v=new Cr;return l&&"d"in l&&h(v,l),v}h(this,arguments.length?{d:1,from:l,to:1<arguments.length?f:l}:{d:0})};function fi(l,f,v){var _=Jt(f,v);if(!isNaN(_)){if(0<_)throw RangeError();if(Oi(l))return h(l,{from:f,to:v,d:1});var D=l.l,_=l.r;if(Jt(v,l.from)<0)return D?fi(D,f,v):l.l={from:f,to:v,d:1,l:null,r:null},Mi(l);if(0<Jt(f,l.to))return _?fi(_,f,v):l.r={from:f,to:v,d:1,l:null,r:null},Mi(l);Jt(f,l.from)<0&&(l.from=f,l.l=null,l.d=_?_.d+1:1),0<Jt(v,l.to)&&(l.to=v,l.r=null,l.d=l.l?l.l.d+1:1),v=!l.r,D&&!l.l&&Ti(l,D),_&&v&&Ti(l,_)}}function Ti(l,f){Oi(f)||function v(_,ye){var U=ye.from,ee=ye.to,ce=ye.l,ye=ye.r;fi(_,U,ee),ce&&v(_,ce),ye&&v(_,ye)}(l,f)}function Es(l,f){var v=pi(f),_=v.next();if(_.done)return!1;for(var D=_.value,U=pi(l),ee=U.next(D.from),ce=ee.value;!_.done&&!ee.done;){if(Jt(ce.from,D.to)<=0&&0<=Jt(ce.to,D.from))return!0;Jt(D.from,ce.from)<0?D=(_=v.next(ce.from)).value:ce=(ee=U.next(D.from)).value}return!1}function pi(l){var f=Oi(l)?null:{s:0,n:l};return{next:function(v){for(var _=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,_)for(;f.n.l&&Jt(v,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!_||Jt(v,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Mi(l){var f,v,_=(((f=l.r)===null||f===void 0?void 0:f.d)||0)-(((v=l.l)===null||v===void 0?void 0:v.d)||0),D=1<_?"r":_<-1?"l":"";D&&(f=D=="r"?"l":"r",v=n({},l),_=l[D],l.from=_.from,l.to=_.to,l[D]=_[D],v[D]=_[f],(l[f]=v).d=_a(v)),l.d=_a(l)}function _a(v){var f=v.r,v=v.l;return(f?v?Math.max(f.d,v.d):f.d:v?v.d:0)+1}function Gn(l,f){return c(f).forEach(function(v){l[v]?Ti(l[v],f[v]):l[v]=function _(D){var U,ee,ce={};for(U in D)b(D,U)&&(ee=D[U],ce[U]=!ee||typeof ee!="object"||C.has(ee.constructor)?ee:_(ee));return ce}(f[v])}),l}function la(l,f){return l.all||f.all||Object.keys(l).some(function(v){return f[v]&&Es(f[v],l[v])})}w(Cr.prototype,((Xr={add:function(l){return Ti(this,l),this},addKey:function(l){return fi(this,l,l),this},addKeys:function(l){var f=this;return l.forEach(function(v){return fi(f,v,v)}),this},hasKey:function(l){var f=pi(this).next(l).value;return f&&Jt(f.from,l)<=0&&0<=Jt(f.to,l)}})[$]=function(){return pi(this)},Xr));var p={},I={},se=!1;function pe(l){Gn(I,l),se||(se=!0,setTimeout(function(){se=!1,Ce(I,!(I={}))},0))}function Ce(l,f){f===void 0&&(f=!1);var v=new Set;if(l.all)for(var _=0,D=Object.values(p);_<D.length;_++)We(ee=D[_],l,v,f);else for(var U in l){var ee,ce=/^idb\:\/\/(.*)\/(.*)\//.exec(U);ce&&(U=ce[1],ce=ce[2],(ee=p["idb://".concat(U,"/").concat(ce)])&&We(ee,l,v,f))}v.forEach(function(ye){return ye()})}function We(l,f,v,_){for(var D=[],U=0,ee=Object.entries(l.queries.query);U<ee.length;U++){for(var ce=ee[U],ye=ce[0],Ne=[],_e=0,ue=ce[1];_e<ue.length;_e++){var ke=ue[_e];la(f,ke.obsSet)?ke.subscribers.forEach(function(je){return v.add(je)}):_&&Ne.push(ke)}_&&D.push([ye,Ne])}if(_)for(var me=0,Se=D;me<Se.length;me++){var Pe=Se[me],ye=Pe[0],Ne=Pe[1];l.queries.query[ye]=Ne}}function tt(l){var f=l._state,v=l._deps.indexedDB;if(f.isBeingOpened||l.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?fr(f.dbOpenError):l});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var _=f.openCanceller,D=Math.round(10*l.verno),U=!1;function ee(){if(f.openCanceller!==_)throw new fe.DatabaseClosed("db.open() was cancelled")}function ce(){return new at(function(ke,me){if(ee(),!v)throw new fe.MissingAPI;var Se=l.name,Pe=f.autoSchema||!D?v.open(Se):v.open(Se,D);if(!Pe)throw new fe.MissingAPI;Pe.onerror=Dt(me),Pe.onblocked=Ht(l._fireOnBlocked),Pe.onupgradeneeded=Ht(function(je){var Te;_e=Pe.transaction,f.autoSchema&&!l._options.allowEmptyDB?(Pe.onerror=Xi,_e.abort(),Pe.result.close(),(Te=v.deleteDatabase(Se)).onsuccess=Te.onerror=Ht(function(){me(new fe.NoSuchDatabase("Database ".concat(Se," doesnt exist")))})):(_e.onerror=Dt(me),je=je.oldVersion>Math.pow(2,62)?0:je.oldVersion,ue=je<1,l.idbdb=Pe.result,U&&ei(l,_e),Fs(l,je/10,_e,me))},me),Pe.onsuccess=Ht(function(){_e=null;var je,Te,Me,Re,Ke,nt=l.idbdb=Pe.result,dt=A(nt.objectStoreNames);if(0<dt.length)try{var it=nt.transaction((Re=dt).length===1?Re[0]:Re,"readonly");if(f.autoSchema)Te=nt,Me=it,(je=l).verno=Te.version/10,Me=je._dbSchema=Ii(0,Te,Me),je._storeNames=A(Te.objectStoreNames,0),aa(je,[je._allTables],c(Me),Me);else if(ti(l,l._dbSchema,it),((Ke=Vn(Ii(0,(Ke=l).idbdb,it),Ke._dbSchema)).add.length||Ke.change.some(function(st){return st.add.length||st.change.length}))&&!U)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),nt.close(),D=nt.version+1,U=!0,ke(ce());di(l,it)}catch{}zn.push(l),nt.onversionchange=Ht(function(st){f.vcFired=!0,l.on("versionchange").fire(st)}),nt.onclose=Ht(function(st){l.on("close").fire(st)}),ue&&(Ke=l._deps,it=Se,nt=Ke.indexedDB,Ke=Ke.IDBKeyRange,oa(nt)||it===Gi||sa(nt,Ke).put({name:it}).catch(Ve)),ke()},me)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ce();break;case"VersionError":if(0<D)return D=0,ce()}return at.reject(ke)})}var ye,Ne=f.dbReadyResolve,_e=null,ue=!1;return at.race([_,(typeof navigator>"u"?at.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function me(){return indexedDB.databases().finally(ke)}ye=setInterval(me,100),me()}).finally(function(){return clearInterval(ye)}):Promise.resolve()).then(ce)]).then(function(){return ee(),f.onReadyBeingFired=[],at.resolve(Aa(function(){return l.on.ready.fire(l.vip)})).then(function ke(){if(0<f.onReadyBeingFired.length){var me=f.onReadyBeingFired.reduce(J,Ve);return f.onReadyBeingFired=[],at.resolve(Aa(function(){return me(l.vip)})).then(ke)}})}).finally(function(){f.openCanceller===_&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(ke){f.dbOpenError=ke;try{_e&&_e.abort()}catch{}return _===f.openCanceller&&l._close(),fr(ke)}).finally(function(){f.openComplete=!0,Ne()}).then(function(){var ke;return ue&&(ke={},l.tables.forEach(function(me){me.schema.indexes.forEach(function(Se){Se.name&&(ke["idb://".concat(l.name,"/").concat(me.name,"/").concat(Se.name)]=new Cr(-1/0,[[[]]]))}),ke["idb://".concat(l.name,"/").concat(me.name,"/")]=ke["idb://".concat(l.name,"/").concat(me.name,"/:dels")]=new Cr(-1/0,[[[]]])}),Kn(Zi).fire(ke),Ce(ke,!0)),l})}function vt(l){function f(U){return l.next(U)}var v=D(f),_=D(function(U){return l.throw(U)});function D(U){return function(ye){var ce=U(ye),ye=ce.value;return ce.done?ye:ye&&typeof ye.then=="function"?ye.then(v,_):u(ye)?Promise.all(ye).then(v,_):v(ye)}}return D(f)()}function kt(l,f,v){for(var _=u(l)?l.slice():[l],D=0;D<v;++D)_.push(f);return _}var Kt={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return n(n({},l),{table:function(f){var v=l.table(f),_=v.schema,D={},U=[];function ee(ue,ke,me){var Se=na(ue),Pe=D[Se]=D[Se]||[],je=ue==null?0:typeof ue=="string"?1:ue.length,Te=0<ke,Te=n(n({},me),{name:Te?"".concat(Se,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Te,keyTail:ke,keyLength:je,extractKey:ra(ue),unique:!Te&&me.unique});return Pe.push(Te),Te.isPrimaryKey||U.push(Te),1<je&&ee(je===2?ue[0]:ue.slice(0,je-1),ke+1,me),Pe.sort(function(Me,Re){return Me.keyTail-Re.keyTail}),Te}f=ee(_.primaryKey.keyPath,0,_.primaryKey),D[":id"]=[f];for(var ce=0,ye=_.indexes;ce<ye.length;ce++){var Ne=ye[ce];ee(Ne.keyPath,0,Ne)}function _e(ue){var ke,me=ue.query.index;return me.isVirtual?n(n({},ue),{query:{index:me.lowLevelIndex,range:(ke=ue.query.range,me=me.keyTail,{type:ke.type===1?2:ke.type,lower:kt(ke.lower,ke.lowerOpen?l.MAX_KEY:l.MIN_KEY,me),lowerOpen:!0,upper:kt(ke.upper,ke.upperOpen?l.MIN_KEY:l.MAX_KEY,me),upperOpen:!0})}}):ue}return n(n({},v),{schema:n(n({},_),{primaryKey:f,indexes:U,getIndexByKeyPath:function(ue){return(ue=D[na(ue)])&&ue[0]}}),count:function(ue){return v.count(_e(ue))},query:function(ue){return v.query(_e(ue))},openCursor:function(ue){var ke=ue.query.index,me=ke.keyTail,Se=ke.isVirtual,Pe=ke.keyLength;return Se?v.openCursor(_e(ue)).then(function(Te){return Te&&je(Te)}):v.openCursor(ue);function je(Te){return Object.create(Te,{continue:{value:function(Me){Me!=null?Te.continue(kt(Me,ue.reverse?l.MAX_KEY:l.MIN_KEY,me)):ue.unique?Te.continue(Te.key.slice(0,Pe).concat(ue.reverse?l.MIN_KEY:l.MAX_KEY,me)):Te.continue()}},continuePrimaryKey:{value:function(Me,Re){Te.continuePrimaryKey(kt(Me,l.MAX_KEY,me),Re)}},primaryKey:{get:function(){return Te.primaryKey}},key:{get:function(){var Me=Te.key;return Pe===1?Me[0]:Me.slice(0,Pe)}},value:{get:function(){return Te.value}}})}}})}})}};function zt(l,f,v,_){return v=v||{},_=_||"",c(l).forEach(function(D){var U,ee,ce;b(f,D)?(U=l[D],ee=f[D],typeof U=="object"&&typeof ee=="object"&&U&&ee?(ce=he(U))!==he(ee)?v[_+D]=f[D]:ce==="Object"?zt(U,ee,v,_+D+"."):U!==ee&&(v[_+D]=f[D]):U!==ee&&(v[_+D]=f[D])):v[_+D]=void 0}),c(f).forEach(function(D){b(l,D)||(v[_+D]=f[D])}),v}function er(l,f){return f.type==="delete"?f.keys:f.keys||f.values.map(l.extractKey)}var xr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return n(n({},l),{table:function(f){var v=l.table(f),_=v.schema.primaryKey;return n(n({},v),{mutate:function(D){var U=ut.trans,ee=U.table(f).hook,ce=ee.deleting,ye=ee.creating,Ne=ee.updating;switch(D.type){case"add":if(ye.fire===Ve)break;return U._promise("readwrite",function(){return _e(D)},!0);case"put":if(ye.fire===Ve&&Ne.fire===Ve)break;return U._promise("readwrite",function(){return _e(D)},!0);case"delete":if(ce.fire===Ve)break;return U._promise("readwrite",function(){return _e(D)},!0);case"deleteRange":if(ce.fire===Ve)break;return U._promise("readwrite",function(){return function ue(ke,me,Se){return v.query({trans:ke,values:!1,query:{index:_,range:me},limit:Se}).then(function(Pe){var je=Pe.result;return _e({type:"delete",keys:je,trans:ke}).then(function(Te){return 0<Te.numFailures?Promise.reject(Te.failures[0]):je.length<Se?{failures:[],numFailures:0,lastResult:void 0}:ue(ke,n(n({},me),{lower:je[je.length-1],lowerOpen:!0}),Se)})})}(D.trans,D.range,1e4)},!0)}return v.mutate(D);function _e(ue){var ke,me,Se,Pe=ut.trans,je=ue.keys||er(_,ue);if(!je)throw new Error("Keys missing");return(ue=ue.type==="add"||ue.type==="put"?n(n({},ue),{keys:je}):n({},ue)).type!=="delete"&&(ue.values=a([],ue.values,!0)),ue.keys&&(ue.keys=a([],ue.keys,!0)),ke=v,Se=je,((me=ue).type==="add"?Promise.resolve([]):ke.getMany({trans:me.trans,keys:Se,cache:"immutable"})).then(function(Te){var Me=je.map(function(Re,Ke){var nt,dt,it,st=Te[Ke],ht={onerror:null,onsuccess:null};return ue.type==="delete"?ce.fire.call(ht,Re,st,Pe):ue.type==="add"||st===void 0?(nt=ye.fire.call(ht,Re,ue.values[Ke],Pe),Re==null&&nt!=null&&(ue.keys[Ke]=Re=nt,_.outbound||M(ue.values[Ke],_.keyPath,Re))):(nt=zt(st,ue.values[Ke]),(dt=Ne.fire.call(ht,nt,Re,st,Pe))&&(it=ue.values[Ke],Object.keys(dt).forEach(function(ot){b(it,ot)?it[ot]=dt[ot]:M(it,ot,dt[ot])}))),ht});return v.mutate(ue).then(function(Re){for(var Ke=Re.failures,nt=Re.results,dt=Re.numFailures,Re=Re.lastResult,it=0;it<je.length;++it){var st=(nt||je)[it],ht=Me[it];st==null?ht.onerror&&ht.onerror(Ke[it]):ht.onsuccess&&ht.onsuccess(ue.type==="put"&&Te[it]?ue.values[it]:st)}return{failures:Ke,results:nt,numFailures:dt,lastResult:Re}}).catch(function(Re){return Me.forEach(function(Ke){return Ke.onerror&&Ke.onerror(Re)}),Promise.reject(Re)})})}}})}})}};function wr(l,f,v){try{if(!f||f.keys.length<l.length)return null;for(var _=[],D=0,U=0;D<f.keys.length&&U<l.length;++D)Jt(f.keys[D],l[U])===0&&(_.push(v?R(f.values[D]):f.values[D]),++U);return _.length===l.length?_:null}catch{return null}}var Fr={stack:"dbcore",level:-1,create:function(l){return{table:function(f){var v=l.table(f);return n(n({},v),{getMany:function(_){if(!_.cache)return v.getMany(_);var D=wr(_.keys,_.trans._cache,_.cache==="clone");return D?at.resolve(D):v.getMany(_).then(function(U){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?R(U):U},U})},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),v.mutate(_)}})}}}};function Jr(l,f){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Tr(l,f){switch(l){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $n={stack:"dbcore",level:0,name:"Observability",create:function(l){var f=l.schema.name,v=new Cr(l.MIN_KEY,l.MAX_KEY);return n(n({},l),{transaction:function(_,D,U){if(ut.subscr&&D!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ut.querier));return l.transaction(_,D,U)},table:function(_){var D=l.table(_),U=D.schema,ee=U.primaryKey,ue=U.indexes,ce=ee.extractKey,ye=ee.outbound,Ne=ee.autoIncrement&&ue.filter(function(me){return me.compound&&me.keyPath.includes(ee.keyPath)}),_e=n(n({},D),{mutate:function(me){function Se(ot){return ot="idb://".concat(f,"/").concat(_,"/").concat(ot),Re[ot]||(Re[ot]=new Cr)}var Pe,je,Te,Me=me.trans,Re=me.mutatedParts||(me.mutatedParts={}),Ke=Se(""),nt=Se(":dels"),dt=me.type,ht=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[er(ee,me).filter(function(ot){return ot}),me.values]:[],it=ht[0],st=ht[1],ht=me.trans._cache;return u(it)?(Ke.addKeys(it),(ht=dt==="delete"||it.length===st.length?wr(it,ht):null)||nt.addKeys(it),(ht||st)&&(Pe=Se,je=ht,Te=st,U.indexes.forEach(function(ot){var ft=Pe(ot.name||"");function St(Ct){return Ct!=null?ot.extractKey(Ct):null}function At(Ct){return ot.multiEntry&&u(Ct)?Ct.forEach(function(nr){return ft.addKey(nr)}):ft.addKey(Ct)}(je||Te).forEach(function(Ct,Dr){var It=je&&St(je[Dr]),Dr=Te&&St(Te[Dr]);Jt(It,Dr)!==0&&(It!=null&&At(It),Dr!=null&&At(Dr))})}))):it?(st={from:(st=it.lower)!==null&&st!==void 0?st:l.MIN_KEY,to:(st=it.upper)!==null&&st!==void 0?st:l.MAX_KEY},nt.add(st),Ke.add(st)):(Ke.add(v),nt.add(v),U.indexes.forEach(function(ot){return Se(ot.name).add(v)})),D.mutate(me).then(function(ot){return!it||me.type!=="add"&&me.type!=="put"||(Ke.addKeys(ot.results),Ne&&Ne.forEach(function(ft){for(var St=me.values.map(function(It){return ft.extractKey(It)}),At=ft.keyPath.findIndex(function(It){return It===ee.keyPath}),Ct=0,nr=ot.results.length;Ct<nr;++Ct)St[Ct][At]=ot.results[Ct];Se(ft.name).addKeys(St)})),Me.mutatedParts=Gn(Me.mutatedParts||{},Re),ot})}}),ue=function(Se){var Pe=Se.query,Se=Pe.index,Pe=Pe.range;return[Se,new Cr((Se=Pe.lower)!==null&&Se!==void 0?Se:l.MIN_KEY,(Pe=Pe.upper)!==null&&Pe!==void 0?Pe:l.MAX_KEY)]},ke={get:function(me){return[ee,new Cr(me.key)]},getMany:function(me){return[ee,new Cr().addKeys(me.keys)]},count:ue,query:ue,openCursor:ue};return c(ke).forEach(function(me){_e[me]=function(Se){var Pe=ut.subscr,je=!!Pe,Te=Jr(ut,D)&&Tr(me,Se)?Se.obsSet={}:Pe;if(je){var Me=function(st){return st="idb://".concat(f,"/").concat(_,"/").concat(st),Te[st]||(Te[st]=new Cr)},Re=Me(""),Ke=Me(":dels"),Pe=ke[me](Se),je=Pe[0],Pe=Pe[1];if((me==="query"&&je.isPrimaryKey&&!Se.values?Ke:Me(je.name||"")).add(Pe),!je.isPrimaryKey){if(me!=="count"){var nt=me==="query"&&ye&&Se.values&&D.query(n(n({},Se),{values:!1}));return D[me].apply(this,arguments).then(function(st){if(me==="query"){if(ye&&Se.values)return nt.then(function(St){return St=St.result,Re.addKeys(St),st});var ht=Se.values?st.result.map(ce):st.result;(Se.values?Re:Ke).addKeys(ht)}else if(me==="openCursor"){var ot=st,ft=Se.values;return ot&&Object.create(ot,{key:{get:function(){return Ke.addKey(ot.primaryKey),ot.key}},primaryKey:{get:function(){var St=ot.primaryKey;return Ke.addKey(St),St}},value:{get:function(){return ft&&Re.addKey(ot.primaryKey),ot.value}}})}return st})}Ke.add(v)}}return D[me].apply(this,arguments)}}),_e}})}};function vn(l,f,v){if(v.numFailures===0)return f;if(f.type==="deleteRange")return null;var _=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return v.numFailures===_?null:(f=n({},f),u(f.keys)&&(f.keys=f.keys.filter(function(D,U){return!(U in v.failures)})),"values"in f&&u(f.values)&&(f.values=f.values.filter(function(D,U){return!(U in v.failures)})),f)}function In(l,f){return v=l,((_=f).lower===void 0||(_.lowerOpen?0<Jt(v,_.lower):0<=Jt(v,_.lower)))&&(l=l,(f=f).upper===void 0||(f.upperOpen?Jt(l,f.upper)<0:Jt(l,f.upper)<=0));var v,_}function os(l,f,ke,_,D,U){if(!ke||ke.length===0)return l;var ee=f.query.index,ce=ee.multiEntry,ye=f.query.range,Ne=_.schema.primaryKey.extractKey,_e=ee.extractKey,ue=(ee.lowLevelIndex||ee).extractKey,ke=ke.reduce(function(me,Se){var Pe=me,je=[];if(Se.type==="add"||Se.type==="put")for(var Te=new Cr,Me=Se.values.length-1;0<=Me;--Me){var Re,Ke=Se.values[Me],nt=Ne(Ke);Te.hasKey(nt)||(Re=_e(Ke),(ce&&u(Re)?Re.some(function(ot){return In(ot,ye)}):In(Re,ye))&&(Te.addKey(nt),je.push(Ke)))}switch(Se.type){case"add":var dt=new Cr().addKeys(f.values?me.map(function(ft){return Ne(ft)}):me),Pe=me.concat(f.values?je.filter(function(ft){return ft=Ne(ft),!dt.hasKey(ft)&&(dt.addKey(ft),!0)}):je.map(function(ft){return Ne(ft)}).filter(function(ft){return!dt.hasKey(ft)&&(dt.addKey(ft),!0)}));break;case"put":var it=new Cr().addKeys(Se.values.map(function(ft){return Ne(ft)}));Pe=me.filter(function(ft){return!it.hasKey(f.values?Ne(ft):ft)}).concat(f.values?je:je.map(function(ft){return Ne(ft)}));break;case"delete":var st=new Cr().addKeys(Se.keys);Pe=me.filter(function(ft){return!st.hasKey(f.values?Ne(ft):ft)});break;case"deleteRange":var ht=Se.range;Pe=me.filter(function(ft){return!In(Ne(ft),ht)})}return Pe},l);return ke===l?l:(ke.sort(function(me,Se){return Jt(ue(me),ue(Se))||Jt(Ne(me),Ne(Se))}),f.limit&&f.limit<1/0&&(ke.length>f.limit?ke.length=f.limit:l.length===f.limit&&ke.length<f.limit&&(D.dirty=!0)),U?Object.freeze(ke):ke)}function La(l,f){return Jt(l.lower,f.lower)===0&&Jt(l.upper,f.upper)===0&&!!l.lowerOpen==!!f.lowerOpen&&!!l.upperOpen==!!f.upperOpen}function ls(l,f){return function(v,_,D,U){if(v===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((_=Jt(v,_))===0){if(D&&U)return 0;if(D)return 1;if(U)return-1}return _}(l.lower,f.lower,l.lowerOpen,f.lowerOpen)<=0&&0<=function(v,_,D,U){if(v===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((_=Jt(v,_))===0){if(D&&U)return 0;if(D)return-1;if(U)return 1}return _}(l.upper,f.upper,l.upperOpen,f.upperOpen)}function Pa(l,f,v,_){l.subscribers.add(v),_.addEventListener("abort",function(){var D,U;l.subscribers.delete(v),l.subscribers.size===0&&(D=l,U=f,setTimeout(function(){D.subscribers.size===0&&ne(U,D)},3e3))})}var cs={stack:"dbcore",level:0,name:"Cache",create:function(l){var f=l.schema.name;return n(n({},l),{transaction:function(v,_,D){var U,ee,ce=l.transaction(v,_,D);return _==="readwrite"&&(ee=(U=new AbortController).signal,D=function(ye){return function(){if(U.abort(),_==="readwrite"){for(var Ne=new Set,_e=0,ue=v;_e<ue.length;_e++){var ke=ue[_e],me=p["idb://".concat(f,"/").concat(ke)];if(me){var Se=l.table(ke),Pe=me.optimisticOps.filter(function(ft){return ft.trans===ce});if(ce._explicit&&ye&&ce.mutatedParts)for(var je=0,Te=Object.values(me.queries.query);je<Te.length;je++)for(var Me=0,Re=(dt=Te[je]).slice();Me<Re.length;Me++)la((it=Re[Me]).obsSet,ce.mutatedParts)&&(ne(dt,it),it.subscribers.forEach(function(ft){return Ne.add(ft)}));else if(0<Pe.length){me.optimisticOps=me.optimisticOps.filter(function(ft){return ft.trans!==ce});for(var Ke=0,nt=Object.values(me.queries.query);Ke<nt.length;Ke++)for(var dt,it,st,ht=0,ot=(dt=nt[Ke]).slice();ht<ot.length;ht++)(it=ot[ht]).res!=null&&ce.mutatedParts&&(ye&&!it.dirty?(st=Object.isFrozen(it.res),st=os(it.res,it.req,Pe,Se,it,st),it.dirty?(ne(dt,it),it.subscribers.forEach(function(ft){return Ne.add(ft)})):st!==it.res&&(it.res=st,it.promise=at.resolve({result:st}))):(it.dirty&&ne(dt,it),it.subscribers.forEach(function(ft){return Ne.add(ft)})))}}}Ne.forEach(function(ft){return ft()})}}},ce.addEventListener("abort",D(!1),{signal:ee}),ce.addEventListener("error",D(!1),{signal:ee}),ce.addEventListener("complete",D(!0),{signal:ee})),ce},table:function(v){var _=l.table(v),D=_.schema.primaryKey;return n(n({},_),{mutate:function(U){var ee=ut.trans;if(D.outbound||ee.db._options.cache==="disabled"||ee.explicit||ee.idbtrans.mode!=="readwrite")return _.mutate(U);var ce=p["idb://".concat(f,"/").concat(v)];return ce?(ee=_.mutate(U),U.type!=="add"&&U.type!=="put"||!(50<=U.values.length||er(D,U).some(function(ye){return ye==null}))?(ce.optimisticOps.push(U),U.mutatedParts&&pe(U.mutatedParts),ee.then(function(ye){0<ye.numFailures&&(ne(ce.optimisticOps,U),(ye=vn(0,U,ye))&&ce.optimisticOps.push(ye),U.mutatedParts&&pe(U.mutatedParts))}),ee.catch(function(){ne(ce.optimisticOps,U),U.mutatedParts&&pe(U.mutatedParts)})):ee.then(function(ye){var Ne=vn(0,n(n({},U),{values:U.values.map(function(_e,ue){var ke;return ye.failures[ue]?_e:(_e=(ke=D.keyPath)!==null&&ke!==void 0&&ke.includes(".")?R(_e):n({},_e),M(_e,D.keyPath,ye.results[ue]),_e)})}),ye);ce.optimisticOps.push(Ne),queueMicrotask(function(){return U.mutatedParts&&pe(U.mutatedParts)})}),ee):_.mutate(U)},query:function(U){if(!Jr(ut,_)||!Tr("query",U))return _.query(U);var ee=((Ne=ut.trans)===null||Ne===void 0?void 0:Ne.db._options.cache)==="immutable",ue=ut,ce=ue.requery,ye=ue.signal,Ne=function(Se,Pe,je,Te){var Me=p["idb://".concat(Se,"/").concat(Pe)];if(!Me)return[];if(!(Pe=Me.queries[je]))return[null,!1,Me,null];var Re=Pe[(Te.query?Te.query.index.name:null)||""];if(!Re)return[null,!1,Me,null];switch(je){case"query":var Ke=Re.find(function(nt){return nt.req.limit===Te.limit&&nt.req.values===Te.values&&La(nt.req.query.range,Te.query.range)});return Ke?[Ke,!0,Me,Re]:[Re.find(function(nt){return("limit"in nt.req?nt.req.limit:1/0)>=Te.limit&&(!Te.values||nt.req.values)&&ls(nt.req.query.range,Te.query.range)}),!1,Me,Re];case"count":return Ke=Re.find(function(nt){return La(nt.req.query.range,Te.query.range)}),[Ke,!!Ke,Me,Re]}}(f,v,"query",U),_e=Ne[0],ue=Ne[1],ke=Ne[2],me=Ne[3];return _e&&ue?_e.obsSet=U.obsSet:(ue=_.query(U).then(function(Se){var Pe=Se.result;if(_e&&(_e.res=Pe),ee){for(var je=0,Te=Pe.length;je<Te;++je)Object.freeze(Pe[je]);Object.freeze(Pe)}else Se.result=R(Pe);return Se}).catch(function(Se){return me&&_e&&ne(me,_e),Promise.reject(Se)}),_e={obsSet:U.obsSet,promise:ue,subscribers:new Set,type:"query",req:U,dirty:!1},me?me.push(_e):(me=[_e],(ke=ke||(p["idb://".concat(f,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[U.query.index.name||""]=me)),Pa(_e,me,ce,ye),_e.promise.then(function(Se){return{result:os(Se.result,U,ke==null?void 0:ke.optimisticOps,_,_e,ee)}})}})}})}};function Ri(l,f){return new Proxy(l,{get:function(v,_,D){return _==="db"?f:Reflect.get(v,_,D)}})}var bn=(Xt.prototype.version=function(l){if(isNaN(l)||l<.1)throw new fe.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var f=this._versions,v=f.filter(function(_){return _._cfg.version===l})[0];return v||(v=new this.Version(l),f.push(v),f.sort(Cs),v.stores({}),this._state.autoSchema=!1,v)},Xt.prototype._whenReady=function(l){var f=this;return this.idbdb&&(this._state.openComplete||ut.letThrough||this._vip)?l():new at(function(v,_){if(f._state.openComplete)return _(new fe.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void _(new fe.DatabaseClosed);f.open().catch(Ve)}f._state.dbReadyPromise.then(v,_)}).then(l)},Xt.prototype.use=function(l){var f=l.stack,v=l.create,_=l.level,D=l.name;return D&&this.unuse({stack:f,name:D}),l=this._middlewares[f]||(this._middlewares[f]=[]),l.push({stack:f,create:v,level:_??10,name:D}),l.sort(function(U,ee){return U.level-ee.level}),this},Xt.prototype.unuse=function(l){var f=l.stack,v=l.name,_=l.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(D){return _?D.create!==_:!!v&&D.name!==v})),this},Xt.prototype.open=function(){var l=this;return Dn(Yt,function(){return tt(l)})},Xt.prototype._close=function(){var l=this._state,f=zn.indexOf(this);if(0<=f&&zn.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new at(function(v){l.dbReadyResolve=v}),l.openCanceller=new at(function(v,_){l.cancelOpen=_}))},Xt.prototype.close=function(v){var f=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;f?(v.isBeingOpened&&v.cancelOpen(new fe.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new fe.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Xt.prototype.delete=function(l){var f=this;l===void 0&&(l={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",_=this._state;return new at(function(D,U){function ee(){f.close(l);var ce=f._deps.indexedDB.deleteDatabase(f.name);ce.onsuccess=Ht(function(){var ye,Ne,_e;ye=f._deps,Ne=f.name,_e=ye.indexedDB,ye=ye.IDBKeyRange,oa(_e)||Ne===Gi||sa(_e,ye).delete(Ne).catch(Ve),D()}),ce.onerror=Dt(U),ce.onblocked=f._fireOnBlocked}if(v)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(ee):ee()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var l=this;return c(this._allTables).map(function(f){return l._allTables[f]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var l=(function(f,v,_){var D=arguments.length;if(D<2)throw new fe.InvalidArgument("Too few arguments");for(var U=new Array(D-1);--D;)U[D-1]=arguments[D];return _=U.pop(),[f,oe(U),_]}).apply(this,arguments);return this._transaction.apply(this,l)},Xt.prototype._transaction=function(l,f,v){var _=this,D=ut.trans;D&&D.db===this&&l.indexOf("!")===-1||(D=null);var U,ee,ce=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(ee=f.map(function(Ne){if(Ne=Ne instanceof _.Table?Ne.name:Ne,typeof Ne!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ne}),l=="r"||l===Qa)U=Qa;else{if(l!="rw"&&l!=$i)throw new fe.InvalidArgument("Invalid transaction mode: "+l);U=$i}if(D){if(D.mode===Qa&&U===$i){if(!ce)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");D=null}D&&ee.forEach(function(Ne){if(D&&D.storeNames.indexOf(Ne)===-1){if(!ce)throw new fe.SubTransaction("Table "+Ne+" not included in parent transaction.");D=null}}),ce&&D&&!D.active&&(D=null)}}catch(Ne){return D?D._promise(null,function(_e,ue){ue(Ne)}):fr(Ne)}var ye=(function Ne(_e,ue,ke,me,Se){return at.resolve().then(function(){var Pe=ut.transless||ut,je=_e._createTransaction(ue,ke,_e._dbSchema,me);if(je.explicit=!0,Pe={trans:je,transless:Pe},me)je.idbtrans=me.idbtrans;else try{je.create(),je.idbtrans._explicit=!0,_e._state.PR1398_maxLoop=3}catch(Re){return Re.name===we.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return Ne(_e,ue,ke,null,Se)})):fr(Re)}var Te,Me=Oe(Se);return Me&&nn(),Pe=at.follow(function(){var Re;(Te=Se.call(je,je))&&(Me?(Re=Kr.bind(null,null),Te.then(Re,Re)):typeof Te.next=="function"&&typeof Te.throw=="function"&&(Te=vt(Te)))},Pe),(Te&&typeof Te.then=="function"?at.resolve(Te).then(function(Re){return je.active?Re:fr(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Pe.then(function(){return Te})).then(function(Re){return me&&je._resolve(),je._completion.then(function(){return Re})}).catch(function(Re){return je._reject(Re),fr(Re)})})}).bind(null,this,U,ee,D,v);return D?D._promise(U,ye,"lock"):ut.trans?Dn(ut.transless,function(){return _._whenReady(ye)}):this._whenReady(ye)},Xt.prototype.table=function(l){if(!b(this._allTables,l))throw new fe.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Xt);function Xt(l,f){var v=this;this._middlewares={},this.verno=0;var _=Xt.dependencies;this._options=f=n({addons:Xt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},_=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var D,U,ee,ce,ye,Ne={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};Ne.dbReadyPromise=new at(function(ue){Ne.dbReadyResolve=ue}),Ne.openCanceller=new at(function(ue,ke){Ne.cancelOpen=ke}),this._state=Ne,this.name=l,this.on=ci(this,"populate","blocked","versionchange","close",{ready:[J,Ve]}),this.on.ready.subscribe=F(this.on.ready.subscribe,function(ue){return function(ke,me){Xt.vip(function(){var Se,Pe=v._state;Pe.openComplete?(Pe.dbOpenError||at.resolve().then(ke),me&&ue(ke)):Pe.onReadyBeingFired?(Pe.onReadyBeingFired.push(ke),me&&ue(ke)):(ue(ke),Se=v,me||ue(function je(){Se.on.ready.unsubscribe(ke),Se.on.ready.unsubscribe(je)}))})}}),this.Collection=(D=this,Qi(Ys.prototype,function(Te,je){this.db=D;var me=Ja,Se=null;if(je)try{me=je()}catch(Me){Se=Me}var Pe=Te._ctx,je=Pe.table,Te=je.hook.reading.fire;this._ctx={table:je,index:Pe.index,isPrimKey:!Pe.index||je.schema.primKey.keyPath&&Pe.index===je.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Se,or:Pe.or,valueMapper:Te!==lt?Te:null}})),this.Table=(U=this,Qi(Za.prototype,function(ue,ke,me){this.db=U,this._tx=me,this.name=ue,this.schema=ke,this.hook=U._allTables[ue]?U._allTables[ue].hook:ci(null,{creating:[le,Ve],reading:[Ft,lt],updating:[jt,Ve],deleting:[Mt,Ve]})})),this.Transaction=(ee=this,Qi(Ps.prototype,function(ue,ke,me,Se,Pe){var je=this;this.db=ee,this.mode=ue,this.storeNames=ke,this.schema=me,this.chromeTransactionDurability=Se,this.idbtrans=null,this.on=ci(this,"complete","error","abort"),this.parent=Pe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new at(function(Te,Me){je._resolve=Te,je._reject=Me}),this._completion.then(function(){je.active=!1,je.on.complete.fire()},function(Te){var Me=je.active;return je.active=!1,je.on.error.fire(Te),je.parent?je.parent._reject(Te):Me&&je.idbtrans&&je.idbtrans.abort(),fr(Te)})})),this.Version=(ce=this,Qi(Sa.prototype,function(ue){this.db=ce,this._cfg={version:ue,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ye=this,Qi(Ls.prototype,function(ue,ke,me){if(this.db=ye,this._ctx={table:ue,index:ke===":id"?null:ke,or:me},this._cmp=this._ascending=Jt,this._descending=function(Se,Pe){return Jt(Pe,Se)},this._max=function(Se,Pe){return 0<Jt(Se,Pe)?Se:Pe},this._min=function(Se,Pe){return Jt(Se,Pe)<0?Se:Pe},this._IDBKeyRange=ye._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(ue){0<ue.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(ue){!ue.newVersion||ue.newVersion<ue.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(ue.oldVersion/10))}),this._maxKey=ta(f.IDBKeyRange),this._createTransaction=function(ue,ke,me,Se){return new v.Transaction(ue,ke,me,v._options.chromeTransactionDurability,Se)},this._fireOnBlocked=function(ue){v.on("blocked").fire(ue),zn.filter(function(ke){return ke.name===v.name&&ke!==v&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(ue)})},this.use(Fr),this.use(cs),this.use($n),this.use(Kt),this.use(xr);var _e=new Proxy(this,{get:function(ue,ke,me){if(ke==="_vip")return!0;if(ke==="table")return function(Pe){return Ri(v.table(Pe),_e)};var Se=Reflect.get(ue,ke,me);return Se instanceof Za?Ri(Se,_e):ke==="tables"?Se.map(function(Pe){return Ri(Pe,_e)}):ke==="_createTransaction"?function(){return Ri(Se.apply(this,arguments),_e)}:Se}});this.vip=_e,_.forEach(function(ue){return ue(v)})}var mi,Xr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ka=(ca.prototype.subscribe=function(l,f,v){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:f,complete:v})},ca.prototype[Xr]=function(){return this},ca);function ca(l){this._subscribe=l}try{mi={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{mi={indexedDB:null,IDBKeyRange:null}}function hn(l){var f,v=!1,_=new ka(function(D){var U=Oe(l),ee,ce=!1,ye={},Ne={},_e={get closed(){return ce},unsubscribe:function(){ce||(ce=!0,ee&&ee.abort(),ue&&Kn.storagemutated.unsubscribe(me))}};D.start&&D.start(_e);var ue=!1,ke=function(){return ki(Se)},me=function(Pe){Gn(ye,Pe),la(Ne,ye)&&ke()},Se=function(){var Pe,je,Te;!ce&&mi.indexedDB&&(ye={},Pe={},ee&&ee.abort(),ee=new AbortController,Te=function(Me){var Re=mt();try{U&&nn();var Ke=Wr(l,Me);return Ke=U?Ke.finally(Kr):Ke}finally{Re&&Et()}}(je={subscr:Pe,signal:ee.signal,requery:ke,querier:l,trans:null}),Promise.resolve(Te).then(function(Me){v=!0,f=Me,ce||je.signal.aborted||(ye={},function(Re){for(var Ke in Re)if(b(Re,Ke))return;return 1}(Ne=Pe)||ue||(Kn(Zi,me),ue=!0),ki(function(){return!ce&&D.next&&D.next(Me)}))},function(Me){v=!1,["DatabaseClosedError","AbortError"].includes(Me==null?void 0:Me.name)||ce||ki(function(){ce||D.error&&D.error(Me)})}))};return setTimeout(ke,0),_e});return _.hasValue=function(){return v},_.getValue=function(){return f},_}var gi=bn;function ua(l){var f=Mr;try{Mr=!0,Kn.storagemutated.fire(l),Ce(l,!0)}finally{Mr=f}}w(gi,n(n({},et),{delete:function(l){return new gi(l,{addons:[]}).delete()},exists:function(l){return new gi(l,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return f=gi.dependencies,v=f.indexedDB,f=f.IDBKeyRange,(oa(v)?Promise.resolve(v.databases()).then(function(_){return _.map(function(D){return D.name}).filter(function(D){return D!==Gi})}):sa(v,f).toCollection().primaryKeys()).then(l)}catch{return fr(new fe.MissingAPI)}var f,v},defineClass:function(){return function(l){h(this,l)}},ignoreTransaction:function(l){return ut.trans?Dn(ut.transless,l):l()},vip:Aa,async:function(l){return function(){try{var f=vt(l.apply(this,arguments));return f&&typeof f.then=="function"?f:at.resolve(f)}catch(v){return fr(v)}}},spawn:function(l,f,v){try{var _=vt(l.apply(v,f||[]));return _&&typeof _.then=="function"?_:at.resolve(_)}catch(D){return fr(D)}},currentTransaction:{get:function(){return ut.trans||null}},waitFor:function(l,f){return f=at.resolve(typeof l=="function"?gi.ignoreTransaction(l):l).timeout(f||6e4),ut.trans?ut.trans.waitFor(f):f},Promise:at,debug:{get:function(){return de},set:function(l){xe(l)}},derive:L,extend:h,props:w,override:F,Events:ci,on:Kn,liveQuery:hn,extendObservabilitySet:Gn,getByKeyPath:X,setByKeyPath:M,delByKeyPath:function(l,f){typeof f=="string"?M(l,f,void 0):"length"in f&&[].map.call(f,function(v){M(l,v,void 0)})},shallowClone:T,deepClone:R,getObjectDiff:zt,cmp:Jt,asap:K,minKey:-1/0,addons:[],connections:zn,errnames:we,dependencies:mi,cache:p,semVer:"4.0.11",version:"4.0.11".split(".").map(function(l){return parseInt(l)}).reduce(function(l,f,v){return l+f/Math.pow(10,2*v)})})),gi.maxKey=ta(gi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kn(Zi,function(l){Mr||(l=new CustomEvent(En,{detail:l}),Mr=!0,dispatchEvent(l),Mr=!1)}),addEventListener(En,function(l){l=l.detail,Mr||ua(l)}));var yi,Mr=!1,da=function(){};return typeof BroadcastChannel<"u"&&((da=function(){(yi=new BroadcastChannel(En)).onmessage=function(l){return l.data&&ua(l.data)}})(),typeof yi.unref=="function"&&yi.unref(),Kn(Zi,function(l){Mr||yi.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!bn.disableBfCache&&l.persisted){de&&console.debug("Dexie: handling persisted pagehide"),yi!=null&&yi.close();for(var f=0,v=zn;f<v.length;f++)v[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!bn.disableBfCache&&l.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),da(),ua({all:new Cr(-1/0,[[]])}))})),at.rejectionMapper=function(l,f){return!l||l instanceof H||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Je[l.name]?l:(f=new Je[l.name](f||l.message,l),"stack"in l&&P(f,"stack",{get:function(){return this.inner.stack}}),f)},xe(de),n(bn,Object.freeze({__proto__:null,Dexie:bn,liveQuery:hn,Entity:Yi,cmp:Jt,PropModification:Ji,replacePrefix:function(l,f){return new Ji({replacePrefix:[l,f]})},add:function(l){return new Ji({add:l})},remove:function(l){return new Ji({remove:l})},default:bn,RangeSet:Cr,mergeRanges:Ti,rangesOverlap:Es}),{default:bn}),bn})})(jd);var jp=jd.exports;const ac=xc(jp),bu=Symbol.for("Dexie"),sc=globalThis[bu]||(globalThis[bu]=ac);if(ac.semVer!==sc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ac.semVer} and ${sc.semVer}`);class Ap extends sc{constructor(){super("POSDatabase");cn(this,"users");cn(this,"products");cn(this,"categories");cn(this,"transactions");cn(this,"activityLogs");cn(this,"settings");this.version(1).stores({users:"&id, username, email, role, isActive, createdAt",products:"&id, name, sku, categoryId, isActive, quantity, price, wholesalePrice, wholesaleMinQuantity, createdAt",categories:"&id, name, createdAt",transactions:"&id, transactionNumber, type, status, cashierId, createdAt, total",activityLogs:"&id, userId, action, entity, entityId, createdAt",settings:"&id"}),this.products.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.products.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.categories.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.categories.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.users.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.users.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.transactions.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.activityLogs.hook("creating",function(t,n,a){n.createdAt=new Date})}}const He=new Ap,ga=r=>({...r,name:r.name||"",description:r.description||"",sku:r.sku||"",barcode:r.barcode||"",categoryId:r.categoryId||"",imageUrl:r.imageUrl||"",price:Number(r.price)||0,cost:Number(r.cost)||0,quantity:Number(r.quantity)||0,minStockLevel:Number(r.minStockLevel)||0,wholesalePrice:r.wholesalePrice?Number(r.wholesalePrice):void 0,wholesaleMinQuantity:r.wholesaleMinQuantity?Number(r.wholesaleMinQuantity):void 0,isActive:!!r.isActive,createdAt:r.createdAt instanceof Date?r.createdAt:new Date(r.createdAt),updatedAt:r.updatedAt instanceof Date?r.updatedAt:new Date(r.updatedAt)});class Ai{static async getAll(){return await He.users.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.users.get(e)}static async getByUsername(e){return await He.users.where("username").equals(e).first()}static async create(e){return await He.users.add(e)}static async update(e,t){return await He.users.update(e,t)}static async delete(e){await He.users.delete(e)}static async getActiveUsers(){return await He.users.where("isActive").equals(1).toArray()}}class Ua{static async getAll(){return(await He.products.orderBy("name").toArray()).map(ga)}static async getById(e){const t=await He.products.get(e);return t?ga(t):void 0}static async getBySKU(e){const n=(await He.products.toArray()).find(a=>a.sku.toLowerCase()===e.toLowerCase());return n?ga(n):void 0}static async create(e){return await He.products.add(e)}static async update(e,t){return await He.products.update(e,t)}static async delete(e){await He.products.delete(e)}static async getByCategory(e){return(await He.products.where("categoryId").equals(e).toArray()).map(ga)}static async getActiveProducts(){return(await He.products.where("isActive").equals(1).toArray()).map(ga)}static async getLowStockProducts(e){return(await He.products.toArray()).map(ga).filter(n=>n.quantity<=(e||n.minStockLevel))}static async getOutOfStockProducts(){return(await He.products.where("quantity").equals(0).toArray()).map(ga)}static async updateStock(e,t){const n=await He.products.get(e);if(!n)throw new Error("Product not found");const a=ga(n),i=Math.max(0,a.quantity+t);return await He.products.update(e,{quantity:i})}static async searchProducts(e){const t=e.toLowerCase();return(await He.products.filter(a=>a.name.toLowerCase().includes(t)||a.sku.toLowerCase().includes(t)||(a.description?a.description.toLowerCase().includes(t):!1)).toArray()).map(ga)}}class ms{static async getAll(){return await He.categories.orderBy("name").toArray()}static async getById(e){return await He.categories.get(e)}static async create(e){return await He.categories.add(e)}static async update(e,t){return await He.categories.update(e,t)}static async delete(e){const t=await He.products.where("categoryId").equals(e).count();if(t>0)throw new Error(`Cannot delete category. ${t} products are using this category.`);await He.categories.delete(e)}static async getCategoryWithProductCount(){const e=await He.categories.toArray();return await Promise.all(e.map(async n=>{const a=await He.products.where("categoryId").equals(n.id).count();return{...n,productCount:a}}))}}class Vs{static async getAll(){return await He.transactions.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.transactions.get(e)}static async create(e){return await He.transactions.add(e)}static async update(e,t){return await He.transactions.update(e,t)}static async delete(e){await He.transactions.delete(e)}static async getByDateRange(e,t){return await He.transactions.where("createdAt").between(e,t).reverse().toArray()}static async getByCashier(e){return await He.transactions.where("cashierId").equals(e).reverse().toArray()}static async getByType(e){return await He.transactions.where("type").equals(e).reverse().toArray()}static async getTodayTransactions(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);return await this.getByDateRange(t,n)}static async getSalesStats(e,t){const n=await this.getByDateRange(e,t),a=n.filter(i=>i.type==="sale"&&i.status==="completed");return{totalSales:a.reduce((i,c)=>i+c.total,0),totalTransactions:a.length,averageTransaction:a.length>0?a.reduce((i,c)=>i+c.total,0)/a.length:0,totalRefunds:n.filter(i=>i.type==="refund").reduce((i,c)=>i+c.total,0)}}}class xo{static async getAll(){return await He.activityLogs.orderBy("createdAt").reverse().toArray()}static async create(e){return await He.activityLogs.add(e)}static async getByUser(e){return await He.activityLogs.where("userId").equals(e).reverse().toArray()}static async getByEntity(e,t){let n=He.activityLogs.where("entity").equals(e);return t&&(n=n.and(a=>a.entityId===t)),await n.reverse().toArray()}static async getRecent(e=100){return await He.activityLogs.orderBy("createdAt").reverse().limit(e).toArray()}static async cleanup(e=30){const t=new Date;return t.setDate(t.getDate()-e),await He.activityLogs.where("createdAt").below(t).delete()}}class bs{static async get(){return await He.settings.orderBy("id").first()}static async create(e){return await He.settings.add(e)}static async update(e){const t=await this.get();if(!t)throw new Error("Settings not found");return await He.settings.update(t.id,e)}static async getOrCreate(){let e=await this.get();if(!e){const t={id:"default",currency:"PHP",storeName:"My Store",autoBackup:!1,backupFrequency:"daily",lowStockAlert:!0,lowStockThreshold:5,createdAt:new Date,updatedAt:new Date};await this.create(t),e=t}return e}}class Gs{static async initialize(){try{await He.open(),console.log("Database initialized successfully"),await bs.getOrCreate()}catch(e){throw console.error("Failed to initialize database:",e),e}}static async backup(){const e={users:await Ai.getAll(),products:await Ua.getAll(),categories:await ms.getAll(),transactions:await Vs.getAll(),activityLogs:await xo.getAll(),settings:await bs.get(),exportDate:new Date().toISOString(),version:"1.0"};return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}static async restore(e){try{const t=JSON.parse(e);await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear(),await He.settings.clear(),t.users&&await He.users.bulkAdd(t.users),t.products&&await He.products.bulkAdd(t.products),t.categories&&await He.categories.bulkAdd(t.categories),t.transactions&&await He.transactions.bulkAdd(t.transactions),t.activityLogs&&await He.activityLogs.bulkAdd(t.activityLogs),t.settings&&await He.settings.add(t.settings)}),console.log("Database restored successfully")}catch(t){throw console.error("Failed to restore database:",t),new Error("Invalid backup file or restore failed")}}static async clearAll(){await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear()}),await bs.getOrCreate(),localStorage.setItem("pos-data-cleared-intentionally","true"),console.log("All data cleared successfully. Sample data will not be re-initialized on reload.")}static wasDataClearedIntentionally(){return localStorage.getItem("pos-data-cleared-intentionally")==="true"}static clearIntentionalClearingFlag(){localStorage.removeItem("pos-data-cleared-intentionally")}static async getStats(){return{users:await He.users.count(),products:await He.products.count(),categories:await He.categories.count(),transactions:await He.transactions.count(),activityLogs:await He.activityLogs.count()}}}const _p=Object.freeze(Object.defineProperty({__proto__:null,ActivityLogService:xo,CategoryService:ms,DatabaseService:Gs,ProductService:Ua,SettingsService:bs,TransactionService:Vs,UserService:Ai},Symbol.toStringTag,{value:"Module"})),Bl=(r,e)=>r.wholesalePrice&&r.wholesaleMinQuantity&&e>=r.wholesaleMinQuantity?r.wholesalePrice:r.price,Ko=(r,e=0)=>{const t=r.reduce((i,c)=>i+c.totalPrice,0),n=t*e/100,a=t-n;return{subtotal:t,tax:0,discount:n,total:a}},qn=vp()(Sp((r,e)=>({auth:{user:null,token:null,isAuthenticated:!1},login:(t,n)=>{r({auth:{user:t,token:n,isAuthenticated:!0}}),e().addActivityLog({userId:t.id,action:"LOGIN",entity:"USER",entityId:t.id,details:{username:t.username}})},logout:()=>{const t=e().auth.user;t&&e().addActivityLog({userId:t.id,action:"LOGOUT",entity:"USER",entityId:t.id,details:{username:t.username}}),r({auth:{user:null,token:null,isAuthenticated:!1}}),r({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},updateUser:t=>{r(n=>({auth:{...n.auth,user:t}}))},cart:{items:[],subtotal:0,tax:0,discount:0,total:0},addToCart:(t,n=1)=>{r(a=>{const i=a.cart.items.find(h=>h.product.id===t.id);let c;if(i){const h=i.quantity+n,y=Bl(t,h);c=a.cart.items.map(x=>x.product.id===t.id?{...x,quantity:h,unitPrice:y,totalPrice:h*y}:x)}else{const h=Bl(t,n),y={product:t,quantity:n,unitPrice:h,totalPrice:n*h};c=[...a.cart.items,y]}const u=Ko(c,a.cart.discount);return{cart:{items:c,...u}}})},removeFromCart:t=>{r(n=>{const a=n.cart.items.filter(c=>c.product.id!==t),i=Ko(a,n.cart.discount);return{cart:{items:a,...i}}})},updateCartItem:(t,n)=>{r(a=>{if(n<=0)return e().removeFromCart(t),a;const i=a.cart.items.map(u=>{if(u.product.id===t){const h=Bl(u.product,n);return{...u,quantity:n,unitPrice:h,totalPrice:n*h}}return u}),c=Ko(i,a.cart.discount);return{cart:{items:i,...c}}})},clearCart:()=>{r({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},applyDiscount:t=>{r(n=>{const a=Ko(n.cart.items,t);return{cart:{...n.cart,...a}}})},products:[],categories:[],loadProducts:async()=>{try{const t=await Ua.getAll();r({products:t})}catch(t){console.error("Failed to load products:",t),r({error:"Failed to load products"})}},loadCategories:async()=>{try{const t=await ms.getAll();r({categories:t})}catch(t){console.error("Failed to load categories:",t),r({error:"Failed to load categories"})}},setProducts:t=>r({products:t}),setCategories:t=>r({categories:t}),addProduct:async t=>{try{await Ua.create(t),await e().loadProducts();const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"PRODUCT",entityId:t.id,details:{name:t.name,sku:t.sku}})}catch(n){throw console.error("Failed to add product:",n),n}},updateProduct:async(t,n)=>{try{await Ua.update(t,n),await e().loadProducts();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"PRODUCT",entityId:t,details:n})}catch(a){throw console.error("Failed to update product:",a),a}},deleteProduct:async t=>{try{const n=e().products.find(i=>i.id===t);await Ua.delete(t),await e().loadProducts();const a=e().auth.user;a&&n&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"PRODUCT",entityId:t,details:{name:n.name,sku:n.sku}})}catch(n){throw console.error("Failed to delete product:",n),n}},updateStock:async(t,n)=>{try{await Ua.updateStock(t,n),await e().loadProducts()}catch(a){throw console.error("Failed to update stock:",a),a}},addCategory:async t=>{try{await ms.create(t),await e().loadCategories();const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"CATEGORY",entityId:t.id,details:{name:t.name}})}catch(n){throw console.error("Failed to add category:",n),n}},updateCategory:async(t,n)=>{try{await ms.update(t,n),await e().loadCategories();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"CATEGORY",entityId:t,details:n})}catch(a){throw console.error("Failed to update category:",a),a}},deleteCategory:async t=>{try{const n=e().categories.find(i=>i.id===t);await ms.delete(t),await e().loadCategories();const a=e().auth.user;a&&n&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"CATEGORY",entityId:t,details:{name:n.name}})}catch(n){throw console.error("Failed to delete category:",n),n}},transactions:[],loadTransactions:async()=>{try{const t=await Vs.getAll();r({transactions:t})}catch(t){console.error("Failed to load transactions:",t),r({error:"Failed to load transactions"})}},setTransactions:t=>r({transactions:t}),addTransaction:async t=>{try{await Vs.create(t),await e().loadTransactions();for(const a of t.items)t.type==="sale"?await e().updateStock(a.productId,-a.quantity):t.type==="refund"&&await e().updateStock(a.productId,a.quantity);const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"TRANSACTION",entityId:t.id,details:{type:t.type,total:t.total,itemCount:t.items.length}})}catch(n){throw console.error("Failed to add transaction:",n),n}},updateTransaction:async(t,n)=>{try{await Vs.update(t,n),await e().loadTransactions()}catch(a){throw console.error("Failed to update transaction:",a),a}},users:[],loadUsers:async()=>{try{const t=await Ai.getAll();r({users:t})}catch(t){console.error("Failed to load users:",t),r({error:"Failed to load users"})}},setUsers:t=>r({users:t}),addUser:async t=>{try{await Ai.create(t),await e().loadUsers()}catch(n){throw console.error("Failed to add user:",n),n}},updateUserData:async(t,n)=>{try{await Ai.update(t,n),await e().loadUsers()}catch(a){throw console.error("Failed to update user:",a),a}},deleteUser:async t=>{try{await Ai.delete(t),await e().loadUsers()}catch(n){throw console.error("Failed to delete user:",n),n}},activityLogs:[],loadActivityLogs:async()=>{try{const t=await xo.getAll();r({activityLogs:t})}catch(t){console.error("Failed to load activity logs:",t),r({error:"Failed to load activity logs"})}},addActivityLog:async t=>{try{const n={...t,id:Date.now().toString(),createdAt:new Date};await xo.create(n)}catch(n){console.error("Failed to add activity log:",n)}},loading:!1,error:null,setLoading:t=>r({loading:t}),setError:t=>r({error:t}),settings:{currency:"PHP",storeName:"My Store"},loadSettings:async()=>{try{const t=await bs.getOrCreate();r({settings:{currency:t.currency,storeName:t.storeName}})}catch(t){console.error("Failed to load settings:",t),r({error:"Failed to load settings"})}},updateSettings:async t=>{try{await bs.update(t),await e().loadSettings()}catch(n){throw console.error("Failed to update settings:",n),n}},initializeFromDatabase:async()=>{r({loading:!0,error:null});try{await Promise.all([e().loadSettings(),e().loadCategories(),e().loadProducts(),e().loadUsers(),e().loadTransactions()]),console.log("Store initialized from database successfully")}catch(t){console.error("Failed to initialize store from database:",t),r({error:"Failed to initialize application data"})}finally{r({loading:!1})}}}),{name:"pos-auth-storage",partialize:r=>({auth:r.auth})})),Lp=()=>o.jsx("footer",{className:"bg-white border-t border-gray-200 py-4 px-6",children:o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs("p",{className:"text-sm text-gray-500",children:["Made with  by"," ",o.jsx("span",{className:"font-semibold text-gray-700",children:"AOG Tech"})]})})}),Ul={},Pp={}.REACT_APP_LICENSE_SERVER_URL||"https://license-generator-smoky.vercel.app",kp={}.NODE_ENV||{}.VITE_APP_ENV||"development",Pn={SERVER_URL:Pp,CACHE_DURATION:5*60*1e3,CHECK_INTERVAL:10*60*1e3,REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:2e3,ENABLE_DEBUG_LOGS:kp==="development",ALLOW_OFFLINE_MODE:!0,OFFLINE_GRACE_PERIOD:30*24*60*60*1e3},Cp={CHECK_STATUS:"/api/licenses/:licenseKey/status",SUSPEND:"/api/licenses/:licenseKey/suspend",REACTIVATE:"/api/licenses/:licenseKey/reactivate",VALIDATE:"/api/licenses/:licenseKey/validate"};class Rn{static async makeRequest(e,t={}){const n=new AbortController,a=setTimeout(()=>n.abort(),Pn.REQUEST_TIMEOUT);try{const i=await fetch(e,{...t,signal:n.signal});return clearTimeout(a),i}catch(i){throw clearTimeout(a),i}}static async checkLicenseWithServer(e){try{const t=`${Pn.SERVER_URL}${Cp.CHECK_STATUS.replace(":licenseKey",encodeURIComponent(e))}`;Pn.ENABLE_DEBUG_LOGS&&console.log("Checking license with server:",t);const n=await this.makeRequest(t);if(!n.ok){const i=await n.json().catch(()=>({}));return Pn.ENABLE_DEBUG_LOGS&&console.warn("License server returned error:",i),{valid:!1,error:i.error||`Server error: ${n.status}`,reason:i.error||"Server validation failed"}}const a=await n.json();return Pn.ENABLE_DEBUG_LOGS&&console.log("License server response:",a),{valid:a.valid,reason:a.reason,details:a.details,info:a.license?{licenseKey:a.licenseKey,productId:this.PRODUCT_ID,customerEmail:a.license.customer.email,customerName:a.license.customer.name,expiryDate:new Date(a.license.expiresAt),maxActivations:a.license.maxActivations,features:a.license.features||["basic"],status:a.status,suspendedAt:a.license.suspendedAt?new Date(a.license.suspendedAt):void 0,suspendedReason:a.license.suspendedReason}:void 0}}catch(t){console.error("License server validation failed:",t);{const n=this.getLicenseInfo();if(n&&n.activatedAt){const a=Date.now()-n.activatedAt.getTime(),i=n.lastChecked?Date.now()-new Date(n.lastChecked).getTime():0;if(n.expiryDate&&n.expiryDate.getTime()>Date.now()&&(a<Pn.OFFLINE_GRACE_PERIOD||i<Pn.OFFLINE_GRACE_PERIOD))return console.warn("Using offline mode due to server unreachability - license remains valid"),{valid:!0,info:n,reason:"Offline mode - server unreachable but license cached and valid"};console.warn("Offline grace period exceeded or license expired locally")}else console.warn("No valid cached license data found for offline mode")}return{valid:!1,error:"Cannot reach license server for validation",reason:"Server unreachable and no valid offline license"}}}static async getMachineId(){var e;try{const t=document.createElement("canvas"),n=t.getContext("2d");if(n){n.textBaseline="top",n.font="14px Arial",n.fillText("Hardware fingerprint",2,2);const b=[t.toDataURL(),navigator.userAgent,navigator.platform,screen.width+"x"+screen.height,new Date().getTimezoneOffset().toString(),navigator.language,((e=navigator.hardwareConcurrency)==null?void 0:e.toString())||"0"].join("|"),m=new TextEncoder().encode(b),P=await Ul.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(P)).map(k=>k.toString(16).padStart(2,"0")).join("").substring(0,32)}const a=navigator.userAgent+navigator.platform,c=new TextEncoder().encode(a),u=await Ul.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(u)).map(x=>x.toString(16).padStart(2,"0")).join("").substring(0,32)}catch(t){return console.error("Failed to get machine ID:",t),"FALLBACK-MACHINE-ID"}}static generateLicenseKey(e,t,n,a=["basic"],i=1){const c={email:e,name:t,productId:this.PRODUCT_ID,expiry:n.getTime(),features:a,maxActivations:i,generated:Date.now(),version:"1.0"},u=JSON.stringify(c),h=Ul.createHmac("sha256",this.SECRET_KEY).update(u).digest("hex");return(Buffer.from(JSON.stringify({data:c,signature:h})).toString("base64").match(/.{1,5}/g)||[]).slice(0,5).join("-").toUpperCase()}static async validateLicenseKey(e){try{if(!e||typeof e!="string")return{valid:!1,error:"Invalid license key format"};const t=e.replace(/-/g,"").toUpperCase();if(t.length!==25)return{valid:!1,error:"Invalid license key length"};if(!/^[0-9A-F]+$/i.test(t))return{valid:!1,error:"Invalid license key format"};const n=await this.checkLicenseWithServer(e);return n.valid||localStorage.removeItem(this.STORAGE_KEY),n}catch(t){return console.error("License validation error:",t),{valid:!1,error:"Failed to validate license key"}}}static async activateLicense(e){const t=await this.validateLicenseKey(e);if(!t.valid)return{success:!1,error:t.error||t.reason};try{const n=await this.getMachineId(),a=localStorage.getItem(this.STORAGE_KEY);if(a)try{const c=JSON.parse(a);if(c.machineId===n&&c.licenseKey===e){const u=await this.validateLicenseKey(e);if(u.valid){const h={...c,lastChecked:new Date().toISOString()};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(h)),{success:!0}}else return localStorage.removeItem(this.STORAGE_KEY),{success:!1,error:u.reason||"License is no longer valid"}}}catch{}const i={...t.info,machineId:n,activatedAt:new Date().toISOString(),isValid:!0,lastChecked:new Date().toISOString()};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),{success:!0}}catch(n){return console.error("License activation error:",n),{success:!1,error:"Failed to activate license on this machine"}}}static async isLicensed(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return!1;const t=JSON.parse(e),n=await this.getMachineId();if(t.machineId!==n)return console.warn("License machine ID mismatch"),localStorage.removeItem(this.STORAGE_KEY),!1;const a=Date.now();if(this.lastLicenseCheck&&a-this.lastLicenseCheck.timestamp<Pn.CACHE_DURATION)return this.lastLicenseCheck.result;try{const i=await this.validateLicenseKey(t.licenseKey),c=i.valid;if(this.lastLicenseCheck={timestamp:a,result:c},c){if(i.info){const u={...t,...i.info,lastChecked:new Date().toISOString()};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(u))}return!0}else return Pn.ALLOW_OFFLINE_MODE,console.warn("License validation failed:",i.reason||i.error),!1}catch(i){if(console.warn("Network error during license validation:",i),Pn.ALLOW_OFFLINE_MODE){const c=this.getLicenseInfo();if(c&&c.activatedAt&&c.expiryDate){const u=Date.now()-c.activatedAt.getTime(),h=c.lastChecked?Date.now()-new Date(c.lastChecked).getTime():0;if(c.expiryDate.getTime()>Date.now()&&(u<Pn.OFFLINE_GRACE_PERIOD||h<Pn.OFFLINE_GRACE_PERIOD))return console.log("Operating in offline mode - cached license is valid"),this.lastLicenseCheck={timestamp:a,result:!0},!0;console.warn("Cached license does not meet offline criteria (expired or grace period exceeded)")}}return!1}}catch(e){return console.error("License check error:",e),!1}}static getLicenseInfo(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;const t=JSON.parse(e);return{...t,expiryDate:new Date(t.expiryDate),activatedAt:t.activatedAt?new Date(t.activatedAt):void 0,suspendedAt:t.suspendedAt?new Date(t.suspendedAt):void 0}}catch(e){return console.error("Failed to get license info:",e),null}}static deactivateLicense(){localStorage.removeItem(this.STORAGE_KEY),this.lastLicenseCheck=null}static hasFeature(e){const t=this.getLicenseInfo();return t?t.features.includes(e)||t.features.includes("all"):!1}static getDaysUntilExpiry(){const e=this.getLicenseInfo();if(!e)return null;const t=new Date,a=e.expiryDate.getTime()-t.getTime();return Math.ceil(a/(1e3*60*60*24))}static isExpiringSoon(){const e=this.getDaysUntilExpiry();return e!==null&&e<=30&&e>0}static formatLicenseKey(e){return e.replace(/[^A-Za-z0-9]/g,"").toUpperCase().replace(/(.{5})/g,"$1-").slice(0,-1)}static async refreshLicense(){return this.lastLicenseCheck=null,await this.isLicensed()}static getLicenseStatus(){const e=this.getLicenseInfo();if(!e)return{isValid:!1};const t=this.getDaysUntilExpiry(),n=Date.now();let a=!1,i;if(e.activatedAt){const c=n-e.activatedAt.getTime(),u=e.lastChecked?n-new Date(e.lastChecked).getTime():c,h=Pn.OFFLINE_GRACE_PERIOD-Math.min(c,u);a=u>Pn.CACHE_DURATION&&h>0,i={timeSinceActivation:c,timeSinceLastCheck:u,gracePeriodRemaining:Math.max(0,h)}}return{isValid:e.isValid!==!1,status:e.status,suspendedReason:e.suspendedReason,expiryDays:t!==null?t:void 0,isOfflineMode:a,offlineInfo:i}}static isInOfflineMode(){return this.getLicenseStatus().isOfflineMode||!1}}cn(Rn,"SECRET_KEY","AOG-TECH-POS-SYSTEM-2024-SECRET-KEY-CHANGE-IN-PRODUCTION"),cn(Rn,"PRODUCT_ID","AOG-TECH-POS-SYSTEM-V1"),cn(Rn,"STORAGE_KEY","pos_license_data"),cn(Rn,"lastLicenseCheck",null);const Fp=({className:r=""})=>{const[e,t]=Sr.useState(null),[n,a]=Sr.useState(!1);if(Sr.useEffect(()=>{const h=()=>{const x=Rn.getLicenseStatus();t(x);const b=!x.isValid||x.status==="suspended"||x.isOfflineMode||x.expiryDays!==void 0&&x.expiryDays<=7;a(b)};h();const y=setInterval(h,60*1e3);return()=>clearInterval(y)},[]),!n||!e)return null;const i=h=>{const y=Math.floor(h/864e5),x=Math.floor(h%(24*60*60*1e3)/(60*60*1e3));return y>0?`${y} day${y!==1?"s":""} ${x} hour${x!==1?"s":""}`:x>0?`${x} hour${x!==1?"s":""}`:"less than 1 hour"},u=(()=>{if(!e.isValid)return{icon:o.jsx(Gh,{className:"h-5 w-5 text-red-500"}),title:"License Invalid",message:"Your license is not valid. System functionality may be restricted.",bgColor:"bg-red-50 border-red-200",textColor:"text-red-800"};if(e.status==="suspended")return{icon:o.jsx(vo,{className:"h-5 w-5 text-orange-500"}),title:"License Suspended",message:`Your license has been suspended. ${e.suspendedReason||"Please contact support."}`,bgColor:"bg-orange-50 border-orange-200",textColor:"text-orange-800"};if(e.isOfflineMode&&e.offlineInfo){const h=i(e.offlineInfo.gracePeriodRemaining);return{icon:o.jsx($h,{className:"h-5 w-5 text-blue-500"}),title:"Operating in Offline Mode",message:`License validated offline. Valid for ${h} more. Connect to internet to refresh.`,bgColor:"bg-blue-50 border-blue-200",textColor:"text-blue-800"}}if(e.expiryDays!==void 0&&e.expiryDays<=7){const h=e.expiryDays===1?"day":"days";return{icon:o.jsx(Ws,{className:"h-5 w-5 text-yellow-500"}),title:"License Expiring Soon",message:`Your license expires in ${e.expiryDays} ${h}. Please renew to avoid service interruption.`,bgColor:"bg-yellow-50 border-yellow-200",textColor:"text-yellow-800"}}return null})();return u?o.jsx("div",{className:`${u.bgColor} border rounded-lg p-4 mb-4 ${r}`,children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:u.icon}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:`text-sm font-medium ${u.textColor}`,children:u.title}),o.jsx("p",{className:`text-sm mt-1 ${u.textColor}`,children:u.message})]}),o.jsx("div",{className:"ml-auto pl-3",children:o.jsx("div",{className:"-mx-1.5 -my-1.5",children:o.jsxs("button",{type:"button",className:`inline-flex rounded-md p-1.5 ${u.textColor} hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500`,onClick:()=>a(!1),children:[o.jsx("span",{className:"sr-only",children:"Dismiss"}),o.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}):null},Dp=({children:r})=>{var x,b,w;const e=Wh(),{auth:t,logout:n}=qn(),[a,i]=gt.useState(!1),u=[{name:"Dashboard",href:"/dashboard",icon:Jh,roles:["admin","manager"]},{name:"Sales",href:"/sales",icon:Va,roles:["admin","manager","cashier"]},{name:"Inventory",href:"/inventory",icon:js,roles:["admin","manager"]},{name:"Reports",href:"/reports",icon:Xh,roles:["admin","manager","cashier"]},{name:"Users",href:"/users",icon:Zl,roles:["admin"]},{name:"Settings",href:"/settings",icon:ed,roles:["admin","manager"]}].filter(m=>{var P;return((P=t.user)==null?void 0:P.role)&&m.roles.includes(t.user.role)}),h=()=>{n()},y=m=>e.pathname===m;return o.jsxs("div",{className:"flex h-screen bg-gray-100",children:[a&&o.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>i(!1),children:o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),o.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${a?"translate-x-0":"-translate-x-full"}
      `,children:[o.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"POS System"}),o.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!1),children:o.jsx(ba,{className:"h-6 w-6"})})]}),o.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:u.map(m=>{const P=y(m.href),L=m.icon;return o.jsxs(ds,{to:m.href,className:`
                  sidebar-nav group
                  ${P?"active":""}
                `,onClick:()=>i(!1),children:[o.jsx(L,{className:"mr-3 h-5 w-5"}),m.name]},m.name)})}),o.jsxs("div",{className:"border-t border-gray-200 p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(wc,{className:"h-8 w-8 text-gray-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(x=t.user)==null?void 0:x.firstName," ",(b=t.user)==null?void 0:b.lastName]}),o.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(w=t.user)==null?void 0:w.role})]})]}),o.jsxs("button",{onClick:h,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",children:[o.jsx(Yh,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:pl-0",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[o.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!0),children:o.jsx(Qh,{className:"h-6 w-6"})}),o.jsx("div",{className:"flex-1 lg:ml-0",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.pathname.replace("/","")||"Dashboard"})}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsx("span",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString()})})]})}),o.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[o.jsx(Fp,{}),r]}),o.jsx(Lp,{})]})]})};var _o=r=>r.type==="checkbox",gs=r=>r instanceof Date,Cn=r=>r==null;const Ad=r=>typeof r=="object";var Ur=r=>!Cn(r)&&!Array.isArray(r)&&Ad(r)&&!gs(r),Ep=r=>Ur(r)&&r.target?_o(r.target)?r.target.checked:r.target.value:r,Ip=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,Op=(r,e)=>r.has(Ip(e)),Tp=r=>{const e=r.constructor&&r.constructor.prototype;return Ur(e)&&e.hasOwnProperty("isPrototypeOf")},jc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jn(r){let e;const t=Array.isArray(r),n=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(jc&&(r instanceof Blob||n))&&(t||Ur(r)))if(e=t?[]:{},!t&&!Tp(r))e=r;else for(const a in r)r.hasOwnProperty(a)&&(e[a]=jn(r[a]));else return r;return e}var gl=r=>Array.isArray(r)?r.filter(Boolean):[],$r=r=>r===void 0,Pt=(r,e,t)=>{if(!e||!Ur(r))return t;const n=gl(e.split(/[,[\].]+?/)).reduce((a,i)=>Cn(a)?a:a[i],r);return $r(n)||n===r?$r(r[e])?t:r[e]:n},Ui=r=>typeof r=="boolean",Ac=r=>/^\w*$/.test(r),_d=r=>gl(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Nr=(r,e,t)=>{let n=-1;const a=Ac(e)?[e]:_d(e),i=a.length,c=i-1;for(;++n<i;){const u=a[n];let h=t;if(n!==c){const y=r[u];h=Ur(y)||Array.isArray(y)?y:isNaN(+a[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;r[u]=h,r=r[u]}};const xu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Si={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ya={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};gt.createContext(null);var Mp=(r,e,t,n=!0)=>{const a={defaultValues:e._defaultValues};for(const i in r)Object.defineProperty(a,i,{get:()=>{const c=i;return e._proxyFormState[c]!==Si.all&&(e._proxyFormState[c]=!n||Si.all),t&&(t[c]=!0),r[c]}});return a};const Rp=typeof window<"u"?Sr.useLayoutEffect:Sr.useEffect;var zi=r=>typeof r=="string",qp=(r,e,t,n,a)=>zi(r)?(n&&e.watch.add(r),Pt(t,r,a)):Array.isArray(r)?r.map(i=>(n&&e.watch.add(i),Pt(t,i))):(n&&(e.watchAll=!0),t),Bp=(r,e,t,n,a)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:a||!0}}:{},uo=r=>Array.isArray(r)?r:[r],wu=()=>{let r=[];return{get observers(){return r},next:a=>{for(const i of r)i.next&&i.next(a)},subscribe:a=>(r.push(a),{unsubscribe:()=>{r=r.filter(i=>i!==a)}}),unsubscribe:()=>{r=[]}}},oc=r=>Cn(r)||!Ad(r);function za(r,e){if(oc(r)||oc(e))return r===e;if(gs(r)&&gs(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const a of t){const i=r[a];if(!n.includes(a))return!1;if(a!=="ref"){const c=e[a];if(gs(i)&&gs(c)||Ur(i)&&Ur(c)||Array.isArray(i)&&Array.isArray(c)?!za(i,c):i!==c)return!1}}return!0}var Mn=r=>Ur(r)&&!Object.keys(r).length,_c=r=>r.type==="file",ji=r=>typeof r=="function",sl=r=>{if(!jc)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ld=r=>r.type==="select-multiple",Lc=r=>r.type==="radio",Up=r=>Lc(r)||_o(r),zl=r=>sl(r)&&r.isConnected;function zp(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=$r(r)?n++:r[e[n++]];return r}function Hp(r){for(const e in r)if(r.hasOwnProperty(e)&&!$r(r[e]))return!1;return!0}function en(r,e){const t=Array.isArray(e)?e:Ac(e)?[e]:_d(e),n=t.length===1?r:zp(r,t),a=t.length-1,i=t[a];return n&&delete n[i],a!==0&&(Ur(n)&&Mn(n)||Array.isArray(n)&&Hp(n))&&en(r,t.slice(0,-1)),r}var Pd=r=>{for(const e in r)if(ji(r[e]))return!0;return!1};function ol(r,e={}){const t=Array.isArray(r);if(Ur(r)||t)for(const n in r)Array.isArray(r[n])||Ur(r[n])&&!Pd(r[n])?(e[n]=Array.isArray(r[n])?[]:{},ol(r[n],e[n])):Cn(r[n])||(e[n]=!0);return e}function kd(r,e,t){const n=Array.isArray(r);if(Ur(r)||n)for(const a in r)Array.isArray(r[a])||Ur(r[a])&&!Pd(r[a])?$r(e)||oc(t[a])?t[a]=Array.isArray(r[a])?ol(r[a],[]):{...ol(r[a])}:kd(r[a],Cn(e)?{}:e[a],t[a]):t[a]=!za(r[a],e[a]);return t}var io=(r,e)=>kd(r,e,ol(e));const Nu={value:!1,isValid:!1},Su={value:!0,isValid:!0};var Cd=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!$r(r[0].attributes.value)?$r(r[0].value)||r[0].value===""?Su:{value:r[0].value,isValid:!0}:Su:Nu}return Nu},Fd=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>$r(r)?r:e?r===""?NaN:r&&+r:t&&zi(r)?new Date(r):n?n(r):r;const ju={isValid:!1,value:null};var Dd=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ju):ju;function Au(r){const e=r.ref;return _c(e)?e.files:Lc(e)?Dd(r.refs).value:Ld(e)?[...e.selectedOptions].map(({value:t})=>t):_o(e)?Cd(r.refs).value:Fd($r(e.value)?r.ref.value:e.value,r)}var Wp=(r,e,t,n)=>{const a={};for(const i of r){const c=Pt(e,i);c&&Nr(a,i,c._f)}return{criteriaMode:t,names:[...r],fields:a,shouldUseNativeValidation:n}},ll=r=>r instanceof RegExp,ao=r=>$r(r)?r:ll(r)?r.source:Ur(r)?ll(r.value)?r.value.source:r.value:r,_u=r=>({isOnSubmit:!r||r===Si.onSubmit,isOnBlur:r===Si.onBlur,isOnChange:r===Si.onChange,isOnAll:r===Si.all,isOnTouch:r===Si.onTouched});const Lu="AsyncFunction";var Kp=r=>!!r&&!!r.validate&&!!(ji(r.validate)&&r.validate.constructor.name===Lu||Ur(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===Lu)),Vp=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),Pu=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const ho=(r,e,t,n)=>{for(const a of t||Object.keys(r)){const i=Pt(r,a);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],a)&&!n)return!0;if(c.ref&&e(c.ref,c.name)&&!n)return!0;if(ho(u,e))break}else if(Ur(u)&&ho(u,e))break}}};function ku(r,e,t){const n=Pt(r,t);if(n||Ac(t))return{error:n,name:t};const a=t.split(".");for(;a.length;){const i=a.join("."),c=Pt(e,i),u=Pt(r,i);if(c&&!Array.isArray(c)&&t!==i)return{name:t};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};a.pop()}return{name:t}}var Gp=(r,e,t,n)=>{t(r);const{name:a,...i}=r;return Mn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!n||Si.all))},$p=(r,e,t)=>!r||!e||r===e||uo(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),Yp=(r,e,t,n,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||r):(t?n.isOnBlur:a.isOnBlur)?!r:(t?n.isOnChange:a.isOnChange)?r:!0,Qp=(r,e)=>!gl(Pt(r,e)).length&&en(r,e),Jp=(r,e,t)=>{const n=uo(Pt(r,t));return Nr(n,"root",e[t]),Nr(r,t,n),r},Xo=r=>zi(r);function Cu(r,e,t="validate"){if(Xo(r)||Array.isArray(r)&&r.every(Xo)||Ui(r)&&!r)return{type:t,message:Xo(r)?r:"",ref:e}}var Rs=r=>Ur(r)&&!ll(r)?r:{value:r,message:""},Fu=async(r,e,t,n,a,i)=>{const{ref:c,refs:u,required:h,maxLength:y,minLength:x,min:b,max:w,pattern:m,validate:P,name:L,valueAsNumber:E,mount:k}=r._f,A=Pt(t,L);if(!k||e.has(L))return{};const F=u?u[0]:c,q=N=>{a&&F.reportValidity&&(F.setCustomValidity(Ui(N)?"":N||""),F.reportValidity())},K={},X=Lc(c),M=_o(c),T=X||M,Z=(E||_c(c))&&$r(c.value)&&$r(A)||sl(c)&&c.value===""||A===""||Array.isArray(A)&&!A.length,oe=Bp.bind(null,L,n,K),C=(N,R,V,he=ya.maxLength,$=ya.minLength)=>{const Y=N?R:V;K[L]={type:N?he:$,message:Y,ref:c,...oe(N?he:$,Y)}};if(i?!Array.isArray(A)||!A.length:h&&(!T&&(Z||Cn(A))||Ui(A)&&!A||M&&!Cd(u).isValid||X&&!Dd(u).isValid)){const{value:N,message:R}=Xo(h)?{value:!!h,message:h}:Rs(h);if(N&&(K[L]={type:ya.required,message:R,ref:F,...oe(ya.required,R)},!n))return q(R),K}if(!Z&&(!Cn(b)||!Cn(w))){let N,R;const V=Rs(w),he=Rs(b);if(!Cn(A)&&!isNaN(A)){const $=c.valueAsNumber||A&&+A;Cn(V.value)||(N=$>V.value),Cn(he.value)||(R=$<he.value)}else{const $=c.valueAsDate||new Date(A),Y=ge=>new Date(new Date().toDateString()+" "+ge),ne=c.type=="time",ie=c.type=="week";zi(V.value)&&A&&(N=ne?Y(A)>Y(V.value):ie?A>V.value:$>new Date(V.value)),zi(he.value)&&A&&(R=ne?Y(A)<Y(he.value):ie?A<he.value:$<new Date(he.value))}if((N||R)&&(C(!!N,V.message,he.message,ya.max,ya.min),!n))return q(K[L].message),K}if((y||x)&&!Z&&(zi(A)||i&&Array.isArray(A))){const N=Rs(y),R=Rs(x),V=!Cn(N.value)&&A.length>+N.value,he=!Cn(R.value)&&A.length<+R.value;if((V||he)&&(C(V,N.message,R.message),!n))return q(K[L].message),K}if(m&&!Z&&zi(A)){const{value:N,message:R}=Rs(m);if(ll(N)&&!A.match(N)&&(K[L]={type:ya.pattern,message:R,ref:c,...oe(ya.pattern,R)},!n))return q(R),K}if(P){if(ji(P)){const N=await P(A,t),R=Cu(N,F);if(R&&(K[L]={...R,...oe(ya.validate,R.message)},!n))return q(R.message),K}else if(Ur(P)){let N={};for(const R in P){if(!Mn(N)&&!n)break;const V=Cu(await P[R](A,t),F,R);V&&(N={...V,...oe(R,V.message)},q(V.message),n&&(K[L]=N))}if(!Mn(N)&&(K[L]={ref:F,...N},!n))return K}}return q(!0),K};const Xp={mode:Si.onSubmit,reValidateMode:Si.onChange,shouldFocusError:!0};function Zp(r={}){let e={...Xp,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ji(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let a=Ur(e.defaultValues)||Ur(e.values)?jn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:jn(a),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,y=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const w={array:wu(),state:wu()},m=e.criteriaMode===Si.all,P=J=>de=>{clearTimeout(y),y=setTimeout(J,de)},L=async J=>{if(!e.disabled&&(x.isValid||b.isValid||J)){const de=e.resolver?Mn((await M()).errors):await Z(n,!0);de!==t.isValid&&w.state.next({isValid:de})}},E=(J,de)=>{!e.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((J||Array.from(u.mount)).forEach(xe=>{xe&&(de?Nr(t.validatingFields,xe,de):en(t.validatingFields,xe))}),w.state.next({validatingFields:t.validatingFields,isValidating:!Mn(t.validatingFields)}))},k=(J,de=[],xe,Be,Ge=!0,Ue=!0)=>{if(Be&&xe&&!e.disabled){if(c.action=!0,Ue&&Array.isArray(Pt(n,J))){const Xe=xe(Pt(n,J),Be.argA,Be.argB);Ge&&Nr(n,J,Xe)}if(Ue&&Array.isArray(Pt(t.errors,J))){const Xe=xe(Pt(t.errors,J),Be.argA,Be.argB);Ge&&Nr(t.errors,J,Xe),Qp(t.errors,J)}if((x.touchedFields||b.touchedFields)&&Ue&&Array.isArray(Pt(t.touchedFields,J))){const Xe=xe(Pt(t.touchedFields,J),Be.argA,Be.argB);Ge&&Nr(t.touchedFields,J,Xe)}(x.dirtyFields||b.dirtyFields)&&(t.dirtyFields=io(a,i)),w.state.next({name:J,isDirty:C(J,de),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Nr(i,J,de)},A=(J,de)=>{Nr(t.errors,J,de),w.state.next({errors:t.errors})},F=J=>{t.errors=J,w.state.next({errors:t.errors,isValid:!1})},q=(J,de,xe,Be)=>{const Ge=Pt(n,J);if(Ge){const Ue=Pt(i,J,$r(xe)?Pt(a,J):xe);$r(Ue)||Be&&Be.defaultChecked||de?Nr(i,J,de?Ue:Au(Ge._f)):V(J,Ue),c.mount&&L()}},K=(J,de,xe,Be,Ge)=>{let Ue=!1,Xe=!1;const bt={name:J};if(!e.disabled){if(!xe||Be){(x.isDirty||b.isDirty)&&(Xe=t.isDirty,t.isDirty=bt.isDirty=C(),Ue=Xe!==bt.isDirty);const Lt=za(Pt(a,J),de);Xe=!!Pt(t.dirtyFields,J),Lt?en(t.dirtyFields,J):Nr(t.dirtyFields,J,!0),bt.dirtyFields=t.dirtyFields,Ue=Ue||(x.dirtyFields||b.dirtyFields)&&Xe!==!Lt}if(xe){const Lt=Pt(t.touchedFields,J);Lt||(Nr(t.touchedFields,J,xe),bt.touchedFields=t.touchedFields,Ue=Ue||(x.touchedFields||b.touchedFields)&&Lt!==xe)}Ue&&Ge&&w.state.next(bt)}return Ue?bt:{}},X=(J,de,xe,Be)=>{const Ge=Pt(t.errors,J),Ue=(x.isValid||b.isValid)&&Ui(de)&&t.isValid!==de;if(e.delayError&&xe?(h=P(()=>A(J,xe)),h(e.delayError)):(clearTimeout(y),h=null,xe?Nr(t.errors,J,xe):en(t.errors,J)),(xe?!za(Ge,xe):Ge)||!Mn(Be)||Ue){const Xe={...Be,...Ue&&Ui(de)?{isValid:de}:{},errors:t.errors,name:J};t={...t,...Xe},w.state.next(Xe)}},M=async J=>{E(J,!0);const de=await e.resolver(i,e.context,Wp(J||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return E(J),de},T=async J=>{const{errors:de}=await M(J);if(J)for(const xe of J){const Be=Pt(de,xe);Be?Nr(t.errors,xe,Be):en(t.errors,xe)}else t.errors=de;return de},Z=async(J,de,xe={valid:!0})=>{for(const Be in J){const Ge=J[Be];if(Ge){const{_f:Ue,...Xe}=Ge;if(Ue){const bt=u.array.has(Ue.name),Lt=Ge._f&&Kp(Ge._f);Lt&&x.validatingFields&&E([Be],!0);const wt=await Fu(Ge,u.disabled,i,m,e.shouldUseNativeValidation&&!de,bt);if(Lt&&x.validatingFields&&E([Be]),wt[Ue.name]&&(xe.valid=!1,de))break;!de&&(Pt(wt,Ue.name)?bt?Jp(t.errors,wt,Ue.name):Nr(t.errors,Ue.name,wt[Ue.name]):en(t.errors,Ue.name))}!Mn(Xe)&&await Z(Xe,de,xe)}}return xe.valid},oe=()=>{for(const J of u.unMount){const de=Pt(n,J);de&&(de._f.refs?de._f.refs.every(xe=>!zl(xe)):!zl(de._f.ref))&&we(J)}u.unMount=new Set},C=(J,de)=>!e.disabled&&(J&&de&&Nr(i,J,de),!za(ge(),a)),N=(J,de,xe)=>qp(J,u,{...c.mount?i:$r(de)?a:zi(J)?{[J]:de}:de},xe,de),R=J=>gl(Pt(c.mount?i:a,J,e.shouldUnregister?Pt(a,J,[]):[])),V=(J,de,xe={})=>{const Be=Pt(n,J);let Ge=de;if(Be){const Ue=Be._f;Ue&&(!Ue.disabled&&Nr(i,J,Fd(de,Ue)),Ge=sl(Ue.ref)&&Cn(de)?"":de,Ld(Ue.ref)?[...Ue.ref.options].forEach(Xe=>Xe.selected=Ge.includes(Xe.value)):Ue.refs?_o(Ue.ref)?Ue.refs.forEach(Xe=>{(!Xe.defaultChecked||!Xe.disabled)&&(Array.isArray(Ge)?Xe.checked=!!Ge.find(bt=>bt===Xe.value):Xe.checked=Ge===Xe.value||!!Ge)}):Ue.refs.forEach(Xe=>Xe.checked=Xe.value===Ge):_c(Ue.ref)?Ue.ref.value="":(Ue.ref.value=Ge,Ue.ref.type||w.state.next({name:J,values:jn(i)})))}(xe.shouldDirty||xe.shouldTouch)&&K(J,Ge,xe.shouldTouch,xe.shouldDirty,!0),xe.shouldValidate&&ie(J)},he=(J,de,xe)=>{for(const Be in de){if(!de.hasOwnProperty(Be))return;const Ge=de[Be],Ue=J+"."+Be,Xe=Pt(n,Ue);(u.array.has(J)||Ur(Ge)||Xe&&!Xe._f)&&!gs(Ge)?he(Ue,Ge,xe):V(Ue,Ge,xe)}},$=(J,de,xe={})=>{const Be=Pt(n,J),Ge=u.array.has(J),Ue=jn(de);Nr(i,J,Ue),Ge?(w.array.next({name:J,values:jn(i)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&xe.shouldDirty&&w.state.next({name:J,dirtyFields:io(a,i),isDirty:C(J,Ue)})):Be&&!Be._f&&!Cn(Ue)?he(J,Ue,xe):V(J,Ue,xe),Pu(J,u)&&w.state.next({...t}),w.state.next({name:c.mount?J:void 0,values:jn(i)})},Y=async J=>{c.mount=!0;const de=J.target;let xe=de.name,Be=!0;const Ge=Pt(n,xe),Ue=Lt=>{Be=Number.isNaN(Lt)||gs(Lt)&&isNaN(Lt.getTime())||za(Lt,Pt(i,xe,Lt))},Xe=_u(e.mode),bt=_u(e.reValidateMode);if(Ge){let Lt,wt;const qt=de.type?Au(Ge._f):Ep(J),ct=J.type===xu.BLUR||J.type===xu.FOCUS_OUT,dr=!Vp(Ge._f)&&!e.resolver&&!Pt(t.errors,xe)&&!Ge._f.deps||Yp(ct,Pt(t.touchedFields,xe),t.isSubmitted,bt,Xe),Wt=Pu(xe,u,ct);Nr(i,xe,qt),ct?(Ge._f.onBlur&&Ge._f.onBlur(J),h&&h(0)):Ge._f.onChange&&Ge._f.onChange(J);const Or=K(xe,qt,ct),Yt=!Mn(Or)||Wt;if(!ct&&w.state.next({name:xe,type:J.type,values:jn(i)}),dr)return(x.isValid||b.isValid)&&(e.mode==="onBlur"?ct&&L():ct||L()),Yt&&w.state.next({name:xe,...Wt?{}:Or});if(!ct&&Wt&&w.state.next({...t}),e.resolver){const{errors:ut}=await M([xe]);if(Ue(qt),Be){const zr=ku(t.errors,n,xe),Vt=ku(ut,n,zr.name||xe);Lt=Vt.error,xe=Vt.name,wt=Mn(ut)}}else E([xe],!0),Lt=(await Fu(Ge,u.disabled,i,m,e.shouldUseNativeValidation))[xe],E([xe]),Ue(qt),Be&&(Lt?wt=!1:(x.isValid||b.isValid)&&(wt=await Z(n,!0)));Be&&(Ge._f.deps&&ie(Ge._f.deps),X(xe,wt,Lt,Or))}},ne=(J,de)=>{if(Pt(t.errors,de)&&J.focus)return J.focus(),1},ie=async(J,de={})=>{let xe,Be;const Ge=uo(J);if(e.resolver){const Ue=await T($r(J)?J:Ge);xe=Mn(Ue),Be=J?!Ge.some(Xe=>Pt(Ue,Xe)):xe}else J?(Be=(await Promise.all(Ge.map(async Ue=>{const Xe=Pt(n,Ue);return await Z(Xe&&Xe._f?{[Ue]:Xe}:Xe)}))).every(Boolean),!(!Be&&!t.isValid)&&L()):Be=xe=await Z(n);return w.state.next({...!zi(J)||(x.isValid||b.isValid)&&xe!==t.isValid?{}:{name:J},...e.resolver||!J?{isValid:xe}:{},errors:t.errors}),de.shouldFocus&&!Be&&ho(n,ne,J?Ge:u.mount),Be},ge=J=>{const de={...c.mount?i:a};return $r(J)?de:zi(J)?Pt(de,J):J.map(xe=>Pt(de,xe))},Oe=(J,de)=>({invalid:!!Pt((de||t).errors,J),isDirty:!!Pt((de||t).dirtyFields,J),error:Pt((de||t).errors,J),isValidating:!!Pt(t.validatingFields,J),isTouched:!!Pt((de||t).touchedFields,J)}),j=J=>{J&&uo(J).forEach(de=>en(t.errors,de)),w.state.next({errors:J?t.errors:{}})},H=(J,de,xe)=>{const Be=(Pt(n,J,{_f:{}})._f||{}).ref,Ge=Pt(t.errors,J)||{},{ref:Ue,message:Xe,type:bt,...Lt}=Ge;Nr(t.errors,J,{...Lt,...de,ref:Be}),w.state.next({name:J,errors:t.errors,isValid:!1}),xe&&xe.shouldFocus&&Be&&Be.focus&&Be.focus()},Q=(J,de)=>ji(J)?w.state.subscribe({next:xe=>J(N(void 0,de),xe)}):N(J,de,!0),te=J=>w.state.subscribe({next:de=>{$p(J.name,de.name,J.exact)&&Gp(de,J.formState||x,Mt,J.reRenderRoot)&&J.callback({values:{...i},...t,...de})}}).unsubscribe,ae=J=>(c.mount=!0,b={...b,...J.formState},te({...J,formState:b})),we=(J,de={})=>{for(const xe of J?uo(J):u.mount)u.mount.delete(xe),u.array.delete(xe),de.keepValue||(en(n,xe),en(i,xe)),!de.keepError&&en(t.errors,xe),!de.keepDirty&&en(t.dirtyFields,xe),!de.keepTouched&&en(t.touchedFields,xe),!de.keepIsValidating&&en(t.validatingFields,xe),!e.shouldUnregister&&!de.keepDefaultValue&&en(a,xe);w.state.next({values:jn(i)}),w.state.next({...t,...de.keepDirty?{isDirty:C()}:{}}),!de.keepIsValid&&L()},Fe=({disabled:J,name:de})=>{(Ui(J)&&c.mount||J||u.disabled.has(de))&&(J?u.disabled.add(de):u.disabled.delete(de))},fe=(J,de={})=>{let xe=Pt(n,J);const Be=Ui(de.disabled)||Ui(e.disabled);return Nr(n,J,{...xe||{},_f:{...xe&&xe._f?xe._f:{ref:{name:J}},name:J,mount:!0,...de}}),u.mount.add(J),xe?Fe({disabled:Ui(de.disabled)?de.disabled:e.disabled,name:J}):q(J,!0,de.value),{...Be?{disabled:de.disabled||e.disabled}:{},...e.progressive?{required:!!de.required,min:ao(de.min),max:ao(de.max),minLength:ao(de.minLength),maxLength:ao(de.maxLength),pattern:ao(de.pattern)}:{},name:J,onChange:Y,onBlur:Y,ref:Ge=>{if(Ge){fe(J,de),xe=Pt(n,J);const Ue=$r(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,Xe=Up(Ue),bt=xe._f.refs||[];if(Xe?bt.find(Lt=>Lt===Ue):Ue===xe._f.ref)return;Nr(n,J,{_f:{...xe._f,...Xe?{refs:[...bt.filter(zl),Ue,...Array.isArray(Pt(a,J))?[{}]:[]],ref:{type:Ue.type,name:J}}:{ref:Ue}}}),q(J,!1,void 0,Ue)}else xe=Pt(n,J,{}),xe._f&&(xe._f.mount=!1),(e.shouldUnregister||de.shouldUnregister)&&!(Op(u.array,J)&&c.action)&&u.unMount.add(J)}}},Je=()=>e.shouldFocusError&&ho(n,ne,u.mount),et=J=>{Ui(J)&&(w.state.next({disabled:J}),ho(n,(de,xe)=>{const Be=Pt(n,xe);Be&&(de.disabled=Be._f.disabled||J,Array.isArray(Be._f.refs)&&Be._f.refs.forEach(Ge=>{Ge.disabled=Be._f.disabled||J}))},0,!1))},Ve=(J,de)=>async xe=>{let Be;xe&&(xe.preventDefault&&xe.preventDefault(),xe.persist&&xe.persist());let Ge=jn(i);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:Ue,values:Xe}=await M();t.errors=Ue,Ge=Xe}else await Z(n);if(u.disabled.size)for(const Ue of u.disabled)Nr(Ge,Ue,void 0);if(en(t.errors,"root"),Mn(t.errors)){w.state.next({errors:{}});try{await J(Ge,xe)}catch(Ue){Be=Ue}}else de&&await de({...t.errors},xe),Je(),setTimeout(Je);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(t.errors)&&!Be,submitCount:t.submitCount+1,errors:t.errors}),Be)throw Be},lt=(J,de={})=>{Pt(n,J)&&($r(de.defaultValue)?$(J,jn(Pt(a,J))):($(J,de.defaultValue),Nr(a,J,jn(de.defaultValue))),de.keepTouched||en(t.touchedFields,J),de.keepDirty||(en(t.dirtyFields,J),t.isDirty=de.defaultValue?C(J,jn(Pt(a,J))):C()),de.keepError||(en(t.errors,J),x.isValid&&L()),w.state.next({...t}))},Ft=(J,de={})=>{const xe=J?jn(J):a,Be=jn(xe),Ge=Mn(J),Ue=Ge?a:Be;if(de.keepDefaultValues||(a=xe),!de.keepValues){if(de.keepDirtyValues){const Xe=new Set([...u.mount,...Object.keys(io(a,i))]);for(const bt of Array.from(Xe))Pt(t.dirtyFields,bt)?Nr(Ue,bt,Pt(i,bt)):$(bt,Pt(Ue,bt))}else{if(jc&&$r(J))for(const Xe of u.mount){const bt=Pt(n,Xe);if(bt&&bt._f){const Lt=Array.isArray(bt._f.refs)?bt._f.refs[0]:bt._f.ref;if(sl(Lt)){const wt=Lt.closest("form");if(wt){wt.reset();break}}}}for(const Xe of u.mount)$(Xe,Pt(Ue,Xe))}i=jn(Ue),w.array.next({values:{...Ue}}),w.state.next({values:{...Ue}})}u={mount:de.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!x.isValid||!!de.keepIsValid||!!de.keepDirtyValues,c.watch=!!e.shouldUnregister,w.state.next({submitCount:de.keepSubmitCount?t.submitCount:0,isDirty:Ge?!1:de.keepDirty?t.isDirty:!!(de.keepDefaultValues&&!za(J,a)),isSubmitted:de.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Ge?{}:de.keepDirtyValues?de.keepDefaultValues&&i?io(a,i):t.dirtyFields:de.keepDefaultValues&&J?io(a,J):de.keepDirty?t.dirtyFields:{},touchedFields:de.keepTouched?t.touchedFields:{},errors:de.keepErrors?t.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(J,de)=>Ft(ji(J)?J(i):J,de),le=(J,de={})=>{const xe=Pt(n,J),Be=xe&&xe._f;if(Be){const Ge=Be.refs?Be.refs[0]:Be.ref;Ge.focus&&(Ge.focus(),de.shouldSelect&&ji(Ge.select)&&Ge.select())}},Mt=J=>{t={...t,...J}},rt={control:{register:fe,unregister:we,getFieldState:Oe,handleSubmit:Ve,setError:H,_subscribe:te,_runSchema:M,_focusError:Je,_getWatch:N,_getDirty:C,_setValid:L,_setFieldArray:k,_setDisabledField:Fe,_setErrors:F,_getFieldArray:R,_reset:Ft,_resetDefaultValues:()=>ji(e.defaultValues)&&e.defaultValues().then(J=>{qe(J,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:oe,_disableForm:et,_subjects:w,_proxyFormState:x,get _fields(){return n},get _formValues(){return i},get _state(){return c},set _state(J){c=J},get _defaultValues(){return a},get _names(){return u},set _names(J){u=J},get _formState(){return t},get _options(){return e},set _options(J){e={...e,...J}}},subscribe:ae,trigger:ie,register:fe,handleSubmit:Ve,watch:Q,setValue:$,getValues:ge,reset:qe,resetField:lt,clearErrors:j,unregister:we,setError:H,setFocus:le,getFieldState:Oe};return{...rt,formControl:rt}}function wo(r={}){const e=gt.useRef(void 0),t=gt.useRef(void 0),[n,a]=gt.useState({isDirty:!1,isValidating:!1,isLoading:ji(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:ji(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...r.formControl?r.formControl:Zp(r),formState:n},r.formControl&&r.defaultValues&&!ji(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions));const i=e.current.control;return i._options=r,Rp(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),gt.useEffect(()=>i._disableForm(r.disabled),[i,r.disabled]),gt.useEffect(()=>{r.mode&&(i._options.mode=r.mode),r.reValidateMode&&(i._options.reValidateMode=r.reValidateMode)},[i,r.mode,r.reValidateMode]),gt.useEffect(()=>{r.errors&&(i._setErrors(r.errors),i._focusError())},[i,r.errors]),gt.useEffect(()=>{r.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,r.shouldUnregister]),gt.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==n.isDirty&&i._subjects.state.next({isDirty:c})}},[i,n.isDirty]),gt.useEffect(()=>{r.values&&!za(r.values,t.current)?(i._reset(r.values,i._options.resetOptions),t.current=r.values,a(c=>({...c}))):i._resetDefaultValues()},[i,r.values]),gt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Mp(n,i),e.current}function Wa(r){let e=0;const n=r+"pos-system-salt-2024";for(let a=0;a<n.length;a++){const i=n.charCodeAt(a);e=(e<<5)-e+i,e=e&e}return"hash_"+Math.abs(e).toString(36)}function em(r,e){return Wa(r)===e}function tm(r=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<r;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function rm(r){const e=[];return r.length<6&&e.push("Password must be at least 6 characters long"),/[A-Z]/.test(r)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(r)||e.push("Password must contain at least one lowercase letter"),/\d/.test(r)||e.push("Password must contain at least one number"),{isValid:e.length===0,errors:e}}const nm=()=>{const{login:r,setLoading:e,setError:t,loading:n,error:a}=qn(),[i,c]=gt.useState(!1),{register:u,handleSubmit:h,formState:{errors:y}}=wo(),x=async b=>{e(!0),t(null);try{await new Promise(m=>setTimeout(m,1e3));const w=await Ai.getByUsername(b.username);if(w&&w.isActive&&em(b.password,w.password)){await Ai.update(w.id,{lastLogin:new Date});const m="jwt-token-"+w.id+"-"+Date.now();r(w,m)}else t("Invalid username or password, or account is inactive")}catch(w){console.error("Login error:",w),t("Login failed. Please try again.")}finally{e(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:o.jsx(Zh,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to POS System"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your credentials to access the system"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h(x),children:[a&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:a})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),o.jsx("input",{...u("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),type:"text",className:"input mt-1",placeholder:"Enter your username"}),y.username&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.username.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx("input",{...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:i?"text":"password",className:"input pr-10",placeholder:"Enter your password"}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!i),children:i?o.jsx(ec,{className:"h-5 w-5 text-gray-400"}):o.jsx(tc,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password.message})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Demo Accounts"})})]}),o.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2",children:o.jsxs("div",{className:"text-center text-xs text-gray-500",children:[o.jsx("div",{className:"font-medium",children:"Admin: admin / password"}),o.jsx("div",{className:"font-medium",children:"Manager: manager / password"}),o.jsx("div",{className:"font-medium",children:"Cashier: cashier / password"})]})})]})]})]})})},im=({onActivated:r})=>{const[e,t]=Sr.useState(""),[n,a]=Sr.useState(!1),[i,c]=Sr.useState(null),[u,h]=Sr.useState(!1),[y,x]=Sr.useState(null),b=async()=>{if(!e.trim()){c("Please enter a license key");return}a(!0),c(null),x(null);try{const L=await Rn.validateLicenseKey(e.trim());if(!L.valid){c(L.error||"Invalid license key");return}x(L.info);const E=await Rn.activateLicense(e.trim());E.success?(h(!0),setTimeout(()=>{r()},2e3)):c(E.error||"Failed to activate license")}catch(L){console.error("License activation error:",L),c("An unexpected error occurred. Please try again.")}finally{a(!1)}},w=L=>{const k=L.replace(/[^A-Za-z0-9]/g,"").toUpperCase().replace(/(.{5})/g,"$1-").slice(0,-1);t(k)},m=L=>{L.key==="Enter"&&!n&&e.trim()&&b()},P=L=>{navigator.clipboard.writeText(L)};return u?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md text-center",children:[o.jsx("div",{className:"bg-green-100 rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:o.jsx(Zo,{className:"h-12 w-12 text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"License Activated Successfully!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your POS system is now licensed and ready to use."}),y&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"License Details:"}),o.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",y.customerName]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Email:"})," ",y.customerEmail]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Expires:"})," ",y.expiryDate.toLocaleDateString()]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Features:"})," ",y.features.join(", ")]})]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:"Loading your POS system..."})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"bg-blue-100 rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:o.jsx(Ws,{className:"h-12 w-12 text-blue-600"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Activate POS System"}),o.jsx("p",{className:"text-gray-600",children:"Enter your license key to unlock the software"})]}),i&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[o.jsx(td,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Activation Failed"}),o.jsx("p",{className:"text-red-600 text-sm mt-1",children:i})]})]}),y&&!i&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Zo,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-green-700 text-sm font-medium",children:"License Validated"}),o.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["Valid license for ",y.customerName," (",y.customerEmail,")"]})]})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"license",className:"block text-sm font-medium text-gray-700 mb-2",children:"License Key *"}),o.jsx("input",{id:"license",type:"text",value:e,onChange:L=>w(L.target.value),onKeyPress:m,placeholder:"XXXXX-XXXXX-XXXXX-XXXXX-XXXXX",className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-center text-lg tracking-wider",disabled:n,maxLength:29}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the license key provided to you"})]}),o.jsx("button",{onClick:b,disabled:n||!e.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:n?o.jsxs(o.Fragment,{children:[o.jsx(ef,{className:"h-5 w-5 animate-spin mr-2"}),"Activating License..."]}):o.jsxs(o.Fragment,{children:[o.jsx(rd,{className:"h-5 w-5 mr-2"}),"Activate License"]})})]}),o.jsxs("div",{className:"mt-8 text-center space-y-4",children:[o.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Need help with activation?"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("button",{onClick:()=>P("support@aogtech.com"),className:"flex items-center justify-center px-3 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(tf,{className:"h-4 w-4 mr-2"}),"Copy Email"]}),o.jsxs("button",{onClick:()=>window.open("mailto:support@aogtech.com?subject=POS License Support"),className:"flex items-center justify-center px-3 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(rf,{className:"h-4 w-4 mr-2"}),"Contact Support"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-400",children:[o.jsx("p",{className:"mb-2",children:"POS System v1.0.0 by AOG Tech"}),o.jsx("p",{children:" 2024 AOG Tech. All rights reserved."})]})]})]})})},Qt=r=>`${(Number(r)||0).toFixed(2)}`,am=()=>{var F,q,K,X;const{transactions:r,products:e,cart:t}=qn(),[n,a]=gt.useState(null),[i,c]=gt.useState(!1),u=new Date,h=new Date(u.getFullYear(),u.getMonth(),u.getDate()),y=(r==null?void 0:r.filter(M=>M.createdAt>=h&&M.type==="sale"&&M.status==="completed"))||[],x=y.reduce((M,T)=>M+T.total,0),b=y.length,w=(e==null?void 0:e.filter(M=>M.quantity<=M.minStockLevel))||[],m=(e==null?void 0:e.reduce((M,T)=>M+T.cost*T.quantity,0))||0,P=(r==null?void 0:r.filter(M=>M.type==="sale"&&M.status==="completed").reduce((M,T)=>M+T.total,0))||0,L=((F=r==null?void 0:r.filter(M=>M.type==="sale"))==null?void 0:F.slice(0,5))||[],E=M=>{a(M),c(!0)},k=()=>{a(null),c(!1)},A=[{title:"Today's Sales",value:Qt(x),icon:nd,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:b.toString(),icon:Va,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Sales",value:Qt(P),icon:Ks,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Total Inventory Cost",value:Qt(m),icon:id,color:"text-orange-600",bgColor:"bg-orange-100"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),o.jsx("p",{className:"text-gray-500",children:"Welcome back! Here's what's happening today."})]}),o.jsx("div",{className:"text-sm text-gray-500",children:_r(new Date,"EEEE, MMMM do, yyyy")})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:A.map(M=>{const T=M.icon;return o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`p-2 rounded-lg ${M.bgColor}`,children:o.jsx(T,{className:`h-6 w-6 ${M.color}`})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:M.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.value})]})]})},M.title)})}),o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs(ds,{to:"/sales",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[o.jsx(Va,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"New Sale"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Process a new transaction"})]}),o.jsx(Tl,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),o.jsxs(ds,{to:"/inventory",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[o.jsx(js,{className:"h-8 w-8 text-purple-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Manage Inventory"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Add or update products"})]}),o.jsx(Tl,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),o.jsxs(ds,{to:"/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[o.jsx(ad,{className:"h-8 w-8 text-green-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Analyze sales data"})]}),o.jsx(Tl,{className:"h-5 w-5 text-gray-400 ml-auto"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"}),o.jsx(ds,{to:"/reports",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"View all"})]}),L.length>0?o.jsx("div",{className:"space-y-3",children:L.map(M=>o.jsxs("div",{onClick:()=>E(M),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-gray-900",children:["#",M.transactionNumber]}),o.jsx("p",{className:"text-sm text-gray-500",children:_r(M.createdAt,"MMM dd, hh:mm a")})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-medium text-gray-900",children:Qt(M.total)}),o.jsx("p",{className:`text-xs ${M.status==="completed"?"text-green-600":"text-yellow-600"}`,children:M.status})]})]},M.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Va,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),o.jsx(ds,{to:"/inventory",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Manage"})]}),w.length>0?o.jsxs("div",{className:"space-y-3",children:[w.slice(0,5).map(M=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(vo,{className:"h-5 w-5 text-red-500 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:M.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",M.sku]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-medium text-red-600",children:[M.quantity," left"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",M.minStockLevel]})]})]},M.id)),w.length>5&&o.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["+",w.length-5," more items need attention"]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(js,{className:"h-12 w-12 text-green-300 mx-auto mb-4"}),o.jsx("p",{className:"text-green-600 font-medium",children:"All products well stocked!"})]})]})]}),((q=t==null?void 0:t.items)==null?void 0:q.length)>0&&o.jsx("div",{className:"card bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Active Cart"}),o.jsxs("p",{className:"text-blue-700",children:[t.items.length," items  Total: ",Qt(t.total)]})]}),o.jsx(ds,{to:"/sales",className:"btn btn-primary",children:"Continue Sale"})]})}),i&&n&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ks,{className:"h-6 w-6 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),o.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600",children:o.jsx(ba,{className:"h-6 w-6"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ks,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),o.jsxs("p",{className:"font-medium",children:["#",n.transactionNumber]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Nc,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),o.jsx("p",{className:"font-medium",children:_r(n.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(wc,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),o.jsxs("p",{className:"font-medium",children:[(K=n.cashier)==null?void 0:K.firstName," ",(X=n.cashier)==null?void 0:X.lastName]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(sd,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),o.jsx("p",{className:"font-medium capitalize",children:n.paymentMethod})]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),o.jsx("div",{className:"space-y-2",children:n.items.map(M=>{var T;return o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-900",children:((T=M.product)==null?void 0:T.name)||"Unknown Product"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[Qt(M.unitPrice),"  ",M.quantity]})]}),o.jsx("div",{className:"text-right",children:o.jsx("p",{className:"font-medium text-gray-900",children:Qt(M.totalPrice)})})]},M.id)})})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{children:Qt(n.subtotal)})]}),n.discount>0&&o.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[o.jsx("span",{children:"Discount:"}),o.jsxs("span",{children:["-",Qt(n.discount)]})]}),o.jsx("div",{className:"border-t border-gray-200 pt-2",children:o.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Qt(n.total)})]})}),n.paymentMethod==="cash"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Cash Received:"}),o.jsx("span",{children:Qt(n.paymentAmount)})]}),n.changeAmount>0&&o.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[o.jsx("span",{children:"Change Given:"}),o.jsx("span",{children:Qt(n.changeAmount)})]})]})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{children:o.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${n.status==="completed"?"bg-green-100 text-green-800":n.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})}),o.jsxs("p",{className:"text-sm text-gray-500",children:[n.items.length," item",n.items.length!==1?"s":""]})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:k,className:"btn btn-outline",children:"Close"})})})]})})]})},sm=()=>{var ge,Oe;console.log("Sales component rendering...");const{products:r,categories:e,cart:t,addToCart:n,removeFromCart:a,updateCartItem:i,clearCart:c,addTransaction:u,auth:h,settings:y}=qn(),[x,b]=gt.useState(""),[w,m]=gt.useState(""),[P,L]=gt.useState(0),[E,k]=gt.useState(!1),[A,F]=gt.useState(!1),[q,K]=gt.useState(null),[X,M]=gt.useState(null),[T,Z]=gt.useState(!0),oe=gt.useRef(null);gt.useEffect(()=>{oe.current&&oe.current.focus()},[]),gt.useEffect(()=>{Z(!E&&!A)},[E,A]),gt.useEffect(()=>{if(X){const j=setTimeout(()=>M(null),3e3);return()=>clearTimeout(j)}},[X]),gt.useEffect(()=>{let j="",H;const Q=te=>{const ae=document.activeElement,we=(ae==null?void 0:ae.tagName)==="INPUT"||(ae==null?void 0:ae.tagName)==="TEXTAREA"||(ae==null?void 0:ae.tagName)==="SELECT";if(!(E||A)){if(we&&ae===oe.current){te.key.length===1&&/[A-Za-z0-9\-_\.]/.test(te.key)&&(j+=te.key,H&&clearTimeout(H),H=setTimeout(()=>{j.length>=8?(C(j),j="",b("")):j=""},150));return}we||(H&&clearTimeout(H),te.key==="Enter"?j.length>=3&&(te.preventDefault(),C(j),j=""):te.key.length===1&&/[A-Za-z0-9\-_\.]/.test(te.key)?(j+=te.key,H=setTimeout(()=>{j.length>=3&&(C(j),j="")},100)):te.key==="Escape"&&(j=""))}};return document.addEventListener("keydown",Q),()=>{document.removeEventListener("keydown",Q),H&&clearTimeout(H)}},[E,A]);const C=j=>{const H=j.trim().toUpperCase();H.length>=3&&he(H)},N=(j,H)=>{if(M({type:j,message:H}),j==="success")try{"Notification"in window&&Notification.permission==="granted"&&new Notification("Product Added",{body:H})}catch{console.log("Notification not supported")}try{const Q=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LPdSEFl");Q.volume=.3,Q.play().catch(()=>{})}catch{}};if(!r||!e||!t)return console.log("Sales - Missing required data:",{products:!!r,categories:!!e,cart:!!t}),o.jsxs("div",{className:"p-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sales Page - Debug Mode"}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[o.jsx("h2",{className:"font-medium text-yellow-800 mb-2",children:"Loading Debug Info:"}),o.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[o.jsxs("li",{children:["Products: ",r?`${r.length} items`:"Not loaded"]}),o.jsxs("li",{children:["Categories: ",e?`${e.length} items`:"Not loaded"]}),o.jsxs("li",{children:["Cart: ",t?"Initialized":"Not initialized"]}),o.jsxs("li",{children:["Auth: ",h!=null&&h.user?`${h.user.username} (${h.user.role})`:"Not authenticated"]})]}),o.jsx("p",{className:"mt-2 text-xs",children:"If this persists, check the browser console for errors."})]})]});const R=r.filter(j=>{if(!j||!j.name)return console.warn("Sales - Problematic product found:",j),!1;const H=(j==null?void 0:j.name)||"",Q=(j==null?void 0:j.sku)||"",te=x.toLowerCase(),ae=H.toLowerCase().includes(te)||Q.toLowerCase().includes(te),we=!w||(j==null?void 0:j.categoryId)===w;return ae&&we&&(j==null?void 0:j.isActive)&&((j==null?void 0:j.quantity)||0)>0});console.log("Sales - Filtered products:",R.length);const V=j=>{j.quantity>0&&n(j,1)},he=j=>{const H=r.find(Q=>{var te;return Q.sku.toLowerCase()===j.toLowerCase()||((te=Q.barcode)==null?void 0:te.toLowerCase())===j.toLowerCase()});if(H)if(H.isActive&&H.quantity>0){const Q=t.items.find(ae=>ae.product.id===H.id);V(H);const te=Q?`${H.name} quantity increased to ${Q.quantity+1}`:`${H.name} added to cart`;N("success",te)}else{const Q=`Product "${H.name}" is not available for sale.`;N("error",Q)}else{const Q=`Product with SKU "${j}" not found in inventory.`;N("error",Q)}},$=(j,H)=>{H<=0?a(j):i(j,H)},Y=()=>{var te;if(t.items.length===0)return;const j=Math.max(0,P-t.total),H=t.items.map((ae,we)=>({id:(Date.now()+we).toString(),productId:ae.product.id,product:ae.product,quantity:ae.quantity,unitPrice:ae.unitPrice,totalPrice:ae.totalPrice,discount:ae.discount||0})),Q={id:Date.now().toString(),transactionNumber:`TXN${Date.now()}`,type:"sale",status:"completed",items:H,subtotal:t.subtotal,tax:t.tax,discount:t.discount,total:t.total,paymentMethod:"cash",paymentAmount:P,changeAmount:j,cashierId:((te=h.user)==null?void 0:te.id)||"",cashier:h.user||void 0,createdAt:new Date,updatedAt:new Date};u(Q),K(Q),c(),k(!1),F(!0),L(0)},ne=()=>{L(t.total),k(!0)},ie=()=>{window.print()};return o.jsxs("div",{className:"h-full flex",children:[o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[X&&o.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${X.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:o.jsxs("div",{className:"flex items-center",children:[X.type==="success"?o.jsx(Zo,{className:"h-5 w-5 mr-2"}):o.jsx(od,{className:"h-5 w-5 mr-2"}),X.message]})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search by name or SKU... (Barcodes auto-scan anywhere on this page)",value:x,onChange:j=>b(j.target.value),className:"input pl-10",ref:oe})]}),o.jsxs("select",{value:w,onChange:j=>m(j.target.value),className:"input w-48",children:[o.jsx("option",{value:"",children:"All Categories"}),e.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${T?"bg-green-500 animate-pulse":"bg-gray-400"}`}),o.jsx("span",{className:T?"text-green-600 font-medium":"text-gray-500",children:T?" Ready for barcode scanning - just scan anywhere on this page!":" Scanning paused (modal open)"})]}),o.jsx("div",{className:"text-xs text-gray-400",children:"Press ESC to clear scan buffer"})]})]}),o.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:R.map(j=>o.jsx("div",{onClick:()=>V(j),className:"card p-4 cursor-pointer hover:shadow-md transition-shadow duration-200",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg mx-auto mb-3 flex items-center justify-center overflow-hidden",children:j.imageUrl?o.jsx("img",{src:j.imageUrl,alt:j.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"text-2xl",children:""})}),o.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-1 truncate",children:j.name}),o.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",j.sku]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-lg font-bold text-gray-900",children:Qt(j.price)}),j.wholesalePrice&&j.wholesaleMinQuantity&&o.jsxs("div",{className:"text-xs",children:[o.jsxs("p",{className:"text-green-600 font-medium",children:["Wholesale: ",Qt(j.wholesalePrice)]}),o.jsxs("p",{className:"text-gray-500",children:["Min qty: ",j.wholesaleMinQuantity]})]})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Stock: ",j.quantity]})]})},j.id))})})]}),o.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Current Sale"}),o.jsxs("div",{className:"flex items-center text-gray-500",children:[o.jsx(Va,{className:"h-5 w-5 mr-1"}),o.jsx("span",{children:t.items.length})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.items.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Va,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Cart is empty"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Add products to start a sale"})]}):o.jsx("div",{className:"space-y-3",children:t.items.map(j=>o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:j.product.name}),j.product.wholesalePrice&&j.product.wholesaleMinQuantity&&j.quantity>=j.product.wholesaleMinQuantity&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-1",children:"Wholesale Price Applied"})]}),o.jsx("button",{onClick:()=>a(j.product.id),className:"text-red-500 hover:text-red-700",children:o.jsx(el,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>$(j.product.id,j.quantity-1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:o.jsx(nf,{className:"h-3 w-3"})}),o.jsx("span",{className:"text-sm font-medium",children:j.quantity}),o.jsx("button",{onClick:()=>$(j.product.id,j.quantity+1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",disabled:j.quantity>=j.product.quantity,children:o.jsx(Ao,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:[Qt(j.unitPrice)," each",j.product.wholesalePrice&&j.product.wholesaleMinQuantity&&j.quantity>=j.product.wholesaleMinQuantity&&o.jsx("span",{className:"ml-1 line-through text-gray-400",children:Qt(j.product.price)})]}),o.jsx("p",{className:"font-medium text-gray-900",children:Qt(j.totalPrice)})]})]})]},j.product.id))})}),t.items.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Subtotal:"}),o.jsx("span",{children:Qt(t.subtotal)})]}),t.discount>0&&o.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[o.jsx("span",{children:"Discount:"}),o.jsxs("span",{children:["-",Qt(t.discount)]})]}),o.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Qt(t.total)})]})]}),o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsx("button",{onClick:ne,className:"btn btn-primary w-full",children:"Process Payment"}),o.jsx("button",{onClick:()=>c(),className:"btn btn-outline w-full",children:"Clear Cart"})]})]})]}),E&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cash Payment"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:o.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[o.jsx("span",{children:"Total Amount:"}),o.jsx("span",{children:Qt(t.total)})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cash Received"}),o.jsx("input",{type:"number",value:P,onChange:j=>L(Number(j.target.value)),className:"input w-full text-lg",min:t.total,step:"0.01",placeholder:"Enter amount received",autoFocus:!0}),P>t.total&&o.jsx("div",{className:"mt-2 p-3 bg-green-50 rounded-lg",children:o.jsxs("span",{className:"text-lg font-bold text-green-800",children:["Change: ",Qt(P-t.total)]})}),P>0&&P<t.total&&o.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:o.jsxs("span",{className:"text-sm text-red-800",children:["Insufficient amount. Need ",Qt(t.total-P)," more."]})})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>k(!1),className:"flex-1 btn btn-outline",children:"Cancel"}),o.jsx("button",{onClick:Y,disabled:P<t.total,className:"flex-1 btn btn-primary",children:"Complete Sale"})]})]})]})}),A&&q&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(af,{className:"h-6 w-6 text-green-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sale Completed!"})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4 font-mono text-sm",children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-bold",children:y.storeName}),o.jsx("p",{className:"text-xs",children:"Receipt"})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-2 mb-2",children:[o.jsxs("p",{children:["Transaction: #",q.transactionNumber]}),o.jsxs("p",{children:["Date: ",_r(q.createdAt,"MMM dd, yyyy hh:mm a")]}),o.jsxs("p",{children:["Cashier: ",(ge=q.cashier)==null?void 0:ge.firstName," ",(Oe=q.cashier)==null?void 0:Oe.lastName]})]}),o.jsx("div",{className:"border-t border-gray-200 pt-2 mb-2",children:q.items.map(j=>{var H;return o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{children:[(H=j.product)==null?void 0:H.name," x",j.quantity]}),o.jsx("span",{children:Qt(j.totalPrice)})]},j.id)})}),o.jsxs("div",{className:"border-t border-gray-200 pt-2 text-xs",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Subtotal:"}),o.jsx("span",{children:Qt(q.subtotal)})]}),o.jsxs("div",{className:"flex justify-between font-bold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Qt(q.total)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Payment (cash):"}),o.jsx("span",{children:Qt(q.paymentAmount)})]}),q.changeAmount>0&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Change:"}),o.jsx("span",{children:Qt(q.changeAmount)})]})]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:ie,className:"flex-1 btn btn-outline",children:[o.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Print"]}),o.jsx("button",{onClick:()=>F(!1),className:"flex-1 btn btn-primary",children:"Done"})]})]})})]})},Ed=({isOpen:r,onClose:e,onScan:t,mode:n="sale",title:a,placeholder:i})=>{const[c,u]=gt.useState(""),[h,y]=gt.useState(!1),[x,b]=gt.useState([]);gt.useEffect(()=>{r||(u(""),y(!1),b([]))},[r]),gt.useEffect(()=>{let A,F="",q;const K=X=>{!r||!h||(X.target===document.body&&X.preventDefault(),A&&clearTimeout(A),q&&clearTimeout(q),X.key==="Enter"?F.length>=3?(w(F),F=""):c.length>=3&&w(c):X.key==="Escape"?(y(!1),u(""),F=""):X.key.length===1&&/[A-Za-z0-9\-_\.]/.test(X.key)&&(F+=X.key,u(M=>M+X.key),q=setTimeout(()=>{F.length>=3&&(w(F),F="")},100),A=setTimeout(()=>{c.length>=2&&w(c+X.key)},1e3)))};return h&&(document.addEventListener("keydown",K),document.body.focus()),()=>{document.removeEventListener("keydown",K),A&&clearTimeout(A),q&&clearTimeout(q)}},[r,h,c]);const w=A=>{const F=A.trim().toUpperCase();F.length>=3&&(b(q=>[F,...q.slice(0,4)]),t(F,n),u(""),y(!1))},m=()=>{w(c)},P=A=>{t(A,n)},L=()=>{switch(n){case"sale":return{icon:Va,title:a||"Scan Product for Sale",description:"Scan barcode to add product to cart",color:"blue"};case"inventory":return{icon:js,title:a||"Scan Product for Inventory",description:"Scan barcode to find and edit product",color:"green"};case"stock-adjustment":return{icon:co,title:a||"Scan for Stock Adjustment",description:"Scan barcode to adjust stock levels",color:"orange"};case"quick-sale":return{icon:Ao,title:a||"Quick Sale Scanner",description:"Rapid scanning for multiple items",color:"purple"};default:return{icon:rc,title:a||"Scan Barcode",description:"Point scanner at barcode",color:"blue"}}};if(!r)return null;const E=L(),k=E.icon;return o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.title}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(ba,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:`p-4 rounded-full bg-${E.color}-100`,children:o.jsx(k,{className:`h-12 w-12 text-${E.color}-600`})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 mb-2",children:h?"Scanning... Point scanner at barcode":"Ready to scan"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:E.description}),o.jsxs("div",{className:"bg-gray-100 border rounded-lg p-3 mb-4",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Scanned Code:"}),o.jsx("p",{className:"font-mono text-lg font-semibold min-h-[28px]",children:c||i||"No code scanned yet"})]})]}),o.jsx("div",{className:"space-y-3",children:h?o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>y(!1),className:"btn btn-outline w-full",children:"Stop Scanning"}),c&&o.jsx("button",{onClick:m,className:"btn btn-success w-full",disabled:c.length<3,children:"Use This Code"})]}):o.jsxs("button",{onClick:()=>y(!0),className:"btn btn-primary w-full flex items-center justify-center",children:[o.jsx(rc,{className:"h-4 w-4 mr-2"}),"Start Scanning"]})}),x.length>0&&o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Scans:"}),o.jsx("div",{className:"space-y-1",children:x.map((A,F)=>o.jsx("button",{onClick:()=>P(A),className:"w-full text-xs bg-gray-50 hover:bg-gray-100 rounded px-2 py-1 font-mono text-left transition-colors",children:A},F))})]}),o.jsxs("div",{className:"text-xs text-gray-500 space-y-1 border-t pt-3",children:[o.jsx("p",{children:" Point barcode scanner at any SKU/barcode"}),o.jsx("p",{children:" Code will be automatically detected"}),o.jsx("p",{children:" Manual entry: type and press Enter"}),o.jsx("p",{children:" Press Escape to cancel"})]})]})]})})},om=({isOpen:r,onClose:e})=>{const{products:t,updateStock:n}=qn(),[a,i]=gt.useState(!1),[c,u]=gt.useState([]),[h,y]=gt.useState(null),[x,b]=gt.useState(0),[w,m]=gt.useState(""),[P,L]=gt.useState(!1),[E,k]=gt.useState(null),A=(T,Z)=>{k({type:T,message:Z}),setTimeout(()=>k(null),3e3)},F=T=>{const Z=t.find(oe=>{var C;return oe.sku.toLowerCase()===T.toLowerCase()||((C=oe.barcode)==null?void 0:C.toLowerCase())===T.toLowerCase()});Z?(y(Z),b(0),m(""),i(!1),A("success",`Product found: ${Z.name}`)):(A("error",`Product with SKU "${T}" not found`),i(!1))},q=()=>{if(!h||x===0)return;const T=h.quantity+x;if(T<0){A("error","Cannot reduce stock below zero");return}const Z={product:h,currentStock:h.quantity,newStock:T,adjustment:x,reason:w||"Manual adjustment"};u(oe=>[...oe,Z]),y(null),b(0),m(""),A("success","Adjustment added to batch")},K=T=>{u(Z=>Z.filter((oe,C)=>C!==T))},X=async()=>{if(c.length!==0){L(!0);try{for(const T of c)await n(T.product.id,T.adjustment);A("success",`Successfully applied ${c.length} stock adjustments`),u([]),setTimeout(()=>{e()},2e3)}catch(T){console.error("Error applying stock adjustments:",T),A("error","Failed to apply some adjustments. Please try again.")}finally{L(!1)}}},M=[{label:"+1",value:1,color:"green"},{label:"+5",value:5,color:"green"},{label:"+10",value:10,color:"green"},{label:"-1",value:-1,color:"red"},{label:"-5",value:-5,color:"red"},{label:"-10",value:-10,color:"red"}];return r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-40",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Stock Adjustment"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Scan products to quickly adjust stock levels"})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(ba,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[E&&o.jsx("div",{className:`p-4 rounded-lg ${E.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:E.message}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Product Scanner"}),o.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center",children:[o.jsx(js,{className:"h-4 w-4 mr-2"}),"Scan Product"]})]}),h&&o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:h.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",h.sku]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Current Stock: ",o.jsx("span",{className:"font-medium",children:h.quantity})]})]}),o.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600",children:o.jsx(ba,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Adjustments:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(T=>o.jsx("button",{onClick:()=>b(T.value),className:`px-3 py-1 text-sm rounded border transition-colors ${x===T.value?T.color==="green"?"bg-green-100 border-green-300 text-green-800":"bg-red-100 border-red-300 text-red-800":T.color==="green"?"border-green-200 text-green-600 hover:bg-green-50":"border-red-200 text-red-600 hover:bg-red-50"}`,children:T.label},T.label))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment"}),o.jsx("input",{type:"number",value:x,onChange:T=>b(Number(T.target.value)),className:"input",placeholder:"Enter adjustment"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Stock Level"}),o.jsx("input",{type:"number",value:h.quantity+x,readOnly:!0,className:"input bg-gray-50"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),o.jsxs("select",{value:w,onChange:T=>m(T.target.value),className:"input",children:[o.jsx("option",{value:"",children:"Select reason"}),o.jsx("option",{value:"Stock count",children:"Stock count"}),o.jsx("option",{value:"Damage",children:"Damage"}),o.jsx("option",{value:"Theft",children:"Theft"}),o.jsx("option",{value:"Expired",children:"Expired"}),o.jsx("option",{value:"Received inventory",children:"Received inventory"}),o.jsx("option",{value:"Correction",children:"Correction"}),o.jsx("option",{value:"Other",children:"Other"})]})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsxs("button",{onClick:q,disabled:x===0,className:"btn btn-primary flex items-center",children:[o.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Add to Batch"]})})]})]}),c.length>0&&o.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[o.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"font-medium text-gray-900",children:["Pending Adjustments (",c.length,")"]}),o.jsxs("button",{onClick:X,disabled:P,className:"btn btn-success flex items-center",children:[P?o.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(cd,{className:"h-4 w-4 mr-2"}),"Apply All"]})]})}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:c.map((T,Z)=>o.jsx("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:T.product.name}),o.jsx("button",{onClick:()=>K(Z),className:"text-red-500 hover:text-red-700",children:o.jsx(ba,{className:"h-4 w-4"})})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",T.product.sku]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[o.jsxs("span",{children:["Current: ",o.jsx("strong",{children:T.currentStock})]}),o.jsxs("span",{className:`font-medium ${T.adjustment>0?"text-green-600":"text-red-600"}`,children:[T.adjustment>0?"+":"",T.adjustment]}),o.jsxs("span",{children:["New: ",o.jsx("strong",{children:T.newStock})]}),o.jsxs("span",{className:"text-gray-500",children:["(",T.reason,")"]})]})]})})},Z))})]})]})]})}),o.jsx(Ed,{isOpen:a,onClose:()=>i(!1),onScan:F,mode:"stock-adjustment",placeholder:"Scan product barcode..."})]}):null},lm=()=>{var Rt,tr,Xn;const{products:r,categories:e,addProduct:t,updateProduct:n,deleteProduct:a,addCategory:i,updateCategory:c,deleteCategory:u,auth:h}=qn(),[y,x]=gt.useState(""),[b,w]=gt.useState(""),[m,P]=gt.useState(!1),[L,E]=gt.useState(!1),[k,A]=gt.useState(!1),[F,q]=gt.useState(!1),[K,X]=gt.useState(null),[M,T]=gt.useState(null),[Z,oe]=gt.useState("name"),[C,N]=gt.useState("asc"),[R,V]=gt.useState(!1),[he,$]=gt.useState([]),[Y,ne]=gt.useState("all"),[ie,ge]=gt.useState("all"),[Oe,j]=gt.useState(!1),[H,Q]=gt.useState(null),[te,ae]=gt.useState(null),{register:we,handleSubmit:Fe,reset:fe,setValue:Je,watch:et,formState:{errors:Ve,isSubmitting:lt}}=wo(),{register:Ft,handleSubmit:qe,reset:le,formState:{errors:Mt,isSubmitting:jt}}=wo(),rt=et("sku"),J=(De,mt)=>{Q({type:De,message:mt}),setTimeout(()=>Q(null),3e3)},de=De=>{var xt;const mt=(xt=De.target.files)==null?void 0:xt[0];if(!mt)return;if(mt.size>5*1024*1024){J("error","Image size must be less than 5MB");return}if(!mt.type.startsWith("image/")){J("error","Please select a valid image file");return}const Et=new FileReader;Et.onload=sr=>{var Bt;const Ht=(Bt=sr.target)==null?void 0:Bt.result;ae(Ht),Je("imageUrl",Ht)},Et.readAsDataURL(mt)},xe=()=>{ae(null),Je("imageUrl","")},Be=r.filter(De=>{var Ht;const mt=De.name.toLowerCase().includes(y.toLowerCase())||De.sku.toLowerCase().includes(y.toLowerCase())||((Ht=De.description)==null?void 0:Ht.toLowerCase().includes(y.toLowerCase())),Et=!b||De.categoryId===b;let xt=!0;Y==="low"?xt=De.quantity<=De.minStockLevel&&De.quantity>0:Y==="out"&&(xt=De.quantity===0);let sr=!0;return ie==="active"?sr=De.isActive:ie==="inactive"&&(sr=!De.isActive),mt&&Et&&xt&&sr}).sort((De,mt)=>{var xt,sr;let Et=0;switch(Z){case"name":Et=De.name.localeCompare(mt.name);break;case"price":Et=De.price-mt.price;break;case"quantity":Et=De.quantity-mt.quantity;break;case"category":const Ht=((xt=e.find(mr=>mr.id===De.categoryId))==null?void 0:xt.name)||"",Bt=((sr=e.find(mr=>mr.id===mt.categoryId))==null?void 0:sr.name)||"";Et=Ht.localeCompare(Bt);break}return C==="asc"?Et:-Et}),Ge=r.filter(De=>De.quantity<=De.minStockLevel&&De.quantity>0),Ue=r.filter(De=>De.quantity===0),Xe=De=>{Z===De?N(C==="asc"?"desc":"asc"):(oe(De),N("asc"))},bt=De=>{const mt=De.trim();return mt.length>=3&&mt.length<=50&&/^[A-Za-z0-9\-_]+$/.test(mt)},Lt=(De,mt)=>r.some(Et=>Et.sku.toLowerCase()===De.toLowerCase()&&Et.id!==mt),wt=De=>{var mt;De?(X(De),ae(De.imageUrl||null),fe({name:De.name,description:De.description||"",sku:De.sku,barcode:De.barcode||"",price:De.price,cost:De.cost,quantity:De.quantity,minStockLevel:De.minStockLevel,categoryId:De.categoryId,isActive:De.isActive,imageUrl:De.imageUrl||"",wholesalePrice:De.wholesalePrice||void 0,wholesaleMinQuantity:De.wholesaleMinQuantity||void 0})):(X(null),ae(null),fe({name:"",description:"",sku:"",barcode:"",price:0,cost:0,quantity:0,minStockLevel:5,categoryId:((mt=e[0])==null?void 0:mt.id)||"",isActive:!0,imageUrl:"",wholesalePrice:void 0,wholesaleMinQuantity:void 0})),P(!0)},qt=()=>{P(!1),X(null),ae(null),fe()},ct=async De=>{try{if(j(!0),!bt(De.sku)){J("error","Invalid SKU format. Must be 3-50 alphanumeric characters (letters, numbers, hyphens, underscores).");return}if(Lt(De.sku,K==null?void 0:K.id)){J("error","SKU already exists. Please use a different SKU.");return}const mt={...De,sku:De.sku.trim().toUpperCase(),barcode:De.barcode||De.sku.trim().toUpperCase()};if(K)n(K.id,{...mt,updatedAt:new Date}),J("success","Product updated successfully!");else{const Et={...mt,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};t(Et),J("success","Product added successfully!")}qt()}catch(mt){console.error("Error saving product:",mt),J("error","Failed to save product. Please try again.")}finally{j(!1)}},dr=async De=>{if(window.confirm(`Are you sure you want to delete "${De.name}"? This action cannot be undone.`))try{a(De.id),J("success","Product deleted successfully!")}catch(mt){console.error("Error deleting product:",mt),J("error","Failed to delete product. Please try again.")}},Wt=De=>{if(he.length===0)return;const mt=De==="delete"?`Are you sure you want to delete ${he.length} selected products?`:`Are you sure you want to ${De} ${he.length} selected products?`;window.confirm(mt)&&(he.forEach(Et=>{De==="delete"?a(Et):n(Et,{isActive:De==="activate",updatedAt:new Date})}),$([]),J("success",`Bulk ${De} completed successfully!`))},Or=De=>{const mt=De.trim().toUpperCase(),Et=r.find(xt=>xt.sku.toUpperCase()===mt||xt.barcode===De);Et?(wt(Et),J("success",`Found product: ${Et.name}`)):(wt(),Je("sku",mt),Je("barcode",mt),J("success","New product form opened with scanned SKU")),A(!1)},Yt=De=>{$(mt=>mt.includes(De)?mt.filter(Et=>Et!==De):[...mt,De])},ut=()=>{he.length===Be.length?$([]):$(Be.map(De=>De.id))},zr=()=>{const De=["Name","SKU","Category","Price","Cost","Quantity","Min Stock","Status"],mt=Be.map(Bt=>{var hr;const mr=((hr=e.find(Hr=>Hr.id===Bt.categoryId))==null?void 0:hr.name)||"N/A";return[Bt.name,Bt.sku,mr,Bt.price.toFixed(2),Bt.cost.toFixed(2),Bt.quantity,Bt.minStockLevel,Bt.isActive?"Active":"Inactive"]}),Et=[De,...mt].map(Bt=>Bt.join(",")).join(`
`),xt=new Blob([Et],{type:"text/csv"}),sr=window.URL.createObjectURL(xt),Ht=document.createElement("a");Ht.href=sr,Ht.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,Ht.click(),window.URL.revokeObjectURL(sr),J("success","Inventory exported to CSV successfully!")},Vt=De=>{De?(T(De),le({name:De.name,description:De.description||""})):(T(null),le({name:"",description:""})),E(!0)},gn=()=>{E(!1),T(null),le()},at=async De=>{try{if(M)c(M.id,{...De,updatedAt:new Date}),J("success","Category updated successfully!");else{const mt={...De,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};i(mt),J("success","Category added successfully!")}gn()}catch(mt){console.error("Error saving category:",mt),J("error","Failed to save category. Please try again.")}},un=async De=>{try{const mt=r.filter(Et=>Et.categoryId===De.id).length;if(mt>0){if(!window.confirm(`This category contains ${mt} products. Are you sure you want to delete it? You'll need to reassign those products to other categories first.`))return;J("error",`Cannot delete category. ${mt} products are using this category. Please reassign them first.`);return}window.confirm(`Are you sure you want to delete the category "${De.name}"? This action cannot be undone.`)&&(u(De.id),J("success","Category deleted successfully!"))}catch(mt){console.error("Error deleting category:",mt),J("error",mt.message||"Failed to delete category. Please try again.")}},rn=((Rt=h.user)==null?void 0:Rt.role)==="admin"||((tr=h.user)==null?void 0:tr.role)==="manager",lr=((Xn=h.user)==null?void 0:Xn.role)==="admin";return o.jsxs("div",{className:"space-y-6",children:[H&&o.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${H.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:o.jsxs("div",{className:"flex items-center",children:[H.type==="success"?o.jsx(Zo,{className:"h-5 w-5 mr-2"}):o.jsx(od,{className:"h-5 w-5 mr-2"}),H.message]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),o.jsx("p",{className:"text-gray-500",children:"Manage your products and stock levels"}),o.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[o.jsxs("span",{children:["Total: ",r.length]}),o.jsxs("span",{children:["Active: ",r.filter(De=>De.isActive).length]}),o.jsxs("span",{children:["Low Stock: ",Ge.length]}),o.jsxs("span",{children:["Out of Stock: ",Ue.length]})]})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:rn&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>q(!0),className:"btn btn-outline bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100",children:[o.jsx(co,{className:"h-4 w-4 mr-2"}),"Stock Adjustment"]}),o.jsxs("button",{onClick:()=>Vt(),className:"btn btn-outline",children:[o.jsx(sf,{className:"h-4 w-4 mr-2"}),"Manage Categories"]}),o.jsxs("button",{onClick:zr,className:"btn btn-outline",children:[o.jsx(tl,{className:"h-4 w-4 mr-2"}),"Export"]}),o.jsxs("button",{onClick:()=>wt(),className:"btn btn-primary",children:[o.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ge.length>0&&o.jsx("div",{className:"card bg-orange-50 border-orange-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(vo,{className:"h-5 w-5 text-orange-500 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-orange-800 font-medium",children:"Low Stock Alert"}),o.jsxs("p",{className:"text-orange-700 text-sm",children:[Ge.length," product(s) are running low on stock"]})]})]})}),Ue.length>0&&o.jsx("div",{className:"card bg-red-50 border-red-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(of,{className:"h-5 w-5 text-red-500 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-red-800 font-medium",children:"Out of Stock"}),o.jsxs("p",{className:"text-red-700 text-sm",children:[Ue.length," product(s) are out of stock"]})]})]})})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search by name, SKU, or description...",value:y,onChange:De=>x(De.target.value),className:"input pl-10"})]}),o.jsxs("div",{className:"flex gap-2",children:[rn&&o.jsxs("button",{onClick:()=>A(!0),className:"btn btn-outline flex items-center",title:"Scan SKU to find product",children:[o.jsx(rc,{className:"h-4 w-4 mr-2"}),"Scan SKU"]}),o.jsxs("button",{onClick:()=>V(!R),className:"btn btn-outline flex items-center",children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]}),R&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[o.jsxs("select",{value:b,onChange:De=>w(De.target.value),className:"input",children:[o.jsx("option",{value:"",children:"All Categories"}),e.map(De=>o.jsx("option",{value:De.id,children:De.name},De.id))]}),o.jsxs("select",{value:Y,onChange:De=>ne(De.target.value),className:"input",children:[o.jsx("option",{value:"all",children:"All Stock Levels"}),o.jsx("option",{value:"low",children:"Low Stock"}),o.jsx("option",{value:"out",children:"Out of Stock"})]}),o.jsxs("select",{value:ie,onChange:De=>ge(De.target.value),className:"input",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]}),o.jsxs("button",{onClick:()=>{w(""),ne("all"),ge("all"),x("")},className:"btn btn-outline",children:[o.jsx(vs,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})}),he.length>0&&rn&&o.jsx("div",{className:"card bg-blue-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-blue-900 font-medium",children:[he.length," product(s) selected"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Wt("activate"),className:"btn btn-outline btn-sm",children:"Activate"}),o.jsx("button",{onClick:()=>Wt("deactivate"),className:"btn btn-outline btn-sm",children:"Deactivate"}),lr&&o.jsx("button",{onClick:()=>Wt("delete"),className:"btn btn-outline btn-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})}),o.jsx("div",{className:"card overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[rn&&o.jsx("th",{className:"w-12",children:o.jsx("input",{type:"checkbox",checked:he.length===Be.length&&Be.length>0,onChange:ut,className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),o.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("name"),children:o.jsxs("div",{className:"flex items-center",children:["Product",Z==="name"&&o.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),o.jsx("th",{children:"SKU"}),o.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("category"),children:o.jsxs("div",{className:"flex items-center",children:["Category",Z==="category"&&o.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),o.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("price"),children:o.jsxs("div",{className:"flex items-center",children:["Price",Z==="price"&&o.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),o.jsx("th",{children:"Cost"}),o.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("quantity"),children:o.jsxs("div",{className:"flex items-center",children:["Stock",Z==="quantity"&&o.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:Be.map(De=>{const mt=e.find(sr=>sr.id===De.categoryId),Et=De.quantity<=De.minStockLevel&&De.quantity>0,xt=De.quantity===0;return o.jsxs("tr",{className:`
                    ${xt?"bg-red-50":Et?"bg-orange-50":""}
                    ${he.includes(De.id)?"bg-blue-50":""}
                  `,children:[rn&&o.jsx("td",{children:o.jsx("input",{type:"checkbox",checked:he.includes(De.id),onChange:()=>Yt(De.id),className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),o.jsx("td",{children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 overflow-hidden",children:De.imageUrl?o.jsx("img",{src:De.imageUrl,alt:De.name,className:"w-full h-full object-cover"}):o.jsx(js,{className:"h-5 w-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:De.name}),De.description&&o.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:De.description})]})]})}),o.jsx("td",{children:o.jsx("span",{className:"text-sm font-mono",children:De.sku})}),o.jsx("td",{children:o.jsx("span",{className:"text-sm",children:(mt==null?void 0:mt.name)||"N/A"})}),o.jsx("td",{children:o.jsx("span",{className:"font-medium",children:Qt(De.price)})}),o.jsx("td",{children:o.jsx("span",{className:"text-sm text-gray-500",children:Qt(De.cost)})}),o.jsxs("td",{children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:`font-medium ${xt?"text-red-600":Et?"text-orange-600":"text-gray-900"}`,children:De.quantity}),(Et||xt)&&o.jsx(vo,{className:`h-4 w-4 ml-1 ${xt?"text-red-500":"text-orange-500"}`})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",De.minStockLevel]})]}),o.jsx("td",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${De.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:De.isActive?"Active":"Inactive"})}),o.jsx("td",{children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>wt(De),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Product",children:o.jsx(co,{className:"h-4 w-4"})}),lr&&o.jsx("button",{onClick:()=>dr(De),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Product",children:o.jsx(el,{className:"h-4 w-4"})})]})})]},De.id)})})]}),Be.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(js,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No products found"}),(y||b||Y!=="all"||ie!=="all")&&o.jsx("button",{onClick:()=>{x(""),w(""),ne("all"),ge("all")},className:"mt-2 text-blue-600 hover:text-blue-500 text-sm",children:"Clear filters"})]})]})}),L&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-full overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Management"}),o.jsx("button",{onClick:gn,className:"text-gray-400 hover:text-gray-600",children:o.jsx(ba,{className:"h-6 w-6"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:M?"Edit Category":"Add New Category"}),o.jsxs("form",{onSubmit:qe(at),className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),o.jsx("input",{...Ft("name",{required:"Category name is required",minLength:{value:2,message:"Category name must be at least 2 characters"}}),className:"input",placeholder:"Enter category name"}),Mt.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Mt.name.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("input",{...Ft("description"),className:"input",placeholder:"Enter category description (optional)"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[M&&o.jsx("button",{type:"button",onClick:()=>{T(null),le({name:"",description:""})},className:"btn btn-outline",children:"Cancel Edit"}),o.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:jt,children:[jt?o.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}):null,M?"Update Category":"Add Category"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Existing Categories"}),e.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(cf,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No categories found"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Add your first category above"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(De=>{const mt=r.filter(Et=>Et.categoryId===De.id).length;return o.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h5",{className:"font-medium text-gray-900",children:De.name}),De.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:De.description}),o.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[mt," product",mt!==1?"s":""]})]}),o.jsxs("div",{className:"flex space-x-1 ml-2",children:[o.jsx("button",{onClick:()=>Vt(De),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Category",children:o.jsx(co,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>un(De),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Category",disabled:mt>0,children:o.jsx(el,{className:"h-4 w-4"})})]})]})},De.id)})})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:gn,className:"btn btn-outline",children:"Close"})})})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-full overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:K?"Edit Product":"Add New Product"}),o.jsxs("form",{onSubmit:Fe(ct),className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 hover:bg-gray-100 transition-colors duration-200 group",children:te?o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("img",{src:te,alt:"Product preview",className:"w-full h-full object-cover rounded-lg"}),o.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center",children:[o.jsx("button",{type:"button",onClick:xe,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200 shadow-lg",children:o.jsx(ba,{className:"h-4 w-4"})}),o.jsxs("label",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:[o.jsxs("div",{className:"bg-white bg-opacity-90 rounded-lg px-3 py-2 flex items-center space-x-2 text-gray-700 hover:bg-opacity-100 transition-all duration-200",children:[o.jsx(rl,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Change Image"})]}),o.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]})]})]}):o.jsxs("label",{className:"cursor-pointer w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-gray-600 transition-colors duration-200",children:[o.jsx(uf,{className:"h-12 w-12 mb-3"}),o.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload image"}),o.jsx("p",{className:"text-xs text-gray-400",children:"or drag and drop"}),o.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]})})}),!te&&o.jsxs("label",{className:"btn btn-outline w-full cursor-pointer flex items-center justify-center",children:[o.jsx(rl,{className:"h-4 w-4 mr-2"}),"Upload Image",o.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Maximum file size: 5MB"})]}),o.jsx("input",{...we("imageUrl"),type:"hidden"})]})]}),o.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),o.jsx("input",{...we("name",{required:"Product name is required",minLength:{value:2,message:"Product name must be at least 2 characters"}}),className:"input",placeholder:"Enter product name"}),Ve.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.name.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),o.jsx("input",{...we("sku",{required:"SKU is required",minLength:{value:3,message:"SKU must be at least 3 characters"},maxLength:{value:50,message:"SKU must be no more than 50 characters"},pattern:{value:/^[A-Za-z0-9\-_]+$/,message:"SKU can only contain letters, numbers, hyphens, and underscores"},validate:{unique:De=>Lt(De,K==null?void 0:K.id)?"SKU already exists":!0}}),className:"input",placeholder:"Enter SKU (e.g., PROD-001, SKU123)",maxLength:50}),Ve.sku&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.sku.message}),rt&&!bt(rt)&&o.jsx("p",{className:"mt-1 text-sm text-orange-600",children:"SKU should be 3-50 alphanumeric characters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),o.jsxs("select",{...we("categoryId",{required:"Category is required"}),className:"input",children:[o.jsx("option",{value:"",children:"Select a category"}),e.map(De=>o.jsx("option",{value:De.id,children:De.name},De.id))]}),Ve.categoryId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.categoryId.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),o.jsx("input",{...we("barcode"),className:"input",placeholder:"Enter barcode (optional)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),o.jsx("input",{...we("price",{required:"Price is required",min:{value:.01,message:"Price must be greater than 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),Ve.price&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.price.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost *"}),o.jsx("input",{...we("cost",{required:"Cost is required",min:{value:0,message:"Cost must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),Ve.cost&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.cost.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),o.jsx("input",{...we("wholesalePrice",{min:{value:.01,message:"Wholesale price must be greater than 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00 (optional)"}),Ve.wholesalePrice&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.wholesalePrice.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Min Quantity"}),o.jsx("input",{...we("wholesaleMinQuantity",{min:{value:1,message:"Minimum quantity must be at least 1"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"0 (optional)"}),Ve.wholesaleMinQuantity&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.wholesaleMinQuantity.message}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum quantity to apply wholesale pricing"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),o.jsx("input",{...we("quantity",{required:"Quantity is required",min:{value:0,message:"Quantity must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"0"}),Ve.quantity&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.quantity.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock Level *"}),o.jsx("input",{...we("minStockLevel",{required:"Minimum stock level is required",min:{value:0,message:"Minimum stock level must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"5"}),Ve.minStockLevel&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.minStockLevel.message})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{...we("description"),rows:3,className:"input",placeholder:"Enter product description (optional)"})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{...we("isActive"),type:"checkbox",className:"h-4 w-4 text-blue-600 rounded border-gray-300"}),o.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active (available for sale)"})]})})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:qt,className:"btn btn-outline",disabled:lt||Oe,children:"Cancel"}),o.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:lt||Oe,children:[lt||Oe?o.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}):null,K?"Update Product":"Add Product"]})]})]})]})}),o.jsx(Ed,{isOpen:k,onClose:()=>A(!1),onScan:Or,mode:"inventory",title:"Scan Product for Inventory",placeholder:"Scan product barcode to find or create..."}),o.jsx(om,{isOpen:F,onClose:()=>q(!1)})]})},cm="modulepreload",um=function(r,e){return new URL(r,e).href},Du={},cl=function(e,t,n){if(!t||t.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=um(i,n),i in Du)return;Du[i]=!0;const c=i.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!n)for(let x=a.length-1;x>=0;x--){const b=a[x];if(b.href===i&&(!c||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const y=document.createElement("link");if(y.rel=c?"stylesheet":cm,c||(y.as="script",y.crossOrigin=""),y.href=i,document.head.appendChild(y),c)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i})};var An=Uint8Array,Jn=Uint16Array,Pc=Int32Array,yl=new An([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vl=new An([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lc=new An([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Id=function(r,e){for(var t=new Jn(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var a=new Pc(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)a[i]=i-t[n]<<5|n;return{b:t,r:a}},Od=Id(yl,2),Td=Od.b,cc=Od.r;Td[28]=258,cc[258]=28;var Md=Id(vl,0),dm=Md.b,Eu=Md.r,uc=new Jn(32768);for(var jr=0;jr<32768;++jr){var Ra=(jr&43690)>>1|(jr&21845)<<1;Ra=(Ra&52428)>>2|(Ra&13107)<<2,Ra=(Ra&61680)>>4|(Ra&3855)<<4,uc[jr]=((Ra&65280)>>8|(Ra&255)<<8)>>1}var Wi=function(r,e,t){for(var n=r.length,a=0,i=new Jn(e);a<n;++a)r[a]&&++i[r[a]-1];var c=new Jn(e);for(a=1;a<e;++a)c[a]=c[a-1]+i[a-1]<<1;var u;if(t){u=new Jn(1<<e);var h=15-e;for(a=0;a<n;++a)if(r[a])for(var y=a<<4|r[a],x=e-r[a],b=c[r[a]-1]++<<x,w=b|(1<<x)-1;b<=w;++b)u[uc[b]>>h]=y}else for(u=new Jn(n),a=0;a<n;++a)r[a]&&(u[a]=uc[c[r[a]-1]++]>>15-r[a]);return u},$a=new An(288);for(var jr=0;jr<144;++jr)$a[jr]=8;for(var jr=144;jr<256;++jr)$a[jr]=9;for(var jr=256;jr<280;++jr)$a[jr]=7;for(var jr=280;jr<288;++jr)$a[jr]=8;var No=new An(32);for(var jr=0;jr<32;++jr)No[jr]=5;var hm=Wi($a,9,0),fm=Wi($a,9,1),pm=Wi(No,5,0),mm=Wi(No,5,1),Hl=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},xi=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Wl=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},kc=function(r){return(r+7)/8|0},Rd=function(r,e,t){return(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length),new An(r.subarray(e,t))},gm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ni=function(r,e,t){var n=new Error(e||gm[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Ni),!t)throw n;return n},ym=function(r,e,t,n){var a=r.length,i=n?n.length:0;if(!a||e.f&&!e.l)return t||new An(0);var c=!t,u=c||e.i!=2,h=e.i;c&&(t=new An(a*3));var y=function(et){var Ve=t.length;if(et>Ve){var lt=new An(Math.max(Ve*2,et));lt.set(t),t=lt}},x=e.f||0,b=e.p||0,w=e.b||0,m=e.l,P=e.d,L=e.m,E=e.n,k=a*8;do{if(!m){x=xi(r,b,1);var A=xi(r,b+1,3);if(b+=3,A)if(A==1)m=fm,P=mm,L=9,E=5;else if(A==2){var X=xi(r,b,31)+257,M=xi(r,b+10,15)+4,T=X+xi(r,b+5,31)+1;b+=14;for(var Z=new An(T),oe=new An(19),C=0;C<M;++C)oe[lc[C]]=xi(r,b+C*3,7);b+=M*3;for(var N=Hl(oe),R=(1<<N)-1,V=Wi(oe,N,1),C=0;C<T;){var he=V[xi(r,b,R)];b+=he&15;var F=he>>4;if(F<16)Z[C++]=F;else{var $=0,Y=0;for(F==16?(Y=3+xi(r,b,3),b+=2,$=Z[C-1]):F==17?(Y=3+xi(r,b,7),b+=3):F==18&&(Y=11+xi(r,b,127),b+=7);Y--;)Z[C++]=$}}var ne=Z.subarray(0,X),ie=Z.subarray(X);L=Hl(ne),E=Hl(ie),m=Wi(ne,L,1),P=Wi(ie,E,1)}else Ni(1);else{var F=kc(b)+4,q=r[F-4]|r[F-3]<<8,K=F+q;if(K>a){h&&Ni(0);break}u&&y(w+q),t.set(r.subarray(F,K),w),e.b=w+=q,e.p=b=K*8,e.f=x;continue}if(b>k){h&&Ni(0);break}}u&&y(w+131072);for(var ge=(1<<L)-1,Oe=(1<<E)-1,j=b;;j=b){var $=m[Wl(r,b)&ge],H=$>>4;if(b+=$&15,b>k){h&&Ni(0);break}if($||Ni(2),H<256)t[w++]=H;else if(H==256){j=b,m=null;break}else{var Q=H-254;if(H>264){var C=H-257,te=yl[C];Q=xi(r,b,(1<<te)-1)+Td[C],b+=te}var ae=P[Wl(r,b)&Oe],we=ae>>4;ae||Ni(3),b+=ae&15;var ie=dm[we];if(we>3){var te=vl[we];ie+=Wl(r,b)&(1<<te)-1,b+=te}if(b>k){h&&Ni(0);break}u&&y(w+131072);var Fe=w+Q;if(w<ie){var fe=i-ie,Je=Math.min(ie,Fe);for(fe+w<0&&Ni(3);w<Je;++w)t[w]=n[fe+w]}for(;w<Fe;++w)t[w]=t[w-ie]}}e.l=m,e.p=j,e.b=w,e.f=x,m&&(x=1,e.m=L,e.d=P,e.n=E)}while(!x);return w!=t.length&&c?Rd(t,0,w):t.subarray(0,w)},va=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},so=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Kl=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var a=t.length,i=t.slice();if(!a)return{t:Bd,l:0};if(a==1){var c=new An(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(K,X){return K.f-X.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],y=0,x=1,b=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};x!=a-1;)u=t[t[y].f<t[b].f?y++:b++],h=t[y!=x&&t[y].f<t[b].f?y++:b++],t[x++]={s:-1,f:u.f+h.f,l:u,r:h};for(var w=i[0].s,n=1;n<a;++n)i[n].s>w&&(w=i[n].s);var m=new Jn(w+1),P=dc(t[x-1],m,0);if(P>e){var n=0,L=0,E=P-e,k=1<<E;for(i.sort(function(X,M){return m[M.s]-m[X.s]||X.f-M.f});n<a;++n){var A=i[n].s;if(m[A]>e)L+=k-(1<<P-m[A]),m[A]=e;else break}for(L>>=E;L>0;){var F=i[n].s;m[F]<e?L-=1<<e-m[F]++-1:++n}for(;n>=0&&L;--n){var q=i[n].s;m[q]==e&&(--m[q],++L)}P=e}return{t:new An(m),l:P}},dc=function(r,e,t){return r.s==-1?Math.max(dc(r.l,e,t+1),dc(r.r,e,t+1)):e[r.s]=t},Iu=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Jn(++e),n=0,a=r[0],i=1,c=function(h){t[n++]=h},u=1;u<=e;++u)if(r[u]==a&&u!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=r[u]}return{c:t.subarray(0,n),n:e}},oo=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},qd=function(r,e,t){var n=t.length,a=kc(e+2);r[a]=n&255,r[a+1]=n>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var i=0;i<n;++i)r[a+i+4]=t[i];return(a+4+n)*8},Ou=function(r,e,t,n,a,i,c,u,h,y,x){va(e,x++,t),++a[256];for(var b=Kl(a,15),w=b.t,m=b.l,P=Kl(i,15),L=P.t,E=P.l,k=Iu(w),A=k.c,F=k.n,q=Iu(L),K=q.c,X=q.n,M=new Jn(19),T=0;T<A.length;++T)++M[A[T]&31];for(var T=0;T<K.length;++T)++M[K[T]&31];for(var Z=Kl(M,7),oe=Z.t,C=Z.l,N=19;N>4&&!oe[lc[N-1]];--N);var R=y+5<<3,V=oo(a,$a)+oo(i,No)+c,he=oo(a,w)+oo(i,L)+c+14+3*N+oo(M,oe)+2*M[16]+3*M[17]+7*M[18];if(h>=0&&R<=V&&R<=he)return qd(e,x,r.subarray(h,h+y));var $,Y,ne,ie;if(va(e,x,1+(he<V)),x+=2,he<V){$=Wi(w,m,0),Y=w,ne=Wi(L,E,0),ie=L;var ge=Wi(oe,C,0);va(e,x,F-257),va(e,x+5,X-1),va(e,x+10,N-4),x+=14;for(var T=0;T<N;++T)va(e,x+3*T,oe[lc[T]]);x+=3*N;for(var Oe=[A,K],j=0;j<2;++j)for(var H=Oe[j],T=0;T<H.length;++T){var Q=H[T]&31;va(e,x,ge[Q]),x+=oe[Q],Q>15&&(va(e,x,H[T]>>5&127),x+=H[T]>>12)}}else $=hm,Y=$a,ne=pm,ie=No;for(var T=0;T<u;++T){var te=n[T];if(te>255){var Q=te>>18&31;so(e,x,$[Q+257]),x+=Y[Q+257],Q>7&&(va(e,x,te>>23&31),x+=yl[Q]);var ae=te&31;so(e,x,ne[ae]),x+=ie[ae],ae>3&&(so(e,x,te>>5&8191),x+=vl[ae])}else so(e,x,$[te]),x+=Y[te]}return so(e,x,$[256]),x+Y[256]},vm=new Pc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bd=new An(0),bm=function(r,e,t,n,a,i){var c=i.z||r.length,u=new An(n+c+5*(1+Math.ceil(c/7e3))+a),h=u.subarray(n,u.length-a),y=i.l,x=(i.r||0)&7;if(e){x&&(h[0]=i.r>>3);for(var b=vm[e-1],w=b>>13,m=b&8191,P=(1<<t)-1,L=i.p||new Jn(32768),E=i.h||new Jn(P+1),k=Math.ceil(t/3),A=2*k,F=function(Ft){return(r[Ft]^r[Ft+1]<<k^r[Ft+2]<<A)&P},q=new Pc(25e3),K=new Jn(288),X=new Jn(32),M=0,T=0,Z=i.i||0,oe=0,C=i.w||0,N=0;Z+2<c;++Z){var R=F(Z),V=Z&32767,he=E[R];if(L[V]=he,E[R]=V,C<=Z){var $=c-Z;if((M>7e3||oe>24576)&&($>423||!y)){x=Ou(r,h,0,q,K,X,T,oe,N,Z-N,x),oe=M=T=0,N=Z;for(var Y=0;Y<286;++Y)K[Y]=0;for(var Y=0;Y<30;++Y)X[Y]=0}var ne=2,ie=0,ge=m,Oe=V-he&32767;if($>2&&R==F(Z-Oe))for(var j=Math.min(w,$)-1,H=Math.min(32767,Z),Q=Math.min(258,$);Oe<=H&&--ge&&V!=he;){if(r[Z+ne]==r[Z+ne-Oe]){for(var te=0;te<Q&&r[Z+te]==r[Z+te-Oe];++te);if(te>ne){if(ne=te,ie=Oe,te>j)break;for(var ae=Math.min(Oe,te-2),we=0,Y=0;Y<ae;++Y){var Fe=Z-Oe+Y&32767,fe=L[Fe],Je=Fe-fe&32767;Je>we&&(we=Je,he=Fe)}}}V=he,he=L[V],Oe+=V-he&32767}if(ie){q[oe++]=268435456|cc[ne]<<18|Eu[ie];var et=cc[ne]&31,Ve=Eu[ie]&31;T+=yl[et]+vl[Ve],++K[257+et],++X[Ve],C=Z+ne,++M}else q[oe++]=r[Z],++K[r[Z]]}}for(Z=Math.max(Z,C);Z<c;++Z)q[oe++]=r[Z],++K[r[Z]];x=Ou(r,h,y,q,K,X,T,oe,N,Z-N,x),y||(i.r=x&7|h[x/8|0]<<3,x-=7,i.h=E,i.p=L,i.i=Z,i.w=C)}else{for(var Z=i.w||0;Z<c+y;Z+=65535){var lt=Z+65535;lt>=c&&(h[x/8|0]=y,lt=c),x=qd(h,x+1,r.subarray(Z,lt))}i.i=c}return Rd(u,0,n+kc(x)+a)},Ud=function(){var r=1,e=0;return{p:function(t){for(var n=r,a=e,i=t.length|0,c=0;c!=i;){for(var u=Math.min(c+2655,i);c<u;++c)a+=n+=t[c];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}r=n,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},xm=function(r,e,t,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),c=new An(i.length+r.length);c.set(i),c.set(r,i.length),r=c,a.w=i.length}return bm(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,a)},zd=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},wm=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=Ud();a.p(e.dictionary),zd(r,2,a.d())}},Nm=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Ni(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&Ni(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function hc(r,e){e||(e={});var t=Ud();t.p(r);var n=xm(r,e,e.dictionary?6:2,4);return wm(n,e),zd(n,n.length-4,t.d()),n}function Sm(r,e){return ym(r.subarray(Nm(r,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var jm=typeof TextDecoder<"u"&&new TextDecoder,Am=0;try{jm.decode(Bd,{stream:!0}),Am=1}catch{}var Ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vl(){Ut.console&&typeof Ut.console.log=="function"&&Ut.console.log.apply(Ut.console,arguments)}var yr={log:Vl,warn:function(r){Ut.console&&(typeof Ut.console.warn=="function"?Ut.console.warn.apply(Ut.console,arguments):Vl.call(null,arguments))},error:function(r){Ut.console&&(typeof Ut.console.error=="function"?Ut.console.error.apply(Ut.console,arguments):Vl(r))}};function Gl(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){hs(n.response,e,t)},n.onerror=function(){yr.error("could not download file")},n.send()}function Tu(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Vo(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var fo,fc,hs=Ut.saveAs||((typeof window>"u"?"undefined":br(window))!=="object"||window!==Ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Ut.URL||Ut.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Tu(a.href)?Gl(r,e,t):Vo(a,a.target="_blank"):Vo(a)):(a.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Vo(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Tu(r))Gl(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Vo(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:br(i)!=="object"&&(yr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Gl(r,e,t);var a=r.type==="application/octet-stream",i=/constructor/i.test(Ut.HTMLElement)||Ut.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&(typeof FileReader>"u"?"undefined":br(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var x=u.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=x:location=x,n=null},u.readAsDataURL(r)}else{var h=Ut.URL||Ut.webkitURL,y=h.createObjectURL(r);n?n.location=y:location.href=y,n=null,setTimeout(function(){h.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Hd(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var a=t[n].re,i=t[n].process,c=a.exec(r);c&&(e=i(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),y=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),y.length==1&&(y="0"+y),"#"+u+h+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $l(r,e){var t=r[0],n=r[1],a=r[2],i=r[3];t=xn(t,n,a,i,e[0],7,-680876936),i=xn(i,t,n,a,e[1],12,-389564586),a=xn(a,i,t,n,e[2],17,606105819),n=xn(n,a,i,t,e[3],22,-1044525330),t=xn(t,n,a,i,e[4],7,-176418897),i=xn(i,t,n,a,e[5],12,1200080426),a=xn(a,i,t,n,e[6],17,-1473231341),n=xn(n,a,i,t,e[7],22,-45705983),t=xn(t,n,a,i,e[8],7,1770035416),i=xn(i,t,n,a,e[9],12,-1958414417),a=xn(a,i,t,n,e[10],17,-42063),n=xn(n,a,i,t,e[11],22,-1990404162),t=xn(t,n,a,i,e[12],7,1804603682),i=xn(i,t,n,a,e[13],12,-40341101),a=xn(a,i,t,n,e[14],17,-1502002290),t=wn(t,n=xn(n,a,i,t,e[15],22,1236535329),a,i,e[1],5,-165796510),i=wn(i,t,n,a,e[6],9,-1069501632),a=wn(a,i,t,n,e[11],14,643717713),n=wn(n,a,i,t,e[0],20,-373897302),t=wn(t,n,a,i,e[5],5,-701558691),i=wn(i,t,n,a,e[10],9,38016083),a=wn(a,i,t,n,e[15],14,-660478335),n=wn(n,a,i,t,e[4],20,-405537848),t=wn(t,n,a,i,e[9],5,568446438),i=wn(i,t,n,a,e[14],9,-1019803690),a=wn(a,i,t,n,e[3],14,-187363961),n=wn(n,a,i,t,e[8],20,1163531501),t=wn(t,n,a,i,e[13],5,-1444681467),i=wn(i,t,n,a,e[2],9,-51403784),a=wn(a,i,t,n,e[7],14,1735328473),t=Nn(t,n=wn(n,a,i,t,e[12],20,-1926607734),a,i,e[5],4,-378558),i=Nn(i,t,n,a,e[8],11,-2022574463),a=Nn(a,i,t,n,e[11],16,1839030562),n=Nn(n,a,i,t,e[14],23,-35309556),t=Nn(t,n,a,i,e[1],4,-1530992060),i=Nn(i,t,n,a,e[4],11,1272893353),a=Nn(a,i,t,n,e[7],16,-155497632),n=Nn(n,a,i,t,e[10],23,-1094730640),t=Nn(t,n,a,i,e[13],4,681279174),i=Nn(i,t,n,a,e[0],11,-358537222),a=Nn(a,i,t,n,e[3],16,-722521979),n=Nn(n,a,i,t,e[6],23,76029189),t=Nn(t,n,a,i,e[9],4,-640364487),i=Nn(i,t,n,a,e[12],11,-421815835),a=Nn(a,i,t,n,e[15],16,530742520),t=Sn(t,n=Nn(n,a,i,t,e[2],23,-995338651),a,i,e[0],6,-198630844),i=Sn(i,t,n,a,e[7],10,1126891415),a=Sn(a,i,t,n,e[14],15,-1416354905),n=Sn(n,a,i,t,e[5],21,-57434055),t=Sn(t,n,a,i,e[12],6,1700485571),i=Sn(i,t,n,a,e[3],10,-1894986606),a=Sn(a,i,t,n,e[10],15,-1051523),n=Sn(n,a,i,t,e[1],21,-2054922799),t=Sn(t,n,a,i,e[8],6,1873313359),i=Sn(i,t,n,a,e[15],10,-30611744),a=Sn(a,i,t,n,e[6],15,-1560198380),n=Sn(n,a,i,t,e[13],21,1309151649),t=Sn(t,n,a,i,e[4],6,-145523070),i=Sn(i,t,n,a,e[11],10,-1120210379),a=Sn(a,i,t,n,e[2],15,718787259),n=Sn(n,a,i,t,e[9],21,-343485551),r[0]=Ka(t,r[0]),r[1]=Ka(n,r[1]),r[2]=Ka(a,r[2]),r[3]=Ka(i,r[3])}function bl(r,e,t,n,a,i){return e=Ka(Ka(e,r),Ka(n,i)),Ka(e<<a|e>>>32-a,t)}function xn(r,e,t,n,a,i,c){return bl(e&t|~e&n,r,e,a,i,c)}function wn(r,e,t,n,a,i,c){return bl(e&n|t&~n,r,e,a,i,c)}function Nn(r,e,t,n,a,i,c){return bl(e^t^n,r,e,a,i,c)}function Sn(r,e,t,n,a,i,c){return bl(t^(e|~n),r,e,a,i,c)}function Wd(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)$l(n,_m(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for($l(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,$l(n,a),n}function _m(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}fo=Ut.atob.bind(Ut),fc=Ut.btoa.bind(Ut);var Mu="0123456789abcdef".split("");function Lm(r){for(var e="",t=0;t<4;t++)e+=Mu[r>>8*t+4&15]+Mu[r>>8*t&15];return e}function Pm(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function pc(r){return Wd(r).map(Pm).join("")}var km=function(r){for(var e=0;e<r.length;e++)r[e]=Lm(r[e]);return r.join("")}(Wd("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ka(r,e){if(km){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function mc(r,e){var t,n,a,i;if(r!==t){for(var c=(a=r,i=1+(256/r.length>>0),new Array(i+1).join(a)),u=[],h=0;h<256;h++)u[h]=h;var y=0;for(h=0;h<256;h++){var x=u[h];y=(y+x+c.charCodeAt(h))%256,u[h]=u[y],u[y]=x}t=r,n=u}else u=n;var b=e.length,w=0,m=0,P="";for(h=0;h<b;h++)m=(m+(x=u[w=(w+1)%256]))%256,u[w]=u[m],u[m]=x,c=u[(u[w]+u[m])%256],P+=String.fromCharCode(e.charCodeAt(h)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ru={print:4,modify:8,copy:16,"annot-forms":32};function zs(r,e,t,n){this.v=1,this.r=2;var a=192;r.forEach(function(u){if(Ru.perm!==void 0)throw new Error("Invalid permission: "+u);a+=Ru[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^a)),this.encryptionKey=pc(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=mc(this.encryptionKey,this.padding)}function Hs(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var a=r.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=r[n]}return e}function qu(r){if(br(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,a){if(a=a||!1,typeof t!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!a],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[t]){var c=e[t][i];try{c[0].apply(r,n)}catch(u){Ut.console&&yr.error("jsPDF PubSub Error",u.message,u)}c[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function So(r){if(!(this instanceof So))return new So(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function Kd(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Ha(r,e,t,n,a){if(!(this instanceof Ha))return new Ha(r,e,t,n,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,Kd.call(this,n,a)}function ys(r,e,t,n,a){if(!(this instanceof ys))return new ys(r,e,t,n,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Kd.call(this,n,a)}function Ot(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],c=[],u=1,h=16,y="S",x=null;br(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,a=r.format||a,i=r.compress||r.compressPdf||i,(x=r.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),y=r.defaultPathOperation||"S"),c=r.filters||(i===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,w={},m={internal:{},__private__:{}};m.__private__.PubSub=qu;var P="1.3",L=m.__private__.getPdfVersion=function(){return P};m.__private__.setPdfVersion=function(p){P=p};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return E};var k=m.__private__.getPageFormat=function(p){return E[p]};a=a||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},F=A.COMPAT;function q(){this.saveGraphicsState(),le(new xt(ct,0,0,-ct,0,Gn()*ct).toString()+" cm"),this.setFontSize(this.getFontSize()/ct),y="n",F=A.ADVANCED}function K(){this.restoreGraphicsState(),y="S",F=A.COMPAT}var X=m.__private__.combineFontStyleAndFontWeight=function(p,I){if(p=="bold"&&I=="normal"||p=="bold"&&I==400||p=="normal"&&I=="italic"||p=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(p=I==400||I==="normal"?p==="italic"?"italic":"normal":I!=700&&I!=="bold"||p!=="normal"?(I==700?"bold":I)+""+p:"bold"),p};m.advancedAPI=function(p){var I=F===A.COMPAT;return I&&q.call(this),typeof p!="function"||(p(this),I&&K.call(this)),this},m.compatAPI=function(p){var I=F===A.ADVANCED;return I&&K.call(this),typeof p!="function"||(p(this),I&&q.call(this)),this},m.isAdvancedAPI=function(){return F===A.ADVANCED};var M,T=function(p){if(F!==A.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=m.roundToPrecision=m.__private__.roundToPrecision=function(p,I){var se=e||I;if(isNaN(p)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(se).replace(/0+$/,"")};M=m.hpf=m.__private__.hpf=typeof h=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(p,h)}:h==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(p,16)};var oe=m.f2=m.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return Z(p,2)},C=m.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return Z(p,3)},N=m.scale=m.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return F===A.COMPAT?p*ct:F===A.ADVANCED?p:void 0},R=function(p){return F===A.COMPAT?Gn()-p:F===A.ADVANCED?p:void 0},V=function(p){return N(R(p))};m.__private__.setPrecision=m.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var he,$="00000000000000000000000000000000",Y=m.__private__.getFileId=function(){return $},ne=m.__private__.setFileId=function(p){return $=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Qr=new zs(x.userPermissions,x.userPassword,x.ownerPassword,$)),$};m.setFileId=function(p){return ne(p),this},m.getFileId=function(){return Y()};var ie=m.__private__.convertDateToPDFDate=function(p){var I=p.getTimezoneOffset(),se=I<0?"+":"-",pe=Math.floor(Math.abs(I/60)),Ce=Math.abs(I%60),We=[se,Q(pe),"'",Q(Ce),"'"].join("");return["D:",p.getFullYear(),Q(p.getMonth()+1),Q(p.getDate()),Q(p.getHours()),Q(p.getMinutes()),Q(p.getSeconds()),We].join("")},ge=m.__private__.convertPDFDateToDate=function(p){var I=parseInt(p.substr(2,4),10),se=parseInt(p.substr(6,2),10)-1,pe=parseInt(p.substr(8,2),10),Ce=parseInt(p.substr(10,2),10),We=parseInt(p.substr(12,2),10),tt=parseInt(p.substr(14,2),10);return new Date(I,se,pe,Ce,We,tt,0)},Oe=m.__private__.setCreationDate=function(p){var I;if(p===void 0&&(p=new Date),p instanceof Date)I=ie(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=p}return he=I},j=m.__private__.getCreationDate=function(p){var I=he;return p==="jsDate"&&(I=ge(he)),I};m.setCreationDate=function(p){return Oe(p),this},m.getCreationDate=function(p){return j(p)};var H,Q=m.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},te=m.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},ae=0,we=[],Fe=[],fe=0,Je=[],et=[],Ve=!1,lt=Fe,Ft=function(){ae=0,fe=0,Fe=[],we=[],Je=[],oi=hr(),Wr=hr()};m.__private__.setCustomOutputDestination=function(p){Ve=!0,lt=p};var qe=function(p){Ve||(lt=p)};m.__private__.resetCustomOutputDestination=function(){Ve=!1,lt=Fe};var le=m.__private__.out=function(p){return p=p.toString(),fe+=p.length+1,lt.push(p),lt},Mt=m.__private__.write=function(p){return le(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},jt=m.__private__.getArrayBuffer=function(p){for(var I=p.length,se=new ArrayBuffer(I),pe=new Uint8Array(se);I--;)pe[I]=p.charCodeAt(I);return se},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return rt};var J=r.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(p){return J=F===A.ADVANCED?p/ct:p,this};var de,xe=m.__private__.getFontSize=m.getFontSize=function(){return F===A.COMPAT?J:J*ct},Be=r.R2L||!1;m.__private__.setR2L=m.setR2L=function(p){return Be=p,this},m.__private__.getR2L=m.getR2L=function(){return Be};var Ge,Ue=m.__private__.setZoomMode=function(p){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))de=p;else if(isNaN(p)){if(I.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');de=p}else de=parseInt(p,10)};m.__private__.getZoomMode=function(){return de};var Xe,bt=m.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');Ge=p};m.__private__.getPageMode=function(){return Ge};var Lt=m.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');Xe=p};m.__private__.getLayoutMode=function(){return Xe},m.__private__.setDisplayMode=m.setDisplayMode=function(p,I,se){return Ue(p),Lt(I),bt(se),this};var wt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(p){if(Object.keys(wt).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return wt[p]},m.__private__.getDocumentProperties=function(){return wt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(p){for(var I in wt)wt.hasOwnProperty(I)&&p[I]&&(wt[I]=p[I]);return this},m.__private__.setDocumentProperty=function(p,I){if(Object.keys(wt).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return wt[p]=I};var qt,ct,dr,Wt,Or,Yt={},ut={},zr=[],Vt={},gn={},at={},un={},rn=null,lr=0,Rt=[],tr=new qu(m),Xn=r.hotfixes||[],De={},mt={},Et=[],xt=function p(I,se,pe,Ce,We,tt){if(!(this instanceof p))return new p(I,se,pe,Ce,We,tt);isNaN(I)&&(I=1),isNaN(se)&&(se=0),isNaN(pe)&&(pe=0),isNaN(Ce)&&(Ce=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[I,se,pe,Ce,We,tt]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(p)},xt.prototype.multiply=function(p){var I=p.sx*this.sx+p.shy*this.shx,se=p.sx*this.shy+p.shy*this.sy,pe=p.shx*this.sx+p.sy*this.shx,Ce=p.shx*this.shy+p.sy*this.sy,We=p.tx*this.sx+p.ty*this.shx+this.tx,tt=p.tx*this.shy+p.ty*this.sy+this.ty;return new xt(I,se,pe,Ce,We,tt)},xt.prototype.decompose=function(){var p=this.sx,I=this.shy,se=this.shx,pe=this.sy,Ce=this.tx,We=this.ty,tt=Math.sqrt(p*p+I*I),vt=(p/=tt)*se+(I/=tt)*pe;se-=p*vt,pe-=I*vt;var kt=Math.sqrt(se*se+pe*pe);return vt/=kt,p*(pe/=kt)<I*(se/=kt)&&(p=-p,I=-I,vt=-vt,tt=-tt),{scale:new xt(tt,0,0,kt,0,0),translate:new xt(1,0,0,1,Ce,We),rotate:new xt(p,I,-I,p,0,0),skew:new xt(1,0,vt,1,0,0)}},xt.prototype.toString=function(p){return this.join(" ")},xt.prototype.inversed=function(){var p=this.sx,I=this.shy,se=this.shx,pe=this.sy,Ce=this.tx,We=this.ty,tt=1/(p*pe-I*se),vt=pe*tt,kt=-I*tt,Kt=-se*tt,zt=p*tt;return new xt(vt,kt,Kt,zt,-vt*Ce-Kt*We,-kt*Ce-zt*We)},xt.prototype.applyToPoint=function(p){var I=p.x*this.sx+p.y*this.shx+this.tx,se=p.x*this.shy+p.y*this.sy+this.ty;return new Oi(I,se)},xt.prototype.applyToRectangle=function(p){var I=this.applyToPoint(p),se=this.applyToPoint(new Oi(p.x+p.w,p.y+p.h));return new Cr(I.x,I.y,se.x-I.x,se.y-I.y)},xt.prototype.clone=function(){var p=this.sx,I=this.shy,se=this.shx,pe=this.sy,Ce=this.tx,We=this.ty;return new xt(p,I,se,pe,Ce,We)},m.Matrix=xt;var sr=m.matrixMult=function(p,I){return I.multiply(p)},Ht=new xt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ht;var Bt=function(p,I){if(!gn[p]){var se=(I instanceof Ha?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);I.id=se,gn[p]=se,Vt[se]=I,tr.publish("addPattern",I)}};m.ShadingPattern=Ha,m.TilingPattern=ys,m.addShadingPattern=function(p,I){return T("addShadingPattern()"),Bt(p,I),this},m.beginTilingPattern=function(p){T("beginTilingPattern()"),Ti(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},m.endTilingPattern=function(p,I){T("endTilingPattern()"),I.stream=et[H].join(`
`),Bt(p,I),tr.publish("endTilingPattern",I),Et.pop().restore()};var mr=m.__private__.newObject=function(){var p=hr();return Hr(p,!0),p},hr=m.__private__.newObjectDeferred=function(){return ae++,we[ae]=function(){return fe},ae},Hr=function(p,I){return I=typeof I=="boolean"&&I,we[p]=fe,I&&le(p+" 0 obj"),p},si=m.__private__.newAdditionalObject=function(){var p={objId:hr(),content:""};return Je.push(p),p},oi=hr(),Wr=hr(),nn=m.__private__.decodeColorString=function(p){var I=p.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var se=parseFloat(I[0]);I=[se,se,se,"r"]}for(var pe="#",Ce=0;Ce<3;Ce++)pe+=("0"+Math.floor(255*parseFloat(I[Ce])).toString(16)).slice(-2);return pe},Kr=m.__private__.encodeColorString=function(p){var I;typeof p=="string"&&(p={ch1:p});var se=p.ch1,pe=p.ch2,Ce=p.ch3,We=p.ch4,tt=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var vt=new Hd(se);if(vt.ok)se=vt.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var kt=parseInt(se.substr(1),16);se=kt>>16&255,pe=kt>>8&255,Ce=255&kt}if(pe===void 0||We===void 0&&se===pe&&pe===Ce)if(typeof se=="string")I=se+" "+tt[0];else switch(p.precision){case 2:I=oe(se/255)+" "+tt[0];break;case 3:default:I=C(se/255)+" "+tt[0]}else if(We===void 0||br(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return I=["1.","1.","1.",tt[1]].join(" ");if(typeof se=="string")I=[se,pe,Ce,tt[1]].join(" ");else switch(p.precision){case 2:I=[oe(se/255),oe(pe/255),oe(Ce/255),tt[1]].join(" ");break;default:case 3:I=[C(se/255),C(pe/255),C(Ce/255),tt[1]].join(" ")}}else if(typeof se=="string")I=[se,pe,Ce,We,tt[2]].join(" ");else switch(p.precision){case 2:I=[oe(se),oe(pe),oe(Ce),oe(We),tt[2]].join(" ");break;case 3:default:I=[C(se),C(pe),C(Ce),C(We),tt[2]].join(" ")}return I},_n=m.__private__.getFilters=function(){return c},Fn=m.__private__.putStream=function(p){var I=(p=p||{}).data||"",se=p.filters||_n(),pe=p.alreadyAppliedFilters||[],Ce=p.addLength1||!1,We=I.length,tt=p.objectId,vt=function(Jr){return Jr};if(x!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(vt=Qr.encryptor(tt,0));var kt={};se===!0&&(se=["FlateEncode"]);var Kt=p.additionalKeyValues||[],zt=(kt=Ot.API.processDataByFilters!==void 0?Ot.API.processDataByFilters(I,se):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(kt.data.length!==0&&(Kt.push({key:"Length",value:kt.data.length}),Ce===!0&&Kt.push({key:"Length1",value:We})),zt.length!=0)if(zt.split("/").length-1==1)Kt.push({key:"Filter",value:zt});else{Kt.push({key:"Filter",value:"["+zt+"]"});for(var er=0;er<Kt.length;er+=1)if(Kt[er].key==="DecodeParms"){for(var xr=[],wr=0;wr<kt.reverseChain.split("/").length-1;wr+=1)xr.push("null");xr.push(Kt[er].value),Kt[er].value="["+xr.join(" ")+"]"}}le("<<");for(var Fr=0;Fr<Kt.length;Fr++)le("/"+Kt[Fr].key+" "+Kt[Fr].value);le(">>"),kt.data.length!==0&&(le("stream"),le(vt(kt.data)),le("endstream"))},Yr=m.__private__.putPage=function(p){var I=p.number,se=p.data,pe=p.objId,Ce=p.contentsObjId;Hr(pe,!0),le("<</Type /Page"),le("/Parent "+p.rootDictionaryObjId+" 0 R"),le("/Resources "+p.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(M(p.mediaBox.bottomLeftX))+" "+parseFloat(M(p.mediaBox.bottomLeftY))+" "+M(p.mediaBox.topRightX)+" "+M(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&le("/CropBox ["+M(p.cropBox.bottomLeftX)+" "+M(p.cropBox.bottomLeftY)+" "+M(p.cropBox.topRightX)+" "+M(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&le("/BleedBox ["+M(p.bleedBox.bottomLeftX)+" "+M(p.bleedBox.bottomLeftY)+" "+M(p.bleedBox.topRightX)+" "+M(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&le("/TrimBox ["+M(p.trimBox.bottomLeftX)+" "+M(p.trimBox.bottomLeftY)+" "+M(p.trimBox.topRightX)+" "+M(p.trimBox.topRightY)+"]"),p.artBox!==null&&le("/ArtBox ["+M(p.artBox.bottomLeftX)+" "+M(p.artBox.bottomLeftY)+" "+M(p.artBox.topRightX)+" "+M(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&le("/UserUnit "+p.userUnit),tr.publish("putPage",{objId:pe,pageContext:Rt[I],pageNumber:I,page:se}),le("/Contents "+Ce+" 0 R"),le(">>"),le("endobj");var We=se.join(`
`);return F===A.ADVANCED&&(We+=`
Q`),Hr(Ce,!0),Fn({data:We,filters:_n(),objectId:Ce}),le("endobj"),pe},Pi=m.__private__.putPages=function(){var p,I,se=[];for(p=1;p<=lr;p++)Rt[p].objId=hr(),Rt[p].contentsObjId=hr();for(p=1;p<=lr;p++)se.push(Yr({number:p,data:et[p],objId:Rt[p].objId,contentsObjId:Rt[p].contentsObjId,mediaBox:Rt[p].mediaBox,cropBox:Rt[p].cropBox,bleedBox:Rt[p].bleedBox,trimBox:Rt[p].trimBox,artBox:Rt[p].artBox,userUnit:Rt[p].userUnit,rootDictionaryObjId:oi,resourceDictionaryObjId:Wr}));Hr(oi,!0),le("<</Type /Pages");var pe="/Kids [";for(I=0;I<lr;I++)pe+=se[I]+" 0 R ";le(pe+"]"),le("/Count "+lr),le(">>"),le("endobj"),tr.publish("postPutPages")},Dn=function(p){tr.publish("putFont",{font:p,out:le,newObject:mr,putStream:Fn}),p.isAlreadyPutted!==!0&&(p.objectNumber=mr(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Hs(p.postScriptName)),le("/Subtype /Type1"),typeof p.encoding=="string"&&le("/Encoding /"+p.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Vi=function(){for(var p in Yt)Yt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&Dn(Yt[p])},ki=function(p){p.objectNumber=mr();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[M(p.x),M(p.y),M(p.x+p.width),M(p.y+p.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var se=p.pages[1].join(`
`);Fn({data:se,additionalKeyValues:I,objectId:p.objectNumber}),le("endobj")},fr=function(){for(var p in De)De.hasOwnProperty(p)&&ki(De[p])},Zn=function(p,I){var se,pe=[],Ce=1/(I-1);for(se=0;se<1;se+=Ce)pe.push(se);if(pe.push(1),p[0].offset!=0){var We={offset:0,color:p[0].color};p.unshift(We)}if(p[p.length-1].offset!=1){var tt={offset:1,color:p[p.length-1].color};p.push(tt)}for(var vt="",kt=0,Kt=0;Kt<pe.length;Kt++){for(se=pe[Kt];se>p[kt+1].offset;)kt++;var zt=p[kt].offset,er=(se-zt)/(p[kt+1].offset-zt),xr=p[kt].color,wr=p[kt+1].color;vt+=te(Math.round((1-er)*xr[0]+er*wr[0]).toString(16))+te(Math.round((1-er)*xr[1]+er*wr[1]).toString(16))+te(Math.round((1-er)*xr[2]+er*wr[2]).toString(16))}return vt.trim()},Un=function(p,I){I||(I=21);var se=mr(),pe=Zn(p.colors,I),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+I+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fn({data:pe,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),le("endobj"),p.objectNumber=mr(),le("<< /ShadingType "+p.type),le("/ColorSpace /DeviceRGB");var We="/Coords ["+M(parseFloat(p.coords[0]))+" "+M(parseFloat(p.coords[1]))+" ";p.type===2?We+=M(parseFloat(p.coords[2]))+" "+M(parseFloat(p.coords[3])):We+=M(parseFloat(p.coords[2]))+" "+M(parseFloat(p.coords[3]))+" "+M(parseFloat(p.coords[4]))+" "+M(parseFloat(p.coords[5])),le(We+="]"),p.matrix&&le("/Matrix ["+p.matrix.toString()+"]"),le("/Function "+se+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},_s=function(p,I){var se=hr(),pe=mr();I.push({resourcesOid:se,objectOid:pe}),p.objectNumber=pe;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+p.boundingBox.map(M).join(" ")+"]"}),Ce.push({key:"XStep",value:M(p.xStep)}),Ce.push({key:"YStep",value:M(p.yStep)}),Ce.push({key:"Resources",value:se+" 0 R"}),p.matrix&&Ce.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),Fn({data:p.stream,additionalKeyValues:Ce,objectId:p.objectNumber}),le("endobj")},zn=function(p){var I;for(I in Vt)Vt.hasOwnProperty(I)&&(Vt[I]instanceof Ha?Un(Vt[I]):Vt[I]instanceof ys&&_s(Vt[I],p))},Gi=function(p){for(var I in p.objectNumber=mr(),le("<<"),p)switch(I){case"opacity":le("/ca "+oe(p[I]));break;case"stroke-opacity":le("/CA "+oe(p[I]))}le(">>"),le("endobj")},Qa=function(){var p;for(p in at)at.hasOwnProperty(p)&&Gi(at[p])},$i=function(){for(var p in le("/XObject <<"),De)De.hasOwnProperty(p)&&De[p].objectNumber>=0&&le("/"+p+" "+De[p].objectNumber+" 0 R");tr.publish("putXobjectDict"),le(">>")},li=function(){Qr.oid=mr(),le("<<"),le("/Filter /Standard"),le("/V "+Qr.v),le("/R "+Qr.r),le("/U <"+Qr.toHexString(Qr.U)+">"),le("/O <"+Qr.toHexString(Qr.O)+">"),le("/P "+Qr.P),le(">>"),le("endobj")},Ja=function(){for(var p in le("/Font <<"),Yt)Yt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&le("/"+p+" "+Yt[p].objectNumber+" 0 R");le(">>")},xa=function(){if(Object.keys(Vt).length>0){for(var p in le("/Shading <<"),Vt)Vt.hasOwnProperty(p)&&Vt[p]instanceof Ha&&Vt[p].objectNumber>=0&&le("/"+p+" "+Vt[p].objectNumber+" 0 R");tr.publish("putShadingPatternDict"),le(">>")}},Yi=function(p){if(Object.keys(Vt).length>0){for(var I in le("/Pattern <<"),Vt)Vt.hasOwnProperty(I)&&Vt[I]instanceof m.TilingPattern&&Vt[I].objectNumber>=0&&Vt[I].objectNumber<p&&le("/"+I+" "+Vt[I].objectNumber+" 0 R");tr.publish("putTilingPatternDict"),le(">>")}},Jt=function(){if(Object.keys(at).length>0){var p;for(p in le("/ExtGState <<"),at)at.hasOwnProperty(p)&&at[p].objectNumber>=0&&le("/"+p+" "+at[p].objectNumber+" 0 R");tr.publish("putGStateDict"),le(">>")}},Ar=function(p){Hr(p.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ja(),xa(),Yi(p.objectOid),Jt(),$i(),le(">>"),le("endobj")},Xa=function(){var p=[];Vi(),Qa(),fr(),zn(p),tr.publish("putResources"),p.forEach(Ar),Ar({resourcesOid:Wr,objectOid:Number.MAX_SAFE_INTEGER}),tr.publish("postPutResources")},Za=function(){tr.publish("putAdditionalObjects");for(var p=0;p<Je.length;p++){var I=Je[p];Hr(I.objId,!0),le(I.content),le("endobj")}tr.publish("postPutAdditionalObjects")},or=function(p){ut[p.fontName]=ut[p.fontName]||{},ut[p.fontName][p.fontStyle]=p.id},ci=function(p,I,se,pe,Ce){var We={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:p,fontName:I,fontStyle:se,encoding:pe,isStandardFont:Ce||!1,metadata:{}};return tr.publish("addFont",{font:We,instance:this}),Yt[We.id]=We,or(We),We.id},Qi=function(p){for(var I=0,se=rt.length;I<se;I++){var pe=ci.call(this,p[I][0],p[I][1],p[I][2],rt[I][3],!0);b===!1&&(w[pe]=!0);var Ce=p[I][0].split("-");or({id:pe,fontName:Ce[0],fontStyle:Ce[1]||""})}tr.publish("addFonts",{fonts:Yt,dictionary:ut})},an=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(pe){var I=pe.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var se="Error in function "+I.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Ut.console)throw new Error(se);Ut.console.error(se,pe),Ut.alert&&alert(se)}},p.foo.bar=p,p.foo},Ci=function(p,I){var se,pe,Ce,We,tt,vt,kt,Kt,zt;if(Ce=(I=I||{}).sourceEncoding||"Unicode",tt=I.outputEncoding,(I.autoencode||tt)&&Yt[qt].metadata&&Yt[qt].metadata[Ce]&&Yt[qt].metadata[Ce].encoding&&(We=Yt[qt].metadata[Ce].encoding,!tt&&Yt[qt].encoding&&(tt=Yt[qt].encoding),!tt&&We.codePages&&(tt=We.codePages[0]),typeof tt=="string"&&(tt=We[tt]),tt)){for(kt=!1,vt=[],se=0,pe=p.length;se<pe;se++)(Kt=tt[p.charCodeAt(se)])?vt.push(String.fromCharCode(Kt)):vt.push(p[se]),vt[se].charCodeAt(0)>>8&&(kt=!0);p=vt.join("")}for(se=p.length;kt===void 0&&se!==0;)p.charCodeAt(se-1)>>8&&(kt=!0),se--;if(!kt)return p;for(vt=I.noBOM?[]:[254,255],se=0,pe=p.length;se<pe;se++){if((zt=(Kt=p.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vt.push(zt),vt.push(Kt-(zt<<8))}return String.fromCharCode.apply(void 0,vt)},sn=m.__private__.pdfEscape=m.pdfEscape=function(p,I){return Ci(p,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fi=m.__private__.beginPage=function(p){et[++lr]=[],Rt[lr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},ts(lr),qe(et[H])},es=function(p,I){var se,pe,Ce;switch(t=I||t,typeof p=="string"&&(se=k(p.toLowerCase()),Array.isArray(se)&&(pe=se[0],Ce=se[1])),Array.isArray(p)&&(pe=p[0]*ct,Ce=p[1]*ct),isNaN(pe)&&(pe=a[0],Ce=a[1]),(pe>14400||Ce>14400)&&(yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Ce=Math.min(14400,Ce)),a=[pe,Ce],t.substr(0,1)){case"l":Ce>pe&&(a=[Ce,pe]);break;case"p":pe>Ce&&(a=[Ce,pe])}Fi(a),aa(as),le(yn),sa!==0&&le(sa+" J"),oa!==0&&le(oa+" j"),tr.publish("addPage",{pageNumber:lr})},wa=function(p){p>0&&p<=lr&&(et.splice(p,1),Rt.splice(p,1),lr--,H>lr&&(H=lr),this.setPage(H))},ts=function(p){p>0&&p<=lr&&(H=p)},Ji=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return et.length-1},rs=function(p,I,se){var pe,Ce=void 0;return se=se||{},p=p!==void 0?p:Yt[qt].fontName,I=I!==void 0?I:Yt[qt].fontStyle,pe=p.toLowerCase(),ut[pe]!==void 0&&ut[pe][I]!==void 0?Ce=ut[pe][I]:ut[p]!==void 0&&ut[p][I]!==void 0?Ce=ut[p][I]:se.disableWarning===!1&&yr.warn("Unable to look up font label for font '"+p+"', '"+I+"'. Refer to getFontList() for available fonts."),Ce||se.noFallback||(Ce=ut.times[I])==null&&(Ce=ut.times.normal),Ce},Ys=m.__private__.putInfo=function(){var p=mr(),I=function(pe){return pe};for(var se in x!==null&&(I=Qr.encryptor(p,0)),le("<<"),le("/Producer ("+sn(I("jsPDF "+Ot.version))+")"),wt)wt.hasOwnProperty(se)&&wt[se]&&le("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+sn(I(wt[se]))+")");le("/CreationDate ("+sn(I(he))+")"),le(">>"),le("endobj")},Zt=m.__private__.putCatalog=function(p){var I=(p=p||{}).rootDictionaryObjId||oi;switch(mr(),le("<<"),le("/Type /Catalog"),le("/Pages "+I+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+de;se.substr(se.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&le("/OpenAction [3 0 R /XYZ null null "+oe(de)+"]")}switch(Xe||(Xe="continuous"),Xe){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}Ge&&le("/PageMode /"+Ge),tr.publish("putCatalog"),le(">>"),le("endobj")},ns=m.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(ae+1)),le("/Root "+ae+" 0 R"),le("/Info "+(ae-1)+" 0 R"),x!==null&&le("/Encrypt "+Qr.oid+" 0 R"),le("/ID [ <"+$+"> <"+$+"> ]"),le(">>")},Qs=m.__private__.putHeader=function(){le("%PDF-"+P),le("%")},Js=m.__private__.putXRef=function(){var p="0000000000";le("xref"),le("0 "+(ae+1)),le("0000000000 65535 f ");for(var I=1;I<=ae;I++)typeof we[I]=="function"?le((p+we[I]()).slice(-10)+" 00000 n "):we[I]!==void 0?le((p+we[I]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Lr=m.__private__.buildDocument=function(){Ft(),qe(Fe),tr.publish("buildDocument"),Qs(),Pi(),Za(),Xa(),x!==null&&li(),Ys(),Zt();var p=fe;return Js(),ns(),le("startxref"),le(""+p),le("%%EOF"),qe(et[H]),Fe.join(`
`)},Hn=m.__private__.getBlob=function(p){return new Blob([jt(p)],{type:"application/pdf"})},ui=m.output=m.__private__.output=an(function(p,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",p){case void 0:return Lr();case"save":m.save(I.filename);break;case"arraybuffer":return jt(Lr());case"blob":return Hn(Lr());case"bloburi":case"bloburl":if(Ut.URL!==void 0&&typeof Ut.URL.createObjectURL=="function")return Ut.URL&&Ut.URL.createObjectURL(Hn(Lr()))||void 0;yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",pe=Lr();try{se=fc(pe)}catch{se=fc(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+I.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Ce=I.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",vt=Ut.open();return vt!==null&&vt.document.write(tt),vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Kt=Ut.open();if(Kt!==null){Kt.document.write(kt);var zt=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=I.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zt.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',xr=Ut.open();if(xr!==null&&(xr.document.write(er),xr.document.title=I.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return Ut.document.location.href=this.output("datauristring",I);default:return null}}),Wn=function(p){return Array.isArray(Xn)===!0&&Xn.indexOf(p)>-1};switch(n){case"pt":ct=1;break;case"mm":ct=72/25.4;break;case"cm":ct=72/2.54;break;case"in":ct=72;break;case"px":ct=Wn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ct=12;break;case"ex":ct=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ct=n}var Qr=null;Oe(),ne();var Ls=function(p){return x!==null?Qr.encryptor(p,0):function(I){return I}},Pr=m.__private__.getPageInfo=m.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[p].objId,pageNumber:p,pageContext:Rt[p]}},Dt=m.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Rt)if(Rt[I].objId===p)break;return Pr(I)},Xi=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rt[H].objId,pageNumber:H,pageContext:Rt[H]}};m.addPage=function(){return es.apply(this,arguments),this},m.setPage=function(){return ts.apply(this,arguments),qe.call(this,et[H]),this},m.insertPage=function(p){return this.addPage(),this.movePage(H,p),this},m.movePage=function(p,I){var se,pe;if(p>I){se=et[p],pe=Rt[p];for(var Ce=p;Ce>I;Ce--)et[Ce]=et[Ce-1],Rt[Ce]=Rt[Ce-1];et[I]=se,Rt[I]=pe,this.setPage(I)}else if(p<I){se=et[p],pe=Rt[p];for(var We=p;We<I;We++)et[We]=et[We+1],Rt[We]=Rt[We+1];et[I]=se,Rt[I]=pe,this.setPage(I)}return this},m.deletePage=function(){return wa.apply(this,arguments),this},m.__private__.text=m.text=function(p,I,se,pe,Ce){var We,tt,vt,kt,Kt,zt,er,xr,wr,Fr=(pe=pe||{}).scope||this;if(typeof p=="number"&&typeof I=="number"&&(typeof se=="string"||Array.isArray(se))){var Jr=se;se=I,I=p,p=Jr}if(arguments[3]instanceof xt?(T("The transform parameter of text() with a Matrix value"),wr=Ce):(vt=arguments[4],kt=arguments[5],br(er=arguments[3])==="object"&&er!==null||(typeof vt=="string"&&(kt=vt,vt=null),typeof er=="string"&&(kt=er,er=null),typeof er=="number"&&(vt=er,er=null),pe={flags:er,angle:vt,align:kt})),isNaN(I)||isNaN(se)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Fr;var Tr="",$n=!1,vn=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:ia,In=Fr.internal.scaleFactor;function os(St){return St=St.split("	").join(Array(pe.TabLen||9).join(" ")),sn(St,er)}function La(St){for(var At,Ct=St.concat(),nr=[],It=Ct.length;It--;)typeof(At=Ct.shift())=="string"?nr.push(At):Array.isArray(St)&&(At.length===1||At[1]===void 0&&At[2]===void 0)?nr.push(At[0]):nr.push([At[0],At[1],At[2]]);return nr}function ls(St,At){var Ct;if(typeof St=="string")Ct=At(St)[0];else if(Array.isArray(St)){for(var nr,It,Dr=St.concat(),kr=[],ha=Dr.length;ha--;)typeof(nr=Dr.shift())=="string"?kr.push(At(nr)[0]):Array.isArray(nr)&&typeof nr[0]=="string"&&(It=At(nr[0],nr[1],nr[2]),kr.push([It[0],It[1],It[2]]));Ct=kr}return Ct}var Pa=!1,cs=!0;if(typeof p=="string")Pa=!0;else if(Array.isArray(p)){var Ri=p.concat();tt=[];for(var bn,Xt=Ri.length;Xt--;)(typeof(bn=Ri.shift())!="string"||Array.isArray(bn)&&typeof bn[0]!="string")&&(cs=!1);Pa=cs}if(Pa===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var mi=J/Fr.internal.scaleFactor,Xr=mi*(vn-1);switch(pe.baseline){case"bottom":se-=Xr;break;case"top":se+=mi-Xr;break;case"hanging":se+=mi-2*Xr;break;case"middle":se+=mi/2-Xr}if((zt=pe.maxWidth||0)>0&&(typeof p=="string"?p=Fr.splitTextToSize(p,zt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(St,At){return St.concat(Fr.splitTextToSize(At,zt))},[]))),We={text:p,x:I,y:se,options:pe,mutex:{pdfEscape:sn,activeFontKey:qt,fonts:Yt,activeFontSize:J}},tr.publish("preProcessText",We),p=We.text,vt=(pe=We.options).angle,!(wr instanceof xt)&&vt&&typeof vt=="number"){vt*=Math.PI/180,pe.rotationDirection===0&&(vt=-vt),F===A.ADVANCED&&(vt=-vt);var ka=Math.cos(vt),ca=Math.sin(vt);wr=new xt(ka,ca,-ca,ka,0,0)}else vt&&vt instanceof xt&&(wr=vt);F!==A.ADVANCED||wr||(wr=Ht),(Kt=pe.charSpace||Sa)!==void 0&&(Tr+=M(N(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=pe.horizontalScale)!==void 0&&(Tr+=M(100*xr)+` Tz
`),pe.lang;var hn=-1,gi=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,ua=Fr.internal.getCurrentPageInfo().pageContext;switch(gi){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var yi=ua.usedRenderingMode!==void 0?ua.usedRenderingMode:-1;hn!==-1?Tr+=hn+` Tr
`:yi!==-1&&(Tr+=`0 Tr
`),hn!==-1&&(ua.usedRenderingMode=hn),kt=pe.align||"left";var Mr,da=J*vn,l=Fr.internal.pageSize.getWidth(),f=Yt[qt];Kt=pe.charSpace||Sa,zt=pe.maxWidth||0,er=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var v=[],_=function(St){return Fr.getStringUnitWidth(St,{font:f,charSpace:Kt,fontSize:J,doKerning:!1})*J/In};if(Object.prototype.toString.call(p)==="[object Array]"){var D;tt=La(p),kt!=="left"&&(Mr=tt.map(_));var U,ee=0;if(kt==="right"){I-=Mr[0],p=[],Xt=tt.length;for(var ce=0;ce<Xt;ce++)ce===0?(U=ei(I),D=Vn(se)):(U=N(ee-Mr[ce]),D=-da),p.push([tt[ce],U,D]),ee=Mr[ce]}else if(kt==="center"){I-=Mr[0]/2,p=[],Xt=tt.length;for(var ye=0;ye<Xt;ye++)ye===0?(U=ei(I),D=Vn(se)):(U=N((ee-Mr[ye])/2),D=-da),p.push([tt[ye],U,D]),ee=Mr[ye]}else if(kt==="left"){p=[],Xt=tt.length;for(var Ne=0;Ne<Xt;Ne++)p.push(tt[Ne])}else if(kt==="justify"&&f.encoding==="Identity-H"){p=[],Xt=tt.length,zt=zt!==0?zt:l;for(var _e=0,ue=0;ue<Xt;ue++)if(D=ue===0?Vn(se):-da,U=ue===0?ei(I):_e,ue<Xt-1){var ke=N((zt-Mr[ue])/(tt[ue].split(" ").length-1)),me=tt[ue].split(" ");p.push([me[0]+" ",U,D]),_e=0;for(var Se=1;Se<me.length;Se++){var Pe=(_(me[Se-1]+" "+me[Se])-_(me[Se]))*In+ke;Se==me.length-1?p.push([me[Se],Pe,0]):p.push([me[Se]+" ",Pe,0]),_e-=Pe}}else p.push([tt[ue],U,D]);p.push(["",_e,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Xt=tt.length,zt=zt!==0?zt:l,ue=0;ue<Xt;ue++)D=ue===0?Vn(se):-da,U=ue===0?ei(I):0,ue<Xt-1?v.push(M(N((zt-Mr[ue])/(tt[ue].split(" ").length-1)))):v.push(0),p.push([tt[ue],U,D])}}var je=typeof pe.R2L=="boolean"?pe.R2L:Be;je===!0&&(p=ls(p,function(St,At,Ct){return[St.split("").reverse().join(""),At,Ct]})),We={text:p,x:I,y:se,options:pe,mutex:{pdfEscape:sn,activeFontKey:qt,fonts:Yt,activeFontSize:J}},tr.publish("postProcessText",We),p=We.text,$n=We.mutex.isHex||!1;var Te=Yt[qt].encoding;Te!=="WinAnsiEncoding"&&Te!=="StandardEncoding"||(p=ls(p,function(St,At,Ct){return[os(St),At,Ct]})),tt=La(p),p=[];for(var Me,Re,Ke,nt=0,dt=1,it=Array.isArray(tt[0])?dt:nt,st="",ht=function(St,At,Ct){var nr="";return Ct instanceof xt?(Ct=typeof pe.angle=="number"?sr(Ct,new xt(1,0,0,1,St,At)):sr(new xt(1,0,0,1,St,At),Ct),F===A.ADVANCED&&(Ct=sr(new xt(1,0,0,-1,0,0),Ct)),nr=Ct.join(" ")+` Tm
`):nr=M(St)+" "+M(At)+` Td
`,nr},ot=0;ot<tt.length;ot++){switch(st="",it){case dt:Ke=($n?"<":"(")+tt[ot][0]+($n?">":")"),Me=parseFloat(tt[ot][1]),Re=parseFloat(tt[ot][2]);break;case nt:Ke=($n?"<":"(")+tt[ot]+($n?">":")"),Me=ei(I),Re=Vn(se)}v!==void 0&&v[ot]!==void 0&&(st=v[ot]+` Tw
`),ot===0?p.push(st+ht(Me,Re,wr)+Ke):it===nt?p.push(st+Ke):it===dt&&p.push(st+ht(Me,Re,wr)+Ke)}p=it===nt?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var ft=`BT
/`;return ft+=qt+" "+J+` Tf
`,ft+=M(J*vn)+` TL
`,ft+=ti+`
`,ft+=Tr,ft+=p,le(ft+="ET"),w[qt]=!0,Fr};var Zi=m.__private__.clip=m.clip=function(p){return le(p==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Zi("evenodd")},m.__private__.discardPath=m.discardPath=function(){return le("n"),this};var En=m.__private__.isValidStyle=function(p){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(I=!0),I};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(p){return En(p)&&(y=p),this};var Kn=m.__private__.getStyle=m.getStyle=function(p){var I=y;switch(p){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=p}return I},Ps=m.close=function(){return le("h"),this};m.stroke=function(){return le("S"),this},m.fill=function(p){return dn("f",p),this},m.fillEvenOdd=function(p){return dn("f*",p),this},m.fillStroke=function(p){return dn("B",p),this},m.fillStrokeEvenOdd=function(p){return dn("B*",p),this};var dn=function(p,I){br(I)==="object"?is(I,p):le(p)},ea=function(p){p===null||F===A.ADVANCED&&p===void 0||(p=Kn(p),le(p))};function ks(p,I,se,pe,Ce){var We=new ys(I||this.boundingBox,se||this.xStep,pe||this.yStep,this.gState,Ce||this.matrix);We.stream=this.stream;var tt=p+"$$"+this.cloneIndex+++"$$";return Bt(tt,We),We}var is=function(p,I){var se=gn[p.key],pe=Vt[se];if(pe instanceof Ha)le("q"),le(ta(I)),pe.gState&&m.setGState(pe.gState),le(p.matrix.toString()+" cm"),le("/"+se+" sh"),le("Q");else if(pe instanceof ys){var Ce=new xt(1,0,0,-1,0,Gn());p.matrix&&(Ce=Ce.multiply(p.matrix||Ht),se=ks.call(pe,p.key,p.boundingBox,p.xStep,p.yStep,Ce).id),le("q"),le("/Pattern cs"),le("/"+se+" scn"),pe.gState&&m.setGState(pe.gState),le(I),le("Q")}},ta=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ra=m.moveTo=function(p,I){return le(M(N(p))+" "+M(V(I))+" m"),this},Di=m.lineTo=function(p,I){return le(M(N(p))+" "+M(V(I))+" l"),this},Ei=m.curveTo=function(p,I,se,pe,Ce,We){return le([M(N(p)),M(V(I)),M(N(se)),M(V(pe)),M(N(Ce)),M(V(We)),"c"].join(" ")),this};m.__private__.line=m.line=function(p,I,se,pe,Ce){if(isNaN(p)||isNaN(I)||isNaN(se)||isNaN(pe)||!En(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return F===A.COMPAT?this.lines([[se-p,pe-I]],p,I,[1,1],Ce||"S"):this.lines([[se-p,pe-I]],p,I,[1,1]).stroke()},m.__private__.lines=m.lines=function(p,I,se,pe,Ce,We){var tt,vt,kt,Kt,zt,er,xr,wr,Fr,Jr,Tr,$n;if(typeof p=="number"&&($n=se,se=I,I=p,p=$n),pe=pe||[1,1],We=We||!1,isNaN(I)||isNaN(se)||!Array.isArray(p)||!Array.isArray(pe)||!En(Ce)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ra(I,se),tt=pe[0],vt=pe[1],Kt=p.length,Jr=I,Tr=se,kt=0;kt<Kt;kt++)(zt=p[kt]).length===2?(Jr=zt[0]*tt+Jr,Tr=zt[1]*vt+Tr,Di(Jr,Tr)):(er=zt[0]*tt+Jr,xr=zt[1]*vt+Tr,wr=zt[2]*tt+Jr,Fr=zt[3]*vt+Tr,Jr=zt[4]*tt+Jr,Tr=zt[5]*vt+Tr,Ei(er,xr,wr,Fr,Jr,Tr));return We&&Ps(),ea(Ce),this},m.path=function(p){for(var I=0;I<p.length;I++){var se=p[I],pe=se.c;switch(se.op){case"m":ra(pe[0],pe[1]);break;case"l":Di(pe[0],pe[1]);break;case"c":Ei.apply(this,pe);break;case"h":Ps()}}return this},m.__private__.rect=m.rect=function(p,I,se,pe,Ce){if(isNaN(p)||isNaN(I)||isNaN(se)||isNaN(pe)||!En(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return F===A.COMPAT&&(pe=-pe),le([M(N(p)),M(V(I)),M(N(se)),M(N(pe)),"re"].join(" ")),ea(Ce),this},m.__private__.triangle=m.triangle=function(p,I,se,pe,Ce,We,tt){if(isNaN(p)||isNaN(I)||isNaN(se)||isNaN(pe)||isNaN(Ce)||isNaN(We)||!En(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-p,pe-I],[Ce-se,We-pe],[p-Ce,I-We]],p,I,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(p,I,se,pe,Ce,We,tt){if(isNaN(p)||isNaN(I)||isNaN(se)||isNaN(pe)||isNaN(Ce)||isNaN(We)||!En(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vt=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*se),We=Math.min(We,.5*pe),this.lines([[se-2*Ce,0],[Ce*vt,0,Ce,We-We*vt,Ce,We],[0,pe-2*We],[0,We*vt,-Ce*vt,We,-Ce,We],[2*Ce-se,0],[-Ce*vt,0,-Ce,-We*vt,-Ce,-We],[0,2*We-pe],[0,-We*vt,Ce*vt,-We,Ce,-We]],p+Ce,I,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(p,I,se,pe,Ce){if(isNaN(p)||isNaN(I)||isNaN(se)||isNaN(pe)||!En(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*se,tt=4/3*(Math.SQRT2-1)*pe;return ra(p+se,I),Ei(p+se,I-tt,p+We,I-pe,p,I-pe),Ei(p-We,I-pe,p-se,I-tt,p-se,I),Ei(p-se,I+tt,p-We,I+pe,p,I+pe),Ei(p+We,I+pe,p+se,I+tt,p+se,I),ea(Ce),this},m.__private__.circle=m.circle=function(p,I,se,pe){if(isNaN(p)||isNaN(I)||isNaN(se)||!En(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,I,se,se,pe)},m.setFont=function(p,I,se){return se&&(I=X(I,se)),qt=rs(p,I,{disableWarning:!1}),this};var na=m.__private__.getFont=m.getFont=function(){return Yt[rs.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var p,I,se={};for(p in ut)if(ut.hasOwnProperty(p))for(I in se[p]=[],ut[p])ut[p].hasOwnProperty(I)&&se[p].push(I);return se},m.addFont=function(p,I,se,pe,Ce){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(se=X(se,pe)),Ce=Ce||"Identity-H",ci.call(this,p,I,se,Ce)};var ia,as=r.lineWidth||.200025,di=m.__private__.getLineWidth=m.getLineWidth=function(){return as},aa=m.__private__.setLineWidth=m.setLineWidth=function(p){return as=p,le(M(N(p))+" w"),this};m.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(p,I){if(p=p||[],I=I||0,isNaN(I)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(se){return M(N(se))}).join(" "),I=M(N(I)),le("["+p+"] "+I+" d"),this};var Na=m.__private__.getLineHeight=m.getLineHeight=function(){return J*ia};m.__private__.getLineHeight=m.getLineHeight=function(){return J*ia};var Cs=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(ia=p),this},Fs=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ia};Cs(r.lineHeight);var ei=m.__private__.getHorizontalCoordinate=function(p){return N(p)},Vn=m.__private__.getVerticalCoordinate=function(p){return F===A.ADVANCED?p:Rt[H].mediaBox.topRightY-Rt[H].mediaBox.bottomLeftY-N(p)},ss=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(p){return M(ei(p))},hi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(p){return M(Vn(p))},yn=r.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return nn(yn)},m.__private__.setStrokeColor=m.setDrawColor=function(p,I,se,pe){return yn=Kr({ch1:p,ch2:I,ch3:se,ch4:pe,pdfColorType:"draw",precision:2}),le(yn),this};var Ii=r.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return nn(Ii)},m.__private__.setFillColor=m.setFillColor=function(p,I,se,pe){return Ii=Kr({ch1:p,ch2:I,ch3:se,ch4:pe,pdfColorType:"fill",precision:2}),le(Ii),this};var ti=r.textColor||"0 g",Ds=m.__private__.getTextColor=m.getTextColor=function(){return nn(ti)};m.__private__.setTextColor=m.setTextColor=function(p,I,se,pe){return ti=Kr({ch1:p,ch2:I,ch3:se,ch4:pe,pdfColorType:"text",precision:3}),this};var Sa=r.charSpace,ja=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Sa||0)};m.__private__.setCharSpace=m.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Sa=p,this};var sa=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(p){var I=m.CapJoinStyles[p];if(I===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sa=I,le(I+" J"),this};var oa=0;m.__private__.setLineJoin=m.setLineJoin=function(p){var I=m.CapJoinStyles[p];if(I===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oa=I,le(I+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(M(N(p))+" M"),this},m.GState=So,m.setGState=function(p){(p=typeof p=="string"?at[un[p]]:Aa(null,p)).equals(rn)||(le("/"+p.id+" gs"),rn=p)};var Aa=function(p,I){if(!p||!un[p]){var se=!1;for(var pe in at)if(at.hasOwnProperty(pe)&&at[pe].equals(I)){se=!0;break}if(se)I=at[pe];else{var Ce="GS"+(Object.keys(at).length+1).toString(10);at[Ce]=I,I.id=Ce}return p&&(un[p]=I.id),tr.publish("addGState",I),I}};m.addGState=function(p,I){return Aa(p,I),this},m.saveGraphicsState=function(){return le("q"),zr.push({key:qt,size:J,color:ti}),this},m.restoreGraphicsState=function(){le("Q");var p=zr.pop();return qt=p.key,J=p.size,ti=p.color,rn=null,this},m.setCurrentTransformationMatrix=function(p){return le(p.toString()+" cm"),this},m.comment=function(p){return le("#"+p),this};var Oi=function(p,I){var se=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(We){isNaN(We)||(se=parseFloat(We))}});var pe=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(We){Ce=We.toString()}}),this},Cr=function(p,I,se,pe){Oi.call(this,p,I),this.type="rect";var Ce=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(tt){isNaN(tt)||(Ce=parseFloat(tt))}});var We=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},fi=function(){this.page=lr,this.currentPage=H,this.pages=et.slice(0),this.pagesContext=Rt.slice(0),this.x=dr,this.y=Wt,this.matrix=Or,this.width=Mi(H),this.height=Gn(H),this.outputDestination=lt,this.id="",this.objectNumber=-1};fi.prototype.restore=function(){lr=this.page,H=this.currentPage,Rt=this.pagesContext,et=this.pages,dr=this.x,Wt=this.y,Or=this.matrix,_a(H,this.width),la(H,this.height),lt=this.outputDestination};var Ti=function(p,I,se,pe,Ce){Et.push(new fi),lr=H=0,et=[],dr=p,Wt=I,Or=Ce,Fi([se,pe])},Es=function(p){if(mt[p])Et.pop().restore();else{var I=new fi,se="Xo"+(Object.keys(De).length+1).toString(10);I.id=se,mt[p]=se,De[se]=I,tr.publish("addFormObject",I),Et.pop().restore()}};for(var pi in m.beginFormObject=function(p,I,se,pe,Ce){return Ti(p,I,se,pe,Ce),this},m.endFormObject=function(p){return Es(p),this},m.doFormObject=function(p,I){var se=De[mt[p]];return le("q"),le(I.toString()+" cm"),le("/"+se.id+" Do"),le("Q"),this},m.getFormObject=function(p){var I=De[mt[p]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},m.save=function(p,I){return p=p||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(hs(Hn(Lr()),p),typeof hs.unload=="function"&&Ut.setTimeout&&setTimeout(hs.unload,911),this):new Promise(function(se,pe){try{var Ce=hs(Hn(Lr()),p);typeof hs.unload=="function"&&Ut.setTimeout&&setTimeout(hs.unload,911),se(Ce)}catch(We){pe(We.message)}})},Ot.API)Ot.API.hasOwnProperty(pi)&&(pi==="events"&&Ot.API.events.length?function(p,I){var se,pe,Ce;for(Ce=I.length-1;Ce!==-1;Ce--)se=I[Ce][0],pe=I[Ce][1],p.subscribe.apply(p,[se].concat(typeof pe=="function"?[pe]:pe))}(tr,Ot.API.events):m[pi]=Ot.API[pi]);var Mi=m.getPageWidth=function(p){return(Rt[p=p||H].mediaBox.topRightX-Rt[p].mediaBox.bottomLeftX)/ct},_a=m.setPageWidth=function(p,I){Rt[p].mediaBox.topRightX=I*ct+Rt[p].mediaBox.bottomLeftX},Gn=m.getPageHeight=function(p){return(Rt[p=p||H].mediaBox.topRightY-Rt[p].mediaBox.bottomLeftY)/ct},la=m.setPageHeight=function(p,I){Rt[p].mediaBox.topRightY=I*ct+Rt[p].mediaBox.bottomLeftY};return m.internal={pdfEscape:sn,getStyle:Kn,getFont:na,getFontSize:xe,getCharSpace:ja,getTextColor:Ds,getLineHeight:Na,getLineHeightFactor:Fs,getLineWidth:di,write:Mt,getHorizontalCoordinate:ei,getVerticalCoordinate:Vn,getCoordinateString:ss,getVerticalCoordinateString:hi,collections:{},newObject:mr,newAdditionalObject:si,newObjectDeferred:hr,newObjectDeferredBegin:Hr,getFilters:_n,putStream:Fn,events:tr,scaleFactor:ct,pageSize:{getWidth:function(){return Mi(H)},setWidth:function(p){_a(H,p)},getHeight:function(){return Gn(H)},setHeight:function(p){la(H,p)}},encryptionOptions:x,encryption:Qr,getEncryptor:Ls,output:ui,getNumberOfPages:Ji,pages:et,out:le,f2:oe,f3:C,getPageInfo:Pr,getPageInfoByObjId:Dt,getCurrentPageInfo:Xi,getPDFVersion:L,Point:Oi,Rectangle:Cr,Matrix:xt,hasHotfix:Wn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Mi(H)},set:function(p){_a(H,p)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Gn(H)},set:function(p){la(H,p)},enumerable:!0,configurable:!0}),Qi.call(m,rt),qt="F1",es(a,t),tr.publish("initialized"),m}zs.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},zs.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zs.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},zs.prototype.processOwnerPassword=function(r,e){return mc(pc(e).substr(0,5),r)},zs.prototype.encryptor=function(r,e){var t=pc(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return mc(t,n)}},So.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||br(r)!==br(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ot.API={events:[]},Ot.version="2.5.2";var Ir=Ot.API,Cc=1,As=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qs=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(r){return r.toFixed(2)},qa=function(r){return r.toFixed(5)};Ir.__acroform__={};var Bn=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},Bu=function(r){return r*Cc},Bi=function(r){var e=new Gd,t=_t.internal.getHeight(r)||0,n=_t.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Gt(n)),Number(Gt(t))],e},Cm=Ir.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},Fm=Ir.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},Dm=Ir.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Rr=Ir.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Dm(r,e-1)},qr=Ir.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cm(r,e-1)},Br=Ir.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fm(r,e-1)},Em=Ir.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=r[0],i=r[1],c=r[2],u=r[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=n(i+u)||0,h.upperRight_X=t(a+c)||0,h.upperRight_Y=n(i)||0,[Number(Gt(h.lowerLeft_X)),Number(Gt(h.lowerLeft_Y)),Number(Gt(h.upperRight_X)),Number(Gt(h.upperRight_Y))]},Im=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=gc(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+Gt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Bi(r);return i.scope=r.scope,i.stream=e.join(`
`),i}},gc=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(C){return C.split(`
`)}):a.map(function(C){return[C]});var i=t,c=_t.internal.getHeight(r)||0;c=c<0?-c:c;var u=_t.internal.getWidth(r)||0;u=u<0?-u:u;var h=function(C,N,R){if(C+1<a.length){var V=N+" "+a[C+1][0];return Go(V,r,R).width<=u-4}return!1};i++;e:for(;i>0;){e="",i--;var y,x,b=Go("3",r,i).height,w=r.multiline?c-i:(c-b)/2,m=w+=2,P=0,L=0,E=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Go(e,r,i=12).width+", FieldWidth:"+u+`
`;break}for(var k="",A=0,F=0;F<a.length;F++)if(a.hasOwnProperty(F)){var q=!1;if(a[F].length!==1&&E!==a[F].length-1){if((b+2)*(A+2)+2>c)continue e;k+=a[F][E],q=!0,L=F,F--}else{k=(k+=a[F][E]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var K=parseInt(F),X=h(K,k,i),M=F>=a.length-1;if(X&&!M){k+=" ",E=0;continue}if(X||M){if(M)L=K;else if(r.multiline&&(b+2)*(A+2)+2>c)continue e}else{if(!r.multiline||(b+2)*(A+2)+2>c)continue e;L=K}}for(var T="",Z=P;Z<=L;Z++){var oe=a[Z];if(r.multiline){if(Z===L){T+=oe[E]+" ",E=(E+1)%oe.length;continue}if(Z===P){T+=oe[oe.length-1]+" ";continue}}T+=oe[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,x=Go(T,r,i).width,r.textAlign){case"right":y=u-x-2;break;case"center":y=(u-x)/2;break;case"left":default:y=2}e+=Gt(y)+" "+Gt(m)+` Td
`,e+="("+As(T)+`) Tj
`,e+=-Gt(y)+` 0 Td
`,m=-(i+2),x=0,P=q?L:L+1,A++,k=""}break}return n.text=e,n.fontSize=i,n},Go=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Om={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Tm=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},Mm=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,a=r[t];e.internal.newObjectDeferredBegin(a.objId,!0),br(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete r[n]}},Rm=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(_i.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Om)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Cc=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new $d,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Tm(i,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,a){var i=!n;for(var c in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],h=[],y=u.Rect;if(u.Rect&&(u.Rect=Em(u.Rect,a)),a.internal.newObjectDeferredBegin(u.objId,!0),u.DA=_t.createDefaultAppearanceStream(u),br(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=y,u.hasAppearanceStream&&!u.appearanceStreamContent){var x=Im(u);h.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(u.appearanceStreamContent){var b="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var m=u.appearanceStreamContent[w];if(b+="/"+w+" ",b+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var c in m)if(m.hasOwnProperty(c)){var P=m[c];typeof P=="function"&&(P=P.call(a,u)),b+="/"+c+" "+P+" ",a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P)}}else typeof(P=m)=="function"&&(P=P.call(a,u)),b+="/"+c+" "+P,a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:u.objId}),a.internal.out("endobj")}i&&Mm(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},Vd=Ir.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(c){return c};if(Array.isArray(r)){for(var a="[",i=0;i<r.length;i++)switch(i!==0&&(a+=" "),br(r[i])){case"boolean":case"number":case"object":a+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),a+="("+As(n(r[i].toString()))+")"):a+=r[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yl=function(r,e,t){var n=function(a){return a};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+As(n(r))+")"},Hi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hi.prototype.toString=function(){return this.objId+" 0 R"},Hi.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Hi.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],a=this[n];a&&(Array.isArray(a)?r.push({key:n,value:Vd(a,this.objId,this.scope)}):a instanceof Hi?(a.scope=this.scope,r.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:n,value:a}))}return r};var Gd=function(){Hi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Bn(Gd,Hi);var $d=function(){Hi.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+As(t(r))+")"}},set:function(t){r=t}})};Bn($d,Hi);var _i=function r(){Hi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Rr(e,3)},set:function(k){k?this.F=qr(e,3):this.F=Br(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');t=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof ul)return;i="FieldObject"+r.FieldNum++}var k=function(A){return A};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+As(k(i))+")"},set:function(k){i=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(k){i=k}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(k){h=k}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Cc:y},set:function(k){y=k}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(k){x=k}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof ul||this instanceof Ga))return Yl(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=k}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof tn?w:Yl(w,this.objId,this.scope)},set:function(k){k=k.toString(),w=this instanceof tn?k:k.substr(0,1)==="("?qs(k.substr(1,k.length-2)):qs(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?qs(w.substr(1,w.length-1)):w},set:function(k){k=k.toString(),w=this instanceof tn?"/"+k:k}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof tn?m:Yl(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=this instanceof tn?k:k.substr(0,1)==="("?qs(k.substr(1,k.length-2)):qs(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?qs(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof tn?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(k){k=!!k,L=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(k){P=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,1)},set:function(k){k?this.Ff=qr(this.Ff,1):this.Ff=Br(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,2)},set:function(k){k?this.Ff=qr(this.Ff,2):this.Ff=Br(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,3)},set:function(k){k?this.Ff=qr(this.Ff,3):this.Ff=Br(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');E=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(E){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Bn(_i,Hi);var xs=function(){_i.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vd(e,this.objId,this.scope)},set:function(t){var n,a;a=[],typeof(n=t)=="string"&&(a=function(i,c,u){u||(u=1);for(var h,y=[];h=c.exec(i);)y.push(h[u]);return y}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,18)},set:function(t){t?this.Ff=qr(this.Ff,18):this.Ff=Br(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=qr(this.Ff,19):this.Ff=Br(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,20)},set:function(t){t?(this.Ff=qr(this.Ff,20),e.sort()):this.Ff=Br(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,22)},set:function(t){t?this.Ff=qr(this.Ff,22):this.Ff=Br(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,23)},set:function(t){t?this.Ff=qr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,27)},set:function(t){t?this.Ff=qr(this.Ff,27):this.Ff=Br(this.Ff,27)}}),this.hasAppearanceStream=!1};Bn(xs,_i);var ws=function(){xs.call(this),this.fontName="helvetica",this.combo=!1};Bn(ws,xs);var Ns=function(){ws.call(this),this.combo=!0};Bn(Ns,ws);var po=function(){Ns.call(this),this.edit=!0};Bn(po,Ns);var tn=function(){_i.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,15)},set:function(t){t?this.Ff=qr(this.Ff,15):this.Ff=Br(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,16)},set:function(t){t?this.Ff=qr(this.Ff,16):this.Ff=Br(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,17)},set:function(t){t?this.Ff=qr(this.Ff,17):this.Ff=Br(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,26)},set:function(t){t?this.Ff=qr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+As(t(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){br(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Bn(tn,_i);var mo=function(){tn.call(this),this.pushButton=!0};Bn(mo,tn);var Ss=function(){tn.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Bn(Ss,tn);var ul=function(){var r,e;_i.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(u){return u};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),n)c.push("/"+i+" ("+As(a(n[i]))+")");return c.push(">>"),c.join(`
`)},set:function(a){br(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bn(ul,_i),Ss.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Ss.prototype.createOption=function(r){var e=new ul;return e.Parent=this,e.optionName=r,this.Kids.push(e),qm.call(this.scope,e),e};var go=function(){tn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};Bn(go,tn);var Ga=function(){_i.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,13)},set:function(e){e?this.Ff=qr(this.Ff,13):this.Ff=Br(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,21)},set:function(e){e?this.Ff=qr(this.Ff,21):this.Ff=Br(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,23)},set:function(e){e?this.Ff=qr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,24)},set:function(e){e?this.Ff=qr(this.Ff,24):this.Ff=Br(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,25)},set:function(e){e?this.Ff=qr(this.Ff,25):this.Ff=Br(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,26)},set:function(e){e?this.Ff=qr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bn(Ga,_i);var yo=function(){Ga.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,14)},set:function(r){r?this.Ff=qr(this.Ff,14):this.Ff=Br(this.Ff,14)}}),this.password=!0};Bn(yo,Ga);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),i=gc(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Gt(_t.internal.getWidth(r))+" "+Gt(_t.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Gt(i.fontSize)+" Tf "+a),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Bi(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),a=[],i=_t.internal.getHeight(r),c=_t.internal.getWidth(r),u=gc(r,r.caption);return a.push("1 g"),a.push("0 0 "+Gt(c)+" "+Gt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Gt(c-1)+" "+Gt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Gt(u.fontSize)+" Tf "+n),a.push(u.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Gt(_t.internal.getWidth(r))+" "+Gt(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Circle.YesNormal,e.D[r]=_t.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Bi(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=_t.internal.Bezier_C,i=Number((n*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+qa(_t.internal.getWidth(r)/2)+" "+qa(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),t.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),t.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),t.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*_t.internal.Bezier_C).toFixed(5)),c=Number((n*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qa(_t.internal.getWidth(r)/2)+" "+qa(_t.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+qa(_t.internal.getWidth(r)/2)+" "+qa(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+qa(_t.internal.getWidth(r)/2)+" "+qa(_t.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Cross.YesNormal,e.D[r]=_t.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Bi(r);e.scope=r.scope;var t=[],n=_t.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Gt(_t.internal.getWidth(r)-2)+" "+Gt(_t.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),t.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),t.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),t.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=_t.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(_t.internal.getWidth(r))+" "+Gt(_t.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Gt(_t.internal.getWidth(r)-2)+" "+Gt(_t.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(t.x1.x)+" "+Gt(t.x1.y)+" m"),n.push(Gt(t.x2.x)+" "+Gt(t.x2.y)+" l"),n.push(Gt(t.x4.x)+" "+Gt(t.x4.y)+" m"),n.push(Gt(t.x3.x)+" "+Gt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Bi(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Gt(_t.internal.getWidth(r))+" "+Gt(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};_t.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=_t.internal.getWidth(r),t=_t.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},_t.internal.getWidth=function(r){var e=0;return br(r)==="object"&&(e=Bu(r.Rect[2])),e},_t.internal.getHeight=function(r){var e=0;return br(r)==="object"&&(e=Bu(r.Rect[3])),e};var qm=Ir.addField=function(r){if(Rm(this,r),!(r instanceof _i))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ir.AcroFormChoiceField=xs,Ir.AcroFormListBox=ws,Ir.AcroFormComboBox=Ns,Ir.AcroFormEditBox=po,Ir.AcroFormButton=tn,Ir.AcroFormPushButton=mo,Ir.AcroFormRadioButton=Ss,Ir.AcroFormCheckBox=go,Ir.AcroFormTextField=Ga,Ir.AcroFormPasswordField=yo,Ir.AcroFormAppearance=_t,Ir.AcroForm={ChoiceField:xs,ListBox:ws,ComboBox:Ns,EditBox:po,Button:tn,PushButton:mo,RadioButton:Ss,CheckBox:go,TextField:Ga,PasswordField:yo,Appearance:_t},Ot.AcroForm={ChoiceField:xs,ListBox:ws,ComboBox:Ns,EditBox:po,Button:tn,PushButton:mo,RadioButton:Ss,CheckBox:go,TextField:Ga,PasswordField:yo,Appearance:_t};var Bm=Ot.AcroForm;function Yd(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(C,N){var R,V,he,$,Y,ne=e;if((N=N||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(X(C))for(Y in t)for(he=t[Y],R=0;R<he.length;R+=1){for($=!0,V=0;V<he[R].length;V+=1)if(he[R][V]!==void 0&&he[R][V]!==C[V]){$=!1;break}if($===!0){ne=Y;break}}else for(Y in t)for(he=t[Y],R=0;R<he.length;R+=1){for($=!0,V=0;V<he[R].length;V+=1)if(he[R][V]!==void 0&&he[R][V]!==C.charCodeAt(V)){$=!1;break}if($===!0){ne=Y;break}}return ne===e&&N!==e&&(ne=N),ne},a=function C(N){for(var R=this.internal.write,V=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:N.width}),$.push({key:"Height",value:N.height}),N.colorSpace===E.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===E.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var Y="",ne=0,ie=N.transparency.length;ne<ie;ne++)Y+=N.transparency[ne]+" "+N.transparency[ne]+" ";$.push({key:"Mask",value:"["+Y+"]"})}N.sMask!==void 0&&$.push({key:"SMask",value:N.objectId+1+" 0 R"});var ge=N.filter!==void 0?["/"+N.filter]:void 0;if(V({data:N.data,additionalKeyValues:$,alreadyAppliedFilters:ge,objectId:N.objectId}),R("endobj"),"sMask"in N&&N.sMask!==void 0){var Oe="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,j={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:Oe,data:N.sMask};"filter"in N&&(j.filter=N.filter),C.call(this,j)}if(N.colorSpace===E.INDEXED){var H=this.internal.newObject();V({data:T(new Uint8Array(N.palette)),objectId:H}),R("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var N in C)a.call(this,C[N])},c=function(){var C,N=this.internal.collections.addImage_images,R=this.internal.write;for(var V in N)R("/I"+(C=N[V]).index,C.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var C=this.internal.collections.addImage_images;return u.call(this),C},y=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(C){return typeof r["process"+C.toUpperCase()]=="function"},b=function(C){return br(C)==="object"&&C.nodeType===1},w=function(C,N){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var R=""+C.getAttribute("src");if(R.indexOf("data:image/")===0)return fo(unescape(R).split("base64,").pop());var V=r.loadFile(R,!0);if(V!==void 0)return V}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var he;switch(N){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;case"JPEG":case"JPG":default:he="image/jpeg"}return fo(C.toDataURL(he,1).split("base64,").pop())}},m=function(C){var N=this.internal.collections.addImage_images;if(N){for(var R in N)if(C===N[R].alias)return N[R]}},P=function(C,N,R){return C||N||(C=-96,N=-96),C<0&&(C=-1*R.width*72/C/this.internal.scaleFactor),N<0&&(N=-1*R.height*72/N/this.internal.scaleFactor),C===0&&(C=N*R.width/R.height),N===0&&(N=C*R.height/R.width),[C,N]},L=function(C,N,R,V,he,$){var Y=P.call(this,R,V,he),ne=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,ge=h.call(this);if(R=Y[0],V=Y[1],ge[he.index]=he,$){$*=Math.PI/180;var Oe=Math.cos($),j=Math.sin($),H=function(te){return te.toFixed(4)},Q=[H(Oe),H(j),H(-1*j),H(Oe),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,ne(C),ie(N+V),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([ne(R),"0","0",ne(V),"0","0","cm"].join(" "))):this.internal.write([ne(R),"0","0",ne(V),ne(C),ie(N+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},E=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=r.__addimage__.sHashCode=function(C){var N,R,V=0;if(typeof C=="string")for(R=C.length,N=0;N<R;N++)V=(V<<5)-V+C.charCodeAt(N),V|=0;else if(X(C))for(R=C.byteLength/2,N=0;N<R;N++)V=(V<<5)-V+C[N],V|=0;return V},F=r.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var N=!0;return C.length===0&&(N=!1),C.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(N=!1),N},q=r.__addimage__.extractImageFromDataUrl=function(C){var N=(C=C||"").split("base64,"),R=null;if(N.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(V)&&(R={mimeType:V[1],charset:V[2],data:N[1]})}return R},K=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(C){return K()&&C instanceof ArrayBuffer};var X=r.__addimage__.isArrayBufferView=function(C){return K()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},M=r.__addimage__.binaryStringToUint8Array=function(C){for(var N=C.length,R=new Uint8Array(N),V=0;V<N;V++)R[V]=C.charCodeAt(V);return R},T=r.__addimage__.arrayBufferToBinaryString=function(C){for(var N="",R=X(C)?C:new Uint8Array(C),V=0;V<R.length;V+=8192)N+=String.fromCharCode.apply(null,R.subarray(V,V+8192));return N};r.addImage=function(){var C,N,R,V,he,$,Y,ne,ie;if(typeof arguments[1]=="number"?(N=e,R=arguments[1],V=arguments[2],he=arguments[3],$=arguments[4],Y=arguments[5],ne=arguments[6],ie=arguments[7]):(N=arguments[1],R=arguments[2],V=arguments[3],he=arguments[4],$=arguments[5],Y=arguments[6],ne=arguments[7],ie=arguments[8]),br(C=arguments[0])==="object"&&!b(C)&&"imageData"in C){var ge=C;C=ge.imageData,N=ge.format||N||e,R=ge.x||R||0,V=ge.y||V||0,he=ge.w||ge.width||he,$=ge.h||ge.height||$,Y=ge.alias||Y,ne=ge.compression||ne,ie=ge.rotation||ge.angle||ie}var Oe=this.internal.getFilters();if(ne===void 0&&Oe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(R)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var j=Z.call(this,C,N,Y,ne);return L.call(this,R,V,he,$,j,ie),this};var Z=function(C,N,R,V){var he,$,Y;if(typeof C=="string"&&n(C)===e){C=unescape(C);var ne=oe(C,!1);(ne!==""||(ne=r.loadFile(C,!0))!==void 0)&&(C=ne)}if(b(C)&&(C=w(C,N)),N=n(C,N),!x(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((Y=R)==null||Y.length===0)&&(R=function(ie){return typeof ie=="string"||X(ie)?A(ie):X(ie.data)?A(ie.data):null}(C)),(he=m.call(this,R))||(K()&&(C instanceof Uint8Array||N==="RGBA"||($=C,C=M(C))),he=this["process"+N.toUpperCase()](C,y.call(this),R,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in r.image_compression?ie:k.NONE}(V),$)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},oe=r.__addimage__.convertBase64ToBinaryString=function(C,N){var R;N=typeof N!="boolean"||N;var V,he="";if(typeof C=="string"){V=(R=q(C))!==null?R.data:C;try{he=fo(V)}catch($){if(N)throw F(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return he};r.getImageProperties=function(C){var N,R,V="";if(b(C)&&(C=w(C)),typeof C=="string"&&n(C)===e&&((V=oe(C,!1))===""&&(V=r.loadFile(C)||""),C=V),R=n(C),!x(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!K()||C instanceof Uint8Array||(C=M(C)),!(N=this["process"+R.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=R,N}})(Ot.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Ot.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,a,i,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),y=t.pageContext.annotations,x=!1,b=0;b<y.length&&!x;b++)switch((n=y[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var w=0;w<y.length;w++){n=y[w];var m=this.internal.pdfEscape,P=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(L.objId),A=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+m(k(n.contents))+")",i+=" /Popup "+E.objId+" 0 R",i+=" /P "+h.objId+" 0 R",i+=" /T ("+m(k(A))+") >>",L.content=i;var F=L.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(i+=" /Open true"),i+=" >>",E.content=i,this.internal.write(L.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var q=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(P(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var K=this.annotations._nameMap[n.options.name];n.options.pageNumber=K.page,n.options.top=K.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var X=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+X+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,a,i,c){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:y(n),w:h(t+a),h:y(n+i)},options:c,type:"link"})},r.textWithLink=function(t,n,a,i){var c,u,h=this.getTextWidth(t),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var x=this.splitTextToSize(t,u).length;c=Math.ceil(y*x)}else u=h,c=y;return this.text(t,n,a,i),a+=.2*y,i.align==="center"&&(n-=h/2),i.align==="right"&&(n-=h),this.link(n,a-y,u,c,i),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Ot.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},u=r.__arabicParser__.isArabicEndLetter=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(L){return c(L)&&a.indexOf(L.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=1};var y=r.__arabicParser__.arabicLetterHasFinalForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=3};var x=r.__arabicParser__.arabicLetterHasMedialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(L){var E=0,k=t,A="",F=0;for(E=0;E<L.length;E+=1)k[L.charCodeAt(E)]!==void 0?(F++,typeof(k=k[L.charCodeAt(E)])=="number"&&(A+=String.fromCharCode(k),k=t,F=0),E===L.length-1&&(k=t,A+=L.charAt(E-(F-1)),E-=F-1,F=0)):(k=t,A+=L.charAt(E-F),E-=F,F=0);return A};r.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&n[L.charCodeAt(0)]!==void 0};var w=r.__arabicParser__.getCorrectForm=function(L,E,k){return c(L)?i(L)===!1?-1:!y(L)||!c(E)&&!c(k)||!c(k)&&u(E)||u(L)&&!c(E)||u(L)&&h(E)||u(L)&&u(E)?0:x(L)&&c(E)&&!u(E)&&c(k)&&y(k)?3:u(L)||!c(k)?1:2:-1},m=function(L){var E=0,k=0,A=0,F="",q="",K="",X=(L=L||"").split("\\s+"),M=[];for(E=0;E<X.length;E+=1){for(M.push(""),k=0;k<X[E].length;k+=1)F=X[E][k],q=X[E][k-1],K=X[E][k+1],c(F)?(A=w(F,q,K),M[E]+=A!==-1?String.fromCharCode(e[F.charCodeAt(0)][A]):F):M[E]+=F;M[E]=b(M[E])}return M.join(" ")},P=r.__arabicParser__.processArabic=r.processArabic=function(){var L,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(E)){var A=0;for(k=[],A=0;A<E.length;A+=1)Array.isArray(E[A])?k.push([m(E[A][0]),E[A][1],E[A][2]]):k.push([m(E[A])]);L=k}else L=m(E);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};r.events.push(["preProcessText",P])}(Ot.API),Ot.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var a;if((t=t||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ot.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(L){h=L}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(L){y=L}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(L){x=L}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(L){b=L}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(L){w=L}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(L){m=L}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(L){P=L}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,y){n.call(this);var x=(y=y||{}).fontSize||this.getFontSize(),b=y.font||this.getFont(),w=y.scaleFactor||this.internal.scaleFactor,m=0,P=0,L=0,E=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var k=y.maxWidth;k>0?typeof h=="string"?h=this.splitTextToSize(h,k):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(F,q){return F.concat(E.splitTextToSize(q,k))},[])):h=Array.isArray(h)?h:[h];for(var A=0;A<h.length;A++)m<(L=this.getStringUnitWidth(h[A],{font:b})*x)&&(m=L);return m!==0&&(P=h.length),{w:m/=w,h:Math.max((P*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/w,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var h;h=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var y=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===h.lineNumber?(h.x=(y.x||0)+(y.width||0),h.y=y.y||0):y.y+y.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,m&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=y.y+y.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-x,h.y+x,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+x,{align:"center",baseline:"top",maxWidth:h.width-x-x}):this.text(h.text,h.x+x,h.y+x,{align:"left",baseline:"top",maxWidth:h.width-x-x})),this.internal.__cell__.lastCell=h,this};r.table=function(h,y,x,b,w){if(n.call(this),!x)throw new Error("No data for PDF table.");var m,P,L,E,k=[],A=[],F=[],q={},K={},X=[],M=[],T=(w=w||{}).autoSize||!1,Z=w.printHeaders!==!1,oe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,C=w.margins||Object.assign({width:this.getPageWidth()},e),N=typeof w.padding=="number"?w.padding:3,R=w.headerBackgroundColor||"#c8c8c8",V=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=oe,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=V,this.setFontSize(oe),b==null)A=k=Object.keys(x[0]),F=k.map(function(){return"left"});else if(Array.isArray(b)&&br(b[0])==="object")for(k=b.map(function(ge){return ge.name}),A=b.map(function(ge){return ge.prompt||ge.name||""}),F=b.map(function(ge){return ge.align||"left"}),m=0;m<b.length;m+=1)K[b[m].name]=b[m].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(A=k=b,F=k.map(function(){return"left"}));if(T||Array.isArray(b)&&typeof b[0]=="string")for(m=0;m<k.length;m+=1){for(q[E=k[m]]=x.map(function(ge){return ge[E]}),this.setFont(void 0,"bold"),X.push(this.getTextDimensions(A[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=q[E],this.setFont(void 0,"normal"),L=0;L<P.length;L+=1)X.push(this.getTextDimensions(P[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[E]=Math.max.apply(null,X)+N+N,X=[]}if(Z){var he={};for(m=0;m<k.length;m+=1)he[k[m]]={},he[k[m]].text=A[m],he[k[m]].align=F[m];var $=u.call(this,he,K);M=k.map(function(ge){return new i(h,y,K[ge],$,he[ge].text,void 0,he[ge].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var Y=b.reduce(function(ge,Oe){return ge[Oe.name]=Oe.align,ge},{});for(m=0;m<x.length;m+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:m,data:x[m]},this);var ne=u.call(this,x[m],K);for(L=0;L<k.length;L+=1){var ie=x[m][k[L]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:m,col:L,data:ie},this),c.call(this,new i(h,y,K[k[L]],ne,ie,m+2,Y[k[L]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=y,this};var u=function(h,y){var x=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(m){var P=h[m];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,y[m]-x-x)},this).map(function(m){return this.getLineHeightFactor()*m.length*b/w+x+x},this).reduce(function(m,P){return Math.max(m,P)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,y){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){x=this.internal.__cell__.tableHeaderRow[m].clone(),y&&(x.y=this.internal.__cell__.margins.top||0,w.push(x)),x.lineNumber=h;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(P)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Ot.API);var Qd={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jd=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yc=Yd(Jd),Xd=[100,200,300,400,500,600,700,800,900],Um=Yd(Xd);function vc(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return Qd[i=i||"normal"]?i:"normal"}(r.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(r.weight),a=function(i){return typeof yc[i=i||"normal"]=="number"?i:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,n].join(" ")}}}function Uu(r,e,t,n){var a;for(a=t;a>=0&&a<e.length;a+=n)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=n)if(r[e[a]])return r[e[a]]}var zm={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zu={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Hu(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Hm(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},zm,t.genericFontFamilies||{}),i=null,c=null,u=0;u<e.length;++u)if(a[(i=vc(e[u])).family]&&(i.family=a[i.family]),r.hasOwnProperty(i.family)){c=r[i.family];break}if(!(c=c||r[n]))throw new Error("Could not find a font-family for the rule '"+Hu(i)+"' and default family '"+n+"'.");if(c=function(h,y){if(y[h])return y[h];var x=yc[h],b=x<=yc.normal?-1:1,w=Uu(y,Jd,x,b);if(!w)throw new Error("Could not find a matching font-stretch value for "+h);return w}(i.stretch,c),c=function(h,y){if(y[h])return y[h];for(var x=Qd[h],b=0;b<x.length;++b)if(y[x[b]])return y[x[b]];throw new Error("Could not find a matching font-style for "+h)}(i.style,c),!(c=function(h,y){if(y[h])return y[h];if(h===400&&y[500])return y[500];if(h===500&&y[400])return y[400];var x=Um[h],b=Uu(y,Xd,x,h<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+h);return b}(i.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Hu(i)+"'.");return c}function Wu(r){return r.trimLeft()}function Wm(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Km(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var $o,Ku,Vu,Ql=["times"];(function(r){var e,t,n,a,i,c,u,h,y,x=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new h,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new c,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new c,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,y=new x}]);var b=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=j;Object.defineProperty(this,"pdf",{get:function(){return H}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(qe){Q=!!qe}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(qe){te=!!qe}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(qe){isNaN(qe)||(ae=qe)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(qe){isNaN(qe)||(we=qe)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(qe){var le;typeof qe=="number"?le=[qe,qe,qe,qe]:((le=new Array(4))[0]=qe[0],le[1]=qe.length>=2?qe[1]:le[0],le[2]=qe.length>=3?qe[2]:le[0],le[3]=qe.length>=4?qe[3]:le[1]),y.margin=le}});var Fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Fe},set:function(qe){Fe=qe}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(qe){fe=qe}});var Je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Je},set:function(qe){Je=qe}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(qe){qe instanceof x&&(y=qe)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(qe){y.path=qe}});var et=[];Object.defineProperty(this,"ctxStack",{get:function(){return et},set:function(qe){et=qe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(qe){var le;le=w(qe),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(qe){var le=w(qe);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(qe){["butt","round","square"].indexOf(qe)!==-1&&(this.ctx.lineCap=qe,this.pdf.setLineCap(qe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(qe){isNaN(qe)||(this.ctx.lineWidth=qe,this.pdf.setLineWidth(qe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(qe){["bevel","round","miter"].indexOf(qe)!==-1&&(this.ctx.lineJoin=qe,this.pdf.setLineJoin(qe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(qe){isNaN(qe)||(this.ctx.miterLimit=qe,this.pdf.setMiterLimit(qe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(qe){this.ctx.textBaseline=qe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(qe){["right","end","center","left","start"].indexOf(qe)!==-1&&(this.ctx.textAlign=qe)}});var Ve=null;function lt(qe,le){if(Ve===null){var Mt=function(jt){var rt=[];return Object.keys(jt).forEach(function(J){jt[J].forEach(function(de){var xe=null;switch(de){case"bold":xe={family:J,weight:"bold"};break;case"italic":xe={family:J,style:"italic"};break;case"bolditalic":xe={family:J,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:J}}xe!==null&&(xe.ref={name:J,style:de},rt.push(xe))})}),rt}(qe.getFontList());Ve=function(jt){for(var rt={},J=0;J<jt.length;++J){var de=vc(jt[J]),xe=de.family,Be=de.stretch,Ge=de.style,Ue=de.weight;rt[xe]=rt[xe]||{},rt[xe][Be]=rt[xe][Be]||{},rt[xe][Be][Ge]=rt[xe][Be][Ge]||{},rt[xe][Be][Ge][Ue]=de}return rt}(Mt.concat(le))}return Ve}var Ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ft},set:function(qe){Ve=null,Ft=qe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(qe){var le;if(this.ctx.font=qe,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(qe))!==null){var Mt=le[1],jt=(le[2],le[3]),rt=le[4],J=(le[5],le[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(de==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var xe=function(wt){var qt,ct,dr=[],Wt=wt.trim();if(Wt==="")return Ql;if(Wt in zu)return[zu[Wt]];for(;Wt!=="";){switch(ct=null,qt=(Wt=Wu(Wt)).charAt(0)){case'"':case"'":ct=Wm(Wt.substring(1),qt);break;default:ct=Km(Wt)}if(ct===null||(dr.push(ct[0]),(Wt=Wu(ct[1]))!==""&&Wt.charAt(0)!==","))return Ql;Wt=Wt.replace(/^,/,"")}return dr}(J);if(this.fontFaces){var Be=Hm(lt(this.pdf,this.fontFaces),xe.map(function(wt){return{family:wt,stretch:"normal",weight:jt,style:Mt}}));this.pdf.setFont(Be.ref.name,Be.ref.style)}else{var Ge="";(jt==="bold"||parseInt(jt,10)>=700||Mt==="bold")&&(Ge="bold"),Mt==="italic"&&(Ge+="italic"),Ge.length===0&&(Ge="normal");for(var Ue="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<xe.length;bt++){if(this.pdf.internal.getFont(xe[bt],Ge,{noFallback:!0,disableWarning:!0})!==void 0){Ue=xe[bt];break}if(Ge==="bolditalic"&&this.pdf.internal.getFont(xe[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ue=xe[bt],Ge="bold";else if(this.pdf.internal.getFont(xe[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ue=xe[bt],Ge="normal";break}}if(Ue===""){for(var Lt=0;Lt<xe.length;Lt++)if(Xe[xe[Lt]]){Ue=Xe[xe[Lt]];break}}Ue=Ue===""?"Times":Ue,this.pdf.setFont(Ue,Ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(qe){this.ctx.globalCompositeOperation=qe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(qe){this.ctx.globalAlpha=qe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(qe){this.ctx.lineDashOffset=qe,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(qe){this.ctx.lineDash=qe,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(qe){this.ctx.ignoreClearRect=!!qe}})};b.prototype.setLineDash=function(j){this.lineDash=j},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){q.call(this,"fill",!1)},b.prototype.stroke=function(){q.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(j,H){if(isNaN(j)||isNaN(H))throw yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new c(j,H));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(j,H)},b.prototype.closePath=function(){var j=new c(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&br(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){j=new c(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(j.x,j.y)},b.prototype.lineTo=function(j,H){if(isNaN(j)||isNaN(H))throw yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new c(j,H));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(Q.x,Q.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},b.prototype.quadraticCurveTo=function(j,H,Q,te){if(isNaN(Q)||isNaN(te)||isNaN(j)||isNaN(H))throw yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new c(Q,te)),we=this.ctx.transform.applyToPoint(new c(j,H));this.path.push({type:"qct",x1:we.x,y1:we.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new c(ae.x,ae.y)},b.prototype.bezierCurveTo=function(j,H,Q,te,ae,we){if(isNaN(ae)||isNaN(we)||isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te))throw yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Fe=this.ctx.transform.applyToPoint(new c(ae,we)),fe=this.ctx.transform.applyToPoint(new c(j,H)),Je=this.ctx.transform.applyToPoint(new c(Q,te));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:Je.x,y2:Je.y,x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new c(Fe.x,Fe.y)},b.prototype.arc=function(j,H,Q,te,ae,we){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te)||isNaN(ae))throw yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var Fe=this.ctx.transform.applyToPoint(new c(j,H));j=Fe.x,H=Fe.y;var fe=this.ctx.transform.applyToPoint(new c(0,Q)),Je=this.ctx.transform.applyToPoint(new c(0,0));Q=Math.sqrt(Math.pow(fe.x-Je.x,2)+Math.pow(fe.y-Je.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:j,y:H,radius:Q,startAngle:te,endAngle:ae,counterclockwise:we})},b.prototype.arcTo=function(j,H,Q,te,ae){throw new Error("arcTo not implemented.")},b.prototype.rect=function(j,H,Q,te){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te))throw yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,H),this.lineTo(j+Q,H),this.lineTo(j+Q,H+te),this.lineTo(j,H+te),this.lineTo(j,H),this.lineTo(j+Q,H),this.lineTo(j,H)},b.prototype.fillRect=function(j,H,Q,te){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te))throw yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,H,Q,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},b.prototype.strokeRect=function(j,H,Q,te){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te))throw yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(j,H,Q,te),this.stroke())},b.prototype.clearRect=function(j,H,Q,te){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te))throw yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,H,Q,te))},b.prototype.save=function(j){j=typeof j!="boolean"||j;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},b.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(H),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(j){var H,Q,te,ae;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))H=0,Q=0,te=0,ae=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(we!==null)H=parseInt(we[1]),Q=parseInt(we[2]),te=parseInt(we[3]),ae=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)H=parseInt(we[1]),Q=parseInt(we[2]),te=parseInt(we[3]),ae=parseFloat(we[4]);else{if(ae=1,typeof j=="string"&&j.charAt(0)!=="#"){var Fe=new Hd(j);j=Fe.ok?Fe.toHex():"#000000"}j.length===4?(H=j.substring(1,2),H+=H,Q=j.substring(2,3),Q+=Q,te=j.substring(3,4),te+=te):(H=j.substring(1,3),Q=j.substring(3,5),te=j.substring(5,7)),H=parseInt(H,16),Q=parseInt(Q,16),te=parseInt(te,16)}}return{r:H,g:Q,b:te,a:ae,style:j}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(j,H,Q,te){if(isNaN(H)||isNaN(Q)||typeof j!="string")throw yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!m.call(this)){var ae=ne(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;N.call(this,{text:j,x:H,y:Q,scale:we,angle:ae,align:this.textAlign,maxWidth:te})}},b.prototype.strokeText=function(j,H,Q,te){if(isNaN(H)||isNaN(Q)||typeof j!="string")throw yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){te=isNaN(te)?void 0:te;var ae=ne(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;N.call(this,{text:j,x:H,y:Q,scale:we,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},b.prototype.measureText=function(j){if(typeof j!="string")throw yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Q=this.pdf.internal.scaleFactor,te=H.internal.getFontSize(),ae=H.getStringUnitWidth(j)*te/H.internal.scaleFactor,we=function(Fe){var fe=(Fe=Fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new we({width:ae*=Math.round(96*Q/72*1e4)/1e4})},b.prototype.scale=function(j,H){if(isNaN(j)||isNaN(H))throw yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new h(j,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},b.prototype.rotate=function(j){if(isNaN(j))throw yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new h(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},b.prototype.translate=function(j,H){if(isNaN(j)||isNaN(H))throw yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new h(1,0,0,1,j,H);this.ctx.transform=this.ctx.transform.multiply(Q)},b.prototype.transform=function(j,H,Q,te,ae,we){if(isNaN(j)||isNaN(H)||isNaN(Q)||isNaN(te)||isNaN(ae)||isNaN(we))throw yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Fe=new h(j,H,Q,te,ae,we);this.ctx.transform=this.ctx.transform.multiply(Fe)},b.prototype.setTransform=function(j,H,Q,te,ae,we){j=isNaN(j)?1:j,H=isNaN(H)?0:H,Q=isNaN(Q)?0:Q,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,we=isNaN(we)?0:we,this.ctx.transform=new h(j,H,Q,te,ae,we)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(j,H,Q,te,ae,we,Fe,fe,Je){var et=this.pdf.getImageProperties(j),Ve=1,lt=1,Ft=1,qe=1;te!==void 0&&fe!==void 0&&(Ft=fe/te,qe=Je/ae,Ve=et.width/te*fe/te,lt=et.height/ae*Je/ae),we===void 0&&(we=H,Fe=Q,H=0,Q=0),te!==void 0&&fe===void 0&&(fe=te,Je=ae),te===void 0&&fe===void 0&&(fe=et.width,Je=et.height);for(var le,Mt=this.ctx.transform.decompose(),jt=ne(Mt.rotate.shx),rt=new h,J=(rt=(rt=(rt=rt.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale)).applyToRectangle(new u(we-H*Ft,Fe-Q*qe,te*Ve,ae*lt)),de=E.call(this,J),xe=[],Be=0;Be<de.length;Be+=1)xe.indexOf(de[Be])===-1&&xe.push(de[Be]);if(F(xe),this.autoPaging)for(var Ge=xe[0],Ue=xe[xe.length-1],Xe=Ge;Xe<Ue+1;Xe++){this.pdf.setPage(Xe);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=Xe===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Xe===1?0:wt+(Xe-2)*qt;if(this.ctx.clip_path.length!==0){var dr=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(le,this.posX+this.margin[3],-ct+Lt+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=dr}var Wt=JSON.parse(JSON.stringify(J));Wt=A([Wt],this.posX+this.margin[3],-ct+Lt+this.ctx.prevPageLastElemOffset)[0];var Or=(Xe>Ge||Xe<Ue)&&L.call(this);Or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,qt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,jt),Or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",J.x,J.y,J.w,J.h,null,null,jt)};var E=function(j,H,Q){var te=[];H=H||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":te.push(Math.floor((j.y+ae)/Q)+1);break;case"arc":te.push(Math.floor((j.y+ae-j.radius)/Q)+1),te.push(Math.floor((j.y+ae+j.radius)/Q)+1);break;case"qct":var we=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);te.push(Math.floor((we.y+ae)/Q)+1),te.push(Math.floor((we.y+we.h+ae)/Q)+1);break;case"bct":var Fe=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);te.push(Math.floor((Fe.y+ae)/Q)+1),te.push(Math.floor((Fe.y+Fe.h+ae)/Q)+1);break;case"rect":te.push(Math.floor((j.y+ae)/Q)+1),te.push(Math.floor((j.y+j.h+ae)/Q)+1)}for(var fe=0;fe<te.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<te[fe];)k.call(this);return te},k=function(){var j=this.fillStyle,H=this.strokeStyle,Q=this.font,te=this.lineCap,ae=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=H,this.font=Q,this.lineCap=te,this.lineWidth=ae,this.lineJoin=we},A=function(j,H,Q){for(var te=0;te<j.length;te++)switch(j[te].type){case"bct":j[te].x2+=H,j[te].y2+=Q;case"qct":j[te].x1+=H,j[te].y1+=Q;case"mt":case"lt":case"arc":default:j[te].x+=H,j[te].y+=Q}return j},F=function(j){return j.sort(function(H,Q){return H-Q})},q=function(j,H){for(var Q,te,ae=this.fillStyle,we=this.strokeStyle,Fe=this.lineCap,fe=this.lineWidth,Je=Math.abs(fe*this.ctx.transform.scaleX),et=this.lineJoin,Ve=JSON.parse(JSON.stringify(this.path)),lt=JSON.parse(JSON.stringify(this.path)),Ft=[],qe=0;qe<lt.length;qe++)if(lt[qe].x!==void 0)for(var le=E.call(this,lt[qe]),Mt=0;Mt<le.length;Mt+=1)Ft.indexOf(le[Mt])===-1&&Ft.push(le[Mt]);for(var jt=0;jt<Ft.length;jt++)for(;this.pdf.internal.getNumberOfPages()<Ft[jt];)k.call(this);if(F(Ft),this.autoPaging)for(var rt=Ft[0],J=Ft[Ft.length-1],de=rt;de<J+1;de++){this.pdf.setPage(de),this.fillStyle=ae,this.strokeStyle=we,this.lineCap=Fe,this.lineWidth=Je,this.lineJoin=et;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=de===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=de===1?0:Ge+(de-2)*Ue;if(this.ctx.clip_path.length!==0){var bt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Q,this.posX+this.margin[3],-Xe+Be+this.ctx.prevPageLastElemOffset),K.call(this,j,!0),this.path=bt}if(te=JSON.parse(JSON.stringify(Ve)),this.path=A(te,this.posX+this.margin[3],-Xe+Be+this.ctx.prevPageLastElemOffset),H===!1||de===0){var Lt=(de>rt||de<J)&&L.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Ue,null).clip().discardPath()),K.call(this,j,H),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=Je,K.call(this,j,H),this.lineWidth=fe;this.path=Ve},K=function(j,H){if((j!=="stroke"||H||!P.call(this))&&(j==="stroke"||H||!m.call(this))){for(var Q,te,ae=[],we=this.path,Fe=0;Fe<we.length;Fe++){var fe=we[Fe];switch(fe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:fe,deltas:[],abs:[]});break;case"lt":var Je=ae.length;if(we[Fe-1]&&!isNaN(we[Fe-1].x)&&(Q=[fe.x-we[Fe-1].x,fe.y-we[Fe-1].y],Je>0)){for(;Je>=0;Je--)if(ae[Je-1].close!==!0&&ae[Je-1].begin!==!0){ae[Je-1].deltas.push(Q),ae[Je-1].abs.push(fe);break}}break;case"bct":Q=[fe.x1-we[Fe-1].x,fe.y1-we[Fe-1].y,fe.x2-we[Fe-1].x,fe.y2-we[Fe-1].y,fe.x-we[Fe-1].x,fe.y-we[Fe-1].y],ae[ae.length-1].deltas.push(Q);break;case"qct":var et=we[Fe-1].x+2/3*(fe.x1-we[Fe-1].x),Ve=we[Fe-1].y+2/3*(fe.y1-we[Fe-1].y),lt=fe.x+2/3*(fe.x1-fe.x),Ft=fe.y+2/3*(fe.y1-fe.y),qe=fe.x,le=fe.y;Q=[et-we[Fe-1].x,Ve-we[Fe-1].y,lt-we[Fe-1].x,Ft-we[Fe-1].y,qe-we[Fe-1].x,le-we[Fe-1].y],ae[ae.length-1].deltas.push(Q);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(fe)}}te=H?null:j==="stroke"?"stroke":"fill";for(var Mt=!1,jt=0;jt<ae.length;jt++)if(ae[jt].arc)for(var rt=ae[jt].abs,J=0;J<rt.length;J++){var de=rt[J];de.type==="arc"?T.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,H,!Mt):R.call(this,de.x,de.y),Mt=!0}else if(ae[jt].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(ae[jt].begin!==!0){var xe=ae[jt].start.x,Be=ae[jt].start.y;V.call(this,ae[jt].deltas,xe,Be),Mt=!0}te&&Z.call(this,te),H&&oe.call(this)}},X=function(j){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-Q;case"top":return j+H-Q;case"hanging":return j+H-2*Q;case"middle":return j+H/2-Q;case"ideographic":return j;case"alphabetic":default:return j}},M=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(H,Q){this.colorStops.push([H,Q])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(j,H,Q,te,ae,we,Fe,fe,Je){for(var et=$.call(this,Q,te,ae,we),Ve=0;Ve<et.length;Ve++){var lt=et[Ve];Ve===0&&(Je?C.call(this,lt.x1+j,lt.y1+H):R.call(this,lt.x1+j,lt.y1+H)),he.call(this,j,H,lt.x2,lt.y2,lt.x3,lt.y3,lt.x4,lt.y4)}fe?oe.call(this):Z.call(this,Fe)},Z=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oe=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(j,H){this.pdf.internal.out(t(j)+" "+n(H)+" m")},N=function(j){var H;switch(j.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Q=this.pdf.getTextDimensions(j.text),te=X.call(this,j.y),ae=M.call(this,te)-Q.h,we=this.ctx.transform.applyToPoint(new c(j.x,te)),Fe=this.ctx.transform.decompose(),fe=new h;fe=(fe=(fe=fe.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale);for(var Je,et,Ve,lt=this.ctx.transform.applyToRectangle(new u(j.x,te,Q.w,Q.h)),Ft=fe.applyToRectangle(new u(j.x,ae,Q.w,Q.h)),qe=E.call(this,Ft),le=[],Mt=0;Mt<qe.length;Mt+=1)le.indexOf(qe[Mt])===-1&&le.push(qe[Mt]);if(F(le),this.autoPaging)for(var jt=le[0],rt=le[le.length-1],J=jt;J<rt+1;J++){this.pdf.setPage(J);var de=J===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],Ge=Be-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Xe=Ue-this.margin[3],bt=J===1?0:xe+(J-2)*Ge;if(this.ctx.clip_path.length!==0){var Lt=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Je,this.posX+this.margin[3],-1*bt+de),K.call(this,"fill",!0),this.path=Lt}var wt=A([JSON.parse(JSON.stringify(Ft))],this.posX+this.margin[3],-bt+de+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(et*j.scale),Ve=this.lineWidth,this.lineWidth=Ve*j.scale);var qt=this.autoPaging!=="text";if(qt||wt.y+wt.h<=Be){if(qt||wt.y>=de&&wt.x<=Ue){var ct=qt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Ue-wt.x)[0],dr=A([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-bt+de+this.ctx.prevPageLastElemOffset)[0],Wt=qt&&(J>jt||J<rt)&&L.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Ge,null).clip().discardPath()),this.pdf.text(ct,dr.x,dr.y,{angle:j.angle,align:H,renderingMode:j.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else wt.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-wt.y);j.scale>=.01&&(this.pdf.setFontSize(et),this.lineWidth=Ve)}else j.scale>=.01&&(et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(et*j.scale),Ve=this.lineWidth,this.lineWidth=Ve*j.scale),this.pdf.text(j.text,we.x+this.posX,we.y+this.posY,{angle:j.angle,align:H,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(et),this.lineWidth=Ve)},R=function(j,H,Q,te){Q=Q||0,te=te||0,this.pdf.internal.out(t(j+Q)+" "+n(H+te)+" l")},V=function(j,H,Q){return this.pdf.lines(j,H,Q,null,null)},he=function(j,H,Q,te,ae,we,Fe,fe){this.pdf.internal.out([e(a(Q+j)),e(i(te+H)),e(a(ae+j)),e(i(we+H)),e(a(Fe+j)),e(i(fe+H)),"c"].join(" "))},$=function(j,H,Q,te){for(var ae=2*Math.PI,we=Math.PI/2;H>Q;)H-=ae;var Fe=Math.abs(Q-H);Fe<ae&&te&&(Fe=ae-Fe);for(var fe=[],Je=te?-1:1,et=H;Fe>1e-5;){var Ve=et+Je*Math.min(Fe,we);fe.push(Y.call(this,j,et,Ve)),Fe-=Math.abs(Ve-et),et=Ve}return fe},Y=function(j,H,Q){var te=(Q-H)/2,ae=j*Math.cos(te),we=j*Math.sin(te),Fe=ae,fe=-we,Je=Fe*Fe+fe*fe,et=Je+Fe*ae+fe*we,Ve=4/3*(Math.sqrt(2*Je*et)-et)/(Fe*we-fe*ae),lt=Fe-Ve*fe,Ft=fe+Ve*Fe,qe=lt,le=-Ft,Mt=te+H,jt=Math.cos(Mt),rt=Math.sin(Mt);return{x1:j*Math.cos(H),y1:j*Math.sin(H),x2:lt*jt-Ft*rt,y2:lt*rt+Ft*jt,x3:qe*jt-le*rt,y3:qe*rt+le*jt,x4:j*Math.cos(Q),y4:j*Math.sin(Q)}},ne=function(j){return 180*j/Math.PI},ie=function(j,H,Q,te,ae,we){var Fe=j+.5*(Q-j),fe=H+.5*(te-H),Je=ae+.5*(Q-ae),et=we+.5*(te-we),Ve=Math.min(j,ae,Fe,Je),lt=Math.max(j,ae,Fe,Je),Ft=Math.min(H,we,fe,et),qe=Math.max(H,we,fe,et);return new u(Ve,Ft,lt-Ve,qe-Ft)},ge=function(j,H,Q,te,ae,we,Fe,fe){var Je,et,Ve,lt,Ft,qe,le,Mt,jt,rt,J,de,xe,Be,Ge=Q-j,Ue=te-H,Xe=ae-Q,bt=we-te,Lt=Fe-ae,wt=fe-we;for(et=0;et<41;et++)jt=(le=(Ve=j+(Je=et/40)*Ge)+Je*((Ft=Q+Je*Xe)-Ve))+Je*(Ft+Je*(ae+Je*Lt-Ft)-le),rt=(Mt=(lt=H+Je*Ue)+Je*((qe=te+Je*bt)-lt))+Je*(qe+Je*(we+Je*wt-qe)-Mt),et==0?(J=jt,de=rt,xe=jt,Be=rt):(J=Math.min(J,jt),de=Math.min(de,rt),xe=Math.max(xe,jt),Be=Math.max(Be,rt));return new u(Math.round(J),Math.round(de),Math.round(xe-J),Math.round(Be-de))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,H,Q=(j=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:H}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Ot.API),function(r){var e=function(i){var c,u,h,y,x,b,w,m,P,L;for(u=[],h=0,y=(i+=c="\0\0\0\0".slice(i.length%4||4)).length;y>h;h+=4)(x=(i.charCodeAt(h)<<24)+(i.charCodeAt(h+1)<<16)+(i.charCodeAt(h+2)<<8)+i.charCodeAt(h+3))!==0?(b=(x=((x=((x=((x=(x-(L=x%85))/85)-(P=x%85))/85)-(m=x%85))/85)-(w=x%85))/85)%85,u.push(b+33,w+33,m+33,P+33,L+33)):u.push(122);return function(E,k){for(var A=k;A>0;A--)E.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},t=function(i){var c,u,h,y,x,b=String,w="length",m=255,P="charCodeAt",L="slice",E="replace";for(i[L](-2),i=i[L](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),h=[],y=0,x=(i+=c="uuuuu"[L](i[w]%5||5))[w];x>y;y+=5)u=52200625*(i[P](y)-33)+614125*(i[P](y+1)-33)+7225*(i[P](y+2)-33)+85*(i[P](y+3)-33)+(i[P](y+4)-33),h.push(m&u>>24,m&u>>16,m&u>>8,m&u);return function(k,A){for(var F=A;F>0;F--)k.pop()}(h,c[w]),b.fromCharCode.apply(b,h)},n=function(i){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),c.test(i)===!1)return"";for(var u="",h=0;h<i.length;h+=2)u+=String.fromCharCode("0x"+(i[h]+i[h+1]));return u},a=function(i){for(var c=new Uint8Array(i.length),u=i.length;u--;)c[u]=i.charCodeAt(u);return i=(c=hc(c)).reduce(function(h,y){return h+String.fromCharCode(y)},"")};r.processDataByFilters=function(i,c){var u=0,h=i||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":h=t(h),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=n(h),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=a(h),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:h,reverseChain:y.reverse().join(" ")}}}(Ot.API),function(r){r.loadFile=function(e,t,n){return function(a,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(h,y,x){var b=new XMLHttpRequest,w=0,m=function(P){var L=P.length,E=[],k=String.fromCharCode;for(w=0;w<L;w+=1)E.push(k(255&P.charCodeAt(w)));return E.join("")};if(b.open("GET",h,!y),b.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(b.onload=function(){b.status===200?x(m(this.responseText)):x(void 0)}),b.send(null),y&&b.status===200)return m(b.responseText)}(a,i,c)}catch{}return u}(e,t,n)},r.loadImageFile=r.loadFile}(Ot.API),function(r){function e(){return(Ut.html2canvas?Promise.resolve(Ut.html2canvas):cl(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(Ut.DOMPurify?Promise.resolve(Ut.DOMPurify):cl(()=>import("./purify.es-2de9db7f.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=br(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(c,u){var h=document.createElement(c);for(var y in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[y]=u.style[y];return h},i=function c(u){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),h);return y=(y=y.setProgress(1,c,1,[c])).set(u)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(c,u){return c.__proto__=u||i.prototype,c},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(t).then(function(h){return this.set({src:a("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},i.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(y,x){for(var b=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),w=y.firstChild;w;w=w.nextSibling)x!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||b.appendChild(h(w,x));return y.nodeType===1&&(y.nodeName==="CANVAS"?(b.width=y.width,b.height=y.height,b.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(b.value=y.value),b.addEventListener("load",function(){b.scrollTop=y.scrollTop,b.scrollLeft=y.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=this.opt.jsPDF,y=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=y,y)for(var w=0;w<y.length;++w){var m=y[w],P=m.src.find(function(L){return L.format==="truetype"});P&&h.addFont(P.url,m.ref.name,m.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,h.context2d.save(!0),u(this.prop.container,b)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(c,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},i.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},i.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},i.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(h){if(h in i.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(u)})},i.prototype.get=function(c,u){return this.then(function(){var h=c in i.template.prop?this.prop[c]:this.opt[c];return u?u(h):h})},i.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},i.prototype.setPageSize=function(c){function u(h,y){return Math.floor(h*y/72*96)}return this.then(function(){(c=c||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},i.prototype.setProgress=function(c,u,h,y){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(c,u,h,y){return this.setProgress(c?this.progress.val+c:null,u||null,h?this.progress.n+h:null,y?this.progress.stack.concat(y):null)},i.prototype.then=function(c,u){var h=this;return this.thenCore(c,u,function(y,x){return h.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(b){return h.updateProgress(null,y),b}).then(y,x).then(function(b){return h.updateProgress(1),b})})},i.prototype.thenCore=function(c,u,h){h=h||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),x=h.call(y,c,u);return i.convert(x,this.__proto__)},i.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},i.prototype.thenList=function(c){var u=this;return c.forEach(function(h){u=u.thenCore(h)}),u},i.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return i.convert(u,this)},i.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},i.prototype.error=function(c){return this.then(function(){throw new Error(c)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ot.getPageSize=function(c,u,h){if(br(c)==="object"){var y=c;c=y.orientation,u=y.unit||u,h=y.format||h}u=u||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var x,b=(""+h).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+u}var m,P=0,L=0;if(w.hasOwnProperty(b))P=w[b][1]/x,L=w[b][0]/x;else try{P=h[1],L=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",L>P&&(m=L,L=P,P=m);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>L&&(m=L,L=P,P=m)}return{width:L,height:P,unit:u,k:x,orientation:c}},r.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(vc):null;var h=new i(u);return u.worker?h:h.from(c).doCallback()}}(Ot.API),Ot.API.addJS=function(r){return Vu=r,this.internal.events.subscribe("postPutResources",function(){$o=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($o+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ku=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Vu+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$o!==void 0&&Ku!==void 0&&this.internal.out("/Names <</JavaScript "+$o+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),i=0;i<a.length;i++){var c=a[i],u=n.exec(c);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,x=[];for(i=0;i<y;i++){var b=t.internal.newObject();x.push(b);var w=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<x.length;i++)t.internal.write("(page_"+(i+1)+")"+x[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,a,i){var c={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var c=n.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var y=0;y<n.children.length;y++)this.renderItems(n.children[y])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Ot.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,a,i,c,u){var h,y=this.decode.DCT_DECODE,x=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(h=function(b){for(var w,m=256*b.charCodeAt(4)+b.charCodeAt(5),P=b.length,L={width:0,height:0,numcomponents:1},E=4;E<P;E+=2){if(E+=m,e.indexOf(b.charCodeAt(E+1))!==-1){w=256*b.charCodeAt(E+5)+b.charCodeAt(E+6),L={width:256*b.charCodeAt(E+7)+b.charCodeAt(E+8),height:w,numcomponents:b.charCodeAt(E+9)};break}m=256*b.charCodeAt(E+2)+b.charCodeAt(E+3)}return L}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}x={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:y,index:n,alias:a}}return x}}(Ot.API);var Bs,Yo,Gu,$u,Yu,Vm=function(){var r,e,t;function n(i){var c,u,h,y,x,b,w,m,P,L,E,k,A,F;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),P=(function(){var q,K;for(K=[],q=0;q<4;++q)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),y=this.readUInt16()||100,b.delay=1e3*x/y,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),i=(b!=null?b.data:void 0)||this.imgData,k=0;0<=c?k<c:k>c;0<=c?++k:--k)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((L=h-this.transparency.indexed.length)>0)for(A=0;0<=L?A<L:A>L;0<=L?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":w=(E=this.read(c)).indexOf(0),m=String.fromCharCode.apply(String,E.slice(0,w)),this.text[m]=String.fromCharCode.apply(String,E.slice(w+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var c,u;for(u=[],c=0;0<=i?c<i:c>i;0<=i?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),h=0,y=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function x(b,w,m,P){var L,E,k,A,F,q,K,X,M,T,Z,oe,C,N,R,V,he,$,Y,ne,ie,ge=Math.ceil((y.width-b)/m),Oe=Math.ceil((y.height-w)/P),j=y.width==ge&&y.height==Oe;for(N=c*ge,oe=j?u:new Uint8Array(N*Oe),q=i.length,C=0,E=0;C<Oe&&h<q;){switch(i[h++]){case 0:for(A=he=0;he<N;A=he+=1)oe[E++]=i[h++];break;case 1:for(A=$=0;$<N;A=$+=1)L=i[h++],F=A<c?0:oe[E-c],oe[E++]=(L+F)%256;break;case 2:for(A=Y=0;Y<N;A=Y+=1)L=i[h++],k=(A-A%c)/c,R=C&&oe[(C-1)*N+k*c+A%c],oe[E++]=(R+L)%256;break;case 3:for(A=ne=0;ne<N;A=ne+=1)L=i[h++],k=(A-A%c)/c,F=A<c?0:oe[E-c],R=C&&oe[(C-1)*N+k*c+A%c],oe[E++]=(L+Math.floor((F+R)/2))%256;break;case 4:for(A=ie=0;ie<N;A=ie+=1)L=i[h++],k=(A-A%c)/c,F=A<c?0:oe[E-c],C===0?R=V=0:(R=oe[(C-1)*N+k*c+A%c],V=k&&oe[(C-1)*N+(k-1)*c+A%c]),K=F+R-V,X=Math.abs(K-F),T=Math.abs(K-R),Z=Math.abs(K-V),M=X<=T&&X<=Z?F:T<=Z?R:V,oe[E++]=(L+M)%256;break;default:throw new Error("Invalid filter algorithm: "+i[h-1])}if(!j){var H=((w+C*P)*y.width+b)*c,Q=C*N;for(A=0;A<ge;A+=1){for(var te=0;te<c;te+=1)u[H++]=oe[Q++];H+=(m-1)*c}}C++}}return i=Sm(i),y.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),u},n.prototype.decodePalette=function(){var i,c,u,h,y,x,b,w,m;for(u=this.palette,x=this.transparency.indexed||[],y=new Uint8Array((x.length||0)+u.length),h=0,i=0,c=b=0,w=u.length;b<w;c=b+=3)y[h++]=u[c],y[h++]=u[c+1],y[h++]=u[c+2],y[h++]=(m=x[i++])!=null?m:255;return y},n.prototype.copyToImageData=function(i,c){var u,h,y,x,b,w,m,P,L,E,k;if(h=this.colors,L=null,u=this.hasAlphaChannel,this.palette.length&&(L=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),h=4,u=!0),P=(y=i.data||i).length,b=L||c,x=w=0,h===1)for(;x<P;)m=L?4*c[x/4]:w,E=b[m++],y[x++]=E,y[x++]=E,y[x++]=E,y[x++]=u?b[m++]:255,w=m;else for(;x<P;)m=L?4*c[x/4]:w,y[x++]=b[m++],y[x++]=b[m++],y[x++]=b[m++],y[x++]=u?b[m++]:255,w=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Ut)==="[object Window]"){try{e=Ut.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),r=function(i){var c;if(a()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var c,u,h,y,x,b,w,m;if(this.animation){for(m=[],u=x=0,b=(w=this.animation.frames).length;x<b;u=++x)c=w[u],h=i.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(h,y),c.imageData=h,m.push(c.image=r(h));return m}},n.prototype.renderFrame=function(i,c){var u,h,y;return u=(h=this.animation.frames)[c],y=h[c-1],c===0&&i.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?i.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&i.putImageData(y.imageData,y.xOffset,y.yOffset),u.blendOp===0&&i.clearRect(u.xOffset,u.yOffset,u.width,u.height),i.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(i){var c,u,h,y,x,b,w=this;return u=0,b=this.animation,y=b.numFrames,h=b.frames,x=b.numPlays,(c=function(){var m,P;if(m=u++%y,P=h[m],w.renderFrame(i,m),y>1&&u/y<x)return w.animation._timeout=setTimeout(c,P.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var c,u;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,c=i.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Gm(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,a=r[e++],i=a>>7,c=1<<(7&a)+1;r[e++],r[e++];var u=null,h=null;i&&(u=e,h=c,e+=3*c);var y=!0,x=[],b=0,w=null,m=0,P=null;for(this.width=t,this.height=n;y&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,P=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=r[e++];b=r[e++]|r[e++]<<8,w=r[e++],!(1&L)&&(w=null),m=L>>2&7,e++;break;case 254:for(;;){if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var E=r[e++]|r[e++]<<8,k=r[e++]|r[e++]<<8,A=r[e++]|r[e++]<<8,F=r[e++]|r[e++]<<8,q=r[e++],K=q>>6&1,X=1<<(7&q)+1,M=u,T=h,Z=!1;q>>7&&(Z=!0,M=e,T=X,e+=3*X);var oe=e;for(e++;;){var C;if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}x.push({x:E,y:k,width:A,height:F,has_local_palette:Z,palette_offset:M,palette_size:T,data_offset:oe,data_length:e-oe,transparent_index:w,interlaced:!!K,delay:b,disposal:m});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return P},this.frameInfo=function(N){if(N<0||N>=x.length)throw new Error("Frame index out of range.");return x[N]},this.decodeAndBlitFrameBGRA=function(N,R){var V=this.frameInfo(N),he=V.width*V.height,$=new Uint8Array(he);Qu(r,V.data_offset,$,he);var Y=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var ie=V.width,ge=t-ie,Oe=ie,j=4*(V.y*t+V.x),H=4*((V.y+V.height)*t+V.x),Q=j,te=4*ge;V.interlaced===!0&&(te+=4*t*7);for(var ae=8,we=0,Fe=$.length;we<Fe;++we){var fe=$[we];if(Oe===0&&(Oe=ie,(Q+=te)>=H&&(te=4*ge+4*t*(ae-1),Q=j+(ie+ge)*(ae<<1),ae>>=1)),fe===ne)Q+=4;else{var Je=r[Y+3*fe],et=r[Y+3*fe+1],Ve=r[Y+3*fe+2];R[Q++]=Ve,R[Q++]=et,R[Q++]=Je,R[Q++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(N,R){var V=this.frameInfo(N),he=V.width*V.height,$=new Uint8Array(he);Qu(r,V.data_offset,$,he);var Y=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var ie=V.width,ge=t-ie,Oe=ie,j=4*(V.y*t+V.x),H=4*((V.y+V.height)*t+V.x),Q=j,te=4*ge;V.interlaced===!0&&(te+=4*t*7);for(var ae=8,we=0,Fe=$.length;we<Fe;++we){var fe=$[we];if(Oe===0&&(Oe=ie,(Q+=te)>=H&&(te=4*ge+4*t*(ae-1),Q=j+(ie+ge)*(ae<<1),ae>>=1)),fe===ne)Q+=4;else{var Je=r[Y+3*fe],et=r[Y+3*fe+1],Ve=r[Y+3*fe+2];R[Q++]=Je,R[Q++]=et,R[Q++]=Ve,R[Q++]=255}--Oe}}}function Qu(r,e,t,n){for(var a=r[e++],i=1<<a,c=i+1,u=c+1,h=a+1,y=(1<<h)-1,x=0,b=0,w=0,m=r[e++],P=new Int32Array(4096),L=null;;){for(;x<16&&m!==0;)b|=r[e++]<<x,x+=8,m===1?m=r[e++]:--m;if(x<h)break;var E=b&y;if(b>>=h,x-=h,E!==i){if(E===c)break;for(var k=E<u?E:L,A=0,F=k;F>i;)F=P[F]>>8,++A;var q=F;if(w+A+(k!==E?1:0)>n)return void yr.log("Warning, gif stream longer than expected.");t[w++]=q;var K=w+=A;for(k!==E&&(t[w++]=q),F=k;A--;)F=P[F],t[--K]=255&F,F>>=8;L!==null&&u<4096&&(P[u++]=L<<8|q,u>=y+1&&h<12&&(++h,y=y<<1|1)),L=E}else u=c+1,y=(1<<(h=a+1))-1,L=null}return w!==n&&yr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jl(r){var e,t,n,a,i,c=Math.floor,u=new Array(64),h=new Array(64),y=new Array(64),x=new Array(64),b=new Array(65535),w=new Array(65535),m=new Array(64),P=new Array(64),L=[],E=0,k=7,A=new Array(64),F=new Array(64),q=new Array(64),K=new Array(256),X=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(j,H){for(var Q=0,te=0,ae=new Array,we=1;we<=16;we++){for(var Fe=1;Fe<=j[we];Fe++)ae[H[te]]=[],ae[H[te]][0]=Q,ae[H[te]][1]=we,te++,Q++;Q*=2}return ae}function Y(j){for(var H=j[0],Q=j[1]-1;Q>=0;)H&1<<Q&&(E|=1<<k),Q--,--k<0&&(E==255?(ne(255),ne(0)):ne(E),k=7,E=0)}function ne(j){L.push(j)}function ie(j){ne(j>>8&255),ne(255&j)}function ge(j,H,Q,te,ae){for(var we,Fe=ae[0],fe=ae[240],Je=function(rt,J){var de,xe,Be,Ge,Ue,Xe,bt,Lt,wt,qt,ct=0;for(wt=0;wt<8;++wt){de=rt[ct],xe=rt[ct+1],Be=rt[ct+2],Ge=rt[ct+3],Ue=rt[ct+4],Xe=rt[ct+5],bt=rt[ct+6];var dr=de+(Lt=rt[ct+7]),Wt=de-Lt,Or=xe+bt,Yt=xe-bt,ut=Be+Xe,zr=Be-Xe,Vt=Ge+Ue,gn=Ge-Ue,at=dr+Vt,un=dr-Vt,rn=Or+ut,lr=Or-ut;rt[ct]=at+rn,rt[ct+4]=at-rn;var Rt=.707106781*(lr+un);rt[ct+2]=un+Rt,rt[ct+6]=un-Rt;var tr=.382683433*((at=gn+zr)-(lr=Yt+Wt)),Xn=.5411961*at+tr,De=1.306562965*lr+tr,mt=.707106781*(rn=zr+Yt),Et=Wt+mt,xt=Wt-mt;rt[ct+5]=xt+Xn,rt[ct+3]=xt-Xn,rt[ct+1]=Et+De,rt[ct+7]=Et-De,ct+=8}for(ct=0,wt=0;wt<8;++wt){de=rt[ct],xe=rt[ct+8],Be=rt[ct+16],Ge=rt[ct+24],Ue=rt[ct+32],Xe=rt[ct+40],bt=rt[ct+48];var sr=de+(Lt=rt[ct+56]),Ht=de-Lt,Bt=xe+bt,mr=xe-bt,hr=Be+Xe,Hr=Be-Xe,si=Ge+Ue,oi=Ge-Ue,Wr=sr+si,nn=sr-si,Kr=Bt+hr,_n=Bt-hr;rt[ct]=Wr+Kr,rt[ct+32]=Wr-Kr;var Fn=.707106781*(_n+nn);rt[ct+16]=nn+Fn,rt[ct+48]=nn-Fn;var Yr=.382683433*((Wr=oi+Hr)-(_n=mr+Ht)),Pi=.5411961*Wr+Yr,Dn=1.306562965*_n+Yr,Vi=.707106781*(Kr=Hr+mr),ki=Ht+Vi,fr=Ht-Vi;rt[ct+40]=fr+Pi,rt[ct+24]=fr-Pi,rt[ct+8]=ki+Dn,rt[ct+56]=ki-Dn,ct++}for(wt=0;wt<64;++wt)qt=rt[wt]*J[wt],m[wt]=qt>0?qt+.5|0:qt-.5|0;return m}(j,H),et=0;et<64;++et)P[M[et]]=Je[et];var Ve=P[0]-Q;Q=P[0],Ve==0?Y(te[0]):(Y(te[w[we=32767+Ve]]),Y(b[we]));for(var lt=63;lt>0&&P[lt]==0;)lt--;if(lt==0)return Y(Fe),Q;for(var Ft,qe=1;qe<=lt;){for(var le=qe;P[qe]==0&&qe<=lt;)++qe;var Mt=qe-le;if(Mt>=16){Ft=Mt>>4;for(var jt=1;jt<=Ft;++jt)Y(fe);Mt&=15}we=32767+P[qe],Y(ae[(Mt<<4)+w[we]]),Y(b[we]),qe++}return lt!=63&&Y(Fe),Q}function Oe(j){j=Math.min(Math.max(j,1),100),i!=j&&(function(H){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=c((Q[te]*H+50)/100);ae=Math.min(Math.max(ae,1),255),u[M[te]]=ae}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Fe=0;Fe<64;Fe++){var fe=c((we[Fe]*H+50)/100);fe=Math.min(Math.max(fe,1),255),h[M[Fe]]=fe}for(var Je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],et=0,Ve=0;Ve<8;Ve++)for(var lt=0;lt<8;lt++)y[et]=1/(u[M[et]]*Je[Ve]*Je[lt]*8),x[et]=1/(h[M[et]]*Je[Ve]*Je[lt]*8),et++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),i=j)}this.encode=function(j,H){H&&Oe(H),L=new Array,E=0,k=7,ie(65496),ie(65504),ie(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ie(1),ie(1),ne(0),ne(0),function(){ie(65499),ie(132),ne(0);for(var xe=0;xe<64;xe++)ne(u[xe]);ne(1);for(var Be=0;Be<64;Be++)ne(h[Be])}(),function(xe,Be){ie(65472),ie(17),ne(8),ie(Be),ie(xe),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(j.width,j.height),function(){ie(65476),ie(418),ne(0);for(var xe=0;xe<16;xe++)ne(T[xe+1]);for(var Be=0;Be<=11;Be++)ne(Z[Be]);ne(16);for(var Ge=0;Ge<16;Ge++)ne(oe[Ge+1]);for(var Ue=0;Ue<=161;Ue++)ne(C[Ue]);ne(1);for(var Xe=0;Xe<16;Xe++)ne(N[Xe+1]);for(var bt=0;bt<=11;bt++)ne(R[bt]);ne(17);for(var Lt=0;Lt<16;Lt++)ne(V[Lt+1]);for(var wt=0;wt<=161;wt++)ne(he[wt])}(),ie(65498),ie(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var Q=0,te=0,ae=0;E=0,k=7,this.encode.displayName="_encode_";for(var we,Fe,fe,Je,et,Ve,lt,Ft,qe,le=j.data,Mt=j.width,jt=j.height,rt=4*Mt,J=0;J<jt;){for(we=0;we<rt;){for(et=rt*J+we,lt=-1,Ft=0,qe=0;qe<64;qe++)Ve=et+(Ft=qe>>3)*rt+(lt=4*(7&qe)),J+Ft>=jt&&(Ve-=rt*(J+1+Ft-jt)),we+lt>=rt&&(Ve-=we+lt-rt+4),Fe=le[Ve++],fe=le[Ve++],Je=le[Ve++],A[qe]=(X[Fe]+X[fe+256>>0]+X[Je+512>>0]>>16)-128,F[qe]=(X[Fe+768>>0]+X[fe+1024>>0]+X[Je+1280>>0]>>16)-128,q[qe]=(X[Fe+1280>>0]+X[fe+1536>>0]+X[Je+1792>>0]>>16)-128;Q=ge(A,y,Q,e,n),te=ge(F,x,te,t,a),ae=ge(q,x,ae,t,a),we+=32}J+=8}if(k>=0){var de=[];de[1]=k+1,de[0]=(1<<k+1)-1,Y(de)}return ie(65497),new Uint8Array(L)},r=r||50,function(){for(var j=String.fromCharCode,H=0;H<256;H++)K[H]=j(H)}(),e=$(T,Z),t=$(N,R),n=$(oe,C),a=$(V,he),function(){for(var j=1,H=2,Q=1;Q<=15;Q++){for(var te=j;te<H;te++)w[32767+te]=Q,b[32767+te]=[],b[32767+te][1]=Q,b[32767+te][0]=te;for(var ae=-(H-1);ae<=-j;ae++)w[32767+ae]=Q,b[32767+ae]=[],b[32767+ae][1]=Q,b[32767+ae][0]=H-1+ae;j<<=1,H<<=1}}(),function(){for(var j=0;j<256;j++)X[j]=19595*j,X[j+256>>0]=38470*j,X[j+512>>0]=7471*j+32768,X[j+768>>0]=-11059*j,X[j+1024>>0]=-21709*j,X[j+1280>>0]=32768*j+8421375,X[j+1536>>0]=-27439*j,X[j+1792>>0]=-5329*j}(),Oe(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wi(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ju(r){function e(T){if(!T)throw Error("assert :P")}function t(T,Z,oe){for(var C=0;4>C;C++)if(T[Z+C]!=oe.charCodeAt(C))return!0;return!1}function n(T,Z,oe,C,N){for(var R=0;R<N;R++)T[Z+R]=oe[C+R]}function a(T,Z,oe,C){for(var N=0;N<C;N++)T[Z+N]=oe}function i(T){return new Int32Array(T)}function c(T,Z){for(var oe=[],C=0;C<T;C++)oe.push(new Z);return oe}function u(T,Z){var oe=[];return function C(N,R,V){for(var he=V[R],$=0;$<he&&(N.push(V.length>R+1?[]:new Z),!(V.length<R+1));$++)C(N[$],R+1,V)}(oe,0,T),oe}var h=function(){var T=this;function Z(s,d){for(var g=1<<d-1>>>0;s&g;)g>>>=1;return g?(s&g-1)+g:s}function oe(s,d,g,S,O){e(!(S%g));do s[d+(S-=g)]=O;while(0<S)}function C(s,d,g,S,O){if(e(2328>=O),512>=O)var B=i(512);else if((B=i(O))==null)return 0;return function(z,W,G,re,ve,Ee){var Ie,Le,Qe=W,ze=1<<G,be=i(16),Ae=i(16);for(e(ve!=0),e(re!=null),e(z!=null),e(0<G),Le=0;Le<ve;++Le){if(15<re[Le])return 0;++be[re[Le]]}if(be[0]==ve)return 0;for(Ae[1]=0,Ie=1;15>Ie;++Ie){if(be[Ie]>1<<Ie)return 0;Ae[Ie+1]=Ae[Ie]+be[Ie]}for(Le=0;Le<ve;++Le)Ie=re[Le],0<re[Le]&&(Ee[Ae[Ie]++]=Le);if(Ae[15]==1)return(re=new N).g=0,re.value=Ee[0],oe(z,Qe,1,ze,re),ze;var $e,Ze=-1,Ye=ze-1,Nt=0,pt=1,Tt=1,yt=1<<G;for(Le=0,Ie=1,ve=2;Ie<=G;++Ie,ve<<=1){if(pt+=Tt<<=1,0>(Tt-=be[Ie]))return 0;for(;0<be[Ie];--be[Ie])(re=new N).g=Ie,re.value=Ee[Le++],oe(z,Qe+Nt,ve,yt,re),Nt=Z(Nt,Ie)}for(Ie=G+1,ve=2;15>=Ie;++Ie,ve<<=1){if(pt+=Tt<<=1,0>(Tt-=be[Ie]))return 0;for(;0<be[Ie];--be[Ie]){if(re=new N,(Nt&Ye)!=Ze){for(Qe+=yt,$e=1<<(Ze=Ie)-G;15>Ze&&!(0>=($e-=be[Ze]));)++Ze,$e<<=1;ze+=yt=1<<($e=Ze-G),z[W+(Ze=Nt&Ye)].g=$e+G,z[W+Ze].value=Qe-W-Ze}re.g=Ie-G,re.value=Ee[Le++],oe(z,Qe+(Nt>>G),ve,yt,re),Nt=Z(Nt,Ie)}}return pt!=2*Ae[15]-1?0:ze}(s,d,g,S,O,B)}function N(){this.value=this.g=0}function R(){this.value=this.g=0}function V(){this.G=c(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Xt,R)}function he(s,d,g,S){e(s!=null),e(d!=null),e(2147483648>S),s.Ca=254,s.I=0,s.b=-8,s.Ka=0,s.oa=d,s.pa=g,s.Jd=d,s.Yc=g+S,s.Zc=4<=S?g+S-4+1:g,we(s)}function $(s,d){for(var g=0;0<d--;)g|=fe(s,128)<<d;return g}function Y(s,d){var g=$(s,d);return Fe(s)?-g:g}function ne(s,d,g,S){var O,B=0;for(e(s!=null),e(d!=null),e(4294967288>S),s.Sb=S,s.Ra=0,s.u=0,s.h=0,4<S&&(S=4),O=0;O<S;++O)B+=d[g+O]<<8*O;s.Ra=B,s.bb=S,s.oa=d,s.pa=g}function ie(s){for(;8<=s.u&&s.bb<s.Sb;)s.Ra>>>=8,s.Ra+=s.oa[s.pa+s.bb]<<ka-8>>>0,++s.bb,s.u-=8;Q(s)&&(s.h=1,s.u=0)}function ge(s,d){if(e(0<=d),!s.h&&d<=Xr){var g=H(s)&mi[d];return s.u+=d,ie(s),g}return s.h=1,s.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(s){return s.Ra>>>(s.u&ka-1)>>>0}function Q(s){return e(s.bb<=s.Sb),s.h||s.bb==s.Sb&&s.u>ka}function te(s,d){s.u=d,s.h=Q(s)}function ae(s){s.u>=ca&&(e(s.u>=ca),ie(s))}function we(s){e(s!=null&&s.oa!=null),s.pa<s.Zc?(s.I=(s.oa[s.pa++]|s.I<<8)>>>0,s.b+=8):(e(s!=null&&s.oa!=null),s.pa<s.Yc?(s.b+=8,s.I=s.oa[s.pa++]|s.I<<8):s.Ka?s.b=0:(s.I<<=8,s.b+=8,s.Ka=1))}function Fe(s){return $(s,1)}function fe(s,d){var g=s.Ca;0>s.b&&we(s);var S=s.b,O=g*d>>>8,B=(s.I>>>S>O)+0;for(B?(g-=O,s.I-=O+1<<S>>>0):g=O+1,S=g,O=0;256<=S;)O+=8,S>>=8;return S=7^O+hn[S],s.b-=S,s.Ca=(g<<S)-1,B}function Je(s,d,g){s[d+0]=g>>24&255,s[d+1]=g>>16&255,s[d+2]=g>>8&255,s[d+3]=g>>0&255}function et(s,d){return s[d+0]<<0|s[d+1]<<8}function Ve(s,d){return et(s,d)|s[d+2]<<16}function lt(s,d){return et(s,d)|et(s,d+2)<<16}function Ft(s,d){var g=1<<d;return e(s!=null),e(0<d),s.X=i(g),s.X==null?0:(s.Mb=32-d,s.Xa=d,1)}function qe(s,d){e(s!=null),e(d!=null),e(s.Xa==d.Xa),n(d.X,0,s.X,0,1<<d.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function Mt(s,d,g,S){e(g!=null),e(S!=null);var O=g[0],B=S[0];return O==0&&(O=(s*B+d/2)/d),B==0&&(B=(d*O+s/2)/s),0>=O||0>=B?0:(g[0]=O,S[0]=B,1)}function jt(s,d){return s+(1<<d)-1>>>d}function rt(s,d){return((4278255360&s)+(4278255360&d)>>>0&4278255360)+((16711935&s)+(16711935&d)>>>0&16711935)>>>0}function J(s,d){T[d]=function(g,S,O,B,z,W,G){var re;for(re=0;re<z;++re){var ve=T[s](W[G+re-1],O,B+re);W[G+re]=rt(g[S+re],ve)}}}function de(){this.ud=this.hd=this.jd=0}function xe(s,d){return((4278124286&(s^d))>>>1)+(s&d)>>>0}function Be(s){return 0<=s&&256>s?s:0>s?0:255<s?255:void 0}function Ge(s,d){return Be(s+(s-d+.5>>1))}function Ue(s,d,g){return Math.abs(d-g)-Math.abs(s-g)}function Xe(s,d,g,S,O,B,z){for(S=B[z-1],g=0;g<O;++g)B[z+g]=S=rt(s[d+g],S)}function bt(s,d,g,S,O){var B;for(B=0;B<g;++B){var z=s[d+B],W=z>>8&255,G=16711935&(G=(G=16711935&z)+((W<<16)+W));S[O+B]=(4278255360&z)+G>>>0}}function Lt(s,d){d.jd=s>>0&255,d.hd=s>>8&255,d.ud=s>>16&255}function wt(s,d,g,S,O,B){var z;for(z=0;z<S;++z){var W=d[g+z],G=W>>>8,re=W,ve=255&(ve=(ve=W>>>16)+((s.jd<<24>>24)*(G<<24>>24)>>>5));re=255&(re=(re=re+((s.hd<<24>>24)*(G<<24>>24)>>>5))+((s.ud<<24>>24)*(ve<<24>>24)>>>5)),O[B+z]=(4278255360&W)+(ve<<16)+re}}function qt(s,d,g,S,O){T[d]=function(B,z,W,G,re,ve,Ee,Ie,Le){for(G=Ee;G<Ie;++G)for(Ee=0;Ee<Le;++Ee)re[ve++]=O(W[S(B[z++])])},T[s]=function(B,z,W,G,re,ve,Ee){var Ie=8>>B.b,Le=B.Ea,Qe=B.K[0],ze=B.w;if(8>Ie)for(B=(1<<B.b)-1,ze=(1<<Ie)-1;z<W;++z){var be,Ae=0;for(be=0;be<Le;++be)be&B||(Ae=S(G[re++])),ve[Ee++]=O(Qe[Ae&ze]),Ae>>=Ie}else T["VP8LMapColor"+g](G,re,Qe,ze,ve,Ee,z,W,Le)}}function ct(s,d,g,S,O){for(g=d+g;d<g;){var B=s[d++];S[O++]=B>>16&255,S[O++]=B>>8&255,S[O++]=B>>0&255}}function dr(s,d,g,S,O){for(g=d+g;d<g;){var B=s[d++];S[O++]=B>>16&255,S[O++]=B>>8&255,S[O++]=B>>0&255,S[O++]=B>>24&255}}function Wt(s,d,g,S,O){for(g=d+g;d<g;){var B=(z=s[d++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;S[O++]=B,S[O++]=z}}function Or(s,d,g,S,O){for(g=d+g;d<g;){var B=(z=s[d++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;S[O++]=B,S[O++]=z}}function Yt(s,d,g,S,O){for(g=d+g;d<g;){var B=s[d++];S[O++]=B>>0&255,S[O++]=B>>8&255,S[O++]=B>>16&255}}function ut(s,d,g,S,O,B){if(B==0)for(g=d+g;d<g;)Je(S,((B=s[d++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),O+=32;else n(S,O,s,d,g)}function zr(s,d){T[d][0]=T[s+"0"],T[d][1]=T[s+"1"],T[d][2]=T[s+"2"],T[d][3]=T[s+"3"],T[d][4]=T[s+"4"],T[d][5]=T[s+"5"],T[d][6]=T[s+"6"],T[d][7]=T[s+"7"],T[d][8]=T[s+"8"],T[d][9]=T[s+"9"],T[d][10]=T[s+"10"],T[d][11]=T[s+"11"],T[d][12]=T[s+"12"],T[d][13]=T[s+"13"],T[d][14]=T[s+"0"],T[d][15]=T[s+"0"]}function Vt(s){return s==wl||s==Nl||s==Fo||s==Sl}function gn(){this.eb=[],this.size=this.A=this.fb=0}function at(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function un(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gn,this.f.kb=new at,this.sd=null}function rn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rt(s){return alert("todo:WebPSamplerProcessPlane"),s.T}function tr(s,d){var g=s.T,S=d.ba.f.RGBA,O=S.eb,B=S.fb+s.ka*S.A,z=ii[d.ba.S],W=s.y,G=s.O,re=s.f,ve=s.N,Ee=s.ea,Ie=s.W,Le=d.cc,Qe=d.dc,ze=d.Mc,be=d.Nc,Ae=s.ka,$e=s.ka+s.T,Ze=s.U,Ye=Ze+1>>1;for(Ae==0?z(W,G,null,null,re,ve,Ee,Ie,re,ve,Ee,Ie,O,B,null,null,Ze):(z(d.ec,d.fc,W,G,Le,Qe,ze,be,re,ve,Ee,Ie,O,B-S.A,O,B,Ze),++g);Ae+2<$e;Ae+=2)Le=re,Qe=ve,ze=Ee,be=Ie,ve+=s.Rc,Ie+=s.Rc,B+=2*S.A,z(W,(G+=2*s.fa)-s.fa,W,G,Le,Qe,ze,be,re,ve,Ee,Ie,O,B-S.A,O,B,Ze);return G+=s.fa,s.j+$e<s.o?(n(d.ec,d.fc,W,G,Ze),n(d.cc,d.dc,re,ve,Ye),n(d.Mc,d.Nc,Ee,Ie,Ye),g--):1&$e||z(W,G,null,null,re,ve,Ee,Ie,re,ve,Ee,Ie,O,B+S.A,null,null,Ze),g}function Xn(s,d,g){var S=s.F,O=[s.J];if(S!=null){var B=s.U,z=d.ba.S,W=z==Co||z==Fo;d=d.ba.f.RGBA;var G=[0],re=s.ka;G[0]=s.T,s.Kb&&(re==0?--G[0]:(--re,O[0]-=s.width),s.j+s.ka+s.T==s.o&&(G[0]=s.o-s.j-re));var ve=d.eb;re=d.fb+re*d.A,s=At(S,O[0],s.width,B,G,ve,re+(W?0:3),d.A),e(g==G),s&&Vt(z)&&ft(ve,re,W,B,G,d.A)}return 0}function De(s){var d=s.ma,g=d.ba.S,S=11>g,O=g==Po||g==ko||g==Co||g==xl||g==12||Vt(g);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!cs(d.Oa,s,O?11:12))return 0;if(O&&Vt(g)&&tt(),s.da)alert("todo:use_scaling");else{if(S){if(d.Ib=Rt,s.Kb){if(g=s.U+1>>1,d.memory=i(s.U+2*g),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+s.U,d.Mc=d.cc,d.Nc=d.dc+g,d.Ib=tr,tt()}}else alert("todo:EmitYUV");O&&(d.Jb=Xn,S&&Ce())}if(S&&!Uc){for(s=0;256>s;++s)xh[s]=89858*(s-128)+Eo>>Do,Sh[s]=-22014*(s-128)+Eo,Nh[s]=-45773*(s-128),wh[s]=113618*(s-128)+Eo>>Do;for(s=Zs;s<_l;++s)d=76283*(s-16)+Eo>>Do,jh[s-Zs]=vn(d,255),Ah[s-Zs]=vn(d+8>>4,15);Uc=1}return 1}function mt(s){var d=s.ma,g=s.U,S=s.T;return e(!(1&s.ka)),0>=g||0>=S?0:(g=d.Ib(s,d),d.Jb!=null&&d.Jb(s,d,g),d.Dc+=g,1)}function Et(s){s.ma.memory=null}function xt(s,d,g,S){return ge(s,8)!=47?0:(d[0]=ge(s,14)+1,g[0]=ge(s,14)+1,S[0]=ge(s,1),ge(s,3)!=0?0:!s.h)}function sr(s,d){if(4>s)return s+1;var g=s-2>>1;return(2+(1&s)<<g)+ge(d,g)+1}function Ht(s,d){return 120<d?d-120:1<=(g=((g=sh[d-1])>>4)*s+(8-(15&g)))?g:1;var g}function Bt(s,d,g){var S=H(g),O=s[d+=255&S].g-8;return 0<O&&(te(g,g.u+8),S=H(g),d+=s[d].value,d+=S&(1<<O)-1),te(g,g.u+s[d].g),s[d].value}function mr(s,d,g){return g.g+=s.g,g.value+=s.value<<d>>>0,e(8>=g.g),s.g}function hr(s,d,g){var S=s.xc;return e((d=S==0?0:s.vc[s.md*(g>>S)+(d>>S)])<s.Wb),s.Ya[d]}function Hr(s,d,g,S){var O=s.ab,B=s.c*d,z=s.C;d=z+d;var W=g,G=S;for(S=s.Ta,g=s.Ua;0<O--;){var re=s.gc[O],ve=z,Ee=d,Ie=W,Le=G,Qe=(G=S,W=g,re.Ea);switch(e(ve<Ee),e(Ee<=re.nc),re.hc){case 2:yi(Ie,Le,(Ee-ve)*Qe,G,W);break;case 0:var ze=ve,be=Ee,Ae=G,$e=W,Ze=(yt=re).Ea;ze==0&&(gi(Ie,Le,null,null,1,Ae,$e),Xe(Ie,Le+1,0,0,Ze-1,Ae,$e+1),Le+=Ze,$e+=Ze,++ze);for(var Ye=1<<yt.b,Nt=Ye-1,pt=jt(Ze,yt.b),Tt=yt.K,yt=yt.w+(ze>>yt.b)*pt;ze<be;){var ar=Tt,cr=yt,ir=1;for(ua(Ie,Le,Ae,$e-Ze,1,Ae,$e);ir<Ze;){var rr=(ir&~Nt)+Ye;rr>Ze&&(rr=Ze),(0,v[ar[cr++]>>8&15])(Ie,Le+ +ir,Ae,$e+ir-Ze,rr-ir,Ae,$e+ir),ir=rr}Le+=Ze,$e+=Ze,++ze&Nt||(yt+=pt)}Ee!=re.nc&&n(G,W-Qe,G,W+(Ee-ve-1)*Qe,Qe);break;case 1:for(Qe=Ie,be=Le,Ze=(Ie=re.Ea)-($e=Ie&~(Ae=(Le=1<<re.b)-1)),ze=jt(Ie,re.b),Ye=re.K,re=re.w+(ve>>re.b)*ze;ve<Ee;){for(Nt=Ye,pt=re,Tt=new de,yt=be+$e,ar=be+Ie;be<yt;)Lt(Nt[pt++],Tt),_(Tt,Qe,be,Le,G,W),be+=Le,W+=Le;be<ar&&(Lt(Nt[pt++],Tt),_(Tt,Qe,be,Ze,G,W),be+=Ze,W+=Ze),++ve&Ae||(re+=ze)}break;case 3:if(Ie==G&&Le==W&&0<re.b){for(be=G,Ie=Qe=W+(Ee-ve)*Qe-($e=(Ee-ve)*jt(re.Ea,re.b)),Le=G,Ae=W,ze=[],$e=(Ze=$e)-1;0<=$e;--$e)ze[$e]=Le[Ae+$e];for($e=Ze-1;0<=$e;--$e)be[Ie+$e]=ze[$e];Mr(re,ve,Ee,G,Qe,G,W)}else Mr(re,ve,Ee,Ie,Le,G,W)}W=S,G=g}G!=g&&n(S,g,W,G,B)}function si(s,d){var g=s.V,S=s.Ba+s.c*s.C,O=d-s.C;if(e(d<=s.l.o),e(16>=O),0<O){var B=s.l,z=s.Ta,W=s.Ua,G=B.width;if(Hr(s,O,g,S),O=W=[W],e((g=s.C)<(S=d)),e(B.v<B.va),S>B.o&&(S=B.o),g<B.j){var re=B.j-g;g=B.j,O[0]+=re*G}if(g>=S?g=0:(O[0]+=4*B.v,B.ka=g-B.j,B.U=B.va-B.v,B.T=S-g,g=1),g){if(W=W[0],11>(g=s.ca).S){var ve=g.f.RGBA,Ee=(S=g.S,O=B.U,B=B.T,re=ve.eb,ve.A),Ie=B;for(ve=ve.fb+s.Ma*ve.A;0<Ie--;){var Le=z,Qe=W,ze=O,be=re,Ae=ve;switch(S){case Lo:D(Le,Qe,ze,be,Ae);break;case Po:U(Le,Qe,ze,be,Ae);break;case wl:U(Le,Qe,ze,be,Ae),ft(be,Ae,0,ze,1,0);break;case Fc:ye(Le,Qe,ze,be,Ae);break;case ko:ut(Le,Qe,ze,be,Ae,1);break;case Nl:ut(Le,Qe,ze,be,Ae,1),ft(be,Ae,0,ze,1,0);break;case Co:ut(Le,Qe,ze,be,Ae,0);break;case Fo:ut(Le,Qe,ze,be,Ae,0),ft(be,Ae,1,ze,1,0);break;case xl:ee(Le,Qe,ze,be,Ae);break;case Sl:ee(Le,Qe,ze,be,Ae),St(be,Ae,ze,1,0);break;case Dc:ce(Le,Qe,ze,be,Ae);break;default:e(0)}W+=G,ve+=Ee}s.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(s.Ma<=g.height)}}s.C=d,e(s.C<=s.i)}function oi(s){var d;if(0<s.ua)return 0;for(d=0;d<s.Wb;++d){var g=s.Ya[d].G,S=s.Ya[d].H;if(0<g[1][S[1]+0].g||0<g[2][S[2]+0].g||0<g[3][S[3]+0].g)return 0}return 1}function Wr(s,d,g,S,O,B){if(s.Z!=0){var z=s.qd,W=s.rd;for(e(Fa[s.Z]!=null);d<g;++d)Fa[s.Z](z,W,S,O,S,O,B),z=S,W=O,O+=B;s.qd=z,s.rd=W}}function nn(s,d){var g=s.l.ma,S=g.Z==0||g.Z==1?s.l.j:s.C;if(S=s.C<S?S:s.C,e(d<=s.l.o),d>S){var O=s.l.width,B=g.ca,z=g.tb+O*S,W=s.V,G=s.Ba+s.c*S,re=s.gc;e(s.ab==1),e(re[0].hc==3),l(re[0],S,d,W,G,B,z),Wr(g,S,d,B,z,O)}s.C=s.Ma=d}function Kr(s,d,g,S,O,B,z){var W=s.$/S,G=s.$%S,re=s.m,ve=s.s,Ee=g+s.$,Ie=Ee;O=g+S*O;var Le=g+S*B,Qe=280+ve.ua,ze=s.Pb?W:16777216,be=0<ve.ua?ve.Wa:null,Ae=ve.wc,$e=Ee<Le?hr(ve,G,W):null;e(s.C<B),e(Le<=O);var Ze=!1;e:for(;;){for(;Ze||Ee<Le;){var Ye=0;if(W>=ze){var Nt=Ee-g;e((ze=s).Pb),ze.wd=ze.m,ze.xd=Nt,0<ze.s.ua&&qe(ze.s.Wa,ze.s.vb),ze=W+lh}if(G&Ae||($e=hr(ve,G,W)),e($e!=null),$e.Qb&&(d[Ee]=$e.qb,Ze=!0),!Ze)if(ae(re),$e.jc){Ye=re,Nt=d;var pt=Ee,Tt=$e.pd[H(Ye)&Xt-1];e($e.jc),256>Tt.g?(te(Ye,Ye.u+Tt.g),Nt[pt]=Tt.value,Ye=0):(te(Ye,Ye.u+Tt.g-256),e(256<=Tt.value),Ye=Tt.value),Ye==0&&(Ze=!0)}else Ye=Bt($e.G[0],$e.H[0],re);if(re.h)break;if(Ze||256>Ye){if(!Ze)if($e.nd)d[Ee]=($e.qb|Ye<<8)>>>0;else{if(ae(re),Ze=Bt($e.G[1],$e.H[1],re),ae(re),Nt=Bt($e.G[2],$e.H[2],re),pt=Bt($e.G[3],$e.H[3],re),re.h)break;d[Ee]=(pt<<24|Ze<<16|Ye<<8|Nt)>>>0}if(Ze=!1,++Ee,++G>=S&&(G=0,++W,z!=null&&W<=B&&!(W%16)&&z(s,W),be!=null))for(;Ie<Ee;)Ye=d[Ie++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye}else if(280>Ye){if(Ye=sr(Ye-256,re),Nt=Bt($e.G[4],$e.H[4],re),ae(re),Nt=Ht(S,Nt=sr(Nt,re)),re.h)break;if(Ee-g<Nt||O-Ee<Ye)break e;for(pt=0;pt<Ye;++pt)d[Ee+pt]=d[Ee+pt-Nt];for(Ee+=Ye,G+=Ye;G>=S;)G-=S,++W,z!=null&&W<=B&&!(W%16)&&z(s,W);if(e(Ee<=O),G&Ae&&($e=hr(ve,G,W)),be!=null)for(;Ie<Ee;)Ye=d[Ie++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye}else{if(!(Ye<Qe))break e;for(Ze=Ye-280,e(be!=null);Ie<Ee;)Ye=d[Ie++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye;Ye=Ee,e(!(Ze>>>(Nt=be).Xa)),d[Ye]=Nt.X[Ze],Ze=!0}Ze||e(re.h==Q(re))}if(s.Pb&&re.h&&Ee<O)e(s.m.h),s.a=5,s.m=s.wd,s.$=s.xd,0<s.s.ua&&qe(s.s.vb,s.s.Wa);else{if(re.h)break e;z!=null&&z(s,W>B?B:W),s.a=0,s.$=Ee-g}return 1}return s.a=3,0}function _n(s){e(s!=null),s.vc=null,s.yc=null,s.Ya=null;var d=s.Wa;d!=null&&(d.X=null),s.vb=null,e(s!=null)}function Fn(){var s=new Es;return s==null?null:(s.a=0,s.xb=Oc,zr("Predictor","VP8LPredictors"),zr("Predictor","VP8LPredictors_C"),zr("PredictorAdd","VP8LPredictorsAdd"),zr("PredictorAdd","VP8LPredictorsAdd_C"),yi=bt,_=wt,D=ct,U=dr,ee=Wt,ce=Or,ye=Yt,T.VP8LMapColor32b=da,T.VP8LMapColor8b=f,s)}function Yr(s,d,g,S,O){var B=1,z=[s],W=[d],G=S.m,re=S.s,ve=null,Ee=0;e:for(;;){if(g)for(;B&&ge(G,1);){var Ie=z,Le=W,Qe=S,ze=1,be=Qe.m,Ae=Qe.gc[Qe.ab],$e=ge(be,2);if(Qe.Oc&1<<$e)B=0;else{switch(Qe.Oc|=1<<$e,Ae.hc=$e,Ae.Ea=Ie[0],Ae.nc=Le[0],Ae.K=[null],++Qe.ab,e(4>=Qe.ab),$e){case 0:case 1:Ae.b=ge(be,3)+2,ze=Yr(jt(Ae.Ea,Ae.b),jt(Ae.nc,Ae.b),0,Qe,Ae.K),Ae.K=Ae.K[0];break;case 3:var Ze,Ye=ge(be,8)+1,Nt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Ie[0]=jt(Ae.Ea,Nt),Ae.b=Nt,Ze=ze=Yr(Ye,1,0,Qe,Ae.K)){var pt,Tt=Ye,yt=Ae,ar=1<<(8>>yt.b),cr=i(ar);if(cr==null)Ze=0;else{var ir=yt.K[0],rr=yt.w;for(cr[0]=yt.K[0][0],pt=1;pt<1*Tt;++pt)cr[pt]=rt(ir[rr+pt],cr[pt-1]);for(;pt<4*ar;++pt)cr[pt]=0;yt.K[0]=null,yt.K[0]=cr,Ze=1}}ze=Ze;break;case 2:break;default:e(0)}B=ze}}if(z=z[0],W=W[0],B&&ge(G,1)&&!(B=1<=(Ee=ge(G,4))&&11>=Ee)){S.a=3;break e}var gr;if(gr=B)t:{var pr,$t,Vr,On=S,Gr=z,Tn=W,ur=Ee,Yn=g,Qn=On.m,on=On.s,pn=[null],Ln=1,ai=0,qi=oh[ur];r:for(;;){if(Yn&&ge(Qn,1)){var ln=ge(Qn,3)+2,pa=jt(Gr,ln),us=jt(Tn,ln),Is=pa*us;if(!Yr(pa,us,0,On,pn))break r;for(pn=pn[0],on.xc=ln,pr=0;pr<Is;++pr){var Da=pn[pr]>>8&65535;pn[pr]=Da,Da>=Ln&&(Ln=Da+1)}}if(Qn.h)break r;for($t=0;5>$t;++$t){var Er=Ec[$t];!$t&&0<ur&&(Er+=1<<ur),ai<Er&&(ai=Er)}var Ll=c(Ln*qi,N),Wc=Ln,Kc=c(Wc,V);if(Kc==null)var Oo=null;else e(65536>=Wc),Oo=Kc;var eo=i(ai);if(Oo==null||eo==null||Ll==null){On.a=1;break r}var To=Ll;for(pr=Vr=0;pr<Ln;++pr){var bi=Oo[pr],Os=bi.G,Ts=bi.H,Vc=0,Mo=1,Gc=0;for($t=0;5>$t;++$t){Er=Ec[$t],Os[$t]=To,Ts[$t]=Vr,!$t&&0<ur&&(Er+=1<<ur);i:{var Ro,Pl=Er,qo=On,to=eo,Ph=To,kh=Vr,kl=0,Ea=qo.m,Ch=ge(Ea,1);if(a(to,0,0,Pl),Ch){var Fh=ge(Ea,1)+1,Dh=ge(Ea,1),$c=ge(Ea,Dh==0?1:8);to[$c]=1,Fh==2&&(to[$c=ge(Ea,8)]=1);var Bo=1}else{var Yc=i(19),Qc=ge(Ea,4)+4;if(19<Qc){qo.a=3;var Uo=0;break i}for(Ro=0;Ro<Qc;++Ro)Yc[ah[Ro]]=ge(Ea,3);var Cl=void 0,ro=void 0,Jc=qo,Eh=Yc,zo=Pl,Xc=to,Fl=0,Ia=Jc.m,Zc=8,eu=c(128,N);n:for(;C(eu,0,7,Eh,19);){if(ge(Ia,1)){var Ih=2+2*ge(Ia,3);if((Cl=2+ge(Ia,Ih))>zo)break n}else Cl=zo;for(ro=0;ro<zo&&Cl--;){ae(Ia);var tu=eu[0+(127&H(Ia))];te(Ia,Ia.u+tu.g);var Ms=tu.value;if(16>Ms)Xc[ro++]=Ms,Ms!=0&&(Zc=Ms);else{var Oh=Ms==16,ru=Ms-16,Th=nh[ru],nu=ge(Ia,rh[ru])+Th;if(ro+nu>zo)break n;for(var Mh=Oh?Zc:0;0<nu--;)Xc[ro++]=Mh}}Fl=1;break n}Fl||(Jc.a=3),Bo=Fl}(Bo=Bo&&!Ea.h)&&(kl=C(Ph,kh,8,to,Pl)),Bo&&kl!=0?Uo=kl:(qo.a=3,Uo=0)}if(Uo==0)break r;if(Mo&&ih[$t]==1&&(Mo=To[Vr].g==0),Vc+=To[Vr].g,Vr+=Uo,3>=$t){var no,Dl=eo[0];for(no=1;no<Er;++no)eo[no]>Dl&&(Dl=eo[no]);Gc+=Dl}}if(bi.nd=Mo,bi.Qb=0,Mo&&(bi.qb=(Os[3][Ts[3]+0].value<<24|Os[1][Ts[1]+0].value<<16|Os[2][Ts[2]+0].value)>>>0,Vc==0&&256>Os[0][Ts[0]+0].value&&(bi.Qb=1,bi.qb+=Os[0][Ts[0]+0].value<<8)),bi.jc=!bi.Qb&&6>Gc,bi.jc){var Ho,ma=bi;for(Ho=0;Ho<Xt;++Ho){var Oa=Ho,Ta=ma.pd[Oa],Wo=ma.G[0][ma.H[0]+Oa];256<=Wo.value?(Ta.g=Wo.g+256,Ta.value=Wo.value):(Ta.g=0,Ta.value=0,Oa>>=mr(Wo,8,Ta),Oa>>=mr(ma.G[1][ma.H[1]+Oa],16,Ta),Oa>>=mr(ma.G[2][ma.H[2]+Oa],0,Ta),mr(ma.G[3][ma.H[3]+Oa],24,Ta))}}}on.vc=pn,on.Wb=Ln,on.Ya=Oo,on.yc=Ll,gr=1;break t}gr=0}if(!(B=gr)){S.a=3;break e}if(0<Ee){if(re.ua=1<<Ee,!Ft(re.Wa,Ee)){S.a=1,B=0;break e}}else re.ua=0;var El=S,iu=z,Rh=W,Il=El.s,Ol=Il.xc;if(El.c=iu,El.i=Rh,Il.md=jt(iu,Ol),Il.wc=Ol==0?-1:(1<<Ol)-1,g){S.xb=mh;break e}if((ve=i(z*W))==null){S.a=1,B=0;break e}B=(B=Kr(S,ve,0,z,W,W,null))&&!G.h;break e}return B?(O!=null?O[0]=ve:(e(ve==null),e(g)),S.$=0,g||_n(re)):_n(re),B}function Pi(s,d){var g=s.c*s.i,S=g+d+16*d;return e(s.c<=d),s.V=i(S),s.V==null?(s.Ta=null,s.Ua=0,s.a=1,0):(s.Ta=s.V,s.Ua=s.Ba+g+d,1)}function Dn(s,d){var g=s.C,S=d-g,O=s.V,B=s.Ba+s.c*g;for(e(d<=s.l.o);0<S;){var z=16<S?16:S,W=s.l.ma,G=s.l.width,re=G*z,ve=W.ca,Ee=W.tb+G*g,Ie=s.Ta,Le=s.Ua;Hr(s,z,O,B),Ct(Ie,Le,ve,Ee,re),Wr(W,g,g+z,ve,Ee,G),S-=z,O+=z*s.c,g+=z}e(g==d),s.C=s.Ma=d}function Vi(){this.ub=this.yd=this.td=this.Rb=0}function ki(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Zn(){this.Yb=function(){var s=[];return function d(g,S,O){for(var B=O[S],z=0;z<B&&(g.push(O.length>S+1?[]:0),!(O.length<S+1));z++)d(g[z],S+1,O)}(s,0,[3,11]),s}()}function Un(){this.jb=i(3),this.Wc=u([4,8],Zn),this.Xc=u([4,17],Zn)}function _s(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function zn(){this.ld=this.La=this.dd=this.tc=0}function Gi(){this.Na=this.la=0}function Qa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $i(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function li(){this.uc=this.M=this.Nb=0,this.wa=Array(new zn),this.Y=0,this.ya=Array(new $i),this.aa=0,this.l=new Yi}function Ja(){this.y=i(16),this.f=i(8),this.ea=i(8)}function xa(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new Vi,this.Kc=new ki,this.ed=new _s,this.Qa=new fr,this.Ic=this.$c=this.Aa=0,this.D=new li,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Oe),this.ia=0,this.pb=c(4,Qa),this.Pa=new Un,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ja),this.Hd=0,this.rb=Array(new Gi),this.sb=0,this.wa=Array(new zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $i),this.L=this.aa=0,this.gd=u([4,2],zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jt(){var s=new xa;return s!=null&&(s.a=0,s.sc="OK",s.cb=0,s.Xb=0,Xs||(Xs=or)),s}function Ar(s,d,g){return s.a==0&&(s.a=d,s.sc=g,s.cb=0),0}function Xa(s,d,g){return 3<=g&&s[d+0]==157&&s[d+1]==1&&s[d+2]==42}function Za(s,d){if(s==null)return 0;if(s.a=0,s.sc="OK",d==null)return Ar(s,2,"null VP8Io passed to VP8GetHeaders()");var g=d.data,S=d.w,O=d.ha;if(4>O)return Ar(s,7,"Truncated header.");var B=g[S+0]|g[S+1]<<8|g[S+2]<<16,z=s.Od;if(z.Rb=!(1&B),z.td=B>>1&7,z.yd=B>>4&1,z.ub=B>>5,3<z.td)return Ar(s,3,"Incorrect keyframe parameters.");if(!z.yd)return Ar(s,4,"Frame not displayable.");S+=3,O-=3;var W=s.Kc;if(z.Rb){if(7>O)return Ar(s,7,"cannot parse picture header");if(!Xa(g,S,O))return Ar(s,3,"Bad code word");W.c=16383&(g[S+4]<<8|g[S+3]),W.Td=g[S+4]>>6,W.i=16383&(g[S+6]<<8|g[S+5]),W.Ud=g[S+6]>>6,S+=7,O-=7,s.za=W.c+15>>4,s.Ub=W.i+15>>4,d.width=W.c,d.height=W.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,a((B=s.Pa).jb,0,255,B.jb.length),e((B=s.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,a(B.Zb,0,0,B.Zb.length),a(B.Lb,0,0,B.Lb)}if(z.ub>O)return Ar(s,7,"bad partition length");he(B=s.m,g,S,z.ub),S+=z.ub,O-=z.ub,z.Rb&&(W.Ld=Fe(B),W.Kd=Fe(B)),W=s.Qa;var G,re=s.Pa;if(e(B!=null),e(W!=null),W.Cb=Fe(B),W.Cb){if(W.Bb=Fe(B),Fe(B)){for(W.Fb=Fe(B),G=0;4>G;++G)W.Zb[G]=Fe(B)?Y(B,7):0;for(G=0;4>G;++G)W.Lb[G]=Fe(B)?Y(B,6):0}if(W.Bb)for(G=0;3>G;++G)re.jb[G]=Fe(B)?$(B,8):255}else W.Bb=0;if(B.Ka)return Ar(s,3,"cannot parse segment header");if((W=s.ed).zd=Fe(B),W.Tb=$(B,6),W.wb=$(B,3),W.Pc=Fe(B),W.Pc&&Fe(B)){for(re=0;4>re;++re)Fe(B)&&(W.vd[re]=Y(B,6));for(re=0;4>re;++re)Fe(B)&&(W.od[re]=Y(B,6))}if(s.L=W.Tb==0?0:W.zd?1:2,B.Ka)return Ar(s,3,"cannot parse filter header");var ve=O;if(O=G=S,S=G+ve,W=ve,s.Xb=(1<<$(s.m,2))-1,ve<3*(re=s.Xb))g=7;else{for(G+=3*re,W-=3*re,ve=0;ve<re;++ve){var Ee=g[O+0]|g[O+1]<<8|g[O+2]<<16;Ee>W&&(Ee=W),he(s.Jc[+ve],g,G,Ee),G+=Ee,W-=Ee,O+=3}he(s.Jc[+re],g,G,W),g=G<S?0:5}if(g!=0)return Ar(s,g,"cannot parse partitions");for(g=$(G=s.m,7),O=Fe(G)?Y(G,4):0,S=Fe(G)?Y(G,4):0,W=Fe(G)?Y(G,4):0,re=Fe(G)?Y(G,4):0,G=Fe(G)?Y(G,4):0,ve=s.Qa,Ee=0;4>Ee;++Ee){if(ve.Cb){var Ie=ve.Zb[Ee];ve.Fb||(Ie+=g)}else{if(0<Ee){s.pb[Ee]=s.pb[0];continue}Ie=g}var Le=s.pb[Ee];Le.Sc[0]=jl[vn(Ie+O,127)],Le.Sc[1]=Al[vn(Ie+0,127)],Le.Eb[0]=2*jl[vn(Ie+S,127)],Le.Eb[1]=101581*Al[vn(Ie+W,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=jl[vn(Ie+re,117)],Le.Qc[1]=Al[vn(Ie+G,127)],Le.lc=Ie+G}if(!z.Rb)return Ar(s,4,"Not a key frame.");for(Fe(B),z=s.Pa,g=0;4>g;++g){for(O=0;8>O;++O)for(S=0;3>S;++S)for(W=0;11>W;++W)re=fe(B,fh[g][O][S][W])?$(B,8):dh[g][O][S][W],z.Wc[g][O].Yb[S][W]=re;for(O=0;17>O;++O)z.Xc[g][O]=z.Wc[g][ph[O]]}return s.kc=Fe(B),s.kc&&(s.Bd=$(B,8)),s.cb=1}function or(s,d,g,S,O,B,z){var W=d[O].Yb[g];for(g=0;16>O;++O){if(!fe(s,W[g+0]))return O;for(;!fe(s,W[g+1]);)if(W=d[++O].Yb[0],g=0,O==16)return 16;var G=d[O+1].Yb;if(fe(s,W[g+2])){var re=s,ve=0;if(fe(re,(Ie=W)[(Ee=g)+3]))if(fe(re,Ie[Ee+6])){for(W=0,Ee=2*(ve=fe(re,Ie[Ee+8]))+(Ie=fe(re,Ie[Ee+9+ve])),ve=0,Ie=ch[Ee];Ie[W];++W)ve+=ve+fe(re,Ie[W]);ve+=3+(8<<Ee)}else fe(re,Ie[Ee+7])?(ve=7+2*fe(re,165),ve+=fe(re,145)):ve=5+fe(re,159);else ve=fe(re,Ie[Ee+4])?3+fe(re,Ie[Ee+5]):2;W=G[2]}else ve=1,W=G[1];G=z+uh[O],0>(re=s).b&&we(re);var Ee,Ie=re.b,Le=(Ee=re.Ca>>1)-(re.I>>Ie)>>31;--re.b,re.Ca+=Le,re.Ca|=1,re.I-=(Ee+1&Le)<<Ie,B[G]=((ve^Le)-Le)*S[(0<O)+0]}return 16}function ci(s){var d=s.rb[s.sb-1];d.la=0,d.Na=0,a(s.zc,0,0,s.zc.length),s.ja=0}function Qi(s,d){if(s==null)return 0;if(d==null)return Ar(s,2,"NULL VP8Io parameter in VP8Decode().");if(!s.cb&&!Za(s,d))return 0;if(e(s.cb),d.ac==null||d.ac(d)){d.ob&&(s.L=0);var g=Io[s.L];if(s.L==2?(s.yb=0,s.zb=0):(s.yb=d.v-g>>4,s.zb=d.j-g>>4,0>s.yb&&(s.yb=0),0>s.zb&&(s.zb=0)),s.Va=d.o+15+g>>4,s.Hb=d.va+15+g>>4,s.Hb>s.za&&(s.Hb=s.za),s.Va>s.Ub&&(s.Va=s.Ub),0<s.L){var S=s.ed;for(g=0;4>g;++g){var O;if(s.Qa.Cb){var B=s.Qa.Lb[g];s.Qa.Fb||(B+=S.Tb)}else B=S.Tb;for(O=0;1>=O;++O){var z=s.gd[g][O],W=B;if(S.Pc&&(W+=S.vd[0],O&&(W+=S.od[0])),0<(W=0>W?0:63<W?63:W)){var G=W;0<S.wb&&(G=4<S.wb?G>>2:G>>1)>9-S.wb&&(G=9-S.wb),1>G&&(G=1),z.dd=G,z.tc=2*W+G,z.ld=40<=W?2:15<=W?1:0}else z.tc=0;z.La=O}}}g=0}else Ar(s,6,"Frame setup failed"),g=s.a;if(g=g==0){if(g){s.$c=0,0<s.Aa||(s.Ic=Lh);e:{g=s.Ic,S=4*(G=s.za);var re=32*G,ve=G+1,Ee=0<s.L?G*(0<s.Aa?2:1):0,Ie=(s.Aa==2?2:1)*G;if((z=S+832+(O=3*(16*g+Io[s.L])/2*re)+(B=s.Fa!=null&&0<s.Fa.length?s.Kc.c*s.Kc.i:0))!=z)g=0;else{if(z>s.Vb){if(s.Vb=0,s.Ec=i(z),s.Fc=0,s.Ec==null){g=Ar(s,1,"no memory during frame initialization.");break e}s.Vb=z}z=s.Ec,W=s.Fc,s.Ac=z,s.Bc=W,W+=S,s.Gd=c(re,Ja),s.Hd=0,s.rb=c(ve+1,Gi),s.sb=1,s.wa=Ee?c(Ee,zn):null,s.Y=0,s.D.Nb=0,s.D.wa=s.wa,s.D.Y=s.Y,0<s.Aa&&(s.D.Y+=G),e(!0),s.oc=z,s.pc=W,W+=832,s.ya=c(Ie,$i),s.aa=0,s.D.ya=s.ya,s.D.aa=s.aa,s.Aa==2&&(s.D.aa+=G),s.R=16*G,s.B=8*G,G=(re=Io[s.L])*s.R,re=re/2*s.B,s.sa=z,s.ta=W+G,s.qa=s.sa,s.ra=s.ta+16*g*s.R+re,s.Ha=s.qa,s.Ia=s.ra+8*g*s.B+re,s.$c=0,W+=O,s.mb=B?z:null,s.nb=B?W:null,e(W+B<=s.Fc+s.Vb),ci(s),a(s.Ac,s.Bc,0,S),g=1}}if(g){if(d.ka=0,d.y=s.sa,d.O=s.ta,d.f=s.qa,d.N=s.ra,d.ea=s.Ha,d.Vd=s.Ia,d.fa=s.R,d.Rc=s.B,d.F=null,d.J=0,!ha){for(g=-255;255>=g;++g)nr[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)It[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Dr[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)kr[255+g]=0>g?0:255<g?255:g;ha=1}Ne=Ys,_e=wa,ke=ts,me=Ji,Se=rs,ue=es,Pe=Ii,je=ti,Te=ja,Me=sa,Re=Ds,Ke=Sa,nt=oa,dt=Aa,it=Fs,st=ei,ht=Vn,ot=ss,vi[0]=En,vi[1]=ns,vi[2]=Xi,vi[3]=Zi,vi[4]=Kn,vi[5]=dn,vi[6]=Ps,vi[7]=ea,vi[8]=is,vi[9]=ks,Ca[0]=Wn,Ca[1]=Js,Ca[2]=Lr,Ca[3]=Hn,Ca[4]=Qr,Ca[5]=Ls,Ca[6]=Pr,fa[0]=Ei,fa[1]=Qs,fa[2]=ta,fa[3]=ra,fa[4]=ia,fa[5]=na,fa[6]=as,g=1}else g=0}g&&(g=function(Le,Qe){for(Le.M=0;Le.M<Le.Va;++Le.M){var ze,be=Le.Jc[Le.M&Le.Xb],Ae=Le.m,$e=Le;for(ze=0;ze<$e.za;++ze){var Ze=Ae,Ye=$e,Nt=Ye.Ac,pt=Ye.Bc+4*ze,Tt=Ye.zc,yt=Ye.ya[Ye.aa+ze];if(Ye.Qa.Bb?yt.$b=fe(Ze,Ye.Pa.jb[0])?2+fe(Ze,Ye.Pa.jb[2]):fe(Ze,Ye.Pa.jb[1]):yt.$b=0,Ye.kc&&(yt.Ad=fe(Ze,Ye.Bd)),yt.Za=!fe(Ze,145)+0,yt.Za){var ar=yt.Ob,cr=0;for(Ye=0;4>Ye;++Ye){var ir,rr=Tt[0+Ye];for(ir=0;4>ir;++ir){rr=hh[Nt[pt+ir]][rr];for(var gr=Ic[fe(Ze,rr[0])];0<gr;)gr=Ic[2*gr+fe(Ze,rr[gr])];rr=-gr,Nt[pt+ir]=rr}n(ar,cr,Nt,pt,4),cr+=4,Tt[0+Ye]=rr}}else rr=fe(Ze,156)?fe(Ze,128)?1:3:fe(Ze,163)?2:0,yt.Ob[0]=rr,a(Nt,pt,rr,4),a(Tt,0,rr,4);yt.Dd=fe(Ze,142)?fe(Ze,114)?fe(Ze,183)?1:3:2:0}if($e.m.Ka)return Ar(Le,7,"Premature end-of-partition0 encountered.");for(;Le.ja<Le.za;++Le.ja){if($e=be,Ze=(Ae=Le).rb[Ae.sb-1],Nt=Ae.rb[Ae.sb+Ae.ja],ze=Ae.ya[Ae.aa+Ae.ja],pt=Ae.kc?ze.Ad:0)Ze.la=Nt.la=0,ze.Za||(Ze.Na=Nt.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var pr,$t;if(Ze=Nt,Nt=$e,pt=Ae.Pa.Xc,Tt=Ae.ya[Ae.aa+Ae.ja],yt=Ae.pb[Tt.$b],Ye=Tt.ad,ar=0,cr=Ae.rb[Ae.sb-1],rr=ir=0,a(Ye,ar,0,384),Tt.Za)var Vr=0,On=pt[3];else{gr=i(16);var Gr=Ze.Na+cr.Na;if(Gr=Xs(Nt,pt[1],Gr,yt.Eb,0,gr,0),Ze.Na=cr.Na=(0<Gr)+0,1<Gr)Ne(gr,0,Ye,ar);else{var Tn=gr[0]+3>>3;for(gr=0;256>gr;gr+=16)Ye[ar+gr]=Tn}Vr=1,On=pt[0]}var ur=15&Ze.la,Yn=15&cr.la;for(gr=0;4>gr;++gr){var Qn=1&Yn;for(Tn=$t=0;4>Tn;++Tn)ur=ur>>1|(Qn=(Gr=Xs(Nt,On,Gr=Qn+(1&ur),yt.Sc,Vr,Ye,ar))>Vr)<<7,$t=$t<<2|(3<Gr?3:1<Gr?2:Ye[ar+0]!=0),ar+=16;ur>>=4,Yn=Yn>>1|Qn<<7,ir=(ir<<8|$t)>>>0}for(On=ur,Vr=Yn>>4,pr=0;4>pr;pr+=2){for($t=0,ur=Ze.la>>4+pr,Yn=cr.la>>4+pr,gr=0;2>gr;++gr){for(Qn=1&Yn,Tn=0;2>Tn;++Tn)Gr=Qn+(1&ur),ur=ur>>1|(Qn=0<(Gr=Xs(Nt,pt[2],Gr,yt.Qc,0,Ye,ar)))<<3,$t=$t<<2|(3<Gr?3:1<Gr?2:Ye[ar+0]!=0),ar+=16;ur>>=2,Yn=Yn>>1|Qn<<5}rr|=$t<<4*pr,On|=ur<<4<<pr,Vr|=(240&Yn)<<pr}Ze.la=On,cr.la=Vr,Tt.Hc=ir,Tt.Gc=rr,Tt.ia=43690&rr?0:yt.ia,pt=!(ir|rr)}if(0<Ae.L&&(Ae.wa[Ae.Y+Ae.ja]=Ae.gd[ze.$b][ze.Za],Ae.wa[Ae.Y+Ae.ja].La|=!pt),$e.Ka)return Ar(Le,7,"Premature end-of-file encountered.")}if(ci(Le),Ae=Qe,$e=1,ze=(be=Le).D,Ze=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(ze.M=be.M,ze.uc=Ze,ls(be,ze),$e=1,ze=($t=be.D).Nb,Ze=(rr=Io[be.L])*be.R,Nt=rr/2*be.B,gr=16*ze*be.R,Tn=8*ze*be.B,pt=be.sa,Tt=be.ta-Ze+gr,yt=be.qa,Ye=be.ra-Nt+Tn,ar=be.Ha,cr=be.Ia-Nt+Tn,Yn=(ur=$t.M)==0,ir=ur>=be.Va-1,be.Aa==2&&ls(be,$t),$t.uc)for(Qn=(Gr=be).D.M,e(Gr.D.uc),$t=Gr.yb;$t<Gr.Hb;++$t){Vr=$t,On=Qn;var on=(pn=(Er=Gr).D).Nb;pr=Er.R;var pn=pn.wa[pn.Y+Vr],Ln=Er.sa,ai=Er.ta+16*on*pr+16*Vr,qi=pn.dd,ln=pn.tc;if(ln!=0)if(e(3<=ln),Er.L==1)0<Vr&&st(Ln,ai,pr,ln+4),pn.La&&ot(Ln,ai,pr,ln),0<On&&it(Ln,ai,pr,ln+4),pn.La&&ht(Ln,ai,pr,ln);else{var pa=Er.B,us=Er.qa,Is=Er.ra+8*on*pa+8*Vr,Da=Er.Ha,Er=Er.Ia+8*on*pa+8*Vr;on=pn.ld,0<Vr&&(je(Ln,ai,pr,ln+4,qi,on),Me(us,Is,Da,Er,pa,ln+4,qi,on)),pn.La&&(Ke(Ln,ai,pr,ln,qi,on),dt(us,Is,Da,Er,pa,ln,qi,on)),0<On&&(Pe(Ln,ai,pr,ln+4,qi,on),Te(us,Is,Da,Er,pa,ln+4,qi,on)),pn.La&&(Re(Ln,ai,pr,ln,qi,on),nt(us,Is,Da,Er,pa,ln,qi,on))}}if(be.ia&&alert("todo:DitherRow"),Ae.put!=null){if($t=16*ur,ur=16*(ur+1),Yn?(Ae.y=be.sa,Ae.O=be.ta+gr,Ae.f=be.qa,Ae.N=be.ra+Tn,Ae.ea=be.Ha,Ae.W=be.Ia+Tn):($t-=rr,Ae.y=pt,Ae.O=Tt,Ae.f=yt,Ae.N=Ye,Ae.ea=ar,Ae.W=cr),ir||(ur-=rr),ur>Ae.o&&(ur=Ae.o),Ae.F=null,Ae.J=null,be.Fa!=null&&0<be.Fa.length&&$t<ur&&(Ae.J=la(be,Ae,$t,ur-$t),Ae.F=be.mb,Ae.F==null&&Ae.F.length==0)){$e=Ar(be,3,"Could not decode alpha data.");break e}$t<Ae.j&&(rr=Ae.j-$t,$t=Ae.j,e(!(1&rr)),Ae.O+=be.R*rr,Ae.N+=be.B*(rr>>1),Ae.W+=be.B*(rr>>1),Ae.F!=null&&(Ae.J+=Ae.width*rr)),$t<ur&&(Ae.O+=Ae.v,Ae.N+=Ae.v>>1,Ae.W+=Ae.v>>1,Ae.F!=null&&(Ae.J+=Ae.v),Ae.ka=$t-Ae.j,Ae.U=Ae.va-Ae.v,Ae.T=ur-$t,$e=Ae.put(Ae))}ze+1!=be.Ic||ir||(n(be.sa,be.ta-Ze,pt,Tt+16*be.R,Ze),n(be.qa,be.ra-Nt,yt,Ye+8*be.B,Nt),n(be.Ha,be.Ia-Nt,ar,cr+8*be.B,Nt))}if(!$e)return Ar(Le,6,"Output aborted.")}return 1}(s,d)),d.bc!=null&&d.bc(d),g&=1}return g?(s.cb=0,g):0}function an(s,d,g,S,O){O=s[d+g+32*S]+(O>>3),s[d+g+32*S]=-256&O?0>O?0:255:O}function Ci(s,d,g,S,O,B){an(s,d,0,g,S+O),an(s,d,1,g,S+B),an(s,d,2,g,S-B),an(s,d,3,g,S-O)}function sn(s){return(20091*s>>16)+s}function Fi(s,d,g,S){var O,B=0,z=i(16);for(O=0;4>O;++O){var W=s[d+0]+s[d+8],G=s[d+0]-s[d+8],re=(35468*s[d+4]>>16)-sn(s[d+12]),ve=sn(s[d+4])+(35468*s[d+12]>>16);z[B+0]=W+ve,z[B+1]=G+re,z[B+2]=G-re,z[B+3]=W-ve,B+=4,d++}for(O=B=0;4>O;++O)W=(s=z[B+0]+4)+z[B+8],G=s-z[B+8],re=(35468*z[B+4]>>16)-sn(z[B+12]),an(g,S,0,0,W+(ve=sn(z[B+4])+(35468*z[B+12]>>16))),an(g,S,1,0,G+re),an(g,S,2,0,G-re),an(g,S,3,0,W-ve),B++,S+=32}function es(s,d,g,S){var O=s[d+0]+4,B=35468*s[d+4]>>16,z=sn(s[d+4]),W=35468*s[d+1]>>16;Ci(g,S,0,O+z,s=sn(s[d+1]),W),Ci(g,S,1,O+B,s,W),Ci(g,S,2,O-B,s,W),Ci(g,S,3,O-z,s,W)}function wa(s,d,g,S,O){Fi(s,d,g,S),O&&Fi(s,d+16,g,S+4)}function ts(s,d,g,S){_e(s,d+0,g,S,1),_e(s,d+32,g,S+128,1)}function Ji(s,d,g,S){var O;for(s=s[d+0]+4,O=0;4>O;++O)for(d=0;4>d;++d)an(g,S,d,O,s)}function rs(s,d,g,S){s[d+0]&&me(s,d+0,g,S),s[d+16]&&me(s,d+16,g,S+4),s[d+32]&&me(s,d+32,g,S+128),s[d+48]&&me(s,d+48,g,S+128+4)}function Ys(s,d,g,S){var O,B=i(16);for(O=0;4>O;++O){var z=s[d+0+O]+s[d+12+O],W=s[d+4+O]+s[d+8+O],G=s[d+4+O]-s[d+8+O],re=s[d+0+O]-s[d+12+O];B[0+O]=z+W,B[8+O]=z-W,B[4+O]=re+G,B[12+O]=re-G}for(O=0;4>O;++O)z=(s=B[0+4*O]+3)+B[3+4*O],W=B[1+4*O]+B[2+4*O],G=B[1+4*O]-B[2+4*O],re=s-B[3+4*O],g[S+0]=z+W>>3,g[S+16]=re+G>>3,g[S+32]=z-W>>3,g[S+48]=re-G>>3,S+=64}function Zt(s,d,g){var S,O=d-32,B=fn,z=255-s[O-1];for(S=0;S<g;++S){var W,G=B,re=z+s[d-1];for(W=0;W<g;++W)s[d+W]=G[re+s[O+W]];d+=32}}function ns(s,d){Zt(s,d,4)}function Qs(s,d){Zt(s,d,8)}function Js(s,d){Zt(s,d,16)}function Lr(s,d){var g;for(g=0;16>g;++g)n(s,d+32*g,s,d-32,16)}function Hn(s,d){var g;for(g=16;0<g;--g)a(s,d,s[d-1],16),d+=32}function ui(s,d,g){var S;for(S=0;16>S;++S)a(d,g+32*S,s,16)}function Wn(s,d){var g,S=16;for(g=0;16>g;++g)S+=s[d-1+32*g]+s[d+g-32];ui(S>>5,s,d)}function Qr(s,d){var g,S=8;for(g=0;16>g;++g)S+=s[d-1+32*g];ui(S>>4,s,d)}function Ls(s,d){var g,S=8;for(g=0;16>g;++g)S+=s[d+g-32];ui(S>>4,s,d)}function Pr(s,d){ui(128,s,d)}function Dt(s,d,g){return s+2*d+g+2>>2}function Xi(s,d){var g,S=d-32;for(S=new Uint8Array([Dt(s[S-1],s[S+0],s[S+1]),Dt(s[S+0],s[S+1],s[S+2]),Dt(s[S+1],s[S+2],s[S+3]),Dt(s[S+2],s[S+3],s[S+4])]),g=0;4>g;++g)n(s,d+32*g,S,0,S.length)}function Zi(s,d){var g=s[d-1],S=s[d-1+32],O=s[d-1+64],B=s[d-1+96];Je(s,d+0,16843009*Dt(s[d-1-32],g,S)),Je(s,d+32,16843009*Dt(g,S,O)),Je(s,d+64,16843009*Dt(S,O,B)),Je(s,d+96,16843009*Dt(O,B,B))}function En(s,d){var g,S=4;for(g=0;4>g;++g)S+=s[d+g-32]+s[d-1+32*g];for(S>>=3,g=0;4>g;++g)a(s,d+32*g,S,4)}function Kn(s,d){var g=s[d-1+0],S=s[d-1+32],O=s[d-1+64],B=s[d-1-32],z=s[d+0-32],W=s[d+1-32],G=s[d+2-32],re=s[d+3-32];s[d+0+96]=Dt(S,O,s[d-1+96]),s[d+1+96]=s[d+0+64]=Dt(g,S,O),s[d+2+96]=s[d+1+64]=s[d+0+32]=Dt(B,g,S),s[d+3+96]=s[d+2+64]=s[d+1+32]=s[d+0+0]=Dt(z,B,g),s[d+3+64]=s[d+2+32]=s[d+1+0]=Dt(W,z,B),s[d+3+32]=s[d+2+0]=Dt(G,W,z),s[d+3+0]=Dt(re,G,W)}function Ps(s,d){var g=s[d+1-32],S=s[d+2-32],O=s[d+3-32],B=s[d+4-32],z=s[d+5-32],W=s[d+6-32],G=s[d+7-32];s[d+0+0]=Dt(s[d+0-32],g,S),s[d+1+0]=s[d+0+32]=Dt(g,S,O),s[d+2+0]=s[d+1+32]=s[d+0+64]=Dt(S,O,B),s[d+3+0]=s[d+2+32]=s[d+1+64]=s[d+0+96]=Dt(O,B,z),s[d+3+32]=s[d+2+64]=s[d+1+96]=Dt(B,z,W),s[d+3+64]=s[d+2+96]=Dt(z,W,G),s[d+3+96]=Dt(W,G,G)}function dn(s,d){var g=s[d-1+0],S=s[d-1+32],O=s[d-1+64],B=s[d-1-32],z=s[d+0-32],W=s[d+1-32],G=s[d+2-32],re=s[d+3-32];s[d+0+0]=s[d+1+64]=B+z+1>>1,s[d+1+0]=s[d+2+64]=z+W+1>>1,s[d+2+0]=s[d+3+64]=W+G+1>>1,s[d+3+0]=G+re+1>>1,s[d+0+96]=Dt(O,S,g),s[d+0+64]=Dt(S,g,B),s[d+0+32]=s[d+1+96]=Dt(g,B,z),s[d+1+32]=s[d+2+96]=Dt(B,z,W),s[d+2+32]=s[d+3+96]=Dt(z,W,G),s[d+3+32]=Dt(W,G,re)}function ea(s,d){var g=s[d+0-32],S=s[d+1-32],O=s[d+2-32],B=s[d+3-32],z=s[d+4-32],W=s[d+5-32],G=s[d+6-32],re=s[d+7-32];s[d+0+0]=g+S+1>>1,s[d+1+0]=s[d+0+64]=S+O+1>>1,s[d+2+0]=s[d+1+64]=O+B+1>>1,s[d+3+0]=s[d+2+64]=B+z+1>>1,s[d+0+32]=Dt(g,S,O),s[d+1+32]=s[d+0+96]=Dt(S,O,B),s[d+2+32]=s[d+1+96]=Dt(O,B,z),s[d+3+32]=s[d+2+96]=Dt(B,z,W),s[d+3+64]=Dt(z,W,G),s[d+3+96]=Dt(W,G,re)}function ks(s,d){var g=s[d-1+0],S=s[d-1+32],O=s[d-1+64],B=s[d-1+96];s[d+0+0]=g+S+1>>1,s[d+2+0]=s[d+0+32]=S+O+1>>1,s[d+2+32]=s[d+0+64]=O+B+1>>1,s[d+1+0]=Dt(g,S,O),s[d+3+0]=s[d+1+32]=Dt(S,O,B),s[d+3+32]=s[d+1+64]=Dt(O,B,B),s[d+3+64]=s[d+2+64]=s[d+0+96]=s[d+1+96]=s[d+2+96]=s[d+3+96]=B}function is(s,d){var g=s[d-1+0],S=s[d-1+32],O=s[d-1+64],B=s[d-1+96],z=s[d-1-32],W=s[d+0-32],G=s[d+1-32],re=s[d+2-32];s[d+0+0]=s[d+2+32]=g+z+1>>1,s[d+0+32]=s[d+2+64]=S+g+1>>1,s[d+0+64]=s[d+2+96]=O+S+1>>1,s[d+0+96]=B+O+1>>1,s[d+3+0]=Dt(W,G,re),s[d+2+0]=Dt(z,W,G),s[d+1+0]=s[d+3+32]=Dt(g,z,W),s[d+1+32]=s[d+3+64]=Dt(S,g,z),s[d+1+64]=s[d+3+96]=Dt(O,S,g),s[d+1+96]=Dt(B,O,S)}function ta(s,d){var g;for(g=0;8>g;++g)n(s,d+32*g,s,d-32,8)}function ra(s,d){var g;for(g=0;8>g;++g)a(s,d,s[d-1],8),d+=32}function Di(s,d,g){var S;for(S=0;8>S;++S)a(d,g+32*S,s,8)}function Ei(s,d){var g,S=8;for(g=0;8>g;++g)S+=s[d+g-32]+s[d-1+32*g];Di(S>>4,s,d)}function na(s,d){var g,S=4;for(g=0;8>g;++g)S+=s[d+g-32];Di(S>>3,s,d)}function ia(s,d){var g,S=4;for(g=0;8>g;++g)S+=s[d-1+32*g];Di(S>>3,s,d)}function as(s,d){Di(128,s,d)}function di(s,d,g){var S=s[d-g],O=s[d+0],B=3*(O-S)+Zr[1020+s[d-2*g]-s[d+g]],z=ri[112+(B+4>>3)];s[d-g]=fn[255+S+ri[112+(B+3>>3)]],s[d+0]=fn[255+O-z]}function aa(s,d,g,S){var O=s[d+0],B=s[d+g];return ni[255+s[d-2*g]-s[d-g]]>S||ni[255+B-O]>S}function Na(s,d,g,S){return 4*ni[255+s[d-g]-s[d+0]]+ni[255+s[d-2*g]-s[d+g]]<=S}function Cs(s,d,g,S,O){var B=s[d-3*g],z=s[d-2*g],W=s[d-g],G=s[d+0],re=s[d+g],ve=s[d+2*g],Ee=s[d+3*g];return 4*ni[255+W-G]+ni[255+z-re]>S?0:ni[255+s[d-4*g]-B]<=O&&ni[255+B-z]<=O&&ni[255+z-W]<=O&&ni[255+Ee-ve]<=O&&ni[255+ve-re]<=O&&ni[255+re-G]<=O}function Fs(s,d,g,S){var O=2*S+1;for(S=0;16>S;++S)Na(s,d+S,g,O)&&di(s,d+S,g)}function ei(s,d,g,S){var O=2*S+1;for(S=0;16>S;++S)Na(s,d+S*g,1,O)&&di(s,d+S*g,1)}function Vn(s,d,g,S){var O;for(O=3;0<O;--O)Fs(s,d+=4*g,g,S)}function ss(s,d,g,S){var O;for(O=3;0<O;--O)ei(s,d+=4,g,S)}function hi(s,d,g,S,O,B,z,W){for(B=2*B+1;0<O--;){if(Cs(s,d,g,B,z))if(aa(s,d,g,W))di(s,d,g);else{var G=s,re=d,ve=g,Ee=G[re-2*ve],Ie=G[re-ve],Le=G[re+0],Qe=G[re+ve],ze=G[re+2*ve],be=27*($e=Zr[1020+3*(Le-Ie)+Zr[1020+Ee-Qe]])+63>>7,Ae=18*$e+63>>7,$e=9*$e+63>>7;G[re-3*ve]=fn[255+G[re-3*ve]+$e],G[re-2*ve]=fn[255+Ee+Ae],G[re-ve]=fn[255+Ie+be],G[re+0]=fn[255+Le-be],G[re+ve]=fn[255+Qe-Ae],G[re+2*ve]=fn[255+ze-$e]}d+=S}}function yn(s,d,g,S,O,B,z,W){for(B=2*B+1;0<O--;){if(Cs(s,d,g,B,z))if(aa(s,d,g,W))di(s,d,g);else{var G=s,re=d,ve=g,Ee=G[re-ve],Ie=G[re+0],Le=G[re+ve],Qe=ri[112+((ze=3*(Ie-Ee))+4>>3)],ze=ri[112+(ze+3>>3)],be=Qe+1>>1;G[re-2*ve]=fn[255+G[re-2*ve]+be],G[re-ve]=fn[255+Ee+ze],G[re+0]=fn[255+Ie-Qe],G[re+ve]=fn[255+Le-be]}d+=S}}function Ii(s,d,g,S,O,B){hi(s,d,g,1,16,S,O,B)}function ti(s,d,g,S,O,B){hi(s,d,1,g,16,S,O,B)}function Ds(s,d,g,S,O,B){var z;for(z=3;0<z;--z)yn(s,d+=4*g,g,1,16,S,O,B)}function Sa(s,d,g,S,O,B){var z;for(z=3;0<z;--z)yn(s,d+=4,1,g,16,S,O,B)}function ja(s,d,g,S,O,B,z,W){hi(s,d,O,1,8,B,z,W),hi(g,S,O,1,8,B,z,W)}function sa(s,d,g,S,O,B,z,W){hi(s,d,1,O,8,B,z,W),hi(g,S,1,O,8,B,z,W)}function oa(s,d,g,S,O,B,z,W){yn(s,d+4*O,O,1,8,B,z,W),yn(g,S+4*O,O,1,8,B,z,W)}function Aa(s,d,g,S,O,B,z,W){yn(s,d+4,1,O,8,B,z,W),yn(g,S+4,1,O,8,B,z,W)}function Oi(){this.ba=new un,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Cr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ti(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new N}function Es(){this.xb=this.a=0,this.l=new Yi,this.ca=new un,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ti,this.ab=0,this.gc=c(4,fi),this.Oc=0}function pi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Mi(s,d,g,S,O,B,z){for(s=s==null?0:s[d+0],d=0;d<z;++d)O[B+d]=s+g[S+d]&255,s=O[B+d]}function _a(s,d,g,S,O,B,z){var W;if(s==null)Mi(null,null,g,S,O,B,z);else for(W=0;W<z;++W)O[B+W]=s[d+W]+g[S+W]&255}function Gn(s,d,g,S,O,B,z){if(s==null)Mi(null,null,g,S,O,B,z);else{var W,G=s[d+0],re=G,ve=G;for(W=0;W<z;++W)re=ve+(G=s[d+W])-re,ve=g[S+W]+(-256&re?0>re?0:255:re)&255,re=G,O[B+W]=ve}}function la(s,d,g,S){var O=d.width,B=d.o;if(e(s!=null&&d!=null),0>g||0>=S||g+S>B)return null;if(!s.Cc){if(s.ga==null){var z;if(s.ga=new pi,(z=s.ga==null)||(z=d.width*d.o,e(s.Gb.length==0),s.Gb=i(z),s.Uc=0,s.Gb==null?z=0:(s.mb=s.Gb,s.nb=s.Uc,s.rc=null,z=1),z=!z),!z){z=s.ga;var W=s.Fa,G=s.P,re=s.qc,ve=s.mb,Ee=s.nb,Ie=G+1,Le=re-1,Qe=z.l;if(e(W!=null&&ve!=null&&d!=null),Fa[0]=null,Fa[1]=Mi,Fa[2]=_a,Fa[3]=Gn,z.ca=ve,z.tb=Ee,z.c=d.width,z.i=d.height,e(0<z.c&&0<z.i),1>=re)d=0;else if(z.$a=W[G+0]>>0&3,z.Z=W[G+0]>>2&3,z.Lc=W[G+0]>>4&3,G=W[G+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||G)d=0;else if(Qe.put=mt,Qe.ac=De,Qe.bc=Et,Qe.ma=z,Qe.width=d.width,Qe.height=d.height,Qe.Da=d.Da,Qe.v=d.v,Qe.va=d.va,Qe.j=d.j,Qe.o=d.o,z.$a)e:{e(z.$a==1),d=Fn();t:for(;;){if(d==null){d=0;break e}if(e(z!=null),z.mc=d,d.c=z.c,d.i=z.i,d.l=z.l,d.l.ma=z,d.l.width=z.c,d.l.height=z.i,d.a=0,ne(d.m,W,Ie,Le),!Yr(z.c,z.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&oi(d.s)?(z.ic=1,W=d.c*d.i,d.Ta=null,d.Ua=0,d.V=i(W),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(z.ic=0,d=Pi(d,z.c)),!d))break t;d=1;break e}z.mc=null,d=0}else d=Le>=z.c*z.i;z=!d}if(z)return null;s.ga.Lc!=1?s.Ga=0:S=B-g}e(s.ga!=null),e(g+S<=B);e:{if(d=(W=s.ga).c,B=W.l.o,W.$a==0){if(Ie=s.rc,Le=s.Vc,Qe=s.Fa,G=s.P+1+g*d,re=s.mb,ve=s.nb+g*d,e(G<=s.P+s.qc),W.Z!=0)for(e(Fa[W.Z]!=null),z=0;z<S;++z)Fa[W.Z](Ie,Le,Qe,G,re,ve,d),Ie=re,Le=ve,ve+=d,G+=d;else for(z=0;z<S;++z)n(re,ve,Qe,G,d),Ie=re,Le=ve,ve+=d,G+=d;s.rc=Ie,s.Vc=Le}else{if(e(W.mc!=null),d=g+S,e((z=W.mc)!=null),e(d<=z.i),z.C>=d)d=1;else if(W.ic||Ce(),W.ic){W=z.V,Ie=z.Ba,Le=z.c;var ze=z.i,be=(Qe=1,G=z.$/Le,re=z.$%Le,ve=z.m,Ee=z.s,z.$),Ae=Le*ze,$e=Le*d,Ze=Ee.wc,Ye=be<$e?hr(Ee,re,G):null;e(be<=Ae),e(d<=ze),e(oi(Ee));t:for(;;){for(;!ve.h&&be<$e;){if(re&Ze||(Ye=hr(Ee,re,G)),e(Ye!=null),ae(ve),256>(ze=Bt(Ye.G[0],Ye.H[0],ve)))W[Ie+be]=ze,++be,++re>=Le&&(re=0,++G<=d&&!(G%16)&&nn(z,G));else{if(!(280>ze)){Qe=0;break t}ze=sr(ze-256,ve);var Nt,pt=Bt(Ye.G[4],Ye.H[4],ve);if(ae(ve),!(be>=(pt=Ht(Le,pt=sr(pt,ve)))&&Ae-be>=ze)){Qe=0;break t}for(Nt=0;Nt<ze;++Nt)W[Ie+be+Nt]=W[Ie+be+Nt-pt];for(be+=ze,re+=ze;re>=Le;)re-=Le,++G<=d&&!(G%16)&&nn(z,G);be<$e&&re&Ze&&(Ye=hr(Ee,re,G))}e(ve.h==Q(ve))}nn(z,G>d?d:G);break t}!Qe||ve.h&&be<Ae?(Qe=0,z.a=ve.h?5:3):z.$=be,d=Qe}else d=Kr(z,z.V,z.Ba,z.c,z.i,d,Dn);if(!d){S=0;break e}}g+S>=B&&(s.Cc=1),S=1}if(!S)return null;if(s.Cc&&((S=s.ga)!=null&&(S.mc=null),s.ga=null,0<s.Ga))return alert("todo:WebPDequantizeLevels"),null}return s.nb+g*O}function p(s,d,g,S,O,B){for(;0<O--;){var z,W=s,G=d+(g?1:0),re=s,ve=d+(g?0:3);for(z=0;z<S;++z){var Ee=re[ve+4*z];Ee!=255&&(Ee*=32897,W[G+4*z+0]=W[G+4*z+0]*Ee>>23,W[G+4*z+1]=W[G+4*z+1]*Ee>>23,W[G+4*z+2]=W[G+4*z+2]*Ee>>23)}d+=B}}function I(s,d,g,S,O){for(;0<S--;){var B;for(B=0;B<g;++B){var z=s[d+2*B+0],W=15&(re=s[d+2*B+1]),G=4369*W,re=(240&re|re>>4)*G>>16;s[d+2*B+0]=(240&z|z>>4)*G>>16&240|(15&z|z<<4)*G>>16>>4&15,s[d+2*B+1]=240&re|W}d+=O}}function se(s,d,g,S,O,B,z,W){var G,re,ve=255;for(re=0;re<O;++re){for(G=0;G<S;++G){var Ee=s[d+G];B[z+4*G]=Ee,ve&=Ee}d+=g,z+=W}return ve!=255}function pe(s,d,g,S,O){var B;for(B=0;B<O;++B)g[S+B]=s[d+B]>>8}function Ce(){ft=p,St=I,At=se,Ct=pe}function We(s,d,g){T[s]=function(S,O,B,z,W,G,re,ve,Ee,Ie,Le,Qe,ze,be,Ae,$e,Ze){var Ye,Nt=Ze-1>>1,pt=W[G+0]|re[ve+0]<<16,Tt=Ee[Ie+0]|Le[Qe+0]<<16;e(S!=null);var yt=3*pt+Tt+131074>>2;for(d(S[O+0],255&yt,yt>>16,ze,be),B!=null&&(yt=3*Tt+pt+131074>>2,d(B[z+0],255&yt,yt>>16,Ae,$e)),Ye=1;Ye<=Nt;++Ye){var ar=W[G+Ye]|re[ve+Ye]<<16,cr=Ee[Ie+Ye]|Le[Qe+Ye]<<16,ir=pt+ar+Tt+cr+524296,rr=ir+2*(ar+Tt)>>3;yt=rr+pt>>1,pt=(ir=ir+2*(pt+cr)>>3)+ar>>1,d(S[O+2*Ye-1],255&yt,yt>>16,ze,be+(2*Ye-1)*g),d(S[O+2*Ye-0],255&pt,pt>>16,ze,be+(2*Ye-0)*g),B!=null&&(yt=ir+Tt>>1,pt=rr+cr>>1,d(B[z+2*Ye-1],255&yt,yt>>16,Ae,$e+(2*Ye-1)*g),d(B[z+2*Ye+0],255&pt,pt>>16,Ae,$e+(2*Ye+0)*g)),pt=ar,Tt=cr}1&Ze||(yt=3*pt+Tt+131074>>2,d(S[O+Ze-1],255&yt,yt>>16,ze,be+(Ze-1)*g),B!=null&&(yt=3*Tt+pt+131074>>2,d(B[z+Ze-1],255&yt,yt>>16,Ae,$e+(Ze-1)*g)))}}function tt(){ii[Lo]=gh,ii[Po]=Tc,ii[Fc]=yh,ii[ko]=Mc,ii[Co]=Rc,ii[xl]=qc,ii[Dc]=vh,ii[wl]=Tc,ii[Nl]=Mc,ii[Fo]=Rc,ii[Sl]=qc}function vt(s){return s&~bh?0>s?0:255:s>>Bc}function kt(s,d){return vt((19077*s>>8)+(26149*d>>8)-14234)}function Kt(s,d,g){return vt((19077*s>>8)-(6419*d>>8)-(13320*g>>8)+8708)}function zt(s,d){return vt((19077*s>>8)+(33050*d>>8)-17685)}function er(s,d,g,S,O){S[O+0]=kt(s,g),S[O+1]=Kt(s,d,g),S[O+2]=zt(s,d)}function xr(s,d,g,S,O){S[O+0]=zt(s,d),S[O+1]=Kt(s,d,g),S[O+2]=kt(s,g)}function wr(s,d,g,S,O){var B=Kt(s,d,g);d=B<<3&224|zt(s,d)>>3,S[O+0]=248&kt(s,g)|B>>5,S[O+1]=d}function Fr(s,d,g,S,O){var B=240&zt(s,d)|15;S[O+0]=240&kt(s,g)|Kt(s,d,g)>>4,S[O+1]=B}function Jr(s,d,g,S,O){S[O+0]=255,er(s,d,g,S,O+1)}function Tr(s,d,g,S,O){xr(s,d,g,S,O),S[O+3]=255}function $n(s,d,g,S,O){er(s,d,g,S,O),S[O+3]=255}function vn(s,d){return 0>s?0:s>d?d:s}function In(s,d,g){T[s]=function(S,O,B,z,W,G,re,ve,Ee){for(var Ie=ve+(-2&Ee)*g;ve!=Ie;)d(S[O+0],B[z+0],W[G+0],re,ve),d(S[O+1],B[z+0],W[G+0],re,ve+g),O+=2,++z,++G,ve+=2*g;1&Ee&&d(S[O+0],B[z+0],W[G+0],re,ve)}}function os(s,d,g){return g==0?s==0?d==0?6:5:d==0?4:0:g}function La(s,d,g,S,O){switch(s>>>30){case 3:_e(d,g,S,O,0);break;case 2:ue(d,g,S,O);break;case 1:me(d,g,S,O)}}function ls(s,d){var g,S,O=d.M,B=d.Nb,z=s.oc,W=s.pc+40,G=s.oc,re=s.pc+584,ve=s.oc,Ee=s.pc+600;for(g=0;16>g;++g)z[W+32*g-1]=129;for(g=0;8>g;++g)G[re+32*g-1]=129,ve[Ee+32*g-1]=129;for(0<O?z[W-1-32]=G[re-1-32]=ve[Ee-1-32]=129:(a(z,W-32-1,127,21),a(G,re-32-1,127,9),a(ve,Ee-32-1,127,9)),S=0;S<s.za;++S){var Ie=d.ya[d.aa+S];if(0<S){for(g=-1;16>g;++g)n(z,W+32*g-4,z,W+32*g+12,4);for(g=-1;8>g;++g)n(G,re+32*g-4,G,re+32*g+4,4),n(ve,Ee+32*g-4,ve,Ee+32*g+4,4)}var Le=s.Gd,Qe=s.Hd+S,ze=Ie.ad,be=Ie.Hc;if(0<O&&(n(z,W-32,Le[Qe].y,0,16),n(G,re-32,Le[Qe].f,0,8),n(ve,Ee-32,Le[Qe].ea,0,8)),Ie.Za){var Ae=z,$e=W-32+16;for(0<O&&(S>=s.za-1?a(Ae,$e,Le[Qe].y[15],4):n(Ae,$e,Le[Qe+1].y,0,4)),g=0;4>g;g++)Ae[$e+128+g]=Ae[$e+256+g]=Ae[$e+384+g]=Ae[$e+0+g];for(g=0;16>g;++g,be<<=2)Ae=z,$e=W+zc[g],vi[Ie.Ob[g]](Ae,$e),La(be,ze,16*+g,Ae,$e)}else if(Ae=os(S,O,Ie.Ob[0]),Ca[Ae](z,W),be!=0)for(g=0;16>g;++g,be<<=2)La(be,ze,16*+g,z,W+zc[g]);for(g=Ie.Gc,Ae=os(S,O,Ie.Dd),fa[Ae](G,re),fa[Ae](ve,Ee),be=ze,Ae=G,$e=re,255&(Ie=g>>0)&&(170&Ie?ke(be,256,Ae,$e):Se(be,256,Ae,$e)),Ie=ve,be=Ee,255&(g>>=8)&&(170&g?ke(ze,320,Ie,be):Se(ze,320,Ie,be)),O<s.Ub-1&&(n(Le[Qe].y,0,z,W+480,16),n(Le[Qe].f,0,G,re+224,8),n(Le[Qe].ea,0,ve,Ee+224,8)),g=8*B*s.B,Le=s.sa,Qe=s.ta+16*S+16*B*s.R,ze=s.qa,Ie=s.ra+8*S+g,be=s.Ha,Ae=s.Ia+8*S+g,g=0;16>g;++g)n(Le,Qe+g*s.R,z,W+32*g,16);for(g=0;8>g;++g)n(ze,Ie+g*s.B,G,re+32*g,8),n(be,Ae+g*s.B,ve,Ee+32*g,8)}}function Pa(s,d,g,S,O,B,z,W,G){var re=[0],ve=[0],Ee=0,Ie=G!=null?G.kd:0,Le=G??new Cr;if(s==null||12>g)return 7;Le.data=s,Le.w=d,Le.ha=g,d=[d],g=[g],Le.gb=[Le.gb];e:{var Qe=d,ze=g,be=Le.gb;if(e(s!=null),e(ze!=null),e(be!=null),be[0]=0,12<=ze[0]&&!t(s,Qe[0],"RIFF")){if(t(s,Qe[0]+8,"WEBP")){be=3;break e}var Ae=lt(s,Qe[0]+4);if(12>Ae||4294967286<Ae){be=3;break e}if(Ie&&Ae>ze[0]-8){be=7;break e}be[0]=Ae,Qe[0]+=12,ze[0]-=12}be=0}if(be!=0)return be;for(Ae=0<Le.gb[0],g=g[0];;){e:{var $e=s;ze=d,be=g;var Ze=re,Ye=ve,Nt=Qe=[0];if((yt=Ee=[Ee])[0]=0,8>be[0])be=7;else{if(!t($e,ze[0],"VP8X")){if(lt($e,ze[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var pt=lt($e,ze[0]+8),Tt=1+Ve($e,ze[0]+12);if(2147483648<=Tt*($e=1+Ve($e,ze[0]+15))){be=3;break e}Nt!=null&&(Nt[0]=pt),Ze!=null&&(Ze[0]=Tt),Ye!=null&&(Ye[0]=$e),ze[0]+=18,be[0]-=18,yt[0]=1}be=0}}if(Ee=Ee[0],Qe=Qe[0],be!=0)return be;if(ze=!!(2&Qe),!Ae&&Ee)return 3;if(B!=null&&(B[0]=!!(16&Qe)),z!=null&&(z[0]=ze),W!=null&&(W[0]=0),z=re[0],Qe=ve[0],Ee&&ze&&G==null){be=0;break}if(4>g){be=7;break}if(Ae&&Ee||!Ae&&!Ee&&!t(s,d[0],"ALPH")){g=[g],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{pt=s,be=d,Ae=g;var yt=Le.gb;Ze=Le.na,Ye=Le.P,Nt=Le.Sa,Tt=22,e(pt!=null),e(Ae!=null),$e=be[0];var ar=Ae[0];for(e(Ze!=null),e(Nt!=null),Ze[0]=null,Ye[0]=null,Nt[0]=0;;){if(be[0]=$e,Ae[0]=ar,8>ar){be=7;break e}var cr=lt(pt,$e+4);if(4294967286<cr){be=3;break e}var ir=8+cr+1&-2;if(Tt+=ir,0<yt&&Tt>yt){be=3;break e}if(!t(pt,$e,"VP8 ")||!t(pt,$e,"VP8L")){be=0;break e}if(ar[0]<ir){be=7;break e}t(pt,$e,"ALPH")||(Ze[0]=pt,Ye[0]=$e+8,Nt[0]=cr),$e+=ir,ar-=ir}}if(g=g[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],be!=0)break}g=[g],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(yt=s,be=d,Ae=g,Ze=Le.gb[0],Ye=Le.Ja,Nt=Le.xa,pt=be[0],$e=!t(yt,pt,"VP8 "),Tt=!t(yt,pt,"VP8L"),e(yt!=null),e(Ae!=null),e(Ye!=null),e(Nt!=null),8>Ae[0])be=7;else{if($e||Tt){if(yt=lt(yt,pt+4),12<=Ze&&yt>Ze-12){be=3;break e}if(Ie&&yt>Ae[0]-8){be=7;break e}Ye[0]=yt,be[0]+=8,Ae[0]-=8,Nt[0]=Tt}else Nt[0]=5<=Ae[0]&&yt[pt+0]==47&&!(yt[pt+4]>>5),Ye[0]=Ae[0];be=0}if(g=g[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],d=d[0],be!=0)break;if(4294967286<Le.Ja)return 3;if(W==null||ze||(W[0]=Le.xa?2:1),z=[z],Qe=[Qe],Le.xa){if(5>g){be=7;break}W=z,Ie=Qe,ze=B,s==null||5>g?s=0:5<=g&&s[d+0]==47&&!(s[d+4]>>5)?(Ae=[0],yt=[0],Ze=[0],ne(Ye=new j,s,d,g),xt(Ye,Ae,yt,Ze)?(W!=null&&(W[0]=Ae[0]),Ie!=null&&(Ie[0]=yt[0]),ze!=null&&(ze[0]=Ze[0]),s=1):s=0):s=0}else{if(10>g){be=7;break}W=Qe,s==null||10>g||!Xa(s,d+3,g-3)?s=0:(Ie=s[d+0]|s[d+1]<<8|s[d+2]<<16,ze=16383&(s[d+7]<<8|s[d+6]),s=16383&(s[d+9]<<8|s[d+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=Le.Ja||!ze||!s?s=0:(z&&(z[0]=ze),W&&(W[0]=s),s=1))}if(!s||(z=z[0],Qe=Qe[0],Ee&&(re[0]!=z||ve[0]!=Qe)))return 3;G!=null&&(G[0]=Le,G.offset=d-G.w,e(4294967286>d-G.w),e(G.offset==G.ha-g));break}return be==0||be==7&&Ee&&G==null?(B!=null&&(B[0]|=Le.na!=null&&0<Le.na.length),S!=null&&(S[0]=z),O!=null&&(O[0]=Qe),0):be}function cs(s,d,g){var S=d.width,O=d.height,B=0,z=0,W=S,G=O;if(d.Da=s!=null&&0<s.Da,d.Da&&(W=s.cd,G=s.bd,B=s.v,z=s.j,11>g||(B&=-2,z&=-2),0>B||0>z||0>=W||0>=G||B+W>S||z+G>O))return 0;if(d.v=B,d.j=z,d.va=B+W,d.o=z+G,d.U=W,d.T=G,d.da=s!=null&&0<s.da,d.da){if(!Mt(W,G,g=[s.ib],B=[s.hb]))return 0;d.ib=g[0],d.hb=B[0]}return d.ob=s!=null&&s.ob,d.Kb=s==null||!s.Sd,d.da&&(d.ob=d.ib<3*S/4&&d.hb<3*O/4,d.Kb=0),1}function Ri(s){if(s==null)return 2;if(11>s.S){var d=s.f.RGBA;d.fb+=(s.height-1)*d.A,d.A=-d.A}else d=s.f.kb,s=s.height,d.O+=(s-1)*d.fa,d.fa=-d.fa,d.N+=(s-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(s-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(s-1)*d.lb,d.lb=-d.lb);return 0}function bn(s,d,g,S){if(S==null||0>=s||0>=d)return 2;if(g!=null){if(g.Da){var O=g.cd,B=g.bd,z=-2&g.v,W=-2&g.j;if(0>z||0>W||0>=O||0>=B||z+O>s||W+B>d)return 2;s=O,d=B}if(g.da){if(!Mt(s,d,O=[g.ib],B=[g.hb]))return 2;s=O[0],d=B[0]}}S.width=s,S.height=d;e:{var G=S.width,re=S.height;if(s=S.S,0>=G||0>=re||!(s>=Lo&&13>s))s=2;else{if(0>=S.Rd&&S.sd==null){z=B=O=d=0;var ve=(W=G*Hc[s])*re;if(11>s||(B=(re+1)/2*(d=(G+1)/2),s==12&&(z=(O=G)*re)),(re=i(ve+2*B+z))==null){s=1;break e}S.sd=re,11>s?((G=S.f.RGBA).eb=re,G.fb=0,G.A=W,G.size=ve):((G=S.f.kb).y=re,G.O=0,G.fa=W,G.Fd=ve,G.f=re,G.N=0+ve,G.Ab=d,G.Cd=B,G.ea=re,G.W=0+ve+B,G.Db=d,G.Ed=B,s==12&&(G.F=re,G.J=0+ve+2*B),G.Tc=z,G.lb=O)}if(d=1,O=S.S,B=S.width,z=S.height,O>=Lo&&13>O)if(11>O)s=S.f.RGBA,d&=(W=Math.abs(s.A))*(z-1)+B<=s.size,d&=W>=B*Hc[O],d&=s.eb!=null;else{s=S.f.kb,W=(B+1)/2,ve=(z+1)/2,G=Math.abs(s.fa),re=Math.abs(s.Ab);var Ee=Math.abs(s.Db),Ie=Math.abs(s.lb),Le=Ie*(z-1)+B;d&=G*(z-1)+B<=s.Fd,d&=re*(ve-1)+W<=s.Cd,d=(d&=Ee*(ve-1)+W<=s.Ed)&G>=B&re>=W&Ee>=W,d&=s.y!=null,d&=s.f!=null,d&=s.ea!=null,O==12&&(d&=Ie>=B,d&=Le<=s.Tc,d&=s.F!=null)}else d=0;s=d?0:2}}return s!=0||g!=null&&g.fd&&(s=Ri(S)),s}var Xt=64,mi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xr=24,ka=32,ca=8,hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];J("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(s){return s},T.Predictor2=function(s,d,g){return d[g+0]},T.Predictor3=function(s,d,g){return d[g+1]},T.Predictor4=function(s,d,g){return d[g-1]},T.Predictor5=function(s,d,g){return xe(xe(s,d[g+1]),d[g+0])},T.Predictor6=function(s,d,g){return xe(s,d[g-1])},T.Predictor7=function(s,d,g){return xe(s,d[g+0])},T.Predictor8=function(s,d,g){return xe(d[g-1],d[g+0])},T.Predictor9=function(s,d,g){return xe(d[g+0],d[g+1])},T.Predictor10=function(s,d,g){return xe(xe(s,d[g-1]),xe(d[g+0],d[g+1]))},T.Predictor11=function(s,d,g){var S=d[g+0];return 0>=Ue(S>>24&255,s>>24&255,(d=d[g-1])>>24&255)+Ue(S>>16&255,s>>16&255,d>>16&255)+Ue(S>>8&255,s>>8&255,d>>8&255)+Ue(255&S,255&s,255&d)?S:s},T.Predictor12=function(s,d,g){var S=d[g+0];return(Be((s>>24&255)+(S>>24&255)-((d=d[g-1])>>24&255))<<24|Be((s>>16&255)+(S>>16&255)-(d>>16&255))<<16|Be((s>>8&255)+(S>>8&255)-(d>>8&255))<<8|Be((255&s)+(255&S)-(255&d)))>>>0},T.Predictor13=function(s,d,g){var S=d[g-1];return(Ge((s=xe(s,d[g+0]))>>24&255,S>>24&255)<<24|Ge(s>>16&255,S>>16&255)<<16|Ge(s>>8&255,S>>8&255)<<8|Ge(s>>0&255,S>>0&255))>>>0};var gi=T.PredictorAdd0;T.PredictorAdd1=Xe,J("Predictor2","PredictorAdd2"),J("Predictor3","PredictorAdd3"),J("Predictor4","PredictorAdd4"),J("Predictor5","PredictorAdd5"),J("Predictor6","PredictorAdd6"),J("Predictor7","PredictorAdd7"),J("Predictor8","PredictorAdd8"),J("Predictor9","PredictorAdd9"),J("Predictor10","PredictorAdd10"),J("Predictor11","PredictorAdd11"),J("Predictor12","PredictorAdd12"),J("Predictor13","PredictorAdd13");var ua=T.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(s){return s>>8&255},function(s){return s}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(s){return s},function(s){return s>>8&255});var yi,Mr=T.ColorIndexInverseTransform,da=T.MapARGB,l=T.VP8LColorIndexInverseTransformAlpha,f=T.MapAlpha,v=T.VP8LPredictorsAdd=[];v.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var _,D,U,ee,ce,ye,Ne,_e,ue,ke,me,Se,Pe,je,Te,Me,Re,Ke,nt,dt,it,st,ht,ot,ft,St,At,Ct,nr=i(511),It=i(2041),Dr=i(225),kr=i(767),ha=0,Zr=It,ri=Dr,fn=kr,ni=nr,Lo=0,Po=1,Fc=2,ko=3,Co=4,xl=5,Dc=6,wl=7,Nl=8,Fo=9,Sl=10,rh=[2,3,7],nh=[3,3,11],Ec=[280,256,256,256,40],ih=[0,1,1,1,0],ah=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],oh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lh=8,jl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Al=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xs=null,ch=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],uh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ic=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ph=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ca=[],vi=[],fa=[],mh=1,Oc=2,Fa=[],ii=[];We("UpsampleRgbLinePair",er,3),We("UpsampleBgrLinePair",xr,3),We("UpsampleRgbaLinePair",$n,4),We("UpsampleBgraLinePair",Tr,4),We("UpsampleArgbLinePair",Jr,4),We("UpsampleRgba4444LinePair",Fr,2),We("UpsampleRgb565LinePair",wr,2);var gh=T.UpsampleRgbLinePair,yh=T.UpsampleBgrLinePair,Tc=T.UpsampleRgbaLinePair,Mc=T.UpsampleBgraLinePair,Rc=T.UpsampleArgbLinePair,qc=T.UpsampleRgba4444LinePair,vh=T.UpsampleRgb565LinePair,Do=16,Eo=1<<Do-1,Zs=-227,_l=482,Bc=6,bh=(256<<Bc)-1,Uc=0,xh=i(256),wh=i(256),Nh=i(256),Sh=i(256),jh=i(_l-Zs),Ah=i(_l-Zs);In("YuvToRgbRow",er,3),In("YuvToBgrRow",xr,3),In("YuvToRgbaRow",$n,4),In("YuvToBgraRow",Tr,4),In("YuvToArgbRow",Jr,4),In("YuvToRgba4444Row",Fr,2),In("YuvToRgb565Row",wr,2);var zc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Io=[0,2,8],_h=[8,7,6,4,4,2,2,2,1,1,1,1],Lh=1;this.WebPDecodeRGBA=function(s,d,g,S,O){var B=Po,z=new Oi,W=new un;z.ba=W,W.S=B,W.width=[W.width],W.height=[W.height];var G=W.width,re=W.height,ve=new rn;if(ve==null||s==null)var Ee=2;else e(ve!=null),Ee=Pa(s,d,g,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Ee!=0?G=0:(G!=null&&(G[0]=ve.width[0]),re!=null&&(re[0]=ve.height[0]),G=1),G){W.width=W.width[0],W.height=W.height[0],S!=null&&(S[0]=W.width),O!=null&&(O[0]=W.height);e:{if(S=new Yi,(O=new Cr).data=s,O.w=d,O.ha=g,O.kd=1,d=[0],e(O!=null),((s=Pa(O.data,O.w,O.ha,null,null,null,d,null,O))==0||s==7)&&d[0]&&(s=4),(d=s)==0){if(e(z!=null),S.data=O.data,S.w=O.w+O.offset,S.ha=O.ha-O.offset,S.put=mt,S.ac=De,S.bc=Et,S.ma=z,O.xa){if((s=Fn())==null){z=1;break e}if(function(Ie,Le){var Qe=[0],ze=[0],be=[0];t:for(;;){if(Ie==null)return 0;if(Le==null)return Ie.a=2,0;if(Ie.l=Le,Ie.a=0,ne(Ie.m,Le.data,Le.w,Le.ha),!xt(Ie.m,Qe,ze,be)){Ie.a=3;break t}if(Ie.xb=Oc,Le.width=Qe[0],Le.height=ze[0],!Yr(Qe[0],ze[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0}(s,S)){if(S=(d=bn(S.width,S.height,z.Oa,z.ba))==0){t:{S=s;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((g=S.l)!=null),e((O=g.ma)!=null),S.xb!=0){if(S.ca=O.ba,S.tb=O.tb,e(S.ca!=null),!cs(O.Oa,g,ko)){S.a=2;break r}if(!Pi(S,g.width)||g.da)break r;if((g.da||Vt(S.ca.S))&&Ce(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&Ce()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!Ft(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Kr(S,S.V,S.Ba,S.c,S.i,g.o,si))break r;O.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(d=s.a)}else d=s.a}else{if((s=new Jt)==null){z=1;break e}if(s.Fa=O.na,s.P=O.P,s.qc=O.Sa,Za(s,S)){if((d=bn(S.width,S.height,z.Oa,z.ba))==0){if(s.Aa=0,g=z.Oa,e((O=s)!=null),g!=null){if(0<(G=0>(G=g.Md)?0:100<G?255:255*G/100)){for(re=ve=0;4>re;++re)12>(Ee=O.pb[re]).lc&&(Ee.ia=G*_h[0>Ee.lc?0:Ee.lc]>>3),ve|=Ee.ia;ve&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=g.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}Qi(s,S)||(d=s.a)}}else d=s.a}d==0&&z.Oa!=null&&z.Oa.fd&&(d=Ri(z.ba))}z=d}B=z!=0?null:11>B?W.f.RGBA.eb:W.f.kb.y}else B=null;return B};var Hc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(T,Z){for(var oe="",C=0;C<4;C++)oe+=String.fromCharCode(T[Z++]);return oe}function x(T,Z){return(T[Z+0]<<0|T[Z+1]<<8|T[Z+2]<<16)>>>0}function b(T,Z){return(T[Z+0]<<0|T[Z+1]<<8|T[Z+2]<<16|T[Z+3]<<24)>>>0}new h;var w=[0],m=[0],P=[],L=new h,E=r,k=function(T,Z){var oe={},C=0,N=!1,R=0,V=0;if(oe.frames=[],!function(H,Q,te,ae){for(var we=0;we<ae;we++)if(H[Q+we]!=te.charCodeAt(we))return!0;return!1}(T,Z,"RIFF",4)){var he,$;for(b(T,Z+=4),Z+=8;Z<T.length;){var Y=y(T,Z),ne=b(T,Z+=4);Z+=4;var ie=ne+(1&ne);switch(Y){case"VP8 ":case"VP8L":oe.frames[C]===void 0&&(oe.frames[C]={}),(j=oe.frames[C]).src_off=N?V:Z-8,j.src_size=R+ne+8,C++,N&&(N=!1,R=0,V=0);break;case"VP8X":(j=oe.header={}).feature_flags=T[Z];var ge=Z+4;j.canvas_width=1+x(T,ge),ge+=3,j.canvas_height=1+x(T,ge),ge+=3;break;case"ALPH":N=!0,R=ie+8,V=Z-8;break;case"ANIM":(j=oe.header).bgcolor=b(T,Z),ge=Z+4,j.loop_count=(he=T)[($=ge)+0]<<0|he[$+1]<<8,ge+=2;break;case"ANMF":var Oe,j;(j=oe.frames[C]={}).offset_x=2*x(T,Z),Z+=3,j.offset_y=2*x(T,Z),Z+=3,j.width=1+x(T,Z),Z+=3,j.height=1+x(T,Z),Z+=3,j.duration=x(T,Z),Z+=3,Oe=T[Z++],j.dispose=1&Oe,j.blend=Oe>>1&1}Y!="ANMF"&&(Z+=ie)}return oe}}(E,0);k.response=E,k.rgbaoutput=!0,k.dataurl=!1;var A=k.header?k.header:null,F=k.frames?k.frames:null;if(A){A.loop_counter=A.loop_count,w=[A.canvas_height],m=[A.canvas_width];for(var q=0;q<F.length&&F[q].blend!=0;q++);}var K=F[0],X=L.WebPDecodeRGBA(E,K.src_off,K.src_size,m,w);K.rgba=X,K.imgwidth=m[0],K.imgheight=w[0];for(var M=0;M<m[0]*w[0]*4;M++)P[M]=X[M];return this.width=m,this.height=w,this.data=P,this}(function(r){var e=function(){return typeof hc=="function"},t=function(w,m,P,L){var E=4,k=c;switch(L){case r.image_compression.FAST:E=1,k=i;break;case r.image_compression.MEDIUM:E=6,k=u;break;case r.image_compression.SLOW:E=9,k=h}w=n(w,m,P,k);var A=hc(w,{level:E});return r.__addimage__.arrayBufferToBinaryString(A)},n=function(w,m,P,L){for(var E,k,A,F=w.length/m,q=new Uint8Array(w.length+F),K=x(),X=0;X<F;X+=1){if(A=X*m,E=w.subarray(A,A+m),L)q.set(L(E,P,k),A+X);else{for(var M,T=K.length,Z=[];M<T;M+=1)Z[M]=K[M](E,P,k);var oe=b(Z.concat());q.set(Z[oe],A+X)}k=E}return q},a=function(w){var m=Array.apply([],w);return m.unshift(0),m},i=function(w,m){var P,L=[],E=w.length;L[0]=1;for(var k=0;k<E;k+=1)P=w[k-m]||0,L[k+1]=w[k]-P+256&255;return L},c=function(w,m,P){var L,E=[],k=w.length;E[0]=2;for(var A=0;A<k;A+=1)L=P&&P[A]||0,E[A+1]=w[A]-L+256&255;return E},u=function(w,m,P){var L,E,k=[],A=w.length;k[0]=3;for(var F=0;F<A;F+=1)L=w[F-m]||0,E=P&&P[F]||0,k[F+1]=w[F]+256-(L+E>>>1)&255;return k},h=function(w,m,P){var L,E,k,A,F=[],q=w.length;F[0]=4;for(var K=0;K<q;K+=1)L=w[K-m]||0,E=P&&P[K]||0,k=P&&P[K-m]||0,A=y(L,E,k),F[K+1]=w[K]-A+256&255;return F},y=function(w,m,P){if(w===m&&m===P)return w;var L=Math.abs(m-P),E=Math.abs(w-P),k=Math.abs(w+m-P-P);return L<=E&&L<=k?w:E<=k?m:P},x=function(){return[a,i,c,u,h]},b=function(w){var m=w.map(function(P){return P.reduce(function(L,E){return L+Math.abs(E)},0)});return m.indexOf(Math.min.apply(null,m))};r.processPNG=function(w,m,P,L){var E,k,A,F,q,K,X,M,T,Z,oe,C,N,R,V,he=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(A=new Vm(w)).imgData,k=A.bits,E=A.colorSpace,q=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){T=(M=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,oe=new Uint8Array(T*A.colors),Z=new Uint8Array(T);var Y,ne=A.pixelBitlength-A.bits;for(R=0,V=0;R<T;R++){for(N=M[R],Y=0;Y<ne;)oe[V++]=N>>>Y&255,Y+=A.bits;Z[R]=N>>>Y&255}}if(A.bits===16){T=(M=new Uint32Array(A.decodePixels().buffer)).length,oe=new Uint8Array(T*(32/A.pixelBitlength)*A.colors),Z=new Uint8Array(T*(32/A.pixelBitlength)),C=A.colors>1,R=0,V=0;for(var ie=0;R<T;)N=M[R++],oe[V++]=N>>>0&255,C&&(oe[V++]=N>>>16&255,N=M[R++],oe[V++]=N>>>0&255),Z[ie++]=N>>>16&255;k=8}L!==r.image_compression.NONE&&e()?(w=t(oe,A.width*A.colors,A.colors,L),X=t(Z,A.width,1,L)):(w=oe,X=Z,he=void 0)}if(A.colorType===3&&(E=this.color_spaces.INDEXED,K=A.palette,A.transparency.indexed)){var ge=A.transparency.indexed,Oe=0;for(R=0,T=ge.length;R<T;++R)Oe+=ge[R];if((Oe/=255)===T-1&&ge.indexOf(0)!==-1)F=[ge.indexOf(0)];else if(Oe!==T){for(M=A.decodePixels(),Z=new Uint8Array(M.length),R=0,T=M.length;R<T;R++)Z[R]=ge[M[R]];X=t(Z,A.width,1)}}var j=function(H){var Q;switch(H){case r.image_compression.FAST:Q=11;break;case r.image_compression.MEDIUM:Q=13;break;case r.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(L);return he===this.decode.FLATE_DECODE&&($="/Predictor "+j+" "),$+="/Colors "+q+" /BitsPerComponent "+k+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(X&&this.__addimage__.isArrayBuffer(X)||this.__addimage__.isArrayBufferView(X))&&(X=this.__addimage__.arrayBufferToBinaryString(X)),{alias:P,data:w,index:m,filter:he,decodeParameters:$,transparency:F,palette:K,sMask:X,predictor:j,width:A.width,height:A.height,bitsPerComponent:k,colorSpace:E}}}})(Ot.API),function(r){r.processGIF89A=function(e,t,n,a){var i=new Gm(e),c=i.width,u=i.height,h=[];i.decodeAndBlitFrameRGBA(0,h);var y={data:h,width:c,height:u},x=new Jl(100).encode(y,100);return r.processJPEG.call(this,x,t,n,a)},r.processGIF87A=r.processGIF89A}(Ot.API),wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){yr.log("bit decode error:"+t)}},wi.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*a*4,u=0;u<8&&8*a+u<this.width;u++){var h=this.palette[i>>7-u&1];this.data[c+4*u]=h.blue,this.data[c+4*u+1]=h.green,this.data[c+4*u+2]=h.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},wi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*a*4,u=i>>4,h=15&i,y=this.palette[u];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*a+1>=this.width)break;y=this.palette[h],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},wi.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;if(a<this.palette.length){var c=this.palette[a];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},wi.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&e)/e*255|0,u=(i>>5&e)/e*255|0,h=(i>>10&e)/e*255|0,y=i>>15?255:0,x=n*this.width*4+4*a;this.data[x]=h,this.data[x+1]=u,this.data[x+2]=c,this.data[x+3]=y}this.pos+=r}},wi.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,y=(c>>11)/e*255|0,x=a*this.width*4+4*i;this.data[x]=y,this.data[x+1]=h,this.data[x+2]=u,this.data[x+3]=255}this.pos+=r}},wi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},wi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=i,this.data[u+1]=a,this.data[u+2]=n,this.data[u+3]=c}},wi.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,a){var i=new wi(e,!1),c=i.width,u=i.height,h={data:i.getData(),width:c,height:u},y=new Jl(100).encode(h,100);return r.processJPEG.call(this,y,t,n,a)}}(Ot.API),Ju.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,a){var i=new Ju(e),c=i.width,u=i.height,h={data:i.getData(),width:c,height:u},y=new Jl(100).encode(h,100);return r.processJPEG.call(this,y,t,n,a)}}(Ot.API),Ot.API.processRGBA=function(r,e,t){for(var n=r.data,a=n.length,i=new Uint8Array(a/4*3),c=new Uint8Array(a/4),u=0,h=0,y=0;y<a;y+=4){var x=n[y],b=n[y+1],w=n[y+2],m=n[y+3];i[u++]=x,i[u++]=b,i[u++]=w,c[h++]=m}var P=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ot.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bs=Ot.API,Yo=Bs.getCharWidthsArray=function(r,e){var t,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:a.metadata.Unicode.widths,h=u.fof?u.fof:1,y=e.kerning?e.kerning:a.metadata.Unicode.kerning,x=y.fof?y.fof:1,b=e.doKerning!==!1,w=0,m=r.length,P=0,L=u[0]||h,E=[];for(t=0;t<m;t++)n=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+c*(1e3/i)||0)/1e3):(w=b&&br(y[n])==="object"&&!isNaN(parseInt(y[n][P],10))?y[n][P]/x:0,E.push((u[n]||L)/h+w)),P=n;return E},Gu=Bs.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Bs.processArabic&&(r=Bs.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,a)/t:Yo.apply(this,arguments).reduce(function(i,c){return i+c},0)},$u=function(r,e,t,n){for(var a=[],i=0,c=r.length,u=0;i!==c&&u+e[i]<t;)u+=e[i],i++;a.push(r.slice(0,i));var h=i;for(u=0;i!==c;)u+e[i]>n&&(a.push(r.slice(h,i)),u=0,h=i),u+=e[i],i++;return h!==i&&a.push(r.slice(h,i)),a},Yu=function(r,e,t){t||(t={});var n,a,i,c,u,h,y,x=[],b=[x],w=t.textIndent||0,m=0,P=0,L=r.split(" "),E=Yo.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?L[0].length+2:t.lineIndent||0){var k=Array(h).join(" "),A=[];L.map(function(q){(q=q.split(/\s*\n/)).length>1?A=A.concat(q.map(function(K,X){return(X&&K.length?`
`:"")+K})):A.push(q[0])}),L=A,h=Gu.apply(this,[k,t])}for(i=0,c=L.length;i<c;i++){var F=0;if(n=L[i],h&&n[0]==`
`&&(n=n.substr(1),F=1),w+m+(P=(a=Yo.apply(this,[n,t])).reduce(function(q,K){return q+K},0))>e||F){if(P>e){for(u=$u.apply(this,[n,a,e-(w+m),e]),x.push(u.shift()),x=[u.pop()];u.length;)b.push([u.shift()]);P=a.slice(n.length-(x[0]?x[0].length:0)).reduce(function(q,K){return q+K},0)}else x=[n];b.push(x),w=P+h,m=E}else x.push(n),w+=m+P,m=E}return y=h?function(q,K){return(K?k:"")+q.join(" ")}:function(q){return q.join(" ")},b.map(y)},Bs.splitTextToSize=function(r,e,t){var n,a=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var b=this.internal.getFont(x.fontName,x.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=t.lineIndent;var u,h,y=[];for(u=0,h=n.length;u<h;u++)y=y.concat(Yu.apply(this,[n[u],c,i]));return y},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},a=0;a<e.length;a++)t[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var i=function(b){return"0x"+parseInt(b,10).toString(16)},c=r.__fontmetrics__.compress=function(b){var w,m,P,L,E=["{"];for(var k in b){if(w=b[k],isNaN(parseInt(k,10))?m="'"+k+"'":(k=parseInt(k,10),m=(m=i(k).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof w=="number")w<0?(P=i(w).slice(3),L="-"):(P=i(w).slice(2),L=""),P=L+P.slice(0,-1)+n[P.slice(-1)];else{if(br(w)!=="object")throw new Error("Don't know what to do with value type "+br(w)+".");P=c(w)}E.push(m+P)}return E.push("}"),E.join("")},u=r.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,m,P,L,E={},k=1,A=E,F=[],q="",K="",X=b.length-1,M=1;M<X;M+=1)(L=b[M])=="'"?w?(P=w.join(""),w=void 0):w=[]:w?w.push(L):L=="{"?(F.push([A,P]),A={},P=void 0):L=="}"?((m=F.pop())[0][m[1]]=A,P=void 0,A=m[0]):L=="-"?k=-1:P===void 0?t.hasOwnProperty(L)?(q+=t[L],P=parseInt(q,16)*k,k=1,q=""):q+=L:t.hasOwnProperty(L)?(K+=t[L],A[P]=parseInt(K,16)*k,k=1,P=void 0,K=""):K+=L;return E},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},x={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(b){var w=b.font,m=x.Unicode[w.postScriptName];m&&(w.metadata.Unicode={},w.metadata.Unicode.widths=m.widths,w.metadata.Unicode.kerning=m.kerning);var P=y.Unicode[w.postScriptName];P&&(w.metadata.Unicode.encoding=P,w.encoding=P.codePages[0])}])}(Ot.API),function(r){var e=function(t){for(var n=t.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a};r.API.events.push(["addFont",function(t){var n=void 0,a=t.font,i=t.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(fo(u)),c.metadata=r.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ot),function(r){function e(){return(Ut.canvg?Promise.resolve(Ut.canvg):cl(()=>import("./index.es-3c3c1151.js"),["./index.es-3c3c1151.js","./vendor-36f7ab30.js","./utils-570e0bc6.js"],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ot.API.addSvgAsImage=function(t,n,a,i,c,u,h,y){if(isNaN(n)||isNaN(a))throw yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(c))throw yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=i,x.height=c;var b=x.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,x.width,x.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(P){return P.fromString(b,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(w)}).then(function(){m.addImage(x.toDataURL("image/jpeg",1),n,a,i,c,h,y)})}}(),Ot.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,t);return this},Ot.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,a,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),h=[],y=0,x=0,b=0;function w(P,L){var E,k=!1;for(E=0;E<P.length;E+=1)P[E]===L&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var m=u.length;for(b=0;b<m;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(br(r)==="object"){for(a in r)if(i=r[a],w(u,a)&&i!==void 0){if(t[a].type==="boolean"&&typeof i=="boolean")t[a].value=i;else if(t[a].type==="name"&&w(t[a].valueSet,i))t[a].value=i;else if(t[a].type==="integer"&&Number.isInteger(i))t[a].value=i;else if(t[a].type==="array"){for(y=0;y<i.length;y+=1)if(n=!0,i[y].length===1&&typeof i[y][0]=="number")h.push(String(i[y]-1));else if(i[y].length>1){for(x=0;x<i[y].length;x+=1)typeof i[y][x]!="number"&&(n=!1);n===!0&&h.push([i[y][0]-1,i[y][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,L=[];for(P in t)t[P].explicitSet===!0&&(t[P].type==="name"?L.push("/"+P+" /"+t[P].value):L.push("/"+P+" "+t[P].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),y=i.length+c.length+u.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(a+i+c+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ot.API),function(r){var e=r.API,t=e.pdfEscape16=function(i,c){for(var u,h=c.metadata.Unicode.widths,y=["","0","00","000","0000"],x=[""],b=0,w=i.length;b<w;++b){if(u=c.metadata.characterToGlyph(i.charCodeAt(b)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=i.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return x.join("");u=u.toString(16),x.push(y[4-u.length],u)}return x.join("")},n=function(i){var c,u,h,y,x,b,w;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,w=(u=Object.keys(i).sort(function(m,P){return m-P})).length;b<w;b++)c=u[b],h.length>=100&&(x+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(y=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+y+">"));return h.length&&(x+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(c){var u=c.font,h=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),m="",P=0;P<w.length;P++)m+=String.fromCharCode(w[P]);var L=y();x({data:m,addLength1:!0,objectId:L}),h("endobj");var E=y();x({data:n(u.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var k=y();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Hs(u.fontName)),h("/FontFile2 "+L+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var A=y();h("<<"),h("/Type /Font"),h("/BaseFont /"+Hs(u.fontName)),h("/FontDescriptor "+k+" 0 R"),h("/W "+r.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=y(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+E+" 0 R"),h("/BaseFont /"+Hs(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+A+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(c){var u=c.font,h=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,w="",m=0;m<b.length;m++)w+=String.fromCharCode(b[m]);var P=y();x({data:w,addLength1:!0,objectId:P}),h("endobj");var L=y();x({data:n(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var E=y();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+P+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Hs(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=y();for(var k=0;k<u.metadata.hmtx.widths.length;k++)u.metadata.hmtx.widths[k]=parseInt(u.metadata.hmtx.widths[k]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Hs(u.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(i)}]);var a=function(i){var c,u=i.text||"",h=i.x,y=i.y,x=i.options||{},b=i.mutex||{},w=b.pdfEscape,m=b.activeFontKey,P=b.fonts,L=m,E="",k=0,A="",F=P[L].encoding;if(P[L].encoding!=="Identity-H")return{text:u,x:h,y,options:x,mutex:b};for(A=u,L=m,Array.isArray(u)&&(A=u[0]),k=0;k<A.length;k+=1)P[L].metadata.hasOwnProperty("cmap")&&(c=P[L].metadata.cmap.unicode.codeMap[A[k].charCodeAt(0)]),c||A[k].charCodeAt(0)<256&&P[L].metadata.hasOwnProperty("Unicode")?E+=A[k]:E+="";var q="";return parseInt(L.slice(1))<14||F==="WinAnsiEncoding"?q=w(E,L).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(q=t(E,P[L])),b.isHex=!0,{text:q,x:h,y,options:x,mutex:b}};e.events.push(["postProcessText",function(i){var c=i.text||"",u=[],h={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?u.push([a(Object.assign({},h,{text:c[y][0]})).text,c[y][1],c[y][2]]):u.push(a(Object.assign({},h,{text:c[y]})).text);i.text=u}else i.text=a(Object.assign({},h,{text:c})).text}])}(Ot),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ot.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var a,i,c,u,h,y,x,b=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,F=0;this.__bidiEngine__={};var q=function(C){var N=C.charCodeAt(),R=N>>8,V=L[R];return V!==void 0?b[256*V+(255&N)]:R===252||R===253?"AL":k.test(R)?"L":R===8?"R":"N"},K=function(C){for(var N,R=0;R<C.length;R++){if((N=q(C.charAt(R)))==="L")return!1;if(N==="R")return!0}return!1},X=function(C,N,R,V){var he,$,Y,ne,ie=N[V];switch(ie){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(ie="AN");break;case"AL":A=!0,ie="R";break;case"WS":ie="N";break;case"CS":V<1||V+1>=N.length||(he=R[V-1])!=="EN"&&he!=="AN"||($=N[V+1])!=="EN"&&$!=="AN"?ie="N":A&&($="AN"),ie=$===he?$:"N";break;case"ES":ie=(he=V>0?R[V-1]:"B")==="EN"&&V+1<N.length&&N[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&R[V-1]==="EN"){ie="EN";break}if(A){ie="N";break}for(Y=V+1,ne=N.length;Y<ne&&N[Y]==="ET";)Y++;ie=Y<ne&&N[Y]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ne=N.length,Y=V+1;Y<ne&&N[Y]==="NSM";)Y++;if(Y<ne){var ge=C[V],Oe=ge>=1425&&ge<=2303||ge===64286;if(he=N[Y],Oe&&(he==="R"||he==="AL")){ie="R";break}}}ie=V<1||(he=N[V-1])==="B"?"N":R[V-1];break;case"B":A=!1,a=!0,ie=F;break;case"S":i=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":ie="N"}return ie},M=function(C,N,R){var V=C.split("");return R&&T(V,R,{hiLevel:F}),V.reverse(),N&&N.reverse(),V.join("")},T=function(C,N,R){var V,he,$,Y,ne,ie=-1,ge=C.length,Oe=0,j=[],H=F?m:w,Q=[];for(A=!1,a=!1,i=!1,he=0;he<ge;he++)Q[he]=q(C[he]);for($=0;$<ge;$++){if(ne=Oe,j[$]=X(C,Q,j,$),V=240&(Oe=H[ne][P[j[$]]]),Oe&=15,N[$]=Y=H[Oe][5],V>0)if(V===16){for(he=ie;he<$;he++)N[he]=1;ie=-1}else ie=-1;if(H[Oe][6])ie===-1&&(ie=$);else if(ie>-1){for(he=ie;he<$;he++)N[he]=Y;ie=-1}Q[$]==="B"&&(N[$]=0),R.hiLevel|=Y}i&&function(te,ae,we){for(var Fe=0;Fe<we;Fe++)if(te[Fe]==="S"){ae[Fe]=F;for(var fe=Fe-1;fe>=0&&te[fe]==="WS";fe--)ae[fe]=F}}(Q,N,ge)},Z=function(C,N,R,V,he){if(!(he.hiLevel<C)){if(C===1&&F===1&&!a)return N.reverse(),void(R&&R.reverse());for(var $,Y,ne,ie,ge=N.length,Oe=0;Oe<ge;){if(V[Oe]>=C){for(ne=Oe+1;ne<ge&&V[ne]>=C;)ne++;for(ie=Oe,Y=ne-1;ie<Y;ie++,Y--)$=N[ie],N[ie]=N[Y],N[Y]=$,R&&($=R[ie],R[ie]=R[Y],R[Y]=$);Oe=ne}Oe++}}},oe=function(C,N,R){var V=C.split(""),he={hiLevel:F};return R||(R=[]),T(V,R,he),function($,Y,ne){if(ne.hiLevel!==0&&x)for(var ie,ge=0;ge<$.length;ge++)Y[ge]===1&&(ie=E.indexOf($[ge]))>=0&&($[ge]=E[ie+1])}(V,R,he),Z(2,V,N,R,he),Z(1,V,N,R,he),V.join("")};return this.__bidiEngine__.doBidiReorder=function(C,N,R){if(function(he,$){if($)for(var Y=0;Y<he.length;Y++)$[Y]=Y;u===void 0&&(u=K(he)),y===void 0&&(y=K(he))}(C,N),c||!h||y)if(c&&h&&u^y)F=u?1:0,C=M(C,N,R);else if(!c&&h&&y)F=u?1:0,C=oe(C,N,R),C=M(C,N);else if(!c||u||h||y){if(c&&!h&&u^y)C=M(C,N),u?(F=0,C=oe(C,N,R)):(F=1,C=oe(C,N,R),C=M(C,N));else if(c&&u&&!h&&y)F=1,C=oe(C,N,R),C=M(C,N);else if(!c&&!h&&u^y){var V=x;u?(F=1,C=oe(C,N,R),F=0,x=!1,C=oe(C,N,R),x=V):(F=0,C=oe(C,N,R),C=M(C,N),F=1,x=!1,C=oe(C,N,R),x=V,C=M(C,N))}}else F=0,C=oe(C,N,R);else F=u?1:0,C=oe(C,N,R);return C},this.__bidiEngine__.setOptions=function(C){C&&(c=C.isInputVisual,h=C.isOutputVisual,u=C.isInputRtl,y=C.isOutputRtl,x=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var a=n.text,i=(n.x,n.y,n.options||{}),c=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var u=0;for(c=[],u=0;u<a.length;u+=1)Object.prototype.toString.call(a[u])==="[object Array]"?c.push([t.doBidiReorder(a[u][0]),a[u][1],a[u][2]]):c.push([t.doBidiReorder(a[u])]);n.text=c}else n.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ya(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new l0(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new $m(this.contents),this.head=new Qm(this),this.name=new t0(this),this.cmap=new Zd(this),this.toUnicode={},this.hhea=new Jm(this),this.maxp=new r0(this),this.hmtx=new n0(this),this.post=new Zm(this),this.os2=new Xm(this),this.loca=new o0(this),this.glyf=new i0(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,h,y;for(y=[],c=0,u=(h=this.bbox).length;c<u;c++)e=h[c],y.push(Math.round(e*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var a,i,c,u;for(c=0,i=0,u=(e=""+e).length;0<=u?i<u:i>u;i=0<=u?++i:--i)a=e.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var Li,Ya=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,a,i,c,u,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),c=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^c)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*i+65536*c+256*u+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(this.writeByte(t));return i},r}(),$m=function(){var r;function e(t){var n,a,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,a,i,c,u,h,y,x,b,w,m,P,L;for(L in m=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(m)/h),c=Math.floor(b/h),x=16*m-b,(a=new Ya).writeInt(this.scalarType),a.writeShort(m),a.writeShort(b),a.writeShort(c),a.writeShort(x),i=16*m,y=a.pos+i,u=null,P=[],t)for(w=t[L],a.writeString(L),a.writeInt(r(w)),a.writeInt(y),a.writeInt(w.length),P=P.concat(w),L==="head"&&(u=y),y+=w.length;y%4;)P.push(0),y++;return a.write(P),n=2981146554-r(a.data),a.pos=u+8,a.writeUInt32(n),a.data},r=function(t){var n,a,i,c;for(t=eh.call(t);t.length%4;)t.push(0);for(i=new Ya(t),a=0,n=0,c=t.length;n<c;n=n+=4)a+=i.readUInt32();return 4294967295&a},e}(),Ym={}.hasOwnProperty,Ki=function(r,e){for(var t in e)Ym.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Li=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var Qm=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ya).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Xu=function(){function r(e,t){var n,a,i,c,u,h,y,x,b,w,m,P,L,E,k,A,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(m=e.readUInt16(),w=m/2,e.pos+=6,i=function(){var q,K;for(K=[],h=q=0;0<=w?q<w:q>w;h=0<=w?++q:--q)K.push(e.readUInt16());return K}(),e.pos+=2,L=function(){var q,K;for(K=[],h=q=0;0<=w?q<w:q>w;h=0<=w?++q:--q)K.push(e.readUInt16());return K}(),y=function(){var q,K;for(K=[],h=q=0;0<=w?q<w:q>w;h=0<=w?++q:--q)K.push(e.readUInt16());return K}(),x=function(){var q,K;for(K=[],h=q=0;0<=w?q<w:q>w;h=0<=w?++q:--q)K.push(e.readUInt16());return K}(),a=(this.length-e.pos+this.offset)/2,u=function(){var q,K;for(K=[],h=q=0;0<=a?q<a:q>a;h=0<=a?++q:--q)K.push(e.readUInt16());return K}(),h=k=0,F=i.length;k<F;h=++k)for(E=i[h],n=A=P=L[h];P<=E?A<=E:A>=E;n=P<=E?++A:--A)x[h]===0?c=n+y[h]:(c=u[x[h]/2+(n-P)-(w-h)]||0)!==0&&(c+=y[h]),this.codeMap[n]=65535&c}e.pos=b}return r.encode=function(e,t){var n,a,i,c,u,h,y,x,b,w,m,P,L,E,k,A,F,q,K,X,M,T,Z,oe,C,N,R,V,he,$,Y,ne,ie,ge,Oe,j,H,Q,te,ae,we,Fe,fe,Je,et,Ve;switch(V=new Ya,c=Object.keys(e).sort(function(lt,Ft){return lt-Ft}),t){case"macroman":for(L=0,E=function(){var lt=[];for(P=0;P<256;++P)lt.push(0);return lt}(),A={0:0},i={},he=0,ie=c.length;he<ie;he++)A[fe=e[a=c[he]]]==null&&(A[fe]=++L),i[a]={old:e[a],new:A[e[a]]},E[a]=A[e[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(E),{charMap:i,subtable:V.data,maxGlyphID:L+1};case"unicode":for(N=[],b=[],F=0,A={},n={},k=y=null,$=0,ge=c.length;$<ge;$++)A[K=e[a=c[$]]]==null&&(A[K]=++F),n[a]={old:K,new:A[K]},u=A[K]-a,k!=null&&u===y||(k&&b.push(k),N.push(a),y=u),k=a;for(k&&b.push(k),b.push(65535),N.push(65535),oe=2*(Z=N.length),T=2*Math.pow(Math.log(Z)/Math.LN2,2),w=Math.log(T/2)/Math.LN2,M=2*Z-T,h=[],X=[],m=[],P=Y=0,Oe=N.length;Y<Oe;P=++Y){if(C=N[P],x=b[P],C===65535){h.push(0),X.push(0);break}if(C-(R=n[C].new)>=32768)for(h.push(0),X.push(2*(m.length+Z-P)),a=ne=C;C<=x?ne<=x:ne>=x;a=C<=x?++ne:--ne)m.push(n[a].new);else h.push(R-C),X.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*Z+2*m.length),V.writeUInt16(0),V.writeUInt16(oe),V.writeUInt16(T),V.writeUInt16(w),V.writeUInt16(M),we=0,j=b.length;we<j;we++)a=b[we],V.writeUInt16(a);for(V.writeUInt16(0),Fe=0,H=N.length;Fe<H;Fe++)a=N[Fe],V.writeUInt16(a);for(Je=0,Q=h.length;Je<Q;Je++)u=h[Je],V.writeUInt16(u);for(et=0,te=X.length;et<te;et++)q=X[et],V.writeUInt16(q);for(Ve=0,ae=m.length;Ve<ae;Ve++)L=m[Ve],V.writeUInt16(L);return{charMap:n,subtable:V.data,maxGlyphID:F+1}}},r}(),Zd=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,a,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new Xu(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var a,i;return n==null&&(n="macroman"),a=Xu.encode(t,n),(i=new Ya).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},e}(),Jm=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Xm=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(t.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Zm=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="post",e.prototype.parse=function(t){var n,a,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var c;for(a=t.readUInt16(),this.glyphNameIndex=[],c=0;0<=a?c<a:c>a;c=0<=a?++c:--c)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 196608:break;case 262144:return this.map=(function(){var u,h,y;for(y=[],c=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;c=0<=h?++u:--u)y.push(t.readUInt32());return y}).call(this)}},e}(),e0=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},t0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="name",e.prototype.parse=function(t){var n,a,i,c,u,h,y,x,b,w,m;for(t.pos=this.offset,t.readShort(),n=t.readShort(),h=t.readShort(),a=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+h+t.readShort()});for(y={},c=b=0,w=a.length;b<w;c=++b)i=a[c],t.pos=i.offset,x=t.readString(i.length),u=new e0(x,i),y[m=i.nameID]==null&&(y[m]=[]),y[i.nameID].push(u);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),r0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),n0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,a,i,c,u,h,y;for(t.pos=this.offset,this.metrics=[],n=0,h=this.file.hhea.numberOfMetrics;0<=h?n<h:n>h;n=0<=h?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,b;for(b=[],n=x=0;0<=i?x<i:x>i;n=0<=i?++x:--x)b.push(t.readInt16());return b}(),this.widths=(function(){var x,b,w,m;for(m=[],x=0,b=(w=this.metrics).length;x<b;x++)c=w[x],m.push(c.advance);return m}).call(this),a=this.widths[this.widths.length-1],y=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)y.push(this.widths.push(a));return y},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),eh=[].slice,i0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,a,i,c,u,h,y,x,b,w;return t in this.cache?this.cache[t]:(c=this.file.loca,n=this.file.contents,a=c.indexOf(t),(i=c.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+a,u=(h=new Ya(n.read(i))).readShort(),x=h.readShort(),w=h.readShort(),y=h.readShort(),b=h.readShort(),this.cache[t]=u===-1?new s0(h,x,w,y,b):new a0(h,u,x,w,y,b),this.cache[t]))},e.prototype.encode=function(t,n,a){var i,c,u,h,y;for(u=[],c=[],h=0,y=n.length;h<y;h++)i=t[n[h]],c.push(u.length),i&&(u=u.concat(i.encode(a)));return c.push(u.length),{table:u,offsets:c}},e}(),a0=function(){function r(e,t,n,a,i,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),s0=function(){function r(e,t,n,a,i){var c,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ya(eh.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),o0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Ki(e,Li),e.prototype.tag="loca",e.prototype.parse=function(t){var n,a;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=2)c.push(2*t.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=4)c.push(t.readUInt32());return c}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var a=new Uint32Array(this.offsets.length),i=0,c=0,u=0;u<a.length;++u)if(a[u]=i,c<n.length&&n[c]==u){++c,a[u]=i;var h=this.offsets[u],y=this.offsets[u+1]-h;y>0&&(i+=y)}for(var x=new Array(4*a.length),b=0;b<a.length;++b)x[4*b+3]=255&a[b],x[4*b+2]=(65280&a[b])>>8,x[4*b+1]=(16711680&a[b])>>16,x[4*b]=(4278190080&a[b])>>24;return x},e}(),l0=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=a[n];return e},r.prototype.glyphsFor=function(e){var t,n,a,i,c,u,h;for(a={},c=0,u=e.length;c<u;c++)a[i=e[c]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(n=a[i])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in h=this.glyphsFor(t))n=h[i],a[i]=n;return a},r.prototype.encode=function(e,t){var n,a,i,c,u,h,y,x,b,w,m,P,L,E,k;for(a in n=Zd.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),m={0:0},k=n.charMap)m[(h=k[a]).old]=h.new;for(P in w=n.maxGlyphID,c)P in m||(m[P]=w++);return x=function(A){var F,q;for(F in q={},A)q[A[F]]=F;return q}(m),b=Object.keys(x).sort(function(A,F){return A-F}),L=function(){var A,F,q;for(q=[],A=0,F=b.length;A<F;A++)u=b[A],q.push(x[u]);return q}(),i=this.font.glyf.encode(c,L,m),y=this.font.loca.encode(i.offsets,L),E={cmap:this.font.cmap.raw(),glyf:i.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},r}();Ot.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,a,i,c;if(Array.isArray(t))return"["+function(){var u,h,y;for(y=[],u=0,h=t.length;u<h;u++)n=t[u],y.push(e.convert(n));return y}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in i=["<<"],t)c=t[a],i.push("/"+a+" "+e.convert(c));return i.push(">>"),i.join(`
`)}return""+t},e}();const c0=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Bm,AcroFormAppearance:_t,AcroFormButton:tn,AcroFormCheckBox:go,AcroFormChoiceField:xs,AcroFormComboBox:Ns,AcroFormEditBox:po,AcroFormListBox:ws,AcroFormPasswordField:yo,AcroFormPushButton:mo,AcroFormRadioButton:Ss,AcroFormTextField:Ga,GState:So,ShadingPattern:Ha,TilingPattern:ys,default:Ot,jsPDF:Ot},Symbol.toStringTag,{value:"Module"}));var th={exports:{}};const u0=Hh(c0);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(r,e){(function(n,a){r.exports=a(function(){try{return u0}catch{}}())})(typeof globalThis<"u"?globalThis:typeof lo<"u"?lo:typeof window<"u"?window:typeof self<"u"?self:lo,function(t){return function(){var n={172:function(u,h){var y=this&&this.__extends||function(){var w=function(m,P){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,E){L.__proto__=E}||function(L,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(L[k]=E[k])},w(m,P)};return function(m,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");w(m,P);function L(){this.constructor=m}m.prototype=P===null?Object.create(P):(L.prototype=P.prototype,new L)}}();Object.defineProperty(h,"__esModule",{value:!0}),h.CellHookData=h.HookData=void 0;var x=function(){function w(m,P,L){this.table=P,this.pageNumber=P.pageNumber,this.pageCount=this.pageNumber,this.settings=P.settings,this.cursor=L,this.doc=m.getDocument()}return w}();h.HookData=x;var b=function(w){y(m,w);function m(P,L,E,k,A,F){var q=w.call(this,P,L,F)||this;return q.cell=E,q.row=k,q.column=A,q.section=k.section,q}return m}(x);h.CellHookData=b},340:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0});var x=y(4),b=y(136),w=y(744),m=y(776),P=y(664),L=y(972);function E(k){k.API.autoTable=function(){for(var A=[],F=0;F<arguments.length;F++)A[F]=arguments[F];var q;A.length===1?q=A[0]:(console.error("Use of deprecated autoTable initiation"),q=A[2]||{},q.columns=A[0],q.body=A[1]);var K=(0,m.parseInput)(this,q),X=(0,L.createTable)(this,K);return(0,P.drawTable)(this,X),this},k.API.lastAutoTable=!1,k.API.previousAutoTable=!1,k.API.autoTable.previous=!1,k.API.autoTableText=function(A,F,q,K){(0,b.default)(A,F,q,K,this)},k.API.autoTableSetDefaults=function(A){return w.DocHandler.setDefaults(A,this),this},k.autoTableSetDefaults=function(A,F){w.DocHandler.setDefaults(A,F)},k.API.autoTableHtmlToJson=function(A,F){var q;if(F===void 0&&(F=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var K=new w.DocHandler(this),X=(0,x.parseHtml)(K,A,window,F,!1),M=X.head,T=X.body,Z=((q=M[0])===null||q===void 0?void 0:q.map(function(oe){return oe.content}))||[];return{columns:Z,rows:T,data:T}},k.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var A=this.lastAutoTable;return A&&A.finalY?A.finalY:0},k.API.autoTableAddPageContent=function(A){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),k.API.autoTable.globalDefaults||(k.API.autoTable.globalDefaults={}),k.API.autoTable.globalDefaults.addPageContent=A,this},k.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}h.default=E},136:function(u,h){Object.defineProperty(h,"__esModule",{value:!0});function y(x,b,w,m,P){m=m||{};var L=1.15,E=P.internal.scaleFactor,k=P.internal.getFontSize()/E,A=P.getLineHeightFactor?P.getLineHeightFactor():L,F=k*A,q=/\r\n|\r|\n/g,K="",X=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(K=typeof x=="string"?x.split(q):x,X=K.length||1),w+=k*(2-L),m.valign==="middle"?w-=X/2*F:m.valign==="bottom"&&(w-=X*F),m.halign==="center"||m.halign==="right"){var M=k;if(m.halign==="center"&&(M*=.5),K&&X>=1){for(var T=0;T<K.length;T++)P.text(K[T],b-P.getStringUnitWidth(K[T])*M,w),w+=F;return P}b-=P.getStringUnitWidth(x)*M}return m.halign==="justify"?P.text(x,b,w,{maxWidth:m.maxWidth||100,align:"justify"}):P.text(x,b,w),P}h.default=y},420:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.getPageAvailableWidth=h.parseSpacing=h.getFillStyle=h.addTableBorder=h.getStringWidth=void 0;function y(P,L,E){E.applyStyles(L,!0);var k=Array.isArray(P)?P:[P],A=k.map(function(F){return E.getTextWidth(F)}).reduce(function(F,q){return Math.max(F,q)},0);return A}h.getStringWidth=y;function x(P,L,E,k){var A=L.settings.tableLineWidth,F=L.settings.tableLineColor;P.applyStyles({lineWidth:A,lineColor:F});var q=b(A,!1);q&&P.rect(E.x,E.y,L.getWidth(P.pageSize().width),k.y-E.y,q)}h.addTableBorder=x;function b(P,L){var E=P>0,k=L||L===0;return E&&k?"DF":E?"S":k?"F":null}h.getFillStyle=b;function w(P,L){var E,k,A,F;if(P=P||L,Array.isArray(P)){if(P.length>=4)return{top:P[0],right:P[1],bottom:P[2],left:P[3]};if(P.length===3)return{top:P[0],right:P[1],bottom:P[2],left:P[1]};if(P.length===2)return{top:P[0],right:P[1],bottom:P[0],left:P[1]};P.length===1?P=P[0]:P=L}return typeof P=="object"?(typeof P.vertical=="number"&&(P.top=P.vertical,P.bottom=P.vertical),typeof P.horizontal=="number"&&(P.right=P.horizontal,P.left=P.horizontal),{left:(E=P.left)!==null&&E!==void 0?E:L,top:(k=P.top)!==null&&k!==void 0?k:L,right:(A=P.right)!==null&&A!==void 0?A:L,bottom:(F=P.bottom)!==null&&F!==void 0?F:L}):(typeof P!="number"&&(P=L),{top:P,right:P,bottom:P,left:P})}h.parseSpacing=w;function m(P,L){var E=w(L.settings.margin,0);return P.pageSize().width-(E.left+E.right)}h.getPageAvailableWidth=m},796:function(u,h){var y=this&&this.__extends||function(){var m=function(P,L){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(E[A]=k[A])},m(P,L)};return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");m(P,L);function E(){this.constructor=P}P.prototype=L===null?Object.create(L):(E.prototype=L.prototype,new E)}}();Object.defineProperty(h,"__esModule",{value:!0}),h.getTheme=h.defaultStyles=h.HtmlRowInput=void 0;var x=function(m){y(P,m);function P(L){var E=m.call(this)||this;return E._element=L,E}return P}(Array);h.HtmlRowInput=x;function b(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}h.defaultStyles=b;function w(m){var P={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return P[m]}h.getTheme=w},903:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseCss=void 0;var x=y(420);function b(E,k,A,F,q){var K={},X=1.3333333333333333,M=m(k,function(ie){return q.getComputedStyle(ie).backgroundColor});M!=null&&(K.fillColor=M);var T=m(k,function(ie){return q.getComputedStyle(ie).color});T!=null&&(K.textColor=T);var Z=L(F,A);Z&&(K.cellPadding=Z);var oe="borderTopColor",C=X*A,N=F.borderTopWidth;if(F.borderBottomWidth===N&&F.borderRightWidth===N&&F.borderLeftWidth===N){var R=(parseFloat(N)||0)/C;R&&(K.lineWidth=R)}else K.lineWidth={top:(parseFloat(F.borderTopWidth)||0)/C,right:(parseFloat(F.borderRightWidth)||0)/C,bottom:(parseFloat(F.borderBottomWidth)||0)/C,left:(parseFloat(F.borderLeftWidth)||0)/C},K.lineWidth.top||(K.lineWidth.right?oe="borderRightColor":K.lineWidth.bottom?oe="borderBottomColor":K.lineWidth.left&&(oe="borderLeftColor"));var V=m(k,function(ie){return q.getComputedStyle(ie)[oe]});V!=null&&(K.lineColor=V);var he=["left","right","center","justify"];he.indexOf(F.textAlign)!==-1&&(K.halign=F.textAlign),he=["middle","bottom","top"],he.indexOf(F.verticalAlign)!==-1&&(K.valign=F.verticalAlign);var $=parseInt(F.fontSize||"");isNaN($)||(K.fontSize=$/X);var Y=w(F);Y&&(K.fontStyle=Y);var ne=(F.fontFamily||"").toLowerCase();return E.indexOf(ne)!==-1&&(K.font=ne),K}h.parseCss=b;function w(E){var k="";return(E.fontWeight==="bold"||E.fontWeight==="bolder"||parseInt(E.fontWeight)>=700)&&(k="bold"),(E.fontStyle==="italic"||E.fontStyle==="oblique")&&(k+="italic"),k}function m(E,k){var A=P(E,k);if(!A)return null;var F=A.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!F||!Array.isArray(F))return null;var q=[parseInt(F[1]),parseInt(F[2]),parseInt(F[3])],K=parseInt(F[4]);return K===0||isNaN(q[0])||isNaN(q[1])||isNaN(q[2])?null:q}function P(E,k){var A=k(E);return A==="rgba(0, 0, 0, 0)"||A==="transparent"||A==="initial"||A==="inherit"?E.parentElement==null?null:P(E.parentElement,k):A}function L(E,k){var A=[E.paddingTop,E.paddingRight,E.paddingBottom,E.paddingLeft],F=96/(72/k),q=(parseInt(E.lineHeight)-parseInt(E.fontSize))/k/2,K=A.map(function(M){return parseInt(M||"0")/F}),X=(0,x.parseSpacing)(K,0);return q>X.top&&(X.top=q),q>X.bottom&&(X.bottom=q),X}},744:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.DocHandler=void 0;var y={},x=function(){function b(w){this.jsPDFDocument=w,this.userStyles={textColor:w.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:w.internal.getFontSize(),fontStyle:w.internal.getFont().fontStyle,font:w.internal.getFont().fontName,lineWidth:w.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:w.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(w,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=w:y=w},b.unifyColor=function(w){return Array.isArray(w)?w:typeof w=="number"?[w,w,w]:typeof w=="string"?[w]:null},b.prototype.applyStyles=function(w,m){var P,L,E;m===void 0&&(m=!1),w.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w.fontStyle);var k=this.jsPDFDocument.internal.getFont(),A=k.fontStyle,F=k.fontName;if(w.font&&(F=w.font),w.fontStyle){A=w.fontStyle;var q=this.getFontList()[F];q&&q.indexOf(A)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(q[0]),A=q[0])}if(this.jsPDFDocument.setFont(F,A),w.fontSize&&this.jsPDFDocument.setFontSize(w.fontSize),!m){var K=b.unifyColor(w.fillColor);K&&(P=this.jsPDFDocument).setFillColor.apply(P,K),K=b.unifyColor(w.textColor),K&&(L=this.jsPDFDocument).setTextColor.apply(L,K),K=b.unifyColor(w.lineColor),K&&(E=this.jsPDFDocument).setDrawColor.apply(E,K),typeof w.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(w.lineWidth)}},b.prototype.splitTextToSize=function(w,m,P){return this.jsPDFDocument.splitTextToSize(w,m,P)},b.prototype.rect=function(w,m,P,L,E){return this.jsPDFDocument.rect(w,m,P,L,E)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(w){return this.jsPDFDocument.getTextWidth(w)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(w){this.jsPDFDocument.setPage(w)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return y||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var w=this.jsPDFDocument.internal.pageSize;return w.width==null&&(w={width:w.getWidth(),height:w.getHeight()}),w},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var w=this.jsPDFDocument;return w.getLineHeightFactor?w.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(w){return w/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var w=this.jsPDFDocument.internal.getCurrentPageInfo();return w?w.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b}();h.DocHandler=x},4:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseHtml=void 0;var x=y(903),b=y(796);function w(L,E,k,A,F){var q,K;A===void 0&&(A=!1),F===void 0&&(F=!1);var X;typeof E=="string"?X=k.document.querySelector(E):X=E;var M=Object.keys(L.getFontList()),T=L.scaleFactor(),Z=[],oe=[],C=[];if(!X)return console.error("Html table could not be found with input: ",E),{head:Z,body:oe,foot:C};for(var N=0;N<X.rows.length;N++){var R=X.rows[N],V=(K=(q=R==null?void 0:R.parentElement)===null||q===void 0?void 0:q.tagName)===null||K===void 0?void 0:K.toLowerCase(),he=m(M,T,k,R,A,F);he&&(V==="thead"?Z.push(he):V==="tfoot"?C.push(he):oe.push(he))}return{head:Z,body:oe,foot:C}}h.parseHtml=w;function m(L,E,k,A,F,q){for(var K=new b.HtmlRowInput(A),X=0;X<A.cells.length;X++){var M=A.cells[X],T=k.getComputedStyle(M);if(F||T.display!=="none"){var Z=void 0;q&&(Z=(0,x.parseCss)(L,M,E,T,k)),K.push({rowSpan:M.rowSpan,colSpan:M.colSpan,styles:Z,_element:M,content:P(M)})}}var oe=k.getComputedStyle(A);if(K.length>0&&(F||oe.display!=="none"))return K}function P(L){var E=L.cloneNode(!0);return E.innerHTML=E.innerHTML.replace(/\n/g,"").replace(/ +/g," "),E.innerHTML=E.innerHTML.split(/<br.*?>/).map(function(k){return k.trim()}).join(`
`),E.innerText||E.textContent||""}},776:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseInput=void 0;var x=y(4),b=y(356),w=y(420),m=y(744),P=y(792);function L(X,M){var T=new m.DocHandler(X),Z=T.getDocumentOptions(),oe=T.getGlobalOptions();(0,P.default)(T,oe,Z,M);var C=(0,b.assign)({},oe,Z,M),N;typeof window<"u"&&(N=window);var R=E(oe,Z,M),V=k(oe,Z,M),he=A(T,C),$=q(T,C,N);return{id:M.tableId,content:$,hooks:V,styles:R,settings:he}}h.parseInput=L;function E(X,M,T){for(var Z={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},oe=function(V){if(V==="columnStyles"){var he=X[V],$=M[V],Y=T[V];Z.columnStyles=(0,b.assign)({},he,$,Y)}else{var ne=[X,M,T],ie=ne.map(function(ge){return ge[V]||{}});Z[V]=(0,b.assign)({},ie[0],ie[1],ie[2])}},C=0,N=Object.keys(Z);C<N.length;C++){var R=N[C];oe(R)}return Z}function k(X,M,T){for(var Z=[X,M,T],oe={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},C=0,N=Z;C<N.length;C++){var R=N[C];R.didParseCell&&oe.didParseCell.push(R.didParseCell),R.willDrawCell&&oe.willDrawCell.push(R.willDrawCell),R.didDrawCell&&oe.didDrawCell.push(R.didDrawCell),R.willDrawPage&&oe.willDrawPage.push(R.willDrawPage),R.didDrawPage&&oe.didDrawPage.push(R.didDrawPage)}return oe}function A(X,M){var T,Z,oe,C,N,R,V,he,$,Y,ne,ie,ge=(0,w.parseSpacing)(M.margin,40/X.scaleFactor()),Oe=(T=F(X,M.startY))!==null&&T!==void 0?T:ge.top,j;M.showFoot===!0?j="everyPage":M.showFoot===!1?j="never":j=(Z=M.showFoot)!==null&&Z!==void 0?Z:"everyPage";var H;M.showHead===!0?H="everyPage":M.showHead===!1?H="never":H=(oe=M.showHead)!==null&&oe!==void 0?oe:"everyPage";var Q=(C=M.useCss)!==null&&C!==void 0?C:!1,te=M.theme||(Q?"plain":"striped"),ae=!!M.horizontalPageBreak,we=(N=M.horizontalPageBreakRepeat)!==null&&N!==void 0?N:null;return{includeHiddenHtml:(R=M.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:Q,theme:te,startY:Oe,margin:ge,pageBreak:(V=M.pageBreak)!==null&&V!==void 0?V:"auto",rowPageBreak:(he=M.rowPageBreak)!==null&&he!==void 0?he:"auto",tableWidth:($=M.tableWidth)!==null&&$!==void 0?$:"auto",showHead:H,showFoot:j,tableLineWidth:(Y=M.tableLineWidth)!==null&&Y!==void 0?Y:0,tableLineColor:(ne=M.tableLineColor)!==null&&ne!==void 0?ne:200,horizontalPageBreak:ae,horizontalPageBreakRepeat:we,horizontalPageBreakBehaviour:(ie=M.horizontalPageBreakBehaviour)!==null&&ie!==void 0?ie:"afterAllRows"}}function F(X,M){var T=X.getLastAutoTable(),Z=X.scaleFactor(),oe=X.pageNumber(),C=!1;if(T&&T.startPageNumber){var N=T.startPageNumber+T.pageNumber-1;C=N===oe}return typeof M=="number"?M:(M==null||M===!1)&&C&&(T==null?void 0:T.finalY)!=null?T.finalY+20/Z:null}function q(X,M,T){var Z=M.head||[],oe=M.body||[],C=M.foot||[];if(M.html){var N=M.includeHiddenHtml;if(T){var R=(0,x.parseHtml)(X,M.html,T,N,M.useCss)||{};Z=R.head||Z,oe=R.body||Z,C=R.foot||Z}else console.error("Cannot parse html in non browser environment")}var V=M.columns||K(Z,oe,C);return{columns:V,head:Z,body:oe,foot:C}}function K(X,M,T){var Z=X[0]||M[0]||T[0]||[],oe=[];return Object.keys(Z).filter(function(C){return C!=="_element"}).forEach(function(C){var N=1,R;Array.isArray(Z)?R=Z[parseInt(C)]:R=Z[C],typeof R=="object"&&!Array.isArray(R)&&(N=(R==null?void 0:R.colSpan)||1);for(var V=0;V<N;V++){var he=void 0;Array.isArray(Z)?he=oe.length:he=C+(V>0?"_".concat(V):"");var $={dataKey:he};oe.push($)}}),oe}},792:function(u,h){Object.defineProperty(h,"__esModule",{value:!0});function y(b,w,m,P){for(var L=function(F){F&&typeof F!="object"&&console.error("The options parameter should be of type object, is: "+typeof F),typeof F.extendWidth<"u"&&(F.tableWidth=F.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof F.margins<"u"&&(typeof F.margin>"u"&&(F.margin=F.margins),console.error("Use of deprecated option: margins, use margin instead.")),F.startY&&typeof F.startY!="number"&&(console.error("Invalid value for startY option",F.startY),delete F.startY),!F.didDrawPage&&(F.afterPageContent||F.beforePageContent||F.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),F.didDrawPage=function(C){b.applyStyles(b.userStyles),F.beforePageContent&&F.beforePageContent(C),b.applyStyles(b.userStyles),F.afterPageContent&&F.afterPageContent(C),b.applyStyles(b.userStyles),F.afterPageAdd&&C.pageNumber>1&&C.afterPageAdd(C),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(C){F[C]&&console.error('The "'.concat(C,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(C){var N=C[0],R=C[1];F[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(N," instead")),F[N]=F[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(C){var N=typeof C=="string"?C:C[0],R=typeof C=="string"?C:C[1];typeof F[N]<"u"&&(typeof F.styles[R]>"u"&&(F.styles[R]=F[N]),console.error("Use of deprecated option: "+N+", use the style "+R+" instead."))});for(var q=0,K=["styles","bodyStyles","headStyles","footStyles"];q<K.length;q++){var X=K[q];x(F[X]||{})}for(var M=F.columnStyles||{},T=0,Z=Object.keys(M);T<Z.length;T++){var oe=Z[T];x(M[oe]||{})}},E=0,k=[w,m,P];E<k.length;E++){var A=k[E];L(A)}}h.default=y;function x(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}},260:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.Column=h.Cell=h.Row=h.Table=void 0;var x=y(796),b=y(172),w=y(420),m=function(){function k(A,F){this.pageNumber=1,this.pageCount=1,this.id=A.id,this.settings=A.settings,this.styles=A.styles,this.hooks=A.hooks,this.columns=F.columns,this.head=F.head,this.body=F.body,this.foot=F.foot}return k.prototype.getHeadHeight=function(A){return this.head.reduce(function(F,q){return F+q.getMaxCellHeight(A)},0)},k.prototype.getFootHeight=function(A){return this.foot.reduce(function(F,q){return F+q.getMaxCellHeight(A)},0)},k.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},k.prototype.callCellHooks=function(A,F,q,K,X,M){for(var T=0,Z=F;T<Z.length;T++){var oe=Z[T],C=new b.CellHookData(A,this,q,K,X,M),N=oe(C)===!1;if(q.text=Array.isArray(q.text)?q.text:[q.text],N)return!1}return!0},k.prototype.callEndPageHooks=function(A,F){A.applyStyles(A.userStyles);for(var q=0,K=this.hooks.didDrawPage;q<K.length;q++){var X=K[q];X(new b.HookData(A,this,F))}},k.prototype.callWillDrawPageHooks=function(A,F){for(var q=0,K=this.hooks.willDrawPage;q<K.length;q++){var X=K[q];X(new b.HookData(A,this,F))}},k.prototype.getWidth=function(A){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var F=this.columns.reduce(function(K,X){return K+X.wrappedWidth},0);return F}else{var q=this.settings.margin;return A-q.left-q.right}},k}();h.Table=m;var P=function(){function k(A,F,q,K,X){X===void 0&&(X=!1),this.height=0,this.raw=A,A instanceof x.HtmlRowInput&&(this.raw=A._element,this.element=A._element),this.index=F,this.section=q,this.cells=K,this.spansMultiplePages=X}return k.prototype.getMaxCellHeight=function(A){var F=this;return A.reduce(function(q,K){var X;return Math.max(q,((X=F.cells[K.index])===null||X===void 0?void 0:X.height)||0)},0)},k.prototype.hasRowSpan=function(A){var F=this;return A.filter(function(q){var K=F.cells[q.index];return K?K.rowSpan>1:!1}).length>0},k.prototype.canEntireRowFit=function(A,F){return this.getMaxCellHeight(F)<=A},k.prototype.getMinimumRowHeight=function(A,F){var q=this;return A.reduce(function(K,X){var M=q.cells[X.index];if(!M)return 0;var T=F.getLineHeight(M.styles.fontSize),Z=M.padding("vertical"),oe=Z+T;return oe>K?oe:K},0)},k}();h.Row=P;var L=function(){function k(A,F,q){var K,X;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=F,this.section=q,this.raw=A;var M=A;A!=null&&typeof A=="object"&&!Array.isArray(A)?(this.rowSpan=A.rowSpan||1,this.colSpan=A.colSpan||1,M=(X=(K=A.content)!==null&&K!==void 0?K:A.title)!==null&&X!==void 0?X:A,A._element&&(this.raw=A._element)):(this.rowSpan=1,this.colSpan=1);var T=M!=null?""+M:"",Z=/\r\n|\r|\n/g;this.text=T.split(Z)}return k.prototype.getTextPos=function(){var A;if(this.styles.valign==="top")A=this.y+this.padding("top");else if(this.styles.valign==="bottom")A=this.y+this.height-this.padding("bottom");else{var F=this.height-this.padding("vertical");A=this.y+F/2+this.padding("top")}var q;if(this.styles.halign==="right")q=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var K=this.width-this.padding("horizontal");q=this.x+K/2+this.padding("left")}else q=this.x+this.padding("left");return{x:q,y:A}},k.prototype.getContentHeight=function(A,F){F===void 0&&(F=1.15);var q=Array.isArray(this.text)?this.text.length:1,K=this.styles.fontSize/A*F,X=q*K+this.padding("vertical");return Math.max(X,this.styles.minCellHeight)},k.prototype.padding=function(A){var F=(0,w.parseSpacing)(this.styles.cellPadding,0);return A==="vertical"?F.top+F.bottom:A==="horizontal"?F.left+F.right:F[A]},k}();h.Cell=L;var E=function(){function k(A,F,q){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=A,this.raw=F,this.index=q}return k.prototype.getMaxCustomCellWidth=function(A){for(var F=0,q=0,K=A.allRows();q<K.length;q++){var X=K[q],M=X.cells[this.index];M&&typeof M.styles.cellWidth=="number"&&(F=Math.max(F,M.styles.cellWidth))}return F},k}();h.Column=E},356:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.assign=void 0;function y(x,b,w,m,P){if(x==null)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(x),E=1;E<arguments.length;E++){var k=arguments[E];if(k!=null)for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(L[A]=k[A])}return L}h.assign=y},972:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.createTable=void 0;var x=y(744),b=y(260),w=y(324),m=y(796),P=y(356);function L(X,M){var T=new x.DocHandler(X),Z=E(M,T.scaleFactor()),oe=new b.Table(M,Z);return(0,w.calculateWidths)(T,oe),T.applyStyles(T.userStyles),oe}h.createTable=L;function E(X,M){var T=X.content,Z=q(T.columns);if(T.head.length===0){var oe=A(Z,"head");oe&&T.head.push(oe)}if(T.foot.length===0){var oe=A(Z,"foot");oe&&T.foot.push(oe)}var C=X.settings.theme,N=X.styles;return{columns:Z,head:k("head",T.head,Z,N,C,M),body:k("body",T.body,Z,N,C,M),foot:k("foot",T.foot,Z,N,C,M)}}function k(X,M,T,Z,oe,C){var N={},R=M.map(function(V,he){for(var $=0,Y={},ne=0,ie=0,ge=0,Oe=T;ge<Oe.length;ge++){var j=Oe[ge];if(N[j.index]==null||N[j.index].left===0)if(ie===0){var H=void 0;Array.isArray(V)?H=V[j.index-ne-$]:H=V[j.dataKey];var Q={};typeof H=="object"&&!Array.isArray(H)&&(Q=(H==null?void 0:H.styles)||{});var te=K(X,j,he,oe,Z,C,Q),ae=new b.Cell(H,te,X);Y[j.dataKey]=ae,Y[j.index]=ae,ie=ae.colSpan-1,N[j.index]={left:ae.rowSpan-1,times:ie}}else ie--,ne++;else N[j.index].left--,ie=N[j.index].times,$++}return new b.Row(V,he,X,Y)});return R}function A(X,M){var T={};return X.forEach(function(Z){if(Z.raw!=null){var oe=F(M,Z.raw);oe!=null&&(T[Z.dataKey]=oe)}}),Object.keys(T).length>0?T:null}function F(X,M){if(X==="head"){if(typeof M=="object")return M.header||M.title||null;if(typeof M=="string"||typeof M=="number")return M}else if(X==="foot"&&typeof M=="object")return M.footer;return null}function q(X){return X.map(function(M,T){var Z,oe,C;return typeof M=="object"?C=(oe=(Z=M.dataKey)!==null&&Z!==void 0?Z:M.key)!==null&&oe!==void 0?oe:T:C=T,new b.Column(C,M,T)})}function K(X,M,T,Z,oe,C,N){var R=(0,m.getTheme)(Z),V;X==="head"?V=oe.headStyles:X==="body"?V=oe.bodyStyles:X==="foot"&&(V=oe.footStyles);var he=(0,P.assign)({},R.table,R[X],oe.styles,V),$=oe.columnStyles[M.dataKey]||oe.columnStyles[M.index]||{},Y=X==="body"?$:{},ne=X==="body"&&T%2===0?(0,P.assign)({},R.alternateRow,oe.alternateRowStyles):{},ie=(0,m.defaultStyles)(C),ge=(0,P.assign)({},ie,he,ne,Y);return(0,P.assign)(ge,N)}},664:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.addPage=h.drawTable=void 0;var x=y(420),b=y(260),w=y(744),m=y(356),P=y(136),L=y(224);function E($,Y){var ne=Y.settings,ie=ne.startY,ge=ne.margin,Oe={x:ge.left,y:ie},j=Y.getHeadHeight(Y.columns)+Y.getFootHeight(Y.columns),H=ie+ge.bottom+j;if(ne.pageBreak==="avoid"){var Q=Y.body,te=Q.reduce(function(Fe,fe){return Fe+fe.height},0);H+=te}var ae=new w.DocHandler($);(ne.pageBreak==="always"||ne.startY!=null&&H>ae.pageSize().height)&&(he(ae),Oe.y=ge.top),Y.callWillDrawPageHooks(ae,Oe);var we=(0,m.assign)({},Oe);Y.startPageNumber=ae.pageNumber(),ne.horizontalPageBreak?k(ae,Y,we,Oe):(ae.applyStyles(ae.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&Y.head.forEach(function(Fe){return oe(ae,Y,Fe,Oe,Y.columns)}),ae.applyStyles(ae.userStyles),Y.body.forEach(function(Fe,fe){var Je=fe===Y.body.length-1;Z(ae,Y,Fe,Je,we,Oe,Y.columns)}),ae.applyStyles(ae.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&Y.foot.forEach(function(Fe){return oe(ae,Y,Fe,Oe,Y.columns)})),(0,x.addTableBorder)(ae,Y,we,Oe),Y.callEndPageHooks(ae,Oe),Y.finalY=Oe.y,$.lastAutoTable=Y,$.previousAutoTable=Y,$.autoTable&&($.autoTable.previous=Y),ae.applyStyles(ae.userStyles)}h.drawTable=E;function k($,Y,ne,ie){var ge=(0,L.calculateAllColumnsCanFitInPage)($,Y),Oe=Y.settings;if(Oe.horizontalPageBreakBehaviour==="afterAllRows")ge.forEach(function(te,ae){$.applyStyles($.userStyles),ae>0?V($,Y,ne,ie,te.columns,!0):A($,Y,ie,te.columns),F($,Y,ne,ie,te.columns),K($,Y,ie,te.columns)});else for(var j=-1,H=ge[0],Q=function(){var te=j;if(H){$.applyStyles($.userStyles);var ae=H.columns;j>=0?V($,Y,ne,ie,ae,!0):A($,Y,ie,ae),te=q($,Y,j+1,ie,ae),K($,Y,ie,ae)}var we=te-j;ge.slice(1).forEach(function(Fe){$.applyStyles($.userStyles),V($,Y,ne,ie,Fe.columns,!0),q($,Y,j+1,ie,Fe.columns,we),K($,Y,ie,Fe.columns)}),j=te};j<Y.body.length-1;)Q()}function A($,Y,ne,ie){var ge=Y.settings;$.applyStyles($.userStyles),(ge.showHead==="firstPage"||ge.showHead==="everyPage")&&Y.head.forEach(function(Oe){return oe($,Y,Oe,ne,ie)})}function F($,Y,ne,ie,ge){$.applyStyles($.userStyles),Y.body.forEach(function(Oe,j){var H=j===Y.body.length-1;Z($,Y,Oe,H,ne,ie,ge)})}function q($,Y,ne,ie,ge,Oe){$.applyStyles($.userStyles),Oe=Oe??Y.body.length;var j=Math.min(ne+Oe,Y.body.length),H=-1;return Y.body.slice(ne,j).forEach(function(Q,te){var ae=ne+te===Y.body.length-1,we=R($,Y,ae,ie);Q.canEntireRowFit(we,ge)&&(oe($,Y,Q,ie,ge),H=ne+te)}),H}function K($,Y,ne,ie){var ge=Y.settings;$.applyStyles($.userStyles),(ge.showFoot==="lastPage"||ge.showFoot==="everyPage")&&Y.foot.forEach(function(Oe){return oe($,Y,Oe,ne,ie)})}function X($,Y,ne){var ie=ne.getLineHeight($.styles.fontSize),ge=$.padding("vertical"),Oe=Math.floor((Y-ge)/ie);return Math.max(0,Oe)}function M($,Y,ne,ie){var ge={};$.spansMultiplePages=!0,$.height=0;for(var Oe=0,j=0,H=ne.columns;j<H.length;j++){var Q=H[j],te=$.cells[Q.index];if(te){Array.isArray(te.text)||(te.text=[te.text]);var ae=new b.Cell(te.raw,te.styles,te.section);ae=(0,m.assign)(ae,te),ae.text=[];var we=X(te,Y,ie);te.text.length>we&&(ae.text=te.text.splice(we,te.text.length));var Fe=ie.scaleFactor(),fe=ie.getLineHeightFactor();te.contentHeight=te.getContentHeight(Fe,fe),te.contentHeight>=Y&&(te.contentHeight=Y,ae.styles.minCellHeight-=Y),te.contentHeight>$.height&&($.height=te.contentHeight),ae.contentHeight=ae.getContentHeight(Fe,fe),ae.contentHeight>Oe&&(Oe=ae.contentHeight),ge[Q.index]=ae}}var Je=new b.Row($.raw,-1,$.section,ge,!0);Je.height=Oe;for(var et=0,Ve=ne.columns;et<Ve.length;et++){var Q=Ve[et],ae=Je.cells[Q.index];ae&&(ae.height=Je.height);var te=$.cells[Q.index];te&&(te.height=$.height)}return Je}function T($,Y,ne,ie){var ge=$.pageSize().height,Oe=ie.settings.margin,j=Oe.top+Oe.bottom,H=ge-j;Y.section==="body"&&(H-=ie.getHeadHeight(ie.columns)+ie.getFootHeight(ie.columns));var Q=Y.getMinimumRowHeight(ie.columns,$),te=Q<ne;if(Q>H)return console.error("Will not be able to print row ".concat(Y.index," correctly since it's minimum height is larger than page height")),!0;if(!te)return!1;var ae=Y.hasRowSpan(ie.columns),we=Y.getMaxCellHeight(ie.columns)>H;return we?(ae&&console.error("The content of row ".concat(Y.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ae||ie.settings.rowPageBreak==="avoid")}function Z($,Y,ne,ie,ge,Oe,j){var H=R($,Y,ie,Oe);if(ne.canEntireRowFit(H,j))oe($,Y,ne,Oe,j);else if(T($,ne,H,Y)){var Q=M(ne,H,Y,$);oe($,Y,ne,Oe,j),V($,Y,ge,Oe,j),Z($,Y,Q,ie,ge,Oe,j)}else V($,Y,ge,Oe,j),Z($,Y,ne,ie,ge,Oe,j)}function oe($,Y,ne,ie,ge){ie.x=Y.settings.margin.left;for(var Oe=0,j=ge;Oe<j.length;Oe++){var H=j[Oe],Q=ne.cells[H.index];if(!Q){ie.x+=H.width;continue}$.applyStyles(Q.styles),Q.x=ie.x,Q.y=ie.y;var te=Y.callCellHooks($,Y.hooks.willDrawCell,Q,ne,H,ie);if(te===!1){ie.x+=H.width;continue}C($,Q,ie);var ae=Q.getTextPos();(0,P.default)(Q.text,ae.x,ae.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},$.getDocument()),Y.callCellHooks($,Y.hooks.didDrawCell,Q,ne,H,ie),ie.x+=H.width}ie.y+=ne.height}function C($,Y,ne){var ie=Y.styles;if($.getDocument().setFillColor($.getDocument().getFillColor()),typeof ie.lineWidth=="number"){var ge=(0,x.getFillStyle)(ie.lineWidth,ie.fillColor);ge&&$.rect(Y.x,ne.y,Y.width,Y.height,ge)}else typeof ie.lineWidth=="object"&&(ie.fillColor&&$.rect(Y.x,ne.y,Y.width,Y.height,"F"),N($,Y,ne,ie.lineWidth))}function N($,Y,ne,ie){var ge,Oe,j,H;ie.top&&(ge=ne.x,Oe=ne.y,j=ne.x+Y.width,H=ne.y,ie.right&&(j+=.5*ie.right),ie.left&&(ge-=.5*ie.left),Q(ie.top,ge,Oe,j,H)),ie.bottom&&(ge=ne.x,Oe=ne.y+Y.height,j=ne.x+Y.width,H=ne.y+Y.height,ie.right&&(j+=.5*ie.right),ie.left&&(ge-=.5*ie.left),Q(ie.bottom,ge,Oe,j,H)),ie.left&&(ge=ne.x,Oe=ne.y,j=ne.x,H=ne.y+Y.height,ie.top&&(Oe-=.5*ie.top),ie.bottom&&(H+=.5*ie.bottom),Q(ie.left,ge,Oe,j,H)),ie.right&&(ge=ne.x+Y.width,Oe=ne.y,j=ne.x+Y.width,H=ne.y+Y.height,ie.top&&(Oe-=.5*ie.top),ie.bottom&&(H+=.5*ie.bottom),Q(ie.right,ge,Oe,j,H));function Q(te,ae,we,Fe,fe){$.getDocument().setLineWidth(te),$.getDocument().line(ae,we,Fe,fe,"S")}}function R($,Y,ne,ie){var ge=Y.settings.margin.bottom,Oe=Y.settings.showFoot;return(Oe==="everyPage"||Oe==="lastPage"&&ne)&&(ge+=Y.getFootHeight(Y.columns)),$.pageSize().height-ie.y-ge}function V($,Y,ne,ie,ge,Oe){ge===void 0&&(ge=[]),Oe===void 0&&(Oe=!1),$.applyStyles($.userStyles),Y.settings.showFoot==="everyPage"&&!Oe&&Y.foot.forEach(function(H){return oe($,Y,H,ie,ge)}),Y.callEndPageHooks($,ie);var j=Y.settings.margin;(0,x.addTableBorder)($,Y,ne,ie),he($),Y.pageNumber++,Y.pageCount++,ie.x=j.left,ie.y=j.top,ne.y=j.top,Y.callWillDrawPageHooks($,ie),Y.settings.showHead==="everyPage"&&(Y.head.forEach(function(H){return oe($,Y,H,ie,ge)}),$.applyStyles($.userStyles))}h.addPage=V;function he($){var Y=$.pageNumber();$.setPage(Y+1);var ne=$.pageNumber();return ne===Y?($.addPage(),!0):!1}},224:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.calculateAllColumnsCanFitInPage=void 0;var x=y(420);function b(m,P,L){var E;L===void 0&&(L={});var k=(0,x.getPageAvailableWidth)(m,P),A=new Map,F=[],q=[],K=[];P.settings.horizontalPageBreakRepeat,Array.isArray(P.settings.horizontalPageBreakRepeat)?K=P.settings.horizontalPageBreakRepeat:(typeof P.settings.horizontalPageBreakRepeat=="string"||typeof P.settings.horizontalPageBreakRepeat=="number")&&(K=[P.settings.horizontalPageBreakRepeat]),K.forEach(function(Z){var oe=P.columns.find(function(C){return C.dataKey===Z||C.index===Z});oe&&!A.has(oe.index)&&(A.set(oe.index,!0),F.push(oe.index),q.push(P.columns[oe.index]),k-=oe.wrappedWidth)});for(var X=!0,M=(E=L==null?void 0:L.start)!==null&&E!==void 0?E:0;M<P.columns.length;){if(A.has(M)){M++;continue}var T=P.columns[M].wrappedWidth;if(X||k>=T)X=!1,F.push(M),q.push(P.columns[M]),k-=T;else break;M++}return{colIndexes:F,columns:q,lastIndex:M-1}}function w(m,P){for(var L=[],E=0;E<P.columns.length;E++){var k=b(m,P,{start:E});k.columns.length&&(L.push(k),E=k.lastIndex)}return L}h.calculateAllColumnsCanFitInPage=w},324:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.ellipsize=h.resizeColumns=h.calculateWidths=void 0;var x=y(420);function b(F,q){w(F,q);var K=[],X=0;q.columns.forEach(function(T){var Z=T.getMaxCustomCellWidth(q);Z?T.width=Z:(T.width=T.wrappedWidth,K.push(T)),X+=T.width});var M=q.getWidth(F.pageSize().width)-X;M&&(M=m(K,M,function(T){return Math.max(T.minReadableWidth,T.minWidth)})),M&&(M=m(K,M,function(T){return T.minWidth})),M=Math.abs(M),!q.settings.horizontalPageBreak&&M>.1/F.scaleFactor()&&(M=M<1?M:Math.round(M),console.warn("Of the table content, ".concat(M," units width could not fit page"))),L(q),E(q,F),P(q)}h.calculateWidths=b;function w(F,q){var K=F.scaleFactor(),X=q.settings.horizontalPageBreak,M=(0,x.getPageAvailableWidth)(F,q);q.allRows().forEach(function(T){for(var Z=0,oe=q.columns;Z<oe.length;Z++){var C=oe[Z],N=T.cells[C.index];if(N){var R=q.hooks.didParseCell;q.callCellHooks(F,R,N,T,C,null);var V=N.padding("horizontal");N.contentWidth=(0,x.getStringWidth)(N.text,N.styles,F)+V;var he=(0,x.getStringWidth)(N.text.join(" ").split(/[^\S\u00A0]+/),N.styles,F);if(N.minReadableWidth=he+N.padding("horizontal"),typeof N.styles.cellWidth=="number")N.minWidth=N.styles.cellWidth,N.wrappedWidth=N.styles.cellWidth;else if(N.styles.cellWidth==="wrap"||X===!0)N.contentWidth>M?(N.minWidth=M,N.wrappedWidth=M):(N.minWidth=N.contentWidth,N.wrappedWidth=N.contentWidth);else{var $=10/K;N.minWidth=N.styles.minCellWidth||$,N.wrappedWidth=N.contentWidth,N.minWidth>N.wrappedWidth&&(N.wrappedWidth=N.minWidth)}}}}),q.allRows().forEach(function(T){for(var Z=0,oe=q.columns;Z<oe.length;Z++){var C=oe[Z],N=T.cells[C.index];if(N&&N.colSpan===1)C.wrappedWidth=Math.max(C.wrappedWidth,N.wrappedWidth),C.minWidth=Math.max(C.minWidth,N.minWidth),C.minReadableWidth=Math.max(C.minReadableWidth,N.minReadableWidth);else{var R=q.styles.columnStyles[C.dataKey]||q.styles.columnStyles[C.index]||{},V=R.cellWidth||R.minCellWidth;V&&typeof V=="number"&&(C.minWidth=V,C.wrappedWidth=V)}N&&(N.colSpan>1&&!C.minWidth&&(C.minWidth=N.minWidth),N.colSpan>1&&!C.wrappedWidth&&(C.wrappedWidth=N.minWidth))}})}function m(F,q,K){for(var X=q,M=F.reduce(function($,Y){return $+Y.wrappedWidth},0),T=0;T<F.length;T++){var Z=F[T],oe=Z.wrappedWidth/M,C=X*oe,N=Z.width+C,R=K(Z),V=N<R?R:N;q-=V-Z.width,Z.width=V}if(q=Math.round(q*1e10)/1e10,q){var he=F.filter(function($){return q<0?$.width>K($):!0});he.length&&(q=m(he,q,K))}return q}h.resizeColumns=m;function P(F){for(var q={},K=1,X=F.allRows(),M=0;M<X.length;M++)for(var T=X[M],Z=0,oe=F.columns;Z<oe.length;Z++){var C=oe[Z],N=q[C.index];if(K>1)K--,delete T.cells[C.index];else if(N)N.cell.height+=T.height,K=N.cell.colSpan,delete T.cells[C.index],N.left--,N.left<=1&&delete q[C.index];else{var R=T.cells[C.index];if(!R)continue;if(R.height=T.height,R.rowSpan>1){var V=X.length-M,he=R.rowSpan>V?V:R.rowSpan;q[C.index]={cell:R,left:he,row:T}}}}}function L(F){for(var q=F.allRows(),K=0;K<q.length;K++)for(var X=q[K],M=null,T=0,Z=0,oe=0;oe<F.columns.length;oe++){var C=F.columns[oe];if(Z-=1,Z>1&&F.columns[oe+1])T+=C.width,delete X.cells[C.index];else if(M){var N=M;delete X.cells[C.index],M=null,N.width=C.width+T}else{var N=X.cells[C.index];if(!N)continue;if(Z=N.colSpan,T=0,N.colSpan>1){M=N,T+=C.width;continue}N.width=C.width+T}}}function E(F,q){for(var K={count:0,height:0},X=0,M=F.allRows();X<M.length;X++){for(var T=M[X],Z=0,oe=F.columns;Z<oe.length;Z++){var C=oe[Z],N=T.cells[C.index];if(N){q.applyStyles(N.styles,!0);var R=N.width-N.padding("horizontal");if(N.styles.overflow==="linebreak")N.text=q.splitTextToSize(N.text,R+1/q.scaleFactor(),{fontSize:N.styles.fontSize});else if(N.styles.overflow==="ellipsize")N.text=k(N.text,R,N.styles,q,"...");else if(N.styles.overflow==="hidden")N.text=k(N.text,R,N.styles,q,"");else if(typeof N.styles.overflow=="function"){var V=N.styles.overflow(N.text,R);typeof V=="string"?N.text=[V]:N.text=V}N.contentHeight=N.getContentHeight(q.scaleFactor(),q.getLineHeightFactor());var he=N.contentHeight/N.rowSpan;N.rowSpan>1&&K.count*K.height<he*N.rowSpan?K={height:he,count:N.rowSpan}:K&&K.count>0&&K.height>he&&(he=K.height),he>T.height&&(T.height=he)}}K.count--}}function k(F,q,K,X,M){return F.map(function(T){return A(T,q,K,X,M)})}h.ellipsize=k;function A(F,q,K,X,M){var T=1e4*X.scaleFactor();if(q=Math.ceil(q*T)/T,q>=(0,x.getStringWidth)(F,K,X))return F;for(;q<(0,x.getStringWidth)(F+M,K,X)&&!(F.length<=1);)F=F.substring(0,F.length-1);return F.trim()+M}},964:function(u){if(typeof t>"u"){var h=new Error("Cannot find module 'undefined'");throw h.code="MODULE_NOT_FOUND",h}u.exports=t}},a={};function i(u){var h=a[u];if(h!==void 0)return h.exports;var y=a[u]={exports:{}};return n[u].call(y.exports,y,y.exports,i),y.exports}var c={};return function(){var u=c;Object.defineProperty(u,"__esModule",{value:!0}),u.Cell=u.Column=u.Row=u.Table=u.CellHookData=u.__drawTable=u.__createTable=u.applyPlugin=void 0;var h=i(340),y=i(776),x=i(664),b=i(972),w=i(260);Object.defineProperty(u,"Table",{enumerable:!0,get:function(){return w.Table}});var m=i(172);Object.defineProperty(u,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var P=i(260);Object.defineProperty(u,"Cell",{enumerable:!0,get:function(){return P.Cell}}),Object.defineProperty(u,"Column",{enumerable:!0,get:function(){return P.Column}}),Object.defineProperty(u,"Row",{enumerable:!0,get:function(){return P.Row}});function L(q){(0,h.default)(q)}u.applyPlugin=L;function E(q,K){var X=(0,y.parseInput)(q,K),M=(0,b.createTable)(q,X);(0,x.drawTable)(q,M)}function k(q,K){var X=(0,y.parseInput)(q,K);return(0,b.createTable)(q,X)}u.__createTable=k;function A(q,K){(0,x.drawTable)(q,K)}u.__drawTable=A;try{var F=i(964);F.jsPDF&&(F=F.jsPDF),L(F)}catch{}u.default=E}(),c}()})})(th);var d0=th.exports;const bc=xc(d0),h0=r=>{const e=new Ot("portrait","mm","a4"),t=210,n=297,a=15,i=t-2*a,c=[59,130,246],u=[107,114,128];let h=20;e.setFillColor(c[0],c[1],c[2]),e.rect(0,0,t,35,"F"),e.setTextColor(255,255,255),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Sales Report",a,20),e.setFontSize(10),e.setFont("helvetica","normal");const y=`${_r(r.dateRange.start,"MMM dd, yyyy")} - ${_r(r.dateRange.end,"MMM dd, yyyy")}`;e.text(y,a,28),e.setFontSize(8),e.text(`Generated: ${_r(new Date,"MMM dd, yyyy hh:mm a")}`,t-60,28),h=45,e.setTextColor(0,0,0),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Executive Summary",a,h),h+=10;const x=[["Total Sales",`PHP ${r.totalSales.toFixed(2)}`],["Total Transactions",r.totalTransactions.toString()],["Total Inventory Cost",`PHP ${r.totalInventoryCost.toFixed(2)}`],["Total Profit",`PHP ${r.totalProfit.toFixed(2)}`]];if(bc(e,{startY:h,head:[["Metric","Value"]],body:x,theme:"grid",headStyles:{fillColor:c,textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{fontSize:9,cellPadding:4,halign:"center"},columnStyles:{0:{cellWidth:i*.65,halign:"center",fontStyle:"normal"},1:{cellWidth:i*.35,halign:"center",fontStyle:"bold"}},margin:{left:a,right:a},tableWidth:i,styles:{cellPadding:4,valign:"middle",halign:"center"}}),h=e.lastAutoTable.finalY+15,h>n-60&&(e.addPage(),h=20),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Recent Transactions",a,h),h+=10,r.transactions.length>0){const m=r.transactions.slice(0,15).map(P=>{var L,E,k,A;return[`#${P.transactionNumber.slice(-4)}`,_r(P.createdAt,"MM/dd hh:mm a"),P.items.length.toString(),P.paymentMethod.charAt(0).toUpperCase(),`PHP ${P.total.toFixed(0)}`,`${((E=(L=P.cashier)==null?void 0:L.firstName)==null?void 0:E[0])||""}${((A=(k=P.cashier)==null?void 0:k.lastName)==null?void 0:A[0])||""}`]});bc(e,{startY:h,head:[["ID","Date/Time","Items","Pay","Total","By"]],body:m,theme:"striped",headStyles:{fillColor:c,textColor:255,fontSize:10,fontStyle:"bold",halign:"center",valign:"middle",cellPadding:6},bodyStyles:{fontSize:9,halign:"center",valign:"middle",cellPadding:5},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:i*.15,halign:"center"},1:{cellWidth:i*.25,halign:"center"},2:{cellWidth:i*.12,halign:"center"},3:{cellWidth:i*.12,halign:"center"},4:{cellWidth:i*.18,halign:"center"},5:{cellWidth:i*.18,halign:"center"}},margin:{left:a,right:a},tableWidth:i,styles:{halign:"center",valign:"middle",lineColor:[229,229,229],lineWidth:.5}})}const b=e.getNumberOfPages();for(let m=1;m<=b;m++)e.setPage(m),e.setFontSize(7),e.setTextColor(u[0],u[1],u[2]),e.text(`Page ${m} of ${b}`,t-25,n-10),e.text("Generated by POS System",a,n-10);const w=`sales-report-${_r(r.dateRange.start,"yyyy-MM-dd")}-to-${_r(r.dateRange.end,"yyyy-MM-dd")}.pdf`;e.save(w)},f0=(r,e)=>{const t=new Ot("portrait","mm","a4"),n=210,a=297,i=15,c=n-2*i;t.setFillColor(59,130,246),t.rect(0,0,n,35,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Detailed Transaction Report",i,20),t.setFontSize(10),t.setFont("helvetica","normal");const u=`${_r(e.start,"MMM dd, yyyy")} - ${_r(e.end,"MMM dd, yyyy")}`;t.text(u,i,28);let h=45;if(r.length===0)t.setTextColor(0,0,0),t.setFontSize(12),t.text("No transactions found for the selected period.",i,h);else{const b=r.reduce((m,P)=>m+P.total,0);t.setTextColor(0,0,0),t.setFontSize(12),t.text(`Total Transactions: ${r.length}`,i,h),t.text(`Total Amount: PHP ${b.toFixed(2)}`,i,h+10),h+=25,r.slice(0,50).forEach(m=>{var P,L;if(h>a-70&&(t.addPage(),h=20),t.setFontSize(11),t.setFont("helvetica","bold"),t.text(`#${m.transactionNumber}`,i,h),t.setFont("helvetica","normal"),t.setFontSize(9),t.text(`${_r(m.createdAt,"MMM dd, yyyy hh:mm a")}`,i,h+8),t.text(`${((P=m.cashier)==null?void 0:P.firstName)||""} ${((L=m.cashier)==null?void 0:L.lastName)||""}`,i+50,h+8),t.text(`${m.paymentMethod}`,i+100,h+8),t.text(`PHP ${m.total.toFixed(2)}`,i+130,h+8),h+=18,m.items.length>0){const E=m.items.map(k=>{var A,F;return[((F=(A=k.product)==null?void 0:A.name)==null?void 0:F.substring(0,30))||"Unknown Product",k.quantity.toString(),`PHP ${k.unitPrice.toFixed(2)}`,`PHP ${k.totalPrice.toFixed(2)}`]});bc(t,{startY:h,head:[["Product","Qty","Price","Total"]],body:E,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:255,fontSize:8,halign:"center"},bodyStyles:{fontSize:7,halign:"center"},columnStyles:{0:{cellWidth:c*.5,halign:"center"},1:{cellWidth:c*.15,halign:"center"},2:{cellWidth:c*.175,halign:"center"},3:{cellWidth:c*.175,halign:"center"}},margin:{left:i,right:i},tableWidth:c,styles:{halign:"center"}}),h=t.lastAutoTable.finalY+8}t.setDrawColor(200,200,200),t.line(i,h,n-i,h),h+=8}),r.length>50&&(h>a-30&&(t.addPage(),h=20),t.setFontSize(9),t.setTextColor(107,114,128),t.text(`Note: Report limited to first 50 transactions. Total transactions in period: ${r.length}`,i,h))}const y=t.getNumberOfPages();for(let b=1;b<=y;b++)t.setPage(b),t.setFontSize(7),t.setTextColor(107,114,128),t.text(`Page ${b} of ${y}`,n-25,a-10),t.text("Generated by POS System",i,a-10);const x=`detailed-transactions-${_r(e.start,"yyyy-MM-dd")}-to-${_r(e.end,"yyyy-MM-dd")}.pdf`;t.save(x)},p0=()=>{var oe,C;const{transactions:r,products:e}=qn(),[t,n]=gt.useState("today"),[a,i]=gt.useState(_r(new Date,"yyyy-MM-dd")),[c,u]=gt.useState(_r(new Date,"yyyy-MM-dd")),[h,y]=gt.useState(null),[x,b]=gt.useState(!1),w=()=>{const N=new Date;switch(t){case"today":return{start:lu(N),end:cu(N)};case"week":return{start:pf(N),end:mf(N)};case"month":return{start:hf(N),end:ff(N)};case"custom":return{start:new Date(a),end:new Date(c)};default:return{start:lu(N),end:cu(N)}}},{start:m,end:P}=w(),L=r.filter(N=>N.createdAt>=m&&N.createdAt<=P&&N.type==="sale"&&N.status==="completed"),E=L.reduce((N,R)=>N+R.total,0),k=L.length,A=(e==null?void 0:e.reduce((N,R)=>N+R.cost*R.quantity,0))||0,F=L.reduce((N,R)=>{const V=R.items.reduce((he,$)=>{var ne;const Y=($.unitPrice-(((ne=$.product)==null?void 0:ne.cost)||0))*$.quantity;return he+Y},0);return N+V},0),q=()=>{const R=[["Transaction ID","Date","Time","Total","Payment Method","Items Count"],...L.map(Y=>[Y.transactionNumber,_r(Y.createdAt,"yyyy-MM-dd"),_r(Y.createdAt,"hh:mm:ss a"),Y.total.toFixed(2),Y.paymentMethod,Y.items.length.toString()])].map(Y=>Y.join(",")).join(`
`),V=new Blob([R],{type:"text/csv"}),he=window.URL.createObjectURL(V),$=document.createElement("a");$.href=he,$.download=`sales-report-${_r(m,"yyyy-MM-dd")}-to-${_r(P,"yyyy-MM-dd")}.csv`,$.click(),window.URL.revokeObjectURL(he)},K=()=>{h0({transactions:L,dateRange:{start:m,end:P},totalSales:E,totalTransactions:k,totalInventoryCost:A,totalProfit:F})},X=()=>{f0(L,{start:m,end:P})},M=[{title:"Total Sales",value:Qt(E),icon:nd,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:k.toString(),icon:Va,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Inventory Cost",value:Qt(A),icon:id,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Total Profit",value:Qt(F),icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"}],T=N=>{y(N),b(!0)},Z=()=>{y(null),b(!1)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Reports"}),o.jsx("p",{className:"text-gray-500",children:"Analyze your sales performance and trends"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:q,className:"btn btn-outline",disabled:L.length===0,children:[o.jsx(tl,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),o.jsxs("button",{onClick:K,className:"btn btn-primary",disabled:L.length===0,children:[o.jsx(df,{className:"h-4 w-4 mr-2"}),"Summary PDF"]}),o.jsxs("button",{onClick:X,className:"btn btn-secondary",disabled:L.length===0,children:[o.jsx(au,{className:"h-4 w-4 mr-2"}),"Detailed PDF"]})]})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[o.jsx("div",{className:"flex space-x-2",children:[{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"month",label:"This Month"},{key:"custom",label:"Custom"}].map(N=>o.jsx("button",{onClick:()=>n(N.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===N.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N.label},N.key))}),t==="custom"&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"date",value:a,onChange:N=>i(N.target.value),className:"input text-sm"}),o.jsx("span",{className:"text-gray-500 self-center",children:"to"}),o.jsx("input",{type:"date",value:c,onChange:N=>u(N.target.value),className:"input text-sm"})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map(N=>{const R=N.icon;return o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`p-2 rounded-lg ${N.bgColor}`,children:o.jsx(R,{className:`h-6 w-6 ${N.color}`})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:N.title}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.value})]})]})},N.title)})}),o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Transactions"}),L.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Transaction ID"}),o.jsx("th",{children:"Date & Time"}),o.jsx("th",{children:"Items"}),o.jsx("th",{children:"Payment"}),o.jsx("th",{children:"Total"}),o.jsx("th",{children:"Cashier"})]})}),o.jsx("tbody",{children:L.slice(0,10).map(N=>{var R,V;return o.jsxs("tr",{onClick:()=>T(N),className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("td",{children:o.jsxs("span",{className:"font-mono text-sm",children:["#",N.transactionNumber]})}),o.jsx("td",{children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:_r(N.createdAt,"MMM dd, yyyy")}),o.jsx("div",{className:"text-sm text-gray-500",children:_r(N.createdAt,"hh:mm:ss a")})]})}),o.jsx("td",{children:o.jsxs("span",{className:"text-sm",children:[N.items.length," items"]})}),o.jsx("td",{children:o.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 capitalize",children:N.paymentMethod})}),o.jsx("td",{children:o.jsxs("span",{className:"font-medium",children:["",N.total.toFixed(2)]})}),o.jsx("td",{children:o.jsxs("span",{className:"text-sm text-gray-900",children:[(R=N.cashier)==null?void 0:R.firstName," ",(V=N.cashier)==null?void 0:V.lastName]})})]},N.id)})})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(au,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No transactions found for this period"})]})]}),x&&h&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ks,{className:"h-6 w-6 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),o.jsx("button",{onClick:Z,className:"text-gray-400 hover:text-gray-600",children:o.jsx(ba,{className:"h-6 w-6"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ks,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),o.jsxs("p",{className:"font-medium",children:["#",h.transactionNumber]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Nc,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),o.jsx("p",{className:"font-medium",children:_r(h.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(wc,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),o.jsxs("p",{className:"font-medium",children:[(oe=h.cashier)==null?void 0:oe.firstName," ",(C=h.cashier)==null?void 0:C.lastName]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(sd,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),o.jsx("p",{className:"font-medium capitalize",children:h.paymentMethod})]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),o.jsx("div",{className:"space-y-2",children:h.items.map(N=>{var R;return o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-900",children:((R=N.product)==null?void 0:R.name)||"Unknown Product"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[Qt(N.unitPrice),"  ",N.quantity]})]}),o.jsx("div",{className:"text-right",children:o.jsx("p",{className:"font-medium text-gray-900",children:Qt(N.totalPrice)})})]},N.id)})})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{children:Qt(h.subtotal)})]}),h.discount>0&&o.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[o.jsx("span",{children:"Discount:"}),o.jsxs("span",{children:["-",Qt(h.discount)]})]}),o.jsx("div",{className:"border-t border-gray-200 pt-2",children:o.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Qt(h.total)})]})}),h.paymentMethod==="cash"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Cash Received:"}),o.jsx("span",{children:Qt(h.paymentAmount)})]}),h.changeAmount>0&&o.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[o.jsx("span",{children:"Change Given:"}),o.jsx("span",{children:Qt(h.changeAmount)})]})]})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{children:o.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})}),o.jsxs("p",{className:"text-sm text-gray-500",children:[h.items.length," item",h.items.length!==1?"s":""]})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:Z,className:"btn btn-outline",children:"Close"})})})]})})]})},m0=()=>{var N;const{users:r,addUser:e,updateUserData:t,deleteUser:n,auth:a}=qn(),[i,c]=gt.useState(!1),[u,h]=gt.useState(null),[y,x]=gt.useState(!1),[b,w]=gt.useState(!1),[m,P]=gt.useState(""),{register:L,handleSubmit:E,reset:k,watch:A,setValue:F,formState:{errors:q}}=wo(),K=A("password");if(((N=a.user)==null?void 0:N.role)!=="admin")return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ws,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage users."})]})});const X=R=>{R?(h(R),k({username:R.username,email:R.email,firstName:R.firstName,lastName:R.lastName,role:R.role,isActive:R.isActive,password:"",confirmPassword:""})):(h(null),k({username:"",email:"",firstName:"",lastName:"",role:"cashier",isActive:!0,password:"",confirmPassword:""})),P(""),c(!0)},M=()=>{c(!1),h(null),P(""),x(!1),w(!1),k()},T=()=>{const R=tm(10);P(R),F("password",R),F("confirmPassword",R)},Z=R=>{if(R.password!==R.confirmPassword){alert("Passwords do not match!");return}if(!u||R.password){const V=rm(R.password);if(!V.isValid){alert(`Password requirements:
`+V.errors.join(`
`));return}}if(u){const V={username:R.username,email:R.email,firstName:R.firstName,lastName:R.lastName,role:R.role,isActive:R.isActive,updatedAt:new Date};R.password&&(V.password=Wa(R.password)),t(u.id,V)}else{const V={id:Date.now().toString(),username:R.username,email:R.email,password:Wa(R.password),firstName:R.firstName,lastName:R.lastName,role:R.role,isActive:R.isActive,createdAt:new Date,updatedAt:new Date};e(V)}M()},oe=R=>{var V;if(R.id===((V=a.user)==null?void 0:V.id)){alert("You cannot delete your own account.");return}window.confirm(`Are you sure you want to delete user "${R.username}"?`)&&n(R.id)},C=R=>{switch(R){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"cashier":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),o.jsx("p",{className:"text-gray-500",children:"Manage employee accounts and permissions"})]}),o.jsxs("button",{onClick:()=>X(),className:"btn btn-primary",children:[o.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),o.jsx("div",{className:"card overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"User"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Role"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Created Date"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:r.map(R=>{var V;return o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-3",children:o.jsx(Zl,{className:"h-5 w-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"font-medium text-gray-900",children:[R.firstName," ",R.lastName]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["@",R.username]})]})]})}),o.jsx("td",{children:o.jsx("span",{className:"text-sm text-gray-900",children:R.email})}),o.jsx("td",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${C(R.role)}`,children:R.role})}),o.jsx("td",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${R.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.isActive?"Active":"Inactive"})}),o.jsx("td",{children:o.jsx("span",{className:"text-sm text-gray-500",children:new Date(R.createdAt).toLocaleDateString()})}),o.jsx("td",{children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>X(R),className:"p-1 text-blue-600 hover:text-blue-800",children:o.jsx(co,{className:"h-4 w-4"})}),R.id!==((V=a.user)==null?void 0:V.id)&&o.jsx("button",{onClick:()=>oe(R),className:"p-1 text-red-600 hover:text-red-800",children:o.jsx(el,{className:"h-4 w-4"})})]})})]},R.id)})})]}),r.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Zl,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No users found"})]})]})}),i&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit User":"Add New User"}),o.jsxs("form",{onSubmit:E(Z),className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),o.jsx("input",{...L("firstName",{required:"First name is required"}),className:"input",placeholder:"Enter first name"}),q.firstName&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.firstName.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),o.jsx("input",{...L("lastName",{required:"Last name is required"}),className:"input",placeholder:"Enter last name"}),q.lastName&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.lastName.message})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),o.jsx("input",{...L("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),className:"input",placeholder:"Enter username"}),q.username&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.username.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),o.jsx("input",{...L("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),type:"email",className:"input",placeholder:"Enter email address"}),q.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.email.message})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",u?"(leave blank to keep current)":"*"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{...L("password",u?{}:{required:"Password is required for new users"}),type:y?"text":"password",className:"input pr-20",placeholder:u?"Enter new password (optional)":"Enter password"}),o.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[o.jsx("button",{type:"button",onClick:T,className:"p-2 text-blue-600 hover:text-blue-800 mr-1",title:"Generate random password",children:o.jsx(vs,{className:"h-4 w-4"})}),o.jsx("button",{type:"button",onClick:()=>x(!y),className:"p-2 text-gray-500 hover:text-gray-700",children:y?o.jsx(ec,{className:"h-4 w-4"}):o.jsx(tc,{className:"h-4 w-4"})})]})]}),q.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.password.message}),m&&o.jsxs("p",{className:"mt-1 text-sm text-green-600",children:["Generated password: ",o.jsx("span",{className:"font-mono font-bold",children:m}),o.jsx("br",{}),o.jsx("span",{className:"text-xs",children:"Make sure to save this password!"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Password ",u?"(if changing password)":"*"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{...L("confirmPassword",u?{}:{required:"Please confirm the password"}),type:b?"text":"password",className:"input pr-10",placeholder:"Confirm password"}),o.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:b?o.jsx(ec,{className:"h-4 w-4"}):o.jsx(tc,{className:"h-4 w-4"})})]}),q.confirmPassword&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.confirmPassword.message}),K&&A("confirmPassword")&&K!==A("confirmPassword")&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Passwords do not match"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),o.jsxs("select",{...L("role",{required:"Role is required"}),className:"input",children:[o.jsx("option",{value:"cashier",children:"Cashier"}),o.jsx("option",{value:"manager",children:"Manager"}),o.jsx("option",{value:"admin",children:"Admin"})]}),q.role&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.role.message}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[o.jsx("strong",{children:"Cashier:"})," Can process sales and view basic reports",o.jsx("br",{}),o.jsx("strong",{children:"Manager:"})," Can manage inventory and view detailed reports",o.jsx("br",{}),o.jsx("strong",{children:"Admin:"})," Full access to all features"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{...L("isActive"),type:"checkbox",className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),o.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active user (can login)"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:M,className:"btn btn-outline",children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},g0=()=>{var q,K,X,M,T,Z,oe;const{settings:r,updateSettings:e,auth:t,transactions:n,products:a,users:i,initializeFromDatabase:c}=qn(),[u,h]=gt.useState(null),[y,x]=gt.useState(null),{register:b,handleSubmit:w,formState:{errors:m}}=wo({defaultValues:{storeName:r.storeName,currency:"PHP"}});gt.useEffect(()=>{(()=>{const N=Rn.getLicenseInfo();h(N);const R=Rn.getDaysUntilExpiry();x(R)})()},[]);const P=()=>{window.confirm("Are you sure you want to deactivate this license? The application will require reactivation to continue working.")&&(Rn.deactivateLicense(),alert("License deactivated successfully. The application will now restart."),window.location.reload())},L=C=>{e({...C,currency:"PHP"}),alert("Settings saved successfully!")},E=async()=>{try{const C=await Gs.backup(),N=window.URL.createObjectURL(C),R=document.createElement("a");R.href=N,R.download=`pos-backup-${new Date().toISOString().split("T")[0]}.json`,R.click(),window.URL.revokeObjectURL(N)}catch(C){console.error("Export failed:",C),alert("Failed to export data. Please try again.")}},k=async C=>{var V;const N=(V=C.target.files)==null?void 0:V[0];if(!N)return;if(C.target.value="",!N.name.endsWith(".json")){alert("Please select a valid JSON backup file");return}const R=new FileReader;R.onload=async he=>{var $;try{const Y=($=he.target)==null?void 0:$.result,ne=JSON.parse(Y);if(!ne.version||!ne.users&&!ne.products&&!ne.transactions){alert("Invalid backup file format. This does not appear to be a valid POS backup file.");return}if(window.confirm("This will overwrite all current data including transactions, products, and users. This action cannot be undone. Are you sure?"))try{await Gs.restore(Y),await c(),alert("Data imported successfully! All data has been restored from the backup.")}catch(ie){console.error("Import failed:",ie),alert("Failed to import data. The backup file may be corrupted or incompatible.")}}catch(Y){console.error("Failed to parse backup file:",Y),alert("Invalid backup file format. Please select a valid JSON backup file.")}},R.readAsText(N)},A=async()=>{if(window.confirm("This will delete ALL data including transactions, products, and users. This action cannot be undone. Are you sure?")&&window.confirm("Final confirmation: This will permanently delete everything. Are you sure you want to proceed?"))try{await Gs.clearAll(),await c(),alert("All data has been successfully cleared.")}catch(C){console.error("Clear data failed:",C),alert("Failed to clear data. Please try again.")}};return((q=t.user)==null?void 0:q.role)==="admin"||((K=t.user)==null?void 0:K.role)==="manager"?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),o.jsx("p",{className:"text-gray-500",children:"Configure your POS system preferences"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Information"}),o.jsxs("form",{onSubmit:w(L),className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),o.jsx("input",{...b("storeName",{required:"Store name is required"}),className:"input",placeholder:"Enter store name"}),m.storeName&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.storeName.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),o.jsx("select",{...b("currency",{required:"Currency is required"}),className:"input",disabled:!0,children:o.jsx("option",{value:"PHP",children:"PHP - Philippine Peso"})}),m.currency&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.currency.message})]}),o.jsxs("button",{type:"submit",className:"btn btn-primary",children:[o.jsx(cd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Products:"}),o.jsx("span",{className:"font-medium",children:a.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Transactions:"}),o.jsx("span",{className:"font-medium",children:n.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Users:"}),o.jsx("span",{className:"font-medium",children:i.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Current User:"}),o.jsxs("span",{className:"font-medium",children:[(X=t.user)==null?void 0:X.firstName," ",(M=t.user)==null?void 0:M.lastName]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"User Role:"}),o.jsx("span",{className:"font-medium capitalize",children:(T=t.user)==null?void 0:T.role})]})]})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Ws,{className:"h-6 w-6 text-blue-600 mr-2"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"License Information"})]}),u?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ws,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsx("span",{className:"text-green-800 font-medium",children:"License Active"})]}),o.jsx("span",{className:"text-green-600 text-sm",children:"Valid & Activated"})]}),y!==null&&y<=30&&y>0&&o.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsx(td,{className:"h-5 w-5 text-yellow-600 mr-2"}),o.jsxs("span",{className:"text-yellow-800 text-sm",children:["License expires in ",y," day",y!==1?"s":""]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Customer Name"}),o.jsx("p",{className:"text-sm text-gray-900",children:u.customerName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),o.jsx("p",{className:"text-sm text-gray-900",children:u.customerEmail})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Expires"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Nc,{className:"h-4 w-4 text-gray-400 mr-1"}),o.jsx("p",{className:"text-sm text-gray-900",children:u.expiryDate.toLocaleDateString()})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Features"}),o.jsx("p",{className:"text-sm text-gray-900",children:u.features.join(", ")})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"License Key"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md px-3 py-2 flex-1 mr-2",children:o.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:u.licenseKey})}),o.jsx("button",{onClick:()=>navigator.clipboard.writeText(u.licenseKey),className:"btn btn-outline text-xs px-3 py-2",title:"Copy license key",children:o.jsx(rd,{className:"h-3 w-3"})})]})]}),((Z=t.user)==null?void 0:Z.role)==="admin"&&o.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[o.jsx("button",{onClick:P,className:"btn btn-danger text-sm",children:"Deactivate License"}),o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Deactivating the license will require reactivation to use the system."})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ws,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500 mb-2",children:"No license information available"}),o.jsx("p",{className:"text-sm text-gray-400",children:"This should not happen if the app is running."})]})]}),((oe=t.user)==null?void 0:oe.role)==="admin"&&o.jsxs("div",{className:"card",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(tl,{className:"h-5 w-5 text-blue-600 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Export Data"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Download a backup of all your data"}),o.jsxs("button",{onClick:E,className:"btn btn-outline w-full",children:[o.jsx(tl,{className:"h-4 w-4 mr-2"}),"Export Backup"]})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors duration-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(rl,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Import Data"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restore data from a backup file"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",accept:".json",onChange:k,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"backup-file-input"}),o.jsx("label",{htmlFor:"backup-file-input",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-green-300 rounded-lg cursor-pointer bg-green-50 hover:bg-green-100 transition-colors duration-200",children:o.jsxs("div",{className:"flex flex-col items-center justify-center",children:[o.jsx(rl,{className:"h-6 w-6 text-green-600 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-green-800",children:"Click to upload"}),o.jsx("p",{className:"text-xs text-green-600",children:"JSON files only"})]})})]})]}),o.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(su,{className:"h-5 w-5 text-red-600 mr-2"}),o.jsx("h3",{className:"font-medium text-red-900",children:"Clear All Data"})]}),o.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Permanently delete all system data"}),o.jsxs("button",{onClick:A,className:"btn btn-danger w-full",children:[o.jsx(su,{className:"h-4 w-4 mr-2"}),"Clear Data"]})]})]}),o.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),o.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:o.jsx("p",{children:"Always create regular backups of your data. The clear data operation is irreversible and will permanently delete all transactions, products, and user data."})})]})]})})]})]}):o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ed,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage settings."})]})})};class jo{static async checkAndMigrate(){if(localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true"){console.log("Migration already completed, skipping...");return}const t=this.getLegacyData();if(!t||this.isLegacyDataEmpty(t)){console.log("No legacy data found, marking migration as complete"),this.markMigrationComplete();return}console.log("Starting migration from localStorage to IndexedDB...");try{await this.migrateLegacyData(t),this.markMigrationComplete(),this.backupLegacyData(),console.log("Migration completed successfully")}catch(n){throw console.error("Migration failed:",n),n}}static getLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(!e)return null;const t=JSON.parse(e);return t.state||t}catch(e){return console.error("Failed to parse legacy data:",e),null}}static isLegacyDataEmpty(e){return(!e.users||e.users.length===0)&&(!e.products||e.products.length===0)&&(!e.categories||e.categories.length===0)&&(!e.transactions||e.transactions.length===0)}static async migrateLegacyData(e){var t,n,a,i,c;console.log("Migrating legacy data:",{users:((t=e.users)==null?void 0:t.length)||0,products:((n=e.products)==null?void 0:n.length)||0,categories:((a=e.categories)==null?void 0:a.length)||0,transactions:((i=e.transactions)==null?void 0:i.length)||0,activityLogs:((c=e.activityLogs)==null?void 0:c.length)||0}),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{if(e.categories&&e.categories.length>0){for(const u of e.categories)try{await He.categories.get(u.id)?console.log(`Category ${u.id} already exists, skipping...`):await He.categories.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate category:",u.id,h)}console.log(`Processed ${e.categories.length} categories`)}if(e.users&&e.users.length>0){for(const u of e.users)try{await He.users.get(u.id)?console.log(`User ${u.id} already exists, skipping...`):await He.users.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date,lastLogin:u.lastLogin?new Date(u.lastLogin):void 0})}catch(h){console.error("Failed to migrate user:",u.id,h)}console.log(`Processed ${e.users.length} users`)}if(e.products&&e.products.length>0){for(const u of e.products)try{await He.products.get(u.id)?console.log(`Product ${u.id} already exists, skipping...`):await He.products.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate product:",u.id,h)}console.log(`Processed ${e.products.length} products`)}if(e.transactions&&e.transactions.length>0){for(const u of e.transactions)try{await He.transactions.get(u.id)?console.log(`Transaction ${u.id} already exists, skipping...`):await He.transactions.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate transaction:",u.id,h)}console.log(`Processed ${e.transactions.length} transactions`)}if(e.activityLogs&&e.activityLogs.length>0){for(const u of e.activityLogs)try{await He.activityLogs.get(u.id)?console.log(`Activity log ${u.id} already exists, skipping...`):await He.activityLogs.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date})}catch(h){console.error("Failed to migrate activity log:",u.id,h)}console.log(`Processed ${e.activityLogs.length} activity logs`)}if(e.settings)try{if(await He.settings.get("migrated"))console.log("Settings already exist, skipping...");else{const h={id:"migrated",currency:"PHP",storeName:e.settings.storeName||"My Store",storeAddress:e.settings.storeAddress,storePhone:e.settings.storePhone,storeEmail:e.settings.storeEmail,autoBackup:e.settings.autoBackup||!1,backupFrequency:e.settings.backupFrequency||"daily",lowStockAlert:e.settings.lowStockAlert!==void 0?e.settings.lowStockAlert:!0,lowStockThreshold:e.settings.lowStockThreshold||5,createdAt:new Date,updatedAt:new Date};await He.settings.add(h),console.log("Migrated settings")}}catch(u){console.error("Failed to migrate settings:",u)}})}static markMigrationComplete(){localStorage.setItem(this.MIGRATION_FLAG_KEY,"true")}static backupLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(e){const t=`${this.LEGACY_STORAGE_KEY}-backup-${Date.now()}`;localStorage.setItem(t,e),console.log(`Legacy data backed up to ${t}`)}}catch(e){console.error("Failed to backup legacy data:",e)}}static async forceMigration(){try{console.log("Forcing migration: clearing database and migration flag"),localStorage.removeItem(this.MIGRATION_FLAG_KEY),await Gs.clearAll(),await this.checkAndMigrate()}catch(e){throw console.error("Force migration failed:",e),e}}static resetMigrationFlag(){localStorage.removeItem(this.MIGRATION_FLAG_KEY),console.log("Migration flag reset. Next app load will trigger migration check.")}static async exportToLegacyFormat(){const e={users:await Ai.getAll(),products:await Ua.getAll(),categories:await ms.getAll(),transactions:await Vs.getAll(),activityLogs:await xo.getAll(),settings:await bs.get()};return JSON.stringify({state:e},null,2)}static getMigrationStatus(){var i,c,u,h,y;const e=localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true",t=this.getLegacyData(),n=t&&!this.isLegacyDataEmpty(t);let a=0;return t&&(a=(((i=t.users)==null?void 0:i.length)||0)+(((c=t.products)==null?void 0:c.length)||0)+(((u=t.categories)==null?void 0:u.length)||0)+(((h=t.transactions)==null?void 0:h.length)||0)+(((y=t.activityLogs)==null?void 0:y.length)||0)),{migrationCompleted:e,hasLegacyData:!!n,legacyDataSize:a}}static async clearDatabase(){try{console.log(" Starting complete database and localStorage cleanup..."),He.isOpen()&&(console.log(" Closing database connection..."),He.close(),await new Promise(h=>setTimeout(h,500))),console.log(" Deleting IndexedDB database..."),await He.delete(),await new Promise(h=>setTimeout(h,500)),console.log(" Clearing ALL localStorage...");const e=[];for(let h=0;h<localStorage.length;h++){const y=localStorage.key(h);y&&e.push(y)}e.forEach(h=>{(h.includes("pos")||h.includes("store")||h.includes("auth")||h.includes("migration")||h.includes("database"))&&(console.log(` Removing localStorage key: ${h}`),localStorage.removeItem(h))}),[this.MIGRATION_FLAG_KEY,this.LEGACY_STORAGE_KEY,"pos-auth-storage","pos-store","pos-migrated-to-db","pos-data-cleared-intentionally","react-pos-store","zustand-store","posSystemStore"].forEach(h=>{localStorage.removeItem(h),console.log(` Cleared specific key: ${h}`)});try{sessionStorage.clear(),console.log(" Cleared sessionStorage")}catch(h){console.warn("Could not clear sessionStorage:",h)}await new Promise(h=>setTimeout(h,1e3)),console.log(" Re-opening database with fresh schema..."),await He.open();const n=await He.users.count(),a=await He.products.count(),i=await He.categories.count(),c=await He.transactions.count(),u=await He.activityLogs.count();if(console.log(" Database cleared successfully"),console.log(` Verification - Users: ${n}, Products: ${a}, Categories: ${i}, Transactions: ${c}, Logs: ${u}`),n>0||a>0||i>0){console.warn(" Warning: Some data still exists after clearing. Attempting force clear..."),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{const b=await He.users.toArray();for(const E of b)await He.users.delete(E.id);const w=await He.products.toArray();for(const E of w)await He.products.delete(E.id);const m=await He.categories.toArray();for(const E of m)await He.categories.delete(E.id);const P=await He.transactions.toArray();for(const E of P)await He.transactions.delete(E.id);const L=await He.activityLogs.toArray();for(const E of L)await He.activityLogs.delete(E.id);await He.settings.clear()}),console.log(" Force clear completed");const h=await He.users.count(),y=await He.products.count(),x=await He.categories.count();console.log(` Final verification - Users: ${h}, Products: ${y}, Categories: ${x}`)}}catch(e){console.error(" Failed to clear database:",e);const t=e instanceof Error?e.message:"Unknown error occurred";throw new Error(`Database clear failed: ${t}`)}}}cn(jo,"LEGACY_STORAGE_KEY","pos-store"),cn(jo,"MIGRATION_FLAG_KEY","pos-migrated-to-db");const y0=async()=>{console.log("Checking if sample data should be initialized...");try{const{ProductService:r,CategoryService:e,UserService:t,DatabaseService:n}=await cl(()=>Promise.resolve().then(()=>_p),void 0,import.meta.url);if(n.wasDataClearedIntentionally()){console.log(" Data was cleared intentionally. Skipping sample data initialization."),console.log(' To restore sample data, use the "Reset Database" option instead of "Clear All Data".');return}const a=await r.getAll(),i=await e.getAll(),c=await t.getAll();if(a.length>0&&i.length>0&&c.length>0){console.log("Sample data already exists, skipping initialization");return}console.log("Initializing fresh sample data...");const u=[{id:"user-1",username:"admin",email:"admin@pos.com",password:Wa("password"),role:"admin",firstName:"Admin",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-2",username:"manager",email:"manager@pos.com",password:Wa("password"),role:"manager",firstName:"Manager",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-3",username:"cashier",email:"cashier@pos.com",password:Wa("password"),role:"cashier",firstName:"Cashier",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-4",username:"admin123",email:"admin123@pos.com",password:Wa("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date}],h=[{id:"cat-1",name:"Beverages",description:"Drinks and beverages",createdAt:new Date,updatedAt:new Date},{id:"cat-2",name:"Snacks",description:"Snacks and confectionery",createdAt:new Date,updatedAt:new Date},{id:"cat-3",name:"Dairy",description:"Milk and dairy products",createdAt:new Date,updatedAt:new Date},{id:"cat-4",name:"Bakery",description:"Bread and baked goods",createdAt:new Date,updatedAt:new Date},{id:"cat-5",name:"Household",description:"Household items and cleaning supplies",createdAt:new Date,updatedAt:new Date}],y=[{id:"prod-1",name:"Coca-Cola 330ml",description:"Refreshing cola drink",sku:"COKE-330",barcode:"123456789012",price:1.5,cost:.75,quantity:100,minStockLevel:20,categoryId:"cat-1",isActive:!0,imageUrl:"",wholesalePrice:1.2,wholesaleMinQuantity:24,createdAt:new Date,updatedAt:new Date},{id:"prod-2",name:"Pepsi 330ml",description:"Cola soft drink",sku:"PEPSI-330",barcode:"123456789013",price:1.45,cost:.7,quantity:85,minStockLevel:15,categoryId:"cat-1",isActive:!0,imageUrl:"",wholesalePrice:1.15,wholesaleMinQuantity:24,createdAt:new Date,updatedAt:new Date},{id:"prod-3",name:"Lay's Potato Chips",description:"Crispy salted potato chips",sku:"LAYS-REG",barcode:"123456789014",price:2.25,cost:1.2,quantity:60,minStockLevel:12,categoryId:"cat-2",isActive:!0,imageUrl:"",wholesalePrice:1.8,wholesaleMinQuantity:12,createdAt:new Date,updatedAt:new Date},{id:"prod-4",name:"Banana (per kg)",description:"Fresh yellow bananas",sku:"BANANA-KG",barcode:"123456789015",price:2.5,cost:1.5,quantity:45,minStockLevel:10,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-5",name:"Whole Milk 1L",description:"Fresh whole milk",sku:"MILK-1L",barcode:"123456789016",price:3.5,cost:2,quantity:30,minStockLevel:8,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-6",name:"White Bread",description:"Fresh white bread loaf",sku:"BREAD-WHT",barcode:"123456789017",price:2.75,cost:1.4,quantity:25,minStockLevel:5,categoryId:"cat-4",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-7",name:"Paper Towels",description:"Absorbent paper towels",sku:"PPR-TOWEL",barcode:"123456789018",price:4.5,cost:2.25,quantity:40,minStockLevel:10,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-8",name:"Orange Juice 1L",description:"100% pure orange juice",sku:"OJ-1L",barcode:"123456789019",price:4.25,cost:2.5,quantity:35,minStockLevel:8,categoryId:"cat-1",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-9",name:"Cheese Slices",description:"Processed cheese slices",sku:"CHEESE-SLC",barcode:"123456789020",price:5.5,cost:3,quantity:20,minStockLevel:5,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-10",name:"Dish Soap",description:"Liquid dish soap",sku:"SOAP-DISH",barcode:"123456789021",price:3.75,cost:1.8,quantity:30,minStockLevel:7,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date}];console.log("Adding users...");for(const x of u)try{await He.users.put(x),console.log(` Added user: ${x.username}`)}catch{console.log(` User ${x.username} might already exist, skipping...`)}console.log("Adding categories...");for(const x of h)try{await He.categories.put(x),console.log(` Added category: ${x.name}`)}catch{console.log(` Category ${x.name} might already exist, skipping...`)}console.log("Adding products...");for(const x of y)try{await He.products.put(x),console.log(` Added product: ${x.name}`)}catch{console.log(` Product ${x.name} might already exist, skipping...`)}console.log("Sample data initialized successfully")}catch(r){throw console.error("Failed to initialize sample data:",r),r}};async function v0(){try{console.log("Initializing POS Database..."),await Gs.initialize(),await jo.checkAndMigrate(),await y0(),console.log("Database initialization completed")}catch(r){throw console.error("Database initialization failed:",r),r}}async function b0(){try{if(await Ai.getByUsername("admin123")){console.log("User admin123 already exists");return}const e={id:"user-admin123-"+Date.now(),username:"admin123",email:"admin123@pos.com",password:Wa("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date};await Ai.create(e),console.log(" Admin user created successfully!"),console.log("Username: admin123"),console.log("Password: adminpassword"),console.log("Role: admin")}catch(r){throw console.error("Failed to create admin123 user:",r),r}}class fs{static initialize(){this.loadState(),this.setupNetworkListeners(),this.scheduleNextCheck(),console.log("License Scheduler initialized (silent mode)")}static setupNetworkListeners(){const e=()=>{console.log("Network connection restored - checking if license validation is due"),this.checkIfMonthlyCheckNeeded()};window.addEventListener("online",e)}static scheduleNextCheck(){this.checkTimeoutId&&clearTimeout(this.checkTimeoutId);const e=this.calculateNextCheckTime();if(!e){this.checkIfMonthlyCheckNeeded();return}const t=new Date,n=e.getTime()-t.getTime();n<=0?this.checkIfMonthlyCheckNeeded():(this.checkTimeoutId=setTimeout(()=>{this.checkIfMonthlyCheckNeeded()},n),console.log(`Next license check scheduled for: ${e.toLocaleString()}`))}static async checkIfMonthlyCheckNeeded(){const e=new Date;this.isMonthlyCheckDue(e)&&(console.log("Monthly license check is due, performing validation..."),(await this.performMonthlyCheck()).success?this.scheduleNextCheck():this.checkTimeoutId=setTimeout(()=>{this.checkIfMonthlyCheckNeeded()},24*60*60*1e3))}static isMonthlyCheckDue(e){if(!this.state.lastMonthlyCheck)return!0;const t=new Date(this.state.lastMonthlyCheck);return e.getTime()-t.getTime()>=this.MONTHLY_INTERVAL}static calculateNextCheckTime(){if(!this.state.lastMonthlyCheck){const n=new Date;return n.setMinutes(n.getMinutes()+1),n}const e=new Date(this.state.lastMonthlyCheck);return new Date(e.getTime()+this.MONTHLY_INTERVAL)}static async performMonthlyCheck(){var t;const e=new Date().toISOString();try{return console.log("License Scheduler: Starting monthly license validation..."),await this.testInternetConnectivity()?await Rn.refreshLicense()?(console.log("License Scheduler: Monthly validation successful"),this.state.lastMonthlyCheck=e,this.state.nextScheduledCheck=((t=this.calculateNextCheckTime())==null?void 0:t.toISOString())||null,this.state.missedChecks=0,this.saveState(),{success:!0,timestamp:e,licenseValid:!0}):(console.warn("License Scheduler: Monthly validation failed - license invalid"),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,error:"License validation failed"}):(console.log("License Scheduler: No internet connectivity - will retry later"),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,wasOffline:!0,error:"No internet connectivity"})}catch(n){return console.error("License Scheduler: Monthly check error:",n),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,error:n instanceof Error?n.message:"Unknown error"}}}static async testInternetConnectivity(){if(!navigator.onLine)return!1;try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),n=await fetch(`${{}.REACT_APP_LICENSE_SERVER_URL||"http://localhost:5000"}/api/health`,{method:"HEAD",signal:e.signal,cache:"no-cache"});return clearTimeout(t),n.ok}catch{try{const t=new AbortController,n=setTimeout(()=>t.abort(),3e3);return await fetch("https://www.google.com/favicon.ico",{method:"HEAD",signal:t.signal,cache:"no-cache",mode:"no-cors"}),clearTimeout(n),!0}catch{return!1}}}static loadState(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);this.state={...this.state,...t}}}catch(e){console.error("License Scheduler: Failed to load state:",e)}}static saveState(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.state))}catch(e){console.error("License Scheduler: Failed to save state:",e)}}static getStatus(){const e=new Date,t=this.isMonthlyCheckDue(e),n=this.state.missedChecks>=this.MAX_MISSED_CHECKS;return{lastMonthlyCheck:this.state.lastMonthlyCheck,nextScheduledCheck:this.state.nextScheduledCheck,missedChecks:this.state.missedChecks,isDue:t,maxMissedChecksReached:n}}static reset(){this.state={lastMonthlyCheck:null,nextScheduledCheck:null,missedChecks:0},this.saveState(),console.log("License Scheduler: State reset")}static cleanup(){this.checkTimeoutId&&(clearTimeout(this.checkTimeoutId),this.checkTimeoutId=null),console.log("License Scheduler: Cleaned up")}}cn(fs,"STORAGE_KEY","pos-license-scheduler"),cn(fs,"MONTHLY_INTERVAL",30*24*60*60*1e3),cn(fs,"MAX_MISSED_CHECKS",3),cn(fs,"checkTimeoutId",null),cn(fs,"state",{lastMonthlyCheck:null,nextScheduledCheck:null,missedChecks:0});const Us=({children:r,allowedRoles:e,fallbackPath:t="/sales"})=>{var a;const{auth:n}=qn();return!((a=n.user)!=null&&a.role)||!e.includes(n.user.role)?o.jsx(Xl,{to:t,replace:!0}):o.jsx(o.Fragment,{children:r})},Zu=()=>{var e;const{auth:r}=qn();return((e=r.user)==null?void 0:e.role)==="cashier"?o.jsx(Xl,{to:"/sales",replace:!0}):o.jsx(Xl,{to:"/dashboard",replace:!0})},x0=()=>{const[r,e]=Sr.useState(!0),[t,n]=Sr.useState(null),[a,i]=Sr.useState(null),[c,u]=Sr.useState(!1),[h,y]=Sr.useState(!1),[x,b]=Sr.useState(!0),[w,m]=Sr.useState(null),{auth:P,initializeFromDatabase:L}=qn();Sr.useEffect(()=>{const K=qn.persist.onFinishHydration(()=>{u(!0)});return qn.persist.hasHydrated()&&u(!0),K},[]);const E=async(K=!0)=>{try{K&&b(!0);const X=await Rn.isLicensed();if(y(X),X){if(console.log("License validated successfully"),Rn.isExpiringSoon()){const M=Rn.getDaysUntilExpiry();console.warn(`License expires in ${M} days`)}}else console.log("No valid license found"),w&&(clearInterval(w),m(null));return X}catch(X){return console.error("License check failed:",X),y(!1),!1}finally{K&&b(!1)}};Sr.useEffect(()=>{c&&E()},[c]),Sr.useEffect(()=>{if(h&&!w){const K=setInterval(()=>{E(!1).then(X=>{X||console.warn("License check failed during periodic validation")})},Pn.CHECK_INTERVAL);m(K)}return()=>{w&&clearInterval(w)}},[h]);const k=()=>{y(!0),w&&clearInterval(w),E(!1)},A=async()=>{try{e(!0),n(null),i(null),console.log("Starting application initialization..."),await v0(),await L(),await b0(),console.log("Application initialized successfully")}catch(K){console.error("Initialization failed:",K);const X=K instanceof Error?K.message:"Unknown error occurred";n(`Failed to initialize application: ${X}`),K instanceof Error&&i(K.stack||"No stack trace available")}finally{e(!1)}};Sr.useEffect(()=>{A()},[L]);const F=async()=>{if(window.confirm("This will reset the database and may fix the error, but all data will be lost. Continue?"))try{e(!0),n(null),i(null),await jo.clearDatabase(),await new Promise(K=>setTimeout(K,1e3)),await A(),t||window.confirm("Database reset successfully! Refresh the page for a clean start?")&&window.location.reload()}catch(K){console.error("Failed to reset database:",K),n("Failed to reset database. Please try refreshing the page manually."),i("If the problem persists, try using a different browser or clearing your browser storage.")}},q=async()=>{try{e(!0),n(null),jo.resetMigrationFlag(),await A()}catch(K){console.error("Failed to reset migration:",K),n("Failed to reset migration. Please try the database reset option.")}};if(Sr.useEffect(()=>{if(c)return fs.initialize(),()=>{fs.cleanup()}},[c]),r||!c||x){const K=c?x?"Validating license...":"Setting up database and loading data...":"Loading session...";return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(vs,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Initializing POS System"}),o.jsx("p",{className:"text-gray-500",children:K})]})})}return t?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"text-center max-w-lg",children:[o.jsx(vo,{className:"h-16 w-16 text-red-600 mx-auto mb-6"}),o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Initialization Failed"}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Error:"}),o.jsx("p",{className:"text-red-700 text-sm mb-3",children:t}),a&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Details:"}),o.jsx("p",{className:"text-red-700 text-sm",children:a})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>A(),className:"btn btn-primary w-full",children:[o.jsx(vs,{className:"h-4 w-4 mr-2"}),"Retry Initialization"]}),t.includes("Key already exists")||t.includes("ConstraintError")?o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:q,className:"btn btn-outline w-full",children:"Reset Migration"}),o.jsxs("button",{onClick:F,className:"btn btn-warning w-full",children:[o.jsx(ou,{className:"h-4 w-4 mr-2"}),"Reset Database"]})]}):o.jsxs("button",{onClick:F,className:"btn btn-danger w-full",children:[o.jsx(ou,{className:"h-4 w-4 mr-2"}),"Reset Database"]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:[o.jsx("p",{children:"If the problem persists:"}),o.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[o.jsx("li",{children:"Try using a different browser"}),o.jsx("li",{children:"Clear your browser's storage/cache"}),o.jsx("li",{children:"Check if you have enough disk space"}),o.jsx("li",{children:"Disable browser extensions temporarily"})]})]})]})]})}):h?o.jsx(Kh,{children:P.isAuthenticated?o.jsx(Dp,{children:o.jsxs(Vh,{children:[o.jsx(Ma,{path:"/",element:o.jsx(Zu,{})}),o.jsx(Ma,{path:"/dashboard",element:o.jsx(Us,{allowedRoles:["admin","manager"],children:o.jsx(am,{})})}),o.jsx(Ma,{path:"/sales",element:o.jsx(Us,{allowedRoles:["admin","manager","cashier"],children:o.jsx(sm,{})})}),o.jsx(Ma,{path:"/inventory",element:o.jsx(Us,{allowedRoles:["admin","manager"],children:o.jsx(lm,{})})}),o.jsx(Ma,{path:"/reports",element:o.jsx(Us,{allowedRoles:["admin","manager","cashier"],children:o.jsx(p0,{})})}),o.jsx(Ma,{path:"/users",element:o.jsx(Us,{allowedRoles:["admin"],children:o.jsx(m0,{})})}),o.jsx(Ma,{path:"/settings",element:o.jsx(Us,{allowedRoles:["admin","manager"],children:o.jsx(g0,{})})}),o.jsx(Ma,{path:"*",element:o.jsx(Zu,{})})]})}):o.jsx(nm,{})}):o.jsx(im,{onActivated:k})};const w0=new Uf({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});nc.createRoot(document.getElementById("root")).render(o.jsx(gt.StrictMode,{children:o.jsx(Vf,{client:w0,children:o.jsx(x0,{})})}));
