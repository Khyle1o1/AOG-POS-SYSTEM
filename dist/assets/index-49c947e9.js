var Hh=Object.defineProperty;var Wh=(n,e,t)=>e in n?Hh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cn=(n,e,t)=>(Wh(n,typeof e!="symbol"?e+"":e,t),t);import{r as Sr,a as Kh,b as Vh,c as ft,g as Sc,d as co,e as $h}from"./vendor-36f7ab30.js";import{_ as vr,a as pl}from"./charts-add538b4.js";import{u as Gh,L as fs,H as Yh,R as Qh,a as qa,N as tc}from"./router-c7111a09.js";import{S as Jh,A as bo,W as ad,a as Ks,X as wa,U as jc,L as Xh,M as Zh,b as ef,c as Ga,P as As,B as tf,d as rc,e as sd,f as rf,E as nc,g as ic,C as rl,h as nl,i as nf,K as od,j as af,k as sf,l as ld,R as Vs,m as cd,n as ql,T as ud,o as Ac,p as dd,q as hd,r as _c,s as il,t as of,u as _o,v as lf,w as Xo,x as ac,y as uo,z as xs,D as fd,F as cf,G as al,H as uf,I as df,J as hf,N as sl,O as ff,Q as pf,V as cu,Y as mf,Z as Vo,_ as gf,$ as yf,a0 as uu,a1 as du}from"./ui-813fe871.js";import{f as _r,a as br,s as hu,e as fu,b as vf,c as bf,d as xf,g as wf}from"./utils-570e0bc6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var pd={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Sr,Sf=Symbol.for("react.element"),jf=Symbol.for("react.fragment"),Af=Object.prototype.hasOwnProperty,_f=Nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pf={key:!0,ref:!0,__self:!0,__source:!0};function md(n,e,t){var r,a={},i=null,c=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)Af.call(e,r)&&!Pf.hasOwnProperty(r)&&(a[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Sf,type:n,key:i,ref:c,props:a,_owner:_f.current}}ml.Fragment=jf;ml.jsx=md;ml.jsxs=md;pd.exports=ml;var s=pd.exports,sc={},pu=Kh;sc.createRoot=pu.createRoot,sc.hydrateRoot=pu.hydrateRoot;var gl=function(){function n(){this.listeners=[]}var e=n.prototype;return e.subscribe=function(r){var a=this,i=r||function(){};return this.listeners.push(i),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(c){return c!==i}),a.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},n}(),gd=typeof window>"u";function Cn(){}function Lf(n,e){return typeof n=="function"?n(e):n}function Cf(n){return typeof n=="number"&&n>=0&&n!==1/0}function ol(n){return Array.isArray(n)?n:[n]}function kf(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Bl(n,e,t){return yl(n)?typeof e=="function"?vr({},t,{queryKey:n,queryFn:e}):vr({},e,{queryKey:n}):n}function za(n,e,t){return yl(n)?[vr({},e,{queryKey:n}),t]:[n||{},e]}function Ff(n,e){if(n===!0&&e===!0||n==null&&e==null)return"all";if(n===!1&&e===!1)return"none";var t=n??!e;return t?"active":"inactive"}function mu(n,e){var t=n.active,r=n.exact,a=n.fetching,i=n.inactive,c=n.predicate,u=n.queryKey,d=n.stale;if(yl(u)){if(r){if(e.queryHash!==Pc(u,e.options))return!1}else if(!ll(e.queryKey,u))return!1}var y=Ff(t,i);if(y==="none")return!1;if(y!=="all"){var x=e.isActive();if(y==="active"&&!x||y==="inactive"&&x)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||typeof a=="boolean"&&e.isFetching()!==a||c&&!c(e))}function gu(n,e){var t=n.exact,r=n.fetching,a=n.predicate,i=n.mutationKey;if(yl(i)){if(!e.options.mutationKey)return!1;if(t){if(gs(e.options.mutationKey)!==gs(i))return!1}else if(!ll(e.options.mutationKey,i))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||a&&!a(e))}function Pc(n,e){var t=(e==null?void 0:e.queryKeyHashFn)||gs;return t(n)}function gs(n){var e=ol(n);return Ef(e)}function Ef(n){return JSON.stringify(n,function(e,t){return oc(t)?Object.keys(t).sort().reduce(function(r,a){return r[a]=t[a],r},{}):t})}function ll(n,e){return yd(ol(n),ol(e))}function yd(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!yd(n[t],e[t])}):!1}function vd(n,e){if(n===e)return n;var t=Array.isArray(n)&&Array.isArray(e);if(t||oc(n)&&oc(e)){for(var r=t?n.length:Object.keys(n).length,a=t?e:Object.keys(e),i=a.length,c=t?[]:{},u=0,d=0;d<i;d++){var y=t?d:a[d];c[y]=vd(n[y],e[y]),c[y]===n[y]&&u++}return r===i&&u===r?n:c}return e}function oc(n){if(!yu(n))return!1;var e=n.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!yu(t)||!t.hasOwnProperty("isPrototypeOf"))}function yu(n){return Object.prototype.toString.call(n)==="[object Object]"}function yl(n){return typeof n=="string"||Array.isArray(n)}function Df(n){return new Promise(function(e){setTimeout(e,n)})}function vu(n){Promise.resolve().then(n).catch(function(e){return setTimeout(function(){throw e})})}function bd(){if(typeof AbortController=="function")return new AbortController}var If=function(n){pl(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(a){var i;if(!gd&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("visibilitychange",c,!1),window.addEventListener("focus",c,!1),function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("focus",c)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setFocused(u):c.onFocus()})},t.setFocused=function(a){this.focused=a,a&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(a){a()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(gl),Zo=new If,Of=function(n){pl(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(a){var i;if(!gd&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("online",c,!1),window.addEventListener("offline",c,!1),function(){window.removeEventListener("online",c),window.removeEventListener("offline",c)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setOnline(u):c.onOnline()})},t.setOnline=function(a){this.online=a,a&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(a){a()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(gl),el=new Of;function Tf(n){return Math.min(1e3*Math.pow(2,n),3e4)}function cl(n){return typeof(n==null?void 0:n.cancel)=="function"}var xd=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function Ul(n){return n instanceof xd}var wd=function(e){var t=this,r=!1,a,i,c,u;this.abort=e.abort,this.cancel=function(w){return a==null?void 0:a(w)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return i==null?void 0:i()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(w,m){c=w,u=m});var d=function(m){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(m),i==null||i(),c(m))},y=function(m){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(m),i==null||i(),u(m))},x=function(){return new Promise(function(m){i=m,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){i=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},b=function w(){if(!t.isResolved){var m;try{m=e.fn()}catch(P){m=Promise.reject(P)}a=function(_){if(!t.isResolved&&(y(new xd(_)),t.abort==null||t.abort(),cl(m)))try{m.cancel()}catch{}},t.isTransportCancelable=cl(m),Promise.resolve(m).then(d).catch(function(P){var _,E;if(!t.isResolved){var L=(_=e.retry)!=null?_:3,j=(E=e.retryDelay)!=null?E:Tf,k=typeof j=="function"?j(t.failureCount,P):j,B=L===!0||typeof L=="number"&&t.failureCount<L||typeof L=="function"&&L(t.failureCount,P);if(r||!B){y(P);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,P),Df(k).then(function(){if(!Zo.isFocused()||!el.isOnline())return x()}).then(function(){r?y(P):w()})}})}};b()},Mf=function(){function n(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=n.prototype;return e.batch=function(r){var a;this.transactions++;try{a=r()}finally{this.transactions--,this.transactions||this.flush()}return a},e.schedule=function(r){var a=this;this.transactions?this.queue.push(r):vu(function(){a.notifyFn(r)})},e.batchCalls=function(r){var a=this;return function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];a.schedule(function(){r.apply(void 0,c)})}},e.flush=function(){var r=this,a=this.queue;this.queue=[],a.length&&vu(function(){r.batchNotifyFn(function(){a.forEach(function(i){r.notifyFn(i)})})})},e.setNotifyFunction=function(r){this.notifyFn=r},e.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},n}(),mn=new Mf,Nd=console;function Sd(){return Nd}function Rf(n){Nd=n}var qf=function(){function n(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=n.prototype;return e.setOptions=function(r){var a;this.options=vr({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},e.setDefaultOptions=function(r){this.defaultOptions=r},e.scheduleGc=function(){var r=this;this.clearGcTimeout(),Cf(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(r,a){var i,c,u=this.state.data,d=Lf(r,u);return(i=(c=this.options).isDataEqual)!=null&&i.call(c,u,d)?d=u:this.options.structuralSharing!==!1&&(d=vd(u,d)),this.dispatch({data:d,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt}),d},e.setState=function(r,a){this.dispatch({type:"setState",state:r,setStateOptions:a})},e.cancel=function(r){var a,i=this.promise;return(a=this.retryer)==null||a.cancel(r),i?i.then(Cn).catch(Cn):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},e.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!kf(this.state.dataUpdatedAt,r)},e.onFocus=function(){var r,a=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});a&&a.refetch(),(r=this.retryer)==null||r.continue()},e.onOnline=function(){var r,a=this.observers.find(function(i){return i.shouldFetchOnReconnect()});a&&a.refetch(),(r=this.retryer)==null||r.continue()},e.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},e.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(a){return a!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(r,a){var i=this,c,u,d;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var y;return(y=this.retryer)==null||y.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var x=this.observers.find(function(j){return j.options.queryFn});x&&this.setOptions(x.options)}var b=ol(this.queryKey),w=bd(),m={queryKey:b,pageParam:void 0,meta:this.meta};Object.defineProperty(m,"signal",{enumerable:!0,get:function(){if(w)return i.abortSignalConsumed=!0,w.signal}});var P=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(m)):Promise.reject("Missing queryFn")},_={fetchOptions:a,options:this.options,queryKey:b,state:this.state,fetchFn:P,meta:this.meta};if((c=this.options.behavior)!=null&&c.onFetch){var E;(E=this.options.behavior)==null||E.onFetch(_)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((u=_.fetchOptions)==null?void 0:u.meta)){var L;this.dispatch({type:"fetch",meta:(L=_.fetchOptions)==null?void 0:L.meta})}return this.retryer=new wd({fn:_.fetchFn,abort:w==null||(d=w.abort)==null?void 0:d.bind(w),onSuccess:function(k){i.setData(k),i.cache.config.onSuccess==null||i.cache.config.onSuccess(k,i),i.cacheTime===0&&i.optionalRemove()},onError:function(k){Ul(k)&&k.silent||i.dispatch({type:"error",error:k}),Ul(k)||(i.cache.config.onError==null||i.cache.config.onError(k,i),Sd().error(k)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(r){var a=this;this.state=this.reducer(this.state,r),mn.batch(function(){a.observers.forEach(function(i){i.onQueryUpdate(r)}),a.cache.notify({query:a,type:"queryUpdated",action:r})})},e.getDefaultState=function(r){var a=typeof r.initialData=="function"?r.initialData():r.initialData,i=typeof r.initialData<"u",c=i?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,u=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:u?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:u?"success":"idle"}},e.reducer=function(r,a){var i,c;switch(a.type){case"failed":return vr({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return vr({},r,{isPaused:!0});case"continue":return vr({},r,{isPaused:!1});case"fetch":return vr({},r,{fetchFailureCount:0,fetchMeta:(i=a.meta)!=null?i:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return vr({},r,{data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(c=a.dataUpdatedAt)!=null?c:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var u=a.error;return Ul(u)&&u.revert&&this.revertState?vr({},this.revertState):vr({},r,{error:u,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return vr({},r,{isInvalidated:!0});case"setState":return vr({},r,a.state);default:return r}},n}(),Bf=function(n){pl(e,n);function e(r){var a;return a=n.call(this)||this,a.config=r||{},a.queries=[],a.queriesMap={},a}var t=e.prototype;return t.build=function(a,i,c){var u,d=i.queryKey,y=(u=i.queryHash)!=null?u:Pc(d,i),x=this.get(y);return x||(x=new qf({cache:this,queryKey:d,queryHash:y,options:a.defaultQueryOptions(i),state:c,defaultOptions:a.getQueryDefaults(d),meta:i.meta}),this.add(x)),x},t.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},t.remove=function(a){var i=this.queriesMap[a.queryHash];i&&(a.destroy(),this.queries=this.queries.filter(function(c){return c!==a}),i===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},t.clear=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){a.remove(i)})})},t.get=function(a){return this.queriesMap[a]},t.getAll=function(){return this.queries},t.find=function(a,i){var c=za(a,i),u=c[0];return typeof u.exact>"u"&&(u.exact=!0),this.queries.find(function(d){return mu(u,d)})},t.findAll=function(a,i){var c=za(a,i),u=c[0];return Object.keys(u).length>0?this.queries.filter(function(d){return mu(u,d)}):this.queries},t.notify=function(a){var i=this;mn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){i.onFocus()})})},t.onOnline=function(){var a=this;mn.batch(function(){a.queries.forEach(function(i){i.onOnline()})})},e}(gl),Uf=function(){function n(t){this.options=vr({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||zf(),this.meta=t.meta}var e=n.prototype;return e.setState=function(r){this.dispatch({type:"setState",state:r})},e.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},e.removeObserver=function(r){this.observers=this.observers.filter(function(a){return a!==r})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Cn).catch(Cn)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var r=this,a,i=this.state.status==="loading",c=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),c=c.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(u){u!==r.state.context&&r.dispatch({type:"loading",context:u,variables:r.state.variables})})),c.then(function(){return r.executeMutation()}).then(function(u){a=u,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(a,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(a,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:a}),a}).catch(function(u){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(u,r.state.variables,r.state.context,r),Sd().error(u),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(u,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,u,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:u}),u})})},e.executeMutation=function(){var r=this,a;return this.retryer=new wd({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(r){var a=this;this.state=Hf(this.state,r),mn.batch(function(){a.observers.forEach(function(i){i.onMutationUpdate(r)}),a.mutationCache.notify(a)})},n}();function zf(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Hf(n,e){switch(e.type){case"failed":return vr({},n,{failureCount:n.failureCount+1});case"pause":return vr({},n,{isPaused:!0});case"continue":return vr({},n,{isPaused:!1});case"loading":return vr({},n,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return vr({},n,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return vr({},n,{data:void 0,error:e.error,failureCount:n.failureCount+1,isPaused:!1,status:"error"});case"setState":return vr({},n,e.state);default:return n}}var Wf=function(n){pl(e,n);function e(r){var a;return a=n.call(this)||this,a.config=r||{},a.mutations=[],a.mutationId=0,a}var t=e.prototype;return t.build=function(a,i,c){var u=new Uf({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(i),state:c,defaultOptions:i.mutationKey?a.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(u),u},t.add=function(a){this.mutations.push(a),this.notify(a)},t.remove=function(a){this.mutations=this.mutations.filter(function(i){return i!==a}),a.cancel(),this.notify(a)},t.clear=function(){var a=this;mn.batch(function(){a.mutations.forEach(function(i){a.remove(i)})})},t.getAll=function(){return this.mutations},t.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(i){return gu(a,i)})},t.findAll=function(a){return this.mutations.filter(function(i){return gu(a,i)})},t.notify=function(a){var i=this;mn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var a=this.mutations.filter(function(i){return i.state.isPaused});return mn.batch(function(){return a.reduce(function(i,c){return i.then(function(){return c.continue().catch(Cn)})},Promise.resolve())})},e}(gl);function Kf(){return{onFetch:function(e){e.fetchFn=function(){var t,r,a,i,c,u,d=(t=e.fetchOptions)==null||(r=t.meta)==null?void 0:r.refetchPage,y=(a=e.fetchOptions)==null||(i=a.meta)==null?void 0:i.fetchMore,x=y==null?void 0:y.pageParam,b=(y==null?void 0:y.direction)==="forward",w=(y==null?void 0:y.direction)==="backward",m=((c=e.state.data)==null?void 0:c.pages)||[],P=((u=e.state.data)==null?void 0:u.pageParams)||[],_=bd(),E=_==null?void 0:_.signal,L=P,j=!1,k=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},B=function(V,he,Y,Q){return L=Q?[he].concat(L):[].concat(L,[he]),Q?[Y].concat(V):[].concat(V,[Y])},K=function(V,he,Y,Q){if(j)return Promise.reject("Cancelled");if(typeof Y>"u"&&!he&&V.length)return Promise.resolve(V);var ne={queryKey:e.queryKey,signal:E,pageParam:Y,meta:e.meta},ie=k(ne),ge=Promise.resolve(ie).then(function(I){return B(V,Y,I,Q)});if(cl(ie)){var Oe=ge;Oe.cancel=ie.cancel}return ge},Z;if(!m.length)Z=K([]);else if(b){var R=typeof x<"u",O=R?x:bu(e.options,m);Z=K(m,R,O)}else if(w){var X=typeof x<"u",oe=X?x:Vf(e.options,m);Z=K(m,X,oe,!0)}else(function(){L=[];var q=typeof e.options.getNextPageParam>"u",V=d&&m[0]?d(m[0],0,m):!0;Z=V?K([],q,P[0]):Promise.resolve(B([],P[0],m[0]));for(var he=function(ne){Z=Z.then(function(ie){var ge=d&&m[ne]?d(m[ne],ne,m):!0;if(ge){var Oe=q?P[ne]:bu(e.options,ie);return K(ie,q,Oe)}return Promise.resolve(B(ie,P[ne],m[ne]))})},Y=1;Y<m.length;Y++)he(Y)})();var C=Z.then(function(q){return{pages:q,pageParams:L}}),N=C;return N.cancel=function(){j=!0,_==null||_.abort(),cl(Z)&&Z.cancel()},C}}}}function bu(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function Vf(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}var $f=function(){function n(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new Bf,this.mutationCache=t.mutationCache||new Wf,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=n.prototype;return e.mount=function(){var r=this;this.unsubscribeFocus=Zo.subscribe(function(){Zo.isFocused()&&el.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=el.subscribe(function(){Zo.isFocused()&&el.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},e.unmount=function(){var r,a;(r=this.unsubscribeFocus)==null||r.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},e.isFetching=function(r,a){var i=za(r,a),c=i[0];return c.fetching=!0,this.queryCache.findAll(c).length},e.isMutating=function(r){return this.mutationCache.findAll(vr({},r,{fetching:!0})).length},e.getQueryData=function(r,a){var i;return(i=this.queryCache.find(r,a))==null?void 0:i.state.data},e.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(a){var i=a.queryKey,c=a.state,u=c.data;return[i,u]})},e.setQueryData=function(r,a,i){var c=Bl(r),u=this.defaultQueryOptions(c);return this.queryCache.build(this,u).setData(a,i)},e.setQueriesData=function(r,a,i){var c=this;return mn.batch(function(){return c.getQueryCache().findAll(r).map(function(u){var d=u.queryKey;return[d,c.setQueryData(d,a,i)]})})},e.getQueryState=function(r,a){var i;return(i=this.queryCache.find(r,a))==null?void 0:i.state},e.removeQueries=function(r,a){var i=za(r,a),c=i[0],u=this.queryCache;mn.batch(function(){u.findAll(c).forEach(function(d){u.remove(d)})})},e.resetQueries=function(r,a,i){var c=this,u=za(r,a,i),d=u[0],y=u[1],x=this.queryCache,b=vr({},d,{active:!0});return mn.batch(function(){return x.findAll(d).forEach(function(w){w.reset()}),c.refetchQueries(b,y)})},e.cancelQueries=function(r,a,i){var c=this,u=za(r,a,i),d=u[0],y=u[1],x=y===void 0?{}:y;typeof x.revert>"u"&&(x.revert=!0);var b=mn.batch(function(){return c.queryCache.findAll(d).map(function(w){return w.cancel(x)})});return Promise.all(b).then(Cn).catch(Cn)},e.invalidateQueries=function(r,a,i){var c,u,d,y=this,x=za(r,a,i),b=x[0],w=x[1],m=vr({},b,{active:(c=(u=b.refetchActive)!=null?u:b.active)!=null?c:!0,inactive:(d=b.refetchInactive)!=null?d:!1});return mn.batch(function(){return y.queryCache.findAll(b).forEach(function(P){P.invalidate()}),y.refetchQueries(m,w)})},e.refetchQueries=function(r,a,i){var c=this,u=za(r,a,i),d=u[0],y=u[1],x=mn.batch(function(){return c.queryCache.findAll(d).map(function(w){return w.fetch(void 0,vr({},y,{meta:{refetchPage:d==null?void 0:d.refetchPage}}))})}),b=Promise.all(x).then(Cn);return y!=null&&y.throwOnError||(b=b.catch(Cn)),b},e.fetchQuery=function(r,a,i){var c=Bl(r,a,i),u=this.defaultQueryOptions(c);typeof u.retry>"u"&&(u.retry=!1);var d=this.queryCache.build(this,u);return d.isStaleByTime(u.staleTime)?d.fetch(u):Promise.resolve(d.state.data)},e.prefetchQuery=function(r,a,i){return this.fetchQuery(r,a,i).then(Cn).catch(Cn)},e.fetchInfiniteQuery=function(r,a,i){var c=Bl(r,a,i);return c.behavior=Kf(),this.fetchQuery(c)},e.prefetchInfiniteQuery=function(r,a,i){return this.fetchInfiniteQuery(r,a,i).then(Cn).catch(Cn)},e.cancelMutations=function(){var r=this,a=mn.batch(function(){return r.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(a).then(Cn).catch(Cn)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(r){this.defaultOptions=r},e.setQueryDefaults=function(r,a){var i=this.queryDefaults.find(function(c){return gs(r)===gs(c.queryKey)});i?i.defaultOptions=a:this.queryDefaults.push({queryKey:r,defaultOptions:a})},e.getQueryDefaults=function(r){var a;return r?(a=this.queryDefaults.find(function(i){return ll(r,i.queryKey)}))==null?void 0:a.defaultOptions:void 0},e.setMutationDefaults=function(r,a){var i=this.mutationDefaults.find(function(c){return gs(r)===gs(c.mutationKey)});i?i.defaultOptions=a:this.mutationDefaults.push({mutationKey:r,defaultOptions:a})},e.getMutationDefaults=function(r){var a;return r?(a=this.mutationDefaults.find(function(i){return ll(r,i.mutationKey)}))==null?void 0:a.defaultOptions:void 0},e.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var a=vr({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Pc(a.queryKey,a)),a},e.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},e.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:vr({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},n}(),Gf=Vh.unstable_batchedUpdates;mn.setBatchNotifyFunction(Gf);var Yf=console;Rf(Yf);var xu=ft.createContext(void 0),Qf=ft.createContext(!1);function Jf(n){return n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=xu),window.ReactQueryClientContext):xu}var Xf=function(e){var t=e.client,r=e.contextSharing,a=r===void 0?!1:r,i=e.children;ft.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var c=Jf(a);return ft.createElement(Qf.Provider,{value:a},ft.createElement(c.Provider,{value:t},i))};const Zf="modulepreload",ep=function(n,e){return new URL(n,e).href},wu={},Ai=function(e,t,r){if(!t||t.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=ep(i,r),i in wu)return;wu[i]=!0;const c=i.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!r)for(let x=a.length-1;x>=0;x--){const b=a[x];if(b.href===i&&(!c||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const y=document.createElement("link");if(y.rel=c?"stylesheet":Zf,c||(y.as="script",y.crossOrigin=""),y.href=i,document.head.appendChild(y),c)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i})},Nu=n=>{let e;const t=new Set,r=(x,b)=>{const w=typeof x=="function"?x(e):x;if(!Object.is(w,e)){const m=e;e=b??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(P=>P(e,m))}},a=()=>e,d={setState:r,getState:a,getInitialState:()=>y,subscribe:x=>(t.add(x),()=>t.delete(x)),destroy:()=>{t.clear()}},y=e=n(r,a,d);return d},tp=n=>n?Nu(n):Nu;var jd={exports:{}},Ad={},_d={exports:{}},Pd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Sr;function rp(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var np=typeof Object.is=="function"?Object.is:rp,ip=Ys.useState,ap=Ys.useEffect,sp=Ys.useLayoutEffect,op=Ys.useDebugValue;function lp(n,e){var t=e(),r=ip({inst:{value:t,getSnapshot:e}}),a=r[0].inst,i=r[1];return sp(function(){a.value=t,a.getSnapshot=e,zl(a)&&i({inst:a})},[n,t,e]),ap(function(){return zl(a)&&i({inst:a}),n(function(){zl(a)&&i({inst:a})})},[n]),op(t),t}function zl(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!np(n,t)}catch{return!0}}function cp(n,e){return e()}var up=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cp:lp;Pd.useSyncExternalStore=Ys.useSyncExternalStore!==void 0?Ys.useSyncExternalStore:up;_d.exports=Pd;var dp=_d.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=Sr,hp=dp;function fp(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pp=typeof Object.is=="function"?Object.is:fp,mp=hp.useSyncExternalStore,gp=vl.useRef,yp=vl.useEffect,vp=vl.useMemo,bp=vl.useDebugValue;Ad.useSyncExternalStoreWithSelector=function(n,e,t,r,a){var i=gp(null);if(i.current===null){var c={hasValue:!1,value:null};i.current=c}else c=i.current;i=vp(function(){function d(m){if(!y){if(y=!0,x=m,m=r(m),a!==void 0&&c.hasValue){var P=c.value;if(a(P,m))return b=P}return b=m}if(P=b,pp(x,m))return P;var _=r(m);return a!==void 0&&a(P,_)?(x=m,P):(x=m,b=_)}var y=!1,x,b,w=t===void 0?null:t;return[function(){return d(e())},w===null?void 0:function(){return d(w())}]},[e,t,r,a]);var u=mp(n,i[0],i[1]);return yp(function(){c.hasValue=!0,c.value=u},[u]),bp(u),u};jd.exports=Ad;var xp=jd.exports;const wp=Sc(xp),{useDebugValue:Np}=ft,{useSyncExternalStoreWithSelector:Sp}=wp;const jp=n=>n;function Ap(n,e=jp,t){const r=Sp(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Np(r),r}const Su=n=>{const e=typeof n=="function"?tp(n):n,t=(r,a)=>Ap(e,r,a);return Object.assign(t,e),t},_p=n=>n?Su(n):Su;function Pp(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var i;const c=d=>d===null?null:JSON.parse(d,e==null?void 0:e.reviver),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(c):c(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,e==null?void 0:e.replacer)),removeItem:a=>t.removeItem(a)}}const xo=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return xo(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return xo(r)(t)}}}},Lp=(n,e)=>(t,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,L)=>({...L,...E}),...e},c=!1;const u=new Set,d=new Set;let y;try{y=i.getStorage()}catch{}if(!y)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...E)},r,a);const x=xo(i.serialize),b=()=>{const E=i.partialize({...r()});let L;const j=x({state:E,version:i.version}).then(k=>y.setItem(i.name,k)).catch(k=>{L=k});if(L)throw L;return j},w=a.setState;a.setState=(E,L)=>{w(E,L),b()};const m=n((...E)=>{t(...E),b()},r,a);let P;const _=()=>{var E;if(!y)return;c=!1,u.forEach(j=>j(r()));const L=((E=i.onRehydrateStorage)==null?void 0:E.call(i,r()))||void 0;return xo(y.getItem.bind(y))(i.name).then(j=>{if(j)return i.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==i.version){if(i.migrate)return i.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var k;return P=i.merge(j,(k=r())!=null?k:m),t(P,!0),b()}).then(()=>{L==null||L(P,void 0),c=!0,d.forEach(j=>j(P))}).catch(j=>{L==null||L(void 0,j)})};return a.persist={setOptions:E=>{i={...i,...E},E.getStorage&&(y=E.getStorage())},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>c,onHydrate:E=>(u.add(E),()=>{u.delete(E)}),onFinishHydration:E=>(d.add(E),()=>{d.delete(E)})},_(),P||m},Cp=(n,e)=>(t,r,a)=>{let i={storage:Pp(()=>localStorage),partialize:_=>_,version:0,merge:(_,E)=>({...E,..._}),...e},c=!1;const u=new Set,d=new Set;let y=i.storage;if(!y)return n((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(..._)},r,a);const x=()=>{const _=i.partialize({...r()});return y.setItem(i.name,{state:_,version:i.version})},b=a.setState;a.setState=(_,E)=>{b(_,E),x()};const w=n((..._)=>{t(..._),x()},r,a);a.getInitialState=()=>w;let m;const P=()=>{var _,E;if(!y)return;c=!1,u.forEach(j=>{var k;return j((k=r())!=null?k:w)});const L=((E=i.onRehydrateStorage)==null?void 0:E.call(i,(_=r())!=null?_:w))||void 0;return xo(y.getItem.bind(y))(i.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==i.version){if(i.migrate)return[!0,i.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var k;const[B,K]=j;if(m=i.merge(K,(k=r())!=null?k:w),t(m,!0),B)return x()}).then(()=>{L==null||L(m,void 0),m=r(),c=!0,d.forEach(j=>j(m))}).catch(j=>{L==null||L(void 0,j)})};return a.persist={setOptions:_=>{i={...i,..._},_.storage&&(y=_.storage)},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>P(),hasHydrated:()=>c,onHydrate:_=>(u.add(_),()=>{u.delete(_)}),onFinishHydration:_=>(d.add(_),()=>{d.delete(_)})},i.skipHydration||P(),m||w},kp=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?Lp(n,e):Cp(n,e),Fp=kp;var Ld={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(co,function(){var t=function(l,f){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,A){v.__proto__=A}||function(v,A){for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(v[F]=A[F])})(l,f)},r=function(){return(r=Object.assign||function(l){for(var f,v=1,A=arguments.length;v<A;v++)for(var F in f=arguments[v])Object.prototype.hasOwnProperty.call(f,F)&&(l[F]=f[F]);return l}).apply(this,arguments)};function a(l,f,v){if(v||arguments.length===2)for(var A,F=0,z=f.length;F<z;F++)!A&&F in f||((A=A||Array.prototype.slice.call(f,0,F))[F]=f[F]);return l.concat(A||Array.prototype.slice.call(f))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:co,c=Object.keys,u=Array.isArray;function d(l,f){return typeof f!="object"||c(f).forEach(function(v){l[v]=f[v]}),l}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var y=Object.getPrototypeOf,x={}.hasOwnProperty;function b(l,f){return x.call(l,f)}function w(l,f){typeof f=="function"&&(f=f(y(l))),(typeof Reflect>"u"?c:Reflect.ownKeys)(f).forEach(function(v){P(l,v,f[v])})}var m=Object.defineProperty;function P(l,f,v,A){m(l,f,d(v&&b(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},A))}function _(l){return{from:function(f){return l.prototype=Object.create(f.prototype),P(l.prototype,"constructor",l),{extend:w.bind(null,l.prototype)}}}}var E=Object.getOwnPropertyDescriptor,L=[].slice;function j(l,f,v){return L.call(l,f,v)}function k(l,f){return f(l)}function B(l){if(!l)throw new Error("Assertion Failed")}function K(l){i.setImmediate?setImmediate(l):setTimeout(l,0)}function Z(l,f){if(typeof f=="string"&&b(l,f))return l[f];if(!f)return l;if(typeof f!="string"){for(var v=[],A=0,F=f.length;A<F;++A){var z=Z(l,f[A]);v.push(z)}return v}var ee=f.indexOf(".");if(ee!==-1){var ce=l[f.substr(0,ee)];return ce==null?void 0:Z(ce,f.substr(ee+1))}}function R(l,f,v){if(l&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof f!="string"&&"length"in f){B(typeof v!="string"&&"length"in v);for(var A=0,F=f.length;A<F;++A)R(l,f[A],v[A])}else{var z,ee,ce=f.indexOf(".");ce!==-1?(z=f.substr(0,ce),(ee=f.substr(ce+1))===""?v===void 0?u(l)&&!isNaN(parseInt(z))?l.splice(z,1):delete l[z]:l[z]=v:R(ce=!(ce=l[z])||!b(l,z)?l[z]={}:ce,ee,v)):v===void 0?u(l)&&!isNaN(parseInt(f))?l.splice(f,1):delete l[f]:l[f]=v}}function O(l){var f,v={};for(f in l)b(l,f)&&(v[f]=l[f]);return v}var X=[].concat;function oe(l){return X.apply([],l)}var Xe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(f){return f+l+"Array"})}))).filter(function(l){return i[l]}),C=new Set(Xe.map(function(l){return i[l]})),N=null;function q(l){return N=new WeakMap,l=function f(v){if(!v||typeof v!="object")return v;var A=N.get(v);if(A)return A;if(u(v)){A=[],N.set(v,A);for(var F=0,z=v.length;F<z;++F)A.push(f(v[F]))}else if(C.has(v.constructor))A=v;else{var ee,ce=y(v);for(ee in A=ce===Object.prototype?{}:Object.create(ce),N.set(v,A),v)b(v,ee)&&(A[ee]=f(v[ee]))}return A}(l),N=null,l}var V={}.toString;function he(l){return V.call(l).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof Y=="symbol"?function(l){var f;return l!=null&&(f=l[Y])&&f.apply(l)}:function(){return null};function ne(l,f){return f=l.indexOf(f),0<=f&&l.splice(f,1),0<=f}var ie={};function ge(l){var f,v,A,F;if(arguments.length===1){if(u(l))return l.slice();if(this===ie&&typeof l=="string")return[l];if(F=Q(l)){for(v=[];!(A=F.next()).done;)v.push(A.value);return v}if(l==null)return[l];if(typeof(f=l.length)!="number")return[l];for(v=new Array(f);f--;)v[f]=l[f];return v}for(f=arguments.length,v=new Array(f);f--;)v[f]=arguments[f];return v}var Oe=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ue),I={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function D(l,f){this.name=l,this.message=f}function G(l,f){return l+". Errors: "+Object.keys(f).map(function(v){return f[v].toString()}).filter(function(v,A,F){return F.indexOf(v)===A}).join(`
`)}function te(l,f,v,A){this.failures=f,this.failedKeys=A,this.successCount=v,this.message=G(l,f)}function ae(l,f){this.name="BulkError",this.failures=Object.keys(f).map(function(v){return f[v]}),this.failuresByPos=f,this.message=G(l,this.failures)}_(D).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(te).from(D),_(ae).from(D);var ye=Xr.reduce(function(l,f){return l[f]=f+"Error",l},{}),Pe=D,fe=Xr.reduce(function(l,f){var v=f+"Error";function A(F,z){this.name=v,F?typeof F=="string"?(this.message="".concat(F).concat(z?`
 `+z:""),this.inner=z||null):typeof F=="object"&&(this.message="".concat(F.name," ").concat(F.message),this.inner=F):(this.message=I[f]||v,this.inner=null)}return _(A).from(Pe),l[f]=A,l},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Je=Ue.reduce(function(l,f){return l[f+"Error"]=fe[f],l},{}),et=Xr.reduce(function(l,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(l[f+"Error"]=fe[f]),l},{});function Ve(){}function lt(l){return l}function Ft(l,f){return l==null||l===lt?f:function(v){return f(l(v))}}function qe(l,f){return function(){l.apply(this,arguments),f.apply(this,arguments)}}function le(l,f){return l===Ve?f:function(){var v=l.apply(this,arguments);v!==void 0&&(arguments[0]=v);var A=this.onsuccess,F=this.onerror;this.onsuccess=null,this.onerror=null;var z=f.apply(this,arguments);return A&&(this.onsuccess=this.onsuccess?qe(A,this.onsuccess):A),F&&(this.onerror=this.onerror?qe(F,this.onerror):F),z!==void 0?z:v}}function Mt(l,f){return l===Ve?f:function(){l.apply(this,arguments);var v=this.onsuccess,A=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?qe(v,this.onsuccess):v),A&&(this.onerror=this.onerror?qe(A,this.onerror):A)}}function jt(l,f){return l===Ve?f:function(v){var A=l.apply(this,arguments);d(v,A);var F=this.onsuccess,z=this.onerror;return this.onsuccess=null,this.onerror=null,v=f.apply(this,arguments),F&&(this.onsuccess=this.onsuccess?qe(F,this.onsuccess):F),z&&(this.onerror=this.onerror?qe(z,this.onerror):z),A===void 0?v===void 0?void 0:v:d(A,v)}}function rt(l,f){return l===Ve?f:function(){return f.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function J(l,f){return l===Ve?f:function(){var v=l.apply(this,arguments);if(v&&typeof v.then=="function"){for(var A=this,F=arguments.length,z=new Array(F);F--;)z[F]=arguments[F];return v.then(function(){return f.apply(A,z)})}return f.apply(this,arguments)}}et.ModifyError=te,et.DexieError=D,et.BulkError=ae;var de=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function we(l){de=l}var Be={},$e=100,Xe=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,y(l),l];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,y(f),l]}(),Ue=Xe[0],Xr=Xe[1],Xe=Xe[2],Xr=Xr&&Xr.then,bt=Ue&&Ue.constructor,Pt=!!Xe,wt=function(l,f){zr.push([l,f]),ct&&(queueMicrotask(Ee),ct=!1)},qt=!0,ct=!0,dr=[],Wt=[],Or=lt,Qt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},ut=Qt,zr=[],Vt=0,gn=[];function at(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=ut;if(typeof l!="function"){if(l!==Be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&lr(this,this._value))}this._state=null,this._value=null,++f.ref,function v(A,F){try{F(function(z){if(A._state===null){if(z===A)throw new TypeError("A promise cannot be resolved with itself.");var ee=A._lib&&gt();z&&typeof z.then=="function"?v(A,function(ce,ve){z instanceof at?z._then(ce,ve):z.then(ce,ve)}):(A._state=!0,A._value=z,Rt(A)),ee&&Dt()}},lr.bind(null,A))}catch(z){lr(A,z)}}(this,l)}var un={get:function(){var l=ut,f=si;function v(A,F){var z=this,ee=!l.global&&(l!==ut||f!==si),ce=ee&&!Kr(),ve=new at(function(Ne,_e){tr(z,new rn($i(A,l,ee,ce),$i(F,l,ee,ce),Ne,_e,l))});return this._consoleTask&&(ve._consoleTask=this._consoleTask),ve}return v.prototype=Be,v},set:function(l){P(this,"then",l&&l.prototype===Be?un:{get:function(){return l},set:un.set})}};function rn(l,f,v,A,F){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof f=="function"?f:null,this.resolve=v,this.reject=A,this.psd=F}function lr(l,f){var v,A;Wt.push(f),l._state===null&&(v=l._lib&&gt(),f=Or(f),l._state=!1,l._value=f,A=l,dr.some(function(F){return F._value===A._value})||dr.push(A),Rt(l),v&&Dt())}function Rt(l){var f=l._listeners;l._listeners=[];for(var v=0,A=f.length;v<A;++v)tr(l,f[v]);var F=l._PSD;--F.ref||F.finalize(),Vt===0&&(++Vt,wt(function(){--Vt==0&&xt()},[]))}function tr(l,f){if(l._state!==null){var v=l._state?f.onFulfilled:f.onRejected;if(v===null)return(l._state?f.resolve:f.reject)(l._value);++f.psd.ref,++Vt,wt(Xn,[v,l,f])}else l._listeners.push(f)}function Xn(l,f,v){try{var A,F=f._value;!f._state&&Wt.length&&(Wt=[]),A=de&&f._consoleTask?f._consoleTask.run(function(){return l(F)}):l(F),f._state||Wt.indexOf(F)!==-1||function(z){for(var ee=dr.length;ee;)if(dr[--ee]._value===z._value)return dr.splice(ee,1)}(f),v.resolve(A)}catch(z){v.reject(z)}finally{--Vt==0&&xt(),--v.psd.ref||v.psd.finalize()}}function Ee(){Dn(Qt,function(){gt()&&Dt()})}function gt(){var l=qt;return ct=qt=!1,l}function Dt(){var l,f,v;do for(;0<zr.length;)for(l=zr,zr=[],v=l.length,f=0;f<v;++f){var A=l[f];A[0].apply(null,A[1])}while(0<zr.length);ct=qt=!0}function xt(){var l=dr;dr=[],l.forEach(function(A){A._PSD.onunhandled.call(null,A._value,A)});for(var f=gn.slice(0),v=f.length;v;)f[--v]()}function sr(l){return new at(Be,!1,l)}function Ht(l,f){var v=ut;return function(){var A=gt(),F=ut;try{return Yr(v,!0),l.apply(this,arguments)}catch(z){f&&f(z)}finally{Yr(F,!1),A&&Dt()}}}w(at.prototype,{then:un,_then:function(l,f){tr(this,new rn(null,null,l,f,ut))},catch:function(l){if(arguments.length===1)return this.then(null,l);var f=l,v=arguments[1];return typeof f=="function"?this.then(null,function(A){return(A instanceof f?v:sr)(A)}):this.then(null,function(A){return(A&&A.name===f?v:sr)(A)})},finally:function(l){return this.then(function(f){return at.resolve(l()).then(function(){return f})},function(f){return at.resolve(l()).then(function(){return sr(f)})})},timeout:function(l,f){var v=this;return l<1/0?new at(function(A,F){var z=setTimeout(function(){return F(new fe.Timeout(f))},l);v.then(A,F).finally(clearTimeout.bind(null,z))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(at.prototype,Symbol.toStringTag,"Dexie.Promise"),Qt.env=Ci(),w(at,{all:function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.length===0&&f([]);var A=l.length;l.forEach(function(F,z){return at.resolve(F).then(function(ee){l[z]=ee,--A||f(l)},v)})})},resolve:function(l){return l instanceof at?l:l&&typeof l.then=="function"?new at(function(f,v){l.then(f,v)}):new at(Be,!0,l)},reject:sr,race:function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.map(function(A){return at.resolve(A).then(f,v)})})},PSD:{get:function(){return ut},set:function(l){return ut=l}},totalEchoes:{get:function(){return si}},newPSD:Wr,usePSD:Dn,scheduler:{get:function(){return wt},set:function(l){wt=l}},rejectionMapper:{get:function(){return Or},set:function(l){Or=l}},follow:function(l,f){return new at(function(v,A){return Wr(function(F,z){var ee=ut;ee.unhandleds=[],ee.onunhandled=z,ee.finalize=qe(function(){var ce,ve=this;ce=function(){ve.unhandleds.length===0?F():z(ve.unhandleds[0])},gn.push(function Ne(){ce(),gn.splice(gn.indexOf(Ne),1)}),++Vt,wt(function(){--Vt==0&&xt()},[])},ee.finalize),l()},f,v,A)})}}),bt&&(bt.allSettled&&P(at,"allSettled",function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f){l.length===0&&f([]);var v=l.length,A=new Array(v);l.forEach(function(F,z){return at.resolve(F).then(function(ee){return A[z]={status:"fulfilled",value:ee}},function(ee){return A[z]={status:"rejected",reason:ee}}).then(function(){return--v||f(A)})})})}),bt.any&&typeof AggregateError<"u"&&P(at,"any",function(){var l=ge.apply(null,arguments).map(_n);return new at(function(f,v){l.length===0&&v(new AggregateError([]));var A=l.length,F=new Array(A);l.forEach(function(z,ee){return at.resolve(z).then(function(ce){return f(ce)},function(ce){F[ee]=ce,--A||v(new AggregateError(F))})})})}),bt.withResolvers&&(at.withResolvers=bt.withResolvers));var Bt={awaits:0,echoes:0,id:0},mr=0,hr=[],Hr=0,si=0,oi=0;function Wr(l,f,v,A){var F=ut,z=Object.create(F);return z.parent=F,z.ref=0,z.global=!1,z.id=++oi,Qt.env,z.env=Pt?{Promise:at,PromiseProp:{value:at,configurable:!0,writable:!0},all:at.all,race:at.race,allSettled:at.allSettled,any:at.any,resolve:at.resolve,reject:at.reject}:{},f&&d(z,f),++F.ref,z.finalize=function(){--this.parent.ref||this.parent.finalize()},A=Dn(z,l,v,A),z.ref===0&&z.finalize(),A}function nn(){return Bt.id||(Bt.id=++mr),++Bt.awaits,Bt.echoes+=$e,Bt.id}function Kr(){return!!Bt.awaits&&(--Bt.awaits==0&&(Bt.id=0),Bt.echoes=Bt.awaits*$e,!0)}function _n(l){return Bt.echoes&&l&&l.constructor===bt?(nn(),l.then(function(f){return Kr(),f},function(f){return Kr(),fr(f)})):l}function En(){var l=hr[hr.length-1];hr.pop(),Yr(l,!1)}function Yr(l,f){var v,A=ut;(f?!Bt.echoes||Hr++&&l===ut:!Hr||--Hr&&l===ut)||queueMicrotask(f?(function(F){++si,Bt.echoes&&--Bt.echoes!=0||(Bt.echoes=Bt.awaits=Bt.id=0),hr.push(ut),Yr(F,!0)}).bind(null,l):En),l!==ut&&(ut=l,A===Qt&&(Qt.env=Ci()),Pt&&(v=Qt.env.Promise,f=l.env,(A.global||l.global)&&(Object.defineProperty(i,"Promise",f.PromiseProp),v.all=f.all,v.race=f.race,v.resolve=f.resolve,v.reject=f.reject,f.allSettled&&(v.allSettled=f.allSettled),f.any&&(v.any=f.any))))}function Ci(){var l=i.Promise;return Pt?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function Dn(l,f,v,A,F){var z=ut;try{return Yr(l,!0),f(v,A,F)}finally{Yr(z,!1)}}function $i(l,f,v,A){return typeof l!="function"?l:function(){var F=ut;v&&nn(),Yr(f,!0);try{return l.apply(this,arguments)}finally{Yr(F,!1),A&&queueMicrotask(Kr)}}}function ki(l){Promise===bt&&Bt.echoes===0?Hr===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+Xr).indexOf("[native code]")===-1&&(nn=Kr=Ve);var fr=at.reject,Zn=String.fromCharCode(65535),Un="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ps="String expected.",zn=[],Gi="__dbnames",Xa="readonly",Yi="readwrite";function li(l,f){return l?f?function(){return l.apply(this,arguments)&&f.apply(this,arguments)}:l:f}var Za={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Na(l){return typeof l!="string"||/\./.test(l)?function(f){return f}:function(f){return f[l]===void 0&&l in f&&delete(f=q(f))[l],f}}function Qi(){throw fe.Type()}function Jt(l,f){try{var v=Ar(l),A=Ar(f);if(v!==A)return v==="Array"?1:A==="Array"?-1:v==="binary"?1:A==="binary"?-1:v==="string"?1:A==="string"?-1:v==="Date"?1:A!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return f<l?1:l<f?-1:0;case"binary":return function(F,z){for(var ee=F.length,ce=z.length,ve=ee<ce?ee:ce,Ne=0;Ne<ve;++Ne)if(F[Ne]!==z[Ne])return F[Ne]<z[Ne]?-1:1;return ee===ce?0:ee<ce?-1:1}(es(l),es(f));case"Array":return function(F,z){for(var ee=F.length,ce=z.length,ve=ee<ce?ee:ce,Ne=0;Ne<ve;++Ne){var _e=Jt(F[Ne],z[Ne]);if(_e!==0)return _e}return ee===ce?0:ee<ce?-1:1}(l,f)}}catch{}return NaN}function Ar(l){var f=typeof l;return f!="object"?f:ArrayBuffer.isView(l)?"binary":(l=he(l),l==="ArrayBuffer"?"binary":l)}function es(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}var ts=(or.prototype._trans=function(l,f,v){var A=this._tx||ut.trans,F=this.name,z=de&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function ee(Ne,_e,ue){if(!ue.schema[F])throw new fe.NotFound("Table "+F+" not part of transaction");return f(ue.idbtrans,ue)}var ce=gt();try{var ve=A&&A.db._novip===this.db._novip?A===ut.trans?A._promise(l,ee,v):Wr(function(){return A._promise(l,ee,v)},{trans:A,transless:ut.transless||ut}):function Ne(_e,ue,ke,me){if(_e.idbdb&&(_e._state.openComplete||ut.letThrough||_e._vip)){var Se=_e._createTransaction(ue,ke,_e._dbSchema);try{Se.create(),_e._state.PR1398_maxLoop=3}catch(Ce){return Ce.name===ye.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return Ne(_e,ue,ke,me)})):fr(Ce)}return Se._promise(ue,function(Ce,je){return Wr(function(){return ut.trans=Se,me(Ce,je,Se)})}).then(function(Ce){if(ue==="readwrite")try{Se.idbtrans.commit()}catch{}return ue==="readonly"?Ce:Se._completion.then(function(){return Ce})})}if(_e._state.openComplete)return fr(new fe.DatabaseClosed(_e._state.dbOpenError));if(!_e._state.isBeingOpened){if(!_e._state.autoOpen)return fr(new fe.DatabaseClosed);_e.open().catch(Ve)}return _e._state.dbReadyPromise.then(function(){return Ne(_e,ue,ke,me)})}(this.db,l,[this.name],ee);return z&&(ve._consoleTask=z,ve=ve.catch(function(Ne){return console.trace(Ne),fr(Ne)})),ve}finally{ce&&Dt()}},or.prototype.get=function(l,f){var v=this;return l&&l.constructor===Object?this.where(l).first(f):l==null?fr(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(A){return v.core.get({trans:A,key:l}).then(function(F){return v.hook.reading.fire(F)})}).then(f)},or.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(u(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var f=c(l);if(f.length===1)return this.where(f[0]).equals(l[f[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(ce){if(ce.compound&&f.every(function(Ne){return 0<=ce.keyPath.indexOf(Ne)})){for(var ve=0;ve<f.length;++ve)if(f.indexOf(ce.keyPath[ve])===-1)return!1;return!0}return!1}).sort(function(ce,ve){return ce.keyPath.length-ve.keyPath.length})[0];if(v&&this.db._maxKey!==Zn){var z=v.keyPath.slice(0,f.length);return this.where(z).equals(z.map(function(ve){return l[ve]}))}!v&&de&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var A=this.schema.idxByName;function F(ce,ve){return Jt(ce,ve)===0}var ee=f.reduce(function(ue,ve){var Ne=ue[0],_e=ue[1],ue=A[ve],ke=l[ve];return[Ne||ue,Ne||!ue?li(_e,ue&&ue.multi?function(me){return me=Z(me,ve),u(me)&&me.some(function(Se){return F(ke,Se)})}:function(me){return F(ke,Z(me,ve))}):_e]},[null,null]),z=ee[0],ee=ee[1];return z?this.where(z.name).equals(l[z.keyPath]).filter(ee):v?this.filter(ee):this.where(f).equals("")},or.prototype.filter=function(l){return this.toCollection().and(l)},or.prototype.count=function(l){return this.toCollection().count(l)},or.prototype.offset=function(l){return this.toCollection().offset(l)},or.prototype.limit=function(l){return this.toCollection().limit(l)},or.prototype.each=function(l){return this.toCollection().each(l)},or.prototype.toArray=function(l){return this.toCollection().toArray(l)},or.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},or.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,u(l)?"[".concat(l.join("+"),"]"):l))},or.prototype.reverse=function(){return this.toCollection().reverse()},or.prototype.mapToClass=function(l){var f,v=this.db,A=this.name;function F(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof Qi&&(function(ve,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Class extends value "+String(Ne)+" is not a constructor or null");function _e(){this.constructor=ve}t(ve,Ne),ve.prototype=Ne===null?Object.create(Ne):(_e.prototype=Ne.prototype,new _e)}(F,f=l),Object.defineProperty(F.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),F.prototype.table=function(){return A},l=F);for(var z=new Set,ee=l.prototype;ee;ee=y(ee))Object.getOwnPropertyNames(ee).forEach(function(ve){return z.add(ve)});function ce(ve){if(!ve)return ve;var Ne,_e=Object.create(l.prototype);for(Ne in ve)if(!z.has(Ne))try{_e[Ne]=ve[Ne]}catch{}return _e}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ce,this.hook("reading",ce),l},or.prototype.defineClass=function(){return this.mapToClass(function(l){d(this,l)})},or.prototype.add=function(l,f){var v=this,A=this.schema.primKey,F=A.auto,z=A.keyPath,ee=l;return z&&F&&(ee=Na(z)(l)),this._trans("readwrite",function(ce){return v.core.mutate({trans:ce,type:"add",keys:f!=null?[f]:null,values:[ee]})}).then(function(ce){return ce.numFailures?at.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(z)try{R(l,z,ce)}catch{}return ce})},or.prototype.update=function(l,f){return typeof l!="object"||u(l)?this.where(":id").equals(l).modify(f):(l=Z(l,this.schema.primKey.keyPath),l===void 0?fr(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(f))},or.prototype.put=function(l,f){var v=this,A=this.schema.primKey,F=A.auto,z=A.keyPath,ee=l;return z&&F&&(ee=Na(z)(l)),this._trans("readwrite",function(ce){return v.core.mutate({trans:ce,type:"put",values:[ee],keys:f!=null?[f]:null})}).then(function(ce){return ce.numFailures?at.reject(ce.failures[0]):ce.lastResult}).then(function(ce){if(z)try{R(l,z,ce)}catch{}return ce})},or.prototype.delete=function(l){var f=this;return this._trans("readwrite",function(v){return f.core.mutate({trans:v,type:"delete",keys:[l]})}).then(function(v){return v.numFailures?at.reject(v.failures[0]):void 0})},or.prototype.clear=function(){var l=this;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"deleteRange",range:Za})}).then(function(f){return f.numFailures?at.reject(f.failures[0]):void 0})},or.prototype.bulkGet=function(l){var f=this;return this._trans("readonly",function(v){return f.core.getMany({keys:l,trans:v}).then(function(A){return A.map(function(F){return f.hook.reading.fire(F)})})})},or.prototype.bulkAdd=function(l,f,v){var A=this,F=Array.isArray(f)?f:void 0,z=(v=v||(F?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(ee){var Ne=A.schema.primKey,ce=Ne.auto,Ne=Ne.keyPath;if(Ne&&F)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(F&&F.length!==l.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ve=l.length,Ne=Ne&&ce?l.map(Na(Ne)):l;return A.core.mutate({trans:ee,type:"add",keys:F,values:Ne,wantResults:z}).then(function(Se){var ue=Se.numFailures,ke=Se.results,me=Se.lastResult,Se=Se.failures;if(ue===0)return z?ke:me;throw new ae("".concat(A.name,".bulkAdd(): ").concat(ue," of ").concat(ve," operations failed"),Se)})})},or.prototype.bulkPut=function(l,f,v){var A=this,F=Array.isArray(f)?f:void 0,z=(v=v||(F?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(ee){var Ne=A.schema.primKey,ce=Ne.auto,Ne=Ne.keyPath;if(Ne&&F)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(F&&F.length!==l.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var ve=l.length,Ne=Ne&&ce?l.map(Na(Ne)):l;return A.core.mutate({trans:ee,type:"put",keys:F,values:Ne,wantResults:z}).then(function(Se){var ue=Se.numFailures,ke=Se.results,me=Se.lastResult,Se=Se.failures;if(ue===0)return z?ke:me;throw new ae("".concat(A.name,".bulkPut(): ").concat(ue," of ").concat(ve," operations failed"),Se)})})},or.prototype.bulkUpdate=function(l){var f=this,v=this.core,A=l.map(function(ee){return ee.key}),F=l.map(function(ee){return ee.changes}),z=[];return this._trans("readwrite",function(ee){return v.getMany({trans:ee,keys:A,cache:"clone"}).then(function(ce){var ve=[],Ne=[];l.forEach(function(ue,ke){var me=ue.key,Se=ue.changes,Ce=ce[ke];if(Ce){for(var je=0,Te=Object.keys(Se);je<Te.length;je++){var Me=Te[je],Re=Se[Me];if(Me===f.schema.primKey.keyPath){if(Jt(Re,me)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else R(Ce,Me,Re)}z.push(ke),ve.push(me),Ne.push(Ce)}});var _e=ve.length;return v.mutate({trans:ee,type:"put",keys:ve,values:Ne,updates:{keys:A,changeSpecs:F}}).then(function(ue){var ke=ue.numFailures,me=ue.failures;if(ke===0)return _e;for(var Se=0,Ce=Object.keys(me);Se<Ce.length;Se++){var je,Te=Ce[Se],Me=z[Number(Te)];Me!=null&&(je=me[Te],delete me[Te],me[Me]=je)}throw new ae("".concat(f.name,".bulkUpdate(): ").concat(ke," of ").concat(_e," operations failed"),me)})})})},or.prototype.bulkDelete=function(l){var f=this,v=l.length;return this._trans("readwrite",function(A){return f.core.mutate({trans:A,type:"delete",keys:l})}).then(function(ee){var F=ee.numFailures,z=ee.lastResult,ee=ee.failures;if(F===0)return z;throw new ae("".concat(f.name,".bulkDelete(): ").concat(F," of ").concat(v," operations failed"),ee)})},or);function or(){}function ci(l){function f(ee,ce){if(ce){for(var ve=arguments.length,Ne=new Array(ve-1);--ve;)Ne[ve-1]=arguments[ve];return v[ee].subscribe.apply(null,Ne),l}if(typeof ee=="string")return v[ee]}var v={};f.addEventType=z;for(var A=1,F=arguments.length;A<F;++A)z(arguments[A]);return f;function z(ee,ce,ve){if(typeof ee!="object"){var Ne;ce=ce||rt;var _e={subscribers:[],fire:ve=ve||Ve,subscribe:function(ue){_e.subscribers.indexOf(ue)===-1&&(_e.subscribers.push(ue),_e.fire=ce(_e.fire,ue))},unsubscribe:function(ue){_e.subscribers=_e.subscribers.filter(function(ke){return ke!==ue}),_e.fire=_e.subscribers.reduce(ce,ve)}};return v[ee]=f[ee]=_e}c(Ne=ee).forEach(function(ue){var ke=Ne[ue];if(u(ke))z(ue,Ne[ue][0],Ne[ue][1]);else{if(ke!=="asap")throw new fe.InvalidArgument("Invalid event config");var me=z(ue,lt,function(){for(var Se=arguments.length,Ce=new Array(Se);Se--;)Ce[Se]=arguments[Se];me.subscribers.forEach(function(je){K(function(){je.apply(null,Ce)})})})}})}}function Ji(l,f){return _(f).from({prototype:l}),f}function an(l,f){return!(l.filter||l.algorithm||l.or)&&(f?l.justLimit:!l.replayFilter)}function Fi(l,f){l.filter=li(l.filter,f)}function sn(l,f,v){var A=l.replayFilter;l.replayFilter=A?function(){return li(A(),f())}:f,l.justLimit=v&&!A}function Ei(l,f){if(l.isPrimKey)return f.primaryKey;var v=f.getIndexByKeyPath(l.index);if(!v)throw new fe.Schema("KeyPath "+l.index+" on object store "+f.name+" is not indexed");return v}function rs(l,f,v){var A=Ei(l,f.schema);return f.openCursor({trans:v,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:A,range:l.range}})}function Sa(l,f,v,A){var F=l.replayFilter?li(l.filter,l.replayFilter()):l.filter;if(l.or){var z={},ee=function(ce,ve,Ne){var _e,ue;F&&!F(ve,Ne,function(ke){return ve.stop(ke)},function(ke){return ve.fail(ke)})||((ue=""+(_e=ve.primaryKey))=="[object ArrayBuffer]"&&(ue=""+new Uint8Array(_e)),b(z,ue)||(z[ue]=!0,f(ce,ve,Ne)))};return Promise.all([l.or._iterate(ee,v),ns(rs(l,A,v),l.algorithm,ee,!l.keysOnly&&l.valueMapper)])}return ns(rs(l,A,v),li(l.algorithm,F),f,!l.keysOnly&&l.valueMapper)}function ns(l,f,v,A){var F=Ht(A?function(z,ee,ce){return v(A(z),ee,ce)}:v);return l.then(function(z){if(z)return z.start(function(){var ee=function(){return z.continue()};f&&!f(z,function(ce){return ee=ce},function(ce){z.stop(ce),ee=Ve},function(ce){z.fail(ce),ee=Ve})||F(z.value,z,function(ce){return ee=ce}),ee()})})}var Xi=(is.prototype.execute=function(l){var f=this["@@propmod"];if(f.add!==void 0){var v=f.add;if(u(v))return a(a([],u(l)?l:[],!0),v,!0).sort();if(typeof v=="number")return(Number(l)||0)+v;if(typeof v=="bigint")try{return BigInt(l)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(f.remove!==void 0){var A=f.remove;if(u(A))return u(l)?l.filter(function(F){return!A.includes(F)}).sort():[];if(typeof A=="number")return Number(l)-A;if(typeof A=="bigint")try{return BigInt(l)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return v=(v=f.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof l=="string"&&l.startsWith(v)?f.replacePrefix[1]+l.substring(v.length):l},is);function is(l){this["@@propmod"]=l}var Qs=(Zt.prototype._read=function(l,f){var v=this._ctx;return v.error?v.table._trans(null,fr.bind(null,v.error)):v.table._trans("readonly",l).then(f)},Zt.prototype._write=function(l){var f=this._ctx;return f.error?f.table._trans(null,fr.bind(null,f.error)):f.table._trans("readwrite",l,"locked")},Zt.prototype._addAlgorithm=function(l){var f=this._ctx;f.algorithm=li(f.algorithm,l)},Zt.prototype._iterate=function(l,f){return Sa(this._ctx,l,f,this._ctx.table.core)},Zt.prototype.clone=function(l){var f=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return l&&d(v,l),f._ctx=v,f},Zt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Zt.prototype.each=function(l){var f=this._ctx;return this._read(function(v){return Sa(f,l,v,f.table.core)})},Zt.prototype.count=function(l){var f=this;return this._read(function(v){var A=f._ctx,F=A.table.core;if(an(A,!0))return F.count({trans:v,query:{index:Ei(A,F.schema),range:A.range}}).then(function(ee){return Math.min(ee,A.limit)});var z=0;return Sa(A,function(){return++z,!1},v,F).then(function(){return z})}).then(l)},Zt.prototype.sortBy=function(l,f){var v=l.split(".").reverse(),A=v[0],F=v.length-1;function z(ve,Ne){return Ne?z(ve[v[Ne]],Ne-1):ve[A]}var ee=this._ctx.dir==="next"?1:-1;function ce(ve,Ne){return Jt(z(ve,F),z(Ne,F))*ee}return this.toArray(function(ve){return ve.sort(ce)}).then(f)},Zt.prototype.toArray=function(l){var f=this;return this._read(function(v){var A=f._ctx;if(A.dir==="next"&&an(A,!0)&&0<A.limit){var F=A.valueMapper,z=Ei(A,A.table.core.schema);return A.table.core.query({trans:v,limit:A.limit,values:!0,query:{index:z,range:A.range}}).then(function(ce){return ce=ce.result,F?ce.map(F):ce})}var ee=[];return Sa(A,function(ce){return ee.push(ce)},v,A.table.core).then(function(){return ee})},l)},Zt.prototype.offset=function(l){var f=this._ctx;return l<=0||(f.offset+=l,an(f)?sn(f,function(){var v=l;return function(A,F){return v===0||(v===1?--v:F(function(){A.advance(v),v=0}),!1)}}):sn(f,function(){var v=l;return function(){return--v<0}})),this},Zt.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),sn(this._ctx,function(){var f=l;return function(v,A,F){return--f<=0&&A(F),0<=f}},!0),this},Zt.prototype.until=function(l,f){return Fi(this._ctx,function(v,A,F){return!l(v.value)||(A(F),f)}),this},Zt.prototype.first=function(l){return this.limit(1).toArray(function(f){return f[0]}).then(l)},Zt.prototype.last=function(l){return this.reverse().first(l)},Zt.prototype.filter=function(l){var f;return Fi(this._ctx,function(v){return l(v.value)}),(f=this._ctx).isMatch=li(f.isMatch,l),this},Zt.prototype.and=function(l){return this.filter(l)},Zt.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},Zt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Zt.prototype.desc=function(){return this.reverse()},Zt.prototype.eachKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,A){l(A.key,A)})},Zt.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},Zt.prototype.eachPrimaryKey=function(l){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,A){l(A.primaryKey,A)})},Zt.prototype.keys=function(l){var f=this._ctx;f.keysOnly=!f.isMatch;var v=[];return this.each(function(A,F){v.push(F.key)}).then(function(){return v}).then(l)},Zt.prototype.primaryKeys=function(l){var f=this._ctx;if(f.dir==="next"&&an(f,!0)&&0<f.limit)return this._read(function(A){var F=Ei(f,f.table.core.schema);return f.table.core.query({trans:A,values:!1,limit:f.limit,query:{index:F,range:f.range}})}).then(function(A){return A.result}).then(l);f.keysOnly=!f.isMatch;var v=[];return this.each(function(A,F){v.push(F.primaryKey)}).then(function(){return v}).then(l)},Zt.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},Zt.prototype.firstKey=function(l){return this.limit(1).keys(function(f){return f[0]}).then(l)},Zt.prototype.lastKey=function(l){return this.reverse().firstKey(l)},Zt.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var f={};return Fi(this._ctx,function(F){var A=F.primaryKey.toString(),F=b(f,A);return f[A]=!0,!F}),this},Zt.prototype.modify=function(l){var f=this,v=this._ctx;return this._write(function(A){var F,z,ee;ee=typeof l=="function"?l:(F=c(l),z=F.length,function(je){for(var Te=!1,Me=0;Me<z;++Me){var Re=F[Me],Ke=l[Re],nt=Z(je,Re);Ke instanceof Xi?(R(je,Re,Ke.execute(nt)),Te=!0):nt!==Ke&&(R(je,Re,Ke),Te=!0)}return Te});var ce=v.table.core,ue=ce.schema.primaryKey,ve=ue.outbound,Ne=ue.extractKey,_e=200,ue=f.db._options.modifyChunkSize;ue&&(_e=typeof ue=="object"?ue[ce.name]||ue["*"]||200:ue);function ke(je,Re){var Me=Re.failures,Re=Re.numFailures;Se+=je-Re;for(var Ke=0,nt=c(Me);Ke<nt.length;Ke++){var dt=nt[Ke];me.push(Me[dt])}}var me=[],Se=0,Ce=[];return f.clone().primaryKeys().then(function(je){function Te(Re){var Ke=Math.min(_e,je.length-Re);return ce.getMany({trans:A,keys:je.slice(Re,Re+Ke),cache:"immutable"}).then(function(nt){for(var dt=[],it=[],st=ve?[]:null,ht=[],ot=0;ot<Ke;++ot){var pt=nt[ot],St={value:q(pt),primKey:je[Re+ot]};ee.call(St,St.value,St)!==!1&&(St.value==null?ht.push(je[Re+ot]):ve||Jt(Ne(pt),Ne(St.value))===0?(it.push(St.value),ve&&st.push(je[Re+ot])):(ht.push(je[Re+ot]),dt.push(St.value)))}return Promise.resolve(0<dt.length&&ce.mutate({trans:A,type:"add",values:dt}).then(function(At){for(var kt in At.failures)ht.splice(parseInt(kt),1);ke(dt.length,At)})).then(function(){return(0<it.length||Me&&typeof l=="object")&&ce.mutate({trans:A,type:"put",keys:st,values:it,criteria:Me,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<Re}).then(function(At){return ke(it.length,At)})}).then(function(){return(0<ht.length||Me&&l===as)&&ce.mutate({trans:A,type:"delete",keys:ht,criteria:Me,isAdditionalChunk:0<Re}).then(function(At){return ke(ht.length,At)})}).then(function(){return je.length>Re+Ke&&Te(Re+_e)})})}var Me=an(v)&&v.limit===1/0&&(typeof l!="function"||l===as)&&{index:v.index,range:v.range};return Te(0).then(function(){if(0<me.length)throw new te("Error modifying one or more objects",me,Se,Ce);return je.length})})})},Zt.prototype.delete=function(){var l=this._ctx,f=l.range;return an(l)&&(l.isPrimKey||f.type===3)?this._write(function(v){var A=l.table.core.schema.primaryKey,F=f;return l.table.core.count({trans:v,query:{index:A,range:F}}).then(function(z){return l.table.core.mutate({trans:v,type:"deleteRange",range:F}).then(function(ee){var ce=ee.failures;if(ee.lastResult,ee.results,ee=ee.numFailures,ee)throw new te("Could not delete some values",Object.keys(ce).map(function(ve){return ce[ve]}),z-ee);return z-ee})})}):this.modify(as)},Zt);function Zt(){}var as=function(l,f){return f.value=null};function Js(l,f){return l<f?-1:l===f?0:1}function Xs(l,f){return f<l?-1:l===f?0:1}function Pr(l,f,v){return l=l instanceof Ls?new l.Collection(l):l,l._ctx.error=new(v||TypeError)(f),l}function Hn(l){return new l.Collection(l,function(){return Qr("")}).limit(0)}function ui(l,f,v,A){var F,z,ee,ce,ve,Ne,_e,ue=v.length;if(!v.every(function(Se){return typeof Se=="string"}))return Pr(l,Ps);function ke(Se){F=Se==="next"?function(je){return je.toUpperCase()}:function(je){return je.toLowerCase()},z=Se==="next"?function(je){return je.toLowerCase()}:function(je){return je.toUpperCase()},ee=Se==="next"?Js:Xs;var Ce=v.map(function(je){return{lower:z(je),upper:F(je)}}).sort(function(je,Te){return ee(je.lower,Te.lower)});ce=Ce.map(function(je){return je.upper}),ve=Ce.map(function(je){return je.lower}),_e=(Ne=Se)==="next"?"":A}ke("next"),l=new l.Collection(l,function(){return Wn(ce[0],ve[ue-1]+A)}),l._ondirectionchange=function(Se){ke(Se)};var me=0;return l._addAlgorithm(function(Se,Ce,je){var Te=Se.key;if(typeof Te!="string")return!1;var Me=z(Te);if(f(Me,ve,me))return!0;for(var Re=null,Ke=me;Ke<ue;++Ke){var nt=function(dt,it,st,ht,ot,pt){for(var St=Math.min(dt.length,ht.length),At=-1,kt=0;kt<St;++kt){var nr=it[kt];if(nr!==ht[kt])return ot(dt[kt],st[kt])<0?dt.substr(0,kt)+st[kt]+st.substr(kt+1):ot(dt[kt],ht[kt])<0?dt.substr(0,kt)+ht[kt]+st.substr(kt+1):0<=At?dt.substr(0,At)+it[At]+st.substr(At+1):null;ot(dt[kt],nr)<0&&(At=kt)}return St<ht.length&&pt==="next"?dt+st.substr(dt.length):St<dt.length&&pt==="prev"?dt.substr(0,st.length):At<0?null:dt.substr(0,At)+ht[At]+st.substr(At+1)}(Te,Me,ce[Ke],ve[Ke],ee,Ne);nt===null&&Re===null?me=Ke+1:(Re===null||0<ee(Re,nt))&&(Re=nt)}return Ce(Re!==null?function(){Se.continue(Re+_e)}:je),!1}),l}function Wn(l,f,v,A){return{type:2,lower:l,upper:f,lowerOpen:v,upperOpen:A}}function Qr(l){return{type:1,lower:l,upper:l}}var Ls=(Object.defineProperty(Lr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lr.prototype.between=function(l,f,v,A){v=v!==!1,A=A===!0;try{return 0<this._cmp(l,f)||this._cmp(l,f)===0&&(v||A)&&(!v||!A)?Hn(this):new this.Collection(this,function(){return Wn(l,f,!v,!A)})}catch{return Pr(this,Un)}},Lr.prototype.equals=function(l){return l==null?Pr(this,Un):new this.Collection(this,function(){return Qr(l)})},Lr.prototype.above=function(l){return l==null?Pr(this,Un):new this.Collection(this,function(){return Wn(l,void 0,!0)})},Lr.prototype.aboveOrEqual=function(l){return l==null?Pr(this,Un):new this.Collection(this,function(){return Wn(l,void 0,!1)})},Lr.prototype.below=function(l){return l==null?Pr(this,Un):new this.Collection(this,function(){return Wn(void 0,l,!1,!0)})},Lr.prototype.belowOrEqual=function(l){return l==null?Pr(this,Un):new this.Collection(this,function(){return Wn(void 0,l)})},Lr.prototype.startsWith=function(l){return typeof l!="string"?Pr(this,Ps):this.between(l,l+Zn,!0,!0)},Lr.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):ui(this,function(f,v){return f.indexOf(v[0])===0},[l],Zn)},Lr.prototype.equalsIgnoreCase=function(l){return ui(this,function(f,v){return f===v[0]},[l],"")},Lr.prototype.anyOfIgnoreCase=function(){var l=ge.apply(ie,arguments);return l.length===0?Hn(this):ui(this,function(f,v){return v.indexOf(f)!==-1},l,"")},Lr.prototype.startsWithAnyOfIgnoreCase=function(){var l=ge.apply(ie,arguments);return l.length===0?Hn(this):ui(this,function(f,v){return v.some(function(A){return f.indexOf(A)===0})},l,Zn)},Lr.prototype.anyOf=function(){var l=this,f=ge.apply(ie,arguments),v=this._cmp;try{f.sort(v)}catch{return Pr(this,Un)}if(f.length===0)return Hn(this);var A=new this.Collection(this,function(){return Wn(f[0],f[f.length-1])});A._ondirectionchange=function(z){v=z==="next"?l._ascending:l._descending,f.sort(v)};var F=0;return A._addAlgorithm(function(z,ee,ce){for(var ve=z.key;0<v(ve,f[F]);)if(++F===f.length)return ee(ce),!1;return v(ve,f[F])===0||(ee(function(){z.continue(f[F])}),!1)}),A},Lr.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lr.prototype.noneOf=function(){var l=ge.apply(ie,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return Pr(this,Un)}var f=l.reduce(function(v,A){return v?v.concat([[v[v.length-1][1],A]]):[[-1/0,A]]},null);return f.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Lr.prototype.inAnyRange=function(Te,f){var v=this,A=this._cmp,F=this._ascending,z=this._descending,ee=this._min,ce=this._max;if(Te.length===0)return Hn(this);if(!Te.every(function(Me){return Me[0]!==void 0&&Me[1]!==void 0&&F(Me[0],Me[1])<=0}))return Pr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var ve=!f||f.includeLowers!==!1,Ne=f&&f.includeUppers===!0,_e,ue=F;function ke(Me,Re){return ue(Me[0],Re[0])}try{(_e=Te.reduce(function(Me,Re){for(var Ke=0,nt=Me.length;Ke<nt;++Ke){var dt=Me[Ke];if(A(Re[0],dt[1])<0&&0<A(Re[1],dt[0])){dt[0]=ee(dt[0],Re[0]),dt[1]=ce(dt[1],Re[1]);break}}return Ke===nt&&Me.push(Re),Me},[])).sort(ke)}catch{return Pr(this,Un)}var me=0,Se=Ne?function(Me){return 0<F(Me,_e[me][1])}:function(Me){return 0<=F(Me,_e[me][1])},Ce=ve?function(Me){return 0<z(Me,_e[me][0])}:function(Me){return 0<=z(Me,_e[me][0])},je=Se,Te=new this.Collection(this,function(){return Wn(_e[0][0],_e[_e.length-1][1],!ve,!Ne)});return Te._ondirectionchange=function(Me){ue=Me==="next"?(je=Se,F):(je=Ce,z),_e.sort(ke)},Te._addAlgorithm(function(Me,Re,Ke){for(var nt,dt=Me.key;je(dt);)if(++me===_e.length)return Re(Ke),!1;return!Se(nt=dt)&&!Ce(nt)||(v._cmp(dt,_e[me][1])===0||v._cmp(dt,_e[me][0])===0||Re(function(){ue===F?Me.continue(_e[me][0]):Me.continue(_e[me][1])}),!1)}),Te},Lr.prototype.startsWithAnyOf=function(){var l=ge.apply(ie,arguments);return l.every(function(f){return typeof f=="string"})?l.length===0?Hn(this):this.inAnyRange(l.map(function(f){return[f,f+Zn]})):Pr(this,"startsWithAnyOf() only works with strings")},Lr);function Lr(){}function Et(l){return Ht(function(f){return Zi(f),l(f.target.error),!1})}function Zi(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var ea="storagemutated",In="x-storagemutated-1",Kn=ci(null,ea),Cs=(dn.prototype._lock=function(){return B(!ut.global),++this._reculock,this._reculock!==1||ut.global||(ut.lockOwnerFor=this),this},dn.prototype._unlock=function(){if(B(!ut.global),--this._reculock==0)for(ut.global||(ut.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{Dn(l[1],l[0])}catch{}}return this},dn.prototype._locked=function(){return this._reculock&&ut.lockOwnerFor!==this},dn.prototype.create=function(l){var f=this;if(!this.mode)return this;var v=this.db.idbdb,A=this.db._state.dbOpenError;if(B(!this.idbtrans),!l&&!v)switch(A&&A.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(A);case"MissingAPIError":throw new fe.MissingAPI(A.message,A);default:throw new fe.OpenFailed(A)}if(!this.active)throw new fe.TransactionInactive;return B(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ht(function(F){Zi(F),f._reject(l.error)}),l.onabort=Ht(function(F){Zi(F),f.active&&f._reject(new fe.Abort(l.error)),f.active=!1,f.on("abort").fire(F)}),l.oncomplete=Ht(function(){f.active=!1,f._resolve(),"mutatedParts"in l&&Kn.storagemutated.fire(l.mutatedParts)}),this},dn.prototype._promise=function(l,f,v){var A=this;if(l==="readwrite"&&this.mode!=="readwrite")return fr(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return fr(new fe.TransactionInactive);if(this._locked())return new at(function(z,ee){A._blockedFuncs.push([function(){A._promise(l,f,v).then(z,ee)},ut])});if(v)return Wr(function(){var z=new at(function(ee,ce){A._lock();var ve=f(ee,ce,A);ve&&ve.then&&ve.then(ee,ce)});return z.finally(function(){return A._unlock()}),z._lib=!0,z});var F=new at(function(z,ee){var ce=f(z,ee,A);ce&&ce.then&&ce.then(z,ee)});return F._lib=!0,F},dn.prototype._root=function(){return this.parent?this.parent._root():this},dn.prototype.waitFor=function(l){var f,v=this._root(),A=at.resolve(l);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return A}):(v._waitingFor=A,v._waitingQueue=[],f=v.idbtrans.objectStore(v.storeNames[0]),function z(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(f.get(-1/0).onsuccess=z)}());var F=v._waitingFor;return new at(function(z,ee){A.then(function(ce){return v._waitingQueue.push(Ht(z.bind(null,ce)))},function(ce){return v._waitingQueue.push(Ht(ee.bind(null,ce)))}).finally(function(){v._waitingFor===F&&(v._waitingFor=null)})})},dn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},dn.prototype.table=function(l){var f=this._memoizedTables||(this._memoizedTables={});if(b(f,l))return f[l];var v=this.schema[l];if(!v)throw new fe.NotFound("Table "+l+" not part of transaction");return v=new this.db.Table(l,v,this),v.core=this.db.core.table(l),f[l]=v},dn);function dn(){}function ta(l,f,v,A,F,z,ee){return{name:l,keyPath:f,unique:v,multi:A,auto:F,compound:z,src:(v&&!ee?"&":"")+(A?"*":"")+(F?"++":"")+ks(f)}}function ks(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function ss(l,f,v){return{name:l,primKey:f,indexes:v,mappedClass:null,idxByName:(A=function(F){return[F.name,F]},v.reduce(function(F,z,ee){return ee=A(z,ee),ee&&(F[ee[0]]=ee[1]),F},{}))};var A}var ra=function(l){try{return l.only([[]]),ra=function(){return[[]]},[[]]}catch{return ra=function(){return Zn},Zn}};function na(l){return l==null?function(){}:typeof l=="string"?(f=l).split(".").length===1?function(v){return v[f]}:function(v){return Z(v,f)}:function(v){return Z(v,l)};var f}function Di(l){return[].slice.call(l)}var Ii=0;function ia(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function aa(l,f,ve){function A(je){if(je.type===3)return null;if(je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var me=je.lower,Se=je.upper,Ce=je.lowerOpen,je=je.upperOpen;return me===void 0?Se===void 0?null:f.upperBound(Se,!!je):Se===void 0?f.lowerBound(me,!!Ce):f.bound(me,Se,!!Ce,!!je)}function F(ke){var me,Se=ke.name;return{name:Se,schema:ke,mutate:function(Ce){var je=Ce.trans,Te=Ce.type,Me=Ce.keys,Re=Ce.values,Ke=Ce.range;return new Promise(function(nt,dt){nt=Ht(nt);var it=je.objectStore(Se),st=it.keyPath==null,ht=Te==="put"||Te==="add";if(!ht&&Te!=="delete"&&Te!=="deleteRange")throw new Error("Invalid operation type: "+Te);var ot,pt=(Me||Re||{length:1}).length;if(Me&&Re&&Me.length!==Re.length)throw new Error("Given keys array must have same length as given values array.");if(pt===0)return nt({numFailures:0,failures:{},results:[],lastResult:void 0});function St(Zr){++nr,Zi(Zr)}var At=[],kt=[],nr=0;if(Te==="deleteRange"){if(Ke.type===4)return nt({numFailures:nr,failures:kt,results:[],lastResult:void 0});Ke.type===3?At.push(ot=it.clear()):At.push(ot=it.delete(A(Ke)))}else{var st=ht?st?[Re,Me]:[Re,null]:[Me,null],It=st[0],Er=st[1];if(ht)for(var Cr=0;Cr<pt;++Cr)At.push(ot=Er&&Er[Cr]!==void 0?it[Te](It[Cr],Er[Cr]):it[Te](It[Cr])),ot.onerror=St;else for(Cr=0;Cr<pt;++Cr)At.push(ot=it[Te](It[Cr])),ot.onerror=St}function fa(Zr){Zr=Zr.target.result,At.forEach(function(ri,fn){return ri.error!=null&&(kt[fn]=ri.error)}),nt({numFailures:nr,failures:kt,results:Te==="delete"?Me:At.map(function(ri){return ri.result}),lastResult:Zr})}ot.onerror=function(Zr){St(Zr),fa(Zr)},ot.onsuccess=fa})},getMany:function(Ce){var je=Ce.trans,Te=Ce.keys;return new Promise(function(Me,Re){Me=Ht(Me);for(var Ke,nt=je.objectStore(Se),dt=Te.length,it=new Array(dt),st=0,ht=0,ot=function(At){At=At.target,it[At._pos]=At.result,++ht===st&&Me(it)},pt=Et(Re),St=0;St<dt;++St)Te[St]!=null&&((Ke=nt.get(Te[St]))._pos=St,Ke.onsuccess=ot,Ke.onerror=pt,++st);st===0&&Me(it)})},get:function(Ce){var je=Ce.trans,Te=Ce.key;return new Promise(function(Me,Re){Me=Ht(Me);var Ke=je.objectStore(Se).get(Te);Ke.onsuccess=function(nt){return Me(nt.target.result)},Ke.onerror=Et(Re)})},query:(me=Ne,function(Ce){return new Promise(function(je,Te){je=Ht(je);var Me,Re,Ke,st=Ce.trans,nt=Ce.values,dt=Ce.limit,ot=Ce.query,it=dt===1/0?void 0:dt,ht=ot.index,ot=ot.range,st=st.objectStore(Se),ht=ht.isPrimaryKey?st:st.index(ht.name),ot=A(ot);if(dt===0)return je({result:[]});me?((it=nt?ht.getAll(ot,it):ht.getAllKeys(ot,it)).onsuccess=function(pt){return je({result:pt.target.result})},it.onerror=Et(Te)):(Me=0,Re=!nt&&"openKeyCursor"in ht?ht.openKeyCursor(ot):ht.openCursor(ot),Ke=[],Re.onsuccess=function(pt){var St=Re.result;return St?(Ke.push(nt?St.value:St.primaryKey),++Me===dt?je({result:Ke}):void St.continue()):je({result:Ke})},Re.onerror=Et(Te))})}),openCursor:function(Ce){var je=Ce.trans,Te=Ce.values,Me=Ce.query,Re=Ce.reverse,Ke=Ce.unique;return new Promise(function(nt,dt){nt=Ht(nt);var ht=Me.index,it=Me.range,st=je.objectStore(Se),st=ht.isPrimaryKey?st:st.index(ht.name),ht=Re?Ke?"prevunique":"prev":Ke?"nextunique":"next",ot=!Te&&"openKeyCursor"in st?st.openKeyCursor(A(it),ht):st.openCursor(A(it),ht);ot.onerror=Et(dt),ot.onsuccess=Ht(function(pt){var St,At,kt,nr,It=ot.result;It?(It.___id=++Ii,It.done=!1,St=It.continue.bind(It),At=(At=It.continuePrimaryKey)&&At.bind(It),kt=It.advance.bind(It),nr=function(){throw new Error("Cursor not stopped")},It.trans=je,It.stop=It.continue=It.continuePrimaryKey=It.advance=function(){throw new Error("Cursor not started")},It.fail=Ht(dt),It.next=function(){var Er=this,Cr=1;return this.start(function(){return Cr--?Er.continue():Er.stop()}).then(function(){return Er})},It.start=function(Er){function Cr(){if(ot.result)try{Er()}catch(Zr){It.fail(Zr)}else It.done=!0,It.start=function(){throw new Error("Cursor behind last entry")},It.stop()}var fa=new Promise(function(Zr,ri){Zr=Ht(Zr),ot.onerror=Et(ri),It.fail=ri,It.stop=function(fn){It.stop=It.continue=It.continuePrimaryKey=It.advance=nr,Zr(fn)}});return ot.onsuccess=Ht(function(Zr){ot.onsuccess=Cr,Cr()}),It.continue=St,It.continuePrimaryKey=At,It.advance=kt,Cr(),fa},nt(It)):nt(null)},dt)})},count:function(Ce){var je=Ce.query,Te=Ce.trans,Me=je.index,Re=je.range;return new Promise(function(Ke,nt){var dt=Te.objectStore(Se),it=Me.isPrimaryKey?dt:dt.index(Me.name),dt=A(Re),it=dt?it.count(dt):it.count();it.onsuccess=Ht(function(st){return Ke(st.target.result)}),it.onerror=Et(nt)})}}}var z,ee,ce,_e=(ee=ve,ce=Di((z=l).objectStoreNames),{schema:{name:z.name,tables:ce.map(function(ke){return ee.objectStore(ke)}).map(function(ke){var me=ke.keyPath,je=ke.autoIncrement,Se=u(me),Ce={},je={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:me==null,compound:Se,keyPath:me,autoIncrement:je,unique:!0,extractKey:na(me)},indexes:Di(ke.indexNames).map(function(Te){return ke.index(Te)}).map(function(Ke){var Me=Ke.name,Re=Ke.unique,nt=Ke.multiEntry,Ke=Ke.keyPath,nt={name:Me,compound:u(Ke),keyPath:Ke,unique:Re,multiEntry:nt,extractKey:na(Ke)};return Ce[ia(Ke)]=nt}),getIndexByKeyPath:function(Te){return Ce[ia(Te)]}};return Ce[":id"]=je.primaryKey,me!=null&&(Ce[ia(me)]=je.primaryKey),je})},hasGetAll:0<ce.length&&"getAll"in ee.objectStore(ce[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ve=_e.schema,Ne=_e.hasGetAll,_e=ve.tables.map(F),ue={};return _e.forEach(function(ke){return ue[ke.name]=ke}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(ke){if(!ue[ke])throw new Error("Table '".concat(ke,"' not found"));return ue[ke]},MIN_KEY:-1/0,MAX_KEY:ra(f),schema:ve}}function os(l,f,v,A){var F=v.IDBKeyRange;return v.indexedDB,{dbcore:(A=aa(f,F,A),l.dbcore.reduce(function(z,ee){return ee=ee.create,r(r({},z),ee(z))},A))}}function di(l,A){var v=A.db,A=os(l._middlewares,v,l._deps,A);l.core=A.dbcore,l.tables.forEach(function(F){var z=F.name;l.core.schema.tables.some(function(ee){return ee.name===z})&&(F.core=l.core.table(z),l[z]instanceof l.Table&&(l[z].core=F.core))})}function sa(l,f,v,A){v.forEach(function(F){var z=A[F];f.forEach(function(ee){var ce=function ve(Ne,_e){return E(Ne,_e)||(Ne=y(Ne))&&ve(Ne,_e)}(ee,F);(!ce||"value"in ce&&ce.value===void 0)&&(ee===l.Transaction.prototype||ee instanceof l.Transaction?P(ee,F,{get:function(){return this.table(F)},set:function(ve){m(this,F,{value:ve,writable:!0,configurable:!0,enumerable:!0})}}):ee[F]=new l.Table(F,z))})})}function ja(l,f){f.forEach(function(v){for(var A in v)v[A]instanceof l.Table&&delete v[A]})}function Fs(l,f){return l._cfg.version-f._cfg.version}function Es(l,f,v,A){var F=l._dbSchema;v.objectStoreNames.contains("$meta")&&!F.$meta&&(F.$meta=ss("$meta",Ds("")[0],[]),l._storeNames.push("$meta"));var z=l._createTransaction("readwrite",l._storeNames,F);z.create(v),z._completion.catch(A);var ee=z._reject.bind(z),ce=ut.transless||ut;Wr(function(){return ut.trans=z,ut.transless=ce,f!==0?(di(l,v),Ne=f,((ve=z).storeNames.includes("$meta")?ve.table("$meta").get("version").then(function(_e){return _e??Ne}):at.resolve(Ne)).then(function(_e){return ke=_e,me=z,Se=v,Ce=[],_e=(ue=l)._versions,je=ue._dbSchema=Oi(0,ue.idbdb,Se),(_e=_e.filter(function(Te){return Te._cfg.version>=ke})).length!==0?(_e.forEach(function(Te){Ce.push(function(){var Me=je,Re=Te._cfg.dbschema;ti(ue,Me,Se),ti(ue,Re,Se),je=ue._dbSchema=Re;var Ke=Vn(Me,Re);Ke.add.forEach(function(ht){ls(Se,ht[0],ht[1].primKey,ht[1].indexes)}),Ke.change.forEach(function(ht){if(ht.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var ot=Se.objectStore(ht.name);ht.add.forEach(function(pt){return yn(ot,pt)}),ht.change.forEach(function(pt){ot.deleteIndex(pt.name),yn(ot,pt)}),ht.del.forEach(function(pt){return ot.deleteIndex(pt)})});var nt=Te._cfg.contentUpgrade;if(nt&&Te._cfg.version>ke){di(ue,Se),me._memoizedTables={};var dt=O(Re);Ke.del.forEach(function(ht){dt[ht]=Me[ht]}),ja(ue,[ue.Transaction.prototype]),sa(ue,[ue.Transaction.prototype],c(dt),dt),me.schema=dt;var it,st=Oe(nt);return st&&nn(),Ke=at.follow(function(){var ht;(it=nt(me))&&st&&(ht=Kr.bind(null,null),it.then(ht,ht))}),it&&typeof it.then=="function"?at.resolve(it):Ke.then(function(){return it})}}),Ce.push(function(Me){var Re,Ke,nt=Te._cfg.dbschema;Re=nt,Ke=Me,[].slice.call(Ke.db.objectStoreNames).forEach(function(dt){return Re[dt]==null&&Ke.db.deleteObjectStore(dt)}),ja(ue,[ue.Transaction.prototype]),sa(ue,[ue.Transaction.prototype],ue._storeNames,ue._dbSchema),me.schema=ue._dbSchema}),Ce.push(function(Me){ue.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ue.idbdb.version/10)===Te._cfg.version?(ue.idbdb.deleteObjectStore("$meta"),delete ue._dbSchema.$meta,ue._storeNames=ue._storeNames.filter(function(Re){return Re!=="$meta"})):Me.objectStore("$meta").put(Te._cfg.version,"version"))})}),function Te(){return Ce.length?at.resolve(Ce.shift()(me.idbtrans)).then(Te):at.resolve()}().then(function(){hi(je,Se)})):at.resolve();var ue,ke,me,Se,Ce,je}).catch(ee)):(c(F).forEach(function(_e){ls(v,_e,F[_e].primKey,F[_e].indexes)}),di(l,v),void at.follow(function(){return l.on.populate.fire(z)}).catch(ee));var ve,Ne})}function ei(l,f){hi(l._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var v=Oi(0,l.idbdb,f);ti(l,l._dbSchema,f);for(var A=0,F=Vn(v,l._dbSchema).change;A<F.length;A++){var z=function(ee){if(ee.change.length||ee.recreate)return console.warn("Unable to patch indexes of table ".concat(ee.name," because it has changes on the type of index or primary key.")),{value:void 0};var ce=f.objectStore(ee.name);ee.add.forEach(function(ve){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ee.name,".").concat(ve.src)),yn(ce,ve)})}(F[A]);if(typeof z=="object")return z.value}}function Vn(l,f){var v,A={del:[],add:[],change:[]};for(v in l)f[v]||A.del.push(v);for(v in f){var F=l[v],z=f[v];if(F){var ee={name:v,def:z,recreate:!1,del:[],add:[],change:[]};if(""+(F.primKey.keyPath||"")!=""+(z.primKey.keyPath||"")||F.primKey.auto!==z.primKey.auto)ee.recreate=!0,A.change.push(ee);else{var ce=F.idxByName,ve=z.idxByName,Ne=void 0;for(Ne in ce)ve[Ne]||ee.del.push(Ne);for(Ne in ve){var _e=ce[Ne],ue=ve[Ne];_e?_e.src!==ue.src&&ee.change.push(ue):ee.add.push(ue)}(0<ee.del.length||0<ee.add.length||0<ee.change.length)&&A.change.push(ee)}}else A.add.push([v,z])}return A}function ls(l,f,v,A){var F=l.db.createObjectStore(f,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return A.forEach(function(z){return yn(F,z)}),F}function hi(l,f){c(l).forEach(function(v){f.db.objectStoreNames.contains(v)||(de&&console.debug("Dexie: Creating missing table",v),ls(f,v,l[v].primKey,l[v].indexes))})}function yn(l,f){l.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function Oi(l,f,v){var A={};return j(f.objectStoreNames,0).forEach(function(F){for(var z=v.objectStore(F),ee=ta(ks(Ne=z.keyPath),Ne||"",!0,!1,!!z.autoIncrement,Ne&&typeof Ne!="string",!0),ce=[],ve=0;ve<z.indexNames.length;++ve){var _e=z.index(z.indexNames[ve]),Ne=_e.keyPath,_e=ta(_e.name,Ne,!!_e.unique,!!_e.multiEntry,!1,Ne&&typeof Ne!="string",!1);ce.push(_e)}A[F]=ss(F,ee,ce)}),A}function ti(l,f,v){for(var A=v.db.objectStoreNames,F=0;F<A.length;++F){var z=A[F],ee=v.objectStore(z);l._hasGetAll="getAll"in ee;for(var ce=0;ce<ee.indexNames.length;++ce){var ve=ee.indexNames[ce],Ne=ee.index(ve).keyPath,_e=typeof Ne=="string"?Ne:"["+j(Ne).join("+")+"]";!f[z]||(Ne=f[z].idxByName[_e])&&(Ne.name=ve,delete f[z].idxByName[_e],f[z].idxByName[ve]=Ne)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function Ds(l){return l.split(",").map(function(f,v){var A=(f=f.trim()).replace(/([&*]|\+\+)/g,""),F=/^\[/.test(A)?A.match(/^\[(.*)\]$/)[1].split("+"):A;return ta(A,F||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),u(F),v===0)})}var Aa=(_a.prototype._parseStoresSpec=function(l,f){c(l).forEach(function(v){if(l[v]!==null){var A=Ds(l[v]),F=A.shift();if(F.unique=!0,F.multi)throw new fe.Schema("Primary key cannot be multi-valued");A.forEach(function(z){if(z.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),f[v]=ss(v,F,A)}})},_a.prototype.stores=function(v){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,v):v;var v=f._versions,A={},F={};return v.forEach(function(z){d(A,z._cfg.storesSource),F=z._cfg.dbschema={},z._parseStoresSpec(A,F)}),f._dbSchema=F,ja(f,[f._allTables,f,f.Transaction.prototype]),sa(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],c(F),F),f._storeNames=c(F),this},_a.prototype.upgrade=function(l){return this._cfg.contentUpgrade=J(this._cfg.contentUpgrade||Ve,l),this},_a);function _a(){}function oa(l,f){var v=l._dbNamesDB;return v||(v=l._dbNamesDB=new bn(Gi,{addons:[],indexedDB:l,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function la(l){return l&&typeof l.databases=="function"}function Pa(l){return Wr(function(){return ut.letThrough=!0,l()})}function Ti(l){return!("from"in l)}var kr=function(l,f){if(!this){var v=new kr;return l&&"d"in l&&d(v,l),v}d(this,arguments.length?{d:1,from:l,to:1<arguments.length?f:l}:{d:0})};function fi(l,f,v){var A=Jt(f,v);if(!isNaN(A)){if(0<A)throw RangeError();if(Ti(l))return d(l,{from:f,to:v,d:1});var F=l.l,A=l.r;if(Jt(v,l.from)<0)return F?fi(F,f,v):l.l={from:f,to:v,d:1,l:null,r:null},Ri(l);if(0<Jt(f,l.to))return A?fi(A,f,v):l.r={from:f,to:v,d:1,l:null,r:null},Ri(l);Jt(f,l.from)<0&&(l.from=f,l.l=null,l.d=A?A.d+1:1),0<Jt(v,l.to)&&(l.to=v,l.r=null,l.d=l.l?l.l.d+1:1),v=!l.r,F&&!l.l&&Mi(l,F),A&&v&&Mi(l,A)}}function Mi(l,f){Ti(f)||function v(A,ve){var z=ve.from,ee=ve.to,ce=ve.l,ve=ve.r;fi(A,z,ee),ce&&v(A,ce),ve&&v(A,ve)}(l,f)}function Is(l,f){var v=pi(f),A=v.next();if(A.done)return!1;for(var F=A.value,z=pi(l),ee=z.next(F.from),ce=ee.value;!A.done&&!ee.done;){if(Jt(ce.from,F.to)<=0&&0<=Jt(ce.to,F.from))return!0;Jt(F.from,ce.from)<0?F=(A=v.next(ce.from)).value:ce=(ee=z.next(F.from)).value}return!1}function pi(l){var f=Ti(l)?null:{s:0,n:l};return{next:function(v){for(var A=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,A)for(;f.n.l&&Jt(v,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!A||Jt(v,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Ri(l){var f,v,A=(((f=l.r)===null||f===void 0?void 0:f.d)||0)-(((v=l.l)===null||v===void 0?void 0:v.d)||0),F=1<A?"r":A<-1?"l":"";F&&(f=F=="r"?"l":"r",v=r({},l),A=l[F],l.from=A.from,l.to=A.to,l[F]=A[F],v[F]=A[f],(l[f]=v).d=La(v)),l.d=La(l)}function La(v){var f=v.r,v=v.l;return(f?v?Math.max(f.d,v.d):f.d:v?v.d:0)+1}function $n(l,f){return c(f).forEach(function(v){l[v]?Mi(l[v],f[v]):l[v]=function A(F){var z,ee,ce={};for(z in F)b(F,z)&&(ee=F[z],ce[z]=!ee||typeof ee!="object"||C.has(ee.constructor)?ee:A(ee));return ce}(f[v])}),l}function ca(l,f){return l.all||f.all||Object.keys(l).some(function(v){return f[v]&&Is(f[v],l[v])})}w(kr.prototype,((Xr={add:function(l){return Mi(this,l),this},addKey:function(l){return fi(this,l,l),this},addKeys:function(l){var f=this;return l.forEach(function(v){return fi(f,v,v)}),this},hasKey:function(l){var f=pi(this).next(l).value;return f&&Jt(f.from,l)<=0&&0<=Jt(f.to,l)}})[Y]=function(){return pi(this)},Xr));var p={},T={},se=!1;function pe(l){$n(T,l),se||(se=!0,setTimeout(function(){se=!1,Fe(T,!(T={}))},0))}function Fe(l,f){f===void 0&&(f=!1);var v=new Set;if(l.all)for(var A=0,F=Object.values(p);A<F.length;A++)We(ee=F[A],l,v,f);else for(var z in l){var ee,ce=/^idb\:\/\/(.*)\/(.*)\//.exec(z);ce&&(z=ce[1],ce=ce[2],(ee=p["idb://".concat(z,"/").concat(ce)])&&We(ee,l,v,f))}v.forEach(function(ve){return ve()})}function We(l,f,v,A){for(var F=[],z=0,ee=Object.entries(l.queries.query);z<ee.length;z++){for(var ce=ee[z],ve=ce[0],Ne=[],_e=0,ue=ce[1];_e<ue.length;_e++){var ke=ue[_e];ca(f,ke.obsSet)?ke.subscribers.forEach(function(je){return v.add(je)}):A&&Ne.push(ke)}A&&F.push([ve,Ne])}if(A)for(var me=0,Se=F;me<Se.length;me++){var Ce=Se[me],ve=Ce[0],Ne=Ce[1];l.queries.query[ve]=Ne}}function tt(l){var f=l._state,v=l._deps.indexedDB;if(f.isBeingOpened||l.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?fr(f.dbOpenError):l});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var A=f.openCanceller,F=Math.round(10*l.verno),z=!1;function ee(){if(f.openCanceller!==A)throw new fe.DatabaseClosed("db.open() was cancelled")}function ce(){return new at(function(ke,me){if(ee(),!v)throw new fe.MissingAPI;var Se=l.name,Ce=f.autoSchema||!F?v.open(Se):v.open(Se,F);if(!Ce)throw new fe.MissingAPI;Ce.onerror=Et(me),Ce.onblocked=Ht(l._fireOnBlocked),Ce.onupgradeneeded=Ht(function(je){var Te;_e=Ce.transaction,f.autoSchema&&!l._options.allowEmptyDB?(Ce.onerror=Zi,_e.abort(),Ce.result.close(),(Te=v.deleteDatabase(Se)).onsuccess=Te.onerror=Ht(function(){me(new fe.NoSuchDatabase("Database ".concat(Se," doesnt exist")))})):(_e.onerror=Et(me),je=je.oldVersion>Math.pow(2,62)?0:je.oldVersion,ue=je<1,l.idbdb=Ce.result,z&&ei(l,_e),Es(l,je/10,_e,me))},me),Ce.onsuccess=Ht(function(){_e=null;var je,Te,Me,Re,Ke,nt=l.idbdb=Ce.result,dt=j(nt.objectStoreNames);if(0<dt.length)try{var it=nt.transaction((Re=dt).length===1?Re[0]:Re,"readonly");if(f.autoSchema)Te=nt,Me=it,(je=l).verno=Te.version/10,Me=je._dbSchema=Oi(0,Te,Me),je._storeNames=j(Te.objectStoreNames,0),sa(je,[je._allTables],c(Me),Me);else if(ti(l,l._dbSchema,it),((Ke=Vn(Oi(0,(Ke=l).idbdb,it),Ke._dbSchema)).add.length||Ke.change.some(function(st){return st.add.length||st.change.length}))&&!z)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),nt.close(),F=nt.version+1,z=!0,ke(ce());di(l,it)}catch{}zn.push(l),nt.onversionchange=Ht(function(st){f.vcFired=!0,l.on("versionchange").fire(st)}),nt.onclose=Ht(function(st){l.on("close").fire(st)}),ue&&(Ke=l._deps,it=Se,nt=Ke.indexedDB,Ke=Ke.IDBKeyRange,la(nt)||it===Gi||oa(nt,Ke).put({name:it}).catch(Ve)),ke()},me)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ce();break;case"VersionError":if(0<F)return F=0,ce()}return at.reject(ke)})}var ve,Ne=f.dbReadyResolve,_e=null,ue=!1;return at.race([A,(typeof navigator>"u"?at.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function me(){return indexedDB.databases().finally(ke)}ve=setInterval(me,100),me()}).finally(function(){return clearInterval(ve)}):Promise.resolve()).then(ce)]).then(function(){return ee(),f.onReadyBeingFired=[],at.resolve(Pa(function(){return l.on.ready.fire(l.vip)})).then(function ke(){if(0<f.onReadyBeingFired.length){var me=f.onReadyBeingFired.reduce(J,Ve);return f.onReadyBeingFired=[],at.resolve(Pa(function(){return me(l.vip)})).then(ke)}})}).finally(function(){f.openCanceller===A&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(ke){f.dbOpenError=ke;try{_e&&_e.abort()}catch{}return A===f.openCanceller&&l._close(),fr(ke)}).finally(function(){f.openComplete=!0,Ne()}).then(function(){var ke;return ue&&(ke={},l.tables.forEach(function(me){me.schema.indexes.forEach(function(Se){Se.name&&(ke["idb://".concat(l.name,"/").concat(me.name,"/").concat(Se.name)]=new kr(-1/0,[[[]]]))}),ke["idb://".concat(l.name,"/").concat(me.name,"/")]=ke["idb://".concat(l.name,"/").concat(me.name,"/:dels")]=new kr(-1/0,[[[]]])}),Kn(ea).fire(ke),Fe(ke,!0)),l})}function vt(l){function f(z){return l.next(z)}var v=F(f),A=F(function(z){return l.throw(z)});function F(z){return function(ve){var ce=z(ve),ve=ce.value;return ce.done?ve:ve&&typeof ve.then=="function"?ve.then(v,A):u(ve)?Promise.all(ve).then(v,A):v(ve)}}return F(f)()}function Ct(l,f,v){for(var A=u(l)?l.slice():[l],F=0;F<v;++F)A.push(f);return A}var Kt={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return r(r({},l),{table:function(f){var v=l.table(f),A=v.schema,F={},z=[];function ee(ue,ke,me){var Se=ia(ue),Ce=F[Se]=F[Se]||[],je=ue==null?0:typeof ue=="string"?1:ue.length,Te=0<ke,Te=r(r({},me),{name:Te?"".concat(Se,"(virtual-from:").concat(me.name,")"):me.name,lowLevelIndex:me,isVirtual:Te,keyTail:ke,keyLength:je,extractKey:na(ue),unique:!Te&&me.unique});return Ce.push(Te),Te.isPrimaryKey||z.push(Te),1<je&&ee(je===2?ue[0]:ue.slice(0,je-1),ke+1,me),Ce.sort(function(Me,Re){return Me.keyTail-Re.keyTail}),Te}f=ee(A.primaryKey.keyPath,0,A.primaryKey),F[":id"]=[f];for(var ce=0,ve=A.indexes;ce<ve.length;ce++){var Ne=ve[ce];ee(Ne.keyPath,0,Ne)}function _e(ue){var ke,me=ue.query.index;return me.isVirtual?r(r({},ue),{query:{index:me.lowLevelIndex,range:(ke=ue.query.range,me=me.keyTail,{type:ke.type===1?2:ke.type,lower:Ct(ke.lower,ke.lowerOpen?l.MAX_KEY:l.MIN_KEY,me),lowerOpen:!0,upper:Ct(ke.upper,ke.upperOpen?l.MIN_KEY:l.MAX_KEY,me),upperOpen:!0})}}):ue}return r(r({},v),{schema:r(r({},A),{primaryKey:f,indexes:z,getIndexByKeyPath:function(ue){return(ue=F[ia(ue)])&&ue[0]}}),count:function(ue){return v.count(_e(ue))},query:function(ue){return v.query(_e(ue))},openCursor:function(ue){var ke=ue.query.index,me=ke.keyTail,Se=ke.isVirtual,Ce=ke.keyLength;return Se?v.openCursor(_e(ue)).then(function(Te){return Te&&je(Te)}):v.openCursor(ue);function je(Te){return Object.create(Te,{continue:{value:function(Me){Me!=null?Te.continue(Ct(Me,ue.reverse?l.MAX_KEY:l.MIN_KEY,me)):ue.unique?Te.continue(Te.key.slice(0,Ce).concat(ue.reverse?l.MIN_KEY:l.MAX_KEY,me)):Te.continue()}},continuePrimaryKey:{value:function(Me,Re){Te.continuePrimaryKey(Ct(Me,l.MAX_KEY,me),Re)}},primaryKey:{get:function(){return Te.primaryKey}},key:{get:function(){var Me=Te.key;return Ce===1?Me[0]:Me.slice(0,Ce)}},value:{get:function(){return Te.value}}})}}})}})}};function zt(l,f,v,A){return v=v||{},A=A||"",c(l).forEach(function(F){var z,ee,ce;b(f,F)?(z=l[F],ee=f[F],typeof z=="object"&&typeof ee=="object"&&z&&ee?(ce=he(z))!==he(ee)?v[A+F]=f[F]:ce==="Object"?zt(z,ee,v,A+F+"."):z!==ee&&(v[A+F]=f[F]):z!==ee&&(v[A+F]=f[F])):v[A+F]=void 0}),c(f).forEach(function(F){b(l,F)||(v[A+F]=f[F])}),v}function er(l,f){return f.type==="delete"?f.keys:f.keys||f.values.map(l.extractKey)}var xr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return r(r({},l),{table:function(f){var v=l.table(f),A=v.schema.primaryKey;return r(r({},v),{mutate:function(F){var z=ut.trans,ee=z.table(f).hook,ce=ee.deleting,ve=ee.creating,Ne=ee.updating;switch(F.type){case"add":if(ve.fire===Ve)break;return z._promise("readwrite",function(){return _e(F)},!0);case"put":if(ve.fire===Ve&&Ne.fire===Ve)break;return z._promise("readwrite",function(){return _e(F)},!0);case"delete":if(ce.fire===Ve)break;return z._promise("readwrite",function(){return _e(F)},!0);case"deleteRange":if(ce.fire===Ve)break;return z._promise("readwrite",function(){return function ue(ke,me,Se){return v.query({trans:ke,values:!1,query:{index:A,range:me},limit:Se}).then(function(Ce){var je=Ce.result;return _e({type:"delete",keys:je,trans:ke}).then(function(Te){return 0<Te.numFailures?Promise.reject(Te.failures[0]):je.length<Se?{failures:[],numFailures:0,lastResult:void 0}:ue(ke,r(r({},me),{lower:je[je.length-1],lowerOpen:!0}),Se)})})}(F.trans,F.range,1e4)},!0)}return v.mutate(F);function _e(ue){var ke,me,Se,Ce=ut.trans,je=ue.keys||er(A,ue);if(!je)throw new Error("Keys missing");return(ue=ue.type==="add"||ue.type==="put"?r(r({},ue),{keys:je}):r({},ue)).type!=="delete"&&(ue.values=a([],ue.values,!0)),ue.keys&&(ue.keys=a([],ue.keys,!0)),ke=v,Se=je,((me=ue).type==="add"?Promise.resolve([]):ke.getMany({trans:me.trans,keys:Se,cache:"immutable"})).then(function(Te){var Me=je.map(function(Re,Ke){var nt,dt,it,st=Te[Ke],ht={onerror:null,onsuccess:null};return ue.type==="delete"?ce.fire.call(ht,Re,st,Ce):ue.type==="add"||st===void 0?(nt=ve.fire.call(ht,Re,ue.values[Ke],Ce),Re==null&&nt!=null&&(ue.keys[Ke]=Re=nt,A.outbound||R(ue.values[Ke],A.keyPath,Re))):(nt=zt(st,ue.values[Ke]),(dt=Ne.fire.call(ht,nt,Re,st,Ce))&&(it=ue.values[Ke],Object.keys(dt).forEach(function(ot){b(it,ot)?it[ot]=dt[ot]:R(it,ot,dt[ot])}))),ht});return v.mutate(ue).then(function(Re){for(var Ke=Re.failures,nt=Re.results,dt=Re.numFailures,Re=Re.lastResult,it=0;it<je.length;++it){var st=(nt||je)[it],ht=Me[it];st==null?ht.onerror&&ht.onerror(Ke[it]):ht.onsuccess&&ht.onsuccess(ue.type==="put"&&Te[it]?ue.values[it]:st)}return{failures:Ke,results:nt,numFailures:dt,lastResult:Re}}).catch(function(Re){return Me.forEach(function(Ke){return Ke.onerror&&Ke.onerror(Re)}),Promise.reject(Re)})})}}})}})}};function wr(l,f,v){try{if(!f||f.keys.length<l.length)return null;for(var A=[],F=0,z=0;F<f.keys.length&&z<l.length;++F)Jt(f.keys[F],l[z])===0&&(A.push(v?q(f.values[F]):f.values[F]),++z);return A.length===l.length?A:null}catch{return null}}var Fr={stack:"dbcore",level:-1,create:function(l){return{table:function(f){var v=l.table(f);return r(r({},v),{getMany:function(A){if(!A.cache)return v.getMany(A);var F=wr(A.keys,A.trans._cache,A.cache==="clone");return F?at.resolve(F):v.getMany(A).then(function(z){return A.trans._cache={keys:A.keys,values:A.cache==="clone"?q(z):z},z})},mutate:function(A){return A.type!=="add"&&(A.trans._cache=null),v.mutate(A)}})}}}};function Jr(l,f){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Tr(l,f){switch(l){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gn={stack:"dbcore",level:0,name:"Observability",create:function(l){var f=l.schema.name,v=new kr(l.MIN_KEY,l.MAX_KEY);return r(r({},l),{transaction:function(A,F,z){if(ut.subscr&&F!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ut.querier));return l.transaction(A,F,z)},table:function(A){var F=l.table(A),z=F.schema,ee=z.primaryKey,ue=z.indexes,ce=ee.extractKey,ve=ee.outbound,Ne=ee.autoIncrement&&ue.filter(function(me){return me.compound&&me.keyPath.includes(ee.keyPath)}),_e=r(r({},F),{mutate:function(me){function Se(ot){return ot="idb://".concat(f,"/").concat(A,"/").concat(ot),Re[ot]||(Re[ot]=new kr)}var Ce,je,Te,Me=me.trans,Re=me.mutatedParts||(me.mutatedParts={}),Ke=Se(""),nt=Se(":dels"),dt=me.type,ht=me.type==="deleteRange"?[me.range]:me.type==="delete"?[me.keys]:me.values.length<50?[er(ee,me).filter(function(ot){return ot}),me.values]:[],it=ht[0],st=ht[1],ht=me.trans._cache;return u(it)?(Ke.addKeys(it),(ht=dt==="delete"||it.length===st.length?wr(it,ht):null)||nt.addKeys(it),(ht||st)&&(Ce=Se,je=ht,Te=st,z.indexes.forEach(function(ot){var pt=Ce(ot.name||"");function St(kt){return kt!=null?ot.extractKey(kt):null}function At(kt){return ot.multiEntry&&u(kt)?kt.forEach(function(nr){return pt.addKey(nr)}):pt.addKey(kt)}(je||Te).forEach(function(kt,Er){var It=je&&St(je[Er]),Er=Te&&St(Te[Er]);Jt(It,Er)!==0&&(It!=null&&At(It),Er!=null&&At(Er))})}))):it?(st={from:(st=it.lower)!==null&&st!==void 0?st:l.MIN_KEY,to:(st=it.upper)!==null&&st!==void 0?st:l.MAX_KEY},nt.add(st),Ke.add(st)):(Ke.add(v),nt.add(v),z.indexes.forEach(function(ot){return Se(ot.name).add(v)})),F.mutate(me).then(function(ot){return!it||me.type!=="add"&&me.type!=="put"||(Ke.addKeys(ot.results),Ne&&Ne.forEach(function(pt){for(var St=me.values.map(function(It){return pt.extractKey(It)}),At=pt.keyPath.findIndex(function(It){return It===ee.keyPath}),kt=0,nr=ot.results.length;kt<nr;++kt)St[kt][At]=ot.results[kt];Se(pt.name).addKeys(St)})),Me.mutatedParts=$n(Me.mutatedParts||{},Re),ot})}}),ue=function(Se){var Ce=Se.query,Se=Ce.index,Ce=Ce.range;return[Se,new kr((Se=Ce.lower)!==null&&Se!==void 0?Se:l.MIN_KEY,(Ce=Ce.upper)!==null&&Ce!==void 0?Ce:l.MAX_KEY)]},ke={get:function(me){return[ee,new kr(me.key)]},getMany:function(me){return[ee,new kr().addKeys(me.keys)]},count:ue,query:ue,openCursor:ue};return c(ke).forEach(function(me){_e[me]=function(Se){var Ce=ut.subscr,je=!!Ce,Te=Jr(ut,F)&&Tr(me,Se)?Se.obsSet={}:Ce;if(je){var Me=function(st){return st="idb://".concat(f,"/").concat(A,"/").concat(st),Te[st]||(Te[st]=new kr)},Re=Me(""),Ke=Me(":dels"),Ce=ke[me](Se),je=Ce[0],Ce=Ce[1];if((me==="query"&&je.isPrimaryKey&&!Se.values?Ke:Me(je.name||"")).add(Ce),!je.isPrimaryKey){if(me!=="count"){var nt=me==="query"&&ve&&Se.values&&F.query(r(r({},Se),{values:!1}));return F[me].apply(this,arguments).then(function(st){if(me==="query"){if(ve&&Se.values)return nt.then(function(St){return St=St.result,Re.addKeys(St),st});var ht=Se.values?st.result.map(ce):st.result;(Se.values?Re:Ke).addKeys(ht)}else if(me==="openCursor"){var ot=st,pt=Se.values;return ot&&Object.create(ot,{key:{get:function(){return Ke.addKey(ot.primaryKey),ot.key}},primaryKey:{get:function(){var St=ot.primaryKey;return Ke.addKey(St),St}},value:{get:function(){return pt&&Re.addKey(ot.primaryKey),ot.value}}})}return st})}Ke.add(v)}}return F[me].apply(this,arguments)}}),_e}})}};function vn(l,f,v){if(v.numFailures===0)return f;if(f.type==="deleteRange")return null;var A=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return v.numFailures===A?null:(f=r({},f),u(f.keys)&&(f.keys=f.keys.filter(function(F,z){return!(z in v.failures)})),"values"in f&&u(f.values)&&(f.values=f.values.filter(function(F,z){return!(z in v.failures)})),f)}function On(l,f){return v=l,((A=f).lower===void 0||(A.lowerOpen?0<Jt(v,A.lower):0<=Jt(v,A.lower)))&&(l=l,(f=f).upper===void 0||(f.upperOpen?Jt(l,f.upper)<0:Jt(l,f.upper)<=0));var v,A}function cs(l,f,ke,A,F,z){if(!ke||ke.length===0)return l;var ee=f.query.index,ce=ee.multiEntry,ve=f.query.range,Ne=A.schema.primaryKey.extractKey,_e=ee.extractKey,ue=(ee.lowLevelIndex||ee).extractKey,ke=ke.reduce(function(me,Se){var Ce=me,je=[];if(Se.type==="add"||Se.type==="put")for(var Te=new kr,Me=Se.values.length-1;0<=Me;--Me){var Re,Ke=Se.values[Me],nt=Ne(Ke);Te.hasKey(nt)||(Re=_e(Ke),(ce&&u(Re)?Re.some(function(ot){return On(ot,ve)}):On(Re,ve))&&(Te.addKey(nt),je.push(Ke)))}switch(Se.type){case"add":var dt=new kr().addKeys(f.values?me.map(function(pt){return Ne(pt)}):me),Ce=me.concat(f.values?je.filter(function(pt){return pt=Ne(pt),!dt.hasKey(pt)&&(dt.addKey(pt),!0)}):je.map(function(pt){return Ne(pt)}).filter(function(pt){return!dt.hasKey(pt)&&(dt.addKey(pt),!0)}));break;case"put":var it=new kr().addKeys(Se.values.map(function(pt){return Ne(pt)}));Ce=me.filter(function(pt){return!it.hasKey(f.values?Ne(pt):pt)}).concat(f.values?je:je.map(function(pt){return Ne(pt)}));break;case"delete":var st=new kr().addKeys(Se.keys);Ce=me.filter(function(pt){return!st.hasKey(f.values?Ne(pt):pt)});break;case"deleteRange":var ht=Se.range;Ce=me.filter(function(pt){return!On(Ne(pt),ht)})}return Ce},l);return ke===l?l:(ke.sort(function(me,Se){return Jt(ue(me),ue(Se))||Jt(Ne(me),Ne(Se))}),f.limit&&f.limit<1/0&&(ke.length>f.limit?ke.length=f.limit:l.length===f.limit&&ke.length<f.limit&&(F.dirty=!0)),z?Object.freeze(ke):ke)}function Ca(l,f){return Jt(l.lower,f.lower)===0&&Jt(l.upper,f.upper)===0&&!!l.lowerOpen==!!f.lowerOpen&&!!l.upperOpen==!!f.upperOpen}function us(l,f){return function(v,A,F,z){if(v===void 0)return A!==void 0?-1:0;if(A===void 0)return 1;if((A=Jt(v,A))===0){if(F&&z)return 0;if(F)return 1;if(z)return-1}return A}(l.lower,f.lower,l.lowerOpen,f.lowerOpen)<=0&&0<=function(v,A,F,z){if(v===void 0)return A!==void 0?1:0;if(A===void 0)return-1;if((A=Jt(v,A))===0){if(F&&z)return 0;if(F)return-1;if(z)return 1}return A}(l.upper,f.upper,l.upperOpen,f.upperOpen)}function ka(l,f,v,A){l.subscribers.add(v),A.addEventListener("abort",function(){var F,z;l.subscribers.delete(v),l.subscribers.size===0&&(F=l,z=f,setTimeout(function(){F.subscribers.size===0&&ne(z,F)},3e3))})}var ds={stack:"dbcore",level:0,name:"Cache",create:function(l){var f=l.schema.name;return r(r({},l),{transaction:function(v,A,F){var z,ee,ce=l.transaction(v,A,F);return A==="readwrite"&&(ee=(z=new AbortController).signal,F=function(ve){return function(){if(z.abort(),A==="readwrite"){for(var Ne=new Set,_e=0,ue=v;_e<ue.length;_e++){var ke=ue[_e],me=p["idb://".concat(f,"/").concat(ke)];if(me){var Se=l.table(ke),Ce=me.optimisticOps.filter(function(pt){return pt.trans===ce});if(ce._explicit&&ve&&ce.mutatedParts)for(var je=0,Te=Object.values(me.queries.query);je<Te.length;je++)for(var Me=0,Re=(dt=Te[je]).slice();Me<Re.length;Me++)ca((it=Re[Me]).obsSet,ce.mutatedParts)&&(ne(dt,it),it.subscribers.forEach(function(pt){return Ne.add(pt)}));else if(0<Ce.length){me.optimisticOps=me.optimisticOps.filter(function(pt){return pt.trans!==ce});for(var Ke=0,nt=Object.values(me.queries.query);Ke<nt.length;Ke++)for(var dt,it,st,ht=0,ot=(dt=nt[Ke]).slice();ht<ot.length;ht++)(it=ot[ht]).res!=null&&ce.mutatedParts&&(ve&&!it.dirty?(st=Object.isFrozen(it.res),st=cs(it.res,it.req,Ce,Se,it,st),it.dirty?(ne(dt,it),it.subscribers.forEach(function(pt){return Ne.add(pt)})):st!==it.res&&(it.res=st,it.promise=at.resolve({result:st}))):(it.dirty&&ne(dt,it),it.subscribers.forEach(function(pt){return Ne.add(pt)})))}}}Ne.forEach(function(pt){return pt()})}}},ce.addEventListener("abort",F(!1),{signal:ee}),ce.addEventListener("error",F(!1),{signal:ee}),ce.addEventListener("complete",F(!0),{signal:ee})),ce},table:function(v){var A=l.table(v),F=A.schema.primaryKey;return r(r({},A),{mutate:function(z){var ee=ut.trans;if(F.outbound||ee.db._options.cache==="disabled"||ee.explicit||ee.idbtrans.mode!=="readwrite")return A.mutate(z);var ce=p["idb://".concat(f,"/").concat(v)];return ce?(ee=A.mutate(z),z.type!=="add"&&z.type!=="put"||!(50<=z.values.length||er(F,z).some(function(ve){return ve==null}))?(ce.optimisticOps.push(z),z.mutatedParts&&pe(z.mutatedParts),ee.then(function(ve){0<ve.numFailures&&(ne(ce.optimisticOps,z),(ve=vn(0,z,ve))&&ce.optimisticOps.push(ve),z.mutatedParts&&pe(z.mutatedParts))}),ee.catch(function(){ne(ce.optimisticOps,z),z.mutatedParts&&pe(z.mutatedParts)})):ee.then(function(ve){var Ne=vn(0,r(r({},z),{values:z.values.map(function(_e,ue){var ke;return ve.failures[ue]?_e:(_e=(ke=F.keyPath)!==null&&ke!==void 0&&ke.includes(".")?q(_e):r({},_e),R(_e,F.keyPath,ve.results[ue]),_e)})}),ve);ce.optimisticOps.push(Ne),queueMicrotask(function(){return z.mutatedParts&&pe(z.mutatedParts)})}),ee):A.mutate(z)},query:function(z){if(!Jr(ut,A)||!Tr("query",z))return A.query(z);var ee=((Ne=ut.trans)===null||Ne===void 0?void 0:Ne.db._options.cache)==="immutable",ue=ut,ce=ue.requery,ve=ue.signal,Ne=function(Se,Ce,je,Te){var Me=p["idb://".concat(Se,"/").concat(Ce)];if(!Me)return[];if(!(Ce=Me.queries[je]))return[null,!1,Me,null];var Re=Ce[(Te.query?Te.query.index.name:null)||""];if(!Re)return[null,!1,Me,null];switch(je){case"query":var Ke=Re.find(function(nt){return nt.req.limit===Te.limit&&nt.req.values===Te.values&&Ca(nt.req.query.range,Te.query.range)});return Ke?[Ke,!0,Me,Re]:[Re.find(function(nt){return("limit"in nt.req?nt.req.limit:1/0)>=Te.limit&&(!Te.values||nt.req.values)&&us(nt.req.query.range,Te.query.range)}),!1,Me,Re];case"count":return Ke=Re.find(function(nt){return Ca(nt.req.query.range,Te.query.range)}),[Ke,!!Ke,Me,Re]}}(f,v,"query",z),_e=Ne[0],ue=Ne[1],ke=Ne[2],me=Ne[3];return _e&&ue?_e.obsSet=z.obsSet:(ue=A.query(z).then(function(Se){var Ce=Se.result;if(_e&&(_e.res=Ce),ee){for(var je=0,Te=Ce.length;je<Te;++je)Object.freeze(Ce[je]);Object.freeze(Ce)}else Se.result=q(Ce);return Se}).catch(function(Se){return me&&_e&&ne(me,_e),Promise.reject(Se)}),_e={obsSet:z.obsSet,promise:ue,subscribers:new Set,type:"query",req:z,dirty:!1},me?me.push(_e):(me=[_e],(ke=ke||(p["idb://".concat(f,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[z.query.index.name||""]=me)),ka(_e,me,ce,ve),_e.promise.then(function(Se){return{result:cs(Se.result,z,ke==null?void 0:ke.optimisticOps,A,_e,ee)}})}})}})}};function qi(l,f){return new Proxy(l,{get:function(v,A,F){return A==="db"?f:Reflect.get(v,A,F)}})}var bn=(Xt.prototype.version=function(l){if(isNaN(l)||l<.1)throw new fe.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var f=this._versions,v=f.filter(function(A){return A._cfg.version===l})[0];return v||(v=new this.Version(l),f.push(v),f.sort(Fs),v.stores({}),this._state.autoSchema=!1,v)},Xt.prototype._whenReady=function(l){var f=this;return this.idbdb&&(this._state.openComplete||ut.letThrough||this._vip)?l():new at(function(v,A){if(f._state.openComplete)return A(new fe.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void A(new fe.DatabaseClosed);f.open().catch(Ve)}f._state.dbReadyPromise.then(v,A)}).then(l)},Xt.prototype.use=function(l){var f=l.stack,v=l.create,A=l.level,F=l.name;return F&&this.unuse({stack:f,name:F}),l=this._middlewares[f]||(this._middlewares[f]=[]),l.push({stack:f,create:v,level:A??10,name:F}),l.sort(function(z,ee){return z.level-ee.level}),this},Xt.prototype.unuse=function(l){var f=l.stack,v=l.name,A=l.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(F){return A?F.create!==A:!!v&&F.name!==v})),this},Xt.prototype.open=function(){var l=this;return Dn(Qt,function(){return tt(l)})},Xt.prototype._close=function(){var l=this._state,f=zn.indexOf(this);if(0<=f&&zn.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new at(function(v){l.dbReadyResolve=v}),l.openCanceller=new at(function(v,A){l.cancelOpen=A}))},Xt.prototype.close=function(v){var f=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;f?(v.isBeingOpened&&v.cancelOpen(new fe.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new fe.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Xt.prototype.delete=function(l){var f=this;l===void 0&&(l={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",A=this._state;return new at(function(F,z){function ee(){f.close(l);var ce=f._deps.indexedDB.deleteDatabase(f.name);ce.onsuccess=Ht(function(){var ve,Ne,_e;ve=f._deps,Ne=f.name,_e=ve.indexedDB,ve=ve.IDBKeyRange,la(_e)||Ne===Gi||oa(_e,ve).delete(Ne).catch(Ve),F()}),ce.onerror=Et(z),ce.onblocked=f._fireOnBlocked}if(v)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");A.isBeingOpened?A.dbReadyPromise.then(ee):ee()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var l=this;return c(this._allTables).map(function(f){return l._allTables[f]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var l=(function(f,v,A){var F=arguments.length;if(F<2)throw new fe.InvalidArgument("Too few arguments");for(var z=new Array(F-1);--F;)z[F-1]=arguments[F];return A=z.pop(),[f,oe(z),A]}).apply(this,arguments);return this._transaction.apply(this,l)},Xt.prototype._transaction=function(l,f,v){var A=this,F=ut.trans;F&&F.db===this&&l.indexOf("!")===-1||(F=null);var z,ee,ce=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(ee=f.map(function(Ne){if(Ne=Ne instanceof A.Table?Ne.name:Ne,typeof Ne!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ne}),l=="r"||l===Xa)z=Xa;else{if(l!="rw"&&l!=Yi)throw new fe.InvalidArgument("Invalid transaction mode: "+l);z=Yi}if(F){if(F.mode===Xa&&z===Yi){if(!ce)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");F=null}F&&ee.forEach(function(Ne){if(F&&F.storeNames.indexOf(Ne)===-1){if(!ce)throw new fe.SubTransaction("Table "+Ne+" not included in parent transaction.");F=null}}),ce&&F&&!F.active&&(F=null)}}catch(Ne){return F?F._promise(null,function(_e,ue){ue(Ne)}):fr(Ne)}var ve=(function Ne(_e,ue,ke,me,Se){return at.resolve().then(function(){var Ce=ut.transless||ut,je=_e._createTransaction(ue,ke,_e._dbSchema,me);if(je.explicit=!0,Ce={trans:je,transless:Ce},me)je.idbtrans=me.idbtrans;else try{je.create(),je.idbtrans._explicit=!0,_e._state.PR1398_maxLoop=3}catch(Re){return Re.name===ye.InvalidState&&_e.isOpen()&&0<--_e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_e.close({disableAutoOpen:!1}),_e.open().then(function(){return Ne(_e,ue,ke,null,Se)})):fr(Re)}var Te,Me=Oe(Se);return Me&&nn(),Ce=at.follow(function(){var Re;(Te=Se.call(je,je))&&(Me?(Re=Kr.bind(null,null),Te.then(Re,Re)):typeof Te.next=="function"&&typeof Te.throw=="function"&&(Te=vt(Te)))},Ce),(Te&&typeof Te.then=="function"?at.resolve(Te).then(function(Re){return je.active?Re:fr(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Ce.then(function(){return Te})).then(function(Re){return me&&je._resolve(),je._completion.then(function(){return Re})}).catch(function(Re){return je._reject(Re),fr(Re)})})}).bind(null,this,z,ee,F,v);return F?F._promise(z,ve,"lock"):ut.trans?Dn(ut.transless,function(){return A._whenReady(ve)}):this._whenReady(ve)},Xt.prototype.table=function(l){if(!b(this._allTables,l))throw new fe.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},Xt);function Xt(l,f){var v=this;this._middlewares={},this.verno=0;var A=Xt.dependencies;this._options=f=r({addons:Xt.addons,autoOpen:!0,indexedDB:A.indexedDB,IDBKeyRange:A.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},A=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var F,z,ee,ce,ve,Ne={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};Ne.dbReadyPromise=new at(function(ue){Ne.dbReadyResolve=ue}),Ne.openCanceller=new at(function(ue,ke){Ne.cancelOpen=ke}),this._state=Ne,this.name=l,this.on=ci(this,"populate","blocked","versionchange","close",{ready:[J,Ve]}),this.on.ready.subscribe=k(this.on.ready.subscribe,function(ue){return function(ke,me){Xt.vip(function(){var Se,Ce=v._state;Ce.openComplete?(Ce.dbOpenError||at.resolve().then(ke),me&&ue(ke)):Ce.onReadyBeingFired?(Ce.onReadyBeingFired.push(ke),me&&ue(ke)):(ue(ke),Se=v,me||ue(function je(){Se.on.ready.unsubscribe(ke),Se.on.ready.unsubscribe(je)}))})}}),this.Collection=(F=this,Ji(Qs.prototype,function(Te,je){this.db=F;var me=Za,Se=null;if(je)try{me=je()}catch(Me){Se=Me}var Ce=Te._ctx,je=Ce.table,Te=je.hook.reading.fire;this._ctx={table:je,index:Ce.index,isPrimKey:!Ce.index||je.schema.primKey.keyPath&&Ce.index===je.schema.primKey.name,range:me,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Se,or:Ce.or,valueMapper:Te!==lt?Te:null}})),this.Table=(z=this,Ji(ts.prototype,function(ue,ke,me){this.db=z,this._tx=me,this.name=ue,this.schema=ke,this.hook=z._allTables[ue]?z._allTables[ue].hook:ci(null,{creating:[le,Ve],reading:[Ft,lt],updating:[jt,Ve],deleting:[Mt,Ve]})})),this.Transaction=(ee=this,Ji(Cs.prototype,function(ue,ke,me,Se,Ce){var je=this;this.db=ee,this.mode=ue,this.storeNames=ke,this.schema=me,this.chromeTransactionDurability=Se,this.idbtrans=null,this.on=ci(this,"complete","error","abort"),this.parent=Ce||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new at(function(Te,Me){je._resolve=Te,je._reject=Me}),this._completion.then(function(){je.active=!1,je.on.complete.fire()},function(Te){var Me=je.active;return je.active=!1,je.on.error.fire(Te),je.parent?je.parent._reject(Te):Me&&je.idbtrans&&je.idbtrans.abort(),fr(Te)})})),this.Version=(ce=this,Ji(Aa.prototype,function(ue){this.db=ce,this._cfg={version:ue,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ve=this,Ji(Ls.prototype,function(ue,ke,me){if(this.db=ve,this._ctx={table:ue,index:ke===":id"?null:ke,or:me},this._cmp=this._ascending=Jt,this._descending=function(Se,Ce){return Jt(Ce,Se)},this._max=function(Se,Ce){return 0<Jt(Se,Ce)?Se:Ce},this._min=function(Se,Ce){return Jt(Se,Ce)<0?Se:Ce},this._IDBKeyRange=ve._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(ue){0<ue.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(ue){!ue.newVersion||ue.newVersion<ue.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(ue.oldVersion/10))}),this._maxKey=ra(f.IDBKeyRange),this._createTransaction=function(ue,ke,me,Se){return new v.Transaction(ue,ke,me,v._options.chromeTransactionDurability,Se)},this._fireOnBlocked=function(ue){v.on("blocked").fire(ue),zn.filter(function(ke){return ke.name===v.name&&ke!==v&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(ue)})},this.use(Fr),this.use(ds),this.use(Gn),this.use(Kt),this.use(xr);var _e=new Proxy(this,{get:function(ue,ke,me){if(ke==="_vip")return!0;if(ke==="table")return function(Ce){return qi(v.table(Ce),_e)};var Se=Reflect.get(ue,ke,me);return Se instanceof ts?qi(Se,_e):ke==="tables"?Se.map(function(Ce){return qi(Ce,_e)}):ke==="_createTransaction"?function(){return qi(Se.apply(this,arguments),_e)}:Se}});this.vip=_e,A.forEach(function(ue){return ue(v)})}var mi,Xr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fa=(ua.prototype.subscribe=function(l,f,v){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:f,complete:v})},ua.prototype[Xr]=function(){return this},ua);function ua(l){this._subscribe=l}try{mi={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{mi={indexedDB:null,IDBKeyRange:null}}function hn(l){var f,v=!1,A=new Fa(function(F){var z=Oe(l),ee,ce=!1,ve={},Ne={},_e={get closed(){return ce},unsubscribe:function(){ce||(ce=!0,ee&&ee.abort(),ue&&Kn.storagemutated.unsubscribe(me))}};F.start&&F.start(_e);var ue=!1,ke=function(){return ki(Se)},me=function(Ce){$n(ve,Ce),ca(Ne,ve)&&ke()},Se=function(){var Ce,je,Te;!ce&&mi.indexedDB&&(ve={},Ce={},ee&&ee.abort(),ee=new AbortController,Te=function(Me){var Re=gt();try{z&&nn();var Ke=Wr(l,Me);return Ke=z?Ke.finally(Kr):Ke}finally{Re&&Dt()}}(je={subscr:Ce,signal:ee.signal,requery:ke,querier:l,trans:null}),Promise.resolve(Te).then(function(Me){v=!0,f=Me,ce||je.signal.aborted||(ve={},function(Re){for(var Ke in Re)if(b(Re,Ke))return;return 1}(Ne=Ce)||ue||(Kn(ea,me),ue=!0),ki(function(){return!ce&&F.next&&F.next(Me)}))},function(Me){v=!1,["DatabaseClosedError","AbortError"].includes(Me==null?void 0:Me.name)||ce||ki(function(){ce||F.error&&F.error(Me)})}))};return setTimeout(ke,0),_e});return A.hasValue=function(){return v},A.getValue=function(){return f},A}var gi=bn;function da(l){var f=Mr;try{Mr=!0,Kn.storagemutated.fire(l),Fe(l,!0)}finally{Mr=f}}w(gi,r(r({},et),{delete:function(l){return new gi(l,{addons:[]}).delete()},exists:function(l){return new gi(l,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return f=gi.dependencies,v=f.indexedDB,f=f.IDBKeyRange,(la(v)?Promise.resolve(v.databases()).then(function(A){return A.map(function(F){return F.name}).filter(function(F){return F!==Gi})}):oa(v,f).toCollection().primaryKeys()).then(l)}catch{return fr(new fe.MissingAPI)}var f,v},defineClass:function(){return function(l){d(this,l)}},ignoreTransaction:function(l){return ut.trans?Dn(ut.transless,l):l()},vip:Pa,async:function(l){return function(){try{var f=vt(l.apply(this,arguments));return f&&typeof f.then=="function"?f:at.resolve(f)}catch(v){return fr(v)}}},spawn:function(l,f,v){try{var A=vt(l.apply(v,f||[]));return A&&typeof A.then=="function"?A:at.resolve(A)}catch(F){return fr(F)}},currentTransaction:{get:function(){return ut.trans||null}},waitFor:function(l,f){return f=at.resolve(typeof l=="function"?gi.ignoreTransaction(l):l).timeout(f||6e4),ut.trans?ut.trans.waitFor(f):f},Promise:at,debug:{get:function(){return de},set:function(l){we(l)}},derive:_,extend:d,props:w,override:k,Events:ci,on:Kn,liveQuery:hn,extendObservabilitySet:$n,getByKeyPath:Z,setByKeyPath:R,delByKeyPath:function(l,f){typeof f=="string"?R(l,f,void 0):"length"in f&&[].map.call(f,function(v){R(l,v,void 0)})},shallowClone:O,deepClone:q,getObjectDiff:zt,cmp:Jt,asap:K,minKey:-1/0,addons:[],connections:zn,errnames:ye,dependencies:mi,cache:p,semVer:"4.0.11",version:"4.0.11".split(".").map(function(l){return parseInt(l)}).reduce(function(l,f,v){return l+f/Math.pow(10,2*v)})})),gi.maxKey=ra(gi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kn(ea,function(l){Mr||(l=new CustomEvent(In,{detail:l}),Mr=!0,dispatchEvent(l),Mr=!1)}),addEventListener(In,function(l){l=l.detail,Mr||da(l)}));var yi,Mr=!1,ha=function(){};return typeof BroadcastChannel<"u"&&((ha=function(){(yi=new BroadcastChannel(In)).onmessage=function(l){return l.data&&da(l.data)}})(),typeof yi.unref=="function"&&yi.unref(),Kn(ea,function(l){Mr||yi.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!bn.disableBfCache&&l.persisted){de&&console.debug("Dexie: handling persisted pagehide"),yi!=null&&yi.close();for(var f=0,v=zn;f<v.length;f++)v[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!bn.disableBfCache&&l.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),ha(),da({all:new kr(-1/0,[[]])}))})),at.rejectionMapper=function(l,f){return!l||l instanceof D||l instanceof TypeError||l instanceof SyntaxError||!l.name||!Je[l.name]?l:(f=new Je[l.name](f||l.message,l),"stack"in l&&P(f,"stack",{get:function(){return this.inner.stack}}),f)},we(de),r(bn,Object.freeze({__proto__:null,Dexie:bn,liveQuery:hn,Entity:Qi,cmp:Jt,PropModification:Xi,replacePrefix:function(l,f){return new Xi({replacePrefix:[l,f]})},add:function(l){return new Xi({add:l})},remove:function(l){return new Xi({remove:l})},default:bn,RangeSet:kr,mergeRanges:Mi,rangesOverlap:Is}),{default:bn}),bn})})(Ld);var Ep=Ld.exports;const lc=Sc(Ep),ju=Symbol.for("Dexie"),cc=globalThis[ju]||(globalThis[ju]=lc);if(lc.semVer!==cc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${lc.semVer} and ${cc.semVer}`);class Dp extends cc{constructor(){super("POSDatabase");cn(this,"users");cn(this,"products");cn(this,"categories");cn(this,"transactions");cn(this,"activityLogs");cn(this,"settings");this.version(1).stores({users:"&id, username, email, role, isActive, createdAt",products:"&id, name, sku, categoryId, isActive, quantity, price, wholesalePrice, wholesaleMinQuantity, createdAt",categories:"&id, name, createdAt",transactions:"&id, transactionNumber, type, status, cashierId, createdAt, total",activityLogs:"&id, userId, action, entity, entityId, createdAt",settings:"&id"}),this.products.hook("creating",function(t,r,a){r.createdAt=new Date,r.updatedAt=new Date}),this.products.hook("updating",function(t,r,a,i){t.updatedAt=new Date}),this.categories.hook("creating",function(t,r,a){r.createdAt=new Date,r.updatedAt=new Date}),this.categories.hook("updating",function(t,r,a,i){t.updatedAt=new Date}),this.users.hook("creating",function(t,r,a){r.createdAt=new Date,r.updatedAt=new Date}),this.users.hook("updating",function(t,r,a,i){t.updatedAt=new Date}),this.transactions.hook("creating",function(t,r,a){r.createdAt=new Date,r.updatedAt=new Date}),this.activityLogs.hook("creating",function(t,r,a){r.createdAt=new Date})}}const He=new Dp,ya=n=>({...n,name:n.name||"",description:n.description||"",sku:n.sku||"",barcode:n.barcode||"",categoryId:n.categoryId||"",imageUrl:n.imageUrl||"",price:Number(n.price)||0,cost:Number(n.cost)||0,quantity:Number(n.quantity)||0,minStockLevel:Number(n.minStockLevel)||0,wholesalePrice:n.wholesalePrice?Number(n.wholesalePrice):void 0,wholesaleMinQuantity:n.wholesaleMinQuantity?Number(n.wholesaleMinQuantity):void 0,isActive:!!n.isActive,createdAt:n.createdAt instanceof Date?n.createdAt:new Date(n.createdAt),updatedAt:n.updatedAt instanceof Date?n.updatedAt:new Date(n.updatedAt)});class _i{static async getAll(){return await He.users.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.users.get(e)}static async getByUsername(e){return await He.users.where("username").equals(e).first()}static async create(e){return await He.users.add(e)}static async update(e,t){return await He.users.update(e,t)}static async delete(e){await He.users.delete(e)}static async getActiveUsers(){return await He.users.where("isActive").equals(1).toArray()}}class Ha{static async getAll(){return(await He.products.orderBy("name").toArray()).map(ya)}static async getById(e){const t=await He.products.get(e);return t?ya(t):void 0}static async getBySKU(e){const r=(await He.products.toArray()).find(a=>a.sku.toLowerCase()===e.toLowerCase());return r?ya(r):void 0}static async create(e){return await He.products.add(e)}static async update(e,t){return await He.products.update(e,t)}static async delete(e){await He.products.delete(e)}static async getByCategory(e){return(await He.products.where("categoryId").equals(e).toArray()).map(ya)}static async getActiveProducts(){return(await He.products.where("isActive").equals(1).toArray()).map(ya)}static async getLowStockProducts(e){return(await He.products.toArray()).map(ya).filter(r=>r.quantity<=(e||r.minStockLevel))}static async getOutOfStockProducts(){return(await He.products.where("quantity").equals(0).toArray()).map(ya)}static async updateStock(e,t){const r=await He.products.get(e);if(!r)throw new Error("Product not found");const a=ya(r),i=Math.max(0,a.quantity+t);return await He.products.update(e,{quantity:i})}static async searchProducts(e){const t=e.toLowerCase();return(await He.products.filter(a=>a.name.toLowerCase().includes(t)||a.sku.toLowerCase().includes(t)||(a.description?a.description.toLowerCase().includes(t):!1)).toArray()).map(ya)}}class ys{static async getAll(){return await He.categories.orderBy("name").toArray()}static async getById(e){return await He.categories.get(e)}static async create(e){return await He.categories.add(e)}static async update(e,t){return await He.categories.update(e,t)}static async delete(e){const t=await He.products.where("categoryId").equals(e).count();if(t>0)throw new Error(`Cannot delete category. ${t} products are using this category.`);await He.categories.delete(e)}static async getCategoryWithProductCount(){const e=await He.categories.toArray();return await Promise.all(e.map(async r=>{const a=await He.products.where("categoryId").equals(r.id).count();return{...r,productCount:a}}))}}class $s{static async getAll(){return await He.transactions.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.transactions.get(e)}static async create(e){return await He.transactions.add(e)}static async update(e,t){return await He.transactions.update(e,t)}static async delete(e){await He.transactions.delete(e)}static async getByDateRange(e,t){return await He.transactions.where("createdAt").between(e,t).reverse().toArray()}static async getByCashier(e){return await He.transactions.where("cashierId").equals(e).reverse().toArray()}static async getByType(e){return await He.transactions.where("type").equals(e).reverse().toArray()}static async getTodayTransactions(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);return await this.getByDateRange(t,r)}static async getSalesStats(e,t){const r=await this.getByDateRange(e,t),a=r.filter(i=>i.type==="sale"&&i.status==="completed");return{totalSales:a.reduce((i,c)=>i+c.total,0),totalTransactions:a.length,averageTransaction:a.length>0?a.reduce((i,c)=>i+c.total,0)/a.length:0,totalRefunds:r.filter(i=>i.type==="refund").reduce((i,c)=>i+c.total,0)}}}class wo{static async getAll(){return await He.activityLogs.orderBy("createdAt").reverse().toArray()}static async create(e){return await He.activityLogs.add(e)}static async getByUser(e){return await He.activityLogs.where("userId").equals(e).reverse().toArray()}static async getByEntity(e,t){let r=He.activityLogs.where("entity").equals(e);return t&&(r=r.and(a=>a.entityId===t)),await r.reverse().toArray()}static async getRecent(e=100){return await He.activityLogs.orderBy("createdAt").reverse().limit(e).toArray()}static async cleanup(e=30){const t=new Date;return t.setDate(t.getDate()-e),await He.activityLogs.where("createdAt").below(t).delete()}}class xa{static async get(){return await He.settings.orderBy("id").first()}static async create(e){return await He.settings.add(e)}static async update(e){const t=await this.get();if(!t)throw new Error("Settings not found");return await He.settings.update(t.id,e)}static async getOrCreate(){let e=await this.get();if(!e){const t={id:"default",currency:"PHP",storeName:"My Store",autoBackup:!1,backupFrequency:"daily",lowStockAlert:!0,lowStockThreshold:5,printerAutoPrintEnabled:!1,printerPaperWidth:58,printerEncoding:"utf8",printerCutType:"partial",printerCashdrawerEnabled:!1,createdAt:new Date,updatedAt:new Date};await this.create(t),e=t}return e}static dbToAppFormat(e){return{currency:e.currency,storeName:e.storeName,printerSettings:{selectedPrinterId:e.printerSelectedId,selectedPrinterName:e.printerSelectedName,autoPrintEnabled:e.printerAutoPrintEnabled,paperWidth:e.printerPaperWidth,encoding:e.printerEncoding,cutType:e.printerCutType,cashdrawerEnabled:e.printerCashdrawerEnabled}}}static appToDbFormat(e){const t={};if(e.currency!==void 0&&(t.currency=e.currency),e.storeName!==void 0&&(t.storeName=e.storeName),e.printerSettings){const r=e.printerSettings;r.selectedPrinterId!==void 0&&(t.printerSelectedId=r.selectedPrinterId),r.selectedPrinterName!==void 0&&(t.printerSelectedName=r.selectedPrinterName),r.autoPrintEnabled!==void 0&&(t.printerAutoPrintEnabled=r.autoPrintEnabled),r.paperWidth!==void 0&&(t.printerPaperWidth=r.paperWidth),r.encoding!==void 0&&(t.printerEncoding=r.encoding),r.cutType!==void 0&&(t.printerCutType=r.cutType),r.cashdrawerEnabled!==void 0&&(t.printerCashdrawerEnabled=r.cashdrawerEnabled)}return t.updatedAt=new Date,t}}class Gs{static async initialize(){try{await He.open(),console.log("Database initialized successfully"),await xa.getOrCreate()}catch(e){throw console.error("Failed to initialize database:",e),e}}static async backup(){const e={users:await _i.getAll(),products:await Ha.getAll(),categories:await ys.getAll(),transactions:await $s.getAll(),activityLogs:await wo.getAll(),settings:await xa.get(),exportDate:new Date().toISOString(),version:"1.0"};return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}static async restore(e){try{const t=JSON.parse(e);await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear(),await He.settings.clear(),t.users&&await He.users.bulkAdd(t.users),t.products&&await He.products.bulkAdd(t.products),t.categories&&await He.categories.bulkAdd(t.categories),t.transactions&&await He.transactions.bulkAdd(t.transactions),t.activityLogs&&await He.activityLogs.bulkAdd(t.activityLogs),t.settings&&await He.settings.add(t.settings)}),console.log("Database restored successfully")}catch(t){throw console.error("Failed to restore database:",t),new Error("Invalid backup file or restore failed")}}static async clearAll(){await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear()}),await xa.getOrCreate(),localStorage.setItem("pos-data-cleared-intentionally","true"),console.log("All data cleared successfully. Sample data will not be re-initialized on reload.")}static wasDataClearedIntentionally(){return localStorage.getItem("pos-data-cleared-intentionally")==="true"}static clearIntentionalClearingFlag(){localStorage.removeItem("pos-data-cleared-intentionally")}static async getStats(){return{users:await He.users.count(),products:await He.products.count(),categories:await He.categories.count(),transactions:await He.transactions.count(),activityLogs:await He.activityLogs.count()}}}const Ip=Object.freeze(Object.defineProperty({__proto__:null,ActivityLogService:wo,CategoryService:ys,DatabaseService:Gs,ProductService:Ha,SettingsService:xa,TransactionService:$s,UserService:_i},Symbol.toStringTag,{value:"Module"})),Hl=(n,e)=>n.wholesalePrice&&n.wholesaleMinQuantity&&e>=n.wholesaleMinQuantity?n.wholesalePrice:n.price,$o=(n,e=0)=>{const t=n.reduce((i,c)=>i+c.totalPrice,0),r=t*e/100,a=t-r;return{subtotal:t,tax:0,discount:r,total:a}},Fn=_p()(Fp((n,e)=>({auth:{user:null,token:null,isAuthenticated:!1},login:(t,r)=>{n({auth:{user:t,token:r,isAuthenticated:!0}}),e().addActivityLog({userId:t.id,action:"LOGIN",entity:"USER",entityId:t.id,details:{username:t.username}})},logout:()=>{const t=e().auth.user;t&&e().addActivityLog({userId:t.id,action:"LOGOUT",entity:"USER",entityId:t.id,details:{username:t.username}}),n({auth:{user:null,token:null,isAuthenticated:!1}}),n({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},updateUser:t=>{n(r=>({auth:{...r.auth,user:t}}))},cart:{items:[],subtotal:0,tax:0,discount:0,total:0},addToCart:(t,r=1)=>{n(a=>{const i=a.cart.items.find(d=>d.product.id===t.id);let c;if(i){const d=i.quantity+r,y=Hl(t,d);c=a.cart.items.map(x=>x.product.id===t.id?{...x,quantity:d,unitPrice:y,totalPrice:d*y}:x)}else{const d=Hl(t,r),y={product:t,quantity:r,unitPrice:d,totalPrice:r*d};c=[...a.cart.items,y]}const u=$o(c,a.cart.discount);return{cart:{items:c,...u}}})},removeFromCart:t=>{n(r=>{const a=r.cart.items.filter(c=>c.product.id!==t),i=$o(a,r.cart.discount);return{cart:{items:a,...i}}})},updateCartItem:(t,r)=>{n(a=>{if(r<=0)return e().removeFromCart(t),a;const i=a.cart.items.map(u=>{if(u.product.id===t){const d=Hl(u.product,r);return{...u,quantity:r,unitPrice:d,totalPrice:r*d}}return u}),c=$o(i,a.cart.discount);return{cart:{items:i,...c}}})},clearCart:()=>{n({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},applyDiscount:t=>{n(r=>{const a=$o(r.cart.items,t);return{cart:{...r.cart,...a}}})},products:[],categories:[],loadProducts:async()=>{try{const t=await Ha.getAll();n({products:t})}catch(t){console.error("Failed to load products:",t),n({error:"Failed to load products"})}},loadCategories:async()=>{try{const t=await ys.getAll();n({categories:t})}catch(t){console.error("Failed to load categories:",t),n({error:"Failed to load categories"})}},setProducts:t=>n({products:t}),setCategories:t=>n({categories:t}),addProduct:async t=>{try{await Ha.create(t),await e().loadProducts();const r=e().auth.user;r&&await e().addActivityLog({userId:r.id,action:"CREATE",entity:"PRODUCT",entityId:t.id,details:{name:t.name,sku:t.sku}})}catch(r){throw console.error("Failed to add product:",r),r}},updateProduct:async(t,r)=>{try{await Ha.update(t,r),await e().loadProducts();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"PRODUCT",entityId:t,details:r})}catch(a){throw console.error("Failed to update product:",a),a}},deleteProduct:async t=>{try{const r=e().products.find(i=>i.id===t);await Ha.delete(t),await e().loadProducts();const a=e().auth.user;a&&r&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"PRODUCT",entityId:t,details:{name:r.name,sku:r.sku}})}catch(r){throw console.error("Failed to delete product:",r),r}},updateStock:async(t,r)=>{try{await Ha.updateStock(t,r),await e().loadProducts()}catch(a){throw console.error("Failed to update stock:",a),a}},addCategory:async t=>{try{await ys.create(t),await e().loadCategories();const r=e().auth.user;r&&await e().addActivityLog({userId:r.id,action:"CREATE",entity:"CATEGORY",entityId:t.id,details:{name:t.name}})}catch(r){throw console.error("Failed to add category:",r),r}},updateCategory:async(t,r)=>{try{await ys.update(t,r),await e().loadCategories();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"CATEGORY",entityId:t,details:r})}catch(a){throw console.error("Failed to update category:",a),a}},deleteCategory:async t=>{try{const r=e().categories.find(i=>i.id===t);await ys.delete(t),await e().loadCategories();const a=e().auth.user;a&&r&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"CATEGORY",entityId:t,details:{name:r.name}})}catch(r){throw console.error("Failed to delete category:",r),r}},transactions:[],loadTransactions:async()=>{try{const t=await $s.getAll();n({transactions:t})}catch(t){console.error("Failed to load transactions:",t),n({error:"Failed to load transactions"})}},setTransactions:t=>n({transactions:t}),addTransaction:async t=>{try{await $s.create(t),await e().loadTransactions();for(const a of t.items)t.type==="sale"?await e().updateStock(a.productId,-a.quantity):t.type==="refund"&&await e().updateStock(a.productId,a.quantity);const r=e().auth.user;r&&await e().addActivityLog({userId:r.id,action:"CREATE",entity:"TRANSACTION",entityId:t.id,details:{type:t.type,total:t.total,itemCount:t.items.length}})}catch(r){throw console.error("Failed to add transaction:",r),r}},updateTransaction:async(t,r)=>{try{await $s.update(t,r),await e().loadTransactions()}catch(a){throw console.error("Failed to update transaction:",a),a}},users:[],loadUsers:async()=>{try{const t=await _i.getAll();n({users:t})}catch(t){console.error("Failed to load users:",t),n({error:"Failed to load users"})}},setUsers:t=>n({users:t}),addUser:async t=>{try{await _i.create(t),await e().loadUsers()}catch(r){throw console.error("Failed to add user:",r),r}},updateUserData:async(t,r)=>{try{await _i.update(t,r),await e().loadUsers()}catch(a){throw console.error("Failed to update user:",a),a}},deleteUser:async t=>{try{await _i.delete(t),await e().loadUsers()}catch(r){throw console.error("Failed to delete user:",r),r}},activityLogs:[],loadActivityLogs:async()=>{try{const t=await wo.getAll();n({activityLogs:t})}catch(t){console.error("Failed to load activity logs:",t),n({error:"Failed to load activity logs"})}},addActivityLog:async t=>{try{const r={...t,id:Date.now().toString(),createdAt:new Date};await wo.create(r)}catch(r){console.error("Failed to add activity log:",r)}},loading:!1,error:null,setLoading:t=>n({loading:t}),setError:t=>n({error:t}),settings:{currency:"PHP",storeName:"My Store",printerSettings:{autoPrintEnabled:!1,paperWidth:58,encoding:"utf8",cutType:"partial",cashdrawerEnabled:!1}},loadSettings:async()=>{try{const t=await xa.getOrCreate(),r=xa.dbToAppFormat(t);n({settings:r})}catch(t){console.error("Failed to load settings:",t),n({error:"Failed to load settings"})}},updateSettings:async t=>{try{const r=xa.appToDbFormat(t);await xa.update(r),await e().loadSettings()}catch(r){throw console.error("Failed to update settings:",r),r}},printerStatus:{connected:!1,printing:!1},availablePrinters:[],connectedPrinter:null,setPrinterStatus:t=>n({printerStatus:t}),setAvailablePrinters:t=>n({availablePrinters:t}),setConnectedPrinter:t=>n({connectedPrinter:t}),scanForPrinters:async()=>{try{const{BluetoothPrinterService:t}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url),a=await t.getInstance().scanForPrinters();return e().setAvailablePrinters(a),a}catch(t){throw console.error("Failed to scan for printers:",t),t}},connectToPrinter:async t=>{try{const{BluetoothPrinterService:r}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url),a=r.getInstance();a.onStatusChange(i=>{e().setPrinterStatus(i)}),await a.connectToPrinter(t),e().setConnectedPrinter(t),await e().updatePrinterSettings({selectedPrinterId:t.id,selectedPrinterName:t.name})}catch(r){throw console.error("Failed to connect to printer:",r),r}},disconnectPrinter:async()=>{try{const{BluetoothPrinterService:t}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url);await t.getInstance().disconnect(),e().setConnectedPrinter(null)}catch(t){throw console.error("Failed to disconnect printer:",t),t}},testPrint:async()=>{try{const{BluetoothPrinterService:t}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url);await t.getInstance().testPrint()}catch(t){throw console.error("Test print failed:",t),t}},updatePrinterSettings:async t=>{try{const a={...e().settings.printerSettings,...t};await e().updateSettings({printerSettings:a})}catch(r){throw console.error("Failed to update printer settings:",r),r}},initializeFromDatabase:async()=>{n({loading:!0,error:null});try{await Promise.all([e().loadSettings(),e().loadCategories(),e().loadProducts(),e().loadUsers(),e().loadTransactions()]),console.log("Store initialized from database successfully")}catch(t){console.error("Failed to initialize store from database:",t),n({error:"Failed to initialize application data"})}finally{n({loading:!1})}}}),{name:"pos-auth-storage",partialize:n=>({auth:n.auth})})),Op=()=>s.jsx("footer",{className:"bg-white border-t border-gray-200 py-4 px-6",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("p",{className:"text-sm text-gray-500",children:["Made with  by"," ",s.jsx("span",{className:"font-semibold text-gray-700",children:"AOG Tech"})]})})}),Wl={},Tp={}.REACT_APP_LICENSE_SERVER_URL||"https://license-generator-smoky.vercel.app",Mp={}.NODE_ENV||{}.VITE_APP_ENV||"development",Ln={SERVER_URL:Tp,CACHE_DURATION:5*60*1e3,CHECK_INTERVAL:10*60*1e3,REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:2e3,ENABLE_DEBUG_LOGS:Mp==="development",ALLOW_OFFLINE_MODE:!0,OFFLINE_GRACE_PERIOD:30*24*60*60*1e3},Rp={CHECK_STATUS:"/api/licenses/:licenseKey/status",SUSPEND:"/api/licenses/:licenseKey/suspend",REACTIVATE:"/api/licenses/:licenseKey/reactivate",VALIDATE:"/api/licenses/:licenseKey/validate"};class qn{static async makeRequest(e,t={}){const r=new AbortController,a=setTimeout(()=>r.abort(),Ln.REQUEST_TIMEOUT);try{const i=await fetch(e,{...t,signal:r.signal});return clearTimeout(a),i}catch(i){throw clearTimeout(a),i}}static async checkLicenseWithServer(e){try{const t=`${Ln.SERVER_URL}${Rp.CHECK_STATUS.replace(":licenseKey",encodeURIComponent(e))}`;Ln.ENABLE_DEBUG_LOGS&&console.log("Checking license with server:",t);const r=await this.makeRequest(t);if(!r.ok){const i=await r.json().catch(()=>({}));return Ln.ENABLE_DEBUG_LOGS&&console.warn("License server returned error:",i),{valid:!1,error:i.error||`Server error: ${r.status}`,reason:i.error||"Server validation failed"}}const a=await r.json();return Ln.ENABLE_DEBUG_LOGS&&console.log("License server response:",a),{valid:a.valid,reason:a.reason,details:a.details,info:a.license?{licenseKey:a.licenseKey,productId:this.PRODUCT_ID,customerEmail:a.license.customer.email,customerName:a.license.customer.name,expiryDate:new Date(a.license.expiresAt),maxActivations:a.license.maxActivations,features:a.license.features||["basic"],status:a.status,suspendedAt:a.license.suspendedAt?new Date(a.license.suspendedAt):void 0,suspendedReason:a.license.suspendedReason}:void 0}}catch(t){console.error("License server validation failed:",t);{const r=this.getLicenseInfo();if(r&&r.activatedAt){const a=Date.now()-r.activatedAt.getTime(),i=r.lastChecked?Date.now()-new Date(r.lastChecked).getTime():0;if(r.expiryDate&&r.expiryDate.getTime()>Date.now()&&(a<Ln.OFFLINE_GRACE_PERIOD||i<Ln.OFFLINE_GRACE_PERIOD))return console.warn("Using offline mode due to server unreachability - license remains valid"),{valid:!0,info:r,reason:"Offline mode - server unreachable but license cached and valid"};console.warn("Offline grace period exceeded or license expired locally")}else console.warn("No valid cached license data found for offline mode")}return{valid:!1,error:"Cannot reach license server for validation",reason:"Server unreachable and no valid offline license"}}}static async getMachineId(){var e;try{const t=document.createElement("canvas"),r=t.getContext("2d");if(r){r.textBaseline="top",r.font="14px Arial",r.fillText("Hardware fingerprint",2,2);const b=[t.toDataURL(),navigator.userAgent,navigator.platform,screen.width+"x"+screen.height,new Date().getTimezoneOffset().toString(),navigator.language,((e=navigator.hardwareConcurrency)==null?void 0:e.toString())||"0"].join("|"),m=new TextEncoder().encode(b),P=await Wl.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(P)).map(L=>L.toString(16).padStart(2,"0")).join("").substring(0,32)}const a=navigator.userAgent+navigator.platform,c=new TextEncoder().encode(a),u=await Wl.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(u)).map(x=>x.toString(16).padStart(2,"0")).join("").substring(0,32)}catch(t){return console.error("Failed to get machine ID:",t),"FALLBACK-MACHINE-ID"}}static generateLicenseKey(e,t,r,a=["basic"],i=1){const c={email:e,name:t,productId:this.PRODUCT_ID,expiry:r.getTime(),features:a,maxActivations:i,generated:Date.now(),version:"1.0"},u=JSON.stringify(c),d=Wl.createHmac("sha256",this.SECRET_KEY).update(u).digest("hex");return(Buffer.from(JSON.stringify({data:c,signature:d})).toString("base64").match(/.{1,5}/g)||[]).slice(0,5).join("-").toUpperCase()}static async validateLicenseKey(e){try{if(!e||typeof e!="string")return{valid:!1,error:"Invalid license key format"};const t=e.replace(/-/g,"").toUpperCase();if(t.length!==25)return{valid:!1,error:"Invalid license key length"};if(!/^[0-9A-F]+$/i.test(t))return{valid:!1,error:"Invalid license key format"};const r=await this.checkLicenseWithServer(e);return r.valid||localStorage.removeItem(this.STORAGE_KEY),r}catch(t){return console.error("License validation error:",t),{valid:!1,error:"Failed to validate license key"}}}static async activateLicense(e){const t=await this.validateLicenseKey(e);if(!t.valid)return{success:!1,error:t.error||t.reason};try{const r=await this.getMachineId(),a=localStorage.getItem(this.STORAGE_KEY);if(a)try{const c=JSON.parse(a);if(c.machineId===r&&c.licenseKey===e){const u=await this.validateLicenseKey(e);if(u.valid){const d={...c,lastChecked:new Date().toISOString()};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(d)),{success:!0}}else return localStorage.removeItem(this.STORAGE_KEY),{success:!1,error:u.reason||"License is no longer valid"}}}catch{}const i={...t.info,machineId:r,activatedAt:new Date().toISOString(),isValid:!0,lastChecked:new Date().toISOString()};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),{success:!0}}catch(r){return console.error("License activation error:",r),{success:!1,error:"Failed to activate license on this machine"}}}static async isLicensed(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return!1;const t=JSON.parse(e),r=await this.getMachineId();if(t.machineId!==r)return console.warn("License machine ID mismatch"),localStorage.removeItem(this.STORAGE_KEY),!1;const a=Date.now();if(this.lastLicenseCheck&&a-this.lastLicenseCheck.timestamp<Ln.CACHE_DURATION)return this.lastLicenseCheck.result;try{const i=await this.validateLicenseKey(t.licenseKey),c=i.valid;if(this.lastLicenseCheck={timestamp:a,result:c},c){if(i.info){const u={...t,...i.info,lastChecked:new Date().toISOString()};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(u))}return!0}else return Ln.ALLOW_OFFLINE_MODE,console.warn("License validation failed:",i.reason||i.error),!1}catch(i){if(console.warn("Network error during license validation:",i),Ln.ALLOW_OFFLINE_MODE){const c=this.getLicenseInfo();if(c&&c.activatedAt&&c.expiryDate){const u=Date.now()-c.activatedAt.getTime(),d=c.lastChecked?Date.now()-new Date(c.lastChecked).getTime():0;if(c.expiryDate.getTime()>Date.now()&&(u<Ln.OFFLINE_GRACE_PERIOD||d<Ln.OFFLINE_GRACE_PERIOD))return console.log("Operating in offline mode - cached license is valid"),this.lastLicenseCheck={timestamp:a,result:!0},!0;console.warn("Cached license does not meet offline criteria (expired or grace period exceeded)")}}return!1}}catch(e){return console.error("License check error:",e),!1}}static getLicenseInfo(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;const t=JSON.parse(e);return{...t,expiryDate:new Date(t.expiryDate),activatedAt:t.activatedAt?new Date(t.activatedAt):void 0,suspendedAt:t.suspendedAt?new Date(t.suspendedAt):void 0}}catch(e){return console.error("Failed to get license info:",e),null}}static deactivateLicense(){localStorage.removeItem(this.STORAGE_KEY),this.lastLicenseCheck=null}static hasFeature(e){const t=this.getLicenseInfo();return t?t.features.includes(e)||t.features.includes("all"):!1}static getDaysUntilExpiry(){const e=this.getLicenseInfo();if(!e)return null;const t=new Date,a=e.expiryDate.getTime()-t.getTime();return Math.ceil(a/(1e3*60*60*24))}static isExpiringSoon(){const e=this.getDaysUntilExpiry();return e!==null&&e<=30&&e>0}static formatLicenseKey(e){return e.replace(/[^A-Za-z0-9]/g,"").toUpperCase().replace(/(.{5})/g,"$1-").slice(0,-1)}static async refreshLicense(){return this.lastLicenseCheck=null,await this.isLicensed()}static getLicenseStatus(){const e=this.getLicenseInfo();if(!e)return{isValid:!1};const t=this.getDaysUntilExpiry(),r=Date.now();let a=!1,i;if(e.activatedAt){const c=r-e.activatedAt.getTime(),u=e.lastChecked?r-new Date(e.lastChecked).getTime():c,d=Ln.OFFLINE_GRACE_PERIOD-Math.min(c,u);a=u>Ln.CACHE_DURATION&&d>0,i={timeSinceActivation:c,timeSinceLastCheck:u,gracePeriodRemaining:Math.max(0,d)}}return{isValid:e.isValid!==!1,status:e.status,suspendedReason:e.suspendedReason,expiryDays:t!==null?t:void 0,isOfflineMode:a,offlineInfo:i}}static isInOfflineMode(){return this.getLicenseStatus().isOfflineMode||!1}}cn(qn,"SECRET_KEY","AOG-TECH-POS-SYSTEM-2024-SECRET-KEY-CHANGE-IN-PRODUCTION"),cn(qn,"PRODUCT_ID","AOG-TECH-POS-SYSTEM-V1"),cn(qn,"STORAGE_KEY","pos_license_data"),cn(qn,"lastLicenseCheck",null);const qp=({className:n=""})=>{const[e,t]=Sr.useState(null),[r,a]=Sr.useState(!1);if(Sr.useEffect(()=>{const d=()=>{const x=qn.getLicenseStatus();t(x);const b=!x.isValid||x.status==="suspended"||x.isOfflineMode||x.expiryDays!==void 0&&x.expiryDays<=7;a(b)};d();const y=setInterval(d,60*1e3);return()=>clearInterval(y)},[]),!r||!e)return null;const i=d=>{const y=Math.floor(d/864e5),x=Math.floor(d%(24*60*60*1e3)/(60*60*1e3));return y>0?`${y} day${y!==1?"s":""} ${x} hour${x!==1?"s":""}`:x>0?`${x} hour${x!==1?"s":""}`:"less than 1 hour"},u=(()=>{if(!e.isValid)return{icon:s.jsx(Jh,{className:"h-5 w-5 text-red-500"}),title:"License Invalid",message:"Your license is not valid. System functionality may be restricted.",bgColor:"bg-red-50 border-red-200",textColor:"text-red-800"};if(e.status==="suspended")return{icon:s.jsx(bo,{className:"h-5 w-5 text-orange-500"}),title:"License Suspended",message:`Your license has been suspended. ${e.suspendedReason||"Please contact support."}`,bgColor:"bg-orange-50 border-orange-200",textColor:"text-orange-800"};if(e.isOfflineMode&&e.offlineInfo){const d=i(e.offlineInfo.gracePeriodRemaining);return{icon:s.jsx(ad,{className:"h-5 w-5 text-blue-500"}),title:"Operating in Offline Mode",message:`License validated offline. Valid for ${d} more. Connect to internet to refresh.`,bgColor:"bg-blue-50 border-blue-200",textColor:"text-blue-800"}}if(e.expiryDays!==void 0&&e.expiryDays<=7){const d=e.expiryDays===1?"day":"days";return{icon:s.jsx(Ks,{className:"h-5 w-5 text-yellow-500"}),title:"License Expiring Soon",message:`Your license expires in ${e.expiryDays} ${d}. Please renew to avoid service interruption.`,bgColor:"bg-yellow-50 border-yellow-200",textColor:"text-yellow-800"}}return null})();return u?s.jsx("div",{className:`${u.bgColor} border rounded-lg p-4 mb-4 ${n}`,children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:u.icon}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:`text-sm font-medium ${u.textColor}`,children:u.title}),s.jsx("p",{className:`text-sm mt-1 ${u.textColor}`,children:u.message})]}),s.jsx("div",{className:"ml-auto pl-3",children:s.jsx("div",{className:"-mx-1.5 -my-1.5",children:s.jsxs("button",{type:"button",className:`inline-flex rounded-md p-1.5 ${u.textColor} hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500`,onClick:()=>a(!1),children:[s.jsx("span",{className:"sr-only",children:"Dismiss"}),s.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}):null},Bp=({children:n})=>{var x,b,w;const e=Gh(),{auth:t,logout:r}=Fn(),[a,i]=ft.useState(!1),u=[{name:"Dashboard",href:"/dashboard",icon:ef,roles:["admin","manager"]},{name:"Sales",href:"/sales",icon:Ga,roles:["admin","manager","cashier"]},{name:"Inventory",href:"/inventory",icon:As,roles:["admin","manager"]},{name:"Reports",href:"/reports",icon:tf,roles:["admin","manager","cashier"]},{name:"Users",href:"/users",icon:rc,roles:["admin"]},{name:"Settings",href:"/settings",icon:sd,roles:["admin","manager"]}].filter(m=>{var P;return((P=t.user)==null?void 0:P.role)&&m.roles.includes(t.user.role)}),d=()=>{r()},y=m=>e.pathname===m;return s.jsxs("div",{className:"flex h-screen bg-gray-100",children:[a&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>i(!1),children:s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),s.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${a?"translate-x-0":"-translate-x-full"}
      `,children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"POS System"}),s.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!1),children:s.jsx(wa,{className:"h-6 w-6"})})]}),s.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:u.map(m=>{const P=y(m.href),_=m.icon;return s.jsxs(fs,{to:m.href,className:`
                  sidebar-nav group
                  ${P?"active":""}
                `,onClick:()=>i(!1),children:[s.jsx(_,{className:"mr-3 h-5 w-5"}),m.name]},m.name)})}),s.jsxs("div",{className:"border-t border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(jc,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(x=t.user)==null?void 0:x.firstName," ",(b=t.user)==null?void 0:b.lastName]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(w=t.user)==null?void 0:w.role})]})]}),s.jsxs("button",{onClick:d,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",children:[s.jsx(Xh,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:pl-0",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[s.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!0),children:s.jsx(Zh,{className:"h-6 w-6"})}),s.jsx("div",{className:"flex-1 lg:ml-0",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.pathname.replace("/","")||"Dashboard"})}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString()})})]})}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[s.jsx(qp,{}),n]}),s.jsx(Op,{})]})]})};var Po=n=>n.type==="checkbox",vs=n=>n instanceof Date,kn=n=>n==null;const Cd=n=>typeof n=="object";var Ur=n=>!kn(n)&&!Array.isArray(n)&&Cd(n)&&!vs(n),Up=n=>Ur(n)&&n.target?Po(n.target)?n.target.checked:n.target.value:n,zp=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Hp=(n,e)=>n.has(zp(e)),Wp=n=>{const e=n.constructor&&n.constructor.prototype;return Ur(e)&&e.hasOwnProperty("isPrototypeOf")},Lc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jn(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(Lc&&(n instanceof Blob||r))&&(t||Ur(n)))if(e=t?[]:{},!t&&!Wp(n))e=n;else for(const a in n)n.hasOwnProperty(a)&&(e[a]=jn(n[a]));else return n;return e}var bl=n=>Array.isArray(n)?n.filter(Boolean):[],Gr=n=>n===void 0,Lt=(n,e,t)=>{if(!e||!Ur(n))return t;const r=bl(e.split(/[,[\].]+?/)).reduce((a,i)=>kn(a)?a:a[i],n);return Gr(r)||r===n?Gr(n[e])?t:n[e]:r},zi=n=>typeof n=="boolean",Cc=n=>/^\w*$/.test(n),kd=n=>bl(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Nr=(n,e,t)=>{let r=-1;const a=Cc(e)?[e]:kd(e),i=a.length,c=i-1;for(;++r<i;){const u=a[r];let d=t;if(r!==c){const y=n[u];d=Ur(y)||Array.isArray(y)?y:isNaN(+a[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;n[u]=d,n=n[u]}};const Au={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Si={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},va={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ft.createContext(null);var Kp=(n,e,t,r=!0)=>{const a={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(a,i,{get:()=>{const c=i;return e._proxyFormState[c]!==Si.all&&(e._proxyFormState[c]=!r||Si.all),t&&(t[c]=!0),n[c]}});return a};const Vp=typeof window<"u"?Sr.useLayoutEffect:Sr.useEffect;var Hi=n=>typeof n=="string",$p=(n,e,t,r,a)=>Hi(n)?(r&&e.watch.add(n),Lt(t,n,a)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),Lt(t,i))):(r&&(e.watchAll=!0),t),Gp=(n,e,t,r,a)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:a||!0}}:{},ho=n=>Array.isArray(n)?n:[n],_u=()=>{let n=[];return{get observers(){return n},next:a=>{for(const i of n)i.next&&i.next(a)},subscribe:a=>(n.push(a),{unsubscribe:()=>{n=n.filter(i=>i!==a)}}),unsubscribe:()=>{n=[]}}},uc=n=>kn(n)||!Cd(n);function Wa(n,e){if(uc(n)||uc(e))return n===e;if(vs(n)&&vs(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const a of t){const i=n[a];if(!r.includes(a))return!1;if(a!=="ref"){const c=e[a];if(vs(i)&&vs(c)||Ur(i)&&Ur(c)||Array.isArray(i)&&Array.isArray(c)?!Wa(i,c):i!==c)return!1}}return!0}var Rn=n=>Ur(n)&&!Object.keys(n).length,kc=n=>n.type==="file",ji=n=>typeof n=="function",ul=n=>{if(!Lc)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Fd=n=>n.type==="select-multiple",Fc=n=>n.type==="radio",Yp=n=>Fc(n)||Po(n),Kl=n=>ul(n)&&n.isConnected;function Qp(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Gr(n)?r++:n[e[r++]];return n}function Jp(n){for(const e in n)if(n.hasOwnProperty(e)&&!Gr(n[e]))return!1;return!0}function en(n,e){const t=Array.isArray(e)?e:Cc(e)?[e]:kd(e),r=t.length===1?n:Qp(n,t),a=t.length-1,i=t[a];return r&&delete r[i],a!==0&&(Ur(r)&&Rn(r)||Array.isArray(r)&&Jp(r))&&en(n,t.slice(0,-1)),n}var Ed=n=>{for(const e in n)if(ji(n[e]))return!0;return!1};function dl(n,e={}){const t=Array.isArray(n);if(Ur(n)||t)for(const r in n)Array.isArray(n[r])||Ur(n[r])&&!Ed(n[r])?(e[r]=Array.isArray(n[r])?[]:{},dl(n[r],e[r])):kn(n[r])||(e[r]=!0);return e}function Dd(n,e,t){const r=Array.isArray(n);if(Ur(n)||r)for(const a in n)Array.isArray(n[a])||Ur(n[a])&&!Ed(n[a])?Gr(e)||uc(t[a])?t[a]=Array.isArray(n[a])?dl(n[a],[]):{...dl(n[a])}:Dd(n[a],kn(e)?{}:e[a],t[a]):t[a]=!Wa(n[a],e[a]);return t}var ao=(n,e)=>Dd(n,e,dl(e));const Pu={value:!1,isValid:!1},Lu={value:!0,isValid:!0};var Id=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Gr(n[0].attributes.value)?Gr(n[0].value)||n[0].value===""?Lu:{value:n[0].value,isValid:!0}:Lu:Pu}return Pu},Od=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Gr(n)?n:e?n===""?NaN:n&&+n:t&&Hi(n)?new Date(n):r?r(n):n;const Cu={isValid:!1,value:null};var Td=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Cu):Cu;function ku(n){const e=n.ref;return kc(e)?e.files:Fc(e)?Td(n.refs).value:Fd(e)?[...e.selectedOptions].map(({value:t})=>t):Po(e)?Id(n.refs).value:Od(Gr(e.value)?n.ref.value:e.value,n)}var Xp=(n,e,t,r)=>{const a={};for(const i of n){const c=Lt(e,i);c&&Nr(a,i,c._f)}return{criteriaMode:t,names:[...n],fields:a,shouldUseNativeValidation:r}},hl=n=>n instanceof RegExp,so=n=>Gr(n)?n:hl(n)?n.source:Ur(n)?hl(n.value)?n.value.source:n.value:n,Fu=n=>({isOnSubmit:!n||n===Si.onSubmit,isOnBlur:n===Si.onBlur,isOnChange:n===Si.onChange,isOnAll:n===Si.all,isOnTouch:n===Si.onTouched});const Eu="AsyncFunction";var Zp=n=>!!n&&!!n.validate&&!!(ji(n.validate)&&n.validate.constructor.name===Eu||Ur(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===Eu)),em=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),Du=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const fo=(n,e,t,r)=>{for(const a of t||Object.keys(n)){const i=Lt(n,a);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],a)&&!r)return!0;if(c.ref&&e(c.ref,c.name)&&!r)return!0;if(fo(u,e))break}else if(Ur(u)&&fo(u,e))break}}};function Iu(n,e,t){const r=Lt(n,t);if(r||Cc(t))return{error:r,name:t};const a=t.split(".");for(;a.length;){const i=a.join("."),c=Lt(e,i),u=Lt(n,i);if(c&&!Array.isArray(c)&&t!==i)return{name:t};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};a.pop()}return{name:t}}var tm=(n,e,t,r)=>{t(n);const{name:a,...i}=n;return Rn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!r||Si.all))},rm=(n,e,t)=>!n||!e||n===e||ho(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),nm=(n,e,t,r,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||n):(t?r.isOnBlur:a.isOnBlur)?!n:(t?r.isOnChange:a.isOnChange)?n:!0,im=(n,e)=>!bl(Lt(n,e)).length&&en(n,e),am=(n,e,t)=>{const r=ho(Lt(n,t));return Nr(r,"root",e[t]),Nr(n,t,r),n},tl=n=>Hi(n);function Ou(n,e,t="validate"){if(tl(n)||Array.isArray(n)&&n.every(tl)||zi(n)&&!n)return{type:t,message:tl(n)?n:"",ref:e}}var qs=n=>Ur(n)&&!hl(n)?n:{value:n,message:""},Tu=async(n,e,t,r,a,i)=>{const{ref:c,refs:u,required:d,maxLength:y,minLength:x,min:b,max:w,pattern:m,validate:P,name:_,valueAsNumber:E,mount:L}=n._f,j=Lt(t,_);if(!L||e.has(_))return{};const k=u?u[0]:c,B=N=>{a&&k.reportValidity&&(k.setCustomValidity(zi(N)?"":N||""),k.reportValidity())},K={},Z=Fc(c),R=Po(c),O=Z||R,X=(E||kc(c))&&Gr(c.value)&&Gr(j)||ul(c)&&c.value===""||j===""||Array.isArray(j)&&!j.length,oe=Gp.bind(null,_,r,K),C=(N,q,V,he=va.maxLength,Y=va.minLength)=>{const Q=N?q:V;K[_]={type:N?he:Y,message:Q,ref:c,...oe(N?he:Y,Q)}};if(i?!Array.isArray(j)||!j.length:d&&(!O&&(X||kn(j))||zi(j)&&!j||R&&!Id(u).isValid||Z&&!Td(u).isValid)){const{value:N,message:q}=tl(d)?{value:!!d,message:d}:qs(d);if(N&&(K[_]={type:va.required,message:q,ref:k,...oe(va.required,q)},!r))return B(q),K}if(!X&&(!kn(b)||!kn(w))){let N,q;const V=qs(w),he=qs(b);if(!kn(j)&&!isNaN(j)){const Y=c.valueAsNumber||j&&+j;kn(V.value)||(N=Y>V.value),kn(he.value)||(q=Y<he.value)}else{const Y=c.valueAsDate||new Date(j),Q=ge=>new Date(new Date().toDateString()+" "+ge),ne=c.type=="time",ie=c.type=="week";Hi(V.value)&&j&&(N=ne?Q(j)>Q(V.value):ie?j>V.value:Y>new Date(V.value)),Hi(he.value)&&j&&(q=ne?Q(j)<Q(he.value):ie?j<he.value:Y<new Date(he.value))}if((N||q)&&(C(!!N,V.message,he.message,va.max,va.min),!r))return B(K[_].message),K}if((y||x)&&!X&&(Hi(j)||i&&Array.isArray(j))){const N=qs(y),q=qs(x),V=!kn(N.value)&&j.length>+N.value,he=!kn(q.value)&&j.length<+q.value;if((V||he)&&(C(V,N.message,q.message),!r))return B(K[_].message),K}if(m&&!X&&Hi(j)){const{value:N,message:q}=qs(m);if(hl(N)&&!j.match(N)&&(K[_]={type:va.pattern,message:q,ref:c,...oe(va.pattern,q)},!r))return B(q),K}if(P){if(ji(P)){const N=await P(j,t),q=Ou(N,k);if(q&&(K[_]={...q,...oe(va.validate,q.message)},!r))return B(q.message),K}else if(Ur(P)){let N={};for(const q in P){if(!Rn(N)&&!r)break;const V=Ou(await P[q](j,t),k,q);V&&(N={...V,...oe(q,V.message)},B(V.message),r&&(K[_]=N))}if(!Rn(N)&&(K[_]={ref:k,...N},!r))return K}}return B(!0),K};const sm={mode:Si.onSubmit,reValidateMode:Si.onChange,shouldFocusError:!0};function om(n={}){let e={...sm,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ji(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let a=Ur(e.defaultValues)||Ur(e.values)?jn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:jn(a),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,y=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const w={array:_u(),state:_u()},m=e.criteriaMode===Si.all,P=J=>de=>{clearTimeout(y),y=setTimeout(J,de)},_=async J=>{if(!e.disabled&&(x.isValid||b.isValid||J)){const de=e.resolver?Rn((await R()).errors):await X(r,!0);de!==t.isValid&&w.state.next({isValid:de})}},E=(J,de)=>{!e.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((J||Array.from(u.mount)).forEach(we=>{we&&(de?Nr(t.validatingFields,we,de):en(t.validatingFields,we))}),w.state.next({validatingFields:t.validatingFields,isValidating:!Rn(t.validatingFields)}))},L=(J,de=[],we,Be,$e=!0,Ue=!0)=>{if(Be&&we&&!e.disabled){if(c.action=!0,Ue&&Array.isArray(Lt(r,J))){const Xe=we(Lt(r,J),Be.argA,Be.argB);$e&&Nr(r,J,Xe)}if(Ue&&Array.isArray(Lt(t.errors,J))){const Xe=we(Lt(t.errors,J),Be.argA,Be.argB);$e&&Nr(t.errors,J,Xe),im(t.errors,J)}if((x.touchedFields||b.touchedFields)&&Ue&&Array.isArray(Lt(t.touchedFields,J))){const Xe=we(Lt(t.touchedFields,J),Be.argA,Be.argB);$e&&Nr(t.touchedFields,J,Xe)}(x.dirtyFields||b.dirtyFields)&&(t.dirtyFields=ao(a,i)),w.state.next({name:J,isDirty:C(J,de),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Nr(i,J,de)},j=(J,de)=>{Nr(t.errors,J,de),w.state.next({errors:t.errors})},k=J=>{t.errors=J,w.state.next({errors:t.errors,isValid:!1})},B=(J,de,we,Be)=>{const $e=Lt(r,J);if($e){const Ue=Lt(i,J,Gr(we)?Lt(a,J):we);Gr(Ue)||Be&&Be.defaultChecked||de?Nr(i,J,de?Ue:ku($e._f)):V(J,Ue),c.mount&&_()}},K=(J,de,we,Be,$e)=>{let Ue=!1,Xe=!1;const bt={name:J};if(!e.disabled){if(!we||Be){(x.isDirty||b.isDirty)&&(Xe=t.isDirty,t.isDirty=bt.isDirty=C(),Ue=Xe!==bt.isDirty);const Pt=Wa(Lt(a,J),de);Xe=!!Lt(t.dirtyFields,J),Pt?en(t.dirtyFields,J):Nr(t.dirtyFields,J,!0),bt.dirtyFields=t.dirtyFields,Ue=Ue||(x.dirtyFields||b.dirtyFields)&&Xe!==!Pt}if(we){const Pt=Lt(t.touchedFields,J);Pt||(Nr(t.touchedFields,J,we),bt.touchedFields=t.touchedFields,Ue=Ue||(x.touchedFields||b.touchedFields)&&Pt!==we)}Ue&&$e&&w.state.next(bt)}return Ue?bt:{}},Z=(J,de,we,Be)=>{const $e=Lt(t.errors,J),Ue=(x.isValid||b.isValid)&&zi(de)&&t.isValid!==de;if(e.delayError&&we?(d=P(()=>j(J,we)),d(e.delayError)):(clearTimeout(y),d=null,we?Nr(t.errors,J,we):en(t.errors,J)),(we?!Wa($e,we):$e)||!Rn(Be)||Ue){const Xe={...Be,...Ue&&zi(de)?{isValid:de}:{},errors:t.errors,name:J};t={...t,...Xe},w.state.next(Xe)}},R=async J=>{E(J,!0);const de=await e.resolver(i,e.context,Xp(J||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(J),de},O=async J=>{const{errors:de}=await R(J);if(J)for(const we of J){const Be=Lt(de,we);Be?Nr(t.errors,we,Be):en(t.errors,we)}else t.errors=de;return de},X=async(J,de,we={valid:!0})=>{for(const Be in J){const $e=J[Be];if($e){const{_f:Ue,...Xe}=$e;if(Ue){const bt=u.array.has(Ue.name),Pt=$e._f&&Zp($e._f);Pt&&x.validatingFields&&E([Be],!0);const wt=await Tu($e,u.disabled,i,m,e.shouldUseNativeValidation&&!de,bt);if(Pt&&x.validatingFields&&E([Be]),wt[Ue.name]&&(we.valid=!1,de))break;!de&&(Lt(wt,Ue.name)?bt?am(t.errors,wt,Ue.name):Nr(t.errors,Ue.name,wt[Ue.name]):en(t.errors,Ue.name))}!Rn(Xe)&&await X(Xe,de,we)}}return we.valid},oe=()=>{for(const J of u.unMount){const de=Lt(r,J);de&&(de._f.refs?de._f.refs.every(we=>!Kl(we)):!Kl(de._f.ref))&&ye(J)}u.unMount=new Set},C=(J,de)=>!e.disabled&&(J&&de&&Nr(i,J,de),!Wa(ge(),a)),N=(J,de,we)=>$p(J,u,{...c.mount?i:Gr(de)?a:Hi(J)?{[J]:de}:de},we,de),q=J=>bl(Lt(c.mount?i:a,J,e.shouldUnregister?Lt(a,J,[]):[])),V=(J,de,we={})=>{const Be=Lt(r,J);let $e=de;if(Be){const Ue=Be._f;Ue&&(!Ue.disabled&&Nr(i,J,Od(de,Ue)),$e=ul(Ue.ref)&&kn(de)?"":de,Fd(Ue.ref)?[...Ue.ref.options].forEach(Xe=>Xe.selected=$e.includes(Xe.value)):Ue.refs?Po(Ue.ref)?Ue.refs.forEach(Xe=>{(!Xe.defaultChecked||!Xe.disabled)&&(Array.isArray($e)?Xe.checked=!!$e.find(bt=>bt===Xe.value):Xe.checked=$e===Xe.value||!!$e)}):Ue.refs.forEach(Xe=>Xe.checked=Xe.value===$e):kc(Ue.ref)?Ue.ref.value="":(Ue.ref.value=$e,Ue.ref.type||w.state.next({name:J,values:jn(i)})))}(we.shouldDirty||we.shouldTouch)&&K(J,$e,we.shouldTouch,we.shouldDirty,!0),we.shouldValidate&&ie(J)},he=(J,de,we)=>{for(const Be in de){if(!de.hasOwnProperty(Be))return;const $e=de[Be],Ue=J+"."+Be,Xe=Lt(r,Ue);(u.array.has(J)||Ur($e)||Xe&&!Xe._f)&&!vs($e)?he(Ue,$e,we):V(Ue,$e,we)}},Y=(J,de,we={})=>{const Be=Lt(r,J),$e=u.array.has(J),Ue=jn(de);Nr(i,J,Ue),$e?(w.array.next({name:J,values:jn(i)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&we.shouldDirty&&w.state.next({name:J,dirtyFields:ao(a,i),isDirty:C(J,Ue)})):Be&&!Be._f&&!kn(Ue)?he(J,Ue,we):V(J,Ue,we),Du(J,u)&&w.state.next({...t}),w.state.next({name:c.mount?J:void 0,values:jn(i)})},Q=async J=>{c.mount=!0;const de=J.target;let we=de.name,Be=!0;const $e=Lt(r,we),Ue=Pt=>{Be=Number.isNaN(Pt)||vs(Pt)&&isNaN(Pt.getTime())||Wa(Pt,Lt(i,we,Pt))},Xe=Fu(e.mode),bt=Fu(e.reValidateMode);if($e){let Pt,wt;const qt=de.type?ku($e._f):Up(J),ct=J.type===Au.BLUR||J.type===Au.FOCUS_OUT,dr=!em($e._f)&&!e.resolver&&!Lt(t.errors,we)&&!$e._f.deps||nm(ct,Lt(t.touchedFields,we),t.isSubmitted,bt,Xe),Wt=Du(we,u,ct);Nr(i,we,qt),ct?($e._f.onBlur&&$e._f.onBlur(J),d&&d(0)):$e._f.onChange&&$e._f.onChange(J);const Or=K(we,qt,ct),Qt=!Rn(Or)||Wt;if(!ct&&w.state.next({name:we,type:J.type,values:jn(i)}),dr)return(x.isValid||b.isValid)&&(e.mode==="onBlur"?ct&&_():ct||_()),Qt&&w.state.next({name:we,...Wt?{}:Or});if(!ct&&Wt&&w.state.next({...t}),e.resolver){const{errors:ut}=await R([we]);if(Ue(qt),Be){const zr=Iu(t.errors,r,we),Vt=Iu(ut,r,zr.name||we);Pt=Vt.error,we=Vt.name,wt=Rn(ut)}}else E([we],!0),Pt=(await Tu($e,u.disabled,i,m,e.shouldUseNativeValidation))[we],E([we]),Ue(qt),Be&&(Pt?wt=!1:(x.isValid||b.isValid)&&(wt=await X(r,!0)));Be&&($e._f.deps&&ie($e._f.deps),Z(we,wt,Pt,Or))}},ne=(J,de)=>{if(Lt(t.errors,de)&&J.focus)return J.focus(),1},ie=async(J,de={})=>{let we,Be;const $e=ho(J);if(e.resolver){const Ue=await O(Gr(J)?J:$e);we=Rn(Ue),Be=J?!$e.some(Xe=>Lt(Ue,Xe)):we}else J?(Be=(await Promise.all($e.map(async Ue=>{const Xe=Lt(r,Ue);return await X(Xe&&Xe._f?{[Ue]:Xe}:Xe)}))).every(Boolean),!(!Be&&!t.isValid)&&_()):Be=we=await X(r);return w.state.next({...!Hi(J)||(x.isValid||b.isValid)&&we!==t.isValid?{}:{name:J},...e.resolver||!J?{isValid:we}:{},errors:t.errors}),de.shouldFocus&&!Be&&fo(r,ne,J?$e:u.mount),Be},ge=J=>{const de={...c.mount?i:a};return Gr(J)?de:Hi(J)?Lt(de,J):J.map(we=>Lt(de,we))},Oe=(J,de)=>({invalid:!!Lt((de||t).errors,J),isDirty:!!Lt((de||t).dirtyFields,J),error:Lt((de||t).errors,J),isValidating:!!Lt(t.validatingFields,J),isTouched:!!Lt((de||t).touchedFields,J)}),I=J=>{J&&ho(J).forEach(de=>en(t.errors,de)),w.state.next({errors:J?t.errors:{}})},D=(J,de,we)=>{const Be=(Lt(r,J,{_f:{}})._f||{}).ref,$e=Lt(t.errors,J)||{},{ref:Ue,message:Xe,type:bt,...Pt}=$e;Nr(t.errors,J,{...Pt,...de,ref:Be}),w.state.next({name:J,errors:t.errors,isValid:!1}),we&&we.shouldFocus&&Be&&Be.focus&&Be.focus()},G=(J,de)=>ji(J)?w.state.subscribe({next:we=>J(N(void 0,de),we)}):N(J,de,!0),te=J=>w.state.subscribe({next:de=>{rm(J.name,de.name,J.exact)&&tm(de,J.formState||x,Mt,J.reRenderRoot)&&J.callback({values:{...i},...t,...de})}}).unsubscribe,ae=J=>(c.mount=!0,b={...b,...J.formState},te({...J,formState:b})),ye=(J,de={})=>{for(const we of J?ho(J):u.mount)u.mount.delete(we),u.array.delete(we),de.keepValue||(en(r,we),en(i,we)),!de.keepError&&en(t.errors,we),!de.keepDirty&&en(t.dirtyFields,we),!de.keepTouched&&en(t.touchedFields,we),!de.keepIsValidating&&en(t.validatingFields,we),!e.shouldUnregister&&!de.keepDefaultValue&&en(a,we);w.state.next({values:jn(i)}),w.state.next({...t,...de.keepDirty?{isDirty:C()}:{}}),!de.keepIsValid&&_()},Pe=({disabled:J,name:de})=>{(zi(J)&&c.mount||J||u.disabled.has(de))&&(J?u.disabled.add(de):u.disabled.delete(de))},fe=(J,de={})=>{let we=Lt(r,J);const Be=zi(de.disabled)||zi(e.disabled);return Nr(r,J,{...we||{},_f:{...we&&we._f?we._f:{ref:{name:J}},name:J,mount:!0,...de}}),u.mount.add(J),we?Pe({disabled:zi(de.disabled)?de.disabled:e.disabled,name:J}):B(J,!0,de.value),{...Be?{disabled:de.disabled||e.disabled}:{},...e.progressive?{required:!!de.required,min:so(de.min),max:so(de.max),minLength:so(de.minLength),maxLength:so(de.maxLength),pattern:so(de.pattern)}:{},name:J,onChange:Q,onBlur:Q,ref:$e=>{if($e){fe(J,de),we=Lt(r,J);const Ue=Gr($e.value)&&$e.querySelectorAll&&$e.querySelectorAll("input,select,textarea")[0]||$e,Xe=Yp(Ue),bt=we._f.refs||[];if(Xe?bt.find(Pt=>Pt===Ue):Ue===we._f.ref)return;Nr(r,J,{_f:{...we._f,...Xe?{refs:[...bt.filter(Kl),Ue,...Array.isArray(Lt(a,J))?[{}]:[]],ref:{type:Ue.type,name:J}}:{ref:Ue}}}),B(J,!1,void 0,Ue)}else we=Lt(r,J,{}),we._f&&(we._f.mount=!1),(e.shouldUnregister||de.shouldUnregister)&&!(Hp(u.array,J)&&c.action)&&u.unMount.add(J)}}},Je=()=>e.shouldFocusError&&fo(r,ne,u.mount),et=J=>{zi(J)&&(w.state.next({disabled:J}),fo(r,(de,we)=>{const Be=Lt(r,we);Be&&(de.disabled=Be._f.disabled||J,Array.isArray(Be._f.refs)&&Be._f.refs.forEach($e=>{$e.disabled=Be._f.disabled||J}))},0,!1))},Ve=(J,de)=>async we=>{let Be;we&&(we.preventDefault&&we.preventDefault(),we.persist&&we.persist());let $e=jn(i);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:Ue,values:Xe}=await R();t.errors=Ue,$e=Xe}else await X(r);if(u.disabled.size)for(const Ue of u.disabled)Nr($e,Ue,void 0);if(en(t.errors,"root"),Rn(t.errors)){w.state.next({errors:{}});try{await J($e,we)}catch(Ue){Be=Ue}}else de&&await de({...t.errors},we),Je(),setTimeout(Je);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rn(t.errors)&&!Be,submitCount:t.submitCount+1,errors:t.errors}),Be)throw Be},lt=(J,de={})=>{Lt(r,J)&&(Gr(de.defaultValue)?Y(J,jn(Lt(a,J))):(Y(J,de.defaultValue),Nr(a,J,jn(de.defaultValue))),de.keepTouched||en(t.touchedFields,J),de.keepDirty||(en(t.dirtyFields,J),t.isDirty=de.defaultValue?C(J,jn(Lt(a,J))):C()),de.keepError||(en(t.errors,J),x.isValid&&_()),w.state.next({...t}))},Ft=(J,de={})=>{const we=J?jn(J):a,Be=jn(we),$e=Rn(J),Ue=$e?a:Be;if(de.keepDefaultValues||(a=we),!de.keepValues){if(de.keepDirtyValues){const Xe=new Set([...u.mount,...Object.keys(ao(a,i))]);for(const bt of Array.from(Xe))Lt(t.dirtyFields,bt)?Nr(Ue,bt,Lt(i,bt)):Y(bt,Lt(Ue,bt))}else{if(Lc&&Gr(J))for(const Xe of u.mount){const bt=Lt(r,Xe);if(bt&&bt._f){const Pt=Array.isArray(bt._f.refs)?bt._f.refs[0]:bt._f.ref;if(ul(Pt)){const wt=Pt.closest("form");if(wt){wt.reset();break}}}}for(const Xe of u.mount)Y(Xe,Lt(Ue,Xe))}i=jn(Ue),w.array.next({values:{...Ue}}),w.state.next({values:{...Ue}})}u={mount:de.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!x.isValid||!!de.keepIsValid||!!de.keepDirtyValues,c.watch=!!e.shouldUnregister,w.state.next({submitCount:de.keepSubmitCount?t.submitCount:0,isDirty:$e?!1:de.keepDirty?t.isDirty:!!(de.keepDefaultValues&&!Wa(J,a)),isSubmitted:de.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:$e?{}:de.keepDirtyValues?de.keepDefaultValues&&i?ao(a,i):t.dirtyFields:de.keepDefaultValues&&J?ao(a,J):de.keepDirty?t.dirtyFields:{},touchedFields:de.keepTouched?t.touchedFields:{},errors:de.keepErrors?t.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(J,de)=>Ft(ji(J)?J(i):J,de),le=(J,de={})=>{const we=Lt(r,J),Be=we&&we._f;if(Be){const $e=Be.refs?Be.refs[0]:Be.ref;$e.focus&&($e.focus(),de.shouldSelect&&ji($e.select)&&$e.select())}},Mt=J=>{t={...t,...J}},rt={control:{register:fe,unregister:ye,getFieldState:Oe,handleSubmit:Ve,setError:D,_subscribe:te,_runSchema:R,_focusError:Je,_getWatch:N,_getDirty:C,_setValid:_,_setFieldArray:L,_setDisabledField:Pe,_setErrors:k,_getFieldArray:q,_reset:Ft,_resetDefaultValues:()=>ji(e.defaultValues)&&e.defaultValues().then(J=>{qe(J,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:oe,_disableForm:et,_subjects:w,_proxyFormState:x,get _fields(){return r},get _formValues(){return i},get _state(){return c},set _state(J){c=J},get _defaultValues(){return a},get _names(){return u},set _names(J){u=J},get _formState(){return t},get _options(){return e},set _options(J){e={...e,...J}}},subscribe:ae,trigger:ie,register:fe,handleSubmit:Ve,watch:G,setValue:Y,getValues:ge,reset:qe,resetField:lt,clearErrors:I,unregister:ye,setError:D,setFocus:le,getFieldState:Oe};return{...rt,formControl:rt}}function No(n={}){const e=ft.useRef(void 0),t=ft.useRef(void 0),[r,a]=ft.useState({isDirty:!1,isValidating:!1,isLoading:ji(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:ji(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:om(n),formState:r},n.formControl&&n.defaultValues&&!ji(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const i=e.current.control;return i._options=n,Vp(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),ft.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),ft.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),ft.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),ft.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),ft.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==r.isDirty&&i._subjects.state.next({isDirty:c})}},[i,r.isDirty]),ft.useEffect(()=>{n.values&&!Wa(n.values,t.current)?(i._reset(n.values,i._options.resetOptions),t.current=n.values,a(c=>({...c}))):i._resetDefaultValues()},[i,n.values]),ft.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Kp(r,i),e.current}function Va(n){let e=0;const r=n+"pos-system-salt-2024";for(let a=0;a<r.length;a++){const i=r.charCodeAt(a);e=(e<<5)-e+i,e=e&e}return"hash_"+Math.abs(e).toString(36)}function lm(n,e){return Va(n)===e}function cm(n=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function um(n){const e=[];return n.length<6&&e.push("Password must be at least 6 characters long"),/[A-Z]/.test(n)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(n)||e.push("Password must contain at least one lowercase letter"),/\d/.test(n)||e.push("Password must contain at least one number"),{isValid:e.length===0,errors:e}}const dm=()=>{const{login:n,setLoading:e,setError:t,loading:r,error:a}=Fn(),[i,c]=ft.useState(!1),{register:u,handleSubmit:d,formState:{errors:y}}=No(),x=async b=>{e(!0),t(null);try{await new Promise(m=>setTimeout(m,1e3));const w=await _i.getByUsername(b.username);if(w&&w.isActive&&lm(b.password,w.password)){await _i.update(w.id,{lastLogin:new Date});const m="jwt-token-"+w.id+"-"+Date.now();n(w,m)}else t("Invalid username or password, or account is inactive")}catch(w){console.error("Login error:",w),t("Login failed. Please try again.")}finally{e(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:s.jsx(rf,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to POS System"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your credentials to access the system"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d(x),children:[a&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsx("div",{className:"text-sm text-red-700",children:a})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),s.jsx("input",{...u("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),type:"text",className:"input mt-1",placeholder:"Enter your username"}),y.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.username.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:i?"text":"password",className:"input pr-10",placeholder:"Enter your password"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!i),children:i?s.jsx(nc,{className:"h-5 w-5 text-gray-400"}):s.jsx(ic,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password.message})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Demo Accounts"})})]}),s.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2",children:s.jsxs("div",{className:"text-center text-xs text-gray-500",children:[s.jsx("div",{className:"font-medium",children:"Admin: admin / password"}),s.jsx("div",{className:"font-medium",children:"Manager: manager / password"}),s.jsx("div",{className:"font-medium",children:"Cashier: cashier / password"})]})})]})]})]})})},hm=({onActivated:n})=>{const[e,t]=Sr.useState(""),[r,a]=Sr.useState(!1),[i,c]=Sr.useState(null),[u,d]=Sr.useState(!1),[y,x]=Sr.useState(null),b=async()=>{if(!e.trim()){c("Please enter a license key");return}a(!0),c(null),x(null);try{const _=await qn.validateLicenseKey(e.trim());if(!_.valid){c(_.error||"Invalid license key");return}x(_.info);const E=await qn.activateLicense(e.trim());E.success?(d(!0),setTimeout(()=>{n()},2e3)):c(E.error||"Failed to activate license")}catch(_){console.error("License activation error:",_),c("An unexpected error occurred. Please try again.")}finally{a(!1)}},w=_=>{const L=_.replace(/[^A-Za-z0-9]/g,"").toUpperCase().replace(/(.{5})/g,"$1-").slice(0,-1);t(L)},m=_=>{_.key==="Enter"&&!r&&e.trim()&&b()},P=_=>{navigator.clipboard.writeText(_)};return u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md text-center",children:[s.jsx("div",{className:"bg-green-100 rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:s.jsx(rl,{className:"h-12 w-12 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"License Activated Successfully!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your POS system is now licensed and ready to use."}),y&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"License Details:"}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",y.customerName]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",y.customerEmail]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Expires:"})," ",y.expiryDate.toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Features:"})," ",y.features.join(", ")]})]})]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Loading your POS system..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"bg-blue-100 rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:s.jsx(Ks,{className:"h-12 w-12 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Activate POS System"}),s.jsx("p",{className:"text-gray-600",children:"Enter your license key to unlock the software"})]}),i&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[s.jsx(nl,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Activation Failed"}),s.jsx("p",{className:"text-red-600 text-sm mt-1",children:i})]})]}),y&&!i&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(rl,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-green-700 text-sm font-medium",children:"License Validated"}),s.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["Valid license for ",y.customerName," (",y.customerEmail,")"]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"license",className:"block text-sm font-medium text-gray-700 mb-2",children:"License Key *"}),s.jsx("input",{id:"license",type:"text",value:e,onChange:_=>w(_.target.value),onKeyPress:m,placeholder:"XXXXX-XXXXX-XXXXX-XXXXX-XXXXX",className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-center text-lg tracking-wider",disabled:r,maxLength:29}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the license key provided to you"})]}),s.jsx("button",{onClick:b,disabled:r||!e.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:r?s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"h-5 w-5 animate-spin mr-2"}),"Activating License..."]}):s.jsxs(s.Fragment,{children:[s.jsx(od,{className:"h-5 w-5 mr-2"}),"Activate License"]})})]}),s.jsxs("div",{className:"mt-8 text-center space-y-4",children:[s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Need help with activation?"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("button",{onClick:()=>P("support@aogtech.com"),className:"flex items-center justify-center px-3 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(af,{className:"h-4 w-4 mr-2"}),"Copy Email"]}),s.jsxs("button",{onClick:()=>window.open("mailto:support@aogtech.com?subject=POS License Support"),className:"flex items-center justify-center px-3 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(sf,{className:"h-4 w-4 mr-2"}),"Contact Support"]})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsx("p",{className:"mb-2",children:"POS System v1.0.0 by AOG Tech"}),s.jsx("p",{children:" 2024 AOG Tech. All rights reserved."})]})]})]})})},Gt=n=>`${(Number(n)||0).toFixed(2)}`,fm=()=>{var k,B,K,Z;const{transactions:n,products:e,cart:t}=Fn(),[r,a]=ft.useState(null),[i,c]=ft.useState(!1),u=new Date,d=new Date(u.getFullYear(),u.getMonth(),u.getDate()),y=(n==null?void 0:n.filter(R=>R.createdAt>=d&&R.type==="sale"&&R.status==="completed"))||[],x=y.reduce((R,O)=>R+O.total,0),b=y.length,w=(e==null?void 0:e.filter(R=>R.quantity<=R.minStockLevel))||[],m=(e==null?void 0:e.reduce((R,O)=>R+O.cost*O.quantity,0))||0,P=(n==null?void 0:n.filter(R=>R.type==="sale"&&R.status==="completed").reduce((R,O)=>R+O.total,0))||0,_=((k=n==null?void 0:n.filter(R=>R.type==="sale"))==null?void 0:k.slice(0,5))||[],E=R=>{a(R),c(!0)},L=()=>{a(null),c(!1)},j=[{title:"Today's Sales",value:Gt(x),icon:ld,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:b.toString(),icon:Ga,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Sales",value:Gt(P),icon:Vs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Total Inventory Cost",value:Gt(m),icon:cd,color:"text-orange-600",bgColor:"bg-orange-100"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500",children:"Welcome back! Here's what's happening today."})]}),s.jsx("div",{className:"text-sm text-gray-500",children:_r(new Date,"EEEE, MMMM do, yyyy")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(R=>{const O=R.icon;return s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg ${R.bgColor}`,children:s.jsx(O,{className:`h-6 w-6 ${R.color}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:R.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.value})]})]})},R.title)})}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(fs,{to:"/sales",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[s.jsx(Ga,{className:"h-8 w-8 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"New Sale"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Process a new transaction"})]}),s.jsx(ql,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),s.jsxs(fs,{to:"/inventory",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[s.jsx(As,{className:"h-8 w-8 text-purple-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Manage Inventory"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Add or update products"})]}),s.jsx(ql,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),s.jsxs(fs,{to:"/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[s.jsx(ud,{className:"h-8 w-8 text-green-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Analyze sales data"})]}),s.jsx(ql,{className:"h-5 w-5 text-gray-400 ml-auto"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"}),s.jsx(fs,{to:"/reports",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"View all"})]}),_.length>0?s.jsx("div",{className:"space-y-3",children:_.map(R=>s.jsxs("div",{onClick:()=>E(R),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:["#",R.transactionNumber]}),s.jsx("p",{className:"text-sm text-gray-500",children:_r(R.createdAt,"MMM dd, hh:mm a")})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium text-gray-900",children:Gt(R.total)}),s.jsx("p",{className:`text-xs ${R.status==="completed"?"text-green-600":"text-yellow-600"}`,children:R.status})]})]},R.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ga,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),s.jsx(fs,{to:"/inventory",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Manage"})]}),w.length>0?s.jsxs("div",{className:"space-y-3",children:[w.slice(0,5).map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(bo,{className:"h-5 w-5 text-red-500 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:R.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",R.sku]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-medium text-red-600",children:[R.quantity," left"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",R.minStockLevel]})]})]},R.id)),w.length>5&&s.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["+",w.length-5," more items need attention"]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(As,{className:"h-12 w-12 text-green-300 mx-auto mb-4"}),s.jsx("p",{className:"text-green-600 font-medium",children:"All products well stocked!"})]})]})]}),((B=t==null?void 0:t.items)==null?void 0:B.length)>0&&s.jsx("div",{className:"card bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Active Cart"}),s.jsxs("p",{className:"text-blue-700",children:[t.items.length," items  Total: ",Gt(t.total)]})]}),s.jsx(fs,{to:"/sales",className:"btn btn-primary",children:"Continue Sale"})]})}),i&&r&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vs,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),s.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",children:s.jsx(wa,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vs,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),s.jsxs("p",{className:"font-medium",children:["#",r.transactionNumber]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ac,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),s.jsx("p",{className:"font-medium",children:_r(r.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(jc,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),s.jsxs("p",{className:"font-medium",children:[(K=r.cashier)==null?void 0:K.firstName," ",(Z=r.cashier)==null?void 0:Z.lastName]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(dd,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),s.jsx("p",{className:"font-medium capitalize",children:r.paymentMethod})]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),s.jsx("div",{className:"space-y-2",children:r.items.map(R=>{var O;return s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900",children:((O=R.product)==null?void 0:O.name)||"Unknown Product"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[Gt(R.unitPrice),"  ",R.quantity]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"font-medium text-gray-900",children:Gt(R.totalPrice)})})]},R.id)})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{children:Gt(r.subtotal)})]}),r.discount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[s.jsx("span",{children:"Discount:"}),s.jsxs("span",{children:["-",Gt(r.discount)]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-2",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Gt(r.total)})]})}),r.paymentMethod==="cash"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Cash Received:"}),s.jsx("span",{children:Gt(r.paymentAmount)})]}),r.changeAmount>0&&s.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[s.jsx("span",{children:"Change Given:"}),s.jsx("span",{children:Gt(r.changeAmount)})]})]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${r.status==="completed"?"bg-green-100 text-green-800":r.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})}),s.jsxs("p",{className:"text-sm text-gray-500",children:[r.items.length," item",r.items.length!==1?"s":""]})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:L,className:"btn btn-outline",children:"Close"})})})]})})]})};class Mu{static generateReceiptCommands(e,t){const r=[],{transaction:a,storeName:i,storeAddress:c,storePhone:u,cashierName:d,printTime:y}=e,b=t.paperWidth===58?32:48;return r.push({type:"align",align:"left"}),r.push({type:"size",size:"normal"}),r.push({type:"align",align:"center"}),r.push({type:"size",size:"wide"}),r.push({type:"bold"}),r.push({type:"text",data:`${i}
`}),r.push({type:"size",size:"normal"}),c&&r.push({type:"text",data:`${c}
`}),u&&r.push({type:"text",data:`Tel: ${u}
`}),r.push({type:"text",data:this.createLine("-",b)}),r.push({type:"align",align:"left"}),r.push({type:"text",data:`Receipt #: ${a.transactionNumber}
`}),r.push({type:"text",data:`Date: ${y.toLocaleDateString()}
`}),r.push({type:"text",data:`Time: ${y.toLocaleTimeString()}
`}),r.push({type:"text",data:`Cashier: ${d}
`}),r.push({type:"text",data:this.createLine("-",b)}),r.push({type:"text",data:`ITEMS:
`}),r.push({type:"text",data:this.createLine("-",b)}),a.items.forEach(w=>{const m=w.product;if(!m)return;r.push({type:"text",data:`${m.name}
`});const P=`${w.quantity} x ${Gt(w.unitPrice)} = ${Gt(w.totalPrice)}`;r.push({type:"text",data:`  ${P}
`}),w.discount&&w.discount>0&&r.push({type:"text",data:`  Discount: -${Gt(w.discount)}
`})}),r.push({type:"text",data:this.createLine("-",b)}),r.push({type:"text",data:this.formatLineWithTotal("Subtotal:",a.subtotal,b)}),a.discount>0&&r.push({type:"text",data:this.formatLineWithTotal("Discount:",-a.discount,b)}),a.tax>0&&r.push({type:"text",data:this.formatLineWithTotal("Tax:",a.tax,b)}),r.push({type:"text",data:this.createLine("=",b)}),r.push({type:"bold"}),r.push({type:"size",size:"wide"}),r.push({type:"text",data:this.formatLineWithTotal("TOTAL:",a.total,b)}),r.push({type:"size",size:"normal"}),r.push({type:"text",data:this.createLine("-",b)}),r.push({type:"text",data:this.formatLineWithTotal("Payment:",a.paymentAmount,b)}),r.push({type:"text",data:this.formatLineWithTotal("Change:",a.changeAmount,b)}),r.push({type:"text",data:this.createLine("-",b)}),r.push({type:"align",align:"center"}),r.push({type:"text",data:`
Thank you for your purchase!
`}),r.push({type:"text",data:`Please come again!

`}),r.push({type:"text",data:`Transaction ID: ${a.id}
`}),r.push({type:"text",data:`${new Date().toISOString()}
`}),r.push({type:"feed"}),r.push({type:"feed"}),r}static generateTestReceiptCommands(e,t){const r=[],a=t.paperWidth,i=a===58?32:48;return r.push({type:"align",align:"center"}),r.push({type:"size",size:"double"}),r.push({type:"bold"}),r.push({type:"text",data:`TEST RECEIPT
`}),r.push({type:"size",size:"normal"}),r.push({type:"text",data:`${e}
`}),r.push({type:"text",data:this.createLine("=",i)}),r.push({type:"align",align:"left"}),r.push({type:"text",data:`Date: ${new Date().toLocaleDateString()}
`}),r.push({type:"text",data:`Time: ${new Date().toLocaleTimeString()}
`}),r.push({type:"text",data:`Paper Width: ${a}mm
`}),r.push({type:"text",data:`Line Length: ${i} chars
`}),r.push({type:"text",data:this.createLine("-",i)}),r.push({type:"text",data:`PRINTING TEST:
`}),r.push({type:"text",data:`123456789012345678901234567890123456789012345678
`}),r.push({type:"text",data:`ABCDEFGHIJKLMNOPQRSTUVWXYZ
`}),r.push({type:"text",data:`abcdefghijklmnopqrstuvwxyz
`}),r.push({type:"text",data:`!@#$%^&*()_+-=[]{}|;:,.<>?
`}),r.push({type:"text",data:this.createLine("-",i)}),r.push({type:"bold"}),r.push({type:"text",data:`BOLD TEXT
`}),r.push({type:"size",size:"normal"}),r.push({type:"size",size:"wide"}),r.push({type:"text",data:`WIDE TEXT
`}),r.push({type:"size",size:"normal"}),r.push({type:"size",size:"tall"}),r.push({type:"text",data:`TALL TEXT
`}),r.push({type:"size",size:"normal"}),r.push({type:"align",align:"center"}),r.push({type:"text",data:`CENTER ALIGNED
`}),r.push({type:"align",align:"right"}),r.push({type:"text",data:`RIGHT ALIGNED
`}),r.push({type:"align",align:"left"}),r.push({type:"text",data:this.createLine("=",i)}),r.push({type:"align",align:"center"}),r.push({type:"text",data:`Test completed successfully!
`}),r.push({type:"text",data:`${new Date().toISOString()}
`}),r.push({type:"feed"}),r.push({type:"feed"}),r}static createLine(e,t){return e.repeat(t)+`
`}static formatLineWithTotal(e,t,r){const a=Gt(t),i=r-e.length-a.length,c=Math.max(1,i);return e+" ".repeat(c)+a+`
`}static async autoPrintReceipt(e,t,r,a,i){try{const{BluetoothPrinterService:c}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url),u=c.getInstance();if(!u.getStatus().connected){console.warn("No printer connected for auto-print");return}const d={transaction:e,storeName:t,storeAddress:r,storePhone:a,cashierName:i||"Unknown",printTime:new Date},y={autoPrintEnabled:!0,paperWidth:58,encoding:"utf8",cutType:"partial",cashdrawerEnabled:!1},x=this.generateReceiptCommands(d,y);await u.print(x),console.log("Receipt auto-printed successfully")}catch(c){console.error("Auto-print failed:",c)}}}const pm=()=>{var Oe,I;console.log("Sales component rendering...");const{products:n,categories:e,cart:t,addToCart:r,removeFromCart:a,updateCartItem:i,clearCart:c,addTransaction:u,auth:d,settings:y}=Fn(),[x,b]=ft.useState(""),[w,m]=ft.useState(""),[P,_]=ft.useState(0),[E,L]=ft.useState(!1),[j,k]=ft.useState(!1),[B,K]=ft.useState(null),[Z,R]=ft.useState(null),[O,X]=ft.useState(!0),oe=ft.useRef(null);ft.useEffect(()=>{oe.current&&oe.current.focus()},[]),ft.useEffect(()=>{X(!E&&!j)},[E,j]),ft.useEffect(()=>{if(Z){const D=setTimeout(()=>R(null),3e3);return()=>clearTimeout(D)}},[Z]),ft.useEffect(()=>{let D="",G;const te=ae=>{const ye=document.activeElement,Pe=(ye==null?void 0:ye.tagName)==="INPUT"||(ye==null?void 0:ye.tagName)==="TEXTAREA"||(ye==null?void 0:ye.tagName)==="SELECT";if(!(E||j)){if(Pe&&ye===oe.current){ae.key.length===1&&/[A-Za-z0-9\-_\.]/.test(ae.key)&&(D+=ae.key,G&&clearTimeout(G),G=setTimeout(()=>{D.length>=8?(C(D),D="",b("")):D=""},150));return}Pe||(G&&clearTimeout(G),ae.key==="Enter"?D.length>=3&&(ae.preventDefault(),C(D),D=""):ae.key.length===1&&/[A-Za-z0-9\-_\.]/.test(ae.key)?(D+=ae.key,G=setTimeout(()=>{D.length>=3&&(C(D),D="")},100)):ae.key==="Escape"&&(D=""))}};return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te),G&&clearTimeout(G)}},[E,j]);const C=D=>{const G=D.trim().toUpperCase();G.length>=3&&he(G)},N=(D,G)=>{if(R({type:D,message:G}),D==="success")try{"Notification"in window&&Notification.permission==="granted"&&new Notification("Product Added",{body:G})}catch{console.log("Notification not supported")}try{const te=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LPdSEFl");te.volume=.3,te.play().catch(()=>{})}catch{}};if(!n||!e||!t)return console.log("Sales - Missing required data:",{products:!!n,categories:!!e,cart:!!t}),s.jsxs("div",{className:"p-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sales Page - Debug Mode"}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h2",{className:"font-medium text-yellow-800 mb-2",children:"Loading Debug Info:"}),s.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[s.jsxs("li",{children:["Products: ",n?`${n.length} items`:"Not loaded"]}),s.jsxs("li",{children:["Categories: ",e?`${e.length} items`:"Not loaded"]}),s.jsxs("li",{children:["Cart: ",t?"Initialized":"Not initialized"]}),s.jsxs("li",{children:["Auth: ",d!=null&&d.user?`${d.user.username} (${d.user.role})`:"Not authenticated"]})]}),s.jsx("p",{className:"mt-2 text-xs",children:"If this persists, check the browser console for errors."})]})]});const q=n.filter(D=>{if(!D||!D.name)return console.warn("Sales - Problematic product found:",D),!1;const G=(D==null?void 0:D.name)||"",te=(D==null?void 0:D.sku)||"",ae=x.toLowerCase(),ye=G.toLowerCase().includes(ae)||te.toLowerCase().includes(ae),Pe=!w||(D==null?void 0:D.categoryId)===w;return ye&&Pe&&(D==null?void 0:D.isActive)&&((D==null?void 0:D.quantity)||0)>0});console.log("Sales - Filtered products:",q.length);const V=D=>{D.quantity>0&&r(D,1)},he=D=>{const G=n.find(te=>{var ae;return te.sku.toLowerCase()===D.toLowerCase()||((ae=te.barcode)==null?void 0:ae.toLowerCase())===D.toLowerCase()});if(G)if(G.isActive&&G.quantity>0){const te=t.items.find(ye=>ye.product.id===G.id);V(G);const ae=te?`${G.name} quantity increased to ${te.quantity+1}`:`${G.name} added to cart`;N("success",ae)}else{const te=`Product "${G.name}" is not available for sale.`;N("error",te)}else{const te=`Product with SKU "${D}" not found in inventory.`;N("error",te)}},Y=(D,G)=>{G<=0?a(D):i(D,G)},Q=async()=>{var ae,ye;if(t.items.length===0)return;const D=Math.max(0,P-t.total),G=t.items.map((Pe,fe)=>({id:(Date.now()+fe).toString(),productId:Pe.product.id,product:Pe.product,quantity:Pe.quantity,unitPrice:Pe.unitPrice,totalPrice:Pe.totalPrice,discount:Pe.discount||0})),te={id:Date.now().toString(),transactionNumber:`TXN${Date.now()}`,type:"sale",status:"completed",items:G,subtotal:t.subtotal,tax:t.tax,discount:t.discount,total:t.total,paymentMethod:"cash",paymentAmount:P,changeAmount:D,cashierId:((ae=d.user)==null?void 0:ae.id)||"",cashier:d.user||void 0,createdAt:new Date,updatedAt:new Date};try{await u(te),K(te);const{BluetoothPrinterService:Pe}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url);if(Pe.getInstance().getStatus().connected)if((ye=y.printerSettings)!=null&&ye.autoPrintEnabled)try{N("success","Printing receipt..."),await Mu.autoPrintReceipt(te,y.storeName,void 0,void 0,d.user?`${d.user.firstName} ${d.user.lastName}`:"Unknown Cashier"),N("success","Receipt printed successfully!")}catch(Je){console.error("Print failed:",Je),N("error","Print failed - please check printer connection")}else N("success",'Sale completed! Printer ready - use "Print" button in receipt modal to print.');else N("error","No printer connected - receipt available in modal");c(),L(!1),k(!0),_(0),N("success","Sale completed successfully!")}catch(Pe){console.error("Failed to process payment:",Pe),N("error","Failed to process payment. Please try again.")}},ne=()=>{_(t.total),L(!0)},ie=()=>{window.print()},ge=async()=>{if(B)try{const{BluetoothPrinterService:D}=await Ai(()=>import("./BluetoothPrinterService-d2e84a0a.js"),[],import.meta.url);if(!D.getInstance().getStatus().connected){N("error","No thermal printer connected");return}N("success","Printing to thermal printer..."),await Mu.autoPrintReceipt(B,y.storeName,void 0,void 0,d.user?`${d.user.firstName} ${d.user.lastName}`:"Unknown Cashier"),N("success","Receipt printed to thermal printer!")}catch(D){console.error("Thermal print failed:",D),N("error","Failed to print to thermal printer")}};return s.jsxs("div",{className:"h-full flex",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[Z&&s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${Z.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center",children:[Z.type==="success"?s.jsx(rl,{className:"h-5 w-5 mr-2"}):s.jsx(hd,{className:"h-5 w-5 mr-2"}),Z.message]})}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name or SKU... (Barcodes auto-scan anywhere on this page)",value:x,onChange:D=>b(D.target.value),className:"input pl-10",ref:oe})]}),s.jsxs("select",{value:w,onChange:D=>m(D.target.value),className:"input w-48",children:[s.jsx("option",{value:"",children:"All Categories"}),e.map(D=>s.jsx("option",{value:D.id,children:D.name},D.id))]})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${O?"bg-green-500 animate-pulse":"bg-gray-400"}`}),s.jsx("span",{className:O?"text-green-600 font-medium":"text-gray-500",children:O?" Ready for barcode scanning - just scan anywhere on this page!":" Scanning paused (modal open)"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:"Press ESC to clear scan buffer"})]})]}),s.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:q.map(D=>s.jsx("div",{onClick:()=>V(D),className:"card p-4 cursor-pointer hover:shadow-md transition-shadow duration-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg mx-auto mb-3 flex items-center justify-center overflow-hidden",children:D.imageUrl?s.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"text-2xl",children:""})}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-1 truncate",children:D.name}),s.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",D.sku]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Gt(D.price)}),D.wholesalePrice&&D.wholesaleMinQuantity&&s.jsxs("div",{className:"text-xs",children:[s.jsxs("p",{className:"text-green-600 font-medium",children:["Wholesale: ",Gt(D.wholesalePrice)]}),s.jsxs("p",{className:"text-gray-500",children:["Min qty: ",D.wholesaleMinQuantity]})]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Stock: ",D.quantity]})]})},D.id))})})]}),s.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Current Sale"}),s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx(Ga,{className:"h-5 w-5 mr-1"}),s.jsx("span",{children:t.items.length})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.items.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ga,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Cart is empty"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Add products to start a sale"})]}):s.jsx("div",{className:"space-y-3",children:t.items.map(D=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:D.product.name}),D.product.wholesalePrice&&D.product.wholesaleMinQuantity&&D.quantity>=D.product.wholesaleMinQuantity&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-1",children:"Wholesale Price Applied"})]}),s.jsx("button",{onClick:()=>a(D.product.id),className:"text-red-500 hover:text-red-700",children:s.jsx(il,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Y(D.product.id,D.quantity-1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:s.jsx(of,{className:"h-3 w-3"})}),s.jsx("span",{className:"text-sm font-medium",children:D.quantity}),s.jsx("button",{onClick:()=>Y(D.product.id,D.quantity+1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",disabled:D.quantity>=D.product.quantity,children:s.jsx(_o,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[Gt(D.unitPrice)," each",D.product.wholesalePrice&&D.product.wholesaleMinQuantity&&D.quantity>=D.product.wholesaleMinQuantity&&s.jsx("span",{className:"ml-1 line-through text-gray-400",children:Gt(D.product.price)})]}),s.jsx("p",{className:"font-medium text-gray-900",children:Gt(D.totalPrice)})]})]})]},D.product.id))})}),t.items.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Gt(t.subtotal)})]}),t.discount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[s.jsx("span",{children:"Discount:"}),s.jsxs("span",{children:["-",Gt(t.discount)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Gt(t.total)})]})]}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx("button",{onClick:ne,className:"btn btn-primary w-full",children:"Process Payment"}),s.jsx("button",{onClick:()=>c(),className:"btn btn-outline w-full",children:"Clear Cart"})]})]})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cash Payment"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{children:Gt(t.total)})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cash Received"}),s.jsx("input",{type:"number",value:P,onChange:D=>_(Number(D.target.value)),className:"input w-full text-lg",min:t.total,step:"0.01",placeholder:"Enter amount received",autoFocus:!0}),P>t.total&&s.jsx("div",{className:"mt-2 p-3 bg-green-50 rounded-lg",children:s.jsxs("span",{className:"text-lg font-bold text-green-800",children:["Change: ",Gt(P-t.total)]})}),P>0&&P<t.total&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:s.jsxs("span",{className:"text-sm text-red-800",children:["Insufficient amount. Need ",Gt(t.total-P)," more."]})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>L(!1),className:"flex-1 btn btn-outline",children:"Cancel"}),s.jsx("button",{onClick:Q,disabled:P<t.total,className:"flex-1 btn btn-primary",children:"Complete Sale"})]})]})]})}),j&&B&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(lf,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sale Completed!"})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4 font-mono text-sm",children:[s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("h4",{className:"font-bold",children:y.storeName}),s.jsx("p",{className:"text-xs",children:"Receipt"})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-2 mb-2",children:[s.jsxs("p",{children:["Transaction: #",B.transactionNumber]}),s.jsxs("p",{children:["Date: ",_r(B.createdAt,"MMM dd, yyyy hh:mm a")]}),s.jsxs("p",{children:["Cashier: ",(Oe=B.cashier)==null?void 0:Oe.firstName," ",(I=B.cashier)==null?void 0:I.lastName]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-2 mb-2",children:B.items.map(D=>{var G;return s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{children:[(G=D.product)==null?void 0:G.name," x",D.quantity]}),s.jsx("span",{children:Gt(D.totalPrice)})]},D.id)})}),s.jsxs("div",{className:"border-t border-gray-200 pt-2 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Gt(B.subtotal)})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Gt(B.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment (cash):"}),s.jsx("span",{children:Gt(B.paymentAmount)})]}),B.changeAmount>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Change:"}),s.jsx("span",{children:Gt(B.changeAmount)})]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:ie,className:"flex-1 btn btn-outline",children:[s.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Print"]}),s.jsxs("button",{onClick:ge,className:"flex-1 btn btn-outline",children:[s.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Thermal Print"]}),s.jsx("button",{onClick:()=>k(!1),className:"flex-1 btn btn-primary",children:"Done"})]})]})})]})},Md=({isOpen:n,onClose:e,onScan:t,mode:r="sale",title:a,placeholder:i})=>{const[c,u]=ft.useState(""),[d,y]=ft.useState(!1),[x,b]=ft.useState([]);ft.useEffect(()=>{n||(u(""),y(!1),b([]))},[n]),ft.useEffect(()=>{let j,k="",B;const K=Z=>{!n||!d||(Z.target===document.body&&Z.preventDefault(),j&&clearTimeout(j),B&&clearTimeout(B),Z.key==="Enter"?k.length>=3?(w(k),k=""):c.length>=3&&w(c):Z.key==="Escape"?(y(!1),u(""),k=""):Z.key.length===1&&/[A-Za-z0-9\-_\.]/.test(Z.key)&&(k+=Z.key,u(R=>R+Z.key),B=setTimeout(()=>{k.length>=3&&(w(k),k="")},100),j=setTimeout(()=>{c.length>=2&&w(c+Z.key)},1e3)))};return d&&(document.addEventListener("keydown",K),document.body.focus()),()=>{document.removeEventListener("keydown",K),j&&clearTimeout(j),B&&clearTimeout(B)}},[n,d,c]);const w=j=>{const k=j.trim().toUpperCase();k.length>=3&&(b(B=>[k,...B.slice(0,4)]),t(k,r),u(""),y(!1))},m=()=>{w(c)},P=j=>{t(j,r)},_=()=>{switch(r){case"sale":return{icon:Ga,title:a||"Scan Product for Sale",description:"Scan barcode to add product to cart",color:"blue"};case"inventory":return{icon:As,title:a||"Scan Product for Inventory",description:"Scan barcode to find and edit product",color:"green"};case"stock-adjustment":return{icon:uo,title:a||"Scan for Stock Adjustment",description:"Scan barcode to adjust stock levels",color:"orange"};case"quick-sale":return{icon:_o,title:a||"Quick Sale Scanner",description:"Rapid scanning for multiple items",color:"purple"};default:return{icon:ac,title:a||"Scan Barcode",description:"Point scanner at barcode",color:"blue"}}};if(!n)return null;const E=_(),L=E.icon;return s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.title}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(wa,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:`p-4 rounded-full bg-${E.color}-100`,children:s.jsx(L,{className:`h-12 w-12 text-${E.color}-600`})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-2",children:d?"Scanning... Point scanner at barcode":"Ready to scan"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:E.description}),s.jsxs("div",{className:"bg-gray-100 border rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Scanned Code:"}),s.jsx("p",{className:"font-mono text-lg font-semibold min-h-[28px]",children:c||i||"No code scanned yet"})]})]}),s.jsx("div",{className:"space-y-3",children:d?s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>y(!1),className:"btn btn-outline w-full",children:"Stop Scanning"}),c&&s.jsx("button",{onClick:m,className:"btn btn-success w-full",disabled:c.length<3,children:"Use This Code"})]}):s.jsxs("button",{onClick:()=>y(!0),className:"btn btn-primary w-full flex items-center justify-center",children:[s.jsx(ac,{className:"h-4 w-4 mr-2"}),"Start Scanning"]})}),x.length>0&&s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Scans:"}),s.jsx("div",{className:"space-y-1",children:x.map((j,k)=>s.jsx("button",{onClick:()=>P(j),className:"w-full text-xs bg-gray-50 hover:bg-gray-100 rounded px-2 py-1 font-mono text-left transition-colors",children:j},k))})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1 border-t pt-3",children:[s.jsx("p",{children:" Point barcode scanner at any SKU/barcode"}),s.jsx("p",{children:" Code will be automatically detected"}),s.jsx("p",{children:" Manual entry: type and press Enter"}),s.jsx("p",{children:" Press Escape to cancel"})]})]})]})})},mm=({isOpen:n,onClose:e})=>{const{products:t,updateStock:r}=Fn(),[a,i]=ft.useState(!1),[c,u]=ft.useState([]),[d,y]=ft.useState(null),[x,b]=ft.useState(0),[w,m]=ft.useState(""),[P,_]=ft.useState(!1),[E,L]=ft.useState(null),j=(O,X)=>{L({type:O,message:X}),setTimeout(()=>L(null),3e3)},k=O=>{const X=t.find(oe=>{var C;return oe.sku.toLowerCase()===O.toLowerCase()||((C=oe.barcode)==null?void 0:C.toLowerCase())===O.toLowerCase()});X?(y(X),b(0),m(""),i(!1),j("success",`Product found: ${X.name}`)):(j("error",`Product with SKU "${O}" not found`),i(!1))},B=()=>{if(!d||x===0)return;const O=d.quantity+x;if(O<0){j("error","Cannot reduce stock below zero");return}const X={product:d,currentStock:d.quantity,newStock:O,adjustment:x,reason:w||"Manual adjustment"};u(oe=>[...oe,X]),y(null),b(0),m(""),j("success","Adjustment added to batch")},K=O=>{u(X=>X.filter((oe,C)=>C!==O))},Z=async()=>{if(c.length!==0){_(!0);try{for(const O of c)await r(O.product.id,O.adjustment);j("success",`Successfully applied ${c.length} stock adjustments`),u([]),setTimeout(()=>{e()},2e3)}catch(O){console.error("Error applying stock adjustments:",O),j("error","Failed to apply some adjustments. Please try again.")}finally{_(!1)}}},R=[{label:"+1",value:1,color:"green"},{label:"+5",value:5,color:"green"},{label:"+10",value:10,color:"green"},{label:"-1",value:-1,color:"red"},{label:"-5",value:-5,color:"red"},{label:"-10",value:-10,color:"red"}];return n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Stock Adjustment"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Scan products to quickly adjust stock levels"})]}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(wa,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[E&&s.jsx("div",{className:`p-4 rounded-lg ${E.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:E.message}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Product Scanner"}),s.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Scan Product"]})]}),d&&s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:d.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",d.sku]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Current Stock: ",s.jsx("span",{className:"font-medium",children:d.quantity})]})]}),s.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600",children:s.jsx(wa,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Adjustments:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(O=>s.jsx("button",{onClick:()=>b(O.value),className:`px-3 py-1 text-sm rounded border transition-colors ${x===O.value?O.color==="green"?"bg-green-100 border-green-300 text-green-800":"bg-red-100 border-red-300 text-red-800":O.color==="green"?"border-green-200 text-green-600 hover:bg-green-50":"border-red-200 text-red-600 hover:bg-red-50"}`,children:O.label},O.label))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment"}),s.jsx("input",{type:"number",value:x,onChange:O=>b(Number(O.target.value)),className:"input",placeholder:"Enter adjustment"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Stock Level"}),s.jsx("input",{type:"number",value:d.quantity+x,readOnly:!0,className:"input bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),s.jsxs("select",{value:w,onChange:O=>m(O.target.value),className:"input",children:[s.jsx("option",{value:"",children:"Select reason"}),s.jsx("option",{value:"Stock count",children:"Stock count"}),s.jsx("option",{value:"Damage",children:"Damage"}),s.jsx("option",{value:"Theft",children:"Theft"}),s.jsx("option",{value:"Expired",children:"Expired"}),s.jsx("option",{value:"Received inventory",children:"Received inventory"}),s.jsx("option",{value:"Correction",children:"Correction"}),s.jsx("option",{value:"Other",children:"Other"})]})]})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsxs("button",{onClick:B,disabled:x===0,className:"btn btn-primary flex items-center",children:[s.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add to Batch"]})})]})]}),c.length>0&&s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-medium text-gray-900",children:["Pending Adjustments (",c.length,")"]}),s.jsxs("button",{onClick:Z,disabled:P,className:"btn btn-success flex items-center",children:[P?s.jsx(xs,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(fd,{className:"h-4 w-4 mr-2"}),"Apply All"]})]})}),s.jsx("div",{className:"max-h-60 overflow-y-auto",children:c.map((O,X)=>s.jsx("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:O.product.name}),s.jsx("button",{onClick:()=>K(X),className:"text-red-500 hover:text-red-700",children:s.jsx(wa,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",O.product.sku]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[s.jsxs("span",{children:["Current: ",s.jsx("strong",{children:O.currentStock})]}),s.jsxs("span",{className:`font-medium ${O.adjustment>0?"text-green-600":"text-red-600"}`,children:[O.adjustment>0?"+":"",O.adjustment]}),s.jsxs("span",{children:["New: ",s.jsx("strong",{children:O.newStock})]}),s.jsxs("span",{className:"text-gray-500",children:["(",O.reason,")"]})]})]})})},X))})]})]})]})}),s.jsx(Md,{isOpen:a,onClose:()=>i(!1),onScan:k,mode:"stock-adjustment",placeholder:"Scan product barcode..."})]}):null},gm=()=>{var Rt,tr,Xn;const{products:n,categories:e,addProduct:t,updateProduct:r,deleteProduct:a,addCategory:i,updateCategory:c,deleteCategory:u,auth:d}=Fn(),[y,x]=ft.useState(""),[b,w]=ft.useState(""),[m,P]=ft.useState(!1),[_,E]=ft.useState(!1),[L,j]=ft.useState(!1),[k,B]=ft.useState(!1),[K,Z]=ft.useState(null),[R,O]=ft.useState(null),[X,oe]=ft.useState("name"),[C,N]=ft.useState("asc"),[q,V]=ft.useState(!1),[he,Y]=ft.useState([]),[Q,ne]=ft.useState("all"),[ie,ge]=ft.useState("all"),[Oe,I]=ft.useState(!1),[D,G]=ft.useState(null),[te,ae]=ft.useState(null),{register:ye,handleSubmit:Pe,reset:fe,setValue:Je,watch:et,formState:{errors:Ve,isSubmitting:lt}}=No(),{register:Ft,handleSubmit:qe,reset:le,formState:{errors:Mt,isSubmitting:jt}}=No(),rt=et("sku"),J=(Ee,gt)=>{G({type:Ee,message:gt}),setTimeout(()=>G(null),3e3)},de=Ee=>{var xt;const gt=(xt=Ee.target.files)==null?void 0:xt[0];if(!gt)return;if(gt.size>5*1024*1024){J("error","Image size must be less than 5MB");return}if(!gt.type.startsWith("image/")){J("error","Please select a valid image file");return}const Dt=new FileReader;Dt.onload=sr=>{var Bt;const Ht=(Bt=sr.target)==null?void 0:Bt.result;ae(Ht),Je("imageUrl",Ht)},Dt.readAsDataURL(gt)},we=()=>{ae(null),Je("imageUrl","")},Be=n.filter(Ee=>{var Ht;const gt=Ee.name.toLowerCase().includes(y.toLowerCase())||Ee.sku.toLowerCase().includes(y.toLowerCase())||((Ht=Ee.description)==null?void 0:Ht.toLowerCase().includes(y.toLowerCase())),Dt=!b||Ee.categoryId===b;let xt=!0;Q==="low"?xt=Ee.quantity<=Ee.minStockLevel&&Ee.quantity>0:Q==="out"&&(xt=Ee.quantity===0);let sr=!0;return ie==="active"?sr=Ee.isActive:ie==="inactive"&&(sr=!Ee.isActive),gt&&Dt&&xt&&sr}).sort((Ee,gt)=>{var xt,sr;let Dt=0;switch(X){case"name":Dt=Ee.name.localeCompare(gt.name);break;case"price":Dt=Ee.price-gt.price;break;case"quantity":Dt=Ee.quantity-gt.quantity;break;case"category":const Ht=((xt=e.find(mr=>mr.id===Ee.categoryId))==null?void 0:xt.name)||"",Bt=((sr=e.find(mr=>mr.id===gt.categoryId))==null?void 0:sr.name)||"";Dt=Ht.localeCompare(Bt);break}return C==="asc"?Dt:-Dt}),$e=n.filter(Ee=>Ee.quantity<=Ee.minStockLevel&&Ee.quantity>0),Ue=n.filter(Ee=>Ee.quantity===0),Xe=Ee=>{X===Ee?N(C==="asc"?"desc":"asc"):(oe(Ee),N("asc"))},bt=Ee=>{const gt=Ee.trim();return gt.length>=3&&gt.length<=50&&/^[A-Za-z0-9\-_]+$/.test(gt)},Pt=(Ee,gt)=>n.some(Dt=>Dt.sku.toLowerCase()===Ee.toLowerCase()&&Dt.id!==gt),wt=Ee=>{var gt;Ee?(Z(Ee),ae(Ee.imageUrl||null),fe({name:Ee.name,description:Ee.description||"",sku:Ee.sku,barcode:Ee.barcode||"",price:Ee.price,cost:Ee.cost,quantity:Ee.quantity,minStockLevel:Ee.minStockLevel,categoryId:Ee.categoryId,isActive:Ee.isActive,imageUrl:Ee.imageUrl||"",wholesalePrice:Ee.wholesalePrice||void 0,wholesaleMinQuantity:Ee.wholesaleMinQuantity||void 0})):(Z(null),ae(null),fe({name:"",description:"",sku:"",barcode:"",price:0,cost:0,quantity:0,minStockLevel:5,categoryId:((gt=e[0])==null?void 0:gt.id)||"",isActive:!0,imageUrl:"",wholesalePrice:void 0,wholesaleMinQuantity:void 0})),P(!0)},qt=()=>{P(!1),Z(null),ae(null),fe()},ct=async Ee=>{try{if(I(!0),!bt(Ee.sku)){J("error","Invalid SKU format. Must be 3-50 alphanumeric characters (letters, numbers, hyphens, underscores).");return}if(Pt(Ee.sku,K==null?void 0:K.id)){J("error","SKU already exists. Please use a different SKU.");return}const gt={...Ee,sku:Ee.sku.trim().toUpperCase(),barcode:Ee.barcode||Ee.sku.trim().toUpperCase()};if(K)r(K.id,{...gt,updatedAt:new Date}),J("success","Product updated successfully!");else{const Dt={...gt,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};t(Dt),J("success","Product added successfully!")}qt()}catch(gt){console.error("Error saving product:",gt),J("error","Failed to save product. Please try again.")}finally{I(!1)}},dr=async Ee=>{if(window.confirm(`Are you sure you want to delete "${Ee.name}"? This action cannot be undone.`))try{a(Ee.id),J("success","Product deleted successfully!")}catch(gt){console.error("Error deleting product:",gt),J("error","Failed to delete product. Please try again.")}},Wt=Ee=>{if(he.length===0)return;const gt=Ee==="delete"?`Are you sure you want to delete ${he.length} selected products?`:`Are you sure you want to ${Ee} ${he.length} selected products?`;window.confirm(gt)&&(he.forEach(Dt=>{Ee==="delete"?a(Dt):r(Dt,{isActive:Ee==="activate",updatedAt:new Date})}),Y([]),J("success",`Bulk ${Ee} completed successfully!`))},Or=Ee=>{const gt=Ee.trim().toUpperCase(),Dt=n.find(xt=>xt.sku.toUpperCase()===gt||xt.barcode===Ee);Dt?(wt(Dt),J("success",`Found product: ${Dt.name}`)):(wt(),Je("sku",gt),Je("barcode",gt),J("success","New product form opened with scanned SKU")),j(!1)},Qt=Ee=>{Y(gt=>gt.includes(Ee)?gt.filter(Dt=>Dt!==Ee):[...gt,Ee])},ut=()=>{he.length===Be.length?Y([]):Y(Be.map(Ee=>Ee.id))},zr=()=>{const Ee=["Name","SKU","Category","Price","Cost","Quantity","Min Stock","Status"],gt=Be.map(Bt=>{var hr;const mr=((hr=e.find(Hr=>Hr.id===Bt.categoryId))==null?void 0:hr.name)||"N/A";return[Bt.name,Bt.sku,mr,Bt.price.toFixed(2),Bt.cost.toFixed(2),Bt.quantity,Bt.minStockLevel,Bt.isActive?"Active":"Inactive"]}),Dt=[Ee,...gt].map(Bt=>Bt.join(",")).join(`
`),xt=new Blob([Dt],{type:"text/csv"}),sr=window.URL.createObjectURL(xt),Ht=document.createElement("a");Ht.href=sr,Ht.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,Ht.click(),window.URL.revokeObjectURL(sr),J("success","Inventory exported to CSV successfully!")},Vt=Ee=>{Ee?(O(Ee),le({name:Ee.name,description:Ee.description||""})):(O(null),le({name:"",description:""})),E(!0)},gn=()=>{E(!1),O(null),le()},at=async Ee=>{try{if(R)c(R.id,{...Ee,updatedAt:new Date}),J("success","Category updated successfully!");else{const gt={...Ee,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};i(gt),J("success","Category added successfully!")}gn()}catch(gt){console.error("Error saving category:",gt),J("error","Failed to save category. Please try again.")}},un=async Ee=>{try{const gt=n.filter(Dt=>Dt.categoryId===Ee.id).length;if(gt>0){if(!window.confirm(`This category contains ${gt} products. Are you sure you want to delete it? You'll need to reassign those products to other categories first.`))return;J("error",`Cannot delete category. ${gt} products are using this category. Please reassign them first.`);return}window.confirm(`Are you sure you want to delete the category "${Ee.name}"? This action cannot be undone.`)&&(u(Ee.id),J("success","Category deleted successfully!"))}catch(gt){console.error("Error deleting category:",gt),J("error",gt.message||"Failed to delete category. Please try again.")}},rn=((Rt=d.user)==null?void 0:Rt.role)==="admin"||((tr=d.user)==null?void 0:tr.role)==="manager",lr=((Xn=d.user)==null?void 0:Xn.role)==="admin";return s.jsxs("div",{className:"space-y-6",children:[D&&s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${D.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center",children:[D.type==="success"?s.jsx(rl,{className:"h-5 w-5 mr-2"}):s.jsx(hd,{className:"h-5 w-5 mr-2"}),D.message]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),s.jsx("p",{className:"text-gray-500",children:"Manage your products and stock levels"}),s.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[s.jsxs("span",{children:["Total: ",n.length]}),s.jsxs("span",{children:["Active: ",n.filter(Ee=>Ee.isActive).length]}),s.jsxs("span",{children:["Low Stock: ",$e.length]}),s.jsxs("span",{children:["Out of Stock: ",Ue.length]})]})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:rn&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>B(!0),className:"btn btn-outline bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100",children:[s.jsx(uo,{className:"h-4 w-4 mr-2"}),"Stock Adjustment"]}),s.jsxs("button",{onClick:()=>Vt(),className:"btn btn-outline",children:[s.jsx(cf,{className:"h-4 w-4 mr-2"}),"Manage Categories"]}),s.jsxs("button",{onClick:zr,className:"btn btn-outline",children:[s.jsx(al,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs("button",{onClick:()=>wt(),className:"btn btn-primary",children:[s.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$e.length>0&&s.jsx("div",{className:"card bg-orange-50 border-orange-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(bo,{className:"h-5 w-5 text-orange-500 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-orange-800 font-medium",children:"Low Stock Alert"}),s.jsxs("p",{className:"text-orange-700 text-sm",children:[$e.length," product(s) are running low on stock"]})]})]})}),Ue.length>0&&s.jsx("div",{className:"card bg-red-50 border-red-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(uf,{className:"h-5 w-5 text-red-500 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800 font-medium",children:"Out of Stock"}),s.jsxs("p",{className:"text-red-700 text-sm",children:[Ue.length," product(s) are out of stock"]})]})]})})]}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, SKU, or description...",value:y,onChange:Ee=>x(Ee.target.value),className:"input pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[rn&&s.jsxs("button",{onClick:()=>j(!0),className:"btn btn-outline flex items-center",title:"Scan SKU to find product",children:[s.jsx(ac,{className:"h-4 w-4 mr-2"}),"Scan SKU"]}),s.jsxs("button",{onClick:()=>V(!q),className:"btn btn-outline flex items-center",children:[s.jsx(df,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]}),q&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("select",{value:b,onChange:Ee=>w(Ee.target.value),className:"input",children:[s.jsx("option",{value:"",children:"All Categories"}),e.map(Ee=>s.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))]}),s.jsxs("select",{value:Q,onChange:Ee=>ne(Ee.target.value),className:"input",children:[s.jsx("option",{value:"all",children:"All Stock Levels"}),s.jsx("option",{value:"low",children:"Low Stock"}),s.jsx("option",{value:"out",children:"Out of Stock"})]}),s.jsxs("select",{value:ie,onChange:Ee=>ge(Ee.target.value),className:"input",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]}),s.jsxs("button",{onClick:()=>{w(""),ne("all"),ge("all"),x("")},className:"btn btn-outline",children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})}),he.length>0&&rn&&s.jsx("div",{className:"card bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-blue-900 font-medium",children:[he.length," product(s) selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Wt("activate"),className:"btn btn-outline btn-sm",children:"Activate"}),s.jsx("button",{onClick:()=>Wt("deactivate"),className:"btn btn-outline btn-sm",children:"Deactivate"}),lr&&s.jsx("button",{onClick:()=>Wt("delete"),className:"btn btn-outline btn-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})}),s.jsx("div",{className:"card overflow-hidden",children:s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[rn&&s.jsx("th",{className:"w-12",children:s.jsx("input",{type:"checkbox",checked:he.length===Be.length&&Be.length>0,onChange:ut,className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),s.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("name"),children:s.jsxs("div",{className:"flex items-center",children:["Product",X==="name"&&s.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),s.jsx("th",{children:"SKU"}),s.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("category"),children:s.jsxs("div",{className:"flex items-center",children:["Category",X==="category"&&s.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),s.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("price"),children:s.jsxs("div",{className:"flex items-center",children:["Price",X==="price"&&s.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),s.jsx("th",{children:"Cost"}),s.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Xe("quantity"),children:s.jsxs("div",{className:"flex items-center",children:["Stock",X==="quantity"&&s.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]})}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Be.map(Ee=>{const gt=e.find(sr=>sr.id===Ee.categoryId),Dt=Ee.quantity<=Ee.minStockLevel&&Ee.quantity>0,xt=Ee.quantity===0;return s.jsxs("tr",{className:`
                    ${xt?"bg-red-50":Dt?"bg-orange-50":""}
                    ${he.includes(Ee.id)?"bg-blue-50":""}
                  `,children:[rn&&s.jsx("td",{children:s.jsx("input",{type:"checkbox",checked:he.includes(Ee.id),onChange:()=>Qt(Ee.id),className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 overflow-hidden",children:Ee.imageUrl?s.jsx("img",{src:Ee.imageUrl,alt:Ee.name,className:"w-full h-full object-cover"}):s.jsx(As,{className:"h-5 w-5 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:Ee.name}),Ee.description&&s.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:Ee.description})]})]})}),s.jsx("td",{children:s.jsx("span",{className:"text-sm font-mono",children:Ee.sku})}),s.jsx("td",{children:s.jsx("span",{className:"text-sm",children:(gt==null?void 0:gt.name)||"N/A"})}),s.jsx("td",{children:s.jsx("span",{className:"font-medium",children:Gt(Ee.price)})}),s.jsx("td",{children:s.jsx("span",{className:"text-sm text-gray-500",children:Gt(Ee.cost)})}),s.jsxs("td",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:`font-medium ${xt?"text-red-600":Dt?"text-orange-600":"text-gray-900"}`,children:Ee.quantity}),(Dt||xt)&&s.jsx(bo,{className:`h-4 w-4 ml-1 ${xt?"text-red-500":"text-orange-500"}`})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",Ee.minStockLevel]})]}),s.jsx("td",{children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Ee.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Ee.isActive?"Active":"Inactive"})}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>wt(Ee),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Product",children:s.jsx(uo,{className:"h-4 w-4"})}),lr&&s.jsx("button",{onClick:()=>dr(Ee),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Product",children:s.jsx(il,{className:"h-4 w-4"})})]})})]},Ee.id)})})]}),Be.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(As,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No products found"}),(y||b||Q!=="all"||ie!=="all")&&s.jsx("button",{onClick:()=>{x(""),w(""),ne("all"),ge("all")},className:"mt-2 text-blue-600 hover:text-blue-500 text-sm",children:"Clear filters"})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-full overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Management"}),s.jsx("button",{onClick:gn,className:"text-gray-400 hover:text-gray-600",children:s.jsx(wa,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:R?"Edit Category":"Add New Category"}),s.jsxs("form",{onSubmit:qe(at),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),s.jsx("input",{...Ft("name",{required:"Category name is required",minLength:{value:2,message:"Category name must be at least 2 characters"}}),className:"input",placeholder:"Enter category name"}),Mt.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Mt.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("input",{...Ft("description"),className:"input",placeholder:"Enter category description (optional)"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[R&&s.jsx("button",{type:"button",onClick:()=>{O(null),le({name:"",description:""})},className:"btn btn-outline",children:"Cancel Edit"}),s.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:jt,children:[jt?s.jsx(xs,{className:"h-4 w-4 mr-2 animate-spin"}):null,R?"Update Category":"Add Category"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Existing Categories"}),e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(hf,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No categories found"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Add your first category above"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(Ee=>{const gt=n.filter(Dt=>Dt.categoryId===Ee.id).length;return s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:Ee.name}),Ee.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Ee.description}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[gt," product",gt!==1?"s":""]})]}),s.jsxs("div",{className:"flex space-x-1 ml-2",children:[s.jsx("button",{onClick:()=>Vt(Ee),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Category",children:s.jsx(uo,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>un(Ee),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Category",disabled:gt>0,children:s.jsx(il,{className:"h-4 w-4"})})]})]})},Ee.id)})})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:gn,className:"btn btn-outline",children:"Close"})})})]})}),m&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-full overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:K?"Edit Product":"Add New Product"}),s.jsxs("form",{onSubmit:Pe(ct),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 hover:bg-gray-100 transition-colors duration-200 group",children:te?s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("img",{src:te,alt:"Product preview",className:"w-full h-full object-cover rounded-lg"}),s.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center",children:[s.jsx("button",{type:"button",onClick:we,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200 shadow-lg",children:s.jsx(wa,{className:"h-4 w-4"})}),s.jsxs("label",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:[s.jsxs("div",{className:"bg-white bg-opacity-90 rounded-lg px-3 py-2 flex items-center space-x-2 text-gray-700 hover:bg-opacity-100 transition-all duration-200",children:[s.jsx(sl,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Change Image"})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]})]})]}):s.jsxs("label",{className:"cursor-pointer w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-gray-600 transition-colors duration-200",children:[s.jsx(ff,{className:"h-12 w-12 mb-3"}),s.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload image"}),s.jsx("p",{className:"text-xs text-gray-400",children:"or drag and drop"}),s.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]})})}),!te&&s.jsxs("label",{className:"btn btn-outline w-full cursor-pointer flex items-center justify-center",children:[s.jsx(sl,{className:"h-4 w-4 mr-2"}),"Upload Image",s.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"hidden"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Maximum file size: 5MB"})]}),s.jsx("input",{...ye("imageUrl"),type:"hidden"})]})]}),s.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),s.jsx("input",{...ye("name",{required:"Product name is required",minLength:{value:2,message:"Product name must be at least 2 characters"}}),className:"input",placeholder:"Enter product name"}),Ve.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),s.jsx("input",{...ye("sku",{required:"SKU is required",minLength:{value:3,message:"SKU must be at least 3 characters"},maxLength:{value:50,message:"SKU must be no more than 50 characters"},pattern:{value:/^[A-Za-z0-9\-_]+$/,message:"SKU can only contain letters, numbers, hyphens, and underscores"},validate:{unique:Ee=>Pt(Ee,K==null?void 0:K.id)?"SKU already exists":!0}}),className:"input",placeholder:"Enter SKU (e.g., PROD-001, SKU123)",maxLength:50}),Ve.sku&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.sku.message}),rt&&!bt(rt)&&s.jsx("p",{className:"mt-1 text-sm text-orange-600",children:"SKU should be 3-50 alphanumeric characters"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),s.jsxs("select",{...ye("categoryId",{required:"Category is required"}),className:"input",children:[s.jsx("option",{value:"",children:"Select a category"}),e.map(Ee=>s.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))]}),Ve.categoryId&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.categoryId.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),s.jsx("input",{...ye("barcode"),className:"input",placeholder:"Enter barcode (optional)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),s.jsx("input",{...ye("price",{required:"Price is required",min:{value:.01,message:"Price must be greater than 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),Ve.price&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.price.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost *"}),s.jsx("input",{...ye("cost",{required:"Cost is required",min:{value:0,message:"Cost must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),Ve.cost&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.cost.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),s.jsx("input",{...ye("wholesalePrice",{min:{value:.01,message:"Wholesale price must be greater than 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00 (optional)"}),Ve.wholesalePrice&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.wholesalePrice.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Min Quantity"}),s.jsx("input",{...ye("wholesaleMinQuantity",{min:{value:1,message:"Minimum quantity must be at least 1"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"0 (optional)"}),Ve.wholesaleMinQuantity&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.wholesaleMinQuantity.message}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum quantity to apply wholesale pricing"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),s.jsx("input",{...ye("quantity",{required:"Quantity is required",min:{value:0,message:"Quantity must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"0"}),Ve.quantity&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.quantity.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock Level *"}),s.jsx("input",{...ye("minStockLevel",{required:"Minimum stock level is required",min:{value:0,message:"Minimum stock level must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"5"}),Ve.minStockLevel&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Ve.minStockLevel.message})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{...ye("description"),rows:3,className:"input",placeholder:"Enter product description (optional)"})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{...ye("isActive"),type:"checkbox",className:"h-4 w-4 text-blue-600 rounded border-gray-300"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active (available for sale)"})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:qt,className:"btn btn-outline",disabled:lt||Oe,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:lt||Oe,children:[lt||Oe?s.jsx(xs,{className:"h-4 w-4 mr-2 animate-spin"}):null,K?"Update Product":"Add Product"]})]})]})]})}),s.jsx(Md,{isOpen:L,onClose:()=>j(!1),onScan:Or,mode:"inventory",title:"Scan Product for Inventory",placeholder:"Scan product barcode to find or create..."}),s.jsx(mm,{isOpen:k,onClose:()=>B(!1)})]})};var An=Uint8Array,Jn=Uint16Array,Ec=Int32Array,xl=new An([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wl=new An([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dc=new An([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rd=function(n,e){for(var t=new Jn(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var a=new Ec(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)a[i]=i-t[r]<<5|r;return{b:t,r:a}},qd=Rd(xl,2),Bd=qd.b,hc=qd.r;Bd[28]=258,hc[258]=28;var Ud=Rd(wl,0),ym=Ud.b,Ru=Ud.r,fc=new Jn(32768);for(var jr=0;jr<32768;++jr){var Ba=(jr&43690)>>1|(jr&21845)<<1;Ba=(Ba&52428)>>2|(Ba&13107)<<2,Ba=(Ba&61680)>>4|(Ba&3855)<<4,fc[jr]=((Ba&65280)>>8|(Ba&255)<<8)>>1}var Ki=function(n,e,t){for(var r=n.length,a=0,i=new Jn(e);a<r;++a)n[a]&&++i[n[a]-1];var c=new Jn(e);for(a=1;a<e;++a)c[a]=c[a-1]+i[a-1]<<1;var u;if(t){u=new Jn(1<<e);var d=15-e;for(a=0;a<r;++a)if(n[a])for(var y=a<<4|n[a],x=e-n[a],b=c[n[a]-1]++<<x,w=b|(1<<x)-1;b<=w;++b)u[fc[b]>>d]=y}else for(u=new Jn(r),a=0;a<r;++a)n[a]&&(u[a]=fc[c[n[a]-1]++]>>15-n[a]);return u},Qa=new An(288);for(var jr=0;jr<144;++jr)Qa[jr]=8;for(var jr=144;jr<256;++jr)Qa[jr]=9;for(var jr=256;jr<280;++jr)Qa[jr]=7;for(var jr=280;jr<288;++jr)Qa[jr]=8;var So=new An(32);for(var jr=0;jr<32;++jr)So[jr]=5;var vm=Ki(Qa,9,0),bm=Ki(Qa,9,1),xm=Ki(So,5,0),wm=Ki(So,5,1),Vl=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},xi=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},$l=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Dc=function(n){return(n+7)/8|0},zd=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new An(n.subarray(e,t))},Nm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ni=function(n,e,t){var r=new Error(e||Nm[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Ni),!t)throw r;return r},Sm=function(n,e,t,r){var a=n.length,i=r?r.length:0;if(!a||e.f&&!e.l)return t||new An(0);var c=!t,u=c||e.i!=2,d=e.i;c&&(t=new An(a*3));var y=function(et){var Ve=t.length;if(et>Ve){var lt=new An(Math.max(Ve*2,et));lt.set(t),t=lt}},x=e.f||0,b=e.p||0,w=e.b||0,m=e.l,P=e.d,_=e.m,E=e.n,L=a*8;do{if(!m){x=xi(n,b,1);var j=xi(n,b+1,3);if(b+=3,j)if(j==1)m=bm,P=wm,_=9,E=5;else if(j==2){var Z=xi(n,b,31)+257,R=xi(n,b+10,15)+4,O=Z+xi(n,b+5,31)+1;b+=14;for(var X=new An(O),oe=new An(19),C=0;C<R;++C)oe[dc[C]]=xi(n,b+C*3,7);b+=R*3;for(var N=Vl(oe),q=(1<<N)-1,V=Ki(oe,N,1),C=0;C<O;){var he=V[xi(n,b,q)];b+=he&15;var k=he>>4;if(k<16)X[C++]=k;else{var Y=0,Q=0;for(k==16?(Q=3+xi(n,b,3),b+=2,Y=X[C-1]):k==17?(Q=3+xi(n,b,7),b+=3):k==18&&(Q=11+xi(n,b,127),b+=7);Q--;)X[C++]=Y}}var ne=X.subarray(0,Z),ie=X.subarray(Z);_=Vl(ne),E=Vl(ie),m=Ki(ne,_,1),P=Ki(ie,E,1)}else Ni(1);else{var k=Dc(b)+4,B=n[k-4]|n[k-3]<<8,K=k+B;if(K>a){d&&Ni(0);break}u&&y(w+B),t.set(n.subarray(k,K),w),e.b=w+=B,e.p=b=K*8,e.f=x;continue}if(b>L){d&&Ni(0);break}}u&&y(w+131072);for(var ge=(1<<_)-1,Oe=(1<<E)-1,I=b;;I=b){var Y=m[$l(n,b)&ge],D=Y>>4;if(b+=Y&15,b>L){d&&Ni(0);break}if(Y||Ni(2),D<256)t[w++]=D;else if(D==256){I=b,m=null;break}else{var G=D-254;if(D>264){var C=D-257,te=xl[C];G=xi(n,b,(1<<te)-1)+Bd[C],b+=te}var ae=P[$l(n,b)&Oe],ye=ae>>4;ae||Ni(3),b+=ae&15;var ie=ym[ye];if(ye>3){var te=wl[ye];ie+=$l(n,b)&(1<<te)-1,b+=te}if(b>L){d&&Ni(0);break}u&&y(w+131072);var Pe=w+G;if(w<ie){var fe=i-ie,Je=Math.min(ie,Pe);for(fe+w<0&&Ni(3);w<Je;++w)t[w]=r[fe+w]}for(;w<Pe;++w)t[w]=t[w-ie]}}e.l=m,e.p=I,e.b=w,e.f=x,m&&(x=1,e.m=_,e.d=P,e.n=E)}while(!x);return w!=t.length&&c?zd(t,0,w):t.subarray(0,w)},ba=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},oo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Gl=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var a=t.length,i=t.slice();if(!a)return{t:Wd,l:0};if(a==1){var c=new An(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(K,Z){return K.f-Z.f}),t.push({s:-1,f:25001});var u=t[0],d=t[1],y=0,x=1,b=2;for(t[0]={s:-1,f:u.f+d.f,l:u,r:d};x!=a-1;)u=t[t[y].f<t[b].f?y++:b++],d=t[y!=x&&t[y].f<t[b].f?y++:b++],t[x++]={s:-1,f:u.f+d.f,l:u,r:d};for(var w=i[0].s,r=1;r<a;++r)i[r].s>w&&(w=i[r].s);var m=new Jn(w+1),P=pc(t[x-1],m,0);if(P>e){var r=0,_=0,E=P-e,L=1<<E;for(i.sort(function(Z,R){return m[R.s]-m[Z.s]||Z.f-R.f});r<a;++r){var j=i[r].s;if(m[j]>e)_+=L-(1<<P-m[j]),m[j]=e;else break}for(_>>=E;_>0;){var k=i[r].s;m[k]<e?_-=1<<e-m[k]++-1:++r}for(;r>=0&&_;--r){var B=i[r].s;m[B]==e&&(--m[B],++_)}P=e}return{t:new An(m),l:P}},pc=function(n,e,t){return n.s==-1?Math.max(pc(n.l,e,t+1),pc(n.r,e,t+1)):e[n.s]=t},qu=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Jn(++e),r=0,a=n[0],i=1,c=function(d){t[r++]=d},u=1;u<=e;++u)if(n[u]==a&&u!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=n[u]}return{c:t.subarray(0,r),n:e}},lo=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Hd=function(n,e,t){var r=t.length,a=Dc(e+2);n[a]=r&255,n[a+1]=r>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var i=0;i<r;++i)n[a+i+4]=t[i];return(a+4+r)*8},Bu=function(n,e,t,r,a,i,c,u,d,y,x){ba(e,x++,t),++a[256];for(var b=Gl(a,15),w=b.t,m=b.l,P=Gl(i,15),_=P.t,E=P.l,L=qu(w),j=L.c,k=L.n,B=qu(_),K=B.c,Z=B.n,R=new Jn(19),O=0;O<j.length;++O)++R[j[O]&31];for(var O=0;O<K.length;++O)++R[K[O]&31];for(var X=Gl(R,7),oe=X.t,C=X.l,N=19;N>4&&!oe[dc[N-1]];--N);var q=y+5<<3,V=lo(a,Qa)+lo(i,So)+c,he=lo(a,w)+lo(i,_)+c+14+3*N+lo(R,oe)+2*R[16]+3*R[17]+7*R[18];if(d>=0&&q<=V&&q<=he)return Hd(e,x,n.subarray(d,d+y));var Y,Q,ne,ie;if(ba(e,x,1+(he<V)),x+=2,he<V){Y=Ki(w,m,0),Q=w,ne=Ki(_,E,0),ie=_;var ge=Ki(oe,C,0);ba(e,x,k-257),ba(e,x+5,Z-1),ba(e,x+10,N-4),x+=14;for(var O=0;O<N;++O)ba(e,x+3*O,oe[dc[O]]);x+=3*N;for(var Oe=[j,K],I=0;I<2;++I)for(var D=Oe[I],O=0;O<D.length;++O){var G=D[O]&31;ba(e,x,ge[G]),x+=oe[G],G>15&&(ba(e,x,D[O]>>5&127),x+=D[O]>>12)}}else Y=vm,Q=Qa,ne=xm,ie=So;for(var O=0;O<u;++O){var te=r[O];if(te>255){var G=te>>18&31;oo(e,x,Y[G+257]),x+=Q[G+257],G>7&&(ba(e,x,te>>23&31),x+=xl[G]);var ae=te&31;oo(e,x,ne[ae]),x+=ie[ae],ae>3&&(oo(e,x,te>>5&8191),x+=wl[ae])}else oo(e,x,Y[te]),x+=Q[te]}return oo(e,x,Y[256]),x+Q[256]},jm=new Ec([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wd=new An(0),Am=function(n,e,t,r,a,i){var c=i.z||n.length,u=new An(r+c+5*(1+Math.ceil(c/7e3))+a),d=u.subarray(r,u.length-a),y=i.l,x=(i.r||0)&7;if(e){x&&(d[0]=i.r>>3);for(var b=jm[e-1],w=b>>13,m=b&8191,P=(1<<t)-1,_=i.p||new Jn(32768),E=i.h||new Jn(P+1),L=Math.ceil(t/3),j=2*L,k=function(Ft){return(n[Ft]^n[Ft+1]<<L^n[Ft+2]<<j)&P},B=new Ec(25e3),K=new Jn(288),Z=new Jn(32),R=0,O=0,X=i.i||0,oe=0,C=i.w||0,N=0;X+2<c;++X){var q=k(X),V=X&32767,he=E[q];if(_[V]=he,E[q]=V,C<=X){var Y=c-X;if((R>7e3||oe>24576)&&(Y>423||!y)){x=Bu(n,d,0,B,K,Z,O,oe,N,X-N,x),oe=R=O=0,N=X;for(var Q=0;Q<286;++Q)K[Q]=0;for(var Q=0;Q<30;++Q)Z[Q]=0}var ne=2,ie=0,ge=m,Oe=V-he&32767;if(Y>2&&q==k(X-Oe))for(var I=Math.min(w,Y)-1,D=Math.min(32767,X),G=Math.min(258,Y);Oe<=D&&--ge&&V!=he;){if(n[X+ne]==n[X+ne-Oe]){for(var te=0;te<G&&n[X+te]==n[X+te-Oe];++te);if(te>ne){if(ne=te,ie=Oe,te>I)break;for(var ae=Math.min(Oe,te-2),ye=0,Q=0;Q<ae;++Q){var Pe=X-Oe+Q&32767,fe=_[Pe],Je=Pe-fe&32767;Je>ye&&(ye=Je,he=Pe)}}}V=he,he=_[V],Oe+=V-he&32767}if(ie){B[oe++]=268435456|hc[ne]<<18|Ru[ie];var et=hc[ne]&31,Ve=Ru[ie]&31;O+=xl[et]+wl[Ve],++K[257+et],++Z[Ve],C=X+ne,++R}else B[oe++]=n[X],++K[n[X]]}}for(X=Math.max(X,C);X<c;++X)B[oe++]=n[X],++K[n[X]];x=Bu(n,d,y,B,K,Z,O,oe,N,X-N,x),y||(i.r=x&7|d[x/8|0]<<3,x-=7,i.h=E,i.p=_,i.i=X,i.w=C)}else{for(var X=i.w||0;X<c+y;X+=65535){var lt=X+65535;lt>=c&&(d[x/8|0]=y,lt=c),x=Hd(d,x+1,n.subarray(X,lt))}i.i=c}return zd(u,0,r+Dc(x)+a)},Kd=function(){var n=1,e=0;return{p:function(t){for(var r=n,a=e,i=t.length|0,c=0;c!=i;){for(var u=Math.min(c+2655,i);c<u;++c)a+=r+=t[c];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}n=r,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},_m=function(n,e,t,r,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),c=new An(i.length+n.length);c.set(i),c.set(n,i.length),n=c,a.w=i.length}return Am(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,a)},Vd=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Pm=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=Kd();a.p(e.dictionary),Vd(n,2,a.d())}},Lm=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ni(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ni(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function mc(n,e){e||(e={});var t=Kd();t.p(n);var r=_m(n,e,e.dictionary?6:2,4);return Pm(r,e),Vd(r,r.length-4,t.d()),r}function Cm(n,e){return Sm(n.subarray(Lm(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var km=typeof TextDecoder<"u"&&new TextDecoder,Fm=0;try{km.decode(Wd,{stream:!0}),Fm=1}catch{}var Ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Yl(){Ut.console&&typeof Ut.console.log=="function"&&Ut.console.log.apply(Ut.console,arguments)}var yr={log:Yl,warn:function(n){Ut.console&&(typeof Ut.console.warn=="function"?Ut.console.warn.apply(Ut.console,arguments):Yl.call(null,arguments))},error:function(n){Ut.console&&(typeof Ut.console.error=="function"?Ut.console.error.apply(Ut.console,arguments):Yl(n))}};function Ql(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ps(r.response,e,t)},r.onerror=function(){yr.error("could not download file")},r.send()}function Uu(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Go(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var po,gc,ps=Ut.saveAs||((typeof window>"u"?"undefined":br(window))!=="object"||window!==Ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ut.URL||Ut.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?Uu(a.href)?Ql(n,e,t):Go(a,a.target="_blank"):Go(a)):(a.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Go(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Uu(n))Ql(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Go(r)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:br(i)!=="object"&&(yr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Ql(n,e,t);var a=n.type==="application/octet-stream",i=/constructor/i.test(Ut.HTMLElement)||Ut.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&(typeof FileReader>"u"?"undefined":br(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var x=u.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=x:location=x,r=null},u.readAsDataURL(n)}else{var d=Ut.URL||Ut.webkitURL,y=d.createObjectURL(n);r?r.location=y:location.href=y,r=null,setTimeout(function(){d.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $d(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var a=t[r].re,i=t[r].process,c=a.exec(n);c&&(e=i(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),y=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),y.length==1&&(y="0"+y),"#"+u+d+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Jl(n,e){var t=n[0],r=n[1],a=n[2],i=n[3];t=xn(t,r,a,i,e[0],7,-680876936),i=xn(i,t,r,a,e[1],12,-389564586),a=xn(a,i,t,r,e[2],17,606105819),r=xn(r,a,i,t,e[3],22,-1044525330),t=xn(t,r,a,i,e[4],7,-176418897),i=xn(i,t,r,a,e[5],12,1200080426),a=xn(a,i,t,r,e[6],17,-1473231341),r=xn(r,a,i,t,e[7],22,-45705983),t=xn(t,r,a,i,e[8],7,1770035416),i=xn(i,t,r,a,e[9],12,-1958414417),a=xn(a,i,t,r,e[10],17,-42063),r=xn(r,a,i,t,e[11],22,-1990404162),t=xn(t,r,a,i,e[12],7,1804603682),i=xn(i,t,r,a,e[13],12,-40341101),a=xn(a,i,t,r,e[14],17,-1502002290),t=wn(t,r=xn(r,a,i,t,e[15],22,1236535329),a,i,e[1],5,-165796510),i=wn(i,t,r,a,e[6],9,-1069501632),a=wn(a,i,t,r,e[11],14,643717713),r=wn(r,a,i,t,e[0],20,-373897302),t=wn(t,r,a,i,e[5],5,-701558691),i=wn(i,t,r,a,e[10],9,38016083),a=wn(a,i,t,r,e[15],14,-660478335),r=wn(r,a,i,t,e[4],20,-405537848),t=wn(t,r,a,i,e[9],5,568446438),i=wn(i,t,r,a,e[14],9,-1019803690),a=wn(a,i,t,r,e[3],14,-187363961),r=wn(r,a,i,t,e[8],20,1163531501),t=wn(t,r,a,i,e[13],5,-1444681467),i=wn(i,t,r,a,e[2],9,-51403784),a=wn(a,i,t,r,e[7],14,1735328473),t=Nn(t,r=wn(r,a,i,t,e[12],20,-1926607734),a,i,e[5],4,-378558),i=Nn(i,t,r,a,e[8],11,-2022574463),a=Nn(a,i,t,r,e[11],16,1839030562),r=Nn(r,a,i,t,e[14],23,-35309556),t=Nn(t,r,a,i,e[1],4,-1530992060),i=Nn(i,t,r,a,e[4],11,1272893353),a=Nn(a,i,t,r,e[7],16,-155497632),r=Nn(r,a,i,t,e[10],23,-1094730640),t=Nn(t,r,a,i,e[13],4,681279174),i=Nn(i,t,r,a,e[0],11,-358537222),a=Nn(a,i,t,r,e[3],16,-722521979),r=Nn(r,a,i,t,e[6],23,76029189),t=Nn(t,r,a,i,e[9],4,-640364487),i=Nn(i,t,r,a,e[12],11,-421815835),a=Nn(a,i,t,r,e[15],16,530742520),t=Sn(t,r=Nn(r,a,i,t,e[2],23,-995338651),a,i,e[0],6,-198630844),i=Sn(i,t,r,a,e[7],10,1126891415),a=Sn(a,i,t,r,e[14],15,-1416354905),r=Sn(r,a,i,t,e[5],21,-57434055),t=Sn(t,r,a,i,e[12],6,1700485571),i=Sn(i,t,r,a,e[3],10,-1894986606),a=Sn(a,i,t,r,e[10],15,-1051523),r=Sn(r,a,i,t,e[1],21,-2054922799),t=Sn(t,r,a,i,e[8],6,1873313359),i=Sn(i,t,r,a,e[15],10,-30611744),a=Sn(a,i,t,r,e[6],15,-1560198380),r=Sn(r,a,i,t,e[13],21,1309151649),t=Sn(t,r,a,i,e[4],6,-145523070),i=Sn(i,t,r,a,e[11],10,-1120210379),a=Sn(a,i,t,r,e[2],15,718787259),r=Sn(r,a,i,t,e[9],21,-343485551),n[0]=$a(t,n[0]),n[1]=$a(r,n[1]),n[2]=$a(a,n[2]),n[3]=$a(i,n[3])}function Nl(n,e,t,r,a,i){return e=$a($a(e,n),$a(r,i)),$a(e<<a|e>>>32-a,t)}function xn(n,e,t,r,a,i,c){return Nl(e&t|~e&r,n,e,a,i,c)}function wn(n,e,t,r,a,i,c){return Nl(e&r|t&~r,n,e,a,i,c)}function Nn(n,e,t,r,a,i,c){return Nl(e^t^r,n,e,a,i,c)}function Sn(n,e,t,r,a,i,c){return Nl(t^(e|~r),n,e,a,i,c)}function Gd(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Jl(r,Em(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Jl(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Jl(r,a),r}function Em(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}po=Ut.atob.bind(Ut),gc=Ut.btoa.bind(Ut);var zu="0123456789abcdef".split("");function Dm(n){for(var e="",t=0;t<4;t++)e+=zu[n>>8*t+4&15]+zu[n>>8*t&15];return e}function Im(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function yc(n){return Gd(n).map(Im).join("")}var Om=function(n){for(var e=0;e<n.length;e++)n[e]=Dm(n[e]);return n.join("")}(Gd("hello"))!="5d41402abc4b2a76b9719d911017c592";function $a(n,e){if(Om){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function vc(n,e){var t,r,a,i;if(n!==t){for(var c=(a=n,i=1+(256/n.length>>0),new Array(i+1).join(a)),u=[],d=0;d<256;d++)u[d]=d;var y=0;for(d=0;d<256;d++){var x=u[d];y=(y+x+c.charCodeAt(d))%256,u[d]=u[y],u[y]=x}t=n,r=u}else u=r;var b=e.length,w=0,m=0,P="";for(d=0;d<b;d++)m=(m+(x=u[w=(w+1)%256]))%256,u[w]=u[m],u[m]=x,c=u[(u[w]+u[m])%256],P+=String.fromCharCode(e.charCodeAt(d)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Hu={print:4,modify:8,copy:16,"annot-forms":32};function Hs(n,e,t,r){this.v=1,this.r=2;var a=192;n.forEach(function(u){if(Hu.perm!==void 0)throw new Error("Invalid permission: "+u);a+=Hu[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^a)),this.encryptionKey=yc(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=vc(this.encryptionKey,this.padding)}function Ws(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var a=n.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=n[r]}return e}function Wu(n){if(br(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,a){if(a=a||!1,typeof t!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!a],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[t]){var c=e[t][i];try{c[0].apply(n,r)}catch(u){Ut.console&&yr.error("jsPDF PubSub Error",u.message,u)}c[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function jo(n){if(!(this instanceof jo))return new jo(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Yd(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ka(n,e,t,r,a){if(!(this instanceof Ka))return new Ka(n,e,t,r,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Yd.call(this,r,a)}function bs(n,e,t,r,a){if(!(this instanceof bs))return new bs(n,e,t,r,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Yd.call(this,r,a)}function Ot(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],c=[],u=1,d=16,y="S",x=null;br(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,a=n.format||a,i=n.compress||n.compressPdf||i,(x=n.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(d=n.floatPrecision),y=n.defaultPathOperation||"S"),c=n.filters||(i===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var b=n.putOnlyUsedFonts||!1,w={},m={internal:{},__private__:{}};m.__private__.PubSub=Wu;var P="1.3",_=m.__private__.getPdfVersion=function(){return P};m.__private__.setPdfVersion=function(p){P=p};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return E};var L=m.__private__.getPageFormat=function(p){return E[p]};a=a||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},k=j.COMPAT;function B(){this.saveGraphicsState(),le(new xt(ct,0,0,-ct,0,$n()*ct).toString()+" cm"),this.setFontSize(this.getFontSize()/ct),y="n",k=j.ADVANCED}function K(){this.restoreGraphicsState(),y="S",k=j.COMPAT}var Z=m.__private__.combineFontStyleAndFontWeight=function(p,T){if(p=="bold"&&T=="normal"||p=="bold"&&T==400||p=="normal"&&T=="italic"||p=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(p=T==400||T==="normal"?p==="italic"?"italic":"normal":T!=700&&T!=="bold"||p!=="normal"?(T==700?"bold":T)+""+p:"bold"),p};m.advancedAPI=function(p){var T=k===j.COMPAT;return T&&B.call(this),typeof p!="function"||(p(this),T&&K.call(this)),this},m.compatAPI=function(p){var T=k===j.ADVANCED;return T&&K.call(this),typeof p!="function"||(p(this),T&&B.call(this)),this},m.isAdvancedAPI=function(){return k===j.ADVANCED};var R,O=function(p){if(k!==j.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=m.roundToPrecision=m.__private__.roundToPrecision=function(p,T){var se=e||T;if(isNaN(p)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(se).replace(/0+$/,"")};R=m.hpf=m.__private__.hpf=typeof d=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return X(p,d)}:d==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return X(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return X(p,16)};var oe=m.f2=m.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return X(p,2)},C=m.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return X(p,3)},N=m.scale=m.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return k===j.COMPAT?p*ct:k===j.ADVANCED?p:void 0},q=function(p){return k===j.COMPAT?$n()-p:k===j.ADVANCED?p:void 0},V=function(p){return N(q(p))};m.__private__.setPrecision=m.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var he,Y="00000000000000000000000000000000",Q=m.__private__.getFileId=function(){return Y},ne=m.__private__.setFileId=function(p){return Y=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Qr=new Hs(x.userPermissions,x.userPassword,x.ownerPassword,Y)),Y};m.setFileId=function(p){return ne(p),this},m.getFileId=function(){return Q()};var ie=m.__private__.convertDateToPDFDate=function(p){var T=p.getTimezoneOffset(),se=T<0?"+":"-",pe=Math.floor(Math.abs(T/60)),Fe=Math.abs(T%60),We=[se,G(pe),"'",G(Fe),"'"].join("");return["D:",p.getFullYear(),G(p.getMonth()+1),G(p.getDate()),G(p.getHours()),G(p.getMinutes()),G(p.getSeconds()),We].join("")},ge=m.__private__.convertPDFDateToDate=function(p){var T=parseInt(p.substr(2,4),10),se=parseInt(p.substr(6,2),10)-1,pe=parseInt(p.substr(8,2),10),Fe=parseInt(p.substr(10,2),10),We=parseInt(p.substr(12,2),10),tt=parseInt(p.substr(14,2),10);return new Date(T,se,pe,Fe,We,tt,0)},Oe=m.__private__.setCreationDate=function(p){var T;if(p===void 0&&(p=new Date),p instanceof Date)T=ie(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=p}return he=T},I=m.__private__.getCreationDate=function(p){var T=he;return p==="jsDate"&&(T=ge(he)),T};m.setCreationDate=function(p){return Oe(p),this},m.getCreationDate=function(p){return I(p)};var D,G=m.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},te=m.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},ae=0,ye=[],Pe=[],fe=0,Je=[],et=[],Ve=!1,lt=Pe,Ft=function(){ae=0,fe=0,Pe=[],ye=[],Je=[],oi=hr(),Wr=hr()};m.__private__.setCustomOutputDestination=function(p){Ve=!0,lt=p};var qe=function(p){Ve||(lt=p)};m.__private__.resetCustomOutputDestination=function(){Ve=!1,lt=Pe};var le=m.__private__.out=function(p){return p=p.toString(),fe+=p.length+1,lt.push(p),lt},Mt=m.__private__.write=function(p){return le(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},jt=m.__private__.getArrayBuffer=function(p){for(var T=p.length,se=new ArrayBuffer(T),pe=new Uint8Array(se);T--;)pe[T]=p.charCodeAt(T);return se},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return rt};var J=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(p){return J=k===j.ADVANCED?p/ct:p,this};var de,we=m.__private__.getFontSize=m.getFontSize=function(){return k===j.COMPAT?J:J*ct},Be=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(p){return Be=p,this},m.__private__.getR2L=m.getR2L=function(){return Be};var $e,Ue=m.__private__.setZoomMode=function(p){var T=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))de=p;else if(isNaN(p)){if(T.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');de=p}else de=parseInt(p,10)};m.__private__.getZoomMode=function(){return de};var Xe,bt=m.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');$e=p};m.__private__.getPageMode=function(){return $e};var Pt=m.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');Xe=p};m.__private__.getLayoutMode=function(){return Xe},m.__private__.setDisplayMode=m.setDisplayMode=function(p,T,se){return Ue(p),Pt(T),bt(se),this};var wt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(p){if(Object.keys(wt).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return wt[p]},m.__private__.getDocumentProperties=function(){return wt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(p){for(var T in wt)wt.hasOwnProperty(T)&&p[T]&&(wt[T]=p[T]);return this},m.__private__.setDocumentProperty=function(p,T){if(Object.keys(wt).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return wt[p]=T};var qt,ct,dr,Wt,Or,Qt={},ut={},zr=[],Vt={},gn={},at={},un={},rn=null,lr=0,Rt=[],tr=new Wu(m),Xn=n.hotfixes||[],Ee={},gt={},Dt=[],xt=function p(T,se,pe,Fe,We,tt){if(!(this instanceof p))return new p(T,se,pe,Fe,We,tt);isNaN(T)&&(T=1),isNaN(se)&&(se=0),isNaN(pe)&&(pe=0),isNaN(Fe)&&(Fe=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[T,se,pe,Fe,We,tt]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(p)},xt.prototype.multiply=function(p){var T=p.sx*this.sx+p.shy*this.shx,se=p.sx*this.shy+p.shy*this.sy,pe=p.shx*this.sx+p.sy*this.shx,Fe=p.shx*this.shy+p.sy*this.sy,We=p.tx*this.sx+p.ty*this.shx+this.tx,tt=p.tx*this.shy+p.ty*this.sy+this.ty;return new xt(T,se,pe,Fe,We,tt)},xt.prototype.decompose=function(){var p=this.sx,T=this.shy,se=this.shx,pe=this.sy,Fe=this.tx,We=this.ty,tt=Math.sqrt(p*p+T*T),vt=(p/=tt)*se+(T/=tt)*pe;se-=p*vt,pe-=T*vt;var Ct=Math.sqrt(se*se+pe*pe);return vt/=Ct,p*(pe/=Ct)<T*(se/=Ct)&&(p=-p,T=-T,vt=-vt,tt=-tt),{scale:new xt(tt,0,0,Ct,0,0),translate:new xt(1,0,0,1,Fe,We),rotate:new xt(p,T,-T,p,0,0),skew:new xt(1,0,vt,1,0,0)}},xt.prototype.toString=function(p){return this.join(" ")},xt.prototype.inversed=function(){var p=this.sx,T=this.shy,se=this.shx,pe=this.sy,Fe=this.tx,We=this.ty,tt=1/(p*pe-T*se),vt=pe*tt,Ct=-T*tt,Kt=-se*tt,zt=p*tt;return new xt(vt,Ct,Kt,zt,-vt*Fe-Kt*We,-Ct*Fe-zt*We)},xt.prototype.applyToPoint=function(p){var T=p.x*this.sx+p.y*this.shx+this.tx,se=p.x*this.shy+p.y*this.sy+this.ty;return new Ti(T,se)},xt.prototype.applyToRectangle=function(p){var T=this.applyToPoint(p),se=this.applyToPoint(new Ti(p.x+p.w,p.y+p.h));return new kr(T.x,T.y,se.x-T.x,se.y-T.y)},xt.prototype.clone=function(){var p=this.sx,T=this.shy,se=this.shx,pe=this.sy,Fe=this.tx,We=this.ty;return new xt(p,T,se,pe,Fe,We)},m.Matrix=xt;var sr=m.matrixMult=function(p,T){return T.multiply(p)},Ht=new xt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ht;var Bt=function(p,T){if(!gn[p]){var se=(T instanceof Ka?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);T.id=se,gn[p]=se,Vt[se]=T,tr.publish("addPattern",T)}};m.ShadingPattern=Ka,m.TilingPattern=bs,m.addShadingPattern=function(p,T){return O("addShadingPattern()"),Bt(p,T),this},m.beginTilingPattern=function(p){O("beginTilingPattern()"),Mi(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},m.endTilingPattern=function(p,T){O("endTilingPattern()"),T.stream=et[D].join(`
`),Bt(p,T),tr.publish("endTilingPattern",T),Dt.pop().restore()};var mr=m.__private__.newObject=function(){var p=hr();return Hr(p,!0),p},hr=m.__private__.newObjectDeferred=function(){return ae++,ye[ae]=function(){return fe},ae},Hr=function(p,T){return T=typeof T=="boolean"&&T,ye[p]=fe,T&&le(p+" 0 obj"),p},si=m.__private__.newAdditionalObject=function(){var p={objId:hr(),content:""};return Je.push(p),p},oi=hr(),Wr=hr(),nn=m.__private__.decodeColorString=function(p){var T=p.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length===5&&(T[4]==="k"||T[4]==="K")&&(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var se=parseFloat(T[0]);T=[se,se,se,"r"]}for(var pe="#",Fe=0;Fe<3;Fe++)pe+=("0"+Math.floor(255*parseFloat(T[Fe])).toString(16)).slice(-2);return pe},Kr=m.__private__.encodeColorString=function(p){var T;typeof p=="string"&&(p={ch1:p});var se=p.ch1,pe=p.ch2,Fe=p.ch3,We=p.ch4,tt=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var vt=new $d(se);if(vt.ok)se=vt.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var Ct=parseInt(se.substr(1),16);se=Ct>>16&255,pe=Ct>>8&255,Fe=255&Ct}if(pe===void 0||We===void 0&&se===pe&&pe===Fe)if(typeof se=="string")T=se+" "+tt[0];else switch(p.precision){case 2:T=oe(se/255)+" "+tt[0];break;case 3:default:T=C(se/255)+" "+tt[0]}else if(We===void 0||br(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return T=["1.","1.","1.",tt[1]].join(" ");if(typeof se=="string")T=[se,pe,Fe,tt[1]].join(" ");else switch(p.precision){case 2:T=[oe(se/255),oe(pe/255),oe(Fe/255),tt[1]].join(" ");break;default:case 3:T=[C(se/255),C(pe/255),C(Fe/255),tt[1]].join(" ")}}else if(typeof se=="string")T=[se,pe,Fe,We,tt[2]].join(" ");else switch(p.precision){case 2:T=[oe(se),oe(pe),oe(Fe),oe(We),tt[2]].join(" ");break;case 3:default:T=[C(se),C(pe),C(Fe),C(We),tt[2]].join(" ")}return T},_n=m.__private__.getFilters=function(){return c},En=m.__private__.putStream=function(p){var T=(p=p||{}).data||"",se=p.filters||_n(),pe=p.alreadyAppliedFilters||[],Fe=p.addLength1||!1,We=T.length,tt=p.objectId,vt=function(Jr){return Jr};if(x!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(vt=Qr.encryptor(tt,0));var Ct={};se===!0&&(se=["FlateEncode"]);var Kt=p.additionalKeyValues||[],zt=(Ct=Ot.API.processDataByFilters!==void 0?Ot.API.processDataByFilters(T,se):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Ct.data.length!==0&&(Kt.push({key:"Length",value:Ct.data.length}),Fe===!0&&Kt.push({key:"Length1",value:We})),zt.length!=0)if(zt.split("/").length-1==1)Kt.push({key:"Filter",value:zt});else{Kt.push({key:"Filter",value:"["+zt+"]"});for(var er=0;er<Kt.length;er+=1)if(Kt[er].key==="DecodeParms"){for(var xr=[],wr=0;wr<Ct.reverseChain.split("/").length-1;wr+=1)xr.push("null");xr.push(Kt[er].value),Kt[er].value="["+xr.join(" ")+"]"}}le("<<");for(var Fr=0;Fr<Kt.length;Fr++)le("/"+Kt[Fr].key+" "+Kt[Fr].value);le(">>"),Ct.data.length!==0&&(le("stream"),le(vt(Ct.data)),le("endstream"))},Yr=m.__private__.putPage=function(p){var T=p.number,se=p.data,pe=p.objId,Fe=p.contentsObjId;Hr(pe,!0),le("<</Type /Page"),le("/Parent "+p.rootDictionaryObjId+" 0 R"),le("/Resources "+p.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(R(p.mediaBox.bottomLeftX))+" "+parseFloat(R(p.mediaBox.bottomLeftY))+" "+R(p.mediaBox.topRightX)+" "+R(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&le("/CropBox ["+R(p.cropBox.bottomLeftX)+" "+R(p.cropBox.bottomLeftY)+" "+R(p.cropBox.topRightX)+" "+R(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&le("/BleedBox ["+R(p.bleedBox.bottomLeftX)+" "+R(p.bleedBox.bottomLeftY)+" "+R(p.bleedBox.topRightX)+" "+R(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&le("/TrimBox ["+R(p.trimBox.bottomLeftX)+" "+R(p.trimBox.bottomLeftY)+" "+R(p.trimBox.topRightX)+" "+R(p.trimBox.topRightY)+"]"),p.artBox!==null&&le("/ArtBox ["+R(p.artBox.bottomLeftX)+" "+R(p.artBox.bottomLeftY)+" "+R(p.artBox.topRightX)+" "+R(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&le("/UserUnit "+p.userUnit),tr.publish("putPage",{objId:pe,pageContext:Rt[T],pageNumber:T,page:se}),le("/Contents "+Fe+" 0 R"),le(">>"),le("endobj");var We=se.join(`
`);return k===j.ADVANCED&&(We+=`
Q`),Hr(Fe,!0),En({data:We,filters:_n(),objectId:Fe}),le("endobj"),pe},Ci=m.__private__.putPages=function(){var p,T,se=[];for(p=1;p<=lr;p++)Rt[p].objId=hr(),Rt[p].contentsObjId=hr();for(p=1;p<=lr;p++)se.push(Yr({number:p,data:et[p],objId:Rt[p].objId,contentsObjId:Rt[p].contentsObjId,mediaBox:Rt[p].mediaBox,cropBox:Rt[p].cropBox,bleedBox:Rt[p].bleedBox,trimBox:Rt[p].trimBox,artBox:Rt[p].artBox,userUnit:Rt[p].userUnit,rootDictionaryObjId:oi,resourceDictionaryObjId:Wr}));Hr(oi,!0),le("<</Type /Pages");var pe="/Kids [";for(T=0;T<lr;T++)pe+=se[T]+" 0 R ";le(pe+"]"),le("/Count "+lr),le(">>"),le("endobj"),tr.publish("postPutPages")},Dn=function(p){tr.publish("putFont",{font:p,out:le,newObject:mr,putStream:En}),p.isAlreadyPutted!==!0&&(p.objectNumber=mr(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Ws(p.postScriptName)),le("/Subtype /Type1"),typeof p.encoding=="string"&&le("/Encoding /"+p.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},$i=function(){for(var p in Qt)Qt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&Dn(Qt[p])},ki=function(p){p.objectNumber=mr();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[R(p.x),R(p.y),R(p.x+p.width),R(p.y+p.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var se=p.pages[1].join(`
`);En({data:se,additionalKeyValues:T,objectId:p.objectNumber}),le("endobj")},fr=function(){for(var p in Ee)Ee.hasOwnProperty(p)&&ki(Ee[p])},Zn=function(p,T){var se,pe=[],Fe=1/(T-1);for(se=0;se<1;se+=Fe)pe.push(se);if(pe.push(1),p[0].offset!=0){var We={offset:0,color:p[0].color};p.unshift(We)}if(p[p.length-1].offset!=1){var tt={offset:1,color:p[p.length-1].color};p.push(tt)}for(var vt="",Ct=0,Kt=0;Kt<pe.length;Kt++){for(se=pe[Kt];se>p[Ct+1].offset;)Ct++;var zt=p[Ct].offset,er=(se-zt)/(p[Ct+1].offset-zt),xr=p[Ct].color,wr=p[Ct+1].color;vt+=te(Math.round((1-er)*xr[0]+er*wr[0]).toString(16))+te(Math.round((1-er)*xr[1]+er*wr[1]).toString(16))+te(Math.round((1-er)*xr[2]+er*wr[2]).toString(16))}return vt.trim()},Un=function(p,T){T||(T=21);var se=mr(),pe=Zn(p.colors,T),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+T+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:pe,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),le("endobj"),p.objectNumber=mr(),le("<< /ShadingType "+p.type),le("/ColorSpace /DeviceRGB");var We="/Coords ["+R(parseFloat(p.coords[0]))+" "+R(parseFloat(p.coords[1]))+" ";p.type===2?We+=R(parseFloat(p.coords[2]))+" "+R(parseFloat(p.coords[3])):We+=R(parseFloat(p.coords[2]))+" "+R(parseFloat(p.coords[3]))+" "+R(parseFloat(p.coords[4]))+" "+R(parseFloat(p.coords[5])),le(We+="]"),p.matrix&&le("/Matrix ["+p.matrix.toString()+"]"),le("/Function "+se+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},Ps=function(p,T){var se=hr(),pe=mr();T.push({resourcesOid:se,objectOid:pe}),p.objectNumber=pe;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+p.boundingBox.map(R).join(" ")+"]"}),Fe.push({key:"XStep",value:R(p.xStep)}),Fe.push({key:"YStep",value:R(p.yStep)}),Fe.push({key:"Resources",value:se+" 0 R"}),p.matrix&&Fe.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),En({data:p.stream,additionalKeyValues:Fe,objectId:p.objectNumber}),le("endobj")},zn=function(p){var T;for(T in Vt)Vt.hasOwnProperty(T)&&(Vt[T]instanceof Ka?Un(Vt[T]):Vt[T]instanceof bs&&Ps(Vt[T],p))},Gi=function(p){for(var T in p.objectNumber=mr(),le("<<"),p)switch(T){case"opacity":le("/ca "+oe(p[T]));break;case"stroke-opacity":le("/CA "+oe(p[T]))}le(">>"),le("endobj")},Xa=function(){var p;for(p in at)at.hasOwnProperty(p)&&Gi(at[p])},Yi=function(){for(var p in le("/XObject <<"),Ee)Ee.hasOwnProperty(p)&&Ee[p].objectNumber>=0&&le("/"+p+" "+Ee[p].objectNumber+" 0 R");tr.publish("putXobjectDict"),le(">>")},li=function(){Qr.oid=mr(),le("<<"),le("/Filter /Standard"),le("/V "+Qr.v),le("/R "+Qr.r),le("/U <"+Qr.toHexString(Qr.U)+">"),le("/O <"+Qr.toHexString(Qr.O)+">"),le("/P "+Qr.P),le(">>"),le("endobj")},Za=function(){for(var p in le("/Font <<"),Qt)Qt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&le("/"+p+" "+Qt[p].objectNumber+" 0 R");le(">>")},Na=function(){if(Object.keys(Vt).length>0){for(var p in le("/Shading <<"),Vt)Vt.hasOwnProperty(p)&&Vt[p]instanceof Ka&&Vt[p].objectNumber>=0&&le("/"+p+" "+Vt[p].objectNumber+" 0 R");tr.publish("putShadingPatternDict"),le(">>")}},Qi=function(p){if(Object.keys(Vt).length>0){for(var T in le("/Pattern <<"),Vt)Vt.hasOwnProperty(T)&&Vt[T]instanceof m.TilingPattern&&Vt[T].objectNumber>=0&&Vt[T].objectNumber<p&&le("/"+T+" "+Vt[T].objectNumber+" 0 R");tr.publish("putTilingPatternDict"),le(">>")}},Jt=function(){if(Object.keys(at).length>0){var p;for(p in le("/ExtGState <<"),at)at.hasOwnProperty(p)&&at[p].objectNumber>=0&&le("/"+p+" "+at[p].objectNumber+" 0 R");tr.publish("putGStateDict"),le(">>")}},Ar=function(p){Hr(p.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Za(),Na(),Qi(p.objectOid),Jt(),Yi(),le(">>"),le("endobj")},es=function(){var p=[];$i(),Xa(),fr(),zn(p),tr.publish("putResources"),p.forEach(Ar),Ar({resourcesOid:Wr,objectOid:Number.MAX_SAFE_INTEGER}),tr.publish("postPutResources")},ts=function(){tr.publish("putAdditionalObjects");for(var p=0;p<Je.length;p++){var T=Je[p];Hr(T.objId,!0),le(T.content),le("endobj")}tr.publish("postPutAdditionalObjects")},or=function(p){ut[p.fontName]=ut[p.fontName]||{},ut[p.fontName][p.fontStyle]=p.id},ci=function(p,T,se,pe,Fe){var We={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:p,fontName:T,fontStyle:se,encoding:pe,isStandardFont:Fe||!1,metadata:{}};return tr.publish("addFont",{font:We,instance:this}),Qt[We.id]=We,or(We),We.id},Ji=function(p){for(var T=0,se=rt.length;T<se;T++){var pe=ci.call(this,p[T][0],p[T][1],p[T][2],rt[T][3],!0);b===!1&&(w[pe]=!0);var Fe=p[T][0].split("-");or({id:pe,fontName:Fe[0],fontStyle:Fe[1]||""})}tr.publish("addFonts",{fonts:Qt,dictionary:ut})},an=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(pe){var T=pe.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var se="Error in function "+T.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Ut.console)throw new Error(se);Ut.console.error(se,pe),Ut.alert&&alert(se)}},p.foo.bar=p,p.foo},Fi=function(p,T){var se,pe,Fe,We,tt,vt,Ct,Kt,zt;if(Fe=(T=T||{}).sourceEncoding||"Unicode",tt=T.outputEncoding,(T.autoencode||tt)&&Qt[qt].metadata&&Qt[qt].metadata[Fe]&&Qt[qt].metadata[Fe].encoding&&(We=Qt[qt].metadata[Fe].encoding,!tt&&Qt[qt].encoding&&(tt=Qt[qt].encoding),!tt&&We.codePages&&(tt=We.codePages[0]),typeof tt=="string"&&(tt=We[tt]),tt)){for(Ct=!1,vt=[],se=0,pe=p.length;se<pe;se++)(Kt=tt[p.charCodeAt(se)])?vt.push(String.fromCharCode(Kt)):vt.push(p[se]),vt[se].charCodeAt(0)>>8&&(Ct=!0);p=vt.join("")}for(se=p.length;Ct===void 0&&se!==0;)p.charCodeAt(se-1)>>8&&(Ct=!0),se--;if(!Ct)return p;for(vt=T.noBOM?[]:[254,255],se=0,pe=p.length;se<pe;se++){if((zt=(Kt=p.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vt.push(zt),vt.push(Kt-(zt<<8))}return String.fromCharCode.apply(void 0,vt)},sn=m.__private__.pdfEscape=m.pdfEscape=function(p,T){return Fi(p,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ei=m.__private__.beginPage=function(p){et[++lr]=[],Rt[lr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},ns(lr),qe(et[D])},rs=function(p,T){var se,pe,Fe;switch(t=T||t,typeof p=="string"&&(se=L(p.toLowerCase()),Array.isArray(se)&&(pe=se[0],Fe=se[1])),Array.isArray(p)&&(pe=p[0]*ct,Fe=p[1]*ct),isNaN(pe)&&(pe=a[0],Fe=a[1]),(pe>14400||Fe>14400)&&(yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Fe=Math.min(14400,Fe)),a=[pe,Fe],t.substr(0,1)){case"l":Fe>pe&&(a=[Fe,pe]);break;case"p":pe>Fe&&(a=[Fe,pe])}Ei(a),sa(os),le(yn),oa!==0&&le(oa+" J"),la!==0&&le(la+" j"),tr.publish("addPage",{pageNumber:lr})},Sa=function(p){p>0&&p<=lr&&(et.splice(p,1),Rt.splice(p,1),lr--,D>lr&&(D=lr),this.setPage(D))},ns=function(p){p>0&&p<=lr&&(D=p)},Xi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return et.length-1},is=function(p,T,se){var pe,Fe=void 0;return se=se||{},p=p!==void 0?p:Qt[qt].fontName,T=T!==void 0?T:Qt[qt].fontStyle,pe=p.toLowerCase(),ut[pe]!==void 0&&ut[pe][T]!==void 0?Fe=ut[pe][T]:ut[p]!==void 0&&ut[p][T]!==void 0?Fe=ut[p][T]:se.disableWarning===!1&&yr.warn("Unable to look up font label for font '"+p+"', '"+T+"'. Refer to getFontList() for available fonts."),Fe||se.noFallback||(Fe=ut.times[T])==null&&(Fe=ut.times.normal),Fe},Qs=m.__private__.putInfo=function(){var p=mr(),T=function(pe){return pe};for(var se in x!==null&&(T=Qr.encryptor(p,0)),le("<<"),le("/Producer ("+sn(T("jsPDF "+Ot.version))+")"),wt)wt.hasOwnProperty(se)&&wt[se]&&le("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+sn(T(wt[se]))+")");le("/CreationDate ("+sn(T(he))+")"),le(">>"),le("endobj")},Zt=m.__private__.putCatalog=function(p){var T=(p=p||{}).rootDictionaryObjId||oi;switch(mr(),le("<<"),le("/Type /Catalog"),le("/Pages "+T+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+de;se.substr(se.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&le("/OpenAction [3 0 R /XYZ null null "+oe(de)+"]")}switch(Xe||(Xe="continuous"),Xe){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}$e&&le("/PageMode /"+$e),tr.publish("putCatalog"),le(">>"),le("endobj")},as=m.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(ae+1)),le("/Root "+ae+" 0 R"),le("/Info "+(ae-1)+" 0 R"),x!==null&&le("/Encrypt "+Qr.oid+" 0 R"),le("/ID [ <"+Y+"> <"+Y+"> ]"),le(">>")},Js=m.__private__.putHeader=function(){le("%PDF-"+P),le("%")},Xs=m.__private__.putXRef=function(){var p="0000000000";le("xref"),le("0 "+(ae+1)),le("0000000000 65535 f ");for(var T=1;T<=ae;T++)typeof ye[T]=="function"?le((p+ye[T]()).slice(-10)+" 00000 n "):ye[T]!==void 0?le((p+ye[T]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Pr=m.__private__.buildDocument=function(){Ft(),qe(Pe),tr.publish("buildDocument"),Js(),Ci(),ts(),es(),x!==null&&li(),Qs(),Zt();var p=fe;return Xs(),as(),le("startxref"),le(""+p),le("%%EOF"),qe(et[D]),Pe.join(`
`)},Hn=m.__private__.getBlob=function(p){return new Blob([jt(p)],{type:"application/pdf"})},ui=m.output=m.__private__.output=an(function(p,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",p){case void 0:return Pr();case"save":m.save(T.filename);break;case"arraybuffer":return jt(Pr());case"blob":return Hn(Pr());case"bloburi":case"bloburl":if(Ut.URL!==void 0&&typeof Ut.URL.createObjectURL=="function")return Ut.URL&&Ut.URL.createObjectURL(Hn(Pr()))||void 0;yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",pe=Pr();try{se=gc(pe)}catch{se=gc(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+T.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(Fe=T.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",vt=Ut.open();return vt!==null&&vt.document.write(tt),vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',Kt=Ut.open();if(Kt!==null){Kt.document.write(Ct);var zt=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=T.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zt.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',xr=Ut.open();if(xr!==null&&(xr.document.write(er),xr.document.title=T.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return Ut.document.location.href=this.output("datauristring",T);default:return null}}),Wn=function(p){return Array.isArray(Xn)===!0&&Xn.indexOf(p)>-1};switch(r){case"pt":ct=1;break;case"mm":ct=72/25.4;break;case"cm":ct=72/2.54;break;case"in":ct=72;break;case"px":ct=Wn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ct=12;break;case"ex":ct=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ct=r}var Qr=null;Oe(),ne();var Ls=function(p){return x!==null?Qr.encryptor(p,0):function(T){return T}},Lr=m.__private__.getPageInfo=m.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[p].objId,pageNumber:p,pageContext:Rt[p]}},Et=m.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in Rt)if(Rt[T].objId===p)break;return Lr(T)},Zi=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rt[D].objId,pageNumber:D,pageContext:Rt[D]}};m.addPage=function(){return rs.apply(this,arguments),this},m.setPage=function(){return ns.apply(this,arguments),qe.call(this,et[D]),this},m.insertPage=function(p){return this.addPage(),this.movePage(D,p),this},m.movePage=function(p,T){var se,pe;if(p>T){se=et[p],pe=Rt[p];for(var Fe=p;Fe>T;Fe--)et[Fe]=et[Fe-1],Rt[Fe]=Rt[Fe-1];et[T]=se,Rt[T]=pe,this.setPage(T)}else if(p<T){se=et[p],pe=Rt[p];for(var We=p;We<T;We++)et[We]=et[We+1],Rt[We]=Rt[We+1];et[T]=se,Rt[T]=pe,this.setPage(T)}return this},m.deletePage=function(){return Sa.apply(this,arguments),this},m.__private__.text=m.text=function(p,T,se,pe,Fe){var We,tt,vt,Ct,Kt,zt,er,xr,wr,Fr=(pe=pe||{}).scope||this;if(typeof p=="number"&&typeof T=="number"&&(typeof se=="string"||Array.isArray(se))){var Jr=se;se=T,T=p,p=Jr}if(arguments[3]instanceof xt?(O("The transform parameter of text() with a Matrix value"),wr=Fe):(vt=arguments[4],Ct=arguments[5],br(er=arguments[3])==="object"&&er!==null||(typeof vt=="string"&&(Ct=vt,vt=null),typeof er=="string"&&(Ct=er,er=null),typeof er=="number"&&(vt=er,er=null),pe={flags:er,angle:vt,align:Ct})),isNaN(T)||isNaN(se)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Fr;var Tr="",Gn=!1,vn=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:aa,On=Fr.internal.scaleFactor;function cs(St){return St=St.split("	").join(Array(pe.TabLen||9).join(" ")),sn(St,er)}function Ca(St){for(var At,kt=St.concat(),nr=[],It=kt.length;It--;)typeof(At=kt.shift())=="string"?nr.push(At):Array.isArray(St)&&(At.length===1||At[1]===void 0&&At[2]===void 0)?nr.push(At[0]):nr.push([At[0],At[1],At[2]]);return nr}function us(St,At){var kt;if(typeof St=="string")kt=At(St)[0];else if(Array.isArray(St)){for(var nr,It,Er=St.concat(),Cr=[],fa=Er.length;fa--;)typeof(nr=Er.shift())=="string"?Cr.push(At(nr)[0]):Array.isArray(nr)&&typeof nr[0]=="string"&&(It=At(nr[0],nr[1],nr[2]),Cr.push([It[0],It[1],It[2]]));kt=Cr}return kt}var ka=!1,ds=!0;if(typeof p=="string")ka=!0;else if(Array.isArray(p)){var qi=p.concat();tt=[];for(var bn,Xt=qi.length;Xt--;)(typeof(bn=qi.shift())!="string"||Array.isArray(bn)&&typeof bn[0]!="string")&&(ds=!1);ka=ds}if(ka===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var mi=J/Fr.internal.scaleFactor,Xr=mi*(vn-1);switch(pe.baseline){case"bottom":se-=Xr;break;case"top":se+=mi-Xr;break;case"hanging":se+=mi-2*Xr;break;case"middle":se+=mi/2-Xr}if((zt=pe.maxWidth||0)>0&&(typeof p=="string"?p=Fr.splitTextToSize(p,zt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(St,At){return St.concat(Fr.splitTextToSize(At,zt))},[]))),We={text:p,x:T,y:se,options:pe,mutex:{pdfEscape:sn,activeFontKey:qt,fonts:Qt,activeFontSize:J}},tr.publish("preProcessText",We),p=We.text,vt=(pe=We.options).angle,!(wr instanceof xt)&&vt&&typeof vt=="number"){vt*=Math.PI/180,pe.rotationDirection===0&&(vt=-vt),k===j.ADVANCED&&(vt=-vt);var Fa=Math.cos(vt),ua=Math.sin(vt);wr=new xt(Fa,ua,-ua,Fa,0,0)}else vt&&vt instanceof xt&&(wr=vt);k!==j.ADVANCED||wr||(wr=Ht),(Kt=pe.charSpace||Aa)!==void 0&&(Tr+=R(N(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=pe.horizontalScale)!==void 0&&(Tr+=R(100*xr)+` Tz
`),pe.lang;var hn=-1,gi=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,da=Fr.internal.getCurrentPageInfo().pageContext;switch(gi){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var yi=da.usedRenderingMode!==void 0?da.usedRenderingMode:-1;hn!==-1?Tr+=hn+` Tr
`:yi!==-1&&(Tr+=`0 Tr
`),hn!==-1&&(da.usedRenderingMode=hn),Ct=pe.align||"left";var Mr,ha=J*vn,l=Fr.internal.pageSize.getWidth(),f=Qt[qt];Kt=pe.charSpace||Aa,zt=pe.maxWidth||0,er=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var v=[],A=function(St){return Fr.getStringUnitWidth(St,{font:f,charSpace:Kt,fontSize:J,doKerning:!1})*J/On};if(Object.prototype.toString.call(p)==="[object Array]"){var F;tt=Ca(p),Ct!=="left"&&(Mr=tt.map(A));var z,ee=0;if(Ct==="right"){T-=Mr[0],p=[],Xt=tt.length;for(var ce=0;ce<Xt;ce++)ce===0?(z=ei(T),F=Vn(se)):(z=N(ee-Mr[ce]),F=-ha),p.push([tt[ce],z,F]),ee=Mr[ce]}else if(Ct==="center"){T-=Mr[0]/2,p=[],Xt=tt.length;for(var ve=0;ve<Xt;ve++)ve===0?(z=ei(T),F=Vn(se)):(z=N((ee-Mr[ve])/2),F=-ha),p.push([tt[ve],z,F]),ee=Mr[ve]}else if(Ct==="left"){p=[],Xt=tt.length;for(var Ne=0;Ne<Xt;Ne++)p.push(tt[Ne])}else if(Ct==="justify"&&f.encoding==="Identity-H"){p=[],Xt=tt.length,zt=zt!==0?zt:l;for(var _e=0,ue=0;ue<Xt;ue++)if(F=ue===0?Vn(se):-ha,z=ue===0?ei(T):_e,ue<Xt-1){var ke=N((zt-Mr[ue])/(tt[ue].split(" ").length-1)),me=tt[ue].split(" ");p.push([me[0]+" ",z,F]),_e=0;for(var Se=1;Se<me.length;Se++){var Ce=(A(me[Se-1]+" "+me[Se])-A(me[Se]))*On+ke;Se==me.length-1?p.push([me[Se],Ce,0]):p.push([me[Se]+" ",Ce,0]),_e-=Ce}}else p.push([tt[ue],z,F]);p.push(["",_e,0])}else{if(Ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Xt=tt.length,zt=zt!==0?zt:l,ue=0;ue<Xt;ue++)F=ue===0?Vn(se):-ha,z=ue===0?ei(T):0,ue<Xt-1?v.push(R(N((zt-Mr[ue])/(tt[ue].split(" ").length-1)))):v.push(0),p.push([tt[ue],z,F])}}var je=typeof pe.R2L=="boolean"?pe.R2L:Be;je===!0&&(p=us(p,function(St,At,kt){return[St.split("").reverse().join(""),At,kt]})),We={text:p,x:T,y:se,options:pe,mutex:{pdfEscape:sn,activeFontKey:qt,fonts:Qt,activeFontSize:J}},tr.publish("postProcessText",We),p=We.text,Gn=We.mutex.isHex||!1;var Te=Qt[qt].encoding;Te!=="WinAnsiEncoding"&&Te!=="StandardEncoding"||(p=us(p,function(St,At,kt){return[cs(St),At,kt]})),tt=Ca(p),p=[];for(var Me,Re,Ke,nt=0,dt=1,it=Array.isArray(tt[0])?dt:nt,st="",ht=function(St,At,kt){var nr="";return kt instanceof xt?(kt=typeof pe.angle=="number"?sr(kt,new xt(1,0,0,1,St,At)):sr(new xt(1,0,0,1,St,At),kt),k===j.ADVANCED&&(kt=sr(new xt(1,0,0,-1,0,0),kt)),nr=kt.join(" ")+` Tm
`):nr=R(St)+" "+R(At)+` Td
`,nr},ot=0;ot<tt.length;ot++){switch(st="",it){case dt:Ke=(Gn?"<":"(")+tt[ot][0]+(Gn?">":")"),Me=parseFloat(tt[ot][1]),Re=parseFloat(tt[ot][2]);break;case nt:Ke=(Gn?"<":"(")+tt[ot]+(Gn?">":")"),Me=ei(T),Re=Vn(se)}v!==void 0&&v[ot]!==void 0&&(st=v[ot]+` Tw
`),ot===0?p.push(st+ht(Me,Re,wr)+Ke):it===nt?p.push(st+Ke):it===dt&&p.push(st+ht(Me,Re,wr)+Ke)}p=it===nt?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var pt=`BT
/`;return pt+=qt+" "+J+` Tf
`,pt+=R(J*vn)+` TL
`,pt+=ti+`
`,pt+=Tr,pt+=p,le(pt+="ET"),w[qt]=!0,Fr};var ea=m.__private__.clip=m.clip=function(p){return le(p==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ea("evenodd")},m.__private__.discardPath=m.discardPath=function(){return le("n"),this};var In=m.__private__.isValidStyle=function(p){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(T=!0),T};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(p){return In(p)&&(y=p),this};var Kn=m.__private__.getStyle=m.getStyle=function(p){var T=y;switch(p){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=p}return T},Cs=m.close=function(){return le("h"),this};m.stroke=function(){return le("S"),this},m.fill=function(p){return dn("f",p),this},m.fillEvenOdd=function(p){return dn("f*",p),this},m.fillStroke=function(p){return dn("B",p),this},m.fillStrokeEvenOdd=function(p){return dn("B*",p),this};var dn=function(p,T){br(T)==="object"?ss(T,p):le(p)},ta=function(p){p===null||k===j.ADVANCED&&p===void 0||(p=Kn(p),le(p))};function ks(p,T,se,pe,Fe){var We=new bs(T||this.boundingBox,se||this.xStep,pe||this.yStep,this.gState,Fe||this.matrix);We.stream=this.stream;var tt=p+"$$"+this.cloneIndex+++"$$";return Bt(tt,We),We}var ss=function(p,T){var se=gn[p.key],pe=Vt[se];if(pe instanceof Ka)le("q"),le(ra(T)),pe.gState&&m.setGState(pe.gState),le(p.matrix.toString()+" cm"),le("/"+se+" sh"),le("Q");else if(pe instanceof bs){var Fe=new xt(1,0,0,-1,0,$n());p.matrix&&(Fe=Fe.multiply(p.matrix||Ht),se=ks.call(pe,p.key,p.boundingBox,p.xStep,p.yStep,Fe).id),le("q"),le("/Pattern cs"),le("/"+se+" scn"),pe.gState&&m.setGState(pe.gState),le(T),le("Q")}},ra=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},na=m.moveTo=function(p,T){return le(R(N(p))+" "+R(V(T))+" m"),this},Di=m.lineTo=function(p,T){return le(R(N(p))+" "+R(V(T))+" l"),this},Ii=m.curveTo=function(p,T,se,pe,Fe,We){return le([R(N(p)),R(V(T)),R(N(se)),R(V(pe)),R(N(Fe)),R(V(We)),"c"].join(" ")),this};m.__private__.line=m.line=function(p,T,se,pe,Fe){if(isNaN(p)||isNaN(T)||isNaN(se)||isNaN(pe)||!In(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return k===j.COMPAT?this.lines([[se-p,pe-T]],p,T,[1,1],Fe||"S"):this.lines([[se-p,pe-T]],p,T,[1,1]).stroke()},m.__private__.lines=m.lines=function(p,T,se,pe,Fe,We){var tt,vt,Ct,Kt,zt,er,xr,wr,Fr,Jr,Tr,Gn;if(typeof p=="number"&&(Gn=se,se=T,T=p,p=Gn),pe=pe||[1,1],We=We||!1,isNaN(T)||isNaN(se)||!Array.isArray(p)||!Array.isArray(pe)||!In(Fe)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(na(T,se),tt=pe[0],vt=pe[1],Kt=p.length,Jr=T,Tr=se,Ct=0;Ct<Kt;Ct++)(zt=p[Ct]).length===2?(Jr=zt[0]*tt+Jr,Tr=zt[1]*vt+Tr,Di(Jr,Tr)):(er=zt[0]*tt+Jr,xr=zt[1]*vt+Tr,wr=zt[2]*tt+Jr,Fr=zt[3]*vt+Tr,Jr=zt[4]*tt+Jr,Tr=zt[5]*vt+Tr,Ii(er,xr,wr,Fr,Jr,Tr));return We&&Cs(),ta(Fe),this},m.path=function(p){for(var T=0;T<p.length;T++){var se=p[T],pe=se.c;switch(se.op){case"m":na(pe[0],pe[1]);break;case"l":Di(pe[0],pe[1]);break;case"c":Ii.apply(this,pe);break;case"h":Cs()}}return this},m.__private__.rect=m.rect=function(p,T,se,pe,Fe){if(isNaN(p)||isNaN(T)||isNaN(se)||isNaN(pe)||!In(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return k===j.COMPAT&&(pe=-pe),le([R(N(p)),R(V(T)),R(N(se)),R(N(pe)),"re"].join(" ")),ta(Fe),this},m.__private__.triangle=m.triangle=function(p,T,se,pe,Fe,We,tt){if(isNaN(p)||isNaN(T)||isNaN(se)||isNaN(pe)||isNaN(Fe)||isNaN(We)||!In(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-p,pe-T],[Fe-se,We-pe],[p-Fe,T-We]],p,T,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(p,T,se,pe,Fe,We,tt){if(isNaN(p)||isNaN(T)||isNaN(se)||isNaN(pe)||isNaN(Fe)||isNaN(We)||!In(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*se),We=Math.min(We,.5*pe),this.lines([[se-2*Fe,0],[Fe*vt,0,Fe,We-We*vt,Fe,We],[0,pe-2*We],[0,We*vt,-Fe*vt,We,-Fe,We],[2*Fe-se,0],[-Fe*vt,0,-Fe,-We*vt,-Fe,-We],[0,2*We-pe],[0,-We*vt,Fe*vt,-We,Fe,-We]],p+Fe,T,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(p,T,se,pe,Fe){if(isNaN(p)||isNaN(T)||isNaN(se)||isNaN(pe)||!In(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*se,tt=4/3*(Math.SQRT2-1)*pe;return na(p+se,T),Ii(p+se,T-tt,p+We,T-pe,p,T-pe),Ii(p-We,T-pe,p-se,T-tt,p-se,T),Ii(p-se,T+tt,p-We,T+pe,p,T+pe),Ii(p+We,T+pe,p+se,T+tt,p+se,T),ta(Fe),this},m.__private__.circle=m.circle=function(p,T,se,pe){if(isNaN(p)||isNaN(T)||isNaN(se)||!In(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,T,se,se,pe)},m.setFont=function(p,T,se){return se&&(T=Z(T,se)),qt=is(p,T,{disableWarning:!1}),this};var ia=m.__private__.getFont=m.getFont=function(){return Qt[is.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var p,T,se={};for(p in ut)if(ut.hasOwnProperty(p))for(T in se[p]=[],ut[p])ut[p].hasOwnProperty(T)&&se[p].push(T);return se},m.addFont=function(p,T,se,pe,Fe){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(se=Z(se,pe)),Fe=Fe||"Identity-H",ci.call(this,p,T,se,Fe)};var aa,os=n.lineWidth||.200025,di=m.__private__.getLineWidth=m.getLineWidth=function(){return os},sa=m.__private__.setLineWidth=m.setLineWidth=function(p){return os=p,le(R(N(p))+" w"),this};m.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(p,T){if(p=p||[],T=T||0,isNaN(T)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(se){return R(N(se))}).join(" "),T=R(N(T)),le("["+p+"] "+T+" d"),this};var ja=m.__private__.getLineHeight=m.getLineHeight=function(){return J*aa};m.__private__.getLineHeight=m.getLineHeight=function(){return J*aa};var Fs=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(aa=p),this},Es=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return aa};Fs(n.lineHeight);var ei=m.__private__.getHorizontalCoordinate=function(p){return N(p)},Vn=m.__private__.getVerticalCoordinate=function(p){return k===j.ADVANCED?p:Rt[D].mediaBox.topRightY-Rt[D].mediaBox.bottomLeftY-N(p)},ls=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(p){return R(ei(p))},hi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(p){return R(Vn(p))},yn=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return nn(yn)},m.__private__.setStrokeColor=m.setDrawColor=function(p,T,se,pe){return yn=Kr({ch1:p,ch2:T,ch3:se,ch4:pe,pdfColorType:"draw",precision:2}),le(yn),this};var Oi=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return nn(Oi)},m.__private__.setFillColor=m.setFillColor=function(p,T,se,pe){return Oi=Kr({ch1:p,ch2:T,ch3:se,ch4:pe,pdfColorType:"fill",precision:2}),le(Oi),this};var ti=n.textColor||"0 g",Ds=m.__private__.getTextColor=m.getTextColor=function(){return nn(ti)};m.__private__.setTextColor=m.setTextColor=function(p,T,se,pe){return ti=Kr({ch1:p,ch2:T,ch3:se,ch4:pe,pdfColorType:"text",precision:3}),this};var Aa=n.charSpace,_a=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Aa||0)};m.__private__.setCharSpace=m.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Aa=p,this};var oa=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(p){var T=m.CapJoinStyles[p];if(T===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oa=T,le(T+" J"),this};var la=0;m.__private__.setLineJoin=m.setLineJoin=function(p){var T=m.CapJoinStyles[p];if(T===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return la=T,le(T+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(R(N(p))+" M"),this},m.GState=jo,m.setGState=function(p){(p=typeof p=="string"?at[un[p]]:Pa(null,p)).equals(rn)||(le("/"+p.id+" gs"),rn=p)};var Pa=function(p,T){if(!p||!un[p]){var se=!1;for(var pe in at)if(at.hasOwnProperty(pe)&&at[pe].equals(T)){se=!0;break}if(se)T=at[pe];else{var Fe="GS"+(Object.keys(at).length+1).toString(10);at[Fe]=T,T.id=Fe}return p&&(un[p]=T.id),tr.publish("addGState",T),T}};m.addGState=function(p,T){return Pa(p,T),this},m.saveGraphicsState=function(){return le("q"),zr.push({key:qt,size:J,color:ti}),this},m.restoreGraphicsState=function(){le("Q");var p=zr.pop();return qt=p.key,J=p.size,ti=p.color,rn=null,this},m.setCurrentTransformationMatrix=function(p){return le(p.toString()+" cm"),this},m.comment=function(p){return le("#"+p),this};var Ti=function(p,T){var se=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(We){isNaN(We)||(se=parseFloat(We))}});var pe=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(We){Fe=We.toString()}}),this},kr=function(p,T,se,pe){Ti.call(this,p,T),this.type="rect";var Fe=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(tt){isNaN(tt)||(Fe=parseFloat(tt))}});var We=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},fi=function(){this.page=lr,this.currentPage=D,this.pages=et.slice(0),this.pagesContext=Rt.slice(0),this.x=dr,this.y=Wt,this.matrix=Or,this.width=Ri(D),this.height=$n(D),this.outputDestination=lt,this.id="",this.objectNumber=-1};fi.prototype.restore=function(){lr=this.page,D=this.currentPage,Rt=this.pagesContext,et=this.pages,dr=this.x,Wt=this.y,Or=this.matrix,La(D,this.width),ca(D,this.height),lt=this.outputDestination};var Mi=function(p,T,se,pe,Fe){Dt.push(new fi),lr=D=0,et=[],dr=p,Wt=T,Or=Fe,Ei([se,pe])},Is=function(p){if(gt[p])Dt.pop().restore();else{var T=new fi,se="Xo"+(Object.keys(Ee).length+1).toString(10);T.id=se,gt[p]=se,Ee[se]=T,tr.publish("addFormObject",T),Dt.pop().restore()}};for(var pi in m.beginFormObject=function(p,T,se,pe,Fe){return Mi(p,T,se,pe,Fe),this},m.endFormObject=function(p){return Is(p),this},m.doFormObject=function(p,T){var se=Ee[gt[p]];return le("q"),le(T.toString()+" cm"),le("/"+se.id+" Do"),le("Q"),this},m.getFormObject=function(p){var T=Ee[gt[p]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},m.save=function(p,T){return p=p||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(ps(Hn(Pr()),p),typeof ps.unload=="function"&&Ut.setTimeout&&setTimeout(ps.unload,911),this):new Promise(function(se,pe){try{var Fe=ps(Hn(Pr()),p);typeof ps.unload=="function"&&Ut.setTimeout&&setTimeout(ps.unload,911),se(Fe)}catch(We){pe(We.message)}})},Ot.API)Ot.API.hasOwnProperty(pi)&&(pi==="events"&&Ot.API.events.length?function(p,T){var se,pe,Fe;for(Fe=T.length-1;Fe!==-1;Fe--)se=T[Fe][0],pe=T[Fe][1],p.subscribe.apply(p,[se].concat(typeof pe=="function"?[pe]:pe))}(tr,Ot.API.events):m[pi]=Ot.API[pi]);var Ri=m.getPageWidth=function(p){return(Rt[p=p||D].mediaBox.topRightX-Rt[p].mediaBox.bottomLeftX)/ct},La=m.setPageWidth=function(p,T){Rt[p].mediaBox.topRightX=T*ct+Rt[p].mediaBox.bottomLeftX},$n=m.getPageHeight=function(p){return(Rt[p=p||D].mediaBox.topRightY-Rt[p].mediaBox.bottomLeftY)/ct},ca=m.setPageHeight=function(p,T){Rt[p].mediaBox.topRightY=T*ct+Rt[p].mediaBox.bottomLeftY};return m.internal={pdfEscape:sn,getStyle:Kn,getFont:ia,getFontSize:we,getCharSpace:_a,getTextColor:Ds,getLineHeight:ja,getLineHeightFactor:Es,getLineWidth:di,write:Mt,getHorizontalCoordinate:ei,getVerticalCoordinate:Vn,getCoordinateString:ls,getVerticalCoordinateString:hi,collections:{},newObject:mr,newAdditionalObject:si,newObjectDeferred:hr,newObjectDeferredBegin:Hr,getFilters:_n,putStream:En,events:tr,scaleFactor:ct,pageSize:{getWidth:function(){return Ri(D)},setWidth:function(p){La(D,p)},getHeight:function(){return $n(D)},setHeight:function(p){ca(D,p)}},encryptionOptions:x,encryption:Qr,getEncryptor:Ls,output:ui,getNumberOfPages:Xi,pages:et,out:le,f2:oe,f3:C,getPageInfo:Lr,getPageInfoByObjId:Et,getCurrentPageInfo:Zi,getPDFVersion:_,Point:Ti,Rectangle:kr,Matrix:xt,hasHotfix:Wn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ri(D)},set:function(p){La(D,p)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return $n(D)},set:function(p){ca(D,p)},enumerable:!0,configurable:!0}),Ji.call(m,rt),qt="F1",rs(a,t),tr.publish("initialized"),m}Hs.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Hs.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hs.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Hs.prototype.processOwnerPassword=function(n,e){return vc(yc(e).substr(0,5),n)},Hs.prototype.encryptor=function(n,e){var t=yc(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return vc(t,r)}},jo.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||br(n)!==br(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ot.API={events:[]},Ot.version="2.5.2";var Ir=Ot.API,Ic=1,_s=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bs=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(n){return n.toFixed(2)},Ua=function(n){return n.toFixed(5)};Ir.__acroform__={};var Bn=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Ku=function(n){return n*Ic},Ui=function(n){var e=new Jd,t=_t.internal.getHeight(n)||0,r=_t.internal.getWidth(n)||0;return e.BBox=[0,0,Number($t(r)),Number($t(t))],e},Tm=Ir.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Mm=Ir.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},Rm=Ir.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Rr=Ir.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Rm(n,e-1)},qr=Ir.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Tm(n,e-1)},Br=Ir.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Mm(n,e-1)},qm=Ir.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=n[0],i=n[1],c=n[2],u=n[3],d={};return d.lowerLeft_X=t(a)||0,d.lowerLeft_Y=r(i+u)||0,d.upperRight_X=t(a+c)||0,d.upperRight_Y=r(i)||0,[Number($t(d.lowerLeft_X)),Number($t(d.lowerLeft_Y)),Number($t(d.upperRight_X)),Number($t(d.upperRight_Y))]},Bm=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=bc(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+$t(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ui(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},bc=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(C){return C.split(`
`)}):a.map(function(C){return[C]});var i=t,c=_t.internal.getHeight(n)||0;c=c<0?-c:c;var u=_t.internal.getWidth(n)||0;u=u<0?-u:u;var d=function(C,N,q){if(C+1<a.length){var V=N+" "+a[C+1][0];return Yo(V,n,q).width<=u-4}return!1};i++;e:for(;i>0;){e="",i--;var y,x,b=Yo("3",n,i).height,w=n.multiline?c-i:(c-b)/2,m=w+=2,P=0,_=0,E=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Yo(e,n,i=12).width+", FieldWidth:"+u+`
`;break}for(var L="",j=0,k=0;k<a.length;k++)if(a.hasOwnProperty(k)){var B=!1;if(a[k].length!==1&&E!==a[k].length-1){if((b+2)*(j+2)+2>c)continue e;L+=a[k][E],B=!0,_=k,k--}else{L=(L+=a[k][E]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var K=parseInt(k),Z=d(K,L,i),R=k>=a.length-1;if(Z&&!R){L+=" ",E=0;continue}if(Z||R){if(R)_=K;else if(n.multiline&&(b+2)*(j+2)+2>c)continue e}else{if(!n.multiline||(b+2)*(j+2)+2>c)continue e;_=K}}for(var O="",X=P;X<=_;X++){var oe=a[X];if(n.multiline){if(X===_){O+=oe[E]+" ",E=(E+1)%oe.length;continue}if(X===P){O+=oe[oe.length-1]+" ";continue}}O+=oe[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,x=Yo(O,n,i).width,n.textAlign){case"right":y=u-x-2;break;case"center":y=(u-x)/2;break;case"left":default:y=2}e+=$t(y)+" "+$t(m)+` Td
`,e+="("+_s(O)+`) Tj
`,e+=-$t(y)+` 0 Td
`,m=-(i+2),x=0,P=B?_:_+1,j++,L=""}break}return r.text=e,r.fontSize=i,r},Yo=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Um={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zm=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Hm=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,a=n[t];e.internal.newObjectDeferredBegin(a.objId,!0),br(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete n[r]}},Wm=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Pi.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Um)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ic=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Xd,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i.objId=void 0,i.hasAnnotation&&zm(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,a){var i=!r;for(var c in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var u=r[c],d=[],y=u.Rect;if(u.Rect&&(u.Rect=qm(u.Rect,a)),a.internal.newObjectDeferredBegin(u.objId,!0),u.DA=_t.createDefaultAppearanceStream(u),br(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=y,u.hasAppearanceStream&&!u.appearanceStreamContent){var x=Bm(u);d.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(u.appearanceStreamContent){var b="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var m=u.appearanceStreamContent[w];if(b+="/"+w+" ",b+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var c in m)if(m.hasOwnProperty(c)){var P=m[c];typeof P=="function"&&(P=P.call(a,u)),b+="/"+c+" "+P+" ",a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P)}}else typeof(P=m)=="function"&&(P=P.call(a,u)),b+="/"+c+" "+P,a.internal.acroformPlugin.xForms.indexOf(P)>=0||a.internal.acroformPlugin.xForms.push(P);b+=">>"}d.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:u.objId}),a.internal.out("endobj")}i&&Hm(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Qd=Ir.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var a="[",i=0;i<n.length;i++)switch(i!==0&&(a+=" "),br(n[i])){case"boolean":case"number":case"object":a+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),a+="("+_s(r(n[i].toString()))+")"):a+=n[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Xl=function(n,e,t){var r=function(a){return a};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+_s(r(n))+")"},Wi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wi.prototype.toString=function(){return this.objId+" 0 R"},Wi.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wi.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],a=this[r];a&&(Array.isArray(a)?n.push({key:r,value:Qd(a,this.objId,this.scope)}):a instanceof Wi?(a.scope=this.scope,n.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:r,value:a}))}return n};var Jd=function(){Wi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Bn(Jd,Wi);var Xd=function(){Wi.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+_s(t(n))+")"}},set:function(t){n=t}})};Bn(Xd,Wi);var Pi=function n(){Wi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');e=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Rr(e,3)},set:function(L){L?this.F=qr(e,3):this.F=Br(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');t=L}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(L){r=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(L){r[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(L){r[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(L){r[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(L){r[3]=L}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof fl)return;i="FieldObject"+n.FieldNum++}var L=function(j){return j};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+_s(L(i))+")"},set:function(L){i=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(L){i=L}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(L){c=L}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(L){u=L}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(L){d=L}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Ic:y},set:function(L){y=L}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(L){x=L}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof fl||this instanceof Ya))return Xl(b,this.objId,this.scope)},set:function(L){L=L.toString(),b=L}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof tn?w:Xl(w,this.objId,this.scope)},set:function(L){L=L.toString(),w=this instanceof tn?L:L.substr(0,1)==="("?Bs(L.substr(1,L.length-2)):Bs(L)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?Bs(w.substr(1,w.length-1)):w},set:function(L){L=L.toString(),w=this instanceof tn?"/"+L:L}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof tn?m:Xl(m,this.objId,this.scope)},set:function(L){L=L.toString(),m=this instanceof tn?L:L.substr(0,1)==="("?Bs(L.substr(1,L.length-2)):Bs(L)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tn?Bs(m.substr(1,m.length-1)):m},set:function(L){L=L.toString(),m=this instanceof tn?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(L){L=!!L,_=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(L){P=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,1)},set:function(L){L?this.Ff=qr(this.Ff,1):this.Ff=Br(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,2)},set:function(L){L?this.Ff=qr(this.Ff,2):this.Ff=Br(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,3)},set:function(L){L?this.Ff=qr(this.Ff,3):this.Ff=Br(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');E=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(E){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Bn(Pi,Wi);var ws=function(){Pi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qd(e,this.objId,this.scope)},set:function(t){var r,a;a=[],typeof(r=t)=="string"&&(a=function(i,c,u){u||(u=1);for(var d,y=[];d=c.exec(i);)y.push(d[u]);return y}(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,18)},set:function(t){t?this.Ff=qr(this.Ff,18):this.Ff=Br(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=qr(this.Ff,19):this.Ff=Br(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,20)},set:function(t){t?(this.Ff=qr(this.Ff,20),e.sort()):this.Ff=Br(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,22)},set:function(t){t?this.Ff=qr(this.Ff,22):this.Ff=Br(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,23)},set:function(t){t?this.Ff=qr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,27)},set:function(t){t?this.Ff=qr(this.Ff,27):this.Ff=Br(this.Ff,27)}}),this.hasAppearanceStream=!1};Bn(ws,Pi);var Ns=function(){ws.call(this),this.fontName="helvetica",this.combo=!1};Bn(Ns,ws);var Ss=function(){Ns.call(this),this.combo=!0};Bn(Ss,Ns);var mo=function(){Ss.call(this),this.edit=!0};Bn(mo,Ss);var tn=function(){Pi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,15)},set:function(t){t?this.Ff=qr(this.Ff,15):this.Ff=Br(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,16)},set:function(t){t?this.Ff=qr(this.Ff,16):this.Ff=Br(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,17)},set:function(t){t?this.Ff=qr(this.Ff,17):this.Ff=Br(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,26)},set:function(t){t?this.Ff=qr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+_s(t(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){br(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Bn(tn,Pi);var go=function(){tn.call(this),this.pushButton=!0};Bn(go,tn);var js=function(){tn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Bn(js,tn);var fl=function(){var n,e;Pi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(u){return u};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),r)c.push("/"+i+" ("+_s(a(r[i]))+")");return c.push(">>"),c.join(`
`)},set:function(a){br(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Bn(fl,Pi),js.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},js.prototype.createOption=function(n){var e=new fl;return e.Parent=this,e.optionName=n,this.Kids.push(e),Km.call(this.scope,e),e};var yo=function(){tn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};Bn(yo,tn);var Ya=function(){Pi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,13)},set:function(e){e?this.Ff=qr(this.Ff,13):this.Ff=Br(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,21)},set:function(e){e?this.Ff=qr(this.Ff,21):this.Ff=Br(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,23)},set:function(e){e?this.Ff=qr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,24)},set:function(e){e?this.Ff=qr(this.Ff,24):this.Ff=Br(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,25)},set:function(e){e?this.Ff=qr(this.Ff,25):this.Ff=Br(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,26)},set:function(e){e?this.Ff=qr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Bn(Ya,Pi);var vo=function(){Ya.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Rr(this.Ff,14)},set:function(n){n?this.Ff=qr(this.Ff,14):this.Ff=Br(this.Ff,14)}}),this.password=!0};Bn(vo,Ya);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),i=bc(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+$t(_t.internal.getWidth(n))+" "+$t(_t.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+$t(i.fontSize)+" Tf "+a),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),a=[],i=_t.internal.getHeight(n),c=_t.internal.getWidth(n),u=bc(n,n.caption);return a.push("1 g"),a.push("0 0 "+$t(c)+" "+$t(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+$t(c-1)+" "+$t(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+$t(u.fontSize)+" Tf "+r),a.push(u.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(_t.internal.getWidth(n))+" "+$t(_t.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=_t.RadioButton.Circle.YesNormal,e.D[n]=_t.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=_t.internal.getWidth(n)<=_t.internal.getHeight(n)?_t.internal.getWidth(n)/4:_t.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=_t.internal.Bezier_C,i=Number((r*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ua(_t.internal.getWidth(n)/2)+" "+Ua(_t.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=_t.internal.getWidth(n)<=_t.internal.getHeight(n)?_t.internal.getWidth(n)/4:_t.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*_t.internal.Bezier_C).toFixed(5)),c=Number((r*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ua(_t.internal.getWidth(n)/2)+" "+Ua(_t.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ua(_t.internal.getWidth(n)/2)+" "+Ua(_t.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=_t.internal.getWidth(n)<=_t.internal.getHeight(n)?_t.internal.getWidth(n)/4:_t.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ua(_t.internal.getWidth(n)/2)+" "+Ua(_t.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=_t.RadioButton.Cross.YesNormal,e.D[n]=_t.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ui(n);e.scope=n.scope;var t=[],r=_t.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+$t(_t.internal.getWidth(n)-2)+" "+$t(_t.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push($t(r.x1.x)+" "+$t(r.x1.y)+" m"),t.push($t(r.x2.x)+" "+$t(r.x2.y)+" l"),t.push($t(r.x4.x)+" "+$t(r.x4.y)+" m"),t.push($t(r.x3.x)+" "+$t(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=_t.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(_t.internal.getWidth(n))+" "+$t(_t.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+$t(_t.internal.getWidth(n)-2)+" "+$t(_t.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push($t(t.x1.x)+" "+$t(t.x1.y)+" m"),r.push($t(t.x2.x)+" "+$t(t.x2.y)+" l"),r.push($t(t.x4.x)+" "+$t(t.x4.y)+" m"),r.push($t(t.x3.x)+" "+$t(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ui(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(_t.internal.getWidth(n))+" "+$t(_t.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};_t.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=_t.internal.getWidth(n),t=_t.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},_t.internal.getWidth=function(n){var e=0;return br(n)==="object"&&(e=Ku(n.Rect[2])),e},_t.internal.getHeight=function(n){var e=0;return br(n)==="object"&&(e=Ku(n.Rect[3])),e};var Km=Ir.addField=function(n){if(Wm(this,n),!(n instanceof Pi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ir.AcroFormChoiceField=ws,Ir.AcroFormListBox=Ns,Ir.AcroFormComboBox=Ss,Ir.AcroFormEditBox=mo,Ir.AcroFormButton=tn,Ir.AcroFormPushButton=go,Ir.AcroFormRadioButton=js,Ir.AcroFormCheckBox=yo,Ir.AcroFormTextField=Ya,Ir.AcroFormPasswordField=vo,Ir.AcroFormAppearance=_t,Ir.AcroForm={ChoiceField:ws,ListBox:Ns,ComboBox:Ss,EditBox:mo,Button:tn,PushButton:go,RadioButton:js,CheckBox:yo,TextField:Ya,PasswordField:vo,Appearance:_t},Ot.AcroForm={ChoiceField:ws,ListBox:Ns,ComboBox:Ss,EditBox:mo,Button:tn,PushButton:go,RadioButton:js,CheckBox:yo,TextField:Ya,PasswordField:vo,Appearance:_t};var Vm=Ot.AcroForm;function Zd(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(C,N){var q,V,he,Y,Q,ne=e;if((N=N||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(Z(C))for(Q in t)for(he=t[Q],q=0;q<he.length;q+=1){for(Y=!0,V=0;V<he[q].length;V+=1)if(he[q][V]!==void 0&&he[q][V]!==C[V]){Y=!1;break}if(Y===!0){ne=Q;break}}else for(Q in t)for(he=t[Q],q=0;q<he.length;q+=1){for(Y=!0,V=0;V<he[q].length;V+=1)if(he[q][V]!==void 0&&he[q][V]!==C.charCodeAt(V)){Y=!1;break}if(Y===!0){ne=Q;break}}return ne===e&&N!==e&&(ne=N),ne},a=function C(N){for(var q=this.internal.write,V=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:N.width}),Y.push({key:"Height",value:N.height}),N.colorSpace===E.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===E.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var Q="",ne=0,ie=N.transparency.length;ne<ie;ne++)Q+=N.transparency[ne]+" "+N.transparency[ne]+" ";Y.push({key:"Mask",value:"["+Q+"]"})}N.sMask!==void 0&&Y.push({key:"SMask",value:N.objectId+1+" 0 R"});var ge=N.filter!==void 0?["/"+N.filter]:void 0;if(V({data:N.data,additionalKeyValues:Y,alreadyAppliedFilters:ge,objectId:N.objectId}),q("endobj"),"sMask"in N&&N.sMask!==void 0){var Oe="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,I={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:Oe,data:N.sMask};"filter"in N&&(I.filter=N.filter),C.call(this,I)}if(N.colorSpace===E.INDEXED){var D=this.internal.newObject();V({data:O(new Uint8Array(N.palette)),objectId:D}),q("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var N in C)a.call(this,C[N])},c=function(){var C,N=this.internal.collections.addImage_images,q=this.internal.write;for(var V in N)q("/I"+(C=N[V]).index,C.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var C=this.internal.collections.addImage_images;return u.call(this),C},y=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(C){return typeof n["process"+C.toUpperCase()]=="function"},b=function(C){return br(C)==="object"&&C.nodeType===1},w=function(C,N){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var q=""+C.getAttribute("src");if(q.indexOf("data:image/")===0)return po(unescape(q).split("base64,").pop());var V=n.loadFile(q,!0);if(V!==void 0)return V}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var he;switch(N){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;case"JPEG":case"JPG":default:he="image/jpeg"}return po(C.toDataURL(he,1).split("base64,").pop())}},m=function(C){var N=this.internal.collections.addImage_images;if(N){for(var q in N)if(C===N[q].alias)return N[q]}},P=function(C,N,q){return C||N||(C=-96,N=-96),C<0&&(C=-1*q.width*72/C/this.internal.scaleFactor),N<0&&(N=-1*q.height*72/N/this.internal.scaleFactor),C===0&&(C=N*q.width/q.height),N===0&&(N=C*q.height/q.width),[C,N]},_=function(C,N,q,V,he,Y){var Q=P.call(this,q,V,he),ne=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,ge=d.call(this);if(q=Q[0],V=Q[1],ge[he.index]=he,Y){Y*=Math.PI/180;var Oe=Math.cos(Y),I=Math.sin(Y),D=function(te){return te.toFixed(4)},G=[D(Oe),D(I),D(-1*I),D(Oe),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,ne(C),ie(N+V),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([ne(q),"0","0",ne(V),"0","0","cm"].join(" "))):this.internal.write([ne(q),"0","0",ne(V),ne(C),ie(N+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},E=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=n.__addimage__.sHashCode=function(C){var N,q,V=0;if(typeof C=="string")for(q=C.length,N=0;N<q;N++)V=(V<<5)-V+C.charCodeAt(N),V|=0;else if(Z(C))for(q=C.byteLength/2,N=0;N<q;N++)V=(V<<5)-V+C[N],V|=0;return V},k=n.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var N=!0;return C.length===0&&(N=!1),C.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(N=!1),N},B=n.__addimage__.extractImageFromDataUrl=function(C){var N=(C=C||"").split("base64,"),q=null;if(N.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(V)&&(q={mimeType:V[1],charset:V[2],data:N[1]})}return q},K=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(C){return K()&&C instanceof ArrayBuffer};var Z=n.__addimage__.isArrayBufferView=function(C){return K()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},R=n.__addimage__.binaryStringToUint8Array=function(C){for(var N=C.length,q=new Uint8Array(N),V=0;V<N;V++)q[V]=C.charCodeAt(V);return q},O=n.__addimage__.arrayBufferToBinaryString=function(C){for(var N="",q=Z(C)?C:new Uint8Array(C),V=0;V<q.length;V+=8192)N+=String.fromCharCode.apply(null,q.subarray(V,V+8192));return N};n.addImage=function(){var C,N,q,V,he,Y,Q,ne,ie;if(typeof arguments[1]=="number"?(N=e,q=arguments[1],V=arguments[2],he=arguments[3],Y=arguments[4],Q=arguments[5],ne=arguments[6],ie=arguments[7]):(N=arguments[1],q=arguments[2],V=arguments[3],he=arguments[4],Y=arguments[5],Q=arguments[6],ne=arguments[7],ie=arguments[8]),br(C=arguments[0])==="object"&&!b(C)&&"imageData"in C){var ge=C;C=ge.imageData,N=ge.format||N||e,q=ge.x||q||0,V=ge.y||V||0,he=ge.w||ge.width||he,Y=ge.h||ge.height||Y,Q=ge.alias||Q,ne=ge.compression||ne,ie=ge.rotation||ge.angle||ie}var Oe=this.internal.getFilters();if(ne===void 0&&Oe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(q)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var I=X.call(this,C,N,Q,ne);return _.call(this,q,V,he,Y,I,ie),this};var X=function(C,N,q,V){var he,Y,Q;if(typeof C=="string"&&r(C)===e){C=unescape(C);var ne=oe(C,!1);(ne!==""||(ne=n.loadFile(C,!0))!==void 0)&&(C=ne)}if(b(C)&&(C=w(C,N)),N=r(C,N),!x(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((Q=q)==null||Q.length===0)&&(q=function(ie){return typeof ie=="string"||Z(ie)?j(ie):Z(ie.data)?j(ie.data):null}(C)),(he=m.call(this,q))||(K()&&(C instanceof Uint8Array||N==="RGBA"||(Y=C,C=R(C))),he=this["process"+N.toUpperCase()](C,y.call(this),q,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in n.image_compression?ie:L.NONE}(V),Y)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},oe=n.__addimage__.convertBase64ToBinaryString=function(C,N){var q;N=typeof N!="boolean"||N;var V,he="";if(typeof C=="string"){V=(q=B(C))!==null?q.data:C;try{he=po(V)}catch(Y){if(N)throw k(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return he};n.getImageProperties=function(C){var N,q,V="";if(b(C)&&(C=w(C)),typeof C=="string"&&r(C)===e&&((V=oe(C,!1))===""&&(V=n.loadFile(C)||""),C=V),q=r(C),!x(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!K()||C instanceof Uint8Array||(C=R(C)),!(N=this["process"+q.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=q,N}})(Ot.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ot.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,a,i,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(t.objId),y=t.pageContext.annotations,x=!1,b=0;b<y.length&&!x;b++)switch((r=y[b]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var w=0;w<y.length;w++){r=y[w];var m=this.internal.pdfEscape,P=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(_.objId),j=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+m(L(r.contents))+")",i+=" /Popup "+E.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+m(L(j))+") >>",_.content=i;var k=_.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(i+=" /Open true"),i+=" >>",E.content=i,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var B=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(P(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Z=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+Z+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,a,i,c){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(t),y:y(r),w:d(t+a),h:y(r+i)},options:c,type:"link"})},n.textWithLink=function(t,r,a,i){var c,u,d=this.getTextWidth(t),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var x=this.splitTextToSize(t,u).length;c=Math.ceil(y*x)}else u=d,c=y;return this.text(t,r,a,i),a+=.2*y,i.align==="center"&&(r-=d/2),i.align==="right"&&(r-=d),this.link(r,a-y,u,c,i),d},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Ot.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},u=n.__arabicParser__.isArabicEndLetter=function(_){return c(_)&&i(_)&&e[_.charCodeAt(0)].length<=2},d=n.__arabicParser__.isArabicAlfLetter=function(_){return c(_)&&a.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return c(_)&&i(_)&&e[_.charCodeAt(0)].length>=1};var y=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return c(_)&&i(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return c(_)&&i(_)&&e[_.charCodeAt(0)].length>=3};var x=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return c(_)&&i(_)&&e[_.charCodeAt(0)].length==4},b=n.__arabicParser__.resolveLigatures=function(_){var E=0,L=t,j="",k=0;for(E=0;E<_.length;E+=1)L[_.charCodeAt(E)]!==void 0?(k++,typeof(L=L[_.charCodeAt(E)])=="number"&&(j+=String.fromCharCode(L),L=t,k=0),E===_.length-1&&(L=t,j+=_.charAt(E-(k-1)),E-=k-1,k=0)):(L=t,j+=_.charAt(E-k),E-=k,k=0);return j};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var w=n.__arabicParser__.getCorrectForm=function(_,E,L){return c(_)?i(_)===!1?-1:!y(_)||!c(E)&&!c(L)||!c(L)&&u(E)||u(_)&&!c(E)||u(_)&&d(E)||u(_)&&u(E)?0:x(_)&&c(E)&&!u(E)&&c(L)&&y(L)?3:u(_)||!c(L)?1:2:-1},m=function(_){var E=0,L=0,j=0,k="",B="",K="",Z=(_=_||"").split("\\s+"),R=[];for(E=0;E<Z.length;E+=1){for(R.push(""),L=0;L<Z[E].length;L+=1)k=Z[E][L],B=Z[E][L-1],K=Z[E][L+1],c(k)?(j=w(k,B,K),R[E]+=j!==-1?String.fromCharCode(e[k.charCodeAt(0)][j]):k):R[E]+=k;R[E]=b(R[E])}return R.join(" ")},P=n.__arabicParser__.processArabic=n.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(E)){var j=0;for(L=[],j=0;j<E.length;j+=1)Array.isArray(E[j])?L.push([m(E[j][0]),E[j][1],E[j][2]]):L.push([m(E[j])]);_=L}else _=m(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",P])}(Ot.API),Ot.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var a;if((t=t||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ot.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(_){x=_}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(_){b=_}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(_){w=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(_){P=_}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},n.getTextDimensions=function(d,y){r.call(this);var x=(y=y||{}).fontSize||this.getFontSize(),b=y.font||this.getFont(),w=y.scaleFactor||this.internal.scaleFactor,m=0,P=0,_=0,E=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var L=y.maxWidth;L>0?typeof d=="string"?d=this.splitTextToSize(d,L):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(k,B){return k.concat(E.splitTextToSize(B,L))},[])):d=Array.isArray(d)?d:[d];for(var j=0;j<d.length;j++)m<(_=this.getStringUnitWidth(d[j],{font:b})*x)&&(m=_);return m!==0&&(P=d.length),{w:m/=w,h:Math.max((P*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/w,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var y=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===d.lineNumber?(d.x=(y.x||0)+(y.width||0),d.y=y.y||0):y.y+y.height+d.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=b.top,m&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=y.y+y.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,t===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-x,d.y+x,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+x,{align:"center",baseline:"top",maxWidth:d.width-x-x}):this.text(d.text,d.x+x,d.y+x,{align:"left",baseline:"top",maxWidth:d.width-x-x})),this.internal.__cell__.lastCell=d,this};n.table=function(d,y,x,b,w){if(r.call(this),!x)throw new Error("No data for PDF table.");var m,P,_,E,L=[],j=[],k=[],B={},K={},Z=[],R=[],O=(w=w||{}).autoSize||!1,X=w.printHeaders!==!1,oe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,C=w.margins||Object.assign({width:this.getPageWidth()},e),N=typeof w.padding=="number"?w.padding:3,q=w.headerBackgroundColor||"#c8c8c8",V=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=oe,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=V,this.setFontSize(oe),b==null)j=L=Object.keys(x[0]),k=L.map(function(){return"left"});else if(Array.isArray(b)&&br(b[0])==="object")for(L=b.map(function(ge){return ge.name}),j=b.map(function(ge){return ge.prompt||ge.name||""}),k=b.map(function(ge){return ge.align||"left"}),m=0;m<b.length;m+=1)K[b[m].name]=b[m].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(j=L=b,k=L.map(function(){return"left"}));if(O||Array.isArray(b)&&typeof b[0]=="string")for(m=0;m<L.length;m+=1){for(B[E=L[m]]=x.map(function(ge){return ge[E]}),this.setFont(void 0,"bold"),Z.push(this.getTextDimensions(j[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=B[E],this.setFont(void 0,"normal"),_=0;_<P.length;_+=1)Z.push(this.getTextDimensions(P[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[E]=Math.max.apply(null,Z)+N+N,Z=[]}if(X){var he={};for(m=0;m<L.length;m+=1)he[L[m]]={},he[L[m]].text=j[m],he[L[m]].align=k[m];var Y=u.call(this,he,K);R=L.map(function(ge){return new i(d,y,K[ge],Y,he[ge].text,void 0,he[ge].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var Q=b.reduce(function(ge,Oe){return ge[Oe.name]=Oe.align,ge},{});for(m=0;m<x.length;m+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:m,data:x[m]},this);var ne=u.call(this,x[m],K);for(_=0;_<L.length;_+=1){var ie=x[m][L[_]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:m,col:_,data:ie},this),c.call(this,new i(d,y,K[L[_]],ne,ie,m+2,Q[L[_]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=y,this};var u=function(d,y){var x=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map(function(m){var P=d[m];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,y[m]-x-x)},this).map(function(m){return this.getLineHeightFactor()*m.length*b/w+x+x},this).reduce(function(m,P){return Math.max(m,P)},0)};n.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},n.printHeaderRow=function(d,y){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){x=this.internal.__cell__.tableHeaderRow[m].clone(),y&&(x.y=this.internal.__cell__.margins.top||0,w.push(x)),x.lineNumber=d;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(P)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Ot.API);var eh={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},th=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xc=Zd(th),rh=[100,200,300,400,500,600,700,800,900],$m=Zd(rh);function wc(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return eh[i=i||"normal"]?i:"normal"}(n.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),a=function(i){return typeof xc[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,r].join(" ")}}}function Vu(n,e,t,r){var a;for(a=t;a>=0&&a<e.length;a+=r)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=r)if(n[e[a]])return n[e[a]]}var Gm={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$u={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gu(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Ym(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},Gm,t.genericFontFamilies||{}),i=null,c=null,u=0;u<e.length;++u)if(a[(i=wc(e[u])).family]&&(i.family=a[i.family]),n.hasOwnProperty(i.family)){c=n[i.family];break}if(!(c=c||n[r]))throw new Error("Could not find a font-family for the rule '"+Gu(i)+"' and default family '"+r+"'.");if(c=function(d,y){if(y[d])return y[d];var x=xc[d],b=x<=xc.normal?-1:1,w=Vu(y,th,x,b);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w}(i.stretch,c),c=function(d,y){if(y[d])return y[d];for(var x=eh[d],b=0;b<x.length;++b)if(y[x[b]])return y[x[b]];throw new Error("Could not find a matching font-style for "+d)}(i.style,c),!(c=function(d,y){if(y[d])return y[d];if(d===400&&y[500])return y[500];if(d===500&&y[400])return y[400];var x=$m[d],b=Vu(y,rh,x,d<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+d);return b}(i.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Gu(i)+"'.");return c}function Yu(n){return n.trimLeft()}function Qm(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Jm(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Qo,Qu,Ju,Zl=["times"];(function(n){var e,t,r,a,i,c,u,d,y,x=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new d,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new c,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new c,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,y=new x}]);var b=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=I;Object.defineProperty(this,"pdf",{get:function(){return D}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(qe){G=!!qe}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(qe){te=!!qe}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(qe){isNaN(qe)||(ae=qe)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(qe){isNaN(qe)||(ye=qe)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(qe){var le;typeof qe=="number"?le=[qe,qe,qe,qe]:((le=new Array(4))[0]=qe[0],le[1]=qe.length>=2?qe[1]:le[0],le[2]=qe.length>=3?qe[2]:le[0],le[3]=qe.length>=4?qe[3]:le[1]),y.margin=le}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(qe){Pe=qe}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(qe){fe=qe}});var Je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Je},set:function(qe){Je=qe}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(qe){qe instanceof x&&(y=qe)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(qe){y.path=qe}});var et=[];Object.defineProperty(this,"ctxStack",{get:function(){return et},set:function(qe){et=qe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(qe){var le;le=w(qe),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(qe){var le=w(qe);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(qe){["butt","round","square"].indexOf(qe)!==-1&&(this.ctx.lineCap=qe,this.pdf.setLineCap(qe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(qe){isNaN(qe)||(this.ctx.lineWidth=qe,this.pdf.setLineWidth(qe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(qe){["bevel","round","miter"].indexOf(qe)!==-1&&(this.ctx.lineJoin=qe,this.pdf.setLineJoin(qe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(qe){isNaN(qe)||(this.ctx.miterLimit=qe,this.pdf.setMiterLimit(qe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(qe){this.ctx.textBaseline=qe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(qe){["right","end","center","left","start"].indexOf(qe)!==-1&&(this.ctx.textAlign=qe)}});var Ve=null;function lt(qe,le){if(Ve===null){var Mt=function(jt){var rt=[];return Object.keys(jt).forEach(function(J){jt[J].forEach(function(de){var we=null;switch(de){case"bold":we={family:J,weight:"bold"};break;case"italic":we={family:J,style:"italic"};break;case"bolditalic":we={family:J,weight:"bold",style:"italic"};break;case"":case"normal":we={family:J}}we!==null&&(we.ref={name:J,style:de},rt.push(we))})}),rt}(qe.getFontList());Ve=function(jt){for(var rt={},J=0;J<jt.length;++J){var de=wc(jt[J]),we=de.family,Be=de.stretch,$e=de.style,Ue=de.weight;rt[we]=rt[we]||{},rt[we][Be]=rt[we][Be]||{},rt[we][Be][$e]=rt[we][Be][$e]||{},rt[we][Be][$e][Ue]=de}return rt}(Mt.concat(le))}return Ve}var Ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ft},set:function(qe){Ve=null,Ft=qe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(qe){var le;if(this.ctx.font=qe,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(qe))!==null){var Mt=le[1],jt=(le[2],le[3]),rt=le[4],J=(le[5],le[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(de==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var we=function(wt){var qt,ct,dr=[],Wt=wt.trim();if(Wt==="")return Zl;if(Wt in $u)return[$u[Wt]];for(;Wt!=="";){switch(ct=null,qt=(Wt=Yu(Wt)).charAt(0)){case'"':case"'":ct=Qm(Wt.substring(1),qt);break;default:ct=Jm(Wt)}if(ct===null||(dr.push(ct[0]),(Wt=Yu(ct[1]))!==""&&Wt.charAt(0)!==","))return Zl;Wt=Wt.replace(/^,/,"")}return dr}(J);if(this.fontFaces){var Be=Ym(lt(this.pdf,this.fontFaces),we.map(function(wt){return{family:wt,stretch:"normal",weight:jt,style:Mt}}));this.pdf.setFont(Be.ref.name,Be.ref.style)}else{var $e="";(jt==="bold"||parseInt(jt,10)>=700||Mt==="bold")&&($e="bold"),Mt==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var Ue="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<we.length;bt++){if(this.pdf.internal.getFont(we[bt],$e,{noFallback:!0,disableWarning:!0})!==void 0){Ue=we[bt];break}if($e==="bolditalic"&&this.pdf.internal.getFont(we[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ue=we[bt],$e="bold";else if(this.pdf.internal.getFont(we[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ue=we[bt],$e="normal";break}}if(Ue===""){for(var Pt=0;Pt<we.length;Pt++)if(Xe[we[Pt]]){Ue=Xe[we[Pt]];break}}Ue=Ue===""?"Times":Ue,this.pdf.setFont(Ue,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(qe){this.ctx.globalCompositeOperation=qe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(qe){this.ctx.globalAlpha=qe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(qe){this.ctx.lineDashOffset=qe,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(qe){this.ctx.lineDash=qe,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(qe){this.ctx.ignoreClearRect=!!qe}})};b.prototype.setLineDash=function(I){this.lineDash=I},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){B.call(this,"fill",!1)},b.prototype.stroke=function(){B.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(I,D){if(isNaN(I)||isNaN(D))throw yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new c(I,D));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new c(I,D)},b.prototype.closePath=function(){var I=new c(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&br(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){I=new c(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(I.x,I.y)},b.prototype.lineTo=function(I,D){if(isNaN(I)||isNaN(D))throw yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new c(I,D));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new c(G.x,G.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},b.prototype.quadraticCurveTo=function(I,D,G,te){if(isNaN(G)||isNaN(te)||isNaN(I)||isNaN(D))throw yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new c(G,te)),ye=this.ctx.transform.applyToPoint(new c(I,D));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new c(ae.x,ae.y)},b.prototype.bezierCurveTo=function(I,D,G,te,ae,ye){if(isNaN(ae)||isNaN(ye)||isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te))throw yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new c(ae,ye)),fe=this.ctx.transform.applyToPoint(new c(I,D)),Je=this.ctx.transform.applyToPoint(new c(G,te));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:Je.x,y2:Je.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(Pe.x,Pe.y)},b.prototype.arc=function(I,D,G,te,ae,ye){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te)||isNaN(ae))throw yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new c(I,D));I=Pe.x,D=Pe.y;var fe=this.ctx.transform.applyToPoint(new c(0,G)),Je=this.ctx.transform.applyToPoint(new c(0,0));G=Math.sqrt(Math.pow(fe.x-Je.x,2)+Math.pow(fe.y-Je.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:I,y:D,radius:G,startAngle:te,endAngle:ae,counterclockwise:ye})},b.prototype.arcTo=function(I,D,G,te,ae){throw new Error("arcTo not implemented.")},b.prototype.rect=function(I,D,G,te){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te))throw yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,D),this.lineTo(I+G,D),this.lineTo(I+G,D+te),this.lineTo(I,D+te),this.lineTo(I,D),this.lineTo(I+G,D),this.lineTo(I,D)},b.prototype.fillRect=function(I,D,G,te){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te))throw yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,D,G,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},b.prototype.strokeRect=function(I,D,G,te){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te))throw yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(I,D,G,te),this.stroke())},b.prototype.clearRect=function(I,D,G,te){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te))throw yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,D,G,te))},b.prototype.save=function(I){I=typeof I!="boolean"||I;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},b.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(D),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(I){var D,G,te,ae;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))D=0,G=0,te=0,ae=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(ye!==null)D=parseInt(ye[1]),G=parseInt(ye[2]),te=parseInt(ye[3]),ae=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)D=parseInt(ye[1]),G=parseInt(ye[2]),te=parseInt(ye[3]),ae=parseFloat(ye[4]);else{if(ae=1,typeof I=="string"&&I.charAt(0)!=="#"){var Pe=new $d(I);I=Pe.ok?Pe.toHex():"#000000"}I.length===4?(D=I.substring(1,2),D+=D,G=I.substring(2,3),G+=G,te=I.substring(3,4),te+=te):(D=I.substring(1,3),G=I.substring(3,5),te=I.substring(5,7)),D=parseInt(D,16),G=parseInt(G,16),te=parseInt(te,16)}}return{r:D,g:G,b:te,a:ae,style:I}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(I,D,G,te){if(isNaN(D)||isNaN(G)||typeof I!="string")throw yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!m.call(this)){var ae=ne(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;N.call(this,{text:I,x:D,y:G,scale:ye,angle:ae,align:this.textAlign,maxWidth:te})}},b.prototype.strokeText=function(I,D,G,te){if(isNaN(D)||isNaN(G)||typeof I!="string")throw yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){te=isNaN(te)?void 0:te;var ae=ne(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;N.call(this,{text:I,x:D,y:G,scale:ye,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},b.prototype.measureText=function(I){if(typeof I!="string")throw yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,G=this.pdf.internal.scaleFactor,te=D.internal.getFontSize(),ae=D.getStringUnitWidth(I)*te/D.internal.scaleFactor,ye=function(Pe){var fe=(Pe=Pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new ye({width:ae*=Math.round(96*G/72*1e4)/1e4})},b.prototype.scale=function(I,D){if(isNaN(I)||isNaN(D))throw yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new d(I,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},b.prototype.rotate=function(I){if(isNaN(I))throw yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new d(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},b.prototype.translate=function(I,D){if(isNaN(I)||isNaN(D))throw yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new d(1,0,0,1,I,D);this.ctx.transform=this.ctx.transform.multiply(G)},b.prototype.transform=function(I,D,G,te,ae,ye){if(isNaN(I)||isNaN(D)||isNaN(G)||isNaN(te)||isNaN(ae)||isNaN(ye))throw yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new d(I,D,G,te,ae,ye);this.ctx.transform=this.ctx.transform.multiply(Pe)},b.prototype.setTransform=function(I,D,G,te,ae,ye){I=isNaN(I)?1:I,D=isNaN(D)?0:D,G=isNaN(G)?0:G,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,ye=isNaN(ye)?0:ye,this.ctx.transform=new d(I,D,G,te,ae,ye)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(I,D,G,te,ae,ye,Pe,fe,Je){var et=this.pdf.getImageProperties(I),Ve=1,lt=1,Ft=1,qe=1;te!==void 0&&fe!==void 0&&(Ft=fe/te,qe=Je/ae,Ve=et.width/te*fe/te,lt=et.height/ae*Je/ae),ye===void 0&&(ye=D,Pe=G,D=0,G=0),te!==void 0&&fe===void 0&&(fe=te,Je=ae),te===void 0&&fe===void 0&&(fe=et.width,Je=et.height);for(var le,Mt=this.ctx.transform.decompose(),jt=ne(Mt.rotate.shx),rt=new d,J=(rt=(rt=(rt=rt.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale)).applyToRectangle(new u(ye-D*Ft,Pe-G*qe,te*Ve,ae*lt)),de=E.call(this,J),we=[],Be=0;Be<de.length;Be+=1)we.indexOf(de[Be])===-1&&we.push(de[Be]);if(k(we),this.autoPaging)for(var $e=we[0],Ue=we[we.length-1],Xe=$e;Xe<Ue+1;Xe++){this.pdf.setPage(Xe);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Xe===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Xe===1?0:wt+(Xe-2)*qt;if(this.ctx.clip_path.length!==0){var dr=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(le,this.posX+this.margin[3],-ct+Pt+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=dr}var Wt=JSON.parse(JSON.stringify(J));Wt=j([Wt],this.posX+this.margin[3],-ct+Pt+this.ctx.prevPageLastElemOffset)[0];var Or=(Xe>$e||Xe<Ue)&&_.call(this);Or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,qt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,jt),Or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",J.x,J.y,J.w,J.h,null,null,jt)};var E=function(I,D,G){var te=[];D=D||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":te.push(Math.floor((I.y+ae)/G)+1);break;case"arc":te.push(Math.floor((I.y+ae-I.radius)/G)+1),te.push(Math.floor((I.y+ae+I.radius)/G)+1);break;case"qct":var ye=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);te.push(Math.floor((ye.y+ae)/G)+1),te.push(Math.floor((ye.y+ye.h+ae)/G)+1);break;case"bct":var Pe=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);te.push(Math.floor((Pe.y+ae)/G)+1),te.push(Math.floor((Pe.y+Pe.h+ae)/G)+1);break;case"rect":te.push(Math.floor((I.y+ae)/G)+1),te.push(Math.floor((I.y+I.h+ae)/G)+1)}for(var fe=0;fe<te.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<te[fe];)L.call(this);return te},L=function(){var I=this.fillStyle,D=this.strokeStyle,G=this.font,te=this.lineCap,ae=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=D,this.font=G,this.lineCap=te,this.lineWidth=ae,this.lineJoin=ye},j=function(I,D,G){for(var te=0;te<I.length;te++)switch(I[te].type){case"bct":I[te].x2+=D,I[te].y2+=G;case"qct":I[te].x1+=D,I[te].y1+=G;case"mt":case"lt":case"arc":default:I[te].x+=D,I[te].y+=G}return I},k=function(I){return I.sort(function(D,G){return D-G})},B=function(I,D){for(var G,te,ae=this.fillStyle,ye=this.strokeStyle,Pe=this.lineCap,fe=this.lineWidth,Je=Math.abs(fe*this.ctx.transform.scaleX),et=this.lineJoin,Ve=JSON.parse(JSON.stringify(this.path)),lt=JSON.parse(JSON.stringify(this.path)),Ft=[],qe=0;qe<lt.length;qe++)if(lt[qe].x!==void 0)for(var le=E.call(this,lt[qe]),Mt=0;Mt<le.length;Mt+=1)Ft.indexOf(le[Mt])===-1&&Ft.push(le[Mt]);for(var jt=0;jt<Ft.length;jt++)for(;this.pdf.internal.getNumberOfPages()<Ft[jt];)L.call(this);if(k(Ft),this.autoPaging)for(var rt=Ft[0],J=Ft[Ft.length-1],de=rt;de<J+1;de++){this.pdf.setPage(de),this.fillStyle=ae,this.strokeStyle=ye,this.lineCap=Pe,this.lineWidth=Je,this.lineJoin=et;var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=de===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=de===1?0:$e+(de-2)*Ue;if(this.ctx.clip_path.length!==0){var bt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(G,this.posX+this.margin[3],-Xe+Be+this.ctx.prevPageLastElemOffset),K.call(this,I,!0),this.path=bt}if(te=JSON.parse(JSON.stringify(Ve)),this.path=j(te,this.posX+this.margin[3],-Xe+Be+this.ctx.prevPageLastElemOffset),D===!1||de===0){var Pt=(de>rt||de<J)&&_.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,Ue,null).clip().discardPath()),K.call(this,I,D),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=Je,K.call(this,I,D),this.lineWidth=fe;this.path=Ve},K=function(I,D){if((I!=="stroke"||D||!P.call(this))&&(I==="stroke"||D||!m.call(this))){for(var G,te,ae=[],ye=this.path,Pe=0;Pe<ye.length;Pe++){var fe=ye[Pe];switch(fe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:fe,deltas:[],abs:[]});break;case"lt":var Je=ae.length;if(ye[Pe-1]&&!isNaN(ye[Pe-1].x)&&(G=[fe.x-ye[Pe-1].x,fe.y-ye[Pe-1].y],Je>0)){for(;Je>=0;Je--)if(ae[Je-1].close!==!0&&ae[Je-1].begin!==!0){ae[Je-1].deltas.push(G),ae[Je-1].abs.push(fe);break}}break;case"bct":G=[fe.x1-ye[Pe-1].x,fe.y1-ye[Pe-1].y,fe.x2-ye[Pe-1].x,fe.y2-ye[Pe-1].y,fe.x-ye[Pe-1].x,fe.y-ye[Pe-1].y],ae[ae.length-1].deltas.push(G);break;case"qct":var et=ye[Pe-1].x+2/3*(fe.x1-ye[Pe-1].x),Ve=ye[Pe-1].y+2/3*(fe.y1-ye[Pe-1].y),lt=fe.x+2/3*(fe.x1-fe.x),Ft=fe.y+2/3*(fe.y1-fe.y),qe=fe.x,le=fe.y;G=[et-ye[Pe-1].x,Ve-ye[Pe-1].y,lt-ye[Pe-1].x,Ft-ye[Pe-1].y,qe-ye[Pe-1].x,le-ye[Pe-1].y],ae[ae.length-1].deltas.push(G);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(fe)}}te=D?null:I==="stroke"?"stroke":"fill";for(var Mt=!1,jt=0;jt<ae.length;jt++)if(ae[jt].arc)for(var rt=ae[jt].abs,J=0;J<rt.length;J++){var de=rt[J];de.type==="arc"?O.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,D,!Mt):q.call(this,de.x,de.y),Mt=!0}else if(ae[jt].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(ae[jt].begin!==!0){var we=ae[jt].start.x,Be=ae[jt].start.y;V.call(this,ae[jt].deltas,we,Be),Mt=!0}te&&X.call(this,te),D&&oe.call(this)}},Z=function(I){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-G;case"top":return I+D-G;case"hanging":return I+D-2*G;case"middle":return I+D/2-G;case"ideographic":return I;case"alphabetic":default:return I}},R=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(D,G){this.colorStops.push([D,G])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(I,D,G,te,ae,ye,Pe,fe,Je){for(var et=Y.call(this,G,te,ae,ye),Ve=0;Ve<et.length;Ve++){var lt=et[Ve];Ve===0&&(Je?C.call(this,lt.x1+I,lt.y1+D):q.call(this,lt.x1+I,lt.y1+D)),he.call(this,I,D,lt.x2,lt.y2,lt.x3,lt.y3,lt.x4,lt.y4)}fe?oe.call(this):X.call(this,Pe)},X=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oe=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(I,D){this.pdf.internal.out(t(I)+" "+r(D)+" m")},N=function(I){var D;switch(I.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var G=this.pdf.getTextDimensions(I.text),te=Z.call(this,I.y),ae=R.call(this,te)-G.h,ye=this.ctx.transform.applyToPoint(new c(I.x,te)),Pe=this.ctx.transform.decompose(),fe=new d;fe=(fe=(fe=fe.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var Je,et,Ve,lt=this.ctx.transform.applyToRectangle(new u(I.x,te,G.w,G.h)),Ft=fe.applyToRectangle(new u(I.x,ae,G.w,G.h)),qe=E.call(this,Ft),le=[],Mt=0;Mt<qe.length;Mt+=1)le.indexOf(qe[Mt])===-1&&le.push(qe[Mt]);if(k(le),this.autoPaging)for(var jt=le[0],rt=le[le.length-1],J=jt;J<rt+1;J++){this.pdf.setPage(J);var de=J===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],$e=Be-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Xe=Ue-this.margin[3],bt=J===1?0:we+(J-2)*$e;if(this.ctx.clip_path.length!==0){var Pt=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Je,this.posX+this.margin[3],-1*bt+de),K.call(this,"fill",!0),this.path=Pt}var wt=j([JSON.parse(JSON.stringify(Ft))],this.posX+this.margin[3],-bt+de+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(et*I.scale),Ve=this.lineWidth,this.lineWidth=Ve*I.scale);var qt=this.autoPaging!=="text";if(qt||wt.y+wt.h<=Be){if(qt||wt.y>=de&&wt.x<=Ue){var ct=qt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ue-wt.x)[0],dr=j([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-bt+de+this.ctx.prevPageLastElemOffset)[0],Wt=qt&&(J>jt||J<rt)&&_.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,$e,null).clip().discardPath()),this.pdf.text(ct,dr.x,dr.y,{angle:I.angle,align:D,renderingMode:I.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else wt.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-wt.y);I.scale>=.01&&(this.pdf.setFontSize(et),this.lineWidth=Ve)}else I.scale>=.01&&(et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(et*I.scale),Ve=this.lineWidth,this.lineWidth=Ve*I.scale),this.pdf.text(I.text,ye.x+this.posX,ye.y+this.posY,{angle:I.angle,align:D,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(et),this.lineWidth=Ve)},q=function(I,D,G,te){G=G||0,te=te||0,this.pdf.internal.out(t(I+G)+" "+r(D+te)+" l")},V=function(I,D,G){return this.pdf.lines(I,D,G,null,null)},he=function(I,D,G,te,ae,ye,Pe,fe){this.pdf.internal.out([e(a(G+I)),e(i(te+D)),e(a(ae+I)),e(i(ye+D)),e(a(Pe+I)),e(i(fe+D)),"c"].join(" "))},Y=function(I,D,G,te){for(var ae=2*Math.PI,ye=Math.PI/2;D>G;)D-=ae;var Pe=Math.abs(G-D);Pe<ae&&te&&(Pe=ae-Pe);for(var fe=[],Je=te?-1:1,et=D;Pe>1e-5;){var Ve=et+Je*Math.min(Pe,ye);fe.push(Q.call(this,I,et,Ve)),Pe-=Math.abs(Ve-et),et=Ve}return fe},Q=function(I,D,G){var te=(G-D)/2,ae=I*Math.cos(te),ye=I*Math.sin(te),Pe=ae,fe=-ye,Je=Pe*Pe+fe*fe,et=Je+Pe*ae+fe*ye,Ve=4/3*(Math.sqrt(2*Je*et)-et)/(Pe*ye-fe*ae),lt=Pe-Ve*fe,Ft=fe+Ve*Pe,qe=lt,le=-Ft,Mt=te+D,jt=Math.cos(Mt),rt=Math.sin(Mt);return{x1:I*Math.cos(D),y1:I*Math.sin(D),x2:lt*jt-Ft*rt,y2:lt*rt+Ft*jt,x3:qe*jt-le*rt,y3:qe*rt+le*jt,x4:I*Math.cos(G),y4:I*Math.sin(G)}},ne=function(I){return 180*I/Math.PI},ie=function(I,D,G,te,ae,ye){var Pe=I+.5*(G-I),fe=D+.5*(te-D),Je=ae+.5*(G-ae),et=ye+.5*(te-ye),Ve=Math.min(I,ae,Pe,Je),lt=Math.max(I,ae,Pe,Je),Ft=Math.min(D,ye,fe,et),qe=Math.max(D,ye,fe,et);return new u(Ve,Ft,lt-Ve,qe-Ft)},ge=function(I,D,G,te,ae,ye,Pe,fe){var Je,et,Ve,lt,Ft,qe,le,Mt,jt,rt,J,de,we,Be,$e=G-I,Ue=te-D,Xe=ae-G,bt=ye-te,Pt=Pe-ae,wt=fe-ye;for(et=0;et<41;et++)jt=(le=(Ve=I+(Je=et/40)*$e)+Je*((Ft=G+Je*Xe)-Ve))+Je*(Ft+Je*(ae+Je*Pt-Ft)-le),rt=(Mt=(lt=D+Je*Ue)+Je*((qe=te+Je*bt)-lt))+Je*(qe+Je*(ye+Je*wt-qe)-Mt),et==0?(J=jt,de=rt,we=jt,Be=rt):(J=Math.min(J,jt),de=Math.min(de,rt),we=Math.max(we,jt),Be=Math.max(Be,rt));return new u(Math.round(J),Math.round(de),Math.round(we-J),Math.round(Be-de))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,D,G=(I=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:D}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ot.API),function(n){var e=function(i){var c,u,d,y,x,b,w,m,P,_;for(u=[],d=0,y=(i+=c="\0\0\0\0".slice(i.length%4||4)).length;y>d;d+=4)(x=(i.charCodeAt(d)<<24)+(i.charCodeAt(d+1)<<16)+(i.charCodeAt(d+2)<<8)+i.charCodeAt(d+3))!==0?(b=(x=((x=((x=((x=(x-(_=x%85))/85)-(P=x%85))/85)-(m=x%85))/85)-(w=x%85))/85)%85,u.push(b+33,w+33,m+33,P+33,_+33)):u.push(122);return function(E,L){for(var j=L;j>0;j--)E.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},t=function(i){var c,u,d,y,x,b=String,w="length",m=255,P="charCodeAt",_="slice",E="replace";for(i[_](-2),i=i[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),d=[],y=0,x=(i+=c="uuuuu"[_](i[w]%5||5))[w];x>y;y+=5)u=52200625*(i[P](y)-33)+614125*(i[P](y+1)-33)+7225*(i[P](y+2)-33)+85*(i[P](y+3)-33)+(i[P](y+4)-33),d.push(m&u>>24,m&u>>16,m&u>>8,m&u);return function(L,j){for(var k=j;k>0;k--)L.pop()}(d,c[w]),b.fromCharCode.apply(b,d)},r=function(i){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),c.test(i)===!1)return"";for(var u="",d=0;d<i.length;d+=2)u+=String.fromCharCode("0x"+(i[d]+i[d+1]));return u},a=function(i){for(var c=new Uint8Array(i.length),u=i.length;u--;)c[u]=i.charCodeAt(u);return i=(c=mc(c)).reduce(function(d,y){return d+String.fromCharCode(y)},"")};n.processDataByFilters=function(i,c){var u=0,d=i||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=r(d),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:d,reverseChain:y.reverse().join(" ")}}}(Ot.API),function(n){n.loadFile=function(e,t,r){return function(a,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(d,y,x){var b=new XMLHttpRequest,w=0,m=function(P){var _=P.length,E=[],L=String.fromCharCode;for(w=0;w<_;w+=1)E.push(L(255&P.charCodeAt(w)));return E.join("")};if(b.open("GET",d,!y),b.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(b.onload=function(){b.status===200?x(m(this.responseText)):x(void 0)}),b.send(null),y&&b.status===200)return m(b.responseText)}(a,i,c)}catch{}return u}(e,t,r)},n.loadImageFile=n.loadFile}(Ot.API),function(n){function e(){return(Ut.html2canvas?Promise.resolve(Ut.html2canvas):Ai(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(Ut.DOMPurify?Promise.resolve(Ut.DOMPurify):Ai(()=>import("./purify.es-2de9db7f.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var u=br(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(c,u){var d=document.createElement(c);for(var y in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[y]=u.style[y];return d},i=function c(u){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),d);return y=(y=y.setProgress(1,c,1,[c])).set(u)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(c,u){return c.__proto__=u||i.prototype,c},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(t).then(function(d){return this.set({src:a("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},i.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function d(y,x){for(var b=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),w=y.firstChild;w;w=w.nextSibling)x!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||b.appendChild(d(w,x));return y.nodeType===1&&(y.nodeName==="CANVAS"?(b.width=y.width,b.height=y.height,b.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(b.value=y.value),b.addEventListener("load",function(){b.scrollTop=y.scrollTop,b.scrollLeft=y.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=this.opt.jsPDF,y=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=y,y)for(var w=0;w<y.length;++w){var m=y[w],P=m.src.find(function(_){return _.format==="truetype"});P&&d.addFont(P.url,m.ref.name,m.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,d.context2d.save(!0),u(this.prop.container,b)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(c,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},i.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},i.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},i.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(c){if(r(c)!=="object")return this;var u=Object.keys(c||{}).map(function(d){if(d in i.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(u)})},i.prototype.get=function(c,u){return this.then(function(){var d=c in i.template.prop?this.prop[c]:this.opt[c];return u?u(d):d})},i.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},i.prototype.setPageSize=function(c){function u(d,y){return Math.floor(d*y/72*96)}return this.then(function(){(c=c||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},i.prototype.setProgress=function(c,u,d,y){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(c,u,d,y){return this.setProgress(c?this.progress.val+c:null,u||null,d?this.progress.n+d:null,y?this.progress.stack.concat(y):null)},i.prototype.then=function(c,u){var d=this;return this.thenCore(c,u,function(y,x){return d.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(b){return d.updateProgress(null,y),b}).then(y,x).then(function(b){return d.updateProgress(1),b})})},i.prototype.thenCore=function(c,u,d){d=d||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),x=d.call(y,c,u);return i.convert(x,this.__proto__)},i.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},i.prototype.thenList=function(c){var u=this;return c.forEach(function(d){u=u.thenCore(d)}),u},i.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return i.convert(u,this)},i.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},i.prototype.error=function(c){return this.then(function(){throw new Error(c)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ot.getPageSize=function(c,u,d){if(br(c)==="object"){var y=c;c=y.orientation,u=y.unit||u,d=y.format||d}u=u||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var x,b=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+u}var m,P=0,_=0;if(w.hasOwnProperty(b))P=w[b][1]/x,_=w[b][0]/x;else try{P=d[1],_=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",_>P&&(m=_,_=P,P=m);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>_&&(m=_,_=P,P=m)}return{width:_,height:P,unit:u,k:x,orientation:c}},n.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(wc):null;var d=new i(u);return u.worker?d:d.from(c).doCallback()}}(Ot.API),Ot.API.addJS=function(n){return Ju=n,this.internal.events.subscribe("postPutResources",function(){Qo=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qo+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Qu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ju+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qo!==void 0&&Qu!==void 0&&this.internal.out("/Names <</JavaScript "+Qo+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),i=0;i<a.length;i++){var c=a[i],u=r.exec(c);if(u!=null){var d=u[1];t.internal.newObjectDeferredBegin(d,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,x=[];for(i=0;i<y;i++){var b=t.internal.newObject();x.push(b);var w=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<x.length;i++)t.internal.write("(page_"+(i+1)+")"+x[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,a,i){var c={title:a,options:i,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var c=r.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var d=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var y=0;y<r.children.length;y++)this.renderItems(r.children[y])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,a){for(var i=0;i<a.children.length;i++)r.count++,this.count_r(r,a.children[i]);return r.count}}])}(Ot.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,a,i,c,u){var d,y=this.decode.DCT_DECODE,x=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(d=function(b){for(var w,m=256*b.charCodeAt(4)+b.charCodeAt(5),P=b.length,_={width:0,height:0,numcomponents:1},E=4;E<P;E+=2){if(E+=m,e.indexOf(b.charCodeAt(E+1))!==-1){w=256*b.charCodeAt(E+5)+b.charCodeAt(E+6),_={width:256*b.charCodeAt(E+7)+b.charCodeAt(E+8),height:w,numcomponents:b.charCodeAt(E+9)};break}m=256*b.charCodeAt(E+2)+b.charCodeAt(E+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}x={data:t,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:y,index:r,alias:a}}return x}}(Ot.API);var Us,Jo,Xu,Zu,ed,Xm=function(){var n,e,t;function r(i){var c,u,d,y,x,b,w,m,P,_,E,L,j,k;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),P=(function(){var B,K;for(K=[],B=0;B<4;++B)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),y=this.readUInt16()||100,b.delay=1e3*x/y,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),i=(b!=null?b.data:void 0)||this.imgData,L=0;0<=c?L<c:L>c;0<=c?++L:--L)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((_=d-this.transparency.indexed.length)>0)for(j=0;0<=_?j<_:j>_;0<=_?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":w=(E=this.read(c)).indexOf(0),m=String.fromCharCode.apply(String,E.slice(0,w)),this.text[m]=String.fromCharCode.apply(String,E.slice(w+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var c,u;for(u=[],c=0;0<=i?c<i:c>i;0<=i?++c:--c)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),d=0,y=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function x(b,w,m,P){var _,E,L,j,k,B,K,Z,R,O,X,oe,C,N,q,V,he,Y,Q,ne,ie,ge=Math.ceil((y.width-b)/m),Oe=Math.ceil((y.height-w)/P),I=y.width==ge&&y.height==Oe;for(N=c*ge,oe=I?u:new Uint8Array(N*Oe),B=i.length,C=0,E=0;C<Oe&&d<B;){switch(i[d++]){case 0:for(j=he=0;he<N;j=he+=1)oe[E++]=i[d++];break;case 1:for(j=Y=0;Y<N;j=Y+=1)_=i[d++],k=j<c?0:oe[E-c],oe[E++]=(_+k)%256;break;case 2:for(j=Q=0;Q<N;j=Q+=1)_=i[d++],L=(j-j%c)/c,q=C&&oe[(C-1)*N+L*c+j%c],oe[E++]=(q+_)%256;break;case 3:for(j=ne=0;ne<N;j=ne+=1)_=i[d++],L=(j-j%c)/c,k=j<c?0:oe[E-c],q=C&&oe[(C-1)*N+L*c+j%c],oe[E++]=(_+Math.floor((k+q)/2))%256;break;case 4:for(j=ie=0;ie<N;j=ie+=1)_=i[d++],L=(j-j%c)/c,k=j<c?0:oe[E-c],C===0?q=V=0:(q=oe[(C-1)*N+L*c+j%c],V=L&&oe[(C-1)*N+(L-1)*c+j%c]),K=k+q-V,Z=Math.abs(K-k),O=Math.abs(K-q),X=Math.abs(K-V),R=Z<=O&&Z<=X?k:O<=X?q:V,oe[E++]=(_+R)%256;break;default:throw new Error("Invalid filter algorithm: "+i[d-1])}if(!I){var D=((w+C*P)*y.width+b)*c,G=C*N;for(j=0;j<ge;j+=1){for(var te=0;te<c;te+=1)u[D++]=oe[G++];D+=(m-1)*c}}C++}}return i=Cm(i),y.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),u},r.prototype.decodePalette=function(){var i,c,u,d,y,x,b,w,m;for(u=this.palette,x=this.transparency.indexed||[],y=new Uint8Array((x.length||0)+u.length),d=0,i=0,c=b=0,w=u.length;b<w;c=b+=3)y[d++]=u[c],y[d++]=u[c+1],y[d++]=u[c+2],y[d++]=(m=x[i++])!=null?m:255;return y},r.prototype.copyToImageData=function(i,c){var u,d,y,x,b,w,m,P,_,E,L;if(d=this.colors,_=null,u=this.hasAlphaChannel,this.palette.length&&(_=(L=this._decodedPalette)!=null?L:this._decodedPalette=this.decodePalette(),d=4,u=!0),P=(y=i.data||i).length,b=_||c,x=w=0,d===1)for(;x<P;)m=_?4*c[x/4]:w,E=b[m++],y[x++]=E,y[x++]=E,y[x++]=E,y[x++]=u?b[m++]:255,w=m;else for(;x<P;)m=_?4*c[x/4]:w,y[x++]=b[m++],y[x++]=b[m++],y[x++]=b[m++],y[x++]=u?b[m++]:255,w=m},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Ut)==="[object Window]"){try{e=Ut.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),n=function(i){var c;if(a()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var c,u,d,y,x,b,w,m;if(this.animation){for(m=[],u=x=0,b=(w=this.animation.frames).length;x<b;u=++x)c=w[u],d=i.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(d,y),c.imageData=d,m.push(c.image=n(d));return m}},r.prototype.renderFrame=function(i,c){var u,d,y;return u=(d=this.animation.frames)[c],y=d[c-1],c===0&&i.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?i.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&i.putImageData(y.imageData,y.xOffset,y.yOffset),u.blendOp===0&&i.clearRect(u.xOffset,u.yOffset,u.width,u.height),i.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(i){var c,u,d,y,x,b,w=this;return u=0,b=this.animation,y=b.numFrames,d=b.frames,x=b.numPlays,(c=function(){var m,P;if(m=u++%y,P=d[m],w.renderFrame(i,m),y>1&&u/y<x)return w.animation._timeout=setTimeout(c,P.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var c,u;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,c=i.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zm(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,a=n[e++],i=a>>7,c=1<<(7&a)+1;n[e++],n[e++];var u=null,d=null;i&&(u=e,d=c,e+=3*c);var y=!0,x=[],b=0,w=null,m=0,P=null;for(this.width=t,this.height=r;y&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,P=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];b=n[e++]|n[e++]<<8,w=n[e++],!(1&_)&&(w=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var E=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,B=n[e++],K=B>>6&1,Z=1<<(7&B)+1,R=u,O=d,X=!1;B>>7&&(X=!0,R=e,O=Z,e+=3*Z);var oe=e;for(e++;;){var C;if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}x.push({x:E,y:L,width:j,height:k,has_local_palette:X,palette_offset:R,palette_size:O,data_offset:oe,data_length:e-oe,transparent_index:w,interlaced:!!K,delay:b,disposal:m});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return P},this.frameInfo=function(N){if(N<0||N>=x.length)throw new Error("Frame index out of range.");return x[N]},this.decodeAndBlitFrameBGRA=function(N,q){var V=this.frameInfo(N),he=V.width*V.height,Y=new Uint8Array(he);td(n,V.data_offset,Y,he);var Q=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var ie=V.width,ge=t-ie,Oe=ie,I=4*(V.y*t+V.x),D=4*((V.y+V.height)*t+V.x),G=I,te=4*ge;V.interlaced===!0&&(te+=4*t*7);for(var ae=8,ye=0,Pe=Y.length;ye<Pe;++ye){var fe=Y[ye];if(Oe===0&&(Oe=ie,(G+=te)>=D&&(te=4*ge+4*t*(ae-1),G=I+(ie+ge)*(ae<<1),ae>>=1)),fe===ne)G+=4;else{var Je=n[Q+3*fe],et=n[Q+3*fe+1],Ve=n[Q+3*fe+2];q[G++]=Ve,q[G++]=et,q[G++]=Je,q[G++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(N,q){var V=this.frameInfo(N),he=V.width*V.height,Y=new Uint8Array(he);td(n,V.data_offset,Y,he);var Q=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var ie=V.width,ge=t-ie,Oe=ie,I=4*(V.y*t+V.x),D=4*((V.y+V.height)*t+V.x),G=I,te=4*ge;V.interlaced===!0&&(te+=4*t*7);for(var ae=8,ye=0,Pe=Y.length;ye<Pe;++ye){var fe=Y[ye];if(Oe===0&&(Oe=ie,(G+=te)>=D&&(te=4*ge+4*t*(ae-1),G=I+(ie+ge)*(ae<<1),ae>>=1)),fe===ne)G+=4;else{var Je=n[Q+3*fe],et=n[Q+3*fe+1],Ve=n[Q+3*fe+2];q[G++]=Je,q[G++]=et,q[G++]=Ve,q[G++]=255}--Oe}}}function td(n,e,t,r){for(var a=n[e++],i=1<<a,c=i+1,u=c+1,d=a+1,y=(1<<d)-1,x=0,b=0,w=0,m=n[e++],P=new Int32Array(4096),_=null;;){for(;x<16&&m!==0;)b|=n[e++]<<x,x+=8,m===1?m=n[e++]:--m;if(x<d)break;var E=b&y;if(b>>=d,x-=d,E!==i){if(E===c)break;for(var L=E<u?E:_,j=0,k=L;k>i;)k=P[k]>>8,++j;var B=k;if(w+j+(L!==E?1:0)>r)return void yr.log("Warning, gif stream longer than expected.");t[w++]=B;var K=w+=j;for(L!==E&&(t[w++]=B),k=L;j--;)k=P[k],t[--K]=255&k,k>>=8;_!==null&&u<4096&&(P[u++]=_<<8|B,u>=y+1&&d<12&&(++d,y=y<<1|1)),_=E}else u=c+1,y=(1<<(d=a+1))-1,_=null}return w!==r&&yr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ec(n){var e,t,r,a,i,c=Math.floor,u=new Array(64),d=new Array(64),y=new Array(64),x=new Array(64),b=new Array(65535),w=new Array(65535),m=new Array(64),P=new Array(64),_=[],E=0,L=7,j=new Array(64),k=new Array(64),B=new Array(64),K=new Array(256),Z=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(I,D){for(var G=0,te=0,ae=new Array,ye=1;ye<=16;ye++){for(var Pe=1;Pe<=I[ye];Pe++)ae[D[te]]=[],ae[D[te]][0]=G,ae[D[te]][1]=ye,te++,G++;G*=2}return ae}function Q(I){for(var D=I[0],G=I[1]-1;G>=0;)D&1<<G&&(E|=1<<L),G--,--L<0&&(E==255?(ne(255),ne(0)):ne(E),L=7,E=0)}function ne(I){_.push(I)}function ie(I){ne(I>>8&255),ne(255&I)}function ge(I,D,G,te,ae){for(var ye,Pe=ae[0],fe=ae[240],Je=function(rt,J){var de,we,Be,$e,Ue,Xe,bt,Pt,wt,qt,ct=0;for(wt=0;wt<8;++wt){de=rt[ct],we=rt[ct+1],Be=rt[ct+2],$e=rt[ct+3],Ue=rt[ct+4],Xe=rt[ct+5],bt=rt[ct+6];var dr=de+(Pt=rt[ct+7]),Wt=de-Pt,Or=we+bt,Qt=we-bt,ut=Be+Xe,zr=Be-Xe,Vt=$e+Ue,gn=$e-Ue,at=dr+Vt,un=dr-Vt,rn=Or+ut,lr=Or-ut;rt[ct]=at+rn,rt[ct+4]=at-rn;var Rt=.707106781*(lr+un);rt[ct+2]=un+Rt,rt[ct+6]=un-Rt;var tr=.382683433*((at=gn+zr)-(lr=Qt+Wt)),Xn=.5411961*at+tr,Ee=1.306562965*lr+tr,gt=.707106781*(rn=zr+Qt),Dt=Wt+gt,xt=Wt-gt;rt[ct+5]=xt+Xn,rt[ct+3]=xt-Xn,rt[ct+1]=Dt+Ee,rt[ct+7]=Dt-Ee,ct+=8}for(ct=0,wt=0;wt<8;++wt){de=rt[ct],we=rt[ct+8],Be=rt[ct+16],$e=rt[ct+24],Ue=rt[ct+32],Xe=rt[ct+40],bt=rt[ct+48];var sr=de+(Pt=rt[ct+56]),Ht=de-Pt,Bt=we+bt,mr=we-bt,hr=Be+Xe,Hr=Be-Xe,si=$e+Ue,oi=$e-Ue,Wr=sr+si,nn=sr-si,Kr=Bt+hr,_n=Bt-hr;rt[ct]=Wr+Kr,rt[ct+32]=Wr-Kr;var En=.707106781*(_n+nn);rt[ct+16]=nn+En,rt[ct+48]=nn-En;var Yr=.382683433*((Wr=oi+Hr)-(_n=mr+Ht)),Ci=.5411961*Wr+Yr,Dn=1.306562965*_n+Yr,$i=.707106781*(Kr=Hr+mr),ki=Ht+$i,fr=Ht-$i;rt[ct+40]=fr+Ci,rt[ct+24]=fr-Ci,rt[ct+8]=ki+Dn,rt[ct+56]=ki-Dn,ct++}for(wt=0;wt<64;++wt)qt=rt[wt]*J[wt],m[wt]=qt>0?qt+.5|0:qt-.5|0;return m}(I,D),et=0;et<64;++et)P[R[et]]=Je[et];var Ve=P[0]-G;G=P[0],Ve==0?Q(te[0]):(Q(te[w[ye=32767+Ve]]),Q(b[ye]));for(var lt=63;lt>0&&P[lt]==0;)lt--;if(lt==0)return Q(Pe),G;for(var Ft,qe=1;qe<=lt;){for(var le=qe;P[qe]==0&&qe<=lt;)++qe;var Mt=qe-le;if(Mt>=16){Ft=Mt>>4;for(var jt=1;jt<=Ft;++jt)Q(fe);Mt&=15}ye=32767+P[qe],Q(ae[(Mt<<4)+w[ye]]),Q(b[ye]),qe++}return lt!=63&&Q(Pe),G}function Oe(I){I=Math.min(Math.max(I,1),100),i!=I&&(function(D){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=c((G[te]*D+50)/100);ae=Math.min(Math.max(ae,1),255),u[R[te]]=ae}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var fe=c((ye[Pe]*D+50)/100);fe=Math.min(Math.max(fe,1),255),d[R[Pe]]=fe}for(var Je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],et=0,Ve=0;Ve<8;Ve++)for(var lt=0;lt<8;lt++)y[et]=1/(u[R[et]]*Je[Ve]*Je[lt]*8),x[et]=1/(d[R[et]]*Je[Ve]*Je[lt]*8),et++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,D){D&&Oe(D),_=new Array,E=0,L=7,ie(65496),ie(65504),ie(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ie(1),ie(1),ne(0),ne(0),function(){ie(65499),ie(132),ne(0);for(var we=0;we<64;we++)ne(u[we]);ne(1);for(var Be=0;Be<64;Be++)ne(d[Be])}(),function(we,Be){ie(65472),ie(17),ne(8),ie(Be),ie(we),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(I.width,I.height),function(){ie(65476),ie(418),ne(0);for(var we=0;we<16;we++)ne(O[we+1]);for(var Be=0;Be<=11;Be++)ne(X[Be]);ne(16);for(var $e=0;$e<16;$e++)ne(oe[$e+1]);for(var Ue=0;Ue<=161;Ue++)ne(C[Ue]);ne(1);for(var Xe=0;Xe<16;Xe++)ne(N[Xe+1]);for(var bt=0;bt<=11;bt++)ne(q[bt]);ne(17);for(var Pt=0;Pt<16;Pt++)ne(V[Pt+1]);for(var wt=0;wt<=161;wt++)ne(he[wt])}(),ie(65498),ie(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var G=0,te=0,ae=0;E=0,L=7,this.encode.displayName="_encode_";for(var ye,Pe,fe,Je,et,Ve,lt,Ft,qe,le=I.data,Mt=I.width,jt=I.height,rt=4*Mt,J=0;J<jt;){for(ye=0;ye<rt;){for(et=rt*J+ye,lt=-1,Ft=0,qe=0;qe<64;qe++)Ve=et+(Ft=qe>>3)*rt+(lt=4*(7&qe)),J+Ft>=jt&&(Ve-=rt*(J+1+Ft-jt)),ye+lt>=rt&&(Ve-=ye+lt-rt+4),Pe=le[Ve++],fe=le[Ve++],Je=le[Ve++],j[qe]=(Z[Pe]+Z[fe+256>>0]+Z[Je+512>>0]>>16)-128,k[qe]=(Z[Pe+768>>0]+Z[fe+1024>>0]+Z[Je+1280>>0]>>16)-128,B[qe]=(Z[Pe+1280>>0]+Z[fe+1536>>0]+Z[Je+1792>>0]>>16)-128;G=ge(j,y,G,e,r),te=ge(k,x,te,t,a),ae=ge(B,x,ae,t,a),ye+=32}J+=8}if(L>=0){var de=[];de[1]=L+1,de[0]=(1<<L+1)-1,Q(de)}return ie(65497),new Uint8Array(_)},n=n||50,function(){for(var I=String.fromCharCode,D=0;D<256;D++)K[D]=I(D)}(),e=Y(O,X),t=Y(N,q),r=Y(oe,C),a=Y(V,he),function(){for(var I=1,D=2,G=1;G<=15;G++){for(var te=I;te<D;te++)w[32767+te]=G,b[32767+te]=[],b[32767+te][1]=G,b[32767+te][0]=te;for(var ae=-(D-1);ae<=-I;ae++)w[32767+ae]=G,b[32767+ae]=[],b[32767+ae][1]=G,b[32767+ae][0]=D-1+ae;I<<=1,D<<=1}}(),function(){for(var I=0;I<256;I++)Z[I]=19595*I,Z[I+256>>0]=38470*I,Z[I+512>>0]=7471*I+32768,Z[I+768>>0]=-11059*I,Z[I+1024>>0]=-21709*I,Z[I+1280>>0]=32768*I+8421375,Z[I+1536>>0]=-27439*I,Z[I+1792>>0]=-5329*I}(),Oe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wi(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rd(n){function e(O){if(!O)throw Error("assert :P")}function t(O,X,oe){for(var C=0;4>C;C++)if(O[X+C]!=oe.charCodeAt(C))return!0;return!1}function r(O,X,oe,C,N){for(var q=0;q<N;q++)O[X+q]=oe[C+q]}function a(O,X,oe,C){for(var N=0;N<C;N++)O[X+N]=oe}function i(O){return new Int32Array(O)}function c(O,X){for(var oe=[],C=0;C<O;C++)oe.push(new X);return oe}function u(O,X){var oe=[];return function C(N,q,V){for(var he=V[q],Y=0;Y<he&&(N.push(V.length>q+1?[]:new X),!(V.length<q+1));Y++)C(N[Y],q+1,V)}(oe,0,O),oe}var d=function(){var O=this;function X(o,h){for(var g=1<<h-1>>>0;o&g;)g>>>=1;return g?(o&g-1)+g:o}function oe(o,h,g,S,M){e(!(S%g));do o[h+(S-=g)]=M;while(0<S)}function C(o,h,g,S,M){if(e(2328>=M),512>=M)var U=i(512);else if((U=i(M))==null)return 0;return function(H,W,$,re,be,De){var Ie,Le,Qe=W,ze=1<<$,xe=i(16),Ae=i(16);for(e(be!=0),e(re!=null),e(H!=null),e(0<$),Le=0;Le<be;++Le){if(15<re[Le])return 0;++xe[re[Le]]}if(xe[0]==be)return 0;for(Ae[1]=0,Ie=1;15>Ie;++Ie){if(xe[Ie]>1<<Ie)return 0;Ae[Ie+1]=Ae[Ie]+xe[Ie]}for(Le=0;Le<be;++Le)Ie=re[Le],0<re[Le]&&(De[Ae[Ie]++]=Le);if(Ae[15]==1)return(re=new N).g=0,re.value=De[0],oe(H,Qe,1,ze,re),ze;var Ge,Ze=-1,Ye=ze-1,Nt=0,mt=1,Tt=1,yt=1<<$;for(Le=0,Ie=1,be=2;Ie<=$;++Ie,be<<=1){if(mt+=Tt<<=1,0>(Tt-=xe[Ie]))return 0;for(;0<xe[Ie];--xe[Ie])(re=new N).g=Ie,re.value=De[Le++],oe(H,Qe+Nt,be,yt,re),Nt=X(Nt,Ie)}for(Ie=$+1,be=2;15>=Ie;++Ie,be<<=1){if(mt+=Tt<<=1,0>(Tt-=xe[Ie]))return 0;for(;0<xe[Ie];--xe[Ie]){if(re=new N,(Nt&Ye)!=Ze){for(Qe+=yt,Ge=1<<(Ze=Ie)-$;15>Ze&&!(0>=(Ge-=xe[Ze]));)++Ze,Ge<<=1;ze+=yt=1<<(Ge=Ze-$),H[W+(Ze=Nt&Ye)].g=Ge+$,H[W+Ze].value=Qe-W-Ze}re.g=Ie-$,re.value=De[Le++],oe(H,Qe+(Nt>>$),be,yt,re),Nt=X(Nt,Ie)}}return mt!=2*Ae[15]-1?0:ze}(o,h,g,S,M,U)}function N(){this.value=this.g=0}function q(){this.value=this.g=0}function V(){this.G=c(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Xt,q)}function he(o,h,g,S){e(o!=null),e(h!=null),e(2147483648>S),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=h,o.pa=g,o.Jd=h,o.Yc=g+S,o.Zc=4<=S?g+S-4+1:g,ye(o)}function Y(o,h){for(var g=0;0<h--;)g|=fe(o,128)<<h;return g}function Q(o,h){var g=Y(o,h);return Pe(o)?-g:g}function ne(o,h,g,S){var M,U=0;for(e(o!=null),e(h!=null),e(4294967288>S),o.Sb=S,o.Ra=0,o.u=0,o.h=0,4<S&&(S=4),M=0;M<S;++M)U+=h[g+M]<<8*M;o.Ra=U,o.bb=S,o.oa=h,o.pa=g}function ie(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<Fa-8>>>0,++o.bb,o.u-=8;G(o)&&(o.h=1,o.u=0)}function ge(o,h){if(e(0<=h),!o.h&&h<=Xr){var g=D(o)&mi[h];return o.u+=h,ie(o),g}return o.h=1,o.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(o){return o.Ra>>>(o.u&Fa-1)>>>0}function G(o){return e(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>Fa}function te(o,h){o.u=h,o.h=G(o)}function ae(o){o.u>=ua&&(e(o.u>=ua),ie(o))}function ye(o){e(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(e(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function Pe(o){return Y(o,1)}function fe(o,h){var g=o.Ca;0>o.b&&ye(o);var S=o.b,M=g*h>>>8,U=(o.I>>>S>M)+0;for(U?(g-=M,o.I-=M+1<<S>>>0):g=M+1,S=g,M=0;256<=S;)M+=8,S>>=8;return S=7^M+hn[S],o.b-=S,o.Ca=(g<<S)-1,U}function Je(o,h,g){o[h+0]=g>>24&255,o[h+1]=g>>16&255,o[h+2]=g>>8&255,o[h+3]=g>>0&255}function et(o,h){return o[h+0]<<0|o[h+1]<<8}function Ve(o,h){return et(o,h)|o[h+2]<<16}function lt(o,h){return et(o,h)|et(o,h+2)<<16}function Ft(o,h){var g=1<<h;return e(o!=null),e(0<h),o.X=i(g),o.X==null?0:(o.Mb=32-h,o.Xa=h,1)}function qe(o,h){e(o!=null),e(h!=null),e(o.Xa==h.Xa),r(h.X,0,o.X,0,1<<h.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function Mt(o,h,g,S){e(g!=null),e(S!=null);var M=g[0],U=S[0];return M==0&&(M=(o*U+h/2)/h),U==0&&(U=(h*M+o/2)/o),0>=M||0>=U?0:(g[0]=M,S[0]=U,1)}function jt(o,h){return o+(1<<h)-1>>>h}function rt(o,h){return((4278255360&o)+(4278255360&h)>>>0&4278255360)+((16711935&o)+(16711935&h)>>>0&16711935)>>>0}function J(o,h){O[h]=function(g,S,M,U,H,W,$){var re;for(re=0;re<H;++re){var be=O[o](W[$+re-1],M,U+re);W[$+re]=rt(g[S+re],be)}}}function de(){this.ud=this.hd=this.jd=0}function we(o,h){return((4278124286&(o^h))>>>1)+(o&h)>>>0}function Be(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function $e(o,h){return Be(o+(o-h+.5>>1))}function Ue(o,h,g){return Math.abs(h-g)-Math.abs(o-g)}function Xe(o,h,g,S,M,U,H){for(S=U[H-1],g=0;g<M;++g)U[H+g]=S=rt(o[h+g],S)}function bt(o,h,g,S,M){var U;for(U=0;U<g;++U){var H=o[h+U],W=H>>8&255,$=16711935&($=($=16711935&H)+((W<<16)+W));S[M+U]=(4278255360&H)+$>>>0}}function Pt(o,h){h.jd=o>>0&255,h.hd=o>>8&255,h.ud=o>>16&255}function wt(o,h,g,S,M,U){var H;for(H=0;H<S;++H){var W=h[g+H],$=W>>>8,re=W,be=255&(be=(be=W>>>16)+((o.jd<<24>>24)*($<<24>>24)>>>5));re=255&(re=(re=re+((o.hd<<24>>24)*($<<24>>24)>>>5))+((o.ud<<24>>24)*(be<<24>>24)>>>5)),M[U+H]=(4278255360&W)+(be<<16)+re}}function qt(o,h,g,S,M){O[h]=function(U,H,W,$,re,be,De,Ie,Le){for($=De;$<Ie;++$)for(De=0;De<Le;++De)re[be++]=M(W[S(U[H++])])},O[o]=function(U,H,W,$,re,be,De){var Ie=8>>U.b,Le=U.Ea,Qe=U.K[0],ze=U.w;if(8>Ie)for(U=(1<<U.b)-1,ze=(1<<Ie)-1;H<W;++H){var xe,Ae=0;for(xe=0;xe<Le;++xe)xe&U||(Ae=S($[re++])),be[De++]=M(Qe[Ae&ze]),Ae>>=Ie}else O["VP8LMapColor"+g]($,re,Qe,ze,be,De,H,W,Le)}}function ct(o,h,g,S,M){for(g=h+g;h<g;){var U=o[h++];S[M++]=U>>16&255,S[M++]=U>>8&255,S[M++]=U>>0&255}}function dr(o,h,g,S,M){for(g=h+g;h<g;){var U=o[h++];S[M++]=U>>16&255,S[M++]=U>>8&255,S[M++]=U>>0&255,S[M++]=U>>24&255}}function Wt(o,h,g,S,M){for(g=h+g;h<g;){var U=(H=o[h++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;S[M++]=U,S[M++]=H}}function Or(o,h,g,S,M){for(g=h+g;h<g;){var U=(H=o[h++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;S[M++]=U,S[M++]=H}}function Qt(o,h,g,S,M){for(g=h+g;h<g;){var U=o[h++];S[M++]=U>>0&255,S[M++]=U>>8&255,S[M++]=U>>16&255}}function ut(o,h,g,S,M,U){if(U==0)for(g=h+g;h<g;)Je(S,((U=o[h++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),M+=32;else r(S,M,o,h,g)}function zr(o,h){O[h][0]=O[o+"0"],O[h][1]=O[o+"1"],O[h][2]=O[o+"2"],O[h][3]=O[o+"3"],O[h][4]=O[o+"4"],O[h][5]=O[o+"5"],O[h][6]=O[o+"6"],O[h][7]=O[o+"7"],O[h][8]=O[o+"8"],O[h][9]=O[o+"9"],O[h][10]=O[o+"10"],O[h][11]=O[o+"11"],O[h][12]=O[o+"12"],O[h][13]=O[o+"13"],O[h][14]=O[o+"0"],O[h][15]=O[o+"0"]}function Vt(o){return o==jl||o==Al||o==Eo||o==_l}function gn(){this.eb=[],this.size=this.A=this.fb=0}function at(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function un(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gn,this.f.kb=new at,this.sd=null}function rn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rt(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function tr(o,h){var g=o.T,S=h.ba.f.RGBA,M=S.eb,U=S.fb+o.ka*S.A,H=ii[h.ba.S],W=o.y,$=o.O,re=o.f,be=o.N,De=o.ea,Ie=o.W,Le=h.cc,Qe=h.dc,ze=h.Mc,xe=h.Nc,Ae=o.ka,Ge=o.ka+o.T,Ze=o.U,Ye=Ze+1>>1;for(Ae==0?H(W,$,null,null,re,be,De,Ie,re,be,De,Ie,M,U,null,null,Ze):(H(h.ec,h.fc,W,$,Le,Qe,ze,xe,re,be,De,Ie,M,U-S.A,M,U,Ze),++g);Ae+2<Ge;Ae+=2)Le=re,Qe=be,ze=De,xe=Ie,be+=o.Rc,Ie+=o.Rc,U+=2*S.A,H(W,($+=2*o.fa)-o.fa,W,$,Le,Qe,ze,xe,re,be,De,Ie,M,U-S.A,M,U,Ze);return $+=o.fa,o.j+Ge<o.o?(r(h.ec,h.fc,W,$,Ze),r(h.cc,h.dc,re,be,Ye),r(h.Mc,h.Nc,De,Ie,Ye),g--):1&Ge||H(W,$,null,null,re,be,De,Ie,re,be,De,Ie,M,U+S.A,null,null,Ze),g}function Xn(o,h,g){var S=o.F,M=[o.J];if(S!=null){var U=o.U,H=h.ba.S,W=H==Fo||H==Eo;h=h.ba.f.RGBA;var $=[0],re=o.ka;$[0]=o.T,o.Kb&&(re==0?--$[0]:(--re,M[0]-=o.width),o.j+o.ka+o.T==o.o&&($[0]=o.o-o.j-re));var be=h.eb;re=h.fb+re*h.A,o=At(S,M[0],o.width,U,$,be,re+(W?0:3),h.A),e(g==$),o&&Vt(H)&&pt(be,re,W,U,$,h.A)}return 0}function Ee(o){var h=o.ma,g=h.ba.S,S=11>g,M=g==Co||g==ko||g==Fo||g==Sl||g==12||Vt(g);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!ds(h.Oa,o,M?11:12))return 0;if(M&&Vt(g)&&tt(),o.da)alert("todo:use_scaling");else{if(S){if(h.Ib=Rt,o.Kb){if(g=o.U+1>>1,h.memory=i(o.U+2*g),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+o.U,h.Mc=h.cc,h.Nc=h.dc+g,h.Ib=tr,tt()}}else alert("todo:EmitYUV");M&&(h.Jb=Xn,S&&Fe())}if(S&&!Kc){for(o=0;256>o;++o)jh[o]=89858*(o-128)+Io>>Do,Ph[o]=-22014*(o-128)+Io,_h[o]=-45773*(o-128),Ah[o]=113618*(o-128)+Io>>Do;for(o=eo;o<Cl;++o)h=76283*(o-16)+Io>>Do,Lh[o-eo]=vn(h,255),Ch[o-eo]=vn(h+8>>4,15);Kc=1}return 1}function gt(o){var h=o.ma,g=o.U,S=o.T;return e(!(1&o.ka)),0>=g||0>=S?0:(g=h.Ib(o,h),h.Jb!=null&&h.Jb(o,h,g),h.Dc+=g,1)}function Dt(o){o.ma.memory=null}function xt(o,h,g,S){return ge(o,8)!=47?0:(h[0]=ge(o,14)+1,g[0]=ge(o,14)+1,S[0]=ge(o,1),ge(o,3)!=0?0:!o.h)}function sr(o,h){if(4>o)return o+1;var g=o-2>>1;return(2+(1&o)<<g)+ge(h,g)+1}function Ht(o,h){return 120<h?h-120:1<=(g=((g=uh[h-1])>>4)*o+(8-(15&g)))?g:1;var g}function Bt(o,h,g){var S=D(g),M=o[h+=255&S].g-8;return 0<M&&(te(g,g.u+8),S=D(g),h+=o[h].value,h+=S&(1<<M)-1),te(g,g.u+o[h].g),o[h].value}function mr(o,h,g){return g.g+=o.g,g.value+=o.value<<h>>>0,e(8>=g.g),o.g}function hr(o,h,g){var S=o.xc;return e((h=S==0?0:o.vc[o.md*(g>>S)+(h>>S)])<o.Wb),o.Ya[h]}function Hr(o,h,g,S){var M=o.ab,U=o.c*h,H=o.C;h=H+h;var W=g,$=S;for(S=o.Ta,g=o.Ua;0<M--;){var re=o.gc[M],be=H,De=h,Ie=W,Le=$,Qe=($=S,W=g,re.Ea);switch(e(be<De),e(De<=re.nc),re.hc){case 2:yi(Ie,Le,(De-be)*Qe,$,W);break;case 0:var ze=be,xe=De,Ae=$,Ge=W,Ze=(yt=re).Ea;ze==0&&(gi(Ie,Le,null,null,1,Ae,Ge),Xe(Ie,Le+1,0,0,Ze-1,Ae,Ge+1),Le+=Ze,Ge+=Ze,++ze);for(var Ye=1<<yt.b,Nt=Ye-1,mt=jt(Ze,yt.b),Tt=yt.K,yt=yt.w+(ze>>yt.b)*mt;ze<xe;){var ar=Tt,cr=yt,ir=1;for(da(Ie,Le,Ae,Ge-Ze,1,Ae,Ge);ir<Ze;){var rr=(ir&~Nt)+Ye;rr>Ze&&(rr=Ze),(0,v[ar[cr++]>>8&15])(Ie,Le+ +ir,Ae,Ge+ir-Ze,rr-ir,Ae,Ge+ir),ir=rr}Le+=Ze,Ge+=Ze,++ze&Nt||(yt+=mt)}De!=re.nc&&r($,W-Qe,$,W+(De-be-1)*Qe,Qe);break;case 1:for(Qe=Ie,xe=Le,Ze=(Ie=re.Ea)-(Ge=Ie&~(Ae=(Le=1<<re.b)-1)),ze=jt(Ie,re.b),Ye=re.K,re=re.w+(be>>re.b)*ze;be<De;){for(Nt=Ye,mt=re,Tt=new de,yt=xe+Ge,ar=xe+Ie;xe<yt;)Pt(Nt[mt++],Tt),A(Tt,Qe,xe,Le,$,W),xe+=Le,W+=Le;xe<ar&&(Pt(Nt[mt++],Tt),A(Tt,Qe,xe,Ze,$,W),xe+=Ze,W+=Ze),++be&Ae||(re+=ze)}break;case 3:if(Ie==$&&Le==W&&0<re.b){for(xe=$,Ie=Qe=W+(De-be)*Qe-(Ge=(De-be)*jt(re.Ea,re.b)),Le=$,Ae=W,ze=[],Ge=(Ze=Ge)-1;0<=Ge;--Ge)ze[Ge]=Le[Ae+Ge];for(Ge=Ze-1;0<=Ge;--Ge)xe[Ie+Ge]=ze[Ge];Mr(re,be,De,$,Qe,$,W)}else Mr(re,be,De,Ie,Le,$,W)}W=S,$=g}$!=g&&r(S,g,W,$,U)}function si(o,h){var g=o.V,S=o.Ba+o.c*o.C,M=h-o.C;if(e(h<=o.l.o),e(16>=M),0<M){var U=o.l,H=o.Ta,W=o.Ua,$=U.width;if(Hr(o,M,g,S),M=W=[W],e((g=o.C)<(S=h)),e(U.v<U.va),S>U.o&&(S=U.o),g<U.j){var re=U.j-g;g=U.j,M[0]+=re*$}if(g>=S?g=0:(M[0]+=4*U.v,U.ka=g-U.j,U.U=U.va-U.v,U.T=S-g,g=1),g){if(W=W[0],11>(g=o.ca).S){var be=g.f.RGBA,De=(S=g.S,M=U.U,U=U.T,re=be.eb,be.A),Ie=U;for(be=be.fb+o.Ma*be.A;0<Ie--;){var Le=H,Qe=W,ze=M,xe=re,Ae=be;switch(S){case Lo:F(Le,Qe,ze,xe,Ae);break;case Co:z(Le,Qe,ze,xe,Ae);break;case jl:z(Le,Qe,ze,xe,Ae),pt(xe,Ae,0,ze,1,0);break;case Oc:ve(Le,Qe,ze,xe,Ae);break;case ko:ut(Le,Qe,ze,xe,Ae,1);break;case Al:ut(Le,Qe,ze,xe,Ae,1),pt(xe,Ae,0,ze,1,0);break;case Fo:ut(Le,Qe,ze,xe,Ae,0);break;case Eo:ut(Le,Qe,ze,xe,Ae,0),pt(xe,Ae,1,ze,1,0);break;case Sl:ee(Le,Qe,ze,xe,Ae);break;case _l:ee(Le,Qe,ze,xe,Ae),St(xe,Ae,ze,1,0);break;case Tc:ce(Le,Qe,ze,xe,Ae);break;default:e(0)}W+=$,be+=De}o.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");e(o.Ma<=g.height)}}o.C=h,e(o.C<=o.i)}function oi(o){var h;if(0<o.ua)return 0;for(h=0;h<o.Wb;++h){var g=o.Ya[h].G,S=o.Ya[h].H;if(0<g[1][S[1]+0].g||0<g[2][S[2]+0].g||0<g[3][S[3]+0].g)return 0}return 1}function Wr(o,h,g,S,M,U){if(o.Z!=0){var H=o.qd,W=o.rd;for(e(Da[o.Z]!=null);h<g;++h)Da[o.Z](H,W,S,M,S,M,U),H=S,W=M,M+=U;o.qd=H,o.rd=W}}function nn(o,h){var g=o.l.ma,S=g.Z==0||g.Z==1?o.l.j:o.C;if(S=o.C<S?S:o.C,e(h<=o.l.o),h>S){var M=o.l.width,U=g.ca,H=g.tb+M*S,W=o.V,$=o.Ba+o.c*S,re=o.gc;e(o.ab==1),e(re[0].hc==3),l(re[0],S,h,W,$,U,H),Wr(g,S,h,U,H,M)}o.C=o.Ma=h}function Kr(o,h,g,S,M,U,H){var W=o.$/S,$=o.$%S,re=o.m,be=o.s,De=g+o.$,Ie=De;M=g+S*M;var Le=g+S*U,Qe=280+be.ua,ze=o.Pb?W:16777216,xe=0<be.ua?be.Wa:null,Ae=be.wc,Ge=De<Le?hr(be,$,W):null;e(o.C<U),e(Le<=M);var Ze=!1;e:for(;;){for(;Ze||De<Le;){var Ye=0;if(W>=ze){var Nt=De-g;e((ze=o).Pb),ze.wd=ze.m,ze.xd=Nt,0<ze.s.ua&&qe(ze.s.Wa,ze.s.vb),ze=W+hh}if($&Ae||(Ge=hr(be,$,W)),e(Ge!=null),Ge.Qb&&(h[De]=Ge.qb,Ze=!0),!Ze)if(ae(re),Ge.jc){Ye=re,Nt=h;var mt=De,Tt=Ge.pd[D(Ye)&Xt-1];e(Ge.jc),256>Tt.g?(te(Ye,Ye.u+Tt.g),Nt[mt]=Tt.value,Ye=0):(te(Ye,Ye.u+Tt.g-256),e(256<=Tt.value),Ye=Tt.value),Ye==0&&(Ze=!0)}else Ye=Bt(Ge.G[0],Ge.H[0],re);if(re.h)break;if(Ze||256>Ye){if(!Ze)if(Ge.nd)h[De]=(Ge.qb|Ye<<8)>>>0;else{if(ae(re),Ze=Bt(Ge.G[1],Ge.H[1],re),ae(re),Nt=Bt(Ge.G[2],Ge.H[2],re),mt=Bt(Ge.G[3],Ge.H[3],re),re.h)break;h[De]=(mt<<24|Ze<<16|Ye<<8|Nt)>>>0}if(Ze=!1,++De,++$>=S&&($=0,++W,H!=null&&W<=U&&!(W%16)&&H(o,W),xe!=null))for(;Ie<De;)Ye=h[Ie++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye}else if(280>Ye){if(Ye=sr(Ye-256,re),Nt=Bt(Ge.G[4],Ge.H[4],re),ae(re),Nt=Ht(S,Nt=sr(Nt,re)),re.h)break;if(De-g<Nt||M-De<Ye)break e;for(mt=0;mt<Ye;++mt)h[De+mt]=h[De+mt-Nt];for(De+=Ye,$+=Ye;$>=S;)$-=S,++W,H!=null&&W<=U&&!(W%16)&&H(o,W);if(e(De<=M),$&Ae&&(Ge=hr(be,$,W)),xe!=null)for(;Ie<De;)Ye=h[Ie++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye}else{if(!(Ye<Qe))break e;for(Ze=Ye-280,e(xe!=null);Ie<De;)Ye=h[Ie++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye;Ye=De,e(!(Ze>>>(Nt=xe).Xa)),h[Ye]=Nt.X[Ze],Ze=!0}Ze||e(re.h==G(re))}if(o.Pb&&re.h&&De<M)e(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&qe(o.s.vb,o.s.Wa);else{if(re.h)break e;H!=null&&H(o,W>U?U:W),o.a=0,o.$=De-g}return 1}return o.a=3,0}function _n(o){e(o!=null),o.vc=null,o.yc=null,o.Ya=null;var h=o.Wa;h!=null&&(h.X=null),o.vb=null,e(o!=null)}function En(){var o=new Is;return o==null?null:(o.a=0,o.xb=qc,zr("Predictor","VP8LPredictors"),zr("Predictor","VP8LPredictors_C"),zr("PredictorAdd","VP8LPredictorsAdd"),zr("PredictorAdd","VP8LPredictorsAdd_C"),yi=bt,A=wt,F=ct,z=dr,ee=Wt,ce=Or,ve=Qt,O.VP8LMapColor32b=ha,O.VP8LMapColor8b=f,o)}function Yr(o,h,g,S,M){var U=1,H=[o],W=[h],$=S.m,re=S.s,be=null,De=0;e:for(;;){if(g)for(;U&&ge($,1);){var Ie=H,Le=W,Qe=S,ze=1,xe=Qe.m,Ae=Qe.gc[Qe.ab],Ge=ge(xe,2);if(Qe.Oc&1<<Ge)U=0;else{switch(Qe.Oc|=1<<Ge,Ae.hc=Ge,Ae.Ea=Ie[0],Ae.nc=Le[0],Ae.K=[null],++Qe.ab,e(4>=Qe.ab),Ge){case 0:case 1:Ae.b=ge(xe,3)+2,ze=Yr(jt(Ae.Ea,Ae.b),jt(Ae.nc,Ae.b),0,Qe,Ae.K),Ae.K=Ae.K[0];break;case 3:var Ze,Ye=ge(xe,8)+1,Nt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Ie[0]=jt(Ae.Ea,Nt),Ae.b=Nt,Ze=ze=Yr(Ye,1,0,Qe,Ae.K)){var mt,Tt=Ye,yt=Ae,ar=1<<(8>>yt.b),cr=i(ar);if(cr==null)Ze=0;else{var ir=yt.K[0],rr=yt.w;for(cr[0]=yt.K[0][0],mt=1;mt<1*Tt;++mt)cr[mt]=rt(ir[rr+mt],cr[mt-1]);for(;mt<4*ar;++mt)cr[mt]=0;yt.K[0]=null,yt.K[0]=cr,Ze=1}}ze=Ze;break;case 2:break;default:e(0)}U=ze}}if(H=H[0],W=W[0],U&&ge($,1)&&!(U=1<=(De=ge($,4))&&11>=De)){S.a=3;break e}var gr;if(gr=U)t:{var pr,Yt,Vr,Tn=S,$r=H,Mn=W,ur=De,Yn=g,Qn=Tn.m,on=Tn.s,pn=[null],Pn=1,ai=0,Bi=dh[ur];r:for(;;){if(Yn&&ge(Qn,1)){var ln=ge(Qn,3)+2,ma=jt($r,ln),hs=jt(Mn,ln),Os=ma*hs;if(!Yr(ma,hs,0,Tn,pn))break r;for(pn=pn[0],on.xc=ln,pr=0;pr<Os;++pr){var Ia=pn[pr]>>8&65535;pn[pr]=Ia,Ia>=Pn&&(Pn=Ia+1)}}if(Qn.h)break r;for(Yt=0;5>Yt;++Yt){var Dr=Mc[Yt];!Yt&&0<ur&&(Dr+=1<<ur),ai<Dr&&(ai=Dr)}var kl=c(Pn*Bi,N),Gc=Pn,Yc=c(Gc,V);if(Yc==null)var To=null;else e(65536>=Gc),To=Yc;var to=i(ai);if(To==null||to==null||kl==null){Tn.a=1;break r}var Mo=kl;for(pr=Vr=0;pr<Pn;++pr){var bi=To[pr],Ts=bi.G,Ms=bi.H,Qc=0,Ro=1,Jc=0;for(Yt=0;5>Yt;++Yt){Dr=Mc[Yt],Ts[Yt]=Mo,Ms[Yt]=Vr,!Yt&&0<ur&&(Dr+=1<<ur);i:{var qo,Fl=Dr,Bo=Tn,ro=to,Eh=Mo,Dh=Vr,El=0,Oa=Bo.m,Ih=ge(Oa,1);if(a(ro,0,0,Fl),Ih){var Oh=ge(Oa,1)+1,Th=ge(Oa,1),Xc=ge(Oa,Th==0?1:8);ro[Xc]=1,Oh==2&&(ro[Xc=ge(Oa,8)]=1);var Uo=1}else{var Zc=i(19),eu=ge(Oa,4)+4;if(19<eu){Bo.a=3;var zo=0;break i}for(qo=0;qo<eu;++qo)Zc[ch[qo]]=ge(Oa,3);var Dl=void 0,no=void 0,tu=Bo,Mh=Zc,Ho=Fl,ru=ro,Il=0,Ta=tu.m,nu=8,iu=c(128,N);n:for(;C(iu,0,7,Mh,19);){if(ge(Ta,1)){var Rh=2+2*ge(Ta,3);if((Dl=2+ge(Ta,Rh))>Ho)break n}else Dl=Ho;for(no=0;no<Ho&&Dl--;){ae(Ta);var au=iu[0+(127&D(Ta))];te(Ta,Ta.u+au.g);var Rs=au.value;if(16>Rs)ru[no++]=Rs,Rs!=0&&(nu=Rs);else{var qh=Rs==16,su=Rs-16,Bh=oh[su],ou=ge(Ta,sh[su])+Bh;if(no+ou>Ho)break n;for(var Uh=qh?nu:0;0<ou--;)ru[no++]=Uh}}Il=1;break n}Il||(tu.a=3),Uo=Il}(Uo=Uo&&!Oa.h)&&(El=C(Eh,Dh,8,ro,Fl)),Uo&&El!=0?zo=El:(Bo.a=3,zo=0)}if(zo==0)break r;if(Ro&&lh[Yt]==1&&(Ro=Mo[Vr].g==0),Qc+=Mo[Vr].g,Vr+=zo,3>=Yt){var io,Ol=to[0];for(io=1;io<Dr;++io)to[io]>Ol&&(Ol=to[io]);Jc+=Ol}}if(bi.nd=Ro,bi.Qb=0,Ro&&(bi.qb=(Ts[3][Ms[3]+0].value<<24|Ts[1][Ms[1]+0].value<<16|Ts[2][Ms[2]+0].value)>>>0,Qc==0&&256>Ts[0][Ms[0]+0].value&&(bi.Qb=1,bi.qb+=Ts[0][Ms[0]+0].value<<8)),bi.jc=!bi.Qb&&6>Jc,bi.jc){var Wo,ga=bi;for(Wo=0;Wo<Xt;++Wo){var Ma=Wo,Ra=ga.pd[Ma],Ko=ga.G[0][ga.H[0]+Ma];256<=Ko.value?(Ra.g=Ko.g+256,Ra.value=Ko.value):(Ra.g=0,Ra.value=0,Ma>>=mr(Ko,8,Ra),Ma>>=mr(ga.G[1][ga.H[1]+Ma],16,Ra),Ma>>=mr(ga.G[2][ga.H[2]+Ma],0,Ra),mr(ga.G[3][ga.H[3]+Ma],24,Ra))}}}on.vc=pn,on.Wb=Pn,on.Ya=To,on.yc=kl,gr=1;break t}gr=0}if(!(U=gr)){S.a=3;break e}if(0<De){if(re.ua=1<<De,!Ft(re.Wa,De)){S.a=1,U=0;break e}}else re.ua=0;var Tl=S,lu=H,zh=W,Ml=Tl.s,Rl=Ml.xc;if(Tl.c=lu,Tl.i=zh,Ml.md=jt(lu,Rl),Ml.wc=Rl==0?-1:(1<<Rl)-1,g){S.xb=bh;break e}if((be=i(H*W))==null){S.a=1,U=0;break e}U=(U=Kr(S,be,0,H,W,W,null))&&!$.h;break e}return U?(M!=null?M[0]=be:(e(be==null),e(g)),S.$=0,g||_n(re)):_n(re),U}function Ci(o,h){var g=o.c*o.i,S=g+h+16*h;return e(o.c<=h),o.V=i(S),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+g+h,1)}function Dn(o,h){var g=o.C,S=h-g,M=o.V,U=o.Ba+o.c*g;for(e(h<=o.l.o);0<S;){var H=16<S?16:S,W=o.l.ma,$=o.l.width,re=$*H,be=W.ca,De=W.tb+$*g,Ie=o.Ta,Le=o.Ua;Hr(o,H,M,U),kt(Ie,Le,be,De,re),Wr(W,g,g+H,be,De,$),S-=H,M+=H*o.c,g+=H}e(g==h),o.C=o.Ma=h}function $i(){this.ub=this.yd=this.td=this.Rb=0}function ki(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Zn(){this.Yb=function(){var o=[];return function h(g,S,M){for(var U=M[S],H=0;H<U&&(g.push(M.length>S+1?[]:0),!(M.length<S+1));H++)h(g[H],S+1,M)}(o,0,[3,11]),o}()}function Un(){this.jb=i(3),this.Wc=u([4,8],Zn),this.Xc=u([4,17],Zn)}function Ps(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function zn(){this.ld=this.La=this.dd=this.tc=0}function Gi(){this.Na=this.la=0}function Xa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Yi(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function li(){this.uc=this.M=this.Nb=0,this.wa=Array(new zn),this.Y=0,this.ya=Array(new Yi),this.aa=0,this.l=new Qi}function Za(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Na(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new $i,this.Kc=new ki,this.ed=new Ps,this.Qa=new fr,this.Ic=this.$c=this.Aa=0,this.D=new li,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Oe),this.ia=0,this.pb=c(4,Xa),this.Pa=new Un,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Za),this.Hd=0,this.rb=Array(new Gi),this.sb=0,this.wa=Array(new zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Yi),this.L=this.aa=0,this.gd=u([4,2],zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jt(){var o=new Na;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,Zs||(Zs=or)),o}function Ar(o,h,g){return o.a==0&&(o.a=h,o.sc=g,o.cb=0),0}function es(o,h,g){return 3<=g&&o[h+0]==157&&o[h+1]==1&&o[h+2]==42}function ts(o,h){if(o==null)return 0;if(o.a=0,o.sc="OK",h==null)return Ar(o,2,"null VP8Io passed to VP8GetHeaders()");var g=h.data,S=h.w,M=h.ha;if(4>M)return Ar(o,7,"Truncated header.");var U=g[S+0]|g[S+1]<<8|g[S+2]<<16,H=o.Od;if(H.Rb=!(1&U),H.td=U>>1&7,H.yd=U>>4&1,H.ub=U>>5,3<H.td)return Ar(o,3,"Incorrect keyframe parameters.");if(!H.yd)return Ar(o,4,"Frame not displayable.");S+=3,M-=3;var W=o.Kc;if(H.Rb){if(7>M)return Ar(o,7,"cannot parse picture header");if(!es(g,S,M))return Ar(o,3,"Bad code word");W.c=16383&(g[S+4]<<8|g[S+3]),W.Td=g[S+4]>>6,W.i=16383&(g[S+6]<<8|g[S+5]),W.Ud=g[S+6]>>6,S+=7,M-=7,o.za=W.c+15>>4,o.Ub=W.i+15>>4,h.width=W.c,h.height=W.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,a((U=o.Pa).jb,0,255,U.jb.length),e((U=o.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,a(U.Zb,0,0,U.Zb.length),a(U.Lb,0,0,U.Lb)}if(H.ub>M)return Ar(o,7,"bad partition length");he(U=o.m,g,S,H.ub),S+=H.ub,M-=H.ub,H.Rb&&(W.Ld=Pe(U),W.Kd=Pe(U)),W=o.Qa;var $,re=o.Pa;if(e(U!=null),e(W!=null),W.Cb=Pe(U),W.Cb){if(W.Bb=Pe(U),Pe(U)){for(W.Fb=Pe(U),$=0;4>$;++$)W.Zb[$]=Pe(U)?Q(U,7):0;for($=0;4>$;++$)W.Lb[$]=Pe(U)?Q(U,6):0}if(W.Bb)for($=0;3>$;++$)re.jb[$]=Pe(U)?Y(U,8):255}else W.Bb=0;if(U.Ka)return Ar(o,3,"cannot parse segment header");if((W=o.ed).zd=Pe(U),W.Tb=Y(U,6),W.wb=Y(U,3),W.Pc=Pe(U),W.Pc&&Pe(U)){for(re=0;4>re;++re)Pe(U)&&(W.vd[re]=Q(U,6));for(re=0;4>re;++re)Pe(U)&&(W.od[re]=Q(U,6))}if(o.L=W.Tb==0?0:W.zd?1:2,U.Ka)return Ar(o,3,"cannot parse filter header");var be=M;if(M=$=S,S=$+be,W=be,o.Xb=(1<<Y(o.m,2))-1,be<3*(re=o.Xb))g=7;else{for($+=3*re,W-=3*re,be=0;be<re;++be){var De=g[M+0]|g[M+1]<<8|g[M+2]<<16;De>W&&(De=W),he(o.Jc[+be],g,$,De),$+=De,W-=De,M+=3}he(o.Jc[+re],g,$,W),g=$<S?0:5}if(g!=0)return Ar(o,g,"cannot parse partitions");for(g=Y($=o.m,7),M=Pe($)?Q($,4):0,S=Pe($)?Q($,4):0,W=Pe($)?Q($,4):0,re=Pe($)?Q($,4):0,$=Pe($)?Q($,4):0,be=o.Qa,De=0;4>De;++De){if(be.Cb){var Ie=be.Zb[De];be.Fb||(Ie+=g)}else{if(0<De){o.pb[De]=o.pb[0];continue}Ie=g}var Le=o.pb[De];Le.Sc[0]=Pl[vn(Ie+M,127)],Le.Sc[1]=Ll[vn(Ie+0,127)],Le.Eb[0]=2*Pl[vn(Ie+S,127)],Le.Eb[1]=101581*Ll[vn(Ie+W,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=Pl[vn(Ie+re,117)],Le.Qc[1]=Ll[vn(Ie+$,127)],Le.lc=Ie+$}if(!H.Rb)return Ar(o,4,"Not a key frame.");for(Pe(U),H=o.Pa,g=0;4>g;++g){for(M=0;8>M;++M)for(S=0;3>S;++S)for(W=0;11>W;++W)re=fe(U,yh[g][M][S][W])?Y(U,8):mh[g][M][S][W],H.Wc[g][M].Yb[S][W]=re;for(M=0;17>M;++M)H.Xc[g][M]=H.Wc[g][vh[M]]}return o.kc=Pe(U),o.kc&&(o.Bd=Y(U,8)),o.cb=1}function or(o,h,g,S,M,U,H){var W=h[M].Yb[g];for(g=0;16>M;++M){if(!fe(o,W[g+0]))return M;for(;!fe(o,W[g+1]);)if(W=h[++M].Yb[0],g=0,M==16)return 16;var $=h[M+1].Yb;if(fe(o,W[g+2])){var re=o,be=0;if(fe(re,(Ie=W)[(De=g)+3]))if(fe(re,Ie[De+6])){for(W=0,De=2*(be=fe(re,Ie[De+8]))+(Ie=fe(re,Ie[De+9+be])),be=0,Ie=fh[De];Ie[W];++W)be+=be+fe(re,Ie[W]);be+=3+(8<<De)}else fe(re,Ie[De+7])?(be=7+2*fe(re,165),be+=fe(re,145)):be=5+fe(re,159);else be=fe(re,Ie[De+4])?3+fe(re,Ie[De+5]):2;W=$[2]}else be=1,W=$[1];$=H+ph[M],0>(re=o).b&&ye(re);var De,Ie=re.b,Le=(De=re.Ca>>1)-(re.I>>Ie)>>31;--re.b,re.Ca+=Le,re.Ca|=1,re.I-=(De+1&Le)<<Ie,U[$]=((be^Le)-Le)*S[(0<M)+0]}return 16}function ci(o){var h=o.rb[o.sb-1];h.la=0,h.Na=0,a(o.zc,0,0,o.zc.length),o.ja=0}function Ji(o,h){if(o==null)return 0;if(h==null)return Ar(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!ts(o,h))return 0;if(e(o.cb),h.ac==null||h.ac(h)){h.ob&&(o.L=0);var g=Oo[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=h.v-g>>4,o.zb=h.j-g>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=h.o+15+g>>4,o.Hb=h.va+15+g>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var S=o.ed;for(g=0;4>g;++g){var M;if(o.Qa.Cb){var U=o.Qa.Lb[g];o.Qa.Fb||(U+=S.Tb)}else U=S.Tb;for(M=0;1>=M;++M){var H=o.gd[g][M],W=U;if(S.Pc&&(W+=S.vd[0],M&&(W+=S.od[0])),0<(W=0>W?0:63<W?63:W)){var $=W;0<S.wb&&($=4<S.wb?$>>2:$>>1)>9-S.wb&&($=9-S.wb),1>$&&($=1),H.dd=$,H.tc=2*W+$,H.ld=40<=W?2:15<=W?1:0}else H.tc=0;H.La=M}}}g=0}else Ar(o,6,"Frame setup failed"),g=o.a;if(g=g==0){if(g){o.$c=0,0<o.Aa||(o.Ic=Fh);e:{g=o.Ic,S=4*($=o.za);var re=32*$,be=$+1,De=0<o.L?$*(0<o.Aa?2:1):0,Ie=(o.Aa==2?2:1)*$;if((H=S+832+(M=3*(16*g+Oo[o.L])/2*re)+(U=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=H)g=0;else{if(H>o.Vb){if(o.Vb=0,o.Ec=i(H),o.Fc=0,o.Ec==null){g=Ar(o,1,"no memory during frame initialization.");break e}o.Vb=H}H=o.Ec,W=o.Fc,o.Ac=H,o.Bc=W,W+=S,o.Gd=c(re,Za),o.Hd=0,o.rb=c(be+1,Gi),o.sb=1,o.wa=De?c(De,zn):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=$),e(!0),o.oc=H,o.pc=W,W+=832,o.ya=c(Ie,Yi),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=$),o.R=16*$,o.B=8*$,$=(re=Oo[o.L])*o.R,re=re/2*o.B,o.sa=H,o.ta=W+$,o.qa=o.sa,o.ra=o.ta+16*g*o.R+re,o.Ha=o.qa,o.Ia=o.ra+8*g*o.B+re,o.$c=0,W+=M,o.mb=U?H:null,o.nb=U?W:null,e(W+U<=o.Fc+o.Vb),ci(o),a(o.Ac,o.Bc,0,S),g=1}}if(g){if(h.ka=0,h.y=o.sa,h.O=o.ta,h.f=o.qa,h.N=o.ra,h.ea=o.Ha,h.Vd=o.Ia,h.fa=o.R,h.Rc=o.B,h.F=null,h.J=0,!fa){for(g=-255;255>=g;++g)nr[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)It[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Er[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)Cr[255+g]=0>g?0:255<g?255:g;fa=1}Ne=Qs,_e=Sa,ke=ns,me=Xi,Se=is,ue=rs,Ce=Oi,je=ti,Te=_a,Me=oa,Re=Ds,Ke=Aa,nt=la,dt=Pa,it=Es,st=ei,ht=Vn,ot=ls,vi[0]=In,vi[1]=as,vi[2]=Zi,vi[3]=ea,vi[4]=Kn,vi[5]=dn,vi[6]=Cs,vi[7]=ta,vi[8]=ss,vi[9]=ks,Ea[0]=Wn,Ea[1]=Xs,Ea[2]=Pr,Ea[3]=Hn,Ea[4]=Qr,Ea[5]=Ls,Ea[6]=Lr,pa[0]=Ii,pa[1]=Js,pa[2]=ra,pa[3]=na,pa[4]=aa,pa[5]=ia,pa[6]=os,g=1}else g=0}g&&(g=function(Le,Qe){for(Le.M=0;Le.M<Le.Va;++Le.M){var ze,xe=Le.Jc[Le.M&Le.Xb],Ae=Le.m,Ge=Le;for(ze=0;ze<Ge.za;++ze){var Ze=Ae,Ye=Ge,Nt=Ye.Ac,mt=Ye.Bc+4*ze,Tt=Ye.zc,yt=Ye.ya[Ye.aa+ze];if(Ye.Qa.Bb?yt.$b=fe(Ze,Ye.Pa.jb[0])?2+fe(Ze,Ye.Pa.jb[2]):fe(Ze,Ye.Pa.jb[1]):yt.$b=0,Ye.kc&&(yt.Ad=fe(Ze,Ye.Bd)),yt.Za=!fe(Ze,145)+0,yt.Za){var ar=yt.Ob,cr=0;for(Ye=0;4>Ye;++Ye){var ir,rr=Tt[0+Ye];for(ir=0;4>ir;++ir){rr=gh[Nt[mt+ir]][rr];for(var gr=Rc[fe(Ze,rr[0])];0<gr;)gr=Rc[2*gr+fe(Ze,rr[gr])];rr=-gr,Nt[mt+ir]=rr}r(ar,cr,Nt,mt,4),cr+=4,Tt[0+Ye]=rr}}else rr=fe(Ze,156)?fe(Ze,128)?1:3:fe(Ze,163)?2:0,yt.Ob[0]=rr,a(Nt,mt,rr,4),a(Tt,0,rr,4);yt.Dd=fe(Ze,142)?fe(Ze,114)?fe(Ze,183)?1:3:2:0}if(Ge.m.Ka)return Ar(Le,7,"Premature end-of-partition0 encountered.");for(;Le.ja<Le.za;++Le.ja){if(Ge=xe,Ze=(Ae=Le).rb[Ae.sb-1],Nt=Ae.rb[Ae.sb+Ae.ja],ze=Ae.ya[Ae.aa+Ae.ja],mt=Ae.kc?ze.Ad:0)Ze.la=Nt.la=0,ze.Za||(Ze.Na=Nt.Na=0),ze.Hc=0,ze.Gc=0,ze.ia=0;else{var pr,Yt;if(Ze=Nt,Nt=Ge,mt=Ae.Pa.Xc,Tt=Ae.ya[Ae.aa+Ae.ja],yt=Ae.pb[Tt.$b],Ye=Tt.ad,ar=0,cr=Ae.rb[Ae.sb-1],rr=ir=0,a(Ye,ar,0,384),Tt.Za)var Vr=0,Tn=mt[3];else{gr=i(16);var $r=Ze.Na+cr.Na;if($r=Zs(Nt,mt[1],$r,yt.Eb,0,gr,0),Ze.Na=cr.Na=(0<$r)+0,1<$r)Ne(gr,0,Ye,ar);else{var Mn=gr[0]+3>>3;for(gr=0;256>gr;gr+=16)Ye[ar+gr]=Mn}Vr=1,Tn=mt[0]}var ur=15&Ze.la,Yn=15&cr.la;for(gr=0;4>gr;++gr){var Qn=1&Yn;for(Mn=Yt=0;4>Mn;++Mn)ur=ur>>1|(Qn=($r=Zs(Nt,Tn,$r=Qn+(1&ur),yt.Sc,Vr,Ye,ar))>Vr)<<7,Yt=Yt<<2|(3<$r?3:1<$r?2:Ye[ar+0]!=0),ar+=16;ur>>=4,Yn=Yn>>1|Qn<<7,ir=(ir<<8|Yt)>>>0}for(Tn=ur,Vr=Yn>>4,pr=0;4>pr;pr+=2){for(Yt=0,ur=Ze.la>>4+pr,Yn=cr.la>>4+pr,gr=0;2>gr;++gr){for(Qn=1&Yn,Mn=0;2>Mn;++Mn)$r=Qn+(1&ur),ur=ur>>1|(Qn=0<($r=Zs(Nt,mt[2],$r,yt.Qc,0,Ye,ar)))<<3,Yt=Yt<<2|(3<$r?3:1<$r?2:Ye[ar+0]!=0),ar+=16;ur>>=2,Yn=Yn>>1|Qn<<5}rr|=Yt<<4*pr,Tn|=ur<<4<<pr,Vr|=(240&Yn)<<pr}Ze.la=Tn,cr.la=Vr,Tt.Hc=ir,Tt.Gc=rr,Tt.ia=43690&rr?0:yt.ia,mt=!(ir|rr)}if(0<Ae.L&&(Ae.wa[Ae.Y+Ae.ja]=Ae.gd[ze.$b][ze.Za],Ae.wa[Ae.Y+Ae.ja].La|=!mt),Ge.Ka)return Ar(Le,7,"Premature end-of-file encountered.")}if(ci(Le),Ae=Qe,Ge=1,ze=(xe=Le).D,Ze=0<xe.L&&xe.M>=xe.zb&&xe.M<=xe.Va,xe.Aa==0)e:{if(ze.M=xe.M,ze.uc=Ze,us(xe,ze),Ge=1,ze=(Yt=xe.D).Nb,Ze=(rr=Oo[xe.L])*xe.R,Nt=rr/2*xe.B,gr=16*ze*xe.R,Mn=8*ze*xe.B,mt=xe.sa,Tt=xe.ta-Ze+gr,yt=xe.qa,Ye=xe.ra-Nt+Mn,ar=xe.Ha,cr=xe.Ia-Nt+Mn,Yn=(ur=Yt.M)==0,ir=ur>=xe.Va-1,xe.Aa==2&&us(xe,Yt),Yt.uc)for(Qn=($r=xe).D.M,e($r.D.uc),Yt=$r.yb;Yt<$r.Hb;++Yt){Vr=Yt,Tn=Qn;var on=(pn=(Dr=$r).D).Nb;pr=Dr.R;var pn=pn.wa[pn.Y+Vr],Pn=Dr.sa,ai=Dr.ta+16*on*pr+16*Vr,Bi=pn.dd,ln=pn.tc;if(ln!=0)if(e(3<=ln),Dr.L==1)0<Vr&&st(Pn,ai,pr,ln+4),pn.La&&ot(Pn,ai,pr,ln),0<Tn&&it(Pn,ai,pr,ln+4),pn.La&&ht(Pn,ai,pr,ln);else{var ma=Dr.B,hs=Dr.qa,Os=Dr.ra+8*on*ma+8*Vr,Ia=Dr.Ha,Dr=Dr.Ia+8*on*ma+8*Vr;on=pn.ld,0<Vr&&(je(Pn,ai,pr,ln+4,Bi,on),Me(hs,Os,Ia,Dr,ma,ln+4,Bi,on)),pn.La&&(Ke(Pn,ai,pr,ln,Bi,on),dt(hs,Os,Ia,Dr,ma,ln,Bi,on)),0<Tn&&(Ce(Pn,ai,pr,ln+4,Bi,on),Te(hs,Os,Ia,Dr,ma,ln+4,Bi,on)),pn.La&&(Re(Pn,ai,pr,ln,Bi,on),nt(hs,Os,Ia,Dr,ma,ln,Bi,on))}}if(xe.ia&&alert("todo:DitherRow"),Ae.put!=null){if(Yt=16*ur,ur=16*(ur+1),Yn?(Ae.y=xe.sa,Ae.O=xe.ta+gr,Ae.f=xe.qa,Ae.N=xe.ra+Mn,Ae.ea=xe.Ha,Ae.W=xe.Ia+Mn):(Yt-=rr,Ae.y=mt,Ae.O=Tt,Ae.f=yt,Ae.N=Ye,Ae.ea=ar,Ae.W=cr),ir||(ur-=rr),ur>Ae.o&&(ur=Ae.o),Ae.F=null,Ae.J=null,xe.Fa!=null&&0<xe.Fa.length&&Yt<ur&&(Ae.J=ca(xe,Ae,Yt,ur-Yt),Ae.F=xe.mb,Ae.F==null&&Ae.F.length==0)){Ge=Ar(xe,3,"Could not decode alpha data.");break e}Yt<Ae.j&&(rr=Ae.j-Yt,Yt=Ae.j,e(!(1&rr)),Ae.O+=xe.R*rr,Ae.N+=xe.B*(rr>>1),Ae.W+=xe.B*(rr>>1),Ae.F!=null&&(Ae.J+=Ae.width*rr)),Yt<ur&&(Ae.O+=Ae.v,Ae.N+=Ae.v>>1,Ae.W+=Ae.v>>1,Ae.F!=null&&(Ae.J+=Ae.v),Ae.ka=Yt-Ae.j,Ae.U=Ae.va-Ae.v,Ae.T=ur-Yt,Ge=Ae.put(Ae))}ze+1!=xe.Ic||ir||(r(xe.sa,xe.ta-Ze,mt,Tt+16*xe.R,Ze),r(xe.qa,xe.ra-Nt,yt,Ye+8*xe.B,Nt),r(xe.Ha,xe.Ia-Nt,ar,cr+8*xe.B,Nt))}if(!Ge)return Ar(Le,6,"Output aborted.")}return 1}(o,h)),h.bc!=null&&h.bc(h),g&=1}return g?(o.cb=0,g):0}function an(o,h,g,S,M){M=o[h+g+32*S]+(M>>3),o[h+g+32*S]=-256&M?0>M?0:255:M}function Fi(o,h,g,S,M,U){an(o,h,0,g,S+M),an(o,h,1,g,S+U),an(o,h,2,g,S-U),an(o,h,3,g,S-M)}function sn(o){return(20091*o>>16)+o}function Ei(o,h,g,S){var M,U=0,H=i(16);for(M=0;4>M;++M){var W=o[h+0]+o[h+8],$=o[h+0]-o[h+8],re=(35468*o[h+4]>>16)-sn(o[h+12]),be=sn(o[h+4])+(35468*o[h+12]>>16);H[U+0]=W+be,H[U+1]=$+re,H[U+2]=$-re,H[U+3]=W-be,U+=4,h++}for(M=U=0;4>M;++M)W=(o=H[U+0]+4)+H[U+8],$=o-H[U+8],re=(35468*H[U+4]>>16)-sn(H[U+12]),an(g,S,0,0,W+(be=sn(H[U+4])+(35468*H[U+12]>>16))),an(g,S,1,0,$+re),an(g,S,2,0,$-re),an(g,S,3,0,W-be),U++,S+=32}function rs(o,h,g,S){var M=o[h+0]+4,U=35468*o[h+4]>>16,H=sn(o[h+4]),W=35468*o[h+1]>>16;Fi(g,S,0,M+H,o=sn(o[h+1]),W),Fi(g,S,1,M+U,o,W),Fi(g,S,2,M-U,o,W),Fi(g,S,3,M-H,o,W)}function Sa(o,h,g,S,M){Ei(o,h,g,S),M&&Ei(o,h+16,g,S+4)}function ns(o,h,g,S){_e(o,h+0,g,S,1),_e(o,h+32,g,S+128,1)}function Xi(o,h,g,S){var M;for(o=o[h+0]+4,M=0;4>M;++M)for(h=0;4>h;++h)an(g,S,h,M,o)}function is(o,h,g,S){o[h+0]&&me(o,h+0,g,S),o[h+16]&&me(o,h+16,g,S+4),o[h+32]&&me(o,h+32,g,S+128),o[h+48]&&me(o,h+48,g,S+128+4)}function Qs(o,h,g,S){var M,U=i(16);for(M=0;4>M;++M){var H=o[h+0+M]+o[h+12+M],W=o[h+4+M]+o[h+8+M],$=o[h+4+M]-o[h+8+M],re=o[h+0+M]-o[h+12+M];U[0+M]=H+W,U[8+M]=H-W,U[4+M]=re+$,U[12+M]=re-$}for(M=0;4>M;++M)H=(o=U[0+4*M]+3)+U[3+4*M],W=U[1+4*M]+U[2+4*M],$=U[1+4*M]-U[2+4*M],re=o-U[3+4*M],g[S+0]=H+W>>3,g[S+16]=re+$>>3,g[S+32]=H-W>>3,g[S+48]=re-$>>3,S+=64}function Zt(o,h,g){var S,M=h-32,U=fn,H=255-o[M-1];for(S=0;S<g;++S){var W,$=U,re=H+o[h-1];for(W=0;W<g;++W)o[h+W]=$[re+o[M+W]];h+=32}}function as(o,h){Zt(o,h,4)}function Js(o,h){Zt(o,h,8)}function Xs(o,h){Zt(o,h,16)}function Pr(o,h){var g;for(g=0;16>g;++g)r(o,h+32*g,o,h-32,16)}function Hn(o,h){var g;for(g=16;0<g;--g)a(o,h,o[h-1],16),h+=32}function ui(o,h,g){var S;for(S=0;16>S;++S)a(h,g+32*S,o,16)}function Wn(o,h){var g,S=16;for(g=0;16>g;++g)S+=o[h-1+32*g]+o[h+g-32];ui(S>>5,o,h)}function Qr(o,h){var g,S=8;for(g=0;16>g;++g)S+=o[h-1+32*g];ui(S>>4,o,h)}function Ls(o,h){var g,S=8;for(g=0;16>g;++g)S+=o[h+g-32];ui(S>>4,o,h)}function Lr(o,h){ui(128,o,h)}function Et(o,h,g){return o+2*h+g+2>>2}function Zi(o,h){var g,S=h-32;for(S=new Uint8Array([Et(o[S-1],o[S+0],o[S+1]),Et(o[S+0],o[S+1],o[S+2]),Et(o[S+1],o[S+2],o[S+3]),Et(o[S+2],o[S+3],o[S+4])]),g=0;4>g;++g)r(o,h+32*g,S,0,S.length)}function ea(o,h){var g=o[h-1],S=o[h-1+32],M=o[h-1+64],U=o[h-1+96];Je(o,h+0,16843009*Et(o[h-1-32],g,S)),Je(o,h+32,16843009*Et(g,S,M)),Je(o,h+64,16843009*Et(S,M,U)),Je(o,h+96,16843009*Et(M,U,U))}function In(o,h){var g,S=4;for(g=0;4>g;++g)S+=o[h+g-32]+o[h-1+32*g];for(S>>=3,g=0;4>g;++g)a(o,h+32*g,S,4)}function Kn(o,h){var g=o[h-1+0],S=o[h-1+32],M=o[h-1+64],U=o[h-1-32],H=o[h+0-32],W=o[h+1-32],$=o[h+2-32],re=o[h+3-32];o[h+0+96]=Et(S,M,o[h-1+96]),o[h+1+96]=o[h+0+64]=Et(g,S,M),o[h+2+96]=o[h+1+64]=o[h+0+32]=Et(U,g,S),o[h+3+96]=o[h+2+64]=o[h+1+32]=o[h+0+0]=Et(H,U,g),o[h+3+64]=o[h+2+32]=o[h+1+0]=Et(W,H,U),o[h+3+32]=o[h+2+0]=Et($,W,H),o[h+3+0]=Et(re,$,W)}function Cs(o,h){var g=o[h+1-32],S=o[h+2-32],M=o[h+3-32],U=o[h+4-32],H=o[h+5-32],W=o[h+6-32],$=o[h+7-32];o[h+0+0]=Et(o[h+0-32],g,S),o[h+1+0]=o[h+0+32]=Et(g,S,M),o[h+2+0]=o[h+1+32]=o[h+0+64]=Et(S,M,U),o[h+3+0]=o[h+2+32]=o[h+1+64]=o[h+0+96]=Et(M,U,H),o[h+3+32]=o[h+2+64]=o[h+1+96]=Et(U,H,W),o[h+3+64]=o[h+2+96]=Et(H,W,$),o[h+3+96]=Et(W,$,$)}function dn(o,h){var g=o[h-1+0],S=o[h-1+32],M=o[h-1+64],U=o[h-1-32],H=o[h+0-32],W=o[h+1-32],$=o[h+2-32],re=o[h+3-32];o[h+0+0]=o[h+1+64]=U+H+1>>1,o[h+1+0]=o[h+2+64]=H+W+1>>1,o[h+2+0]=o[h+3+64]=W+$+1>>1,o[h+3+0]=$+re+1>>1,o[h+0+96]=Et(M,S,g),o[h+0+64]=Et(S,g,U),o[h+0+32]=o[h+1+96]=Et(g,U,H),o[h+1+32]=o[h+2+96]=Et(U,H,W),o[h+2+32]=o[h+3+96]=Et(H,W,$),o[h+3+32]=Et(W,$,re)}function ta(o,h){var g=o[h+0-32],S=o[h+1-32],M=o[h+2-32],U=o[h+3-32],H=o[h+4-32],W=o[h+5-32],$=o[h+6-32],re=o[h+7-32];o[h+0+0]=g+S+1>>1,o[h+1+0]=o[h+0+64]=S+M+1>>1,o[h+2+0]=o[h+1+64]=M+U+1>>1,o[h+3+0]=o[h+2+64]=U+H+1>>1,o[h+0+32]=Et(g,S,M),o[h+1+32]=o[h+0+96]=Et(S,M,U),o[h+2+32]=o[h+1+96]=Et(M,U,H),o[h+3+32]=o[h+2+96]=Et(U,H,W),o[h+3+64]=Et(H,W,$),o[h+3+96]=Et(W,$,re)}function ks(o,h){var g=o[h-1+0],S=o[h-1+32],M=o[h-1+64],U=o[h-1+96];o[h+0+0]=g+S+1>>1,o[h+2+0]=o[h+0+32]=S+M+1>>1,o[h+2+32]=o[h+0+64]=M+U+1>>1,o[h+1+0]=Et(g,S,M),o[h+3+0]=o[h+1+32]=Et(S,M,U),o[h+3+32]=o[h+1+64]=Et(M,U,U),o[h+3+64]=o[h+2+64]=o[h+0+96]=o[h+1+96]=o[h+2+96]=o[h+3+96]=U}function ss(o,h){var g=o[h-1+0],S=o[h-1+32],M=o[h-1+64],U=o[h-1+96],H=o[h-1-32],W=o[h+0-32],$=o[h+1-32],re=o[h+2-32];o[h+0+0]=o[h+2+32]=g+H+1>>1,o[h+0+32]=o[h+2+64]=S+g+1>>1,o[h+0+64]=o[h+2+96]=M+S+1>>1,o[h+0+96]=U+M+1>>1,o[h+3+0]=Et(W,$,re),o[h+2+0]=Et(H,W,$),o[h+1+0]=o[h+3+32]=Et(g,H,W),o[h+1+32]=o[h+3+64]=Et(S,g,H),o[h+1+64]=o[h+3+96]=Et(M,S,g),o[h+1+96]=Et(U,M,S)}function ra(o,h){var g;for(g=0;8>g;++g)r(o,h+32*g,o,h-32,8)}function na(o,h){var g;for(g=0;8>g;++g)a(o,h,o[h-1],8),h+=32}function Di(o,h,g){var S;for(S=0;8>S;++S)a(h,g+32*S,o,8)}function Ii(o,h){var g,S=8;for(g=0;8>g;++g)S+=o[h+g-32]+o[h-1+32*g];Di(S>>4,o,h)}function ia(o,h){var g,S=4;for(g=0;8>g;++g)S+=o[h+g-32];Di(S>>3,o,h)}function aa(o,h){var g,S=4;for(g=0;8>g;++g)S+=o[h-1+32*g];Di(S>>3,o,h)}function os(o,h){Di(128,o,h)}function di(o,h,g){var S=o[h-g],M=o[h+0],U=3*(M-S)+Zr[1020+o[h-2*g]-o[h+g]],H=ri[112+(U+4>>3)];o[h-g]=fn[255+S+ri[112+(U+3>>3)]],o[h+0]=fn[255+M-H]}function sa(o,h,g,S){var M=o[h+0],U=o[h+g];return ni[255+o[h-2*g]-o[h-g]]>S||ni[255+U-M]>S}function ja(o,h,g,S){return 4*ni[255+o[h-g]-o[h+0]]+ni[255+o[h-2*g]-o[h+g]]<=S}function Fs(o,h,g,S,M){var U=o[h-3*g],H=o[h-2*g],W=o[h-g],$=o[h+0],re=o[h+g],be=o[h+2*g],De=o[h+3*g];return 4*ni[255+W-$]+ni[255+H-re]>S?0:ni[255+o[h-4*g]-U]<=M&&ni[255+U-H]<=M&&ni[255+H-W]<=M&&ni[255+De-be]<=M&&ni[255+be-re]<=M&&ni[255+re-$]<=M}function Es(o,h,g,S){var M=2*S+1;for(S=0;16>S;++S)ja(o,h+S,g,M)&&di(o,h+S,g)}function ei(o,h,g,S){var M=2*S+1;for(S=0;16>S;++S)ja(o,h+S*g,1,M)&&di(o,h+S*g,1)}function Vn(o,h,g,S){var M;for(M=3;0<M;--M)Es(o,h+=4*g,g,S)}function ls(o,h,g,S){var M;for(M=3;0<M;--M)ei(o,h+=4,g,S)}function hi(o,h,g,S,M,U,H,W){for(U=2*U+1;0<M--;){if(Fs(o,h,g,U,H))if(sa(o,h,g,W))di(o,h,g);else{var $=o,re=h,be=g,De=$[re-2*be],Ie=$[re-be],Le=$[re+0],Qe=$[re+be],ze=$[re+2*be],xe=27*(Ge=Zr[1020+3*(Le-Ie)+Zr[1020+De-Qe]])+63>>7,Ae=18*Ge+63>>7,Ge=9*Ge+63>>7;$[re-3*be]=fn[255+$[re-3*be]+Ge],$[re-2*be]=fn[255+De+Ae],$[re-be]=fn[255+Ie+xe],$[re+0]=fn[255+Le-xe],$[re+be]=fn[255+Qe-Ae],$[re+2*be]=fn[255+ze-Ge]}h+=S}}function yn(o,h,g,S,M,U,H,W){for(U=2*U+1;0<M--;){if(Fs(o,h,g,U,H))if(sa(o,h,g,W))di(o,h,g);else{var $=o,re=h,be=g,De=$[re-be],Ie=$[re+0],Le=$[re+be],Qe=ri[112+((ze=3*(Ie-De))+4>>3)],ze=ri[112+(ze+3>>3)],xe=Qe+1>>1;$[re-2*be]=fn[255+$[re-2*be]+xe],$[re-be]=fn[255+De+ze],$[re+0]=fn[255+Ie-Qe],$[re+be]=fn[255+Le-xe]}h+=S}}function Oi(o,h,g,S,M,U){hi(o,h,g,1,16,S,M,U)}function ti(o,h,g,S,M,U){hi(o,h,1,g,16,S,M,U)}function Ds(o,h,g,S,M,U){var H;for(H=3;0<H;--H)yn(o,h+=4*g,g,1,16,S,M,U)}function Aa(o,h,g,S,M,U){var H;for(H=3;0<H;--H)yn(o,h+=4,1,g,16,S,M,U)}function _a(o,h,g,S,M,U,H,W){hi(o,h,M,1,8,U,H,W),hi(g,S,M,1,8,U,H,W)}function oa(o,h,g,S,M,U,H,W){hi(o,h,1,M,8,U,H,W),hi(g,S,1,M,8,U,H,W)}function la(o,h,g,S,M,U,H,W){yn(o,h+4*M,M,1,8,U,H,W),yn(g,S+4*M,M,1,8,U,H,W)}function Pa(o,h,g,S,M,U,H,W){yn(o,h+4,1,M,8,U,H,W),yn(g,S+4,1,M,8,U,H,W)}function Ti(){this.ba=new un,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function kr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Mi(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new N}function Is(){this.xb=this.a=0,this.l=new Qi,this.ca=new un,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Mi,this.ab=0,this.gc=c(4,fi),this.Oc=0}function pi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ri(o,h,g,S,M,U,H){for(o=o==null?0:o[h+0],h=0;h<H;++h)M[U+h]=o+g[S+h]&255,o=M[U+h]}function La(o,h,g,S,M,U,H){var W;if(o==null)Ri(null,null,g,S,M,U,H);else for(W=0;W<H;++W)M[U+W]=o[h+W]+g[S+W]&255}function $n(o,h,g,S,M,U,H){if(o==null)Ri(null,null,g,S,M,U,H);else{var W,$=o[h+0],re=$,be=$;for(W=0;W<H;++W)re=be+($=o[h+W])-re,be=g[S+W]+(-256&re?0>re?0:255:re)&255,re=$,M[U+W]=be}}function ca(o,h,g,S){var M=h.width,U=h.o;if(e(o!=null&&h!=null),0>g||0>=S||g+S>U)return null;if(!o.Cc){if(o.ga==null){var H;if(o.ga=new pi,(H=o.ga==null)||(H=h.width*h.o,e(o.Gb.length==0),o.Gb=i(H),o.Uc=0,o.Gb==null?H=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,H=1),H=!H),!H){H=o.ga;var W=o.Fa,$=o.P,re=o.qc,be=o.mb,De=o.nb,Ie=$+1,Le=re-1,Qe=H.l;if(e(W!=null&&be!=null&&h!=null),Da[0]=null,Da[1]=Ri,Da[2]=La,Da[3]=$n,H.ca=be,H.tb=De,H.c=h.width,H.i=h.height,e(0<H.c&&0<H.i),1>=re)h=0;else if(H.$a=W[$+0]>>0&3,H.Z=W[$+0]>>2&3,H.Lc=W[$+0]>>4&3,$=W[$+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||$)h=0;else if(Qe.put=gt,Qe.ac=Ee,Qe.bc=Dt,Qe.ma=H,Qe.width=h.width,Qe.height=h.height,Qe.Da=h.Da,Qe.v=h.v,Qe.va=h.va,Qe.j=h.j,Qe.o=h.o,H.$a)e:{e(H.$a==1),h=En();t:for(;;){if(h==null){h=0;break e}if(e(H!=null),H.mc=h,h.c=H.c,h.i=H.i,h.l=H.l,h.l.ma=H,h.l.width=H.c,h.l.height=H.i,h.a=0,ne(h.m,W,Ie,Le),!Yr(H.c,H.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&oi(h.s)?(H.ic=1,W=h.c*h.i,h.Ta=null,h.Ua=0,h.V=i(W),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(H.ic=0,h=Ci(h,H.c)),!h))break t;h=1;break e}H.mc=null,h=0}else h=Le>=H.c*H.i;H=!h}if(H)return null;o.ga.Lc!=1?o.Ga=0:S=U-g}e(o.ga!=null),e(g+S<=U);e:{if(h=(W=o.ga).c,U=W.l.o,W.$a==0){if(Ie=o.rc,Le=o.Vc,Qe=o.Fa,$=o.P+1+g*h,re=o.mb,be=o.nb+g*h,e($<=o.P+o.qc),W.Z!=0)for(e(Da[W.Z]!=null),H=0;H<S;++H)Da[W.Z](Ie,Le,Qe,$,re,be,h),Ie=re,Le=be,be+=h,$+=h;else for(H=0;H<S;++H)r(re,be,Qe,$,h),Ie=re,Le=be,be+=h,$+=h;o.rc=Ie,o.Vc=Le}else{if(e(W.mc!=null),h=g+S,e((H=W.mc)!=null),e(h<=H.i),H.C>=h)h=1;else if(W.ic||Fe(),W.ic){W=H.V,Ie=H.Ba,Le=H.c;var ze=H.i,xe=(Qe=1,$=H.$/Le,re=H.$%Le,be=H.m,De=H.s,H.$),Ae=Le*ze,Ge=Le*h,Ze=De.wc,Ye=xe<Ge?hr(De,re,$):null;e(xe<=Ae),e(h<=ze),e(oi(De));t:for(;;){for(;!be.h&&xe<Ge;){if(re&Ze||(Ye=hr(De,re,$)),e(Ye!=null),ae(be),256>(ze=Bt(Ye.G[0],Ye.H[0],be)))W[Ie+xe]=ze,++xe,++re>=Le&&(re=0,++$<=h&&!($%16)&&nn(H,$));else{if(!(280>ze)){Qe=0;break t}ze=sr(ze-256,be);var Nt,mt=Bt(Ye.G[4],Ye.H[4],be);if(ae(be),!(xe>=(mt=Ht(Le,mt=sr(mt,be)))&&Ae-xe>=ze)){Qe=0;break t}for(Nt=0;Nt<ze;++Nt)W[Ie+xe+Nt]=W[Ie+xe+Nt-mt];for(xe+=ze,re+=ze;re>=Le;)re-=Le,++$<=h&&!($%16)&&nn(H,$);xe<Ge&&re&Ze&&(Ye=hr(De,re,$))}e(be.h==G(be))}nn(H,$>h?h:$);break t}!Qe||be.h&&xe<Ae?(Qe=0,H.a=be.h?5:3):H.$=xe,h=Qe}else h=Kr(H,H.V,H.Ba,H.c,H.i,h,Dn);if(!h){S=0;break e}}g+S>=U&&(o.Cc=1),S=1}if(!S)return null;if(o.Cc&&((S=o.ga)!=null&&(S.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+g*M}function p(o,h,g,S,M,U){for(;0<M--;){var H,W=o,$=h+(g?1:0),re=o,be=h+(g?0:3);for(H=0;H<S;++H){var De=re[be+4*H];De!=255&&(De*=32897,W[$+4*H+0]=W[$+4*H+0]*De>>23,W[$+4*H+1]=W[$+4*H+1]*De>>23,W[$+4*H+2]=W[$+4*H+2]*De>>23)}h+=U}}function T(o,h,g,S,M){for(;0<S--;){var U;for(U=0;U<g;++U){var H=o[h+2*U+0],W=15&(re=o[h+2*U+1]),$=4369*W,re=(240&re|re>>4)*$>>16;o[h+2*U+0]=(240&H|H>>4)*$>>16&240|(15&H|H<<4)*$>>16>>4&15,o[h+2*U+1]=240&re|W}h+=M}}function se(o,h,g,S,M,U,H,W){var $,re,be=255;for(re=0;re<M;++re){for($=0;$<S;++$){var De=o[h+$];U[H+4*$]=De,be&=De}h+=g,H+=W}return be!=255}function pe(o,h,g,S,M){var U;for(U=0;U<M;++U)g[S+U]=o[h+U]>>8}function Fe(){pt=p,St=T,At=se,kt=pe}function We(o,h,g){O[o]=function(S,M,U,H,W,$,re,be,De,Ie,Le,Qe,ze,xe,Ae,Ge,Ze){var Ye,Nt=Ze-1>>1,mt=W[$+0]|re[be+0]<<16,Tt=De[Ie+0]|Le[Qe+0]<<16;e(S!=null);var yt=3*mt+Tt+131074>>2;for(h(S[M+0],255&yt,yt>>16,ze,xe),U!=null&&(yt=3*Tt+mt+131074>>2,h(U[H+0],255&yt,yt>>16,Ae,Ge)),Ye=1;Ye<=Nt;++Ye){var ar=W[$+Ye]|re[be+Ye]<<16,cr=De[Ie+Ye]|Le[Qe+Ye]<<16,ir=mt+ar+Tt+cr+524296,rr=ir+2*(ar+Tt)>>3;yt=rr+mt>>1,mt=(ir=ir+2*(mt+cr)>>3)+ar>>1,h(S[M+2*Ye-1],255&yt,yt>>16,ze,xe+(2*Ye-1)*g),h(S[M+2*Ye-0],255&mt,mt>>16,ze,xe+(2*Ye-0)*g),U!=null&&(yt=ir+Tt>>1,mt=rr+cr>>1,h(U[H+2*Ye-1],255&yt,yt>>16,Ae,Ge+(2*Ye-1)*g),h(U[H+2*Ye+0],255&mt,mt>>16,Ae,Ge+(2*Ye+0)*g)),mt=ar,Tt=cr}1&Ze||(yt=3*mt+Tt+131074>>2,h(S[M+Ze-1],255&yt,yt>>16,ze,xe+(Ze-1)*g),U!=null&&(yt=3*Tt+mt+131074>>2,h(U[H+Ze-1],255&yt,yt>>16,Ae,Ge+(Ze-1)*g)))}}function tt(){ii[Lo]=xh,ii[Co]=Bc,ii[Oc]=wh,ii[ko]=Uc,ii[Fo]=zc,ii[Sl]=Hc,ii[Tc]=Nh,ii[jl]=Bc,ii[Al]=Uc,ii[Eo]=zc,ii[_l]=Hc}function vt(o){return o&~Sh?0>o?0:255:o>>Wc}function Ct(o,h){return vt((19077*o>>8)+(26149*h>>8)-14234)}function Kt(o,h,g){return vt((19077*o>>8)-(6419*h>>8)-(13320*g>>8)+8708)}function zt(o,h){return vt((19077*o>>8)+(33050*h>>8)-17685)}function er(o,h,g,S,M){S[M+0]=Ct(o,g),S[M+1]=Kt(o,h,g),S[M+2]=zt(o,h)}function xr(o,h,g,S,M){S[M+0]=zt(o,h),S[M+1]=Kt(o,h,g),S[M+2]=Ct(o,g)}function wr(o,h,g,S,M){var U=Kt(o,h,g);h=U<<3&224|zt(o,h)>>3,S[M+0]=248&Ct(o,g)|U>>5,S[M+1]=h}function Fr(o,h,g,S,M){var U=240&zt(o,h)|15;S[M+0]=240&Ct(o,g)|Kt(o,h,g)>>4,S[M+1]=U}function Jr(o,h,g,S,M){S[M+0]=255,er(o,h,g,S,M+1)}function Tr(o,h,g,S,M){xr(o,h,g,S,M),S[M+3]=255}function Gn(o,h,g,S,M){er(o,h,g,S,M),S[M+3]=255}function vn(o,h){return 0>o?0:o>h?h:o}function On(o,h,g){O[o]=function(S,M,U,H,W,$,re,be,De){for(var Ie=be+(-2&De)*g;be!=Ie;)h(S[M+0],U[H+0],W[$+0],re,be),h(S[M+1],U[H+0],W[$+0],re,be+g),M+=2,++H,++$,be+=2*g;1&De&&h(S[M+0],U[H+0],W[$+0],re,be)}}function cs(o,h,g){return g==0?o==0?h==0?6:5:h==0?4:0:g}function Ca(o,h,g,S,M){switch(o>>>30){case 3:_e(h,g,S,M,0);break;case 2:ue(h,g,S,M);break;case 1:me(h,g,S,M)}}function us(o,h){var g,S,M=h.M,U=h.Nb,H=o.oc,W=o.pc+40,$=o.oc,re=o.pc+584,be=o.oc,De=o.pc+600;for(g=0;16>g;++g)H[W+32*g-1]=129;for(g=0;8>g;++g)$[re+32*g-1]=129,be[De+32*g-1]=129;for(0<M?H[W-1-32]=$[re-1-32]=be[De-1-32]=129:(a(H,W-32-1,127,21),a($,re-32-1,127,9),a(be,De-32-1,127,9)),S=0;S<o.za;++S){var Ie=h.ya[h.aa+S];if(0<S){for(g=-1;16>g;++g)r(H,W+32*g-4,H,W+32*g+12,4);for(g=-1;8>g;++g)r($,re+32*g-4,$,re+32*g+4,4),r(be,De+32*g-4,be,De+32*g+4,4)}var Le=o.Gd,Qe=o.Hd+S,ze=Ie.ad,xe=Ie.Hc;if(0<M&&(r(H,W-32,Le[Qe].y,0,16),r($,re-32,Le[Qe].f,0,8),r(be,De-32,Le[Qe].ea,0,8)),Ie.Za){var Ae=H,Ge=W-32+16;for(0<M&&(S>=o.za-1?a(Ae,Ge,Le[Qe].y[15],4):r(Ae,Ge,Le[Qe+1].y,0,4)),g=0;4>g;g++)Ae[Ge+128+g]=Ae[Ge+256+g]=Ae[Ge+384+g]=Ae[Ge+0+g];for(g=0;16>g;++g,xe<<=2)Ae=H,Ge=W+Vc[g],vi[Ie.Ob[g]](Ae,Ge),Ca(xe,ze,16*+g,Ae,Ge)}else if(Ae=cs(S,M,Ie.Ob[0]),Ea[Ae](H,W),xe!=0)for(g=0;16>g;++g,xe<<=2)Ca(xe,ze,16*+g,H,W+Vc[g]);for(g=Ie.Gc,Ae=cs(S,M,Ie.Dd),pa[Ae]($,re),pa[Ae](be,De),xe=ze,Ae=$,Ge=re,255&(Ie=g>>0)&&(170&Ie?ke(xe,256,Ae,Ge):Se(xe,256,Ae,Ge)),Ie=be,xe=De,255&(g>>=8)&&(170&g?ke(ze,320,Ie,xe):Se(ze,320,Ie,xe)),M<o.Ub-1&&(r(Le[Qe].y,0,H,W+480,16),r(Le[Qe].f,0,$,re+224,8),r(Le[Qe].ea,0,be,De+224,8)),g=8*U*o.B,Le=o.sa,Qe=o.ta+16*S+16*U*o.R,ze=o.qa,Ie=o.ra+8*S+g,xe=o.Ha,Ae=o.Ia+8*S+g,g=0;16>g;++g)r(Le,Qe+g*o.R,H,W+32*g,16);for(g=0;8>g;++g)r(ze,Ie+g*o.B,$,re+32*g,8),r(xe,Ae+g*o.B,be,De+32*g,8)}}function ka(o,h,g,S,M,U,H,W,$){var re=[0],be=[0],De=0,Ie=$!=null?$.kd:0,Le=$??new kr;if(o==null||12>g)return 7;Le.data=o,Le.w=h,Le.ha=g,h=[h],g=[g],Le.gb=[Le.gb];e:{var Qe=h,ze=g,xe=Le.gb;if(e(o!=null),e(ze!=null),e(xe!=null),xe[0]=0,12<=ze[0]&&!t(o,Qe[0],"RIFF")){if(t(o,Qe[0]+8,"WEBP")){xe=3;break e}var Ae=lt(o,Qe[0]+4);if(12>Ae||4294967286<Ae){xe=3;break e}if(Ie&&Ae>ze[0]-8){xe=7;break e}xe[0]=Ae,Qe[0]+=12,ze[0]-=12}xe=0}if(xe!=0)return xe;for(Ae=0<Le.gb[0],g=g[0];;){e:{var Ge=o;ze=h,xe=g;var Ze=re,Ye=be,Nt=Qe=[0];if((yt=De=[De])[0]=0,8>xe[0])xe=7;else{if(!t(Ge,ze[0],"VP8X")){if(lt(Ge,ze[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var mt=lt(Ge,ze[0]+8),Tt=1+Ve(Ge,ze[0]+12);if(2147483648<=Tt*(Ge=1+Ve(Ge,ze[0]+15))){xe=3;break e}Nt!=null&&(Nt[0]=mt),Ze!=null&&(Ze[0]=Tt),Ye!=null&&(Ye[0]=Ge),ze[0]+=18,xe[0]-=18,yt[0]=1}xe=0}}if(De=De[0],Qe=Qe[0],xe!=0)return xe;if(ze=!!(2&Qe),!Ae&&De)return 3;if(U!=null&&(U[0]=!!(16&Qe)),H!=null&&(H[0]=ze),W!=null&&(W[0]=0),H=re[0],Qe=be[0],De&&ze&&$==null){xe=0;break}if(4>g){xe=7;break}if(Ae&&De||!Ae&&!De&&!t(o,h[0],"ALPH")){g=[g],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{mt=o,xe=h,Ae=g;var yt=Le.gb;Ze=Le.na,Ye=Le.P,Nt=Le.Sa,Tt=22,e(mt!=null),e(Ae!=null),Ge=xe[0];var ar=Ae[0];for(e(Ze!=null),e(Nt!=null),Ze[0]=null,Ye[0]=null,Nt[0]=0;;){if(xe[0]=Ge,Ae[0]=ar,8>ar){xe=7;break e}var cr=lt(mt,Ge+4);if(4294967286<cr){xe=3;break e}var ir=8+cr+1&-2;if(Tt+=ir,0<yt&&Tt>yt){xe=3;break e}if(!t(mt,Ge,"VP8 ")||!t(mt,Ge,"VP8L")){xe=0;break e}if(ar[0]<ir){xe=7;break e}t(mt,Ge,"ALPH")||(Ze[0]=mt,Ye[0]=Ge+8,Nt[0]=cr),Ge+=ir,ar-=ir}}if(g=g[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],xe!=0)break}g=[g],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(yt=o,xe=h,Ae=g,Ze=Le.gb[0],Ye=Le.Ja,Nt=Le.xa,mt=xe[0],Ge=!t(yt,mt,"VP8 "),Tt=!t(yt,mt,"VP8L"),e(yt!=null),e(Ae!=null),e(Ye!=null),e(Nt!=null),8>Ae[0])xe=7;else{if(Ge||Tt){if(yt=lt(yt,mt+4),12<=Ze&&yt>Ze-12){xe=3;break e}if(Ie&&yt>Ae[0]-8){xe=7;break e}Ye[0]=yt,xe[0]+=8,Ae[0]-=8,Nt[0]=Tt}else Nt[0]=5<=Ae[0]&&yt[mt+0]==47&&!(yt[mt+4]>>5),Ye[0]=Ae[0];xe=0}if(g=g[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],h=h[0],xe!=0)break;if(4294967286<Le.Ja)return 3;if(W==null||ze||(W[0]=Le.xa?2:1),H=[H],Qe=[Qe],Le.xa){if(5>g){xe=7;break}W=H,Ie=Qe,ze=U,o==null||5>g?o=0:5<=g&&o[h+0]==47&&!(o[h+4]>>5)?(Ae=[0],yt=[0],Ze=[0],ne(Ye=new I,o,h,g),xt(Ye,Ae,yt,Ze)?(W!=null&&(W[0]=Ae[0]),Ie!=null&&(Ie[0]=yt[0]),ze!=null&&(ze[0]=Ze[0]),o=1):o=0):o=0}else{if(10>g){xe=7;break}W=Qe,o==null||10>g||!es(o,h+3,g-3)?o=0:(Ie=o[h+0]|o[h+1]<<8|o[h+2]<<16,ze=16383&(o[h+7]<<8|o[h+6]),o=16383&(o[h+9]<<8|o[h+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=Le.Ja||!ze||!o?o=0:(H&&(H[0]=ze),W&&(W[0]=o),o=1))}if(!o||(H=H[0],Qe=Qe[0],De&&(re[0]!=H||be[0]!=Qe)))return 3;$!=null&&($[0]=Le,$.offset=h-$.w,e(4294967286>h-$.w),e($.offset==$.ha-g));break}return xe==0||xe==7&&De&&$==null?(U!=null&&(U[0]|=Le.na!=null&&0<Le.na.length),S!=null&&(S[0]=H),M!=null&&(M[0]=Qe),0):xe}function ds(o,h,g){var S=h.width,M=h.height,U=0,H=0,W=S,$=M;if(h.Da=o!=null&&0<o.Da,h.Da&&(W=o.cd,$=o.bd,U=o.v,H=o.j,11>g||(U&=-2,H&=-2),0>U||0>H||0>=W||0>=$||U+W>S||H+$>M))return 0;if(h.v=U,h.j=H,h.va=U+W,h.o=H+$,h.U=W,h.T=$,h.da=o!=null&&0<o.da,h.da){if(!Mt(W,$,g=[o.ib],U=[o.hb]))return 0;h.ib=g[0],h.hb=U[0]}return h.ob=o!=null&&o.ob,h.Kb=o==null||!o.Sd,h.da&&(h.ob=h.ib<3*S/4&&h.hb<3*M/4,h.Kb=0),1}function qi(o){if(o==null)return 2;if(11>o.S){var h=o.f.RGBA;h.fb+=(o.height-1)*h.A,h.A=-h.A}else h=o.f.kb,o=o.height,h.O+=(o-1)*h.fa,h.fa=-h.fa,h.N+=(o-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(o-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(o-1)*h.lb,h.lb=-h.lb);return 0}function bn(o,h,g,S){if(S==null||0>=o||0>=h)return 2;if(g!=null){if(g.Da){var M=g.cd,U=g.bd,H=-2&g.v,W=-2&g.j;if(0>H||0>W||0>=M||0>=U||H+M>o||W+U>h)return 2;o=M,h=U}if(g.da){if(!Mt(o,h,M=[g.ib],U=[g.hb]))return 2;o=M[0],h=U[0]}}S.width=o,S.height=h;e:{var $=S.width,re=S.height;if(o=S.S,0>=$||0>=re||!(o>=Lo&&13>o))o=2;else{if(0>=S.Rd&&S.sd==null){H=U=M=h=0;var be=(W=$*$c[o])*re;if(11>o||(U=(re+1)/2*(h=($+1)/2),o==12&&(H=(M=$)*re)),(re=i(be+2*U+H))==null){o=1;break e}S.sd=re,11>o?(($=S.f.RGBA).eb=re,$.fb=0,$.A=W,$.size=be):(($=S.f.kb).y=re,$.O=0,$.fa=W,$.Fd=be,$.f=re,$.N=0+be,$.Ab=h,$.Cd=U,$.ea=re,$.W=0+be+U,$.Db=h,$.Ed=U,o==12&&($.F=re,$.J=0+be+2*U),$.Tc=H,$.lb=M)}if(h=1,M=S.S,U=S.width,H=S.height,M>=Lo&&13>M)if(11>M)o=S.f.RGBA,h&=(W=Math.abs(o.A))*(H-1)+U<=o.size,h&=W>=U*$c[M],h&=o.eb!=null;else{o=S.f.kb,W=(U+1)/2,be=(H+1)/2,$=Math.abs(o.fa),re=Math.abs(o.Ab);var De=Math.abs(o.Db),Ie=Math.abs(o.lb),Le=Ie*(H-1)+U;h&=$*(H-1)+U<=o.Fd,h&=re*(be-1)+W<=o.Cd,h=(h&=De*(be-1)+W<=o.Ed)&$>=U&re>=W&De>=W,h&=o.y!=null,h&=o.f!=null,h&=o.ea!=null,M==12&&(h&=Ie>=U,h&=Le<=o.Tc,h&=o.F!=null)}else h=0;o=h?0:2}}return o!=0||g!=null&&g.fd&&(o=qi(S)),o}var Xt=64,mi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xr=24,Fa=32,ua=8,hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];J("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(o){return o},O.Predictor2=function(o,h,g){return h[g+0]},O.Predictor3=function(o,h,g){return h[g+1]},O.Predictor4=function(o,h,g){return h[g-1]},O.Predictor5=function(o,h,g){return we(we(o,h[g+1]),h[g+0])},O.Predictor6=function(o,h,g){return we(o,h[g-1])},O.Predictor7=function(o,h,g){return we(o,h[g+0])},O.Predictor8=function(o,h,g){return we(h[g-1],h[g+0])},O.Predictor9=function(o,h,g){return we(h[g+0],h[g+1])},O.Predictor10=function(o,h,g){return we(we(o,h[g-1]),we(h[g+0],h[g+1]))},O.Predictor11=function(o,h,g){var S=h[g+0];return 0>=Ue(S>>24&255,o>>24&255,(h=h[g-1])>>24&255)+Ue(S>>16&255,o>>16&255,h>>16&255)+Ue(S>>8&255,o>>8&255,h>>8&255)+Ue(255&S,255&o,255&h)?S:o},O.Predictor12=function(o,h,g){var S=h[g+0];return(Be((o>>24&255)+(S>>24&255)-((h=h[g-1])>>24&255))<<24|Be((o>>16&255)+(S>>16&255)-(h>>16&255))<<16|Be((o>>8&255)+(S>>8&255)-(h>>8&255))<<8|Be((255&o)+(255&S)-(255&h)))>>>0},O.Predictor13=function(o,h,g){var S=h[g-1];return($e((o=we(o,h[g+0]))>>24&255,S>>24&255)<<24|$e(o>>16&255,S>>16&255)<<16|$e(o>>8&255,S>>8&255)<<8|$e(o>>0&255,S>>0&255))>>>0};var gi=O.PredictorAdd0;O.PredictorAdd1=Xe,J("Predictor2","PredictorAdd2"),J("Predictor3","PredictorAdd3"),J("Predictor4","PredictorAdd4"),J("Predictor5","PredictorAdd5"),J("Predictor6","PredictorAdd6"),J("Predictor7","PredictorAdd7"),J("Predictor8","PredictorAdd8"),J("Predictor9","PredictorAdd9"),J("Predictor10","PredictorAdd10"),J("Predictor11","PredictorAdd11"),J("Predictor12","PredictorAdd12"),J("Predictor13","PredictorAdd13");var da=O.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var yi,Mr=O.ColorIndexInverseTransform,ha=O.MapARGB,l=O.VP8LColorIndexInverseTransformAlpha,f=O.MapAlpha,v=O.VP8LPredictorsAdd=[];v.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var A,F,z,ee,ce,ve,Ne,_e,ue,ke,me,Se,Ce,je,Te,Me,Re,Ke,nt,dt,it,st,ht,ot,pt,St,At,kt,nr=i(511),It=i(2041),Er=i(225),Cr=i(767),fa=0,Zr=It,ri=Er,fn=Cr,ni=nr,Lo=0,Co=1,Oc=2,ko=3,Fo=4,Sl=5,Tc=6,jl=7,Al=8,Eo=9,_l=10,sh=[2,3,7],oh=[3,3,11],Mc=[280,256,256,256,40],lh=[0,1,1,1,0],ch=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hh=8,Pl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ll=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Zs=null,fh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ph=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ea=[],vi=[],pa=[],bh=1,qc=2,Da=[],ii=[];We("UpsampleRgbLinePair",er,3),We("UpsampleBgrLinePair",xr,3),We("UpsampleRgbaLinePair",Gn,4),We("UpsampleBgraLinePair",Tr,4),We("UpsampleArgbLinePair",Jr,4),We("UpsampleRgba4444LinePair",Fr,2),We("UpsampleRgb565LinePair",wr,2);var xh=O.UpsampleRgbLinePair,wh=O.UpsampleBgrLinePair,Bc=O.UpsampleRgbaLinePair,Uc=O.UpsampleBgraLinePair,zc=O.UpsampleArgbLinePair,Hc=O.UpsampleRgba4444LinePair,Nh=O.UpsampleRgb565LinePair,Do=16,Io=1<<Do-1,eo=-227,Cl=482,Wc=6,Sh=(256<<Wc)-1,Kc=0,jh=i(256),Ah=i(256),_h=i(256),Ph=i(256),Lh=i(Cl-eo),Ch=i(Cl-eo);On("YuvToRgbRow",er,3),On("YuvToBgrRow",xr,3),On("YuvToRgbaRow",Gn,4),On("YuvToBgraRow",Tr,4),On("YuvToArgbRow",Jr,4),On("YuvToRgba4444Row",Fr,2),On("YuvToRgb565Row",wr,2);var Vc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oo=[0,2,8],kh=[8,7,6,4,4,2,2,2,1,1,1,1],Fh=1;this.WebPDecodeRGBA=function(o,h,g,S,M){var U=Co,H=new Ti,W=new un;H.ba=W,W.S=U,W.width=[W.width],W.height=[W.height];var $=W.width,re=W.height,be=new rn;if(be==null||o==null)var De=2;else e(be!=null),De=ka(o,h,g,be.width,be.height,be.Pd,be.Qd,be.format,null);if(De!=0?$=0:($!=null&&($[0]=be.width[0]),re!=null&&(re[0]=be.height[0]),$=1),$){W.width=W.width[0],W.height=W.height[0],S!=null&&(S[0]=W.width),M!=null&&(M[0]=W.height);e:{if(S=new Qi,(M=new kr).data=o,M.w=h,M.ha=g,M.kd=1,h=[0],e(M!=null),((o=ka(M.data,M.w,M.ha,null,null,null,h,null,M))==0||o==7)&&h[0]&&(o=4),(h=o)==0){if(e(H!=null),S.data=M.data,S.w=M.w+M.offset,S.ha=M.ha-M.offset,S.put=gt,S.ac=Ee,S.bc=Dt,S.ma=H,M.xa){if((o=En())==null){H=1;break e}if(function(Ie,Le){var Qe=[0],ze=[0],xe=[0];t:for(;;){if(Ie==null)return 0;if(Le==null)return Ie.a=2,0;if(Ie.l=Le,Ie.a=0,ne(Ie.m,Le.data,Le.w,Le.ha),!xt(Ie.m,Qe,ze,xe)){Ie.a=3;break t}if(Ie.xb=qc,Le.width=Qe[0],Le.height=ze[0],!Yr(Qe[0],ze[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0}(o,S)){if(S=(h=bn(S.width,S.height,H.Oa,H.ba))==0){t:{S=o;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((g=S.l)!=null),e((M=g.ma)!=null),S.xb!=0){if(S.ca=M.ba,S.tb=M.tb,e(S.ca!=null),!ds(M.Oa,g,ko)){S.a=2;break r}if(!Ci(S,g.width)||g.da)break r;if((g.da||Vt(S.ca.S))&&Fe(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&Fe()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!Ft(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Kr(S,S.V,S.Ba,S.c,S.i,g.o,si))break r;M.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(h=o.a)}else h=o.a}else{if((o=new Jt)==null){H=1;break e}if(o.Fa=M.na,o.P=M.P,o.qc=M.Sa,ts(o,S)){if((h=bn(S.width,S.height,H.Oa,H.ba))==0){if(o.Aa=0,g=H.Oa,e((M=o)!=null),g!=null){if(0<($=0>($=g.Md)?0:100<$?255:255*$/100)){for(re=be=0;4>re;++re)12>(De=M.pb[re]).lc&&(De.ia=$*kh[0>De.lc?0:De.lc]>>3),be|=De.ia;be&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=g.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}Ji(o,S)||(h=o.a)}}else h=o.a}h==0&&H.Oa!=null&&H.Oa.fd&&(h=qi(H.ba))}H=h}U=H!=0?null:11>U?W.f.RGBA.eb:W.f.kb.y}else U=null;return U};var $c=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(O,X){for(var oe="",C=0;C<4;C++)oe+=String.fromCharCode(O[X++]);return oe}function x(O,X){return(O[X+0]<<0|O[X+1]<<8|O[X+2]<<16)>>>0}function b(O,X){return(O[X+0]<<0|O[X+1]<<8|O[X+2]<<16|O[X+3]<<24)>>>0}new d;var w=[0],m=[0],P=[],_=new d,E=n,L=function(O,X){var oe={},C=0,N=!1,q=0,V=0;if(oe.frames=[],!function(D,G,te,ae){for(var ye=0;ye<ae;ye++)if(D[G+ye]!=te.charCodeAt(ye))return!0;return!1}(O,X,"RIFF",4)){var he,Y;for(b(O,X+=4),X+=8;X<O.length;){var Q=y(O,X),ne=b(O,X+=4);X+=4;var ie=ne+(1&ne);switch(Q){case"VP8 ":case"VP8L":oe.frames[C]===void 0&&(oe.frames[C]={}),(I=oe.frames[C]).src_off=N?V:X-8,I.src_size=q+ne+8,C++,N&&(N=!1,q=0,V=0);break;case"VP8X":(I=oe.header={}).feature_flags=O[X];var ge=X+4;I.canvas_width=1+x(O,ge),ge+=3,I.canvas_height=1+x(O,ge),ge+=3;break;case"ALPH":N=!0,q=ie+8,V=X-8;break;case"ANIM":(I=oe.header).bgcolor=b(O,X),ge=X+4,I.loop_count=(he=O)[(Y=ge)+0]<<0|he[Y+1]<<8,ge+=2;break;case"ANMF":var Oe,I;(I=oe.frames[C]={}).offset_x=2*x(O,X),X+=3,I.offset_y=2*x(O,X),X+=3,I.width=1+x(O,X),X+=3,I.height=1+x(O,X),X+=3,I.duration=x(O,X),X+=3,Oe=O[X++],I.dispose=1&Oe,I.blend=Oe>>1&1}Q!="ANMF"&&(X+=ie)}return oe}}(E,0);L.response=E,L.rgbaoutput=!0,L.dataurl=!1;var j=L.header?L.header:null,k=L.frames?L.frames:null;if(j){j.loop_counter=j.loop_count,w=[j.canvas_height],m=[j.canvas_width];for(var B=0;B<k.length&&k[B].blend!=0;B++);}var K=k[0],Z=_.WebPDecodeRGBA(E,K.src_off,K.src_size,m,w);K.rgba=Z,K.imgwidth=m[0],K.imgheight=w[0];for(var R=0;R<m[0]*w[0]*4;R++)P[R]=Z[R];return this.width=m,this.height=w,this.data=P,this}(function(n){var e=function(){return typeof mc=="function"},t=function(w,m,P,_){var E=4,L=c;switch(_){case n.image_compression.FAST:E=1,L=i;break;case n.image_compression.MEDIUM:E=6,L=u;break;case n.image_compression.SLOW:E=9,L=d}w=r(w,m,P,L);var j=mc(w,{level:E});return n.__addimage__.arrayBufferToBinaryString(j)},r=function(w,m,P,_){for(var E,L,j,k=w.length/m,B=new Uint8Array(w.length+k),K=x(),Z=0;Z<k;Z+=1){if(j=Z*m,E=w.subarray(j,j+m),_)B.set(_(E,P,L),j+Z);else{for(var R,O=K.length,X=[];R<O;R+=1)X[R]=K[R](E,P,L);var oe=b(X.concat());B.set(X[oe],j+Z)}L=E}return B},a=function(w){var m=Array.apply([],w);return m.unshift(0),m},i=function(w,m){var P,_=[],E=w.length;_[0]=1;for(var L=0;L<E;L+=1)P=w[L-m]||0,_[L+1]=w[L]-P+256&255;return _},c=function(w,m,P){var _,E=[],L=w.length;E[0]=2;for(var j=0;j<L;j+=1)_=P&&P[j]||0,E[j+1]=w[j]-_+256&255;return E},u=function(w,m,P){var _,E,L=[],j=w.length;L[0]=3;for(var k=0;k<j;k+=1)_=w[k-m]||0,E=P&&P[k]||0,L[k+1]=w[k]+256-(_+E>>>1)&255;return L},d=function(w,m,P){var _,E,L,j,k=[],B=w.length;k[0]=4;for(var K=0;K<B;K+=1)_=w[K-m]||0,E=P&&P[K]||0,L=P&&P[K-m]||0,j=y(_,E,L),k[K+1]=w[K]-j+256&255;return k},y=function(w,m,P){if(w===m&&m===P)return w;var _=Math.abs(m-P),E=Math.abs(w-P),L=Math.abs(w+m-P-P);return _<=E&&_<=L?w:E<=L?m:P},x=function(){return[a,i,c,u,d]},b=function(w){var m=w.map(function(P){return P.reduce(function(_,E){return _+Math.abs(E)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(w,m,P,_){var E,L,j,k,B,K,Z,R,O,X,oe,C,N,q,V,he=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(j=new Xm(w)).imgData,L=j.bits,E=j.colorSpace,B=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){O=(R=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,oe=new Uint8Array(O*j.colors),X=new Uint8Array(O);var Q,ne=j.pixelBitlength-j.bits;for(q=0,V=0;q<O;q++){for(N=R[q],Q=0;Q<ne;)oe[V++]=N>>>Q&255,Q+=j.bits;X[q]=N>>>Q&255}}if(j.bits===16){O=(R=new Uint32Array(j.decodePixels().buffer)).length,oe=new Uint8Array(O*(32/j.pixelBitlength)*j.colors),X=new Uint8Array(O*(32/j.pixelBitlength)),C=j.colors>1,q=0,V=0;for(var ie=0;q<O;)N=R[q++],oe[V++]=N>>>0&255,C&&(oe[V++]=N>>>16&255,N=R[q++],oe[V++]=N>>>0&255),X[ie++]=N>>>16&255;L=8}_!==n.image_compression.NONE&&e()?(w=t(oe,j.width*j.colors,j.colors,_),Z=t(X,j.width,1,_)):(w=oe,Z=X,he=void 0)}if(j.colorType===3&&(E=this.color_spaces.INDEXED,K=j.palette,j.transparency.indexed)){var ge=j.transparency.indexed,Oe=0;for(q=0,O=ge.length;q<O;++q)Oe+=ge[q];if((Oe/=255)===O-1&&ge.indexOf(0)!==-1)k=[ge.indexOf(0)];else if(Oe!==O){for(R=j.decodePixels(),X=new Uint8Array(R.length),q=0,O=R.length;q<O;q++)X[q]=ge[R[q]];Z=t(X,j.width,1)}}var I=function(D){var G;switch(D){case n.image_compression.FAST:G=11;break;case n.image_compression.MEDIUM:G=13;break;case n.image_compression.SLOW:G=14;break;default:G=12}return G}(_);return he===this.decode.FLATE_DECODE&&(Y="/Predictor "+I+" "),Y+="/Colors "+B+" /BitsPerComponent "+L+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(Z&&this.__addimage__.isArrayBuffer(Z)||this.__addimage__.isArrayBufferView(Z))&&(Z=this.__addimage__.arrayBufferToBinaryString(Z)),{alias:P,data:w,index:m,filter:he,decodeParameters:Y,transparency:k,palette:K,sMask:Z,predictor:I,width:j.width,height:j.height,bitsPerComponent:L,colorSpace:E}}}})(Ot.API),function(n){n.processGIF89A=function(e,t,r,a){var i=new Zm(e),c=i.width,u=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var y={data:d,width:c,height:u},x=new ec(100).encode(y,100);return n.processJPEG.call(this,x,t,r,a)},n.processGIF87A=n.processGIF89A}(Ot.API),wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wi.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){yr.log("bit decode error:"+t)}},wi.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*a*4,u=0;u<8&&8*a+u<this.width;u++){var d=this.palette[i>>7-u&1];this.data[c+4*u]=d.blue,this.data[c+4*u+1]=d.green,this.data[c+4*u+2]=d.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},wi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var i=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*a*4,u=i>>4,d=15&i,y=this.palette[u];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*a+1>=this.width)break;y=this.palette[d],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},wi.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;if(a<this.palette.length){var c=this.palette[a];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},wi.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&e)/e*255|0,u=(i>>5&e)/e*255|0,d=(i>>10&e)/e*255|0,y=i>>15?255:0,x=r*this.width*4+4*a;this.data[x]=d,this.data[x+1]=u,this.data[x+2]=c,this.data[x+3]=y}this.pos+=n}},wi.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,d=(c>>5&t)/t*255|0,y=(c>>11)/e*255|0,x=a*this.width*4+4*i;this.data[x]=y,this.data[x+1]=d,this.data[x+2]=u,this.data[x+3]=255}this.pos+=n}},wi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},wi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=i,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=c}},wi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,a){var i=new wi(e,!1),c=i.width,u=i.height,d={data:i.getData(),width:c,height:u},y=new ec(100).encode(d,100);return n.processJPEG.call(this,y,t,r,a)}}(Ot.API),rd.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,a){var i=new rd(e),c=i.width,u=i.height,d={data:i.getData(),width:c,height:u},y=new ec(100).encode(d,100);return n.processJPEG.call(this,y,t,r,a)}}(Ot.API),Ot.API.processRGBA=function(n,e,t){for(var r=n.data,a=r.length,i=new Uint8Array(a/4*3),c=new Uint8Array(a/4),u=0,d=0,y=0;y<a;y+=4){var x=r[y],b=r[y+1],w=r[y+2],m=r[y+3];i[u++]=x,i[u++]=b,i[u++]=w,c[d++]=m}var P=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ot.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Us=Ot.API,Jo=Us.getCharWidthsArray=function(n,e){var t,r,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:a.metadata.Unicode.widths,d=u.fof?u.fof:1,y=e.kerning?e.kerning:a.metadata.Unicode.kerning,x=y.fof?y.fof:1,b=e.doKerning!==!1,w=0,m=n.length,P=0,_=u[0]||d,E=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+c*(1e3/i)||0)/1e3):(w=b&&br(y[r])==="object"&&!isNaN(parseInt(y[r][P],10))?y[r][P]/x:0,E.push((u[r]||_)/d+w)),P=r;return E},Xu=Us.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Us.processArabic&&(n=Us.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,a)/t:Jo.apply(this,arguments).reduce(function(i,c){return i+c},0)},Zu=function(n,e,t,r){for(var a=[],i=0,c=n.length,u=0;i!==c&&u+e[i]<t;)u+=e[i],i++;a.push(n.slice(0,i));var d=i;for(u=0;i!==c;)u+e[i]>r&&(a.push(n.slice(d,i)),u=0,d=i),u+=e[i],i++;return d!==i&&a.push(n.slice(d,i)),a},ed=function(n,e,t){t||(t={});var r,a,i,c,u,d,y,x=[],b=[x],w=t.textIndent||0,m=0,P=0,_=n.split(" "),E=Jo.apply(this,[" ",t])[0];if(d=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var L=Array(d).join(" "),j=[];_.map(function(B){(B=B.split(/\s*\n/)).length>1?j=j.concat(B.map(function(K,Z){return(Z&&K.length?`
`:"")+K})):j.push(B[0])}),_=j,d=Xu.apply(this,[L,t])}for(i=0,c=_.length;i<c;i++){var k=0;if(r=_[i],d&&r[0]==`
`&&(r=r.substr(1),k=1),w+m+(P=(a=Jo.apply(this,[r,t])).reduce(function(B,K){return B+K},0))>e||k){if(P>e){for(u=Zu.apply(this,[r,a,e-(w+m),e]),x.push(u.shift()),x=[u.pop()];u.length;)b.push([u.shift()]);P=a.slice(r.length-(x[0]?x[0].length:0)).reduce(function(B,K){return B+K},0)}else x=[r];b.push(x),w=P+d,m=E}else x.push(r),w+=m+P,m=E}return y=d?function(B,K){return(K?L:"")+B.join(" ")}:function(B){return B.join(" ")},b.map(y)},Us.splitTextToSize=function(n,e,t){var r,a=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var b=this.internal.getFont(x.fontName,x.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=t.lineIndent;var u,d,y=[];for(u=0,d=r.length;u<d;u++)y=y.concat(ed.apply(this,[r[u],c,i]));return y},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},a=0;a<e.length;a++)t[e[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=e[a];var i=function(b){return"0x"+parseInt(b,10).toString(16)},c=n.__fontmetrics__.compress=function(b){var w,m,P,_,E=["{"];for(var L in b){if(w=b[L],isNaN(parseInt(L,10))?m="'"+L+"'":(L=parseInt(L,10),m=(m=i(L).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof w=="number")w<0?(P=i(w).slice(3),_="-"):(P=i(w).slice(2),_=""),P=_+P.slice(0,-1)+r[P.slice(-1)];else{if(br(w)!=="object")throw new Error("Don't know what to do with value type "+br(w)+".");P=c(w)}E.push(m+P)}return E.push("}"),E.join("")},u=n.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,m,P,_,E={},L=1,j=E,k=[],B="",K="",Z=b.length-1,R=1;R<Z;R+=1)(_=b[R])=="'"?w?(P=w.join(""),w=void 0):w=[]:w?w.push(_):_=="{"?(k.push([j,P]),j={},P=void 0):_=="}"?((m=k.pop())[0][m[1]]=j,P=void 0,j=m[0]):_=="-"?L=-1:P===void 0?t.hasOwnProperty(_)?(B+=t[_],P=parseInt(B,16)*L,L=1,B=""):B+=_:t.hasOwnProperty(_)?(K+=t[_],j[P]=parseInt(K,16)*L,L=1,P=void 0,K=""):K+=_;return E},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},x={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(b){var w=b.font,m=x.Unicode[w.postScriptName];m&&(w.metadata.Unicode={},w.metadata.Unicode.widths=m.widths,w.metadata.Unicode.kerning=m.kerning);var P=y.Unicode[w.postScriptName];P&&(w.metadata.Unicode.encoding=P,w.encoding=P.codePages[0])}])}(Ot.API),function(n){var e=function(t){for(var r=t.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=t.charCodeAt(i);return a};n.API.events.push(["addFont",function(t){var r=void 0,a=t.font,i=t.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(po(u)),c.metadata=n.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,r)}}])}(Ot),function(n){function e(){return(Ut.canvg?Promise.resolve(Ut.canvg):Ai(()=>import("./index.es-3c3c1151.js"),["./index.es-3c3c1151.js","./vendor-36f7ab30.js","./utils-570e0bc6.js"],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ot.API.addSvgAsImage=function(t,r,a,i,c,u,d,y){if(isNaN(r)||isNaN(a))throw yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(c))throw yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=i,x.height=c;var b=x.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,x.width,x.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(P){return P.fromString(b,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(w)}).then(function(){m.addImage(x.toDataURL("image/jpeg",1),r,a,i,c,d,y)})}}(),Ot.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,t);return this},Ot.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,a,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),d=[],y=0,x=0,b=0;function w(P,_){var E,L=!1;for(E=0;E<P.length;E+=1)P[E]===_&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=u.length;for(b=0;b<m;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(br(n)==="object"){for(a in n)if(i=n[a],w(u,a)&&i!==void 0){if(t[a].type==="boolean"&&typeof i=="boolean")t[a].value=i;else if(t[a].type==="name"&&w(t[a].valueSet,i))t[a].value=i;else if(t[a].type==="integer"&&Number.isInteger(i))t[a].value=i;else if(t[a].type==="array"){for(y=0;y<i.length;y+=1)if(r=!0,i[y].length===1&&typeof i[y][0]=="number")d.push(String(i[y]-1));else if(i[y].length>1){for(x=0;x<i[y].length;x+=1)typeof i[y][x]!="number"&&(r=!1);r===!0&&d.push([i[y][0]-1,i[y][1]-1].join(" "))}t[a].value="["+d.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,_=[];for(P in t)t[P].explicitSet===!0&&(t[P].type==="name"?_.push("/"+P+" /"+t[P].value):_.push("/"+P+" "+t[P].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),y=i.length+c.length+u.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(a+i+c+u+d),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ot.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,c){for(var u,d=c.metadata.Unicode.widths,y=["","0","00","000","0000"],x=[""],b=0,w=i.length;b<w;++b){if(u=c.metadata.characterToGlyph(i.charCodeAt(b)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=i.charCodeAt(b),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return x.join("");u=u.toString(16),x.push(y[4-u.length],u)}return x.join("")},r=function(i){var c,u,d,y,x,b,w;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],b=0,w=(u=Object.keys(i).sort(function(m,P){return m-P})).length;b<w;b++)c=u[b],d.length>=100&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(y=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),d.push("<"+c+"><"+y+">"));return d.length&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(c){var u=c.font,d=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),m="",P=0;P<w.length;P++)m+=String.fromCharCode(w[P]);var _=y();x({data:m,addLength1:!0,objectId:_}),d("endobj");var E=y();x({data:r(u.metadata.toUnicode),addLength1:!0,objectId:E}),d("endobj");var L=y();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Ws(u.fontName)),d("/FontFile2 "+_+" 0 R"),d("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var j=y();d("<<"),d("/Type /Font"),d("/BaseFont /"+Ws(u.fontName)),d("/FontDescriptor "+L+" 0 R"),d("/W "+n.API.PDFObject.convert(b)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=y(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+E+" 0 R"),d("/BaseFont /"+Ws(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+j+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(c){var u=c.font,d=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,w="",m=0;m<b.length;m++)w+=String.fromCharCode(b[m]);var P=y();x({data:w,addLength1:!0,objectId:P}),d("endobj");var _=y();x({data:r(u.metadata.toUnicode),addLength1:!0,objectId:_}),d("endobj");var E=y();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+P+" 0 R"),d("/Flags 96"),d("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+Ws(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=y();for(var L=0;L<u.metadata.hmtx.widths.length;L++)u.metadata.hmtx.widths[L]=parseInt(u.metadata.hmtx.widths[L]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Ws(u.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]);var a=function(i){var c,u=i.text||"",d=i.x,y=i.y,x=i.options||{},b=i.mutex||{},w=b.pdfEscape,m=b.activeFontKey,P=b.fonts,_=m,E="",L=0,j="",k=P[_].encoding;if(P[_].encoding!=="Identity-H")return{text:u,x:d,y,options:x,mutex:b};for(j=u,_=m,Array.isArray(u)&&(j=u[0]),L=0;L<j.length;L+=1)P[_].metadata.hasOwnProperty("cmap")&&(c=P[_].metadata.cmap.unicode.codeMap[j[L].charCodeAt(0)]),c||j[L].charCodeAt(0)<256&&P[_].metadata.hasOwnProperty("Unicode")?E+=j[L]:E+="";var B="";return parseInt(_.slice(1))<14||k==="WinAnsiEncoding"?B=w(E,_).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(B=t(E,P[_])),b.isHex=!0,{text:B,x:d,y,options:x,mutex:b}};e.events.push(["postProcessText",function(i){var c=i.text||"",u=[],d={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?u.push([a(Object.assign({},d,{text:c[y][0]})).text,c[y][1],c[y][2]]):u.push(a(Object.assign({},d,{text:c[y]})).text);i.text=u}else i.text=a(Object.assign({},d,{text:c})).text}])}(Ot),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ot.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var a,i,c,u,d,y,x,b=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,k=0;this.__bidiEngine__={};var B=function(C){var N=C.charCodeAt(),q=N>>8,V=_[q];return V!==void 0?b[256*V+(255&N)]:q===252||q===253?"AL":L.test(q)?"L":q===8?"R":"N"},K=function(C){for(var N,q=0;q<C.length;q++){if((N=B(C.charAt(q)))==="L")return!1;if(N==="R")return!0}return!1},Z=function(C,N,q,V){var he,Y,Q,ne,ie=N[V];switch(ie){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(ie="AN");break;case"AL":j=!0,ie="R";break;case"WS":ie="N";break;case"CS":V<1||V+1>=N.length||(he=q[V-1])!=="EN"&&he!=="AN"||(Y=N[V+1])!=="EN"&&Y!=="AN"?ie="N":j&&(Y="AN"),ie=Y===he?Y:"N";break;case"ES":ie=(he=V>0?q[V-1]:"B")==="EN"&&V+1<N.length&&N[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&q[V-1]==="EN"){ie="EN";break}if(j){ie="N";break}for(Q=V+1,ne=N.length;Q<ne&&N[Q]==="ET";)Q++;ie=Q<ne&&N[Q]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ne=N.length,Q=V+1;Q<ne&&N[Q]==="NSM";)Q++;if(Q<ne){var ge=C[V],Oe=ge>=1425&&ge<=2303||ge===64286;if(he=N[Q],Oe&&(he==="R"||he==="AL")){ie="R";break}}}ie=V<1||(he=N[V-1])==="B"?"N":q[V-1];break;case"B":j=!1,a=!0,ie=k;break;case"S":i=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":ie="N"}return ie},R=function(C,N,q){var V=C.split("");return q&&O(V,q,{hiLevel:k}),V.reverse(),N&&N.reverse(),V.join("")},O=function(C,N,q){var V,he,Y,Q,ne,ie=-1,ge=C.length,Oe=0,I=[],D=k?m:w,G=[];for(j=!1,a=!1,i=!1,he=0;he<ge;he++)G[he]=B(C[he]);for(Y=0;Y<ge;Y++){if(ne=Oe,I[Y]=Z(C,G,I,Y),V=240&(Oe=D[ne][P[I[Y]]]),Oe&=15,N[Y]=Q=D[Oe][5],V>0)if(V===16){for(he=ie;he<Y;he++)N[he]=1;ie=-1}else ie=-1;if(D[Oe][6])ie===-1&&(ie=Y);else if(ie>-1){for(he=ie;he<Y;he++)N[he]=Q;ie=-1}G[Y]==="B"&&(N[Y]=0),q.hiLevel|=Q}i&&function(te,ae,ye){for(var Pe=0;Pe<ye;Pe++)if(te[Pe]==="S"){ae[Pe]=k;for(var fe=Pe-1;fe>=0&&te[fe]==="WS";fe--)ae[fe]=k}}(G,N,ge)},X=function(C,N,q,V,he){if(!(he.hiLevel<C)){if(C===1&&k===1&&!a)return N.reverse(),void(q&&q.reverse());for(var Y,Q,ne,ie,ge=N.length,Oe=0;Oe<ge;){if(V[Oe]>=C){for(ne=Oe+1;ne<ge&&V[ne]>=C;)ne++;for(ie=Oe,Q=ne-1;ie<Q;ie++,Q--)Y=N[ie],N[ie]=N[Q],N[Q]=Y,q&&(Y=q[ie],q[ie]=q[Q],q[Q]=Y);Oe=ne}Oe++}}},oe=function(C,N,q){var V=C.split(""),he={hiLevel:k};return q||(q=[]),O(V,q,he),function(Y,Q,ne){if(ne.hiLevel!==0&&x)for(var ie,ge=0;ge<Y.length;ge++)Q[ge]===1&&(ie=E.indexOf(Y[ge]))>=0&&(Y[ge]=E[ie+1])}(V,q,he),X(2,V,N,q,he),X(1,V,N,q,he),V.join("")};return this.__bidiEngine__.doBidiReorder=function(C,N,q){if(function(he,Y){if(Y)for(var Q=0;Q<he.length;Q++)Y[Q]=Q;u===void 0&&(u=K(he)),y===void 0&&(y=K(he))}(C,N),c||!d||y)if(c&&d&&u^y)k=u?1:0,C=R(C,N,q);else if(!c&&d&&y)k=u?1:0,C=oe(C,N,q),C=R(C,N);else if(!c||u||d||y){if(c&&!d&&u^y)C=R(C,N),u?(k=0,C=oe(C,N,q)):(k=1,C=oe(C,N,q),C=R(C,N));else if(c&&u&&!d&&y)k=1,C=oe(C,N,q),C=R(C,N);else if(!c&&!d&&u^y){var V=x;u?(k=1,C=oe(C,N,q),k=0,x=!1,C=oe(C,N,q),x=V):(k=0,C=oe(C,N,q),C=R(C,N),k=1,x=!1,C=oe(C,N,q),x=V,C=R(C,N))}}else k=0,C=oe(C,N,q);else k=u?1:0,C=oe(C,N,q);return C},this.__bidiEngine__.setOptions=function(C){C&&(c=C.isInputVisual,d=C.isOutputVisual,u=C.isInputRtl,y=C.isOutputRtl,x=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var a=r.text,i=(r.x,r.y,r.options||{}),c=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var u=0;for(c=[],u=0;u<a.length;u+=1)Object.prototype.toString.call(a[u])==="[object Array]"?c.push([t.doBidiReorder(a[u][0]),a[u][1],a[u][2]]):c.push([t.doBidiReorder(a[u])]);r.text=c}else r.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ja(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new p0(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new e0(this.contents),this.head=new r0(this),this.name=new o0(this),this.cmap=new nh(this),this.toUnicode={},this.hhea=new n0(this),this.maxp=new l0(this),this.hmtx=new c0(this),this.post=new a0(this),this.os2=new i0(this),this.loca=new f0(this),this.glyf=new u0(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,d,y;for(y=[],c=0,u=(d=this.bbox).length;c<u;c++)e=d[c],y.push(Math.round(e*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var a,i,c,u;for(c=0,i=0,u=(e=""+e).length;0<=u?i<u:i>u;i=0<=u?++i:--i)a=e.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Li,Ja=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,a;for(a=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,a,i,c,u,d;return e=this.readByte(),t=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),c=this.readByte(),u=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^i)+65536*(255^c)+256*(255^u)+(255^d)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*a+16777216*i+65536*c+256*u+d},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,a,i;for(i=[],r=0,a=e.length;r<a;r++)t=e[r],i.push(this.writeByte(t));return i},n}(),e0=function(){var n;function e(t){var r,a,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,a,i,c,u,d,y,x,b,w,m,P,_;for(_ in m=Object.keys(t).length,d=Math.log(2),b=16*Math.floor(Math.log(m)/d),c=Math.floor(b/d),x=16*m-b,(a=new Ja).writeInt(this.scalarType),a.writeShort(m),a.writeShort(b),a.writeShort(c),a.writeShort(x),i=16*m,y=a.pos+i,u=null,P=[],t)for(w=t[_],a.writeString(_),a.writeInt(n(w)),a.writeInt(y),a.writeInt(w.length),P=P.concat(w),_==="head"&&(u=y),y+=w.length;y%4;)P.push(0),y++;return a.write(P),r=2981146554-n(a.data),a.pos=u+8,a.writeUInt32(r),a.data},n=function(t){var r,a,i,c;for(t=ih.call(t);t.length%4;)t.push(0);for(i=new Ja(t),a=0,r=0,c=t.length;r<c;r=r+=4)a+=i.readUInt32();return 4294967295&a},e}(),t0={}.hasOwnProperty,Vi=function(n,e){for(var t in e)t0.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Li=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var r0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ja).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),nd=function(){function n(e,t){var r,a,i,c,u,d,y,x,b,w,m,P,_,E,L,j,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(m=e.readUInt16(),w=m/2,e.pos+=6,i=function(){var B,K;for(K=[],d=B=0;0<=w?B<w:B>w;d=0<=w?++B:--B)K.push(e.readUInt16());return K}(),e.pos+=2,_=function(){var B,K;for(K=[],d=B=0;0<=w?B<w:B>w;d=0<=w?++B:--B)K.push(e.readUInt16());return K}(),y=function(){var B,K;for(K=[],d=B=0;0<=w?B<w:B>w;d=0<=w?++B:--B)K.push(e.readUInt16());return K}(),x=function(){var B,K;for(K=[],d=B=0;0<=w?B<w:B>w;d=0<=w?++B:--B)K.push(e.readUInt16());return K}(),a=(this.length-e.pos+this.offset)/2,u=function(){var B,K;for(K=[],d=B=0;0<=a?B<a:B>a;d=0<=a?++B:--B)K.push(e.readUInt16());return K}(),d=L=0,k=i.length;L<k;d=++L)for(E=i[d],r=j=P=_[d];P<=E?j<=E:j>=E;r=P<=E?++j:--j)x[d]===0?c=r+y[d]:(c=u[x[d]/2+(r-P)-(w-d)]||0)!==0&&(c+=y[d]),this.codeMap[r]=65535&c}e.pos=b}return n.encode=function(e,t){var r,a,i,c,u,d,y,x,b,w,m,P,_,E,L,j,k,B,K,Z,R,O,X,oe,C,N,q,V,he,Y,Q,ne,ie,ge,Oe,I,D,G,te,ae,ye,Pe,fe,Je,et,Ve;switch(V=new Ja,c=Object.keys(e).sort(function(lt,Ft){return lt-Ft}),t){case"macroman":for(_=0,E=function(){var lt=[];for(P=0;P<256;++P)lt.push(0);return lt}(),j={0:0},i={},he=0,ie=c.length;he<ie;he++)j[fe=e[a=c[he]]]==null&&(j[fe]=++_),i[a]={old:e[a],new:j[e[a]]},E[a]=j[e[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(E),{charMap:i,subtable:V.data,maxGlyphID:_+1};case"unicode":for(N=[],b=[],k=0,j={},r={},L=y=null,Y=0,ge=c.length;Y<ge;Y++)j[K=e[a=c[Y]]]==null&&(j[K]=++k),r[a]={old:K,new:j[K]},u=j[K]-a,L!=null&&u===y||(L&&b.push(L),N.push(a),y=u),L=a;for(L&&b.push(L),b.push(65535),N.push(65535),oe=2*(X=N.length),O=2*Math.pow(Math.log(X)/Math.LN2,2),w=Math.log(O/2)/Math.LN2,R=2*X-O,d=[],Z=[],m=[],P=Q=0,Oe=N.length;Q<Oe;P=++Q){if(C=N[P],x=b[P],C===65535){d.push(0),Z.push(0);break}if(C-(q=r[C].new)>=32768)for(d.push(0),Z.push(2*(m.length+X-P)),a=ne=C;C<=x?ne<=x:ne>=x;a=C<=x?++ne:--ne)m.push(r[a].new);else d.push(q-C),Z.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*X+2*m.length),V.writeUInt16(0),V.writeUInt16(oe),V.writeUInt16(O),V.writeUInt16(w),V.writeUInt16(R),ye=0,I=b.length;ye<I;ye++)a=b[ye],V.writeUInt16(a);for(V.writeUInt16(0),Pe=0,D=N.length;Pe<D;Pe++)a=N[Pe],V.writeUInt16(a);for(Je=0,G=d.length;Je<G;Je++)u=d[Je],V.writeUInt16(u);for(et=0,te=Z.length;et<te;et++)B=Z[et],V.writeUInt16(B);for(Ve=0,ae=m.length;Ve<ae;Ve++)_=m[Ve],V.writeUInt16(_);return{charMap:r,subtable:V.data,maxGlyphID:k+1}}},n}(),nh=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r=new nd(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var a,i;return r==null&&(r="macroman"),a=nd.encode(t,r),(i=new Ja).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},e}(),n0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),i0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),a0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var c;for(a=t.readUInt16(),this.glyphNameIndex=[],c=0;0<=a?c<a:c>a;c=0<=a?++c:--c)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 196608:break;case 262144:return this.map=(function(){var u,d,y;for(y=[],c=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;c=0<=d?++u:--u)y.push(t.readUInt32());return y}).call(this)}},e}(),s0=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},o0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,i,c,u,d,y,x,b,w,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),d=t.readShort(),a=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+d+t.readShort()});for(y={},c=b=0,w=a.length;b<w;c=++b)i=a[c],t.pos=i.offset,x=t.readString(i.length),u=new s0(x,i),y[m=i.nameID]==null&&(y[m]=[]),y[i.nameID].push(u);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),l0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),c0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,i,c,u,d,y;for(t.pos=this.offset,this.metrics=[],r=0,d=this.file.hhea.numberOfMetrics;0<=d?r<d:r>d;r=0<=d?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,b;for(b=[],r=x=0;0<=i?x<i:x>i;r=0<=i?++x:--x)b.push(t.readInt16());return b}(),this.widths=(function(){var x,b,w,m;for(m=[],x=0,b=(w=this.metrics).length;x<b;x++)c=w[x],m.push(c.advance);return m}).call(this),a=this.widths[this.widths.length-1],y=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)y.push(this.widths.push(a));return y},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ih=[].slice,u0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,i,c,u,d,y,x,b,w;return t in this.cache?this.cache[t]:(c=this.file.loca,r=this.file.contents,a=c.indexOf(t),(i=c.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,u=(d=new Ja(r.read(i))).readShort(),x=d.readShort(),w=d.readShort(),y=d.readShort(),b=d.readShort(),this.cache[t]=u===-1?new h0(d,x,w,y,b):new d0(d,u,x,w,y,b),this.cache[t]))},e.prototype.encode=function(t,r,a){var i,c,u,d,y;for(u=[],c=[],d=0,y=r.length;d<y;d++)i=t[r[d]],c.push(u.length),i&&(u=u.concat(i.encode(a)));return c.push(u.length),{table:u,offsets:c}},e}(),d0=function(){function n(e,t,r,a,i,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),h0=function(){function n(e,t,r,a,i){var c,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ja(ih.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),f0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vi(e,Li),e.prototype.tag="loca",e.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=2)c.push(2*t.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=4)c.push(t.readUInt32());return c}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),i=0,c=0,u=0;u<a.length;++u)if(a[u]=i,c<r.length&&r[c]==u){++c,a[u]=i;var d=this.offsets[u],y=this.offsets[u+1]-d;y>0&&(i+=y)}for(var x=new Array(4*a.length),b=0;b<a.length;++b)x[4*b+3]=255&a[b],x[4*b+2]=(65280&a[b])>>8,x[4*b+1]=(16711680&a[b])>>16,x[4*b]=(4278190080&a[b])>>24;return x},e}(),p0=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[t],e[t]=a[r];return e},n.prototype.glyphsFor=function(e){var t,r,a,i,c,u,d;for(a={},c=0,u=e.length;c<u;c++)a[i=e[c]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(r=a[i])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(i in d=this.glyphsFor(t))r=d[i],a[i]=r;return a},n.prototype.encode=function(e,t){var r,a,i,c,u,d,y,x,b,w,m,P,_,E,L;for(a in r=nh.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),m={0:0},L=r.charMap)m[(d=L[a]).old]=d.new;for(P in w=r.maxGlyphID,c)P in m||(m[P]=w++);return x=function(j){var k,B;for(k in B={},j)B[j[k]]=k;return B}(m),b=Object.keys(x).sort(function(j,k){return j-k}),_=function(){var j,k,B;for(B=[],j=0,k=b.length;j<k;j++)u=b[j],B.push(x[u]);return B}(),i=this.font.glyf.encode(c,_,m),y=this.font.loca.encode(i.offsets,_),E={cmap:this.font.cmap.raw(),glyf:i.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},n}();Ot.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,a,i,c;if(Array.isArray(t))return"["+function(){var u,d,y;for(y=[],u=0,d=t.length;u<d;u++)r=t[u],y.push(e.convert(r));return y}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in i=["<<"],t)c=t[a],i.push("/"+a+" "+e.convert(c));return i.push(">>"),i.join(`
`)}return""+t},e}();const m0=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Vm,AcroFormAppearance:_t,AcroFormButton:tn,AcroFormCheckBox:yo,AcroFormChoiceField:ws,AcroFormComboBox:Ss,AcroFormEditBox:mo,AcroFormListBox:Ns,AcroFormPasswordField:vo,AcroFormPushButton:go,AcroFormRadioButton:js,AcroFormTextField:Ya,GState:jo,ShadingPattern:Ka,TilingPattern:bs,default:Ot,jsPDF:Ot},Symbol.toStringTag,{value:"Module"}));var ah={exports:{}};const g0=$h(m0);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,e){(function(r,a){n.exports=a(function(){try{return g0}catch{}}())})(typeof globalThis<"u"?globalThis:typeof co<"u"?co:typeof window<"u"?window:typeof self<"u"?self:co,function(t){return function(){var r={172:function(u,d){var y=this&&this.__extends||function(){var w=function(m,P){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var L in E)Object.prototype.hasOwnProperty.call(E,L)&&(_[L]=E[L])},w(m,P)};return function(m,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");w(m,P);function _(){this.constructor=m}m.prototype=P===null?Object.create(P):(_.prototype=P.prototype,new _)}}();Object.defineProperty(d,"__esModule",{value:!0}),d.CellHookData=d.HookData=void 0;var x=function(){function w(m,P,_){this.table=P,this.pageNumber=P.pageNumber,this.pageCount=this.pageNumber,this.settings=P.settings,this.cursor=_,this.doc=m.getDocument()}return w}();d.HookData=x;var b=function(w){y(m,w);function m(P,_,E,L,j,k){var B=w.call(this,P,_,k)||this;return B.cell=E,B.row=L,B.column=j,B.section=L.section,B}return m}(x);d.CellHookData=b},340:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0});var x=y(4),b=y(136),w=y(744),m=y(776),P=y(664),_=y(972);function E(L){L.API.autoTable=function(){for(var j=[],k=0;k<arguments.length;k++)j[k]=arguments[k];var B;j.length===1?B=j[0]:(console.error("Use of deprecated autoTable initiation"),B=j[2]||{},B.columns=j[0],B.body=j[1]);var K=(0,m.parseInput)(this,B),Z=(0,_.createTable)(this,K);return(0,P.drawTable)(this,Z),this},L.API.lastAutoTable=!1,L.API.previousAutoTable=!1,L.API.autoTable.previous=!1,L.API.autoTableText=function(j,k,B,K){(0,b.default)(j,k,B,K,this)},L.API.autoTableSetDefaults=function(j){return w.DocHandler.setDefaults(j,this),this},L.autoTableSetDefaults=function(j,k){w.DocHandler.setDefaults(j,k)},L.API.autoTableHtmlToJson=function(j,k){var B;if(k===void 0&&(k=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var K=new w.DocHandler(this),Z=(0,x.parseHtml)(K,j,window,k,!1),R=Z.head,O=Z.body,X=((B=R[0])===null||B===void 0?void 0:B.map(function(oe){return oe.content}))||[];return{columns:X,rows:O,data:O}},L.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var j=this.lastAutoTable;return j&&j.finalY?j.finalY:0},L.API.autoTableAddPageContent=function(j){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),L.API.autoTable.globalDefaults||(L.API.autoTable.globalDefaults={}),L.API.autoTable.globalDefaults.addPageContent=j,this},L.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}d.default=E},136:function(u,d){Object.defineProperty(d,"__esModule",{value:!0});function y(x,b,w,m,P){m=m||{};var _=1.15,E=P.internal.scaleFactor,L=P.internal.getFontSize()/E,j=P.getLineHeightFactor?P.getLineHeightFactor():_,k=L*j,B=/\r\n|\r|\n/g,K="",Z=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(K=typeof x=="string"?x.split(B):x,Z=K.length||1),w+=L*(2-_),m.valign==="middle"?w-=Z/2*k:m.valign==="bottom"&&(w-=Z*k),m.halign==="center"||m.halign==="right"){var R=L;if(m.halign==="center"&&(R*=.5),K&&Z>=1){for(var O=0;O<K.length;O++)P.text(K[O],b-P.getStringUnitWidth(K[O])*R,w),w+=k;return P}b-=P.getStringUnitWidth(x)*R}return m.halign==="justify"?P.text(x,b,w,{maxWidth:m.maxWidth||100,align:"justify"}):P.text(x,b,w),P}d.default=y},420:function(u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getPageAvailableWidth=d.parseSpacing=d.getFillStyle=d.addTableBorder=d.getStringWidth=void 0;function y(P,_,E){E.applyStyles(_,!0);var L=Array.isArray(P)?P:[P],j=L.map(function(k){return E.getTextWidth(k)}).reduce(function(k,B){return Math.max(k,B)},0);return j}d.getStringWidth=y;function x(P,_,E,L){var j=_.settings.tableLineWidth,k=_.settings.tableLineColor;P.applyStyles({lineWidth:j,lineColor:k});var B=b(j,!1);B&&P.rect(E.x,E.y,_.getWidth(P.pageSize().width),L.y-E.y,B)}d.addTableBorder=x;function b(P,_){var E=P>0,L=_||_===0;return E&&L?"DF":E?"S":L?"F":null}d.getFillStyle=b;function w(P,_){var E,L,j,k;if(P=P||_,Array.isArray(P)){if(P.length>=4)return{top:P[0],right:P[1],bottom:P[2],left:P[3]};if(P.length===3)return{top:P[0],right:P[1],bottom:P[2],left:P[1]};if(P.length===2)return{top:P[0],right:P[1],bottom:P[0],left:P[1]};P.length===1?P=P[0]:P=_}return typeof P=="object"?(typeof P.vertical=="number"&&(P.top=P.vertical,P.bottom=P.vertical),typeof P.horizontal=="number"&&(P.right=P.horizontal,P.left=P.horizontal),{left:(E=P.left)!==null&&E!==void 0?E:_,top:(L=P.top)!==null&&L!==void 0?L:_,right:(j=P.right)!==null&&j!==void 0?j:_,bottom:(k=P.bottom)!==null&&k!==void 0?k:_}):(typeof P!="number"&&(P=_),{top:P,right:P,bottom:P,left:P})}d.parseSpacing=w;function m(P,_){var E=w(_.settings.margin,0);return P.pageSize().width-(E.left+E.right)}d.getPageAvailableWidth=m},796:function(u,d){var y=this&&this.__extends||function(){var m=function(P,_){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,L){E.__proto__=L}||function(E,L){for(var j in L)Object.prototype.hasOwnProperty.call(L,j)&&(E[j]=L[j])},m(P,_)};return function(P,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");m(P,_);function E(){this.constructor=P}P.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}}();Object.defineProperty(d,"__esModule",{value:!0}),d.getTheme=d.defaultStyles=d.HtmlRowInput=void 0;var x=function(m){y(P,m);function P(_){var E=m.call(this)||this;return E._element=_,E}return P}(Array);d.HtmlRowInput=x;function b(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}d.defaultStyles=b;function w(m){var P={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return P[m]}d.getTheme=w},903:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.parseCss=void 0;var x=y(420);function b(E,L,j,k,B){var K={},Z=1.3333333333333333,R=m(L,function(ie){return B.getComputedStyle(ie).backgroundColor});R!=null&&(K.fillColor=R);var O=m(L,function(ie){return B.getComputedStyle(ie).color});O!=null&&(K.textColor=O);var X=_(k,j);X&&(K.cellPadding=X);var oe="borderTopColor",C=Z*j,N=k.borderTopWidth;if(k.borderBottomWidth===N&&k.borderRightWidth===N&&k.borderLeftWidth===N){var q=(parseFloat(N)||0)/C;q&&(K.lineWidth=q)}else K.lineWidth={top:(parseFloat(k.borderTopWidth)||0)/C,right:(parseFloat(k.borderRightWidth)||0)/C,bottom:(parseFloat(k.borderBottomWidth)||0)/C,left:(parseFloat(k.borderLeftWidth)||0)/C},K.lineWidth.top||(K.lineWidth.right?oe="borderRightColor":K.lineWidth.bottom?oe="borderBottomColor":K.lineWidth.left&&(oe="borderLeftColor"));var V=m(L,function(ie){return B.getComputedStyle(ie)[oe]});V!=null&&(K.lineColor=V);var he=["left","right","center","justify"];he.indexOf(k.textAlign)!==-1&&(K.halign=k.textAlign),he=["middle","bottom","top"],he.indexOf(k.verticalAlign)!==-1&&(K.valign=k.verticalAlign);var Y=parseInt(k.fontSize||"");isNaN(Y)||(K.fontSize=Y/Z);var Q=w(k);Q&&(K.fontStyle=Q);var ne=(k.fontFamily||"").toLowerCase();return E.indexOf(ne)!==-1&&(K.font=ne),K}d.parseCss=b;function w(E){var L="";return(E.fontWeight==="bold"||E.fontWeight==="bolder"||parseInt(E.fontWeight)>=700)&&(L="bold"),(E.fontStyle==="italic"||E.fontStyle==="oblique")&&(L+="italic"),L}function m(E,L){var j=P(E,L);if(!j)return null;var k=j.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!k||!Array.isArray(k))return null;var B=[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],K=parseInt(k[4]);return K===0||isNaN(B[0])||isNaN(B[1])||isNaN(B[2])?null:B}function P(E,L){var j=L(E);return j==="rgba(0, 0, 0, 0)"||j==="transparent"||j==="initial"||j==="inherit"?E.parentElement==null?null:P(E.parentElement,L):j}function _(E,L){var j=[E.paddingTop,E.paddingRight,E.paddingBottom,E.paddingLeft],k=96/(72/L),B=(parseInt(E.lineHeight)-parseInt(E.fontSize))/L/2,K=j.map(function(R){return parseInt(R||"0")/k}),Z=(0,x.parseSpacing)(K,0);return B>Z.top&&(Z.top=B),B>Z.bottom&&(Z.bottom=B),Z}},744:function(u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DocHandler=void 0;var y={},x=function(){function b(w){this.jsPDFDocument=w,this.userStyles={textColor:w.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:w.internal.getFontSize(),fontStyle:w.internal.getFont().fontStyle,font:w.internal.getFont().fontName,lineWidth:w.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:w.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(w,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=w:y=w},b.unifyColor=function(w){return Array.isArray(w)?w:typeof w=="number"?[w,w,w]:typeof w=="string"?[w]:null},b.prototype.applyStyles=function(w,m){var P,_,E;m===void 0&&(m=!1),w.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w.fontStyle);var L=this.jsPDFDocument.internal.getFont(),j=L.fontStyle,k=L.fontName;if(w.font&&(k=w.font),w.fontStyle){j=w.fontStyle;var B=this.getFontList()[k];B&&B.indexOf(j)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(B[0]),j=B[0])}if(this.jsPDFDocument.setFont(k,j),w.fontSize&&this.jsPDFDocument.setFontSize(w.fontSize),!m){var K=b.unifyColor(w.fillColor);K&&(P=this.jsPDFDocument).setFillColor.apply(P,K),K=b.unifyColor(w.textColor),K&&(_=this.jsPDFDocument).setTextColor.apply(_,K),K=b.unifyColor(w.lineColor),K&&(E=this.jsPDFDocument).setDrawColor.apply(E,K),typeof w.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(w.lineWidth)}},b.prototype.splitTextToSize=function(w,m,P){return this.jsPDFDocument.splitTextToSize(w,m,P)},b.prototype.rect=function(w,m,P,_,E){return this.jsPDFDocument.rect(w,m,P,_,E)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(w){return this.jsPDFDocument.getTextWidth(w)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(w){this.jsPDFDocument.setPage(w)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return y||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var w=this.jsPDFDocument.internal.pageSize;return w.width==null&&(w={width:w.getWidth(),height:w.getHeight()}),w},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var w=this.jsPDFDocument;return w.getLineHeightFactor?w.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(w){return w/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var w=this.jsPDFDocument.internal.getCurrentPageInfo();return w?w.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b}();d.DocHandler=x},4:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.parseHtml=void 0;var x=y(903),b=y(796);function w(_,E,L,j,k){var B,K;j===void 0&&(j=!1),k===void 0&&(k=!1);var Z;typeof E=="string"?Z=L.document.querySelector(E):Z=E;var R=Object.keys(_.getFontList()),O=_.scaleFactor(),X=[],oe=[],C=[];if(!Z)return console.error("Html table could not be found with input: ",E),{head:X,body:oe,foot:C};for(var N=0;N<Z.rows.length;N++){var q=Z.rows[N],V=(K=(B=q==null?void 0:q.parentElement)===null||B===void 0?void 0:B.tagName)===null||K===void 0?void 0:K.toLowerCase(),he=m(R,O,L,q,j,k);he&&(V==="thead"?X.push(he):V==="tfoot"?C.push(he):oe.push(he))}return{head:X,body:oe,foot:C}}d.parseHtml=w;function m(_,E,L,j,k,B){for(var K=new b.HtmlRowInput(j),Z=0;Z<j.cells.length;Z++){var R=j.cells[Z],O=L.getComputedStyle(R);if(k||O.display!=="none"){var X=void 0;B&&(X=(0,x.parseCss)(_,R,E,O,L)),K.push({rowSpan:R.rowSpan,colSpan:R.colSpan,styles:X,_element:R,content:P(R)})}}var oe=L.getComputedStyle(j);if(K.length>0&&(k||oe.display!=="none"))return K}function P(_){var E=_.cloneNode(!0);return E.innerHTML=E.innerHTML.replace(/\n/g,"").replace(/ +/g," "),E.innerHTML=E.innerHTML.split(/<br.*?>/).map(function(L){return L.trim()}).join(`
`),E.innerText||E.textContent||""}},776:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.parseInput=void 0;var x=y(4),b=y(356),w=y(420),m=y(744),P=y(792);function _(Z,R){var O=new m.DocHandler(Z),X=O.getDocumentOptions(),oe=O.getGlobalOptions();(0,P.default)(O,oe,X,R);var C=(0,b.assign)({},oe,X,R),N;typeof window<"u"&&(N=window);var q=E(oe,X,R),V=L(oe,X,R),he=j(O,C),Y=B(O,C,N);return{id:R.tableId,content:Y,hooks:V,styles:q,settings:he}}d.parseInput=_;function E(Z,R,O){for(var X={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},oe=function(V){if(V==="columnStyles"){var he=Z[V],Y=R[V],Q=O[V];X.columnStyles=(0,b.assign)({},he,Y,Q)}else{var ne=[Z,R,O],ie=ne.map(function(ge){return ge[V]||{}});X[V]=(0,b.assign)({},ie[0],ie[1],ie[2])}},C=0,N=Object.keys(X);C<N.length;C++){var q=N[C];oe(q)}return X}function L(Z,R,O){for(var X=[Z,R,O],oe={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},C=0,N=X;C<N.length;C++){var q=N[C];q.didParseCell&&oe.didParseCell.push(q.didParseCell),q.willDrawCell&&oe.willDrawCell.push(q.willDrawCell),q.didDrawCell&&oe.didDrawCell.push(q.didDrawCell),q.willDrawPage&&oe.willDrawPage.push(q.willDrawPage),q.didDrawPage&&oe.didDrawPage.push(q.didDrawPage)}return oe}function j(Z,R){var O,X,oe,C,N,q,V,he,Y,Q,ne,ie,ge=(0,w.parseSpacing)(R.margin,40/Z.scaleFactor()),Oe=(O=k(Z,R.startY))!==null&&O!==void 0?O:ge.top,I;R.showFoot===!0?I="everyPage":R.showFoot===!1?I="never":I=(X=R.showFoot)!==null&&X!==void 0?X:"everyPage";var D;R.showHead===!0?D="everyPage":R.showHead===!1?D="never":D=(oe=R.showHead)!==null&&oe!==void 0?oe:"everyPage";var G=(C=R.useCss)!==null&&C!==void 0?C:!1,te=R.theme||(G?"plain":"striped"),ae=!!R.horizontalPageBreak,ye=(N=R.horizontalPageBreakRepeat)!==null&&N!==void 0?N:null;return{includeHiddenHtml:(q=R.includeHiddenHtml)!==null&&q!==void 0?q:!1,useCss:G,theme:te,startY:Oe,margin:ge,pageBreak:(V=R.pageBreak)!==null&&V!==void 0?V:"auto",rowPageBreak:(he=R.rowPageBreak)!==null&&he!==void 0?he:"auto",tableWidth:(Y=R.tableWidth)!==null&&Y!==void 0?Y:"auto",showHead:D,showFoot:I,tableLineWidth:(Q=R.tableLineWidth)!==null&&Q!==void 0?Q:0,tableLineColor:(ne=R.tableLineColor)!==null&&ne!==void 0?ne:200,horizontalPageBreak:ae,horizontalPageBreakRepeat:ye,horizontalPageBreakBehaviour:(ie=R.horizontalPageBreakBehaviour)!==null&&ie!==void 0?ie:"afterAllRows"}}function k(Z,R){var O=Z.getLastAutoTable(),X=Z.scaleFactor(),oe=Z.pageNumber(),C=!1;if(O&&O.startPageNumber){var N=O.startPageNumber+O.pageNumber-1;C=N===oe}return typeof R=="number"?R:(R==null||R===!1)&&C&&(O==null?void 0:O.finalY)!=null?O.finalY+20/X:null}function B(Z,R,O){var X=R.head||[],oe=R.body||[],C=R.foot||[];if(R.html){var N=R.includeHiddenHtml;if(O){var q=(0,x.parseHtml)(Z,R.html,O,N,R.useCss)||{};X=q.head||X,oe=q.body||X,C=q.foot||X}else console.error("Cannot parse html in non browser environment")}var V=R.columns||K(X,oe,C);return{columns:V,head:X,body:oe,foot:C}}function K(Z,R,O){var X=Z[0]||R[0]||O[0]||[],oe=[];return Object.keys(X).filter(function(C){return C!=="_element"}).forEach(function(C){var N=1,q;Array.isArray(X)?q=X[parseInt(C)]:q=X[C],typeof q=="object"&&!Array.isArray(q)&&(N=(q==null?void 0:q.colSpan)||1);for(var V=0;V<N;V++){var he=void 0;Array.isArray(X)?he=oe.length:he=C+(V>0?"_".concat(V):"");var Y={dataKey:he};oe.push(Y)}}),oe}},792:function(u,d){Object.defineProperty(d,"__esModule",{value:!0});function y(b,w,m,P){for(var _=function(k){k&&typeof k!="object"&&console.error("The options parameter should be of type object, is: "+typeof k),typeof k.extendWidth<"u"&&(k.tableWidth=k.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof k.margins<"u"&&(typeof k.margin>"u"&&(k.margin=k.margins),console.error("Use of deprecated option: margins, use margin instead.")),k.startY&&typeof k.startY!="number"&&(console.error("Invalid value for startY option",k.startY),delete k.startY),!k.didDrawPage&&(k.afterPageContent||k.beforePageContent||k.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),k.didDrawPage=function(C){b.applyStyles(b.userStyles),k.beforePageContent&&k.beforePageContent(C),b.applyStyles(b.userStyles),k.afterPageContent&&k.afterPageContent(C),b.applyStyles(b.userStyles),k.afterPageAdd&&C.pageNumber>1&&C.afterPageAdd(C),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(C){k[C]&&console.error('The "'.concat(C,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(C){var N=C[0],q=C[1];k[q]&&(console.error("Use of deprecated option ".concat(q,". Use ").concat(N," instead")),k[N]=k[q])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(C){var N=typeof C=="string"?C:C[0],q=typeof C=="string"?C:C[1];typeof k[N]<"u"&&(typeof k.styles[q]>"u"&&(k.styles[q]=k[N]),console.error("Use of deprecated option: "+N+", use the style "+q+" instead."))});for(var B=0,K=["styles","bodyStyles","headStyles","footStyles"];B<K.length;B++){var Z=K[B];x(k[Z]||{})}for(var R=k.columnStyles||{},O=0,X=Object.keys(R);O<X.length;O++){var oe=X[O];x(R[oe]||{})}},E=0,L=[w,m,P];E<L.length;E++){var j=L[E];_(j)}}d.default=y;function x(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}},260:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.Column=d.Cell=d.Row=d.Table=void 0;var x=y(796),b=y(172),w=y(420),m=function(){function L(j,k){this.pageNumber=1,this.pageCount=1,this.id=j.id,this.settings=j.settings,this.styles=j.styles,this.hooks=j.hooks,this.columns=k.columns,this.head=k.head,this.body=k.body,this.foot=k.foot}return L.prototype.getHeadHeight=function(j){return this.head.reduce(function(k,B){return k+B.getMaxCellHeight(j)},0)},L.prototype.getFootHeight=function(j){return this.foot.reduce(function(k,B){return k+B.getMaxCellHeight(j)},0)},L.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},L.prototype.callCellHooks=function(j,k,B,K,Z,R){for(var O=0,X=k;O<X.length;O++){var oe=X[O],C=new b.CellHookData(j,this,B,K,Z,R),N=oe(C)===!1;if(B.text=Array.isArray(B.text)?B.text:[B.text],N)return!1}return!0},L.prototype.callEndPageHooks=function(j,k){j.applyStyles(j.userStyles);for(var B=0,K=this.hooks.didDrawPage;B<K.length;B++){var Z=K[B];Z(new b.HookData(j,this,k))}},L.prototype.callWillDrawPageHooks=function(j,k){for(var B=0,K=this.hooks.willDrawPage;B<K.length;B++){var Z=K[B];Z(new b.HookData(j,this,k))}},L.prototype.getWidth=function(j){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var k=this.columns.reduce(function(K,Z){return K+Z.wrappedWidth},0);return k}else{var B=this.settings.margin;return j-B.left-B.right}},L}();d.Table=m;var P=function(){function L(j,k,B,K,Z){Z===void 0&&(Z=!1),this.height=0,this.raw=j,j instanceof x.HtmlRowInput&&(this.raw=j._element,this.element=j._element),this.index=k,this.section=B,this.cells=K,this.spansMultiplePages=Z}return L.prototype.getMaxCellHeight=function(j){var k=this;return j.reduce(function(B,K){var Z;return Math.max(B,((Z=k.cells[K.index])===null||Z===void 0?void 0:Z.height)||0)},0)},L.prototype.hasRowSpan=function(j){var k=this;return j.filter(function(B){var K=k.cells[B.index];return K?K.rowSpan>1:!1}).length>0},L.prototype.canEntireRowFit=function(j,k){return this.getMaxCellHeight(k)<=j},L.prototype.getMinimumRowHeight=function(j,k){var B=this;return j.reduce(function(K,Z){var R=B.cells[Z.index];if(!R)return 0;var O=k.getLineHeight(R.styles.fontSize),X=R.padding("vertical"),oe=X+O;return oe>K?oe:K},0)},L}();d.Row=P;var _=function(){function L(j,k,B){var K,Z;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=k,this.section=B,this.raw=j;var R=j;j!=null&&typeof j=="object"&&!Array.isArray(j)?(this.rowSpan=j.rowSpan||1,this.colSpan=j.colSpan||1,R=(Z=(K=j.content)!==null&&K!==void 0?K:j.title)!==null&&Z!==void 0?Z:j,j._element&&(this.raw=j._element)):(this.rowSpan=1,this.colSpan=1);var O=R!=null?""+R:"",X=/\r\n|\r|\n/g;this.text=O.split(X)}return L.prototype.getTextPos=function(){var j;if(this.styles.valign==="top")j=this.y+this.padding("top");else if(this.styles.valign==="bottom")j=this.y+this.height-this.padding("bottom");else{var k=this.height-this.padding("vertical");j=this.y+k/2+this.padding("top")}var B;if(this.styles.halign==="right")B=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var K=this.width-this.padding("horizontal");B=this.x+K/2+this.padding("left")}else B=this.x+this.padding("left");return{x:B,y:j}},L.prototype.getContentHeight=function(j,k){k===void 0&&(k=1.15);var B=Array.isArray(this.text)?this.text.length:1,K=this.styles.fontSize/j*k,Z=B*K+this.padding("vertical");return Math.max(Z,this.styles.minCellHeight)},L.prototype.padding=function(j){var k=(0,w.parseSpacing)(this.styles.cellPadding,0);return j==="vertical"?k.top+k.bottom:j==="horizontal"?k.left+k.right:k[j]},L}();d.Cell=_;var E=function(){function L(j,k,B){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=j,this.raw=k,this.index=B}return L.prototype.getMaxCustomCellWidth=function(j){for(var k=0,B=0,K=j.allRows();B<K.length;B++){var Z=K[B],R=Z.cells[this.index];R&&typeof R.styles.cellWidth=="number"&&(k=Math.max(k,R.styles.cellWidth))}return k},L}();d.Column=E},356:function(u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.assign=void 0;function y(x,b,w,m,P){if(x==null)throw new TypeError("Cannot convert undefined or null to object");for(var _=Object(x),E=1;E<arguments.length;E++){var L=arguments[E];if(L!=null)for(var j in L)Object.prototype.hasOwnProperty.call(L,j)&&(_[j]=L[j])}return _}d.assign=y},972:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.createTable=void 0;var x=y(744),b=y(260),w=y(324),m=y(796),P=y(356);function _(Z,R){var O=new x.DocHandler(Z),X=E(R,O.scaleFactor()),oe=new b.Table(R,X);return(0,w.calculateWidths)(O,oe),O.applyStyles(O.userStyles),oe}d.createTable=_;function E(Z,R){var O=Z.content,X=B(O.columns);if(O.head.length===0){var oe=j(X,"head");oe&&O.head.push(oe)}if(O.foot.length===0){var oe=j(X,"foot");oe&&O.foot.push(oe)}var C=Z.settings.theme,N=Z.styles;return{columns:X,head:L("head",O.head,X,N,C,R),body:L("body",O.body,X,N,C,R),foot:L("foot",O.foot,X,N,C,R)}}function L(Z,R,O,X,oe,C){var N={},q=R.map(function(V,he){for(var Y=0,Q={},ne=0,ie=0,ge=0,Oe=O;ge<Oe.length;ge++){var I=Oe[ge];if(N[I.index]==null||N[I.index].left===0)if(ie===0){var D=void 0;Array.isArray(V)?D=V[I.index-ne-Y]:D=V[I.dataKey];var G={};typeof D=="object"&&!Array.isArray(D)&&(G=(D==null?void 0:D.styles)||{});var te=K(Z,I,he,oe,X,C,G),ae=new b.Cell(D,te,Z);Q[I.dataKey]=ae,Q[I.index]=ae,ie=ae.colSpan-1,N[I.index]={left:ae.rowSpan-1,times:ie}}else ie--,ne++;else N[I.index].left--,ie=N[I.index].times,Y++}return new b.Row(V,he,Z,Q)});return q}function j(Z,R){var O={};return Z.forEach(function(X){if(X.raw!=null){var oe=k(R,X.raw);oe!=null&&(O[X.dataKey]=oe)}}),Object.keys(O).length>0?O:null}function k(Z,R){if(Z==="head"){if(typeof R=="object")return R.header||R.title||null;if(typeof R=="string"||typeof R=="number")return R}else if(Z==="foot"&&typeof R=="object")return R.footer;return null}function B(Z){return Z.map(function(R,O){var X,oe,C;return typeof R=="object"?C=(oe=(X=R.dataKey)!==null&&X!==void 0?X:R.key)!==null&&oe!==void 0?oe:O:C=O,new b.Column(C,R,O)})}function K(Z,R,O,X,oe,C,N){var q=(0,m.getTheme)(X),V;Z==="head"?V=oe.headStyles:Z==="body"?V=oe.bodyStyles:Z==="foot"&&(V=oe.footStyles);var he=(0,P.assign)({},q.table,q[Z],oe.styles,V),Y=oe.columnStyles[R.dataKey]||oe.columnStyles[R.index]||{},Q=Z==="body"?Y:{},ne=Z==="body"&&O%2===0?(0,P.assign)({},q.alternateRow,oe.alternateRowStyles):{},ie=(0,m.defaultStyles)(C),ge=(0,P.assign)({},ie,he,ne,Q);return(0,P.assign)(ge,N)}},664:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.addPage=d.drawTable=void 0;var x=y(420),b=y(260),w=y(744),m=y(356),P=y(136),_=y(224);function E(Y,Q){var ne=Q.settings,ie=ne.startY,ge=ne.margin,Oe={x:ge.left,y:ie},I=Q.getHeadHeight(Q.columns)+Q.getFootHeight(Q.columns),D=ie+ge.bottom+I;if(ne.pageBreak==="avoid"){var G=Q.body,te=G.reduce(function(Pe,fe){return Pe+fe.height},0);D+=te}var ae=new w.DocHandler(Y);(ne.pageBreak==="always"||ne.startY!=null&&D>ae.pageSize().height)&&(he(ae),Oe.y=ge.top),Q.callWillDrawPageHooks(ae,Oe);var ye=(0,m.assign)({},Oe);Q.startPageNumber=ae.pageNumber(),ne.horizontalPageBreak?L(ae,Q,ye,Oe):(ae.applyStyles(ae.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&Q.head.forEach(function(Pe){return oe(ae,Q,Pe,Oe,Q.columns)}),ae.applyStyles(ae.userStyles),Q.body.forEach(function(Pe,fe){var Je=fe===Q.body.length-1;X(ae,Q,Pe,Je,ye,Oe,Q.columns)}),ae.applyStyles(ae.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&Q.foot.forEach(function(Pe){return oe(ae,Q,Pe,Oe,Q.columns)})),(0,x.addTableBorder)(ae,Q,ye,Oe),Q.callEndPageHooks(ae,Oe),Q.finalY=Oe.y,Y.lastAutoTable=Q,Y.previousAutoTable=Q,Y.autoTable&&(Y.autoTable.previous=Q),ae.applyStyles(ae.userStyles)}d.drawTable=E;function L(Y,Q,ne,ie){var ge=(0,_.calculateAllColumnsCanFitInPage)(Y,Q),Oe=Q.settings;if(Oe.horizontalPageBreakBehaviour==="afterAllRows")ge.forEach(function(te,ae){Y.applyStyles(Y.userStyles),ae>0?V(Y,Q,ne,ie,te.columns,!0):j(Y,Q,ie,te.columns),k(Y,Q,ne,ie,te.columns),K(Y,Q,ie,te.columns)});else for(var I=-1,D=ge[0],G=function(){var te=I;if(D){Y.applyStyles(Y.userStyles);var ae=D.columns;I>=0?V(Y,Q,ne,ie,ae,!0):j(Y,Q,ie,ae),te=B(Y,Q,I+1,ie,ae),K(Y,Q,ie,ae)}var ye=te-I;ge.slice(1).forEach(function(Pe){Y.applyStyles(Y.userStyles),V(Y,Q,ne,ie,Pe.columns,!0),B(Y,Q,I+1,ie,Pe.columns,ye),K(Y,Q,ie,Pe.columns)}),I=te};I<Q.body.length-1;)G()}function j(Y,Q,ne,ie){var ge=Q.settings;Y.applyStyles(Y.userStyles),(ge.showHead==="firstPage"||ge.showHead==="everyPage")&&Q.head.forEach(function(Oe){return oe(Y,Q,Oe,ne,ie)})}function k(Y,Q,ne,ie,ge){Y.applyStyles(Y.userStyles),Q.body.forEach(function(Oe,I){var D=I===Q.body.length-1;X(Y,Q,Oe,D,ne,ie,ge)})}function B(Y,Q,ne,ie,ge,Oe){Y.applyStyles(Y.userStyles),Oe=Oe??Q.body.length;var I=Math.min(ne+Oe,Q.body.length),D=-1;return Q.body.slice(ne,I).forEach(function(G,te){var ae=ne+te===Q.body.length-1,ye=q(Y,Q,ae,ie);G.canEntireRowFit(ye,ge)&&(oe(Y,Q,G,ie,ge),D=ne+te)}),D}function K(Y,Q,ne,ie){var ge=Q.settings;Y.applyStyles(Y.userStyles),(ge.showFoot==="lastPage"||ge.showFoot==="everyPage")&&Q.foot.forEach(function(Oe){return oe(Y,Q,Oe,ne,ie)})}function Z(Y,Q,ne){var ie=ne.getLineHeight(Y.styles.fontSize),ge=Y.padding("vertical"),Oe=Math.floor((Q-ge)/ie);return Math.max(0,Oe)}function R(Y,Q,ne,ie){var ge={};Y.spansMultiplePages=!0,Y.height=0;for(var Oe=0,I=0,D=ne.columns;I<D.length;I++){var G=D[I],te=Y.cells[G.index];if(te){Array.isArray(te.text)||(te.text=[te.text]);var ae=new b.Cell(te.raw,te.styles,te.section);ae=(0,m.assign)(ae,te),ae.text=[];var ye=Z(te,Q,ie);te.text.length>ye&&(ae.text=te.text.splice(ye,te.text.length));var Pe=ie.scaleFactor(),fe=ie.getLineHeightFactor();te.contentHeight=te.getContentHeight(Pe,fe),te.contentHeight>=Q&&(te.contentHeight=Q,ae.styles.minCellHeight-=Q),te.contentHeight>Y.height&&(Y.height=te.contentHeight),ae.contentHeight=ae.getContentHeight(Pe,fe),ae.contentHeight>Oe&&(Oe=ae.contentHeight),ge[G.index]=ae}}var Je=new b.Row(Y.raw,-1,Y.section,ge,!0);Je.height=Oe;for(var et=0,Ve=ne.columns;et<Ve.length;et++){var G=Ve[et],ae=Je.cells[G.index];ae&&(ae.height=Je.height);var te=Y.cells[G.index];te&&(te.height=Y.height)}return Je}function O(Y,Q,ne,ie){var ge=Y.pageSize().height,Oe=ie.settings.margin,I=Oe.top+Oe.bottom,D=ge-I;Q.section==="body"&&(D-=ie.getHeadHeight(ie.columns)+ie.getFootHeight(ie.columns));var G=Q.getMinimumRowHeight(ie.columns,Y),te=G<ne;if(G>D)return console.error("Will not be able to print row ".concat(Q.index," correctly since it's minimum height is larger than page height")),!0;if(!te)return!1;var ae=Q.hasRowSpan(ie.columns),ye=Q.getMaxCellHeight(ie.columns)>D;return ye?(ae&&console.error("The content of row ".concat(Q.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ae||ie.settings.rowPageBreak==="avoid")}function X(Y,Q,ne,ie,ge,Oe,I){var D=q(Y,Q,ie,Oe);if(ne.canEntireRowFit(D,I))oe(Y,Q,ne,Oe,I);else if(O(Y,ne,D,Q)){var G=R(ne,D,Q,Y);oe(Y,Q,ne,Oe,I),V(Y,Q,ge,Oe,I),X(Y,Q,G,ie,ge,Oe,I)}else V(Y,Q,ge,Oe,I),X(Y,Q,ne,ie,ge,Oe,I)}function oe(Y,Q,ne,ie,ge){ie.x=Q.settings.margin.left;for(var Oe=0,I=ge;Oe<I.length;Oe++){var D=I[Oe],G=ne.cells[D.index];if(!G){ie.x+=D.width;continue}Y.applyStyles(G.styles),G.x=ie.x,G.y=ie.y;var te=Q.callCellHooks(Y,Q.hooks.willDrawCell,G,ne,D,ie);if(te===!1){ie.x+=D.width;continue}C(Y,G,ie);var ae=G.getTextPos();(0,P.default)(G.text,ae.x,ae.y,{halign:G.styles.halign,valign:G.styles.valign,maxWidth:Math.ceil(G.width-G.padding("left")-G.padding("right"))},Y.getDocument()),Q.callCellHooks(Y,Q.hooks.didDrawCell,G,ne,D,ie),ie.x+=D.width}ie.y+=ne.height}function C(Y,Q,ne){var ie=Q.styles;if(Y.getDocument().setFillColor(Y.getDocument().getFillColor()),typeof ie.lineWidth=="number"){var ge=(0,x.getFillStyle)(ie.lineWidth,ie.fillColor);ge&&Y.rect(Q.x,ne.y,Q.width,Q.height,ge)}else typeof ie.lineWidth=="object"&&(ie.fillColor&&Y.rect(Q.x,ne.y,Q.width,Q.height,"F"),N(Y,Q,ne,ie.lineWidth))}function N(Y,Q,ne,ie){var ge,Oe,I,D;ie.top&&(ge=ne.x,Oe=ne.y,I=ne.x+Q.width,D=ne.y,ie.right&&(I+=.5*ie.right),ie.left&&(ge-=.5*ie.left),G(ie.top,ge,Oe,I,D)),ie.bottom&&(ge=ne.x,Oe=ne.y+Q.height,I=ne.x+Q.width,D=ne.y+Q.height,ie.right&&(I+=.5*ie.right),ie.left&&(ge-=.5*ie.left),G(ie.bottom,ge,Oe,I,D)),ie.left&&(ge=ne.x,Oe=ne.y,I=ne.x,D=ne.y+Q.height,ie.top&&(Oe-=.5*ie.top),ie.bottom&&(D+=.5*ie.bottom),G(ie.left,ge,Oe,I,D)),ie.right&&(ge=ne.x+Q.width,Oe=ne.y,I=ne.x+Q.width,D=ne.y+Q.height,ie.top&&(Oe-=.5*ie.top),ie.bottom&&(D+=.5*ie.bottom),G(ie.right,ge,Oe,I,D));function G(te,ae,ye,Pe,fe){Y.getDocument().setLineWidth(te),Y.getDocument().line(ae,ye,Pe,fe,"S")}}function q(Y,Q,ne,ie){var ge=Q.settings.margin.bottom,Oe=Q.settings.showFoot;return(Oe==="everyPage"||Oe==="lastPage"&&ne)&&(ge+=Q.getFootHeight(Q.columns)),Y.pageSize().height-ie.y-ge}function V(Y,Q,ne,ie,ge,Oe){ge===void 0&&(ge=[]),Oe===void 0&&(Oe=!1),Y.applyStyles(Y.userStyles),Q.settings.showFoot==="everyPage"&&!Oe&&Q.foot.forEach(function(D){return oe(Y,Q,D,ie,ge)}),Q.callEndPageHooks(Y,ie);var I=Q.settings.margin;(0,x.addTableBorder)(Y,Q,ne,ie),he(Y),Q.pageNumber++,Q.pageCount++,ie.x=I.left,ie.y=I.top,ne.y=I.top,Q.callWillDrawPageHooks(Y,ie),Q.settings.showHead==="everyPage"&&(Q.head.forEach(function(D){return oe(Y,Q,D,ie,ge)}),Y.applyStyles(Y.userStyles))}d.addPage=V;function he(Y){var Q=Y.pageNumber();Y.setPage(Q+1);var ne=Y.pageNumber();return ne===Q?(Y.addPage(),!0):!1}},224:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.calculateAllColumnsCanFitInPage=void 0;var x=y(420);function b(m,P,_){var E;_===void 0&&(_={});var L=(0,x.getPageAvailableWidth)(m,P),j=new Map,k=[],B=[],K=[];P.settings.horizontalPageBreakRepeat,Array.isArray(P.settings.horizontalPageBreakRepeat)?K=P.settings.horizontalPageBreakRepeat:(typeof P.settings.horizontalPageBreakRepeat=="string"||typeof P.settings.horizontalPageBreakRepeat=="number")&&(K=[P.settings.horizontalPageBreakRepeat]),K.forEach(function(X){var oe=P.columns.find(function(C){return C.dataKey===X||C.index===X});oe&&!j.has(oe.index)&&(j.set(oe.index,!0),k.push(oe.index),B.push(P.columns[oe.index]),L-=oe.wrappedWidth)});for(var Z=!0,R=(E=_==null?void 0:_.start)!==null&&E!==void 0?E:0;R<P.columns.length;){if(j.has(R)){R++;continue}var O=P.columns[R].wrappedWidth;if(Z||L>=O)Z=!1,k.push(R),B.push(P.columns[R]),L-=O;else break;R++}return{colIndexes:k,columns:B,lastIndex:R-1}}function w(m,P){for(var _=[],E=0;E<P.columns.length;E++){var L=b(m,P,{start:E});L.columns.length&&(_.push(L),E=L.lastIndex)}return _}d.calculateAllColumnsCanFitInPage=w},324:function(u,d,y){Object.defineProperty(d,"__esModule",{value:!0}),d.ellipsize=d.resizeColumns=d.calculateWidths=void 0;var x=y(420);function b(k,B){w(k,B);var K=[],Z=0;B.columns.forEach(function(O){var X=O.getMaxCustomCellWidth(B);X?O.width=X:(O.width=O.wrappedWidth,K.push(O)),Z+=O.width});var R=B.getWidth(k.pageSize().width)-Z;R&&(R=m(K,R,function(O){return Math.max(O.minReadableWidth,O.minWidth)})),R&&(R=m(K,R,function(O){return O.minWidth})),R=Math.abs(R),!B.settings.horizontalPageBreak&&R>.1/k.scaleFactor()&&(R=R<1?R:Math.round(R),console.warn("Of the table content, ".concat(R," units width could not fit page"))),_(B),E(B,k),P(B)}d.calculateWidths=b;function w(k,B){var K=k.scaleFactor(),Z=B.settings.horizontalPageBreak,R=(0,x.getPageAvailableWidth)(k,B);B.allRows().forEach(function(O){for(var X=0,oe=B.columns;X<oe.length;X++){var C=oe[X],N=O.cells[C.index];if(N){var q=B.hooks.didParseCell;B.callCellHooks(k,q,N,O,C,null);var V=N.padding("horizontal");N.contentWidth=(0,x.getStringWidth)(N.text,N.styles,k)+V;var he=(0,x.getStringWidth)(N.text.join(" ").split(/[^\S\u00A0]+/),N.styles,k);if(N.minReadableWidth=he+N.padding("horizontal"),typeof N.styles.cellWidth=="number")N.minWidth=N.styles.cellWidth,N.wrappedWidth=N.styles.cellWidth;else if(N.styles.cellWidth==="wrap"||Z===!0)N.contentWidth>R?(N.minWidth=R,N.wrappedWidth=R):(N.minWidth=N.contentWidth,N.wrappedWidth=N.contentWidth);else{var Y=10/K;N.minWidth=N.styles.minCellWidth||Y,N.wrappedWidth=N.contentWidth,N.minWidth>N.wrappedWidth&&(N.wrappedWidth=N.minWidth)}}}}),B.allRows().forEach(function(O){for(var X=0,oe=B.columns;X<oe.length;X++){var C=oe[X],N=O.cells[C.index];if(N&&N.colSpan===1)C.wrappedWidth=Math.max(C.wrappedWidth,N.wrappedWidth),C.minWidth=Math.max(C.minWidth,N.minWidth),C.minReadableWidth=Math.max(C.minReadableWidth,N.minReadableWidth);else{var q=B.styles.columnStyles[C.dataKey]||B.styles.columnStyles[C.index]||{},V=q.cellWidth||q.minCellWidth;V&&typeof V=="number"&&(C.minWidth=V,C.wrappedWidth=V)}N&&(N.colSpan>1&&!C.minWidth&&(C.minWidth=N.minWidth),N.colSpan>1&&!C.wrappedWidth&&(C.wrappedWidth=N.minWidth))}})}function m(k,B,K){for(var Z=B,R=k.reduce(function(Y,Q){return Y+Q.wrappedWidth},0),O=0;O<k.length;O++){var X=k[O],oe=X.wrappedWidth/R,C=Z*oe,N=X.width+C,q=K(X),V=N<q?q:N;B-=V-X.width,X.width=V}if(B=Math.round(B*1e10)/1e10,B){var he=k.filter(function(Y){return B<0?Y.width>K(Y):!0});he.length&&(B=m(he,B,K))}return B}d.resizeColumns=m;function P(k){for(var B={},K=1,Z=k.allRows(),R=0;R<Z.length;R++)for(var O=Z[R],X=0,oe=k.columns;X<oe.length;X++){var C=oe[X],N=B[C.index];if(K>1)K--,delete O.cells[C.index];else if(N)N.cell.height+=O.height,K=N.cell.colSpan,delete O.cells[C.index],N.left--,N.left<=1&&delete B[C.index];else{var q=O.cells[C.index];if(!q)continue;if(q.height=O.height,q.rowSpan>1){var V=Z.length-R,he=q.rowSpan>V?V:q.rowSpan;B[C.index]={cell:q,left:he,row:O}}}}}function _(k){for(var B=k.allRows(),K=0;K<B.length;K++)for(var Z=B[K],R=null,O=0,X=0,oe=0;oe<k.columns.length;oe++){var C=k.columns[oe];if(X-=1,X>1&&k.columns[oe+1])O+=C.width,delete Z.cells[C.index];else if(R){var N=R;delete Z.cells[C.index],R=null,N.width=C.width+O}else{var N=Z.cells[C.index];if(!N)continue;if(X=N.colSpan,O=0,N.colSpan>1){R=N,O+=C.width;continue}N.width=C.width+O}}}function E(k,B){for(var K={count:0,height:0},Z=0,R=k.allRows();Z<R.length;Z++){for(var O=R[Z],X=0,oe=k.columns;X<oe.length;X++){var C=oe[X],N=O.cells[C.index];if(N){B.applyStyles(N.styles,!0);var q=N.width-N.padding("horizontal");if(N.styles.overflow==="linebreak")N.text=B.splitTextToSize(N.text,q+1/B.scaleFactor(),{fontSize:N.styles.fontSize});else if(N.styles.overflow==="ellipsize")N.text=L(N.text,q,N.styles,B,"...");else if(N.styles.overflow==="hidden")N.text=L(N.text,q,N.styles,B,"");else if(typeof N.styles.overflow=="function"){var V=N.styles.overflow(N.text,q);typeof V=="string"?N.text=[V]:N.text=V}N.contentHeight=N.getContentHeight(B.scaleFactor(),B.getLineHeightFactor());var he=N.contentHeight/N.rowSpan;N.rowSpan>1&&K.count*K.height<he*N.rowSpan?K={height:he,count:N.rowSpan}:K&&K.count>0&&K.height>he&&(he=K.height),he>O.height&&(O.height=he)}}K.count--}}function L(k,B,K,Z,R){return k.map(function(O){return j(O,B,K,Z,R)})}d.ellipsize=L;function j(k,B,K,Z,R){var O=1e4*Z.scaleFactor();if(B=Math.ceil(B*O)/O,B>=(0,x.getStringWidth)(k,K,Z))return k;for(;B<(0,x.getStringWidth)(k+R,K,Z)&&!(k.length<=1);)k=k.substring(0,k.length-1);return k.trim()+R}},964:function(u){if(typeof t>"u"){var d=new Error("Cannot find module 'undefined'");throw d.code="MODULE_NOT_FOUND",d}u.exports=t}},a={};function i(u){var d=a[u];if(d!==void 0)return d.exports;var y=a[u]={exports:{}};return r[u].call(y.exports,y,y.exports,i),y.exports}var c={};return function(){var u=c;Object.defineProperty(u,"__esModule",{value:!0}),u.Cell=u.Column=u.Row=u.Table=u.CellHookData=u.__drawTable=u.__createTable=u.applyPlugin=void 0;var d=i(340),y=i(776),x=i(664),b=i(972),w=i(260);Object.defineProperty(u,"Table",{enumerable:!0,get:function(){return w.Table}});var m=i(172);Object.defineProperty(u,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var P=i(260);Object.defineProperty(u,"Cell",{enumerable:!0,get:function(){return P.Cell}}),Object.defineProperty(u,"Column",{enumerable:!0,get:function(){return P.Column}}),Object.defineProperty(u,"Row",{enumerable:!0,get:function(){return P.Row}});function _(B){(0,d.default)(B)}u.applyPlugin=_;function E(B,K){var Z=(0,y.parseInput)(B,K),R=(0,b.createTable)(B,Z);(0,x.drawTable)(B,R)}function L(B,K){var Z=(0,y.parseInput)(B,K);return(0,b.createTable)(B,Z)}u.__createTable=L;function j(B,K){(0,x.drawTable)(B,K)}u.__drawTable=j;try{var k=i(964);k.jsPDF&&(k=k.jsPDF),_(k)}catch{}u.default=E}(),c}()})})(ah);var y0=ah.exports;const Nc=Sc(y0),v0=n=>{const e=new Ot("portrait","mm","a4"),t=210,r=297,a=15,i=t-2*a,c=[59,130,246],u=[107,114,128];let d=20;e.setFillColor(c[0],c[1],c[2]),e.rect(0,0,t,35,"F"),e.setTextColor(255,255,255),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Sales Report",a,20),e.setFontSize(10),e.setFont("helvetica","normal");const y=`${_r(n.dateRange.start,"MMM dd, yyyy")} - ${_r(n.dateRange.end,"MMM dd, yyyy")}`;e.text(y,a,28),e.setFontSize(8),e.text(`Generated: ${_r(new Date,"MMM dd, yyyy hh:mm a")}`,t-60,28),d=45,e.setTextColor(0,0,0),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Executive Summary",a,d),d+=10;const x=[["Total Sales",`PHP ${n.totalSales.toFixed(2)}`],["Total Transactions",n.totalTransactions.toString()],["Total Inventory Cost",`PHP ${n.totalInventoryCost.toFixed(2)}`],["Total Profit",`PHP ${n.totalProfit.toFixed(2)}`]];if(Nc(e,{startY:d,head:[["Metric","Value"]],body:x,theme:"grid",headStyles:{fillColor:c,textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{fontSize:9,cellPadding:4,halign:"center"},columnStyles:{0:{cellWidth:i*.65,halign:"center",fontStyle:"normal"},1:{cellWidth:i*.35,halign:"center",fontStyle:"bold"}},margin:{left:a,right:a},tableWidth:i,styles:{cellPadding:4,valign:"middle",halign:"center"}}),d=e.lastAutoTable.finalY+15,d>r-60&&(e.addPage(),d=20),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Recent Transactions",a,d),d+=10,n.transactions.length>0){const m=n.transactions.slice(0,15).map(P=>{var _,E,L,j;return[`#${P.transactionNumber.slice(-4)}`,_r(P.createdAt,"MM/dd hh:mm a"),P.items.length.toString(),P.paymentMethod.charAt(0).toUpperCase(),`PHP ${P.total.toFixed(0)}`,`${((E=(_=P.cashier)==null?void 0:_.firstName)==null?void 0:E[0])||""}${((j=(L=P.cashier)==null?void 0:L.lastName)==null?void 0:j[0])||""}`]});Nc(e,{startY:d,head:[["ID","Date/Time","Items","Pay","Total","By"]],body:m,theme:"striped",headStyles:{fillColor:c,textColor:255,fontSize:10,fontStyle:"bold",halign:"center",valign:"middle",cellPadding:6},bodyStyles:{fontSize:9,halign:"center",valign:"middle",cellPadding:5},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:i*.15,halign:"center"},1:{cellWidth:i*.25,halign:"center"},2:{cellWidth:i*.12,halign:"center"},3:{cellWidth:i*.12,halign:"center"},4:{cellWidth:i*.18,halign:"center"},5:{cellWidth:i*.18,halign:"center"}},margin:{left:a,right:a},tableWidth:i,styles:{halign:"center",valign:"middle",lineColor:[229,229,229],lineWidth:.5}})}const b=e.getNumberOfPages();for(let m=1;m<=b;m++)e.setPage(m),e.setFontSize(7),e.setTextColor(u[0],u[1],u[2]),e.text(`Page ${m} of ${b}`,t-25,r-10),e.text("Generated by POS System",a,r-10);const w=`sales-report-${_r(n.dateRange.start,"yyyy-MM-dd")}-to-${_r(n.dateRange.end,"yyyy-MM-dd")}.pdf`;e.save(w)},b0=(n,e)=>{const t=new Ot("portrait","mm","a4"),r=210,a=297,i=15,c=r-2*i;t.setFillColor(59,130,246),t.rect(0,0,r,35,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Detailed Transaction Report",i,20),t.setFontSize(10),t.setFont("helvetica","normal");const u=`${_r(e.start,"MMM dd, yyyy")} - ${_r(e.end,"MMM dd, yyyy")}`;t.text(u,i,28);let d=45;if(n.length===0)t.setTextColor(0,0,0),t.setFontSize(12),t.text("No transactions found for the selected period.",i,d);else{const b=n.reduce((m,P)=>m+P.total,0);t.setTextColor(0,0,0),t.setFontSize(12),t.text(`Total Transactions: ${n.length}`,i,d),t.text(`Total Amount: PHP ${b.toFixed(2)}`,i,d+10),d+=25,n.slice(0,50).forEach(m=>{var P,_;if(d>a-70&&(t.addPage(),d=20),t.setFontSize(11),t.setFont("helvetica","bold"),t.text(`#${m.transactionNumber}`,i,d),t.setFont("helvetica","normal"),t.setFontSize(9),t.text(`${_r(m.createdAt,"MMM dd, yyyy hh:mm a")}`,i,d+8),t.text(`${((P=m.cashier)==null?void 0:P.firstName)||""} ${((_=m.cashier)==null?void 0:_.lastName)||""}`,i+50,d+8),t.text(`${m.paymentMethod}`,i+100,d+8),t.text(`PHP ${m.total.toFixed(2)}`,i+130,d+8),d+=18,m.items.length>0){const E=m.items.map(L=>{var j,k;return[((k=(j=L.product)==null?void 0:j.name)==null?void 0:k.substring(0,30))||"Unknown Product",L.quantity.toString(),`PHP ${L.unitPrice.toFixed(2)}`,`PHP ${L.totalPrice.toFixed(2)}`]});Nc(t,{startY:d,head:[["Product","Qty","Price","Total"]],body:E,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:255,fontSize:8,halign:"center"},bodyStyles:{fontSize:7,halign:"center"},columnStyles:{0:{cellWidth:c*.5,halign:"center"},1:{cellWidth:c*.15,halign:"center"},2:{cellWidth:c*.175,halign:"center"},3:{cellWidth:c*.175,halign:"center"}},margin:{left:i,right:i},tableWidth:c,styles:{halign:"center"}}),d=t.lastAutoTable.finalY+8}t.setDrawColor(200,200,200),t.line(i,d,r-i,d),d+=8}),n.length>50&&(d>a-30&&(t.addPage(),d=20),t.setFontSize(9),t.setTextColor(107,114,128),t.text(`Note: Report limited to first 50 transactions. Total transactions in period: ${n.length}`,i,d))}const y=t.getNumberOfPages();for(let b=1;b<=y;b++)t.setPage(b),t.setFontSize(7),t.setTextColor(107,114,128),t.text(`Page ${b} of ${y}`,r-25,a-10),t.text("Generated by POS System",i,a-10);const x=`detailed-transactions-${_r(e.start,"yyyy-MM-dd")}-to-${_r(e.end,"yyyy-MM-dd")}.pdf`;t.save(x)},x0=()=>{var oe,C;const{transactions:n,products:e}=Fn(),[t,r]=ft.useState("today"),[a,i]=ft.useState(_r(new Date,"yyyy-MM-dd")),[c,u]=ft.useState(_r(new Date,"yyyy-MM-dd")),[d,y]=ft.useState(null),[x,b]=ft.useState(!1),w=()=>{const N=new Date;switch(t){case"today":return{start:hu(N),end:fu(N)};case"week":return{start:xf(N),end:wf(N)};case"month":return{start:vf(N),end:bf(N)};case"custom":return{start:new Date(a),end:new Date(c)};default:return{start:hu(N),end:fu(N)}}},{start:m,end:P}=w(),_=n.filter(N=>N.createdAt>=m&&N.createdAt<=P&&N.type==="sale"&&N.status==="completed"),E=_.reduce((N,q)=>N+q.total,0),L=_.length,j=(e==null?void 0:e.reduce((N,q)=>N+q.cost*q.quantity,0))||0,k=_.reduce((N,q)=>{const V=q.items.reduce((he,Y)=>{var ne;const Q=(Y.unitPrice-(((ne=Y.product)==null?void 0:ne.cost)||0))*Y.quantity;return he+Q},0);return N+V},0),B=()=>{const q=[["Transaction ID","Date","Time","Total","Payment Method","Items Count"],..._.map(Q=>[Q.transactionNumber,_r(Q.createdAt,"yyyy-MM-dd"),_r(Q.createdAt,"hh:mm:ss a"),Q.total.toFixed(2),Q.paymentMethod,Q.items.length.toString()])].map(Q=>Q.join(",")).join(`
`),V=new Blob([q],{type:"text/csv"}),he=window.URL.createObjectURL(V),Y=document.createElement("a");Y.href=he,Y.download=`sales-report-${_r(m,"yyyy-MM-dd")}-to-${_r(P,"yyyy-MM-dd")}.csv`,Y.click(),window.URL.revokeObjectURL(he)},K=()=>{v0({transactions:_,dateRange:{start:m,end:P},totalSales:E,totalTransactions:L,totalInventoryCost:j,totalProfit:k})},Z=()=>{b0(_,{start:m,end:P})},R=[{title:"Total Sales",value:Gt(E),icon:ld,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:L.toString(),icon:Ga,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Inventory Cost",value:Gt(j),icon:cd,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Total Profit",value:Gt(k),icon:ud,color:"text-purple-600",bgColor:"bg-purple-100"}],O=N=>{y(N),b(!0)},X=()=>{y(null),b(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Reports"}),s.jsx("p",{className:"text-gray-500",children:"Analyze your sales performance and trends"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:B,className:"btn btn-outline",disabled:_.length===0,children:[s.jsx(al,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsxs("button",{onClick:K,className:"btn btn-primary",disabled:_.length===0,children:[s.jsx(pf,{className:"h-4 w-4 mr-2"}),"Summary PDF"]}),s.jsxs("button",{onClick:Z,className:"btn btn-secondary",disabled:_.length===0,children:[s.jsx(cu,{className:"h-4 w-4 mr-2"}),"Detailed PDF"]})]})]}),s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[s.jsx("div",{className:"flex space-x-2",children:[{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"month",label:"This Month"},{key:"custom",label:"Custom"}].map(N=>s.jsx("button",{onClick:()=>r(N.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===N.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N.label},N.key))}),t==="custom"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"date",value:a,onChange:N=>i(N.target.value),className:"input text-sm"}),s.jsx("span",{className:"text-gray-500 self-center",children:"to"}),s.jsx("input",{type:"date",value:c,onChange:N=>u(N.target.value),className:"input text-sm"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:R.map(N=>{const q=N.icon;return s.jsx("div",{className:"card",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg ${N.bgColor}`,children:s.jsx(q,{className:`h-6 w-6 ${N.color}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:N.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.value})]})]})},N.title)})}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Transactions"}),_.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Transaction ID"}),s.jsx("th",{children:"Date & Time"}),s.jsx("th",{children:"Items"}),s.jsx("th",{children:"Payment"}),s.jsx("th",{children:"Total"}),s.jsx("th",{children:"Cashier"})]})}),s.jsx("tbody",{children:_.slice(0,10).map(N=>{var q,V;return s.jsxs("tr",{onClick:()=>O(N),className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",children:[s.jsx("td",{children:s.jsxs("span",{className:"font-mono text-sm",children:["#",N.transactionNumber]})}),s.jsx("td",{children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:_r(N.createdAt,"MMM dd, yyyy")}),s.jsx("div",{className:"text-sm text-gray-500",children:_r(N.createdAt,"hh:mm:ss a")})]})}),s.jsx("td",{children:s.jsxs("span",{className:"text-sm",children:[N.items.length," items"]})}),s.jsx("td",{children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 capitalize",children:N.paymentMethod})}),s.jsx("td",{children:s.jsxs("span",{className:"font-medium",children:["",N.total.toFixed(2)]})}),s.jsx("td",{children:s.jsxs("span",{className:"text-sm text-gray-900",children:[(q=N.cashier)==null?void 0:q.firstName," ",(V=N.cashier)==null?void 0:V.lastName]})})]},N.id)})})]})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(cu,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions found for this period"})]})]}),x&&d&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vs,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),s.jsx("button",{onClick:X,className:"text-gray-400 hover:text-gray-600",children:s.jsx(wa,{className:"h-6 w-6"})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vs,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),s.jsxs("p",{className:"font-medium",children:["#",d.transactionNumber]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ac,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),s.jsx("p",{className:"font-medium",children:_r(d.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(jc,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),s.jsxs("p",{className:"font-medium",children:[(oe=d.cashier)==null?void 0:oe.firstName," ",(C=d.cashier)==null?void 0:C.lastName]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(dd,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),s.jsx("p",{className:"font-medium capitalize",children:d.paymentMethod})]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),s.jsx("div",{className:"space-y-2",children:d.items.map(N=>{var q;return s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900",children:((q=N.product)==null?void 0:q.name)||"Unknown Product"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[Gt(N.unitPrice),"  ",N.quantity]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"font-medium text-gray-900",children:Gt(N.totalPrice)})})]},N.id)})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{children:Gt(d.subtotal)})]}),d.discount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[s.jsx("span",{children:"Discount:"}),s.jsxs("span",{children:["-",Gt(d.discount)]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-2",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Gt(d.total)})]})}),d.paymentMethod==="cash"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Cash Received:"}),s.jsx("span",{children:Gt(d.paymentAmount)})]}),d.changeAmount>0&&s.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[s.jsx("span",{children:"Change Given:"}),s.jsx("span",{children:Gt(d.changeAmount)})]})]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${d.status==="completed"?"bg-green-100 text-green-800":d.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status.charAt(0).toUpperCase()+d.status.slice(1)})}),s.jsxs("p",{className:"text-sm text-gray-500",children:[d.items.length," item",d.items.length!==1?"s":""]})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:X,className:"btn btn-outline",children:"Close"})})})]})})]})},w0=()=>{var N;const{users:n,addUser:e,updateUserData:t,deleteUser:r,auth:a}=Fn(),[i,c]=ft.useState(!1),[u,d]=ft.useState(null),[y,x]=ft.useState(!1),[b,w]=ft.useState(!1),[m,P]=ft.useState(""),{register:_,handleSubmit:E,reset:L,watch:j,setValue:k,formState:{errors:B}}=No(),K=j("password");if(((N=a.user)==null?void 0:N.role)!=="admin")return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ks,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage users."})]})});const Z=q=>{q?(d(q),L({username:q.username,email:q.email,firstName:q.firstName,lastName:q.lastName,role:q.role,isActive:q.isActive,password:"",confirmPassword:""})):(d(null),L({username:"",email:"",firstName:"",lastName:"",role:"cashier",isActive:!0,password:"",confirmPassword:""})),P(""),c(!0)},R=()=>{c(!1),d(null),P(""),x(!1),w(!1),L()},O=()=>{const q=cm(10);P(q),k("password",q),k("confirmPassword",q)},X=q=>{if(q.password!==q.confirmPassword){alert("Passwords do not match!");return}if(!u||q.password){const V=um(q.password);if(!V.isValid){alert(`Password requirements:
`+V.errors.join(`
`));return}}if(u){const V={username:q.username,email:q.email,firstName:q.firstName,lastName:q.lastName,role:q.role,isActive:q.isActive,updatedAt:new Date};q.password&&(V.password=Va(q.password)),t(u.id,V)}else{const V={id:Date.now().toString(),username:q.username,email:q.email,password:Va(q.password),firstName:q.firstName,lastName:q.lastName,role:q.role,isActive:q.isActive,createdAt:new Date,updatedAt:new Date};e(V)}R()},oe=q=>{var V;if(q.id===((V=a.user)==null?void 0:V.id)){alert("You cannot delete your own account.");return}window.confirm(`Are you sure you want to delete user "${q.username}"?`)&&r(q.id)},C=q=>{switch(q){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"cashier":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-500",children:"Manage employee accounts and permissions"})]}),s.jsxs("button",{onClick:()=>Z(),className:"btn btn-primary",children:[s.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Created Date"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:n.map(q=>{var V;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-3",children:s.jsx(rc,{className:"h-5 w-5 text-gray-400"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[q.firstName," ",q.lastName]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["@",q.username]})]})]})}),s.jsx("td",{children:s.jsx("span",{className:"text-sm text-gray-900",children:q.email})}),s.jsx("td",{children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${C(q.role)}`,children:q.role})}),s.jsx("td",{children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${q.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:q.isActive?"Active":"Inactive"})}),s.jsx("td",{children:s.jsx("span",{className:"text-sm text-gray-500",children:new Date(q.createdAt).toLocaleDateString()})}),s.jsx("td",{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>Z(q),className:"p-1 text-blue-600 hover:text-blue-800",children:s.jsx(uo,{className:"h-4 w-4"})}),q.id!==((V=a.user)==null?void 0:V.id)&&s.jsx("button",{onClick:()=>oe(q),className:"p-1 text-red-600 hover:text-red-800",children:s.jsx(il,{className:"h-4 w-4"})})]})})]},q.id)})})]}),n.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(rc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No users found"})]})]})}),i&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit User":"Add New User"}),s.jsxs("form",{onSubmit:E(X),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),s.jsx("input",{..._("firstName",{required:"First name is required"}),className:"input",placeholder:"Enter first name"}),B.firstName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.firstName.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),s.jsx("input",{..._("lastName",{required:"Last name is required"}),className:"input",placeholder:"Enter last name"}),B.lastName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.lastName.message})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),s.jsx("input",{..._("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),className:"input",placeholder:"Enter username"}),B.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.username.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{..._("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),type:"email",className:"input",placeholder:"Enter email address"}),B.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.email.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",u?"(leave blank to keep current)":"*"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{..._("password",u?{}:{required:"Password is required for new users"}),type:y?"text":"password",className:"input pr-20",placeholder:u?"Enter new password (optional)":"Enter password"}),s.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[s.jsx("button",{type:"button",onClick:O,className:"p-2 text-blue-600 hover:text-blue-800 mr-1",title:"Generate random password",children:s.jsx(xs,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",onClick:()=>x(!y),className:"p-2 text-gray-500 hover:text-gray-700",children:y?s.jsx(nc,{className:"h-4 w-4"}):s.jsx(ic,{className:"h-4 w-4"})})]})]}),B.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.password.message}),m&&s.jsxs("p",{className:"mt-1 text-sm text-green-600",children:["Generated password: ",s.jsx("span",{className:"font-mono font-bold",children:m}),s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Make sure to save this password!"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Password ",u?"(if changing password)":"*"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{..._("confirmPassword",u?{}:{required:"Please confirm the password"}),type:b?"text":"password",className:"input pr-10",placeholder:"Confirm password"}),s.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:b?s.jsx(nc,{className:"h-4 w-4"}):s.jsx(ic,{className:"h-4 w-4"})})]}),B.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.confirmPassword.message}),K&&j("confirmPassword")&&K!==j("confirmPassword")&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Passwords do not match"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),s.jsxs("select",{..._("role",{required:"Role is required"}),className:"input",children:[s.jsx("option",{value:"cashier",children:"Cashier"}),s.jsx("option",{value:"manager",children:"Manager"}),s.jsx("option",{value:"admin",children:"Admin"})]}),B.role&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.role.message}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[s.jsx("strong",{children:"Cashier:"})," Can process sales and view basic reports",s.jsx("br",{}),s.jsx("strong",{children:"Manager:"})," Can manage inventory and view detailed reports",s.jsx("br",{}),s.jsx("strong",{children:"Admin:"})," Full access to all features"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{..._("isActive"),type:"checkbox",className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active user (can login)"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:R,className:"btn btn-outline",children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},N0=()=>{const{printerStatus:n,availablePrinters:e,connectedPrinter:t,settings:r,scanForPrinters:a,connectToPrinter:i,disconnectPrinter:c,testPrint:u,updatePrinterSettings:d}=Fn(),[y,x]=ft.useState(!1),[b,w]=ft.useState(!1),[m,P]=ft.useState(!1),[_,E]=ft.useState(null),[L,j]=ft.useState(!0);ft.useEffect(()=>{j("bluetooth"in navigator)},[]);const k=async()=>{x(!0),E(null);try{await a()}catch(O){E(O instanceof Error?O.message:"Failed to scan for printers")}finally{x(!1)}},B=async O=>{w(!0);try{await i(O)}catch(X){console.error("Connection failed:",X),alert("Failed to connect to printer. Please try again.")}finally{w(!1)}},K=async()=>{try{await c()}catch(O){console.error("Disconnect failed:",O),alert("Failed to disconnect printer.")}},Z=async()=>{P(!0);try{await u(),alert("Test print sent successfully!")}catch(O){console.error("Test print failed:",O),alert("Test print failed. Please check your printer connection.")}finally{P(!1)}},R=async(O,X)=>{try{await d({[O]:X})}catch(oe){console.error("Failed to update setting:",oe),alert("Failed to update printer setting.")}};return L?s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Xo,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Printer Settings"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Printer Status"}),s.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[n.connected?s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx(mf,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Connected"}),t&&s.jsxs("span",{className:"ml-2 text-gray-600",children:["(",t.name,")"]})]}):s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(ad,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:"Disconnected"})]}),n.printing&&s.jsxs("div",{className:"ml-auto flex items-center text-blue-600",children:[s.jsx(Vo,{className:"h-4 w-4 mr-1 animate-spin"}),s.jsx("span",{className:"text-sm",children:"Printing..."})]})]}),n.error&&s.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:n.error})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Available Printers"}),s.jsx("button",{onClick:k,disabled:y,className:"btn btn-outline text-sm",children:y?s.jsxs(s.Fragment,{children:[s.jsx(Vo,{className:"h-4 w-4 mr-2 animate-spin"}),"Scanning..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_c,{className:"h-4 w-4 mr-2"}),"Scan for Printers"]})})]}),_&&s.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center text-red-700",children:[s.jsx(nl,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm",children:_})]})}),s.jsx("div",{className:"space-y-2",children:e.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx(gf,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"No printers found"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Make sure your printer is on and in pairing mode"})]}):e.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xo,{className:"h-5 w-5 text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:O.name}),s.jsx("p",{className:"text-sm text-gray-500",children:O.id})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:(t==null?void 0:t.id)===O.id?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Connected"}),s.jsx("button",{onClick:K,className:"btn btn-outline text-sm",children:"Disconnect"})]}):s.jsx("button",{onClick:()=>B(O),disabled:b,className:"btn btn-primary text-sm",children:b?s.jsxs(s.Fragment,{children:[s.jsx(Vo,{className:"h-4 w-4 mr-1 animate-spin"}),"Connecting..."]}):"Connect"})})]},O.id))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Printer Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-900",children:"Auto-print receipts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Automatically print receipt immediately after sale completion"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.printerSettings.autoPrintEnabled,onChange:O=>R("autoPrintEnabled",O.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium text-gray-900 mb-1",children:"Paper Width"}),s.jsxs("select",{value:r.printerSettings.paperWidth,onChange:O=>R("paperWidth",parseInt(O.target.value)),className:"input w-32",children:[s.jsx("option",{value:58,children:"58mm"}),s.jsx("option",{value:80,children:"80mm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium text-gray-900 mb-1",children:"Paper Cut Type"}),s.jsxs("select",{value:r.printerSettings.cutType,onChange:O=>R("cutType",O.target.value),className:"input w-40",children:[s.jsx("option",{value:"partial",children:"Partial Cut"}),s.jsx("option",{value:"full",children:"Full Cut"}),s.jsx("option",{value:"none",children:"No Cut"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-900",children:"Cash drawer control"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Open cash drawer when printing receipts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.printerSettings.cashdrawerEnabled,onChange:O=>R("cashdrawerEnabled",O.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),n.connected&&s.jsx("div",{className:"border-t border-gray-200 pt-4",children:s.jsx("button",{onClick:Z,disabled:m||n.printing,className:"btn btn-outline w-full",children:m?s.jsxs(s.Fragment,{children:[s.jsx(Vo,{className:"h-4 w-4 mr-2 animate-spin"}),"Printing Test Receipt..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yf,{className:"h-4 w-4 mr-2"}),"Print Test Receipt"]})})})]}):s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Xo,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Printer Settings"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(nl,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Bluetooth Not Supported"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Your browser doesn't support Web Bluetooth API. Please use a modern browser like Chrome or Edge."}),s.jsx("p",{className:"text-sm text-gray-500",children:"Note: Bluetooth printing may require HTTPS for security reasons."})]})]})},S0=()=>{var B,K,Z,R,O,X,oe;const{settings:n,updateSettings:e,auth:t,transactions:r,products:a,users:i,initializeFromDatabase:c}=Fn(),[u,d]=ft.useState(null),[y,x]=ft.useState(null),{register:b,handleSubmit:w,formState:{errors:m}}=No({defaultValues:{storeName:n.storeName,currency:"PHP"}});ft.useEffect(()=>{(()=>{const N=qn.getLicenseInfo();d(N);const q=qn.getDaysUntilExpiry();x(q)})()},[]);const P=()=>{window.confirm("Are you sure you want to deactivate this license? The application will require reactivation to continue working.")&&(qn.deactivateLicense(),alert("License deactivated successfully. The application will now restart."),window.location.reload())},_=C=>{e({...C,currency:"PHP"}),alert("Settings saved successfully!")},E=async()=>{try{const C=await Gs.backup(),N=window.URL.createObjectURL(C),q=document.createElement("a");q.href=N,q.download=`pos-backup-${new Date().toISOString().split("T")[0]}.json`,q.click(),window.URL.revokeObjectURL(N)}catch(C){console.error("Export failed:",C),alert("Failed to export data. Please try again.")}},L=async C=>{var V;const N=(V=C.target.files)==null?void 0:V[0];if(!N)return;if(C.target.value="",!N.name.endsWith(".json")){alert("Please select a valid JSON backup file");return}const q=new FileReader;q.onload=async he=>{var Y;try{const Q=(Y=he.target)==null?void 0:Y.result,ne=JSON.parse(Q);if(!ne.version||!ne.users&&!ne.products&&!ne.transactions){alert("Invalid backup file format. This does not appear to be a valid POS backup file.");return}if(window.confirm("This will overwrite all current data including transactions, products, and users. This action cannot be undone. Are you sure?"))try{await Gs.restore(Q),await c(),alert("Data imported successfully! All data has been restored from the backup.")}catch(ie){console.error("Import failed:",ie),alert("Failed to import data. The backup file may be corrupted or incompatible.")}}catch(Q){console.error("Failed to parse backup file:",Q),alert("Invalid backup file format. Please select a valid JSON backup file.")}},q.readAsText(N)},j=async()=>{if(window.confirm("This will delete ALL data including transactions, products, and users. This action cannot be undone. Are you sure?")&&window.confirm("Final confirmation: This will permanently delete everything. Are you sure you want to proceed?"))try{await Gs.clearAll(),await c(),alert("All data has been successfully cleared.")}catch(C){console.error("Clear data failed:",C),alert("Failed to clear data. Please try again.")}};return((B=t.user)==null?void 0:B.role)==="admin"||((K=t.user)==null?void 0:K.role)==="manager"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-500",children:"Configure your POS system preferences"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Information"}),s.jsxs("form",{onSubmit:w(_),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),s.jsx("input",{...b("storeName",{required:"Store name is required"}),className:"input",placeholder:"Enter store name"}),m.storeName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.storeName.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),s.jsx("select",{...b("currency",{required:"Currency is required"}),className:"input",disabled:!0,children:s.jsx("option",{value:"PHP",children:"PHP - Philippine Peso"})}),m.currency&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.currency.message})]}),s.jsxs("button",{type:"submit",className:"btn btn-primary",children:[s.jsx(fd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Products:"}),s.jsx("span",{className:"font-medium",children:a.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Transactions:"}),s.jsx("span",{className:"font-medium",children:r.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Users:"}),s.jsx("span",{className:"font-medium",children:i.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Current User:"}),s.jsxs("span",{className:"font-medium",children:[(Z=t.user)==null?void 0:Z.firstName," ",(R=t.user)==null?void 0:R.lastName]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"User Role:"}),s.jsx("span",{className:"font-medium capitalize",children:(O=t.user)==null?void 0:O.role})]})]})]})]}),s.jsx(N0,{}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ks,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"License Information"})]}),u?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ks,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("span",{className:"text-green-800 font-medium",children:"License Active"})]}),s.jsx("span",{className:"text-green-600 text-sm",children:"Valid & Activated"})]}),y!==null&&y<=30&&y>0&&s.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx(nl,{className:"h-5 w-5 text-yellow-600 mr-2"}),s.jsxs("span",{className:"text-yellow-800 text-sm",children:["License expires in ",y," day",y!==1?"s":""]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Customer Name"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.customerName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.customerEmail})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Expires"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ac,{className:"h-4 w-4 text-gray-400 mr-1"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.expiryDate.toLocaleDateString()})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Features"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.features.join(", ")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"License Key"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md px-3 py-2 flex-1 mr-2",children:s.jsx("p",{className:"text-sm text-gray-900 font-mono break-all",children:u.licenseKey})}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(u.licenseKey),className:"btn btn-outline text-xs px-3 py-2",title:"Copy license key",children:s.jsx(od,{className:"h-3 w-3"})})]})]}),((X=t.user)==null?void 0:X.role)==="admin"&&s.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:P,className:"btn btn-danger text-sm",children:"Deactivate License"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Deactivating the license will require reactivation to use the system."})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ks,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No license information available"}),s.jsx("p",{className:"text-sm text-gray-400",children:"This should not happen if the app is running."})]})]}),((oe=t.user)==null?void 0:oe.role)==="admin"&&s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(al,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Export Data"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Download a backup of all your data"}),s.jsxs("button",{onClick:E,className:"btn btn-outline w-full",children:[s.jsx(al,{className:"h-4 w-4 mr-2"}),"Export Backup"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors duration-200",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(sl,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Import Data"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restore data from a backup file"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".json",onChange:L,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"backup-file-input"}),s.jsx("label",{htmlFor:"backup-file-input",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-green-300 rounded-lg cursor-pointer bg-green-50 hover:bg-green-100 transition-colors duration-200",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx(sl,{className:"h-6 w-6 text-green-600 mb-2"}),s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Click to upload"}),s.jsx("p",{className:"text-xs text-green-600",children:"JSON files only"})]})})]})]}),s.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(uu,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("h3",{className:"font-medium text-red-900",children:"Clear All Data"})]}),s.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Permanently delete all system data"}),s.jsxs("button",{onClick:j,className:"btn btn-danger w-full",children:[s.jsx(uu,{className:"h-4 w-4 mr-2"}),"Clear Data"]})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsx("p",{children:"Always create regular backups of your data. The clear data operation is irreversible and will permanently delete all transactions, products, and user data."})})]})]})})]})]}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(sd,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage settings."})]})})};class Ao{static async checkAndMigrate(){if(localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true"){console.log("Migration already completed, skipping...");return}const t=this.getLegacyData();if(!t||this.isLegacyDataEmpty(t)){console.log("No legacy data found, marking migration as complete"),this.markMigrationComplete();return}console.log("Starting migration from localStorage to IndexedDB...");try{await this.migrateLegacyData(t),this.markMigrationComplete(),this.backupLegacyData(),console.log("Migration completed successfully")}catch(r){throw console.error("Migration failed:",r),r}}static getLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(!e)return null;const t=JSON.parse(e);return t.state||t}catch(e){return console.error("Failed to parse legacy data:",e),null}}static isLegacyDataEmpty(e){return(!e.users||e.users.length===0)&&(!e.products||e.products.length===0)&&(!e.categories||e.categories.length===0)&&(!e.transactions||e.transactions.length===0)}static async migrateLegacyData(e){var t,r,a,i,c;console.log("Migrating legacy data:",{users:((t=e.users)==null?void 0:t.length)||0,products:((r=e.products)==null?void 0:r.length)||0,categories:((a=e.categories)==null?void 0:a.length)||0,transactions:((i=e.transactions)==null?void 0:i.length)||0,activityLogs:((c=e.activityLogs)==null?void 0:c.length)||0}),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{if(e.categories&&e.categories.length>0){for(const u of e.categories)try{await He.categories.get(u.id)?console.log(`Category ${u.id} already exists, skipping...`):await He.categories.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(d){console.error("Failed to migrate category:",u.id,d)}console.log(`Processed ${e.categories.length} categories`)}if(e.users&&e.users.length>0){for(const u of e.users)try{await He.users.get(u.id)?console.log(`User ${u.id} already exists, skipping...`):await He.users.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date,lastLogin:u.lastLogin?new Date(u.lastLogin):void 0})}catch(d){console.error("Failed to migrate user:",u.id,d)}console.log(`Processed ${e.users.length} users`)}if(e.products&&e.products.length>0){for(const u of e.products)try{await He.products.get(u.id)?console.log(`Product ${u.id} already exists, skipping...`):await He.products.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(d){console.error("Failed to migrate product:",u.id,d)}console.log(`Processed ${e.products.length} products`)}if(e.transactions&&e.transactions.length>0){for(const u of e.transactions)try{await He.transactions.get(u.id)?console.log(`Transaction ${u.id} already exists, skipping...`):await He.transactions.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(d){console.error("Failed to migrate transaction:",u.id,d)}console.log(`Processed ${e.transactions.length} transactions`)}if(e.activityLogs&&e.activityLogs.length>0){for(const u of e.activityLogs)try{await He.activityLogs.get(u.id)?console.log(`Activity log ${u.id} already exists, skipping...`):await He.activityLogs.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date})}catch(d){console.error("Failed to migrate activity log:",u.id,d)}console.log(`Processed ${e.activityLogs.length} activity logs`)}if(e.settings)try{if(await He.settings.get("migrated"))console.log("Settings already exist, skipping...");else{const d={id:"migrated",currency:"PHP",storeName:e.settings.storeName||"My Store",storeAddress:e.settings.storeAddress,storePhone:e.settings.storePhone,storeEmail:e.settings.storeEmail,autoBackup:e.settings.autoBackup||!1,backupFrequency:e.settings.backupFrequency||"daily",lowStockAlert:e.settings.lowStockAlert!==void 0?e.settings.lowStockAlert:!0,lowStockThreshold:e.settings.lowStockThreshold||5,printerAutoPrintEnabled:!1,printerPaperWidth:58,printerEncoding:"utf8",printerCutType:"partial",printerCashdrawerEnabled:!1,createdAt:new Date,updatedAt:new Date};await He.settings.add(d),console.log("Migrated settings")}}catch(u){console.error("Failed to migrate settings:",u)}})}static markMigrationComplete(){localStorage.setItem(this.MIGRATION_FLAG_KEY,"true")}static backupLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(e){const t=`${this.LEGACY_STORAGE_KEY}-backup-${Date.now()}`;localStorage.setItem(t,e),console.log(`Legacy data backed up to ${t}`)}}catch(e){console.error("Failed to backup legacy data:",e)}}static async forceMigration(){try{console.log("Forcing migration: clearing database and migration flag"),localStorage.removeItem(this.MIGRATION_FLAG_KEY),await Gs.clearAll(),await this.checkAndMigrate()}catch(e){throw console.error("Force migration failed:",e),e}}static resetMigrationFlag(){localStorage.removeItem(this.MIGRATION_FLAG_KEY),console.log("Migration flag reset. Next app load will trigger migration check.")}static async exportToLegacyFormat(){const e={users:await _i.getAll(),products:await Ha.getAll(),categories:await ys.getAll(),transactions:await $s.getAll(),activityLogs:await wo.getAll(),settings:await xa.get()};return JSON.stringify({state:e},null,2)}static getMigrationStatus(){var i,c,u,d,y;const e=localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true",t=this.getLegacyData(),r=t&&!this.isLegacyDataEmpty(t);let a=0;return t&&(a=(((i=t.users)==null?void 0:i.length)||0)+(((c=t.products)==null?void 0:c.length)||0)+(((u=t.categories)==null?void 0:u.length)||0)+(((d=t.transactions)==null?void 0:d.length)||0)+(((y=t.activityLogs)==null?void 0:y.length)||0)),{migrationCompleted:e,hasLegacyData:!!r,legacyDataSize:a}}static async clearDatabase(){try{console.log(" Starting complete database and localStorage cleanup..."),He.isOpen()&&(console.log(" Closing database connection..."),He.close(),await new Promise(d=>setTimeout(d,500))),console.log(" Deleting IndexedDB database..."),await He.delete(),await new Promise(d=>setTimeout(d,500)),console.log(" Clearing ALL localStorage...");const e=[];for(let d=0;d<localStorage.length;d++){const y=localStorage.key(d);y&&e.push(y)}e.forEach(d=>{(d.includes("pos")||d.includes("store")||d.includes("auth")||d.includes("migration")||d.includes("database"))&&(console.log(` Removing localStorage key: ${d}`),localStorage.removeItem(d))}),[this.MIGRATION_FLAG_KEY,this.LEGACY_STORAGE_KEY,"pos-auth-storage","pos-store","pos-migrated-to-db","pos-data-cleared-intentionally","react-pos-store","zustand-store","posSystemStore"].forEach(d=>{localStorage.removeItem(d),console.log(` Cleared specific key: ${d}`)});try{sessionStorage.clear(),console.log(" Cleared sessionStorage")}catch(d){console.warn("Could not clear sessionStorage:",d)}await new Promise(d=>setTimeout(d,1e3)),console.log(" Re-opening database with fresh schema..."),await He.open();const r=await He.users.count(),a=await He.products.count(),i=await He.categories.count(),c=await He.transactions.count(),u=await He.activityLogs.count();if(console.log(" Database cleared successfully"),console.log(` Verification - Users: ${r}, Products: ${a}, Categories: ${i}, Transactions: ${c}, Logs: ${u}`),r>0||a>0||i>0){console.warn(" Warning: Some data still exists after clearing. Attempting force clear..."),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{const b=await He.users.toArray();for(const E of b)await He.users.delete(E.id);const w=await He.products.toArray();for(const E of w)await He.products.delete(E.id);const m=await He.categories.toArray();for(const E of m)await He.categories.delete(E.id);const P=await He.transactions.toArray();for(const E of P)await He.transactions.delete(E.id);const _=await He.activityLogs.toArray();for(const E of _)await He.activityLogs.delete(E.id);await He.settings.clear()}),console.log(" Force clear completed");const d=await He.users.count(),y=await He.products.count(),x=await He.categories.count();console.log(` Final verification - Users: ${d}, Products: ${y}, Categories: ${x}`)}}catch(e){console.error(" Failed to clear database:",e);const t=e instanceof Error?e.message:"Unknown error occurred";throw new Error(`Database clear failed: ${t}`)}}}cn(Ao,"LEGACY_STORAGE_KEY","pos-store"),cn(Ao,"MIGRATION_FLAG_KEY","pos-migrated-to-db");const j0=async()=>{console.log("Checking if sample data should be initialized...");try{const{ProductService:n,CategoryService:e,UserService:t,DatabaseService:r}=await Ai(()=>Promise.resolve().then(()=>Ip),void 0,import.meta.url);if(r.wasDataClearedIntentionally()){console.log(" Data was cleared intentionally. Skipping sample data initialization."),console.log(' To restore sample data, use the "Reset Database" option instead of "Clear All Data".');return}const a=await n.getAll(),i=await e.getAll(),c=await t.getAll();if(a.length>0&&i.length>0&&c.length>0){console.log("Sample data already exists, skipping initialization");return}console.log("Initializing fresh sample data...");const u=[{id:"user-1",username:"admin",email:"admin@pos.com",password:Va("password"),role:"admin",firstName:"Admin",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-2",username:"manager",email:"manager@pos.com",password:Va("password"),role:"manager",firstName:"Manager",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-3",username:"cashier",email:"cashier@pos.com",password:Va("password"),role:"cashier",firstName:"Cashier",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-4",username:"admin123",email:"admin123@pos.com",password:Va("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date}],d=[{id:"cat-1",name:"Beverages",description:"Drinks and beverages",createdAt:new Date,updatedAt:new Date},{id:"cat-2",name:"Snacks",description:"Snacks and confectionery",createdAt:new Date,updatedAt:new Date},{id:"cat-3",name:"Dairy",description:"Milk and dairy products",createdAt:new Date,updatedAt:new Date},{id:"cat-4",name:"Bakery",description:"Bread and baked goods",createdAt:new Date,updatedAt:new Date},{id:"cat-5",name:"Household",description:"Household items and cleaning supplies",createdAt:new Date,updatedAt:new Date}],y=[{id:"prod-1",name:"Coca-Cola 330ml",description:"Refreshing cola drink",sku:"COKE-330",barcode:"123456789012",price:1.5,cost:.75,quantity:100,minStockLevel:20,categoryId:"cat-1",isActive:!0,imageUrl:"",wholesalePrice:1.2,wholesaleMinQuantity:24,createdAt:new Date,updatedAt:new Date},{id:"prod-2",name:"Pepsi 330ml",description:"Cola soft drink",sku:"PEPSI-330",barcode:"123456789013",price:1.45,cost:.7,quantity:85,minStockLevel:15,categoryId:"cat-1",isActive:!0,imageUrl:"",wholesalePrice:1.15,wholesaleMinQuantity:24,createdAt:new Date,updatedAt:new Date},{id:"prod-3",name:"Lay's Potato Chips",description:"Crispy salted potato chips",sku:"LAYS-REG",barcode:"123456789014",price:2.25,cost:1.2,quantity:60,minStockLevel:12,categoryId:"cat-2",isActive:!0,imageUrl:"",wholesalePrice:1.8,wholesaleMinQuantity:12,createdAt:new Date,updatedAt:new Date},{id:"prod-4",name:"Banana (per kg)",description:"Fresh yellow bananas",sku:"BANANA-KG",barcode:"123456789015",price:2.5,cost:1.5,quantity:45,minStockLevel:10,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-5",name:"Whole Milk 1L",description:"Fresh whole milk",sku:"MILK-1L",barcode:"123456789016",price:3.5,cost:2,quantity:30,minStockLevel:8,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-6",name:"White Bread",description:"Fresh white bread loaf",sku:"BREAD-WHT",barcode:"123456789017",price:2.75,cost:1.4,quantity:25,minStockLevel:5,categoryId:"cat-4",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-7",name:"Paper Towels",description:"Absorbent paper towels",sku:"PPR-TOWEL",barcode:"123456789018",price:4.5,cost:2.25,quantity:40,minStockLevel:10,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-8",name:"Orange Juice 1L",description:"100% pure orange juice",sku:"OJ-1L",barcode:"123456789019",price:4.25,cost:2.5,quantity:35,minStockLevel:8,categoryId:"cat-1",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-9",name:"Cheese Slices",description:"Processed cheese slices",sku:"CHEESE-SLC",barcode:"123456789020",price:5.5,cost:3,quantity:20,minStockLevel:5,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-10",name:"Dish Soap",description:"Liquid dish soap",sku:"SOAP-DISH",barcode:"123456789021",price:3.75,cost:1.8,quantity:30,minStockLevel:7,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date}];console.log("Adding users...");for(const x of u)try{await He.users.put(x),console.log(` Added user: ${x.username}`)}catch{console.log(` User ${x.username} might already exist, skipping...`)}console.log("Adding categories...");for(const x of d)try{await He.categories.put(x),console.log(` Added category: ${x.name}`)}catch{console.log(` Category ${x.name} might already exist, skipping...`)}console.log("Adding products...");for(const x of y)try{await He.products.put(x),console.log(` Added product: ${x.name}`)}catch{console.log(` Product ${x.name} might already exist, skipping...`)}console.log("Sample data initialized successfully")}catch(n){throw console.error("Failed to initialize sample data:",n),n}};async function A0(){try{console.log("Initializing POS Database..."),await Gs.initialize(),await Ao.checkAndMigrate(),await j0(),console.log("Database initialization completed")}catch(n){throw console.error("Database initialization failed:",n),n}}async function _0(){try{if(await _i.getByUsername("admin123")){console.log("User admin123 already exists");return}const e={id:"user-admin123-"+Date.now(),username:"admin123",email:"admin123@pos.com",password:Va("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date};await _i.create(e),console.log(" Admin user created successfully!"),console.log("Username: admin123"),console.log("Password: adminpassword"),console.log("Role: admin")}catch(n){throw console.error("Failed to create admin123 user:",n),n}}class ms{static initialize(){this.loadState(),this.setupNetworkListeners(),this.scheduleNextCheck(),console.log("License Scheduler initialized (silent mode)")}static setupNetworkListeners(){const e=()=>{console.log("Network connection restored - checking if license validation is due"),this.checkIfMonthlyCheckNeeded()};window.addEventListener("online",e)}static scheduleNextCheck(){this.checkTimeoutId&&clearTimeout(this.checkTimeoutId);const e=this.calculateNextCheckTime();if(!e){this.checkIfMonthlyCheckNeeded();return}const t=new Date,r=e.getTime()-t.getTime();r<=0?this.checkIfMonthlyCheckNeeded():(this.checkTimeoutId=setTimeout(()=>{this.checkIfMonthlyCheckNeeded()},r),console.log(`Next license check scheduled for: ${e.toLocaleString()}`))}static async checkIfMonthlyCheckNeeded(){const e=new Date;this.isMonthlyCheckDue(e)&&(console.log("Monthly license check is due, performing validation..."),(await this.performMonthlyCheck()).success?this.scheduleNextCheck():this.checkTimeoutId=setTimeout(()=>{this.checkIfMonthlyCheckNeeded()},24*60*60*1e3))}static isMonthlyCheckDue(e){if(!this.state.lastMonthlyCheck)return!0;const t=new Date(this.state.lastMonthlyCheck);return e.getTime()-t.getTime()>=this.MONTHLY_INTERVAL}static calculateNextCheckTime(){if(!this.state.lastMonthlyCheck){const r=new Date;return r.setMinutes(r.getMinutes()+1),r}const e=new Date(this.state.lastMonthlyCheck);return new Date(e.getTime()+this.MONTHLY_INTERVAL)}static async performMonthlyCheck(){var t;const e=new Date().toISOString();try{return console.log("License Scheduler: Starting monthly license validation..."),await this.testInternetConnectivity()?await qn.refreshLicense()?(console.log("License Scheduler: Monthly validation successful"),this.state.lastMonthlyCheck=e,this.state.nextScheduledCheck=((t=this.calculateNextCheckTime())==null?void 0:t.toISOString())||null,this.state.missedChecks=0,this.saveState(),{success:!0,timestamp:e,licenseValid:!0}):(console.warn("License Scheduler: Monthly validation failed - license invalid"),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,error:"License validation failed"}):(console.log("License Scheduler: No internet connectivity - will retry later"),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,wasOffline:!0,error:"No internet connectivity"})}catch(r){return console.error("License Scheduler: Monthly check error:",r),this.state.missedChecks++,this.saveState(),{success:!1,timestamp:e,licenseValid:!1,error:r instanceof Error?r.message:"Unknown error"}}}static async testInternetConnectivity(){if(!navigator.onLine)return!1;try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),r=await fetch(`${{}.REACT_APP_LICENSE_SERVER_URL||"http://localhost:5000"}/api/health`,{method:"HEAD",signal:e.signal,cache:"no-cache"});return clearTimeout(t),r.ok}catch{try{const t=new AbortController,r=setTimeout(()=>t.abort(),3e3);return await fetch("https://www.google.com/favicon.ico",{method:"HEAD",signal:t.signal,cache:"no-cache",mode:"no-cors"}),clearTimeout(r),!0}catch{return!1}}}static loadState(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);this.state={...this.state,...t}}}catch(e){console.error("License Scheduler: Failed to load state:",e)}}static saveState(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.state))}catch(e){console.error("License Scheduler: Failed to save state:",e)}}static getStatus(){const e=new Date,t=this.isMonthlyCheckDue(e),r=this.state.missedChecks>=this.MAX_MISSED_CHECKS;return{lastMonthlyCheck:this.state.lastMonthlyCheck,nextScheduledCheck:this.state.nextScheduledCheck,missedChecks:this.state.missedChecks,isDue:t,maxMissedChecksReached:r}}static reset(){this.state={lastMonthlyCheck:null,nextScheduledCheck:null,missedChecks:0},this.saveState(),console.log("License Scheduler: State reset")}static cleanup(){this.checkTimeoutId&&(clearTimeout(this.checkTimeoutId),this.checkTimeoutId=null),console.log("License Scheduler: Cleaned up")}}cn(ms,"STORAGE_KEY","pos-license-scheduler"),cn(ms,"MONTHLY_INTERVAL",30*24*60*60*1e3),cn(ms,"MAX_MISSED_CHECKS",3),cn(ms,"checkTimeoutId",null),cn(ms,"state",{lastMonthlyCheck:null,nextScheduledCheck:null,missedChecks:0});const zs=({children:n,allowedRoles:e,fallbackPath:t="/sales"})=>{var a;const{auth:r}=Fn();return!((a=r.user)!=null&&a.role)||!e.includes(r.user.role)?s.jsx(tc,{to:t,replace:!0}):s.jsx(s.Fragment,{children:n})},id=()=>{var e;const{auth:n}=Fn();return((e=n.user)==null?void 0:e.role)==="cashier"?s.jsx(tc,{to:"/sales",replace:!0}):s.jsx(tc,{to:"/dashboard",replace:!0})},P0=()=>{const[n,e]=Sr.useState(!0),[t,r]=Sr.useState(null),[a,i]=Sr.useState(null),[c,u]=Sr.useState(!1),[d,y]=Sr.useState(!1),[x,b]=Sr.useState(!0),[w,m]=Sr.useState(null),{auth:P,initializeFromDatabase:_}=Fn();Sr.useEffect(()=>{const K=Fn.persist.onFinishHydration(()=>{u(!0)});return Fn.persist.hasHydrated()&&u(!0),K},[]);const E=async(K=!0)=>{try{K&&b(!0);const Z=await qn.isLicensed();if(y(Z),Z){if(console.log("License validated successfully"),qn.isExpiringSoon()){const R=qn.getDaysUntilExpiry();console.warn(`License expires in ${R} days`)}}else console.log("No valid license found"),w&&(clearInterval(w),m(null));return Z}catch(Z){return console.error("License check failed:",Z),y(!1),!1}finally{K&&b(!1)}};Sr.useEffect(()=>{c&&E()},[c]),Sr.useEffect(()=>{if(d&&!w){const K=setInterval(()=>{E(!1).then(Z=>{Z||console.warn("License check failed during periodic validation")})},Ln.CHECK_INTERVAL);m(K)}return()=>{w&&clearInterval(w)}},[d]);const L=()=>{y(!0),w&&clearInterval(w),E(!1)},j=async()=>{try{e(!0),r(null),i(null),console.log("Starting application initialization..."),await A0(),await _(),await _0(),console.log("Application initialized successfully")}catch(K){console.error("Initialization failed:",K);const Z=K instanceof Error?K.message:"Unknown error occurred";r(`Failed to initialize application: ${Z}`),K instanceof Error&&i(K.stack||"No stack trace available")}finally{e(!1)}};Sr.useEffect(()=>{j()},[_]);const k=async()=>{if(window.confirm("This will reset the database and may fix the error, but all data will be lost. Continue?"))try{e(!0),r(null),i(null),await Ao.clearDatabase(),await new Promise(K=>setTimeout(K,1e3)),await j(),t||window.confirm("Database reset successfully! Refresh the page for a clean start?")&&window.location.reload()}catch(K){console.error("Failed to reset database:",K),r("Failed to reset database. Please try refreshing the page manually."),i("If the problem persists, try using a different browser or clearing your browser storage.")}},B=async()=>{try{e(!0),r(null),Ao.resetMigrationFlag(),await j()}catch(K){console.error("Failed to reset migration:",K),r("Failed to reset migration. Please try the database reset option.")}};if(Sr.useEffect(()=>{if(c)return ms.initialize(),()=>{ms.cleanup()}},[c]),n||!c||x){const K=c?x?"Validating license...":"Setting up database and loading data...":"Loading session...";return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(xs,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Initializing POS System"}),s.jsx("p",{className:"text-gray-500",children:K})]})})}return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-lg",children:[s.jsx(bo,{className:"h-16 w-16 text-red-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Initialization Failed"}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Error:"}),s.jsx("p",{className:"text-red-700 text-sm mb-3",children:t}),a&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Details:"}),s.jsx("p",{className:"text-red-700 text-sm",children:a})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>j(),className:"btn btn-primary w-full",children:[s.jsx(xs,{className:"h-4 w-4 mr-2"}),"Retry Initialization"]}),t.includes("Key already exists")||t.includes("ConstraintError")?s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:B,className:"btn btn-outline w-full",children:"Reset Migration"}),s.jsxs("button",{onClick:k,className:"btn btn-warning w-full",children:[s.jsx(du,{className:"h-4 w-4 mr-2"}),"Reset Database"]})]}):s.jsxs("button",{onClick:k,className:"btn btn-danger w-full",children:[s.jsx(du,{className:"h-4 w-4 mr-2"}),"Reset Database"]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:[s.jsx("p",{children:"If the problem persists:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"Try using a different browser"}),s.jsx("li",{children:"Clear your browser's storage/cache"}),s.jsx("li",{children:"Check if you have enough disk space"}),s.jsx("li",{children:"Disable browser extensions temporarily"})]})]})]})]})}):d?s.jsx(Yh,{children:P.isAuthenticated?s.jsx(Bp,{children:s.jsxs(Qh,{children:[s.jsx(qa,{path:"/",element:s.jsx(id,{})}),s.jsx(qa,{path:"/dashboard",element:s.jsx(zs,{allowedRoles:["admin","manager"],children:s.jsx(fm,{})})}),s.jsx(qa,{path:"/sales",element:s.jsx(zs,{allowedRoles:["admin","manager","cashier"],children:s.jsx(pm,{})})}),s.jsx(qa,{path:"/inventory",element:s.jsx(zs,{allowedRoles:["admin","manager"],children:s.jsx(gm,{})})}),s.jsx(qa,{path:"/reports",element:s.jsx(zs,{allowedRoles:["admin","manager","cashier"],children:s.jsx(x0,{})})}),s.jsx(qa,{path:"/users",element:s.jsx(zs,{allowedRoles:["admin"],children:s.jsx(w0,{})})}),s.jsx(qa,{path:"/settings",element:s.jsx(zs,{allowedRoles:["admin","manager"],children:s.jsx(S0,{})})}),s.jsx(qa,{path:"*",element:s.jsx(id,{})})]})}):s.jsx(dm,{})}):s.jsx(hm,{onActivated:L})};const L0=new $f({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});sc.createRoot(document.getElementById("root")).render(s.jsx(ft.StrictMode,{children:s.jsx(Xf,{client:L0,children:s.jsx(P0,{})})}));
