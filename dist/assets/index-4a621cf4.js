var Lh=Object.defineProperty;var kh=(r,e,t)=>e in r?Lh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var fa=(r,e,t)=>(kh(r,typeof e!="symbol"?e+"":e,t),t);import{r as bi,a as Ch,b as Fh,c as Ft,g as hc,d as no,e as Dh}from"./vendor-36f7ab30.js";import{_ as vr,a as al}from"./charts-add538b4.js";import{u as Oh,L as os,H as Ih,R as Eh,a as Ia,N as Wl}from"./router-c7111a09.js";import{X as zs,U as fc,L as Th,M as Mh,a as Rh,S as fs,P as ho,B as qh,b as Kl,c as Vu,d as Bh,E as Vl,e as $l,C as $u,R as Rs,f as Gu,A as Cl,T as Yu,g as Vo,h as Ju,i as Qu,j as $o,k as Xu,l as Go,m as Uh,n as pc,o as zh,p as Hh,q as Wh,F as Kh,D as Yo,r as Vh,s as $h,t as qs,u as Gl,v as Gh,w as Jo,x as Yh,y as Jh,z as Qc,G as Qh,H as Xh,I as Xc,J as Zc}from"./ui-c6144a81.js";import{f as jr,a as yr,s as eu,e as tu,b as Zh,c as ef,d as tf,g as rf}from"./utils-570e0bc6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Zu={exports:{}},sl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=bi,af=Symbol.for("react.element"),sf=Symbol.for("react.fragment"),of=Object.prototype.hasOwnProperty,lf=nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cf={key:!0,ref:!0,__self:!0,__source:!0};function ed(r,e,t){var n,a={},i=null,c=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)of.call(e,n)&&!cf.hasOwnProperty(n)&&(a[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:af,type:r,key:i,ref:c,props:a,_owner:lf.current}}sl.Fragment=sf;sl.jsx=ed;sl.jsxs=ed;Zu.exports=sl;var l=Zu.exports,Yl={},ru=Ch;Yl.createRoot=ru.createRoot,Yl.hydrateRoot=ru.hydrateRoot;var ol=function(){function r(){this.listeners=[]}var e=r.prototype;return e.subscribe=function(n){var a=this,i=n||function(){};return this.listeners.push(i),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(c){return c!==i}),a.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},r}(),td=typeof window>"u";function _n(){}function uf(r,e){return typeof r=="function"?r(e):r}function df(r){return typeof r=="number"&&r>=0&&r!==1/0}function Qo(r){return Array.isArray(r)?r:[r]}function hf(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Fl(r,e,t){return ll(r)?typeof e=="function"?vr({},t,{queryKey:r,queryFn:e}):vr({},e,{queryKey:r}):r}function Ma(r,e,t){return ll(r)?[vr({},e,{queryKey:r}),t]:[r||{},e]}function ff(r,e){if(r===!0&&e===!0||r==null&&e==null)return"all";if(r===!1&&e===!1)return"none";var t=r??!e;return t?"active":"inactive"}function nu(r,e){var t=r.active,n=r.exact,a=r.fetching,i=r.inactive,c=r.predicate,u=r.queryKey,h=r.stale;if(ll(u)){if(n){if(e.queryHash!==mc(u,e.options))return!1}else if(!Xo(e.queryKey,u))return!1}var y=ff(t,i);if(y==="none")return!1;if(y!=="all"){var x=e.isActive();if(y==="active"&&!x||y==="inactive"&&x)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||typeof a=="boolean"&&e.isFetching()!==a||c&&!c(e))}function iu(r,e){var t=r.exact,n=r.fetching,a=r.predicate,i=r.mutationKey;if(ll(i)){if(!e.options.mutationKey)return!1;if(t){if(cs(e.options.mutationKey)!==cs(i))return!1}else if(!Xo(e.options.mutationKey,i))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||a&&!a(e))}function mc(r,e){var t=(e==null?void 0:e.queryKeyHashFn)||cs;return t(r)}function cs(r){var e=Qo(r);return pf(e)}function pf(r){return JSON.stringify(r,function(e,t){return Jl(t)?Object.keys(t).sort().reduce(function(n,a){return n[a]=t[a],n},{}):t})}function Xo(r,e){return rd(Qo(r),Qo(e))}function rd(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!rd(r[t],e[t])}):!1}function nd(r,e){if(r===e)return r;var t=Array.isArray(r)&&Array.isArray(e);if(t||Jl(r)&&Jl(e)){for(var n=t?r.length:Object.keys(r).length,a=t?e:Object.keys(e),i=a.length,c=t?[]:{},u=0,h=0;h<i;h++){var y=t?h:a[h];c[y]=nd(r[y],e[y]),c[y]===r[y]&&u++}return n===i&&u===n?r:c}return e}function Jl(r){if(!au(r))return!1;var e=r.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!au(t)||!t.hasOwnProperty("isPrototypeOf"))}function au(r){return Object.prototype.toString.call(r)==="[object Object]"}function ll(r){return typeof r=="string"||Array.isArray(r)}function mf(r){return new Promise(function(e){setTimeout(e,r)})}function su(r){Promise.resolve().then(r).catch(function(e){return setTimeout(function(){throw e})})}function id(){if(typeof AbortController=="function")return new AbortController}var gf=function(r){al(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(a){var i;if(!td&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("visibilitychange",c,!1),window.addEventListener("focus",c,!1),function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("focus",c)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setFocused(u):c.onFocus()})},t.setFocused=function(a){this.focused=a,a&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(a){a()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(ol),Ho=new gf,vf=function(r){al(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(a){var i;if(!td&&((i=window)!=null&&i.addEventListener)){var c=function(){return a()};return window.addEventListener("online",c,!1),window.addEventListener("offline",c,!1),function(){window.removeEventListener("online",c),window.removeEventListener("offline",c)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},t.setEventListener=function(a){var i,c=this;this.setup=a,(i=this.cleanup)==null||i.call(this),this.cleanup=a(function(u){typeof u=="boolean"?c.setOnline(u):c.onOnline()})},t.setOnline=function(a){this.online=a,a&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(a){a()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(ol),Wo=new vf;function yf(r){return Math.min(1e3*Math.pow(2,r),3e4)}function Zo(r){return typeof(r==null?void 0:r.cancel)=="function"}var ad=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function Dl(r){return r instanceof ad}var sd=function(e){var t=this,n=!1,a,i,c,u;this.abort=e.abort,this.cancel=function(w){return a==null?void 0:a(w)},this.cancelRetry=function(){n=!0},this.continueRetry=function(){n=!1},this.continue=function(){return i==null?void 0:i()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(w,m){c=w,u=m});var h=function(m){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(m),i==null||i(),c(m))},y=function(m){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(m),i==null||i(),u(m))},x=function(){return new Promise(function(m){i=m,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){i=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},b=function w(){if(!t.isResolved){var m;try{m=e.fn()}catch(_){m=Promise.reject(_)}a=function(L){if(!t.isResolved&&(y(new ad(L)),t.abort==null||t.abort(),Zo(m)))try{m.cancel()}catch{}},t.isTransportCancelable=Zo(m),Promise.resolve(m).then(h).catch(function(_){var L,O;if(!t.isResolved){var P=(L=e.retry)!=null?L:3,j=(O=e.retryDelay)!=null?O:yf,C=typeof j=="function"?j(t.failureCount,_):j,z=P===!0||typeof P=="number"&&t.failureCount<P||typeof P=="function"&&P(t.failureCount,_);if(n||!z){y(_);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,_),mf(C).then(function(){if(!Ho.isFocused()||!Wo.isOnline())return x()}).then(function(){n?y(_):w()})}})}};b()},bf=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=r.prototype;return e.batch=function(n){var a;this.transactions++;try{a=n()}finally{this.transactions--,this.transactions||this.flush()}return a},e.schedule=function(n){var a=this;this.transactions?this.queue.push(n):su(function(){a.notifyFn(n)})},e.batchCalls=function(n){var a=this;return function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];a.schedule(function(){n.apply(void 0,c)})}},e.flush=function(){var n=this,a=this.queue;this.queue=[],a.length&&su(function(){n.batchNotifyFn(function(){a.forEach(function(i){n.notifyFn(i)})})})},e.setNotifyFunction=function(n){this.notifyFn=n},e.setBatchNotifyFunction=function(n){this.batchNotifyFn=n},r}(),fn=new bf,od=console;function ld(){return od}function xf(r){od=r}var wf=function(){function r(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=r.prototype;return e.setOptions=function(n){var a;this.options=vr({},this.defaultOptions,n),this.meta=n==null?void 0:n.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},e.setDefaultOptions=function(n){this.defaultOptions=n},e.scheduleGc=function(){var n=this;this.clearGcTimeout(),df(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){n.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(n,a){var i,c,u=this.state.data,h=uf(n,u);return(i=(c=this.options).isDataEqual)!=null&&i.call(c,u,h)?h=u:this.options.structuralSharing!==!1&&(h=nd(u,h)),this.dispatch({data:h,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt}),h},e.setState=function(n,a){this.dispatch({type:"setState",state:n,setStateOptions:a})},e.cancel=function(n){var a,i=this.promise;return(a=this.retryer)==null||a.cancel(n),i?i.then(_n).catch(_n):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(n){return n.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(n){return n.getCurrentResult().isStale})},e.isStaleByTime=function(n){return n===void 0&&(n=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!hf(this.state.dataUpdatedAt,n)},e.onFocus=function(){var n,a=this.observers.find(function(i){return i.shouldFetchOnWindowFocus()});a&&a.refetch(),(n=this.retryer)==null||n.continue()},e.onOnline=function(){var n,a=this.observers.find(function(i){return i.shouldFetchOnReconnect()});a&&a.refetch(),(n=this.retryer)==null||n.continue()},e.addObserver=function(n){this.observers.indexOf(n)===-1&&(this.observers.push(n),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))},e.removeObserver=function(n){this.observers.indexOf(n)!==-1&&(this.observers=this.observers.filter(function(a){return a!==n}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:n}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(n,a){var i=this,c,u,h;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var y;return(y=this.retryer)==null||y.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){var x=this.observers.find(function(j){return j.options.queryFn});x&&this.setOptions(x.options)}var b=Qo(this.queryKey),w=id(),m={queryKey:b,pageParam:void 0,meta:this.meta};Object.defineProperty(m,"signal",{enumerable:!0,get:function(){if(w)return i.abortSignalConsumed=!0,w.signal}});var _=function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(m)):Promise.reject("Missing queryFn")},L={fetchOptions:a,options:this.options,queryKey:b,state:this.state,fetchFn:_,meta:this.meta};if((c=this.options.behavior)!=null&&c.onFetch){var O;(O=this.options.behavior)==null||O.onFetch(L)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((u=L.fetchOptions)==null?void 0:u.meta)){var P;this.dispatch({type:"fetch",meta:(P=L.fetchOptions)==null?void 0:P.meta})}return this.retryer=new sd({fn:L.fetchFn,abort:w==null||(h=w.abort)==null?void 0:h.bind(w),onSuccess:function(C){i.setData(C),i.cache.config.onSuccess==null||i.cache.config.onSuccess(C,i),i.cacheTime===0&&i.optionalRemove()},onError:function(C){Dl(C)&&C.silent||i.dispatch({type:"error",error:C}),Dl(C)||(i.cache.config.onError==null||i.cache.config.onError(C,i),ld().error(C)),i.cacheTime===0&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:L.options.retry,retryDelay:L.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(n){var a=this;this.state=this.reducer(this.state,n),fn.batch(function(){a.observers.forEach(function(i){i.onQueryUpdate(n)}),a.cache.notify({query:a,type:"queryUpdated",action:n})})},e.getDefaultState=function(n){var a=typeof n.initialData=="function"?n.initialData():n.initialData,i=typeof n.initialData<"u",c=i?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0,u=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:u?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:u?"success":"idle"}},e.reducer=function(n,a){var i,c;switch(a.type){case"failed":return vr({},n,{fetchFailureCount:n.fetchFailureCount+1});case"pause":return vr({},n,{isPaused:!0});case"continue":return vr({},n,{isPaused:!1});case"fetch":return vr({},n,{fetchFailureCount:0,fetchMeta:(i=a.meta)!=null?i:null,isFetching:!0,isPaused:!1},!n.dataUpdatedAt&&{error:null,status:"loading"});case"success":return vr({},n,{data:a.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(c=a.dataUpdatedAt)!=null?c:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var u=a.error;return Dl(u)&&u.revert&&this.revertState?vr({},this.revertState):vr({},n,{error:u,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return vr({},n,{isInvalidated:!0});case"setState":return vr({},n,a.state);default:return n}},r}(),Nf=function(r){al(e,r);function e(n){var a;return a=r.call(this)||this,a.config=n||{},a.queries=[],a.queriesMap={},a}var t=e.prototype;return t.build=function(a,i,c){var u,h=i.queryKey,y=(u=i.queryHash)!=null?u:mc(h,i),x=this.get(y);return x||(x=new wf({cache:this,queryKey:h,queryHash:y,options:a.defaultQueryOptions(i),state:c,defaultOptions:a.getQueryDefaults(h),meta:i.meta}),this.add(x)),x},t.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},t.remove=function(a){var i=this.queriesMap[a.queryHash];i&&(a.destroy(),this.queries=this.queries.filter(function(c){return c!==a}),i===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},t.clear=function(){var a=this;fn.batch(function(){a.queries.forEach(function(i){a.remove(i)})})},t.get=function(a){return this.queriesMap[a]},t.getAll=function(){return this.queries},t.find=function(a,i){var c=Ma(a,i),u=c[0];return typeof u.exact>"u"&&(u.exact=!0),this.queries.find(function(h){return nu(u,h)})},t.findAll=function(a,i){var c=Ma(a,i),u=c[0];return Object.keys(u).length>0?this.queries.filter(function(h){return nu(u,h)}):this.queries},t.notify=function(a){var i=this;fn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){var a=this;fn.batch(function(){a.queries.forEach(function(i){i.onFocus()})})},t.onOnline=function(){var a=this;fn.batch(function(){a.queries.forEach(function(i){i.onOnline()})})},e}(ol),Af=function(){function r(t){this.options=vr({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||Sf(),this.meta=t.meta}var e=r.prototype;return e.setState=function(n){this.dispatch({type:"setState",state:n})},e.addObserver=function(n){this.observers.indexOf(n)===-1&&this.observers.push(n)},e.removeObserver=function(n){this.observers=this.observers.filter(function(a){return a!==n})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(_n).catch(_n)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var n=this,a,i=this.state.status==="loading",c=Promise.resolve();return i||(this.dispatch({type:"loading",variables:this.options.variables}),c=c.then(function(){n.mutationCache.config.onMutate==null||n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return n.options.onMutate==null?void 0:n.options.onMutate(n.state.variables)}).then(function(u){u!==n.state.context&&n.dispatch({type:"loading",context:u,variables:n.state.variables})})),c.then(function(){return n.executeMutation()}).then(function(u){a=u,n.mutationCache.config.onSuccess==null||n.mutationCache.config.onSuccess(a,n.state.variables,n.state.context,n)}).then(function(){return n.options.onSuccess==null?void 0:n.options.onSuccess(a,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(a,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:a}),a}).catch(function(u){return n.mutationCache.config.onError==null||n.mutationCache.config.onError(u,n.state.variables,n.state.context,n),ld().error(u),Promise.resolve().then(function(){return n.options.onError==null?void 0:n.options.onError(u,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(void 0,u,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:u}),u})})},e.executeMutation=function(){var n=this,a;return this.retryer=new sd({fn:function(){return n.options.mutationFn?n.options.mutationFn(n.state.variables):Promise.reject("No mutationFn found")},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(n){var a=this;this.state=jf(this.state,n),fn.batch(function(){a.observers.forEach(function(i){i.onMutationUpdate(n)}),a.mutationCache.notify(a)})},r}();function Sf(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function jf(r,e){switch(e.type){case"failed":return vr({},r,{failureCount:r.failureCount+1});case"pause":return vr({},r,{isPaused:!0});case"continue":return vr({},r,{isPaused:!1});case"loading":return vr({},r,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return vr({},r,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return vr({},r,{data:void 0,error:e.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return vr({},r,e.state);default:return r}}var _f=function(r){al(e,r);function e(n){var a;return a=r.call(this)||this,a.config=n||{},a.mutations=[],a.mutationId=0,a}var t=e.prototype;return t.build=function(a,i,c){var u=new Af({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(i),state:c,defaultOptions:i.mutationKey?a.getMutationDefaults(i.mutationKey):void 0,meta:i.meta});return this.add(u),u},t.add=function(a){this.mutations.push(a),this.notify(a)},t.remove=function(a){this.mutations=this.mutations.filter(function(i){return i!==a}),a.cancel(),this.notify(a)},t.clear=function(){var a=this;fn.batch(function(){a.mutations.forEach(function(i){a.remove(i)})})},t.getAll=function(){return this.mutations},t.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(i){return iu(a,i)})},t.findAll=function(a){return this.mutations.filter(function(i){return iu(a,i)})},t.notify=function(a){var i=this;fn.batch(function(){i.listeners.forEach(function(c){c(a)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var a=this.mutations.filter(function(i){return i.state.isPaused});return fn.batch(function(){return a.reduce(function(i,c){return i.then(function(){return c.continue().catch(_n)})},Promise.resolve())})},e}(ol);function Pf(){return{onFetch:function(e){e.fetchFn=function(){var t,n,a,i,c,u,h=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,y=(a=e.fetchOptions)==null||(i=a.meta)==null?void 0:i.fetchMore,x=y==null?void 0:y.pageParam,b=(y==null?void 0:y.direction)==="forward",w=(y==null?void 0:y.direction)==="backward",m=((c=e.state.data)==null?void 0:c.pages)||[],_=((u=e.state.data)==null?void 0:u.pageParams)||[],L=id(),O=L==null?void 0:L.signal,P=_,j=!1,C=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},z=function(V,fe,Y,J){return P=J?[fe].concat(P):[].concat(P,[fe]),J?[Y].concat(V):[].concat(V,[Y])},G=function(V,fe,Y,J){if(j)return Promise.reject("Cancelled");if(typeof Y>"u"&&!fe&&V.length)return Promise.resolve(V);var ne={queryKey:e.queryKey,signal:O,pageParam:Y,meta:e.meta},K=C(ne),he=Promise.resolve(K).then(function(F){return z(V,Y,F,J)});if(Zo(K)){var Oe=he;Oe.cancel=K.cancel}return he},ee;if(!m.length)ee=G([]);else if(b){var T=typeof x<"u",U=T?x:ou(e.options,m);ee=G(m,T,U)}else if(w){var te=typeof x<"u",se=te?x:Lf(e.options,m);ee=G(m,te,se,!0)}else(function(){P=[];var M=typeof e.options.getNextPageParam>"u",V=h&&m[0]?h(m[0],0,m):!0;ee=V?G([],M,_[0]):Promise.resolve(z([],_[0],m[0]));for(var fe=function(ne){ee=ee.then(function(K){var he=h&&m[ne]?h(m[ne],ne,m):!0;if(he){var Oe=M?_[ne]:ou(e.options,K);return G(K,M,Oe)}return Promise.resolve(z(K,_[ne],m[ne]))})},Y=1;Y<m.length;Y++)fe(Y)})();var D=ee.then(function(M){return{pages:M,pageParams:P}}),A=D;return A.cancel=function(){j=!0,L==null||L.abort(),Zo(ee)&&ee.cancel()},D}}}}function ou(r,e){return r.getNextPageParam==null?void 0:r.getNextPageParam(e[e.length-1],e)}function Lf(r,e){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(e[0],e)}var kf=function(){function r(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new Nf,this.mutationCache=t.mutationCache||new _f,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=r.prototype;return e.mount=function(){var n=this;this.unsubscribeFocus=Ho.subscribe(function(){Ho.isFocused()&&Wo.isOnline()&&(n.mutationCache.onFocus(),n.queryCache.onFocus())}),this.unsubscribeOnline=Wo.subscribe(function(){Ho.isFocused()&&Wo.isOnline()&&(n.mutationCache.onOnline(),n.queryCache.onOnline())})},e.unmount=function(){var n,a;(n=this.unsubscribeFocus)==null||n.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},e.isFetching=function(n,a){var i=Ma(n,a),c=i[0];return c.fetching=!0,this.queryCache.findAll(c).length},e.isMutating=function(n){return this.mutationCache.findAll(vr({},n,{fetching:!0})).length},e.getQueryData=function(n,a){var i;return(i=this.queryCache.find(n,a))==null?void 0:i.state.data},e.getQueriesData=function(n){return this.getQueryCache().findAll(n).map(function(a){var i=a.queryKey,c=a.state,u=c.data;return[i,u]})},e.setQueryData=function(n,a,i){var c=Fl(n),u=this.defaultQueryOptions(c);return this.queryCache.build(this,u).setData(a,i)},e.setQueriesData=function(n,a,i){var c=this;return fn.batch(function(){return c.getQueryCache().findAll(n).map(function(u){var h=u.queryKey;return[h,c.setQueryData(h,a,i)]})})},e.getQueryState=function(n,a){var i;return(i=this.queryCache.find(n,a))==null?void 0:i.state},e.removeQueries=function(n,a){var i=Ma(n,a),c=i[0],u=this.queryCache;fn.batch(function(){u.findAll(c).forEach(function(h){u.remove(h)})})},e.resetQueries=function(n,a,i){var c=this,u=Ma(n,a,i),h=u[0],y=u[1],x=this.queryCache,b=vr({},h,{active:!0});return fn.batch(function(){return x.findAll(h).forEach(function(w){w.reset()}),c.refetchQueries(b,y)})},e.cancelQueries=function(n,a,i){var c=this,u=Ma(n,a,i),h=u[0],y=u[1],x=y===void 0?{}:y;typeof x.revert>"u"&&(x.revert=!0);var b=fn.batch(function(){return c.queryCache.findAll(h).map(function(w){return w.cancel(x)})});return Promise.all(b).then(_n).catch(_n)},e.invalidateQueries=function(n,a,i){var c,u,h,y=this,x=Ma(n,a,i),b=x[0],w=x[1],m=vr({},b,{active:(c=(u=b.refetchActive)!=null?u:b.active)!=null?c:!0,inactive:(h=b.refetchInactive)!=null?h:!1});return fn.batch(function(){return y.queryCache.findAll(b).forEach(function(_){_.invalidate()}),y.refetchQueries(m,w)})},e.refetchQueries=function(n,a,i){var c=this,u=Ma(n,a,i),h=u[0],y=u[1],x=fn.batch(function(){return c.queryCache.findAll(h).map(function(w){return w.fetch(void 0,vr({},y,{meta:{refetchPage:h==null?void 0:h.refetchPage}}))})}),b=Promise.all(x).then(_n);return y!=null&&y.throwOnError||(b=b.catch(_n)),b},e.fetchQuery=function(n,a,i){var c=Fl(n,a,i),u=this.defaultQueryOptions(c);typeof u.retry>"u"&&(u.retry=!1);var h=this.queryCache.build(this,u);return h.isStaleByTime(u.staleTime)?h.fetch(u):Promise.resolve(h.state.data)},e.prefetchQuery=function(n,a,i){return this.fetchQuery(n,a,i).then(_n).catch(_n)},e.fetchInfiniteQuery=function(n,a,i){var c=Fl(n,a,i);return c.behavior=Pf(),this.fetchQuery(c)},e.prefetchInfiniteQuery=function(n,a,i){return this.fetchInfiniteQuery(n,a,i).then(_n).catch(_n)},e.cancelMutations=function(){var n=this,a=fn.batch(function(){return n.mutationCache.getAll().map(function(i){return i.cancel()})});return Promise.all(a).then(_n).catch(_n)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(n){return this.mutationCache.build(this,n).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(n){this.defaultOptions=n},e.setQueryDefaults=function(n,a){var i=this.queryDefaults.find(function(c){return cs(n)===cs(c.queryKey)});i?i.defaultOptions=a:this.queryDefaults.push({queryKey:n,defaultOptions:a})},e.getQueryDefaults=function(n){var a;return n?(a=this.queryDefaults.find(function(i){return Xo(n,i.queryKey)}))==null?void 0:a.defaultOptions:void 0},e.setMutationDefaults=function(n,a){var i=this.mutationDefaults.find(function(c){return cs(n)===cs(c.mutationKey)});i?i.defaultOptions=a:this.mutationDefaults.push({mutationKey:n,defaultOptions:a})},e.getMutationDefaults=function(n){var a;return n?(a=this.mutationDefaults.find(function(i){return Xo(n,i.mutationKey)}))==null?void 0:a.defaultOptions:void 0},e.defaultQueryOptions=function(n){if(n!=null&&n._defaulted)return n;var a=vr({},this.defaultOptions.queries,this.getQueryDefaults(n==null?void 0:n.queryKey),n,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=mc(a.queryKey,a)),a},e.defaultQueryObserverOptions=function(n){return this.defaultQueryOptions(n)},e.defaultMutationOptions=function(n){return n!=null&&n._defaulted?n:vr({},this.defaultOptions.mutations,this.getMutationDefaults(n==null?void 0:n.mutationKey),n,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),Cf=Fh.unstable_batchedUpdates;fn.setBatchNotifyFunction(Cf);var Ff=console;xf(Ff);var lu=Ft.createContext(void 0),Df=Ft.createContext(!1);function Of(r){return r&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=lu),window.ReactQueryClientContext):lu}var If=function(e){var t=e.client,n=e.contextSharing,a=n===void 0?!1:n,i=e.children;Ft.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var c=Of(a);return Ft.createElement(Df.Provider,{value:a},Ft.createElement(c.Provider,{value:t},i))};const cu=r=>{let e;const t=new Set,n=(x,b)=>{const w=typeof x=="function"?x(e):x;if(!Object.is(w,e)){const m=e;e=b??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(_=>_(e,m))}},a=()=>e,h={setState:n,getState:a,getInitialState:()=>y,subscribe:x=>(t.add(x),()=>t.delete(x)),destroy:()=>{t.clear()}},y=e=r(n,a,h);return h},Ef=r=>r?cu(r):cu;var cd={exports:{}},ud={},dd={exports:{}},hd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs=bi;function Tf(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Mf=typeof Object.is=="function"?Object.is:Tf,Rf=Hs.useState,qf=Hs.useEffect,Bf=Hs.useLayoutEffect,Uf=Hs.useDebugValue;function zf(r,e){var t=e(),n=Rf({inst:{value:t,getSnapshot:e}}),a=n[0].inst,i=n[1];return Bf(function(){a.value=t,a.getSnapshot=e,Ol(a)&&i({inst:a})},[r,t,e]),qf(function(){return Ol(a)&&i({inst:a}),r(function(){Ol(a)&&i({inst:a})})},[r]),Uf(t),t}function Ol(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Mf(r,t)}catch{return!0}}function Hf(r,e){return e()}var Wf=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Hf:zf;hd.useSyncExternalStore=Hs.useSyncExternalStore!==void 0?Hs.useSyncExternalStore:Wf;dd.exports=hd;var Kf=dd.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=bi,Vf=Kf;function $f(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Gf=typeof Object.is=="function"?Object.is:$f,Yf=Vf.useSyncExternalStore,Jf=cl.useRef,Qf=cl.useEffect,Xf=cl.useMemo,Zf=cl.useDebugValue;ud.useSyncExternalStoreWithSelector=function(r,e,t,n,a){var i=Jf(null);if(i.current===null){var c={hasValue:!1,value:null};i.current=c}else c=i.current;i=Xf(function(){function h(m){if(!y){if(y=!0,x=m,m=n(m),a!==void 0&&c.hasValue){var _=c.value;if(a(_,m))return b=_}return b=m}if(_=b,Gf(x,m))return _;var L=n(m);return a!==void 0&&a(_,L)?(x=m,_):(x=m,b=L)}var y=!1,x,b,w=t===void 0?null:t;return[function(){return h(e())},w===null?void 0:function(){return h(w())}]},[e,t,n,a]);var u=Yf(r,i[0],i[1]);return Qf(function(){c.hasValue=!0,c.value=u},[u]),Zf(u),u};cd.exports=ud;var ep=cd.exports;const tp=hc(ep),{useDebugValue:rp}=Ft,{useSyncExternalStoreWithSelector:np}=tp;const ip=r=>r;function ap(r,e=ip,t){const n=np(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return rp(n),n}const uu=r=>{const e=typeof r=="function"?Ef(r):r,t=(n,a)=>ap(e,n,a);return Object.assign(t,e),t},sp=r=>r?uu(r):uu;function op(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var i;const c=h=>h===null?null:JSON.parse(h,e==null?void 0:e.reviver),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(c):c(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,e==null?void 0:e.replacer)),removeItem:a=>t.removeItem(a)}}const fo=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return fo(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return fo(n)(t)}}}},lp=(r,e)=>(t,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:O=>O,version:0,merge:(O,P)=>({...P,...O}),...e},c=!1;const u=new Set,h=new Set;let y;try{y=i.getStorage()}catch{}if(!y)return r((...O)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...O)},n,a);const x=fo(i.serialize),b=()=>{const O=i.partialize({...n()});let P;const j=x({state:O,version:i.version}).then(C=>y.setItem(i.name,C)).catch(C=>{P=C});if(P)throw P;return j},w=a.setState;a.setState=(O,P)=>{w(O,P),b()};const m=r((...O)=>{t(...O),b()},n,a);let _;const L=()=>{var O;if(!y)return;c=!1,u.forEach(j=>j(n()));const P=((O=i.onRehydrateStorage)==null?void 0:O.call(i,n()))||void 0;return fo(y.getItem.bind(y))(i.name).then(j=>{if(j)return i.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==i.version){if(i.migrate)return i.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var C;return _=i.merge(j,(C=n())!=null?C:m),t(_,!0),b()}).then(()=>{P==null||P(_,void 0),c=!0,h.forEach(j=>j(_))}).catch(j=>{P==null||P(void 0,j)})};return a.persist={setOptions:O=>{i={...i,...O},O.getStorage&&(y=O.getStorage())},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>L(),hasHydrated:()=>c,onHydrate:O=>(u.add(O),()=>{u.delete(O)}),onFinishHydration:O=>(h.add(O),()=>{h.delete(O)})},L(),_||m},cp=(r,e)=>(t,n,a)=>{let i={storage:op(()=>localStorage),partialize:L=>L,version:0,merge:(L,O)=>({...O,...L}),...e},c=!1;const u=new Set,h=new Set;let y=i.storage;if(!y)return r((...L)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...L)},n,a);const x=()=>{const L=i.partialize({...n()});return y.setItem(i.name,{state:L,version:i.version})},b=a.setState;a.setState=(L,O)=>{b(L,O),x()};const w=r((...L)=>{t(...L),x()},n,a);a.getInitialState=()=>w;let m;const _=()=>{var L,O;if(!y)return;c=!1,u.forEach(j=>{var C;return j((C=n())!=null?C:w)});const P=((O=i.onRehydrateStorage)==null?void 0:O.call(i,(L=n())!=null?L:w))||void 0;return fo(y.getItem.bind(y))(i.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==i.version){if(i.migrate)return[!0,i.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var C;const[z,G]=j;if(m=i.merge(G,(C=n())!=null?C:w),t(m,!0),z)return x()}).then(()=>{P==null||P(m,void 0),m=n(),c=!0,h.forEach(j=>j(m))}).catch(j=>{P==null||P(void 0,j)})};return a.persist={setOptions:L=>{i={...i,...L},L.storage&&(y=L.storage)},clearStorage:()=>{y==null||y.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>c,onHydrate:L=>(u.add(L),()=>{u.delete(L)}),onFinishHydration:L=>(h.add(L),()=>{h.delete(L)})},i.skipHydration||_(),m||w},up=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?lp(r,e):cp(r,e),dp=up;var fd={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(no,function(){var t=function(o,f){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var k in S)Object.prototype.hasOwnProperty.call(S,k)&&(v[k]=S[k])})(o,f)},n=function(){return(n=Object.assign||function(o){for(var f,v=1,S=arguments.length;v<S;v++)for(var k in f=arguments[v])Object.prototype.hasOwnProperty.call(f,k)&&(o[k]=f[k]);return o}).apply(this,arguments)};function a(o,f,v){if(v||arguments.length===2)for(var S,k=0,q=f.length;k<q;k++)!S&&k in f||((S=S||Array.prototype.slice.call(f,0,k))[k]=f[k]);return o.concat(S||Array.prototype.slice.call(f))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:no,c=Object.keys,u=Array.isArray;function h(o,f){return typeof f!="object"||c(f).forEach(function(v){o[v]=f[v]}),o}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var y=Object.getPrototypeOf,x={}.hasOwnProperty;function b(o,f){return x.call(o,f)}function w(o,f){typeof f=="function"&&(f=f(y(o))),(typeof Reflect>"u"?c:Reflect.ownKeys)(f).forEach(function(v){_(o,v,f[v])})}var m=Object.defineProperty;function _(o,f,v,S){m(o,f,h(v&&b(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},S))}function L(o){return{from:function(f){return o.prototype=Object.create(f.prototype),_(o.prototype,"constructor",o),{extend:w.bind(null,o.prototype)}}}}var O=Object.getOwnPropertyDescriptor,P=[].slice;function j(o,f,v){return P.call(o,f,v)}function C(o,f){return f(o)}function z(o){if(!o)throw new Error("Assertion Failed")}function G(o){i.setImmediate?setImmediate(o):setTimeout(o,0)}function ee(o,f){if(typeof f=="string"&&b(o,f))return o[f];if(!f)return o;if(typeof f!="string"){for(var v=[],S=0,k=f.length;S<k;++S){var q=ee(o,f[S]);v.push(q)}return v}var Z=f.indexOf(".");if(Z!==-1){var le=o[f.substr(0,Z)];return le==null?void 0:ee(le,f.substr(Z+1))}}function T(o,f,v){if(o&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof f!="string"&&"length"in f){z(typeof v!="string"&&"length"in v);for(var S=0,k=f.length;S<k;++S)T(o,f[S],v[S])}else{var q,Z,le=f.indexOf(".");le!==-1?(q=f.substr(0,le),(Z=f.substr(le+1))===""?v===void 0?u(o)&&!isNaN(parseInt(q))?o.splice(q,1):delete o[q]:o[q]=v:T(le=!(le=o[q])||!b(o,q)?o[q]={}:le,Z,v)):v===void 0?u(o)&&!isNaN(parseInt(f))?o.splice(f,1):delete o[f]:o[f]=v}}function U(o){var f,v={};for(f in o)b(o,f)&&(v[f]=o[f]);return v}var te=[].concat;function se(o){return te.apply([],o)}var et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(se([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(f){return f+o+"Array"})}))).filter(function(o){return i[o]}),D=new Set(et.map(function(o){return i[o]})),A=null;function M(o){return A=new WeakMap,o=function f(v){if(!v||typeof v!="object")return v;var S=A.get(v);if(S)return S;if(u(v)){S=[],A.set(v,S);for(var k=0,q=v.length;k<q;++k)S.push(f(v[k]))}else if(D.has(v.constructor))S=v;else{var Z,le=y(v);for(Z in S=le===Object.prototype?{}:Object.create(le),A.set(v,S),v)b(v,Z)&&(S[Z]=f(v[Z]))}return S}(o),A=null,o}var V={}.toString;function fe(o){return V.call(o).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",J=typeof Y=="symbol"?function(o){var f;return o!=null&&(f=o[Y])&&f.apply(o)}:function(){return null};function ne(o,f){return f=o.indexOf(f),0<=f&&o.splice(f,1),0<=f}var K={};function he(o){var f,v,S,k;if(arguments.length===1){if(u(o))return o.slice();if(this===K&&typeof o=="string")return[o];if(k=J(o)){for(v=[];!(S=k.next()).done;)v.push(S.value);return v}if(o==null)return[o];if(typeof(f=o.length)!="number")return[o];for(v=new Array(f);f--;)v[f]=o[f];return v}for(f=arguments.length,v=new Array(f);f--;)v[f]=arguments[f];return v}var Oe=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ze),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(o,f){this.name=o,this.message=f}function Q(o,f){return o+". Errors: "+Object.keys(f).map(function(v){return f[v].toString()}).filter(function(v,S,k){return k.indexOf(v)===S}).join(`
`)}function ie(o,f,v,S){this.failures=f,this.failedKeys=S,this.successCount=v,this.message=Q(o,f)}function oe(o,f){this.name="BulkError",this.failures=Object.keys(f).map(function(v){return f[v]}),this.failuresByPos=f,this.message=Q(o,this.failures)}L(W).from(Error).extend({toString:function(){return this.name+": "+this.message}}),L(ie).from(W),L(oe).from(W);var Pe=Qr.reduce(function(o,f){return o[f]=f+"Error",o},{}),De=W,me=Qr.reduce(function(o,f){var v=f+"Error";function S(k,q){this.name=v,k?typeof k=="string"?(this.message="".concat(k).concat(q?`
 `+q:""),this.inner=q||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=F[f]||v,this.inner=null)}return L(S).from(De),o[f]=S,o},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var $e=ze.reduce(function(o,f){return o[f+"Error"]=me[f],o},{}),Xe=Qr.reduce(function(o,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(o[f+"Error"]=me[f]),o},{});function Qe(){}function dt(o){return o}function Ct(o,f){return o==null||o===dt?f:function(v){return f(o(v))}}function qe(o,f){return function(){o.apply(this,arguments),f.apply(this,arguments)}}function ue(o,f){return o===Qe?f:function(){var v=o.apply(this,arguments);v!==void 0&&(arguments[0]=v);var S=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var q=f.apply(this,arguments);return S&&(this.onsuccess=this.onsuccess?qe(S,this.onsuccess):S),k&&(this.onerror=this.onerror?qe(k,this.onerror):k),q!==void 0?q:v}}function Mt(o,f){return o===Qe?f:function(){o.apply(this,arguments);var v=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?qe(v,this.onsuccess):v),S&&(this.onerror=this.onerror?qe(S,this.onerror):S)}}function ht(o,f){return o===Qe?f:function(v){var S=o.apply(this,arguments);h(v,S);var k=this.onsuccess,q=this.onerror;return this.onsuccess=null,this.onerror=null,v=f.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?qe(k,this.onsuccess):k),q&&(this.onerror=this.onerror?qe(q,this.onerror):q),S===void 0?v===void 0?void 0:v:h(S,v)}}function rt(o,f){return o===Qe?f:function(){return f.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function X(o,f){return o===Qe?f:function(){var v=o.apply(this,arguments);if(v&&typeof v.then=="function"){for(var S=this,k=arguments.length,q=new Array(k);k--;)q[k]=arguments[k];return v.then(function(){return f.apply(S,q)})}return f.apply(this,arguments)}}Xe.ModifyError=ie,Xe.DexieError=W,Xe.BulkError=oe;var de=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xe(o){de=o}var Be={},Ke=100,et=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,y(o),o];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,y(f),o]}(),ze=et[0],Qr=et[1],et=et[2],Qr=Qr&&Qr.then,gt=ze&&ze.constructor,_t=!!et,Nt=function(o,f){Cr.push([o,f]),lt&&(queueMicrotask(Ot),lt=!1)},Bt=!0,lt=!0,hr=[],Wt=[],Tr=dt,Gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qe,pgp:!1,env:{},finalize:Qe},ct=Gt,Cr=[],Kt=0,Ln=[];function nt(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=ct;if(typeof o!="function"){if(o!==Be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&cr(this,this._value))}this._state=null,this._value=null,++f.ref,function v(S,k){try{k(function(q){if(S._state===null){if(q===S)throw new TypeError("A promise cannot be resolved with itself.");var Z=S._lib&&er();q&&typeof q.then=="function"?v(S,function(le,ve){q instanceof nt?q._then(le,ve):q.then(le,ve)}):(S._state=!0,S._value=q,Rt(S)),Z&&sr()}},cr.bind(null,S))}catch(q){cr(S,q)}}(this,o)}var tn={get:function(){var o=ct,f=ri;function v(S,k){var q=this,Z=!o.global&&(o!==ct||f!==ri),le=Z&&!Wr(),ve=new nt(function(we,je){Ce(q,new An(Hi(S,o,Z,le),Hi(k,o,Z,le),we,je,o))});return this._consoleTask&&(ve._consoleTask=this._consoleTask),ve}return v.prototype=Be,v},set:function(o){_(this,"then",o&&o.prototype===Be?tn:{get:function(){return o},set:tn.set})}};function An(o,f,v,S,k){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof f=="function"?f:null,this.resolve=v,this.reject=S,this.psd=k}function cr(o,f){var v,S;Wt.push(f),o._state===null&&(v=o._lib&&er(),f=Tr(f),o._state=!1,o._value=f,S=o,hr.some(function(k){return k._value===S._value})||hr.push(S),Rt(o),v&&sr())}function Rt(o){var f=o._listeners;o._listeners=[];for(var v=0,S=f.length;v<S;++v)Ce(o,f[v]);var k=o._PSD;--k.ref||k.finalize(),Kt===0&&(++Kt,Nt(function(){--Kt==0&&At()},[]))}function Ce(o,f){if(o._state!==null){var v=o._state?f.onFulfilled:f.onRejected;if(v===null)return(o._state?f.resolve:f.reject)(o._value);++f.psd.ref,++Kt,Nt(bt,[v,o,f])}else o._listeners.push(f)}function bt(o,f,v){try{var S,k=f._value;!f._state&&Wt.length&&(Wt=[]),S=de&&f._consoleTask?f._consoleTask.run(function(){return o(k)}):o(k),f._state||Wt.indexOf(k)!==-1||function(q){for(var Z=hr.length;Z;)if(hr[--Z]._value===q._value)return hr.splice(Z,1)}(f),v.resolve(S)}catch(q){v.reject(q)}finally{--Kt==0&&At(),--v.psd.ref||v.psd.finalize()}}function Ot(){Cn(Gt,function(){er()&&sr()})}function er(){var o=Bt;return lt=Bt=!1,o}function sr(){var o,f,v;do for(;0<Cr.length;)for(o=Cr,Cr=[],v=o.length,f=0;f<v;++f){var S=o[f];S[0].apply(null,S[1])}while(0<Cr.length);lt=Bt=!0}function At(){var o=hr;hr=[],o.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)});for(var f=Ln.slice(0),v=f.length;v;)f[--v]()}function ar(o){return new nt(Be,!1,o)}function $t(o,f){var v=ct;return function(){var S=er(),k=ct;try{return Gr(v,!0),o.apply(this,arguments)}catch(q){f&&f(q)}finally{Gr(k,!1),S&&sr()}}}w(nt.prototype,{then:tn,_then:function(o,f){Ce(this,new An(null,null,o,f,ct))},catch:function(o){if(arguments.length===1)return this.then(null,o);var f=o,v=arguments[1];return typeof f=="function"?this.then(null,function(S){return(S instanceof f?v:ar)(S)}):this.then(null,function(S){return(S&&S.name===f?v:ar)(S)})},finally:function(o){return this.then(function(f){return nt.resolve(o()).then(function(){return f})},function(f){return nt.resolve(o()).then(function(){return ar(f)})})},timeout:function(o,f){var v=this;return o<1/0?new nt(function(S,k){var q=setTimeout(function(){return k(new me.Timeout(f))},o);v.then(S,k).finally(clearTimeout.bind(null,q))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(nt.prototype,Symbol.toStringTag,"Dexie.Promise"),Gt.env=ji(),w(nt,{all:function(){var o=he.apply(null,arguments).map(Sn);return new nt(function(f,v){o.length===0&&f([]);var S=o.length;o.forEach(function(k,q){return nt.resolve(k).then(function(Z){o[q]=Z,--S||f(o)},v)})})},resolve:function(o){return o instanceof nt?o:o&&typeof o.then=="function"?new nt(function(f,v){o.then(f,v)}):new nt(Be,!0,o)},reject:ar,race:function(){var o=he.apply(null,arguments).map(Sn);return new nt(function(f,v){o.map(function(S){return nt.resolve(S).then(f,v)})})},PSD:{get:function(){return ct},set:function(o){return ct=o}},totalEchoes:{get:function(){return ri}},newPSD:Hr,usePSD:Cn,scheduler:{get:function(){return Nt},set:function(o){Nt=o}},rejectionMapper:{get:function(){return Tr},set:function(o){Tr=o}},follow:function(o,f){return new nt(function(v,S){return Hr(function(k,q){var Z=ct;Z.unhandleds=[],Z.onunhandled=q,Z.finalize=qe(function(){var le,ve=this;le=function(){ve.unhandleds.length===0?k():q(ve.unhandleds[0])},Ln.push(function we(){le(),Ln.splice(Ln.indexOf(we),1)}),++Kt,Nt(function(){--Kt==0&&At()},[])},Z.finalize),o()},f,v,S)})}}),gt&&(gt.allSettled&&_(nt,"allSettled",function(){var o=he.apply(null,arguments).map(Sn);return new nt(function(f){o.length===0&&f([]);var v=o.length,S=new Array(v);o.forEach(function(k,q){return nt.resolve(k).then(function(Z){return S[q]={status:"fulfilled",value:Z}},function(Z){return S[q]={status:"rejected",reason:Z}}).then(function(){return--v||f(S)})})})}),gt.any&&typeof AggregateError<"u"&&_(nt,"any",function(){var o=he.apply(null,arguments).map(Sn);return new nt(function(f,v){o.length===0&&v(new AggregateError([]));var S=o.length,k=new Array(S);o.forEach(function(q,Z){return nt.resolve(q).then(function(le){return f(le)},function(le){k[Z]=le,--S||v(new AggregateError(k))})})})}),gt.withResolvers&&(nt.withResolvers=gt.withResolvers));var tr={awaits:0,echoes:0,id:0},_r=0,br=[],rn=0,ri=0,ni=0;function Hr(o,f,v,S){var k=ct,q=Object.create(k);return q.parent=k,q.ref=0,q.global=!1,q.id=++ni,Gt.env,q.env=_t?{Promise:nt,PromiseProp:{value:nt,configurable:!0,writable:!0},all:nt.all,race:nt.race,allSettled:nt.allSettled,any:nt.any,resolve:nt.resolve,reject:nt.reject}:{},f&&h(q,f),++k.ref,q.finalize=function(){--this.parent.ref||this.parent.finalize()},S=Cn(q,o,v,S),q.ref===0&&q.finalize(),S}function nn(){return tr.id||(tr.id=++_r),++tr.awaits,tr.echoes+=Ke,tr.id}function Wr(){return!!tr.awaits&&(--tr.awaits==0&&(tr.id=0),tr.echoes=tr.awaits*Ke,!0)}function Sn(o){return tr.echoes&&o&&o.constructor===gt?(nn(),o.then(function(f){return Wr(),f},function(f){return Wr(),fr(f)})):o}function kn(){var o=br[br.length-1];br.pop(),Gr(o,!1)}function Gr(o,f){var v,S=ct;(f?!tr.echoes||rn++&&o===ct:!rn||--rn&&o===ct)||queueMicrotask(f?(function(k){++ri,tr.echoes&&--tr.echoes!=0||(tr.echoes=tr.awaits=tr.id=0),br.push(ct),Gr(k,!0)}).bind(null,o):kn),o!==ct&&(ct=o,S===Gt&&(Gt.env=ji()),_t&&(v=Gt.env.Promise,f=o.env,(S.global||o.global)&&(Object.defineProperty(i,"Promise",f.PromiseProp),v.all=f.all,v.race=f.race,v.resolve=f.resolve,v.reject=f.reject,f.allSettled&&(v.allSettled=f.allSettled),f.any&&(v.any=f.any))))}function ji(){var o=i.Promise;return _t?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function Cn(o,f,v,S,k){var q=ct;try{return Gr(o,!0),f(v,S,k)}finally{Gr(q,!1)}}function Hi(o,f,v,S){return typeof o!="function"?o:function(){var k=ct;v&&nn(),Gr(f,!0);try{return o.apply(this,arguments)}finally{Gr(k,!1),S&&queueMicrotask(Wr)}}}function _i(o){Promise===gt&&tr.echoes===0?rn===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Qr).indexOf("[native code]")===-1&&(nn=Wr=Qe);var fr=nt.reject,Yn=String.fromCharCode(65535),Mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xs="String expected.",Rn=[],Wi="__dbnames",Va="readonly",Ki="readwrite";function ii(o,f){return o?f?function(){return o.apply(this,arguments)&&f.apply(this,arguments)}:o:f}var $a={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function va(o){return typeof o!="string"||/\./.test(o)?function(f){return f}:function(f){return f[o]===void 0&&o in f&&delete(f=M(f))[o],f}}function Vi(){throw me.Type()}function Yt(o,f){try{var v=Sr(o),S=Sr(f);if(v!==S)return v==="Array"?1:S==="Array"?-1:v==="binary"?1:S==="binary"?-1:v==="string"?1:S==="string"?-1:v==="Date"?1:S!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return f<o?1:o<f?-1:0;case"binary":return function(k,q){for(var Z=k.length,le=q.length,ve=Z<le?Z:le,we=0;we<ve;++we)if(k[we]!==q[we])return k[we]<q[we]?-1:1;return Z===le?0:Z<le?-1:1}(Ga(o),Ga(f));case"Array":return function(k,q){for(var Z=k.length,le=q.length,ve=Z<le?Z:le,we=0;we<ve;++we){var je=Yt(k[we],q[we]);if(je!==0)return je}return Z===le?0:Z<le?-1:1}(o,f)}}catch{}return NaN}function Sr(o){var f=typeof o;return f!="object"?f:ArrayBuffer.isView(o)?"binary":(o=fe(o),o==="ArrayBuffer"?"binary":o)}function Ga(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}var Ya=(lr.prototype._trans=function(o,f,v){var S=this._tx||ct.trans,k=this.name,q=de&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function Z(we,je,ce){if(!ce.schema[k])throw new me.NotFound("Table "+k+" not part of transaction");return f(ce.idbtrans,ce)}var le=er();try{var ve=S&&S.db._novip===this.db._novip?S===ct.trans?S._promise(o,Z,v):Hr(function(){return S._promise(o,Z,v)},{trans:S,transless:ct.transless||ct}):function we(je,ce,ke,ge){if(je.idbdb&&(je._state.openComplete||ct.letThrough||je._vip)){var Ne=je._createTransaction(ce,ke,je._dbSchema);try{Ne.create(),je._state.PR1398_maxLoop=3}catch(Le){return Le.name===Pe.InvalidState&&je.isOpen()&&0<--je._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),je.close({disableAutoOpen:!1}),je.open().then(function(){return we(je,ce,ke,ge)})):fr(Le)}return Ne._promise(ce,function(Le,Ae){return Hr(function(){return ct.trans=Ne,ge(Le,Ae,Ne)})}).then(function(Le){if(ce==="readwrite")try{Ne.idbtrans.commit()}catch{}return ce==="readonly"?Le:Ne._completion.then(function(){return Le})})}if(je._state.openComplete)return fr(new me.DatabaseClosed(je._state.dbOpenError));if(!je._state.isBeingOpened){if(!je._state.autoOpen)return fr(new me.DatabaseClosed);je.open().catch(Qe)}return je._state.dbReadyPromise.then(function(){return we(je,ce,ke,ge)})}(this.db,o,[this.name],Z);return q&&(ve._consoleTask=q,ve=ve.catch(function(we){return console.trace(we),fr(we)})),ve}finally{le&&sr()}},lr.prototype.get=function(o,f){var v=this;return o&&o.constructor===Object?this.where(o).first(f):o==null?fr(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return v.core.get({trans:S,key:o}).then(function(k){return v.hook.reading.fire(k)})}).then(f)},lr.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(u(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var f=c(o);if(f.length===1)return this.where(f[0]).equals(o[f[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(le){if(le.compound&&f.every(function(we){return 0<=le.keyPath.indexOf(we)})){for(var ve=0;ve<f.length;++ve)if(f.indexOf(le.keyPath[ve])===-1)return!1;return!0}return!1}).sort(function(le,ve){return le.keyPath.length-ve.keyPath.length})[0];if(v&&this.db._maxKey!==Yn){var q=v.keyPath.slice(0,f.length);return this.where(q).equals(q.map(function(ve){return o[ve]}))}!v&&de&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var S=this.schema.idxByName;function k(le,ve){return Yt(le,ve)===0}var Z=f.reduce(function(ce,ve){var we=ce[0],je=ce[1],ce=S[ve],ke=o[ve];return[we||ce,we||!ce?ii(je,ce&&ce.multi?function(ge){return ge=ee(ge,ve),u(ge)&&ge.some(function(Ne){return k(ke,Ne)})}:function(ge){return k(ke,ee(ge,ve))}):je]},[null,null]),q=Z[0],Z=Z[1];return q?this.where(q.name).equals(o[q.keyPath]).filter(Z):v?this.filter(Z):this.where(f).equals("")},lr.prototype.filter=function(o){return this.toCollection().and(o)},lr.prototype.count=function(o){return this.toCollection().count(o)},lr.prototype.offset=function(o){return this.toCollection().offset(o)},lr.prototype.limit=function(o){return this.toCollection().limit(o)},lr.prototype.each=function(o){return this.toCollection().each(o)},lr.prototype.toArray=function(o){return this.toCollection().toArray(o)},lr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},lr.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,u(o)?"[".concat(o.join("+"),"]"):o))},lr.prototype.reverse=function(){return this.toCollection().reverse()},lr.prototype.mapToClass=function(o){var f,v=this.db,S=this.name;function k(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Vi&&(function(ve,we){if(typeof we!="function"&&we!==null)throw new TypeError("Class extends value "+String(we)+" is not a constructor or null");function je(){this.constructor=ve}t(ve,we),ve.prototype=we===null?Object.create(we):(je.prototype=we.prototype,new je)}(k,f=o),Object.defineProperty(k.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),k.prototype.table=function(){return S},o=k);for(var q=new Set,Z=o.prototype;Z;Z=y(Z))Object.getOwnPropertyNames(Z).forEach(function(ve){return q.add(ve)});function le(ve){if(!ve)return ve;var we,je=Object.create(o.prototype);for(we in ve)if(!q.has(we))try{je[we]=ve[we]}catch{}return je}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=le,this.hook("reading",le),o},lr.prototype.defineClass=function(){return this.mapToClass(function(o){h(this,o)})},lr.prototype.add=function(o,f){var v=this,S=this.schema.primKey,k=S.auto,q=S.keyPath,Z=o;return q&&k&&(Z=va(q)(o)),this._trans("readwrite",function(le){return v.core.mutate({trans:le,type:"add",keys:f!=null?[f]:null,values:[Z]})}).then(function(le){return le.numFailures?nt.reject(le.failures[0]):le.lastResult}).then(function(le){if(q)try{T(o,q,le)}catch{}return le})},lr.prototype.update=function(o,f){return typeof o!="object"||u(o)?this.where(":id").equals(o).modify(f):(o=ee(o,this.schema.primKey.keyPath),o===void 0?fr(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(f))},lr.prototype.put=function(o,f){var v=this,S=this.schema.primKey,k=S.auto,q=S.keyPath,Z=o;return q&&k&&(Z=va(q)(o)),this._trans("readwrite",function(le){return v.core.mutate({trans:le,type:"put",values:[Z],keys:f!=null?[f]:null})}).then(function(le){return le.numFailures?nt.reject(le.failures[0]):le.lastResult}).then(function(le){if(q)try{T(o,q,le)}catch{}return le})},lr.prototype.delete=function(o){var f=this;return this._trans("readwrite",function(v){return f.core.mutate({trans:v,type:"delete",keys:[o]})}).then(function(v){return v.numFailures?nt.reject(v.failures[0]):void 0})},lr.prototype.clear=function(){var o=this;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"deleteRange",range:$a})}).then(function(f){return f.numFailures?nt.reject(f.failures[0]):void 0})},lr.prototype.bulkGet=function(o){var f=this;return this._trans("readonly",function(v){return f.core.getMany({keys:o,trans:v}).then(function(S){return S.map(function(k){return f.hook.reading.fire(k)})})})},lr.prototype.bulkAdd=function(o,f,v){var S=this,k=Array.isArray(f)?f:void 0,q=(v=v||(k?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(Z){var we=S.schema.primKey,le=we.auto,we=we.keyPath;if(we&&k)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==o.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var ve=o.length,we=we&&le?o.map(va(we)):o;return S.core.mutate({trans:Z,type:"add",keys:k,values:we,wantResults:q}).then(function(Ne){var ce=Ne.numFailures,ke=Ne.results,ge=Ne.lastResult,Ne=Ne.failures;if(ce===0)return q?ke:ge;throw new oe("".concat(S.name,".bulkAdd(): ").concat(ce," of ").concat(ve," operations failed"),Ne)})})},lr.prototype.bulkPut=function(o,f,v){var S=this,k=Array.isArray(f)?f:void 0,q=(v=v||(k?void 0:f))?v.allKeys:void 0;return this._trans("readwrite",function(Z){var we=S.schema.primKey,le=we.auto,we=we.keyPath;if(we&&k)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==o.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var ve=o.length,we=we&&le?o.map(va(we)):o;return S.core.mutate({trans:Z,type:"put",keys:k,values:we,wantResults:q}).then(function(Ne){var ce=Ne.numFailures,ke=Ne.results,ge=Ne.lastResult,Ne=Ne.failures;if(ce===0)return q?ke:ge;throw new oe("".concat(S.name,".bulkPut(): ").concat(ce," of ").concat(ve," operations failed"),Ne)})})},lr.prototype.bulkUpdate=function(o){var f=this,v=this.core,S=o.map(function(Z){return Z.key}),k=o.map(function(Z){return Z.changes}),q=[];return this._trans("readwrite",function(Z){return v.getMany({trans:Z,keys:S,cache:"clone"}).then(function(le){var ve=[],we=[];o.forEach(function(ce,ke){var ge=ce.key,Ne=ce.changes,Le=le[ke];if(Le){for(var Ae=0,Te=Object.keys(Ne);Ae<Te.length;Ae++){var Me=Te[Ae],Re=Ne[Me];if(Me===f.schema.primKey.keyPath){if(Yt(Re,ge)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else T(Le,Me,Re)}q.push(ke),ve.push(ge),we.push(Le)}});var je=ve.length;return v.mutate({trans:Z,type:"put",keys:ve,values:we,updates:{keys:S,changeSpecs:k}}).then(function(ce){var ke=ce.numFailures,ge=ce.failures;if(ke===0)return je;for(var Ne=0,Le=Object.keys(ge);Ne<Le.length;Ne++){var Ae,Te=Le[Ne],Me=q[Number(Te)];Me!=null&&(Ae=ge[Te],delete ge[Te],ge[Me]=Ae)}throw new oe("".concat(f.name,".bulkUpdate(): ").concat(ke," of ").concat(je," operations failed"),ge)})})})},lr.prototype.bulkDelete=function(o){var f=this,v=o.length;return this._trans("readwrite",function(S){return f.core.mutate({trans:S,type:"delete",keys:o})}).then(function(Z){var k=Z.numFailures,q=Z.lastResult,Z=Z.failures;if(k===0)return q;throw new oe("".concat(f.name,".bulkDelete(): ").concat(k," of ").concat(v," operations failed"),Z)})},lr);function lr(){}function ai(o){function f(Z,le){if(le){for(var ve=arguments.length,we=new Array(ve-1);--ve;)we[ve-1]=arguments[ve];return v[Z].subscribe.apply(null,we),o}if(typeof Z=="string")return v[Z]}var v={};f.addEventType=q;for(var S=1,k=arguments.length;S<k;++S)q(arguments[S]);return f;function q(Z,le,ve){if(typeof Z!="object"){var we;le=le||rt;var je={subscribers:[],fire:ve=ve||Qe,subscribe:function(ce){je.subscribers.indexOf(ce)===-1&&(je.subscribers.push(ce),je.fire=le(je.fire,ce))},unsubscribe:function(ce){je.subscribers=je.subscribers.filter(function(ke){return ke!==ce}),je.fire=je.subscribers.reduce(le,ve)}};return v[Z]=f[Z]=je}c(we=Z).forEach(function(ce){var ke=we[ce];if(u(ke))q(ce,we[ce][0],we[ce][1]);else{if(ke!=="asap")throw new me.InvalidArgument("Invalid event config");var ge=q(ce,dt,function(){for(var Ne=arguments.length,Le=new Array(Ne);Ne--;)Le[Ne]=arguments[Ne];ge.subscribers.forEach(function(Ae){G(function(){Ae.apply(null,Le)})})})}})}}function $i(o,f){return L(f).from({prototype:o}),f}function an(o,f){return!(o.filter||o.algorithm||o.or)&&(f?o.justLimit:!o.replayFilter)}function Pi(o,f){o.filter=ii(o.filter,f)}function sn(o,f,v){var S=o.replayFilter;o.replayFilter=S?function(){return ii(S(),f())}:f,o.justLimit=v&&!S}function Li(o,f){if(o.isPrimKey)return f.primaryKey;var v=f.getIndexByKeyPath(o.index);if(!v)throw new me.Schema("KeyPath "+o.index+" on object store "+f.name+" is not indexed");return v}function Ja(o,f,v){var S=Li(o,f.schema);return f.openCursor({trans:v,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:S,range:o.range}})}function ya(o,f,v,S){var k=o.replayFilter?ii(o.filter,o.replayFilter()):o.filter;if(o.or){var q={},Z=function(le,ve,we){var je,ce;k&&!k(ve,we,function(ke){return ve.stop(ke)},function(ke){return ve.fail(ke)})||((ce=""+(je=ve.primaryKey))=="[object ArrayBuffer]"&&(ce=""+new Uint8Array(je)),b(q,ce)||(q[ce]=!0,f(le,ve,we)))};return Promise.all([o.or._iterate(Z,v),Qa(Ja(o,S,v),o.algorithm,Z,!o.keysOnly&&o.valueMapper)])}return Qa(Ja(o,S,v),ii(o.algorithm,k),f,!o.keysOnly&&o.valueMapper)}function Qa(o,f,v,S){var k=$t(S?function(q,Z,le){return v(S(q),Z,le)}:v);return o.then(function(q){if(q)return q.start(function(){var Z=function(){return q.continue()};f&&!f(q,function(le){return Z=le},function(le){q.stop(le),Z=Qe},function(le){q.fail(le),Z=Qe})||k(q.value,q,function(le){return Z=le}),Z()})})}var Gi=(Xa.prototype.execute=function(o){var f=this["@@propmod"];if(f.add!==void 0){var v=f.add;if(u(v))return a(a([],u(o)?o:[],!0),v,!0).sort();if(typeof v=="number")return(Number(o)||0)+v;if(typeof v=="bigint")try{return BigInt(o)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(f.remove!==void 0){var S=f.remove;if(u(S))return u(o)?o.filter(function(k){return!S.includes(k)}).sort():[];if(typeof S=="number")return Number(o)-S;if(typeof S=="bigint")try{return BigInt(o)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return v=(v=f.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof o=="string"&&o.startsWith(v)?f.replacePrefix[1]+o.substring(v.length):o},Xa);function Xa(o){this["@@propmod"]=o}var Ws=(Qt.prototype._read=function(o,f){var v=this._ctx;return v.error?v.table._trans(null,fr.bind(null,v.error)):v.table._trans("readonly",o).then(f)},Qt.prototype._write=function(o){var f=this._ctx;return f.error?f.table._trans(null,fr.bind(null,f.error)):f.table._trans("readwrite",o,"locked")},Qt.prototype._addAlgorithm=function(o){var f=this._ctx;f.algorithm=ii(f.algorithm,o)},Qt.prototype._iterate=function(o,f){return ya(this._ctx,o,f,this._ctx.table.core)},Qt.prototype.clone=function(o){var f=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return o&&h(v,o),f._ctx=v,f},Qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Qt.prototype.each=function(o){var f=this._ctx;return this._read(function(v){return ya(f,o,v,f.table.core)})},Qt.prototype.count=function(o){var f=this;return this._read(function(v){var S=f._ctx,k=S.table.core;if(an(S,!0))return k.count({trans:v,query:{index:Li(S,k.schema),range:S.range}}).then(function(Z){return Math.min(Z,S.limit)});var q=0;return ya(S,function(){return++q,!1},v,k).then(function(){return q})}).then(o)},Qt.prototype.sortBy=function(o,f){var v=o.split(".").reverse(),S=v[0],k=v.length-1;function q(ve,we){return we?q(ve[v[we]],we-1):ve[S]}var Z=this._ctx.dir==="next"?1:-1;function le(ve,we){return Yt(q(ve,k),q(we,k))*Z}return this.toArray(function(ve){return ve.sort(le)}).then(f)},Qt.prototype.toArray=function(o){var f=this;return this._read(function(v){var S=f._ctx;if(S.dir==="next"&&an(S,!0)&&0<S.limit){var k=S.valueMapper,q=Li(S,S.table.core.schema);return S.table.core.query({trans:v,limit:S.limit,values:!0,query:{index:q,range:S.range}}).then(function(le){return le=le.result,k?le.map(k):le})}var Z=[];return ya(S,function(le){return Z.push(le)},v,S.table.core).then(function(){return Z})},o)},Qt.prototype.offset=function(o){var f=this._ctx;return o<=0||(f.offset+=o,an(f)?sn(f,function(){var v=o;return function(S,k){return v===0||(v===1?--v:k(function(){S.advance(v),v=0}),!1)}}):sn(f,function(){var v=o;return function(){return--v<0}})),this},Qt.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),sn(this._ctx,function(){var f=o;return function(v,S,k){return--f<=0&&S(k),0<=f}},!0),this},Qt.prototype.until=function(o,f){return Pi(this._ctx,function(v,S,k){return!o(v.value)||(S(k),f)}),this},Qt.prototype.first=function(o){return this.limit(1).toArray(function(f){return f[0]}).then(o)},Qt.prototype.last=function(o){return this.reverse().first(o)},Qt.prototype.filter=function(o){var f;return Pi(this._ctx,function(v){return o(v.value)}),(f=this._ctx).isMatch=ii(f.isMatch,o),this},Qt.prototype.and=function(o){return this.filter(o)},Qt.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},Qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Qt.prototype.desc=function(){return this.reverse()},Qt.prototype.eachKey=function(o){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,S){o(S.key,S)})},Qt.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},Qt.prototype.eachPrimaryKey=function(o){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(v,S){o(S.primaryKey,S)})},Qt.prototype.keys=function(o){var f=this._ctx;f.keysOnly=!f.isMatch;var v=[];return this.each(function(S,k){v.push(k.key)}).then(function(){return v}).then(o)},Qt.prototype.primaryKeys=function(o){var f=this._ctx;if(f.dir==="next"&&an(f,!0)&&0<f.limit)return this._read(function(S){var k=Li(f,f.table.core.schema);return f.table.core.query({trans:S,values:!1,limit:f.limit,query:{index:k,range:f.range}})}).then(function(S){return S.result}).then(o);f.keysOnly=!f.isMatch;var v=[];return this.each(function(S,k){v.push(k.primaryKey)}).then(function(){return v}).then(o)},Qt.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},Qt.prototype.firstKey=function(o){return this.limit(1).keys(function(f){return f[0]}).then(o)},Qt.prototype.lastKey=function(o){return this.reverse().firstKey(o)},Qt.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var f={};return Pi(this._ctx,function(k){var S=k.primaryKey.toString(),k=b(f,S);return f[S]=!0,!k}),this},Qt.prototype.modify=function(o){var f=this,v=this._ctx;return this._write(function(S){var k,q,Z;Z=typeof o=="function"?o:(k=c(o),q=k.length,function(Ae){for(var Te=!1,Me=0;Me<q;++Me){var Re=k[Me],Ve=o[Re],it=ee(Ae,Re);Ve instanceof Gi?(T(Ae,Re,Ve.execute(it)),Te=!0):it!==Ve&&(T(Ae,Re,Ve),Te=!0)}return Te});var le=v.table.core,ce=le.schema.primaryKey,ve=ce.outbound,we=ce.extractKey,je=200,ce=f.db._options.modifyChunkSize;ce&&(je=typeof ce=="object"?ce[le.name]||ce["*"]||200:ce);function ke(Ae,Re){var Me=Re.failures,Re=Re.numFailures;Ne+=Ae-Re;for(var Ve=0,it=c(Me);Ve<it.length;Ve++){var ut=it[Ve];ge.push(Me[ut])}}var ge=[],Ne=0,Le=[];return f.clone().primaryKeys().then(function(Ae){function Te(Re){var Ve=Math.min(je,Ae.length-Re);return le.getMany({trans:S,keys:Ae.slice(Re,Re+Ve),cache:"immutable"}).then(function(it){for(var ut=[],at=[],st=ve?[]:null,ft=[],ot=0;ot<Ve;++ot){var pt=it[ot],wt={value:M(pt),primKey:Ae[Re+ot]};Z.call(wt,wt.value,wt)!==!1&&(wt.value==null?ft.push(Ae[Re+ot]):ve||Yt(we(pt),we(wt.value))===0?(at.push(wt.value),ve&&st.push(Ae[Re+ot])):(ft.push(Ae[Re+ot]),ut.push(wt.value)))}return Promise.resolve(0<ut.length&&le.mutate({trans:S,type:"add",values:ut}).then(function(St){for(var kt in St.failures)ft.splice(parseInt(kt),1);ke(ut.length,St)})).then(function(){return(0<at.length||Me&&typeof o=="object")&&le.mutate({trans:S,type:"put",keys:st,values:at,criteria:Me,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<Re}).then(function(St){return ke(at.length,St)})}).then(function(){return(0<ft.length||Me&&o===Za)&&le.mutate({trans:S,type:"delete",keys:ft,criteria:Me,isAdditionalChunk:0<Re}).then(function(St){return ke(ft.length,St)})}).then(function(){return Ae.length>Re+Ve&&Te(Re+je)})})}var Me=an(v)&&v.limit===1/0&&(typeof o!="function"||o===Za)&&{index:v.index,range:v.range};return Te(0).then(function(){if(0<ge.length)throw new ie("Error modifying one or more objects",ge,Ne,Le);return Ae.length})})})},Qt.prototype.delete=function(){var o=this._ctx,f=o.range;return an(o)&&(o.isPrimKey||f.type===3)?this._write(function(v){var S=o.table.core.schema.primaryKey,k=f;return o.table.core.count({trans:v,query:{index:S,range:k}}).then(function(q){return o.table.core.mutate({trans:v,type:"deleteRange",range:k}).then(function(Z){var le=Z.failures;if(Z.lastResult,Z.results,Z=Z.numFailures,Z)throw new ie("Could not delete some values",Object.keys(le).map(function(ve){return le[ve]}),q-Z);return q-Z})})}):this.modify(Za)},Qt);function Qt(){}var Za=function(o,f){return f.value=null};function Ks(o,f){return o<f?-1:o===f?0:1}function Vs(o,f){return f<o?-1:o===f?0:1}function Pr(o,f,v){return o=o instanceof ws?new o.Collection(o):o,o._ctx.error=new(v||TypeError)(f),o}function qn(o){return new o.Collection(o,function(){return Yr("")}).limit(0)}function si(o,f,v,S){var k,q,Z,le,ve,we,je,ce=v.length;if(!v.every(function(Ne){return typeof Ne=="string"}))return Pr(o,xs);function ke(Ne){k=Ne==="next"?function(Ae){return Ae.toUpperCase()}:function(Ae){return Ae.toLowerCase()},q=Ne==="next"?function(Ae){return Ae.toLowerCase()}:function(Ae){return Ae.toUpperCase()},Z=Ne==="next"?Ks:Vs;var Le=v.map(function(Ae){return{lower:q(Ae),upper:k(Ae)}}).sort(function(Ae,Te){return Z(Ae.lower,Te.lower)});le=Le.map(function(Ae){return Ae.upper}),ve=Le.map(function(Ae){return Ae.lower}),je=(we=Ne)==="next"?"":S}ke("next"),o=new o.Collection(o,function(){return Bn(le[0],ve[ce-1]+S)}),o._ondirectionchange=function(Ne){ke(Ne)};var ge=0;return o._addAlgorithm(function(Ne,Le,Ae){var Te=Ne.key;if(typeof Te!="string")return!1;var Me=q(Te);if(f(Me,ve,ge))return!0;for(var Re=null,Ve=ge;Ve<ce;++Ve){var it=function(ut,at,st,ft,ot,pt){for(var wt=Math.min(ut.length,ft.length),St=-1,kt=0;kt<wt;++kt){var nr=at[kt];if(nr!==ft[kt])return ot(ut[kt],st[kt])<0?ut.substr(0,kt)+st[kt]+st.substr(kt+1):ot(ut[kt],ft[kt])<0?ut.substr(0,kt)+ft[kt]+st.substr(kt+1):0<=St?ut.substr(0,St)+at[St]+st.substr(St+1):null;ot(ut[kt],nr)<0&&(St=kt)}return wt<ft.length&&pt==="next"?ut+st.substr(ut.length):wt<ut.length&&pt==="prev"?ut.substr(0,st.length):St<0?null:ut.substr(0,St)+ft[St]+st.substr(St+1)}(Te,Me,le[Ve],ve[Ve],Z,we);it===null&&Re===null?ge=Ve+1:(Re===null||0<Z(Re,it))&&(Re=it)}return Le(Re!==null?function(){Ne.continue(Re+je)}:Ae),!1}),o}function Bn(o,f,v,S){return{type:2,lower:o,upper:f,lowerOpen:v,upperOpen:S}}function Yr(o){return{type:1,lower:o,upper:o}}var ws=(Object.defineProperty(Lr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lr.prototype.between=function(o,f,v,S){v=v!==!1,S=S===!0;try{return 0<this._cmp(o,f)||this._cmp(o,f)===0&&(v||S)&&(!v||!S)?qn(this):new this.Collection(this,function(){return Bn(o,f,!v,!S)})}catch{return Pr(this,Mn)}},Lr.prototype.equals=function(o){return o==null?Pr(this,Mn):new this.Collection(this,function(){return Yr(o)})},Lr.prototype.above=function(o){return o==null?Pr(this,Mn):new this.Collection(this,function(){return Bn(o,void 0,!0)})},Lr.prototype.aboveOrEqual=function(o){return o==null?Pr(this,Mn):new this.Collection(this,function(){return Bn(o,void 0,!1)})},Lr.prototype.below=function(o){return o==null?Pr(this,Mn):new this.Collection(this,function(){return Bn(void 0,o,!1,!0)})},Lr.prototype.belowOrEqual=function(o){return o==null?Pr(this,Mn):new this.Collection(this,function(){return Bn(void 0,o)})},Lr.prototype.startsWith=function(o){return typeof o!="string"?Pr(this,xs):this.between(o,o+Yn,!0,!0)},Lr.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):si(this,function(f,v){return f.indexOf(v[0])===0},[o],Yn)},Lr.prototype.equalsIgnoreCase=function(o){return si(this,function(f,v){return f===v[0]},[o],"")},Lr.prototype.anyOfIgnoreCase=function(){var o=he.apply(K,arguments);return o.length===0?qn(this):si(this,function(f,v){return v.indexOf(f)!==-1},o,"")},Lr.prototype.startsWithAnyOfIgnoreCase=function(){var o=he.apply(K,arguments);return o.length===0?qn(this):si(this,function(f,v){return v.some(function(S){return f.indexOf(S)===0})},o,Yn)},Lr.prototype.anyOf=function(){var o=this,f=he.apply(K,arguments),v=this._cmp;try{f.sort(v)}catch{return Pr(this,Mn)}if(f.length===0)return qn(this);var S=new this.Collection(this,function(){return Bn(f[0],f[f.length-1])});S._ondirectionchange=function(q){v=q==="next"?o._ascending:o._descending,f.sort(v)};var k=0;return S._addAlgorithm(function(q,Z,le){for(var ve=q.key;0<v(ve,f[k]);)if(++k===f.length)return Z(le),!1;return v(ve,f[k])===0||(Z(function(){q.continue(f[k])}),!1)}),S},Lr.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lr.prototype.noneOf=function(){var o=he.apply(K,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Pr(this,Mn)}var f=o.reduce(function(v,S){return v?v.concat([[v[v.length-1][1],S]]):[[-1/0,S]]},null);return f.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},Lr.prototype.inAnyRange=function(Te,f){var v=this,S=this._cmp,k=this._ascending,q=this._descending,Z=this._min,le=this._max;if(Te.length===0)return qn(this);if(!Te.every(function(Me){return Me[0]!==void 0&&Me[1]!==void 0&&k(Me[0],Me[1])<=0}))return Pr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var ve=!f||f.includeLowers!==!1,we=f&&f.includeUppers===!0,je,ce=k;function ke(Me,Re){return ce(Me[0],Re[0])}try{(je=Te.reduce(function(Me,Re){for(var Ve=0,it=Me.length;Ve<it;++Ve){var ut=Me[Ve];if(S(Re[0],ut[1])<0&&0<S(Re[1],ut[0])){ut[0]=Z(ut[0],Re[0]),ut[1]=le(ut[1],Re[1]);break}}return Ve===it&&Me.push(Re),Me},[])).sort(ke)}catch{return Pr(this,Mn)}var ge=0,Ne=we?function(Me){return 0<k(Me,je[ge][1])}:function(Me){return 0<=k(Me,je[ge][1])},Le=ve?function(Me){return 0<q(Me,je[ge][0])}:function(Me){return 0<=q(Me,je[ge][0])},Ae=Ne,Te=new this.Collection(this,function(){return Bn(je[0][0],je[je.length-1][1],!ve,!we)});return Te._ondirectionchange=function(Me){ce=Me==="next"?(Ae=Ne,k):(Ae=Le,q),je.sort(ke)},Te._addAlgorithm(function(Me,Re,Ve){for(var it,ut=Me.key;Ae(ut);)if(++ge===je.length)return Re(Ve),!1;return!Ne(it=ut)&&!Le(it)||(v._cmp(ut,je[ge][1])===0||v._cmp(ut,je[ge][0])===0||Re(function(){ce===k?Me.continue(je[ge][0]):Me.continue(je[ge][1])}),!1)}),Te},Lr.prototype.startsWithAnyOf=function(){var o=he.apply(K,arguments);return o.every(function(f){return typeof f=="string"})?o.length===0?qn(this):this.inAnyRange(o.map(function(f){return[f,f+Yn]})):Pr(this,"startsWithAnyOf() only works with strings")},Lr);function Lr(){}function Dt(o){return $t(function(f){return Yi(f),o(f.target.error),!1})}function Yi(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Ji="storagemutated",Fn="x-storagemutated-1",Un=ai(null,Ji),Ns=(cn.prototype._lock=function(){return z(!ct.global),++this._reculock,this._reculock!==1||ct.global||(ct.lockOwnerFor=this),this},cn.prototype._unlock=function(){if(z(!ct.global),--this._reculock==0)for(ct.global||(ct.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{Cn(o[1],o[0])}catch{}}return this},cn.prototype._locked=function(){return this._reculock&&ct.lockOwnerFor!==this},cn.prototype.create=function(o){var f=this;if(!this.mode)return this;var v=this.db.idbdb,S=this.db._state.dbOpenError;if(z(!this.idbtrans),!o&&!v)switch(S&&S.name){case"DatabaseClosedError":throw new me.DatabaseClosed(S);case"MissingAPIError":throw new me.MissingAPI(S.message,S);default:throw new me.OpenFailed(S)}if(!this.active)throw new me.TransactionInactive;return z(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=$t(function(k){Yi(k),f._reject(o.error)}),o.onabort=$t(function(k){Yi(k),f.active&&f._reject(new me.Abort(o.error)),f.active=!1,f.on("abort").fire(k)}),o.oncomplete=$t(function(){f.active=!1,f._resolve(),"mutatedParts"in o&&Un.storagemutated.fire(o.mutatedParts)}),this},cn.prototype._promise=function(o,f,v){var S=this;if(o==="readwrite"&&this.mode!=="readwrite")return fr(new me.ReadOnly("Transaction is readonly"));if(!this.active)return fr(new me.TransactionInactive);if(this._locked())return new nt(function(q,Z){S._blockedFuncs.push([function(){S._promise(o,f,v).then(q,Z)},ct])});if(v)return Hr(function(){var q=new nt(function(Z,le){S._lock();var ve=f(Z,le,S);ve&&ve.then&&ve.then(Z,le)});return q.finally(function(){return S._unlock()}),q._lib=!0,q});var k=new nt(function(q,Z){var le=f(q,Z,S);le&&le.then&&le.then(q,Z)});return k._lib=!0,k},cn.prototype._root=function(){return this.parent?this.parent._root():this},cn.prototype.waitFor=function(o){var f,v=this._root(),S=nt.resolve(o);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return S}):(v._waitingFor=S,v._waitingQueue=[],f=v.idbtrans.objectStore(v.storeNames[0]),function q(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(f.get(-1/0).onsuccess=q)}());var k=v._waitingFor;return new nt(function(q,Z){S.then(function(le){return v._waitingQueue.push($t(q.bind(null,le)))},function(le){return v._waitingQueue.push($t(Z.bind(null,le)))}).finally(function(){v._waitingFor===k&&(v._waitingFor=null)})})},cn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},cn.prototype.table=function(o){var f=this._memoizedTables||(this._memoizedTables={});if(b(f,o))return f[o];var v=this.schema[o];if(!v)throw new me.NotFound("Table "+o+" not part of transaction");return v=new this.db.Table(o,v,this),v.core=this.db.core.table(o),f[o]=v},cn);function cn(){}function Qi(o,f,v,S,k,q,Z){return{name:o,keyPath:f,unique:v,multi:S,auto:k,compound:q,src:(v&&!Z?"&":"")+(S?"*":"")+(k?"++":"")+As(f)}}function As(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function es(o,f,v){return{name:o,primKey:f,indexes:v,mappedClass:null,idxByName:(S=function(k){return[k.name,k]},v.reduce(function(k,q,Z){return Z=S(q,Z),Z&&(k[Z[0]]=Z[1]),k},{}))};var S}var Xi=function(o){try{return o.only([[]]),Xi=function(){return[[]]},[[]]}catch{return Xi=function(){return Yn},Yn}};function Zi(o){return o==null?function(){}:typeof o=="string"?(f=o).split(".").length===1?function(v){return v[f]}:function(v){return ee(v,f)}:function(v){return ee(v,o)};var f}function ki(o){return[].slice.call(o)}var Ci=0;function ea(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function ta(o,f,ve){function S(Ae){if(Ae.type===3)return null;if(Ae.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ge=Ae.lower,Ne=Ae.upper,Le=Ae.lowerOpen,Ae=Ae.upperOpen;return ge===void 0?Ne===void 0?null:f.upperBound(Ne,!!Ae):Ne===void 0?f.lowerBound(ge,!!Le):f.bound(ge,Ne,!!Le,!!Ae)}function k(ke){var ge,Ne=ke.name;return{name:Ne,schema:ke,mutate:function(Le){var Ae=Le.trans,Te=Le.type,Me=Le.keys,Re=Le.values,Ve=Le.range;return new Promise(function(it,ut){it=$t(it);var at=Ae.objectStore(Ne),st=at.keyPath==null,ft=Te==="put"||Te==="add";if(!ft&&Te!=="delete"&&Te!=="deleteRange")throw new Error("Invalid operation type: "+Te);var ot,pt=(Me||Re||{length:1}).length;if(Me&&Re&&Me.length!==Re.length)throw new Error("Given keys array must have same length as given values array.");if(pt===0)return it({numFailures:0,failures:{},results:[],lastResult:void 0});function wt(Xr){++nr,Yi(Xr)}var St=[],kt=[],nr=0;if(Te==="deleteRange"){if(Ve.type===4)return it({numFailures:nr,failures:kt,results:[],lastResult:void 0});Ve.type===3?St.push(ot=at.clear()):St.push(ot=at.delete(S(Ve)))}else{var st=ft?st?[Re,Me]:[Re,null]:[Me,null],It=st[0],Or=st[1];if(ft)for(var kr=0;kr<pt;++kr)St.push(ot=Or&&Or[kr]!==void 0?at[Te](It[kr],Or[kr]):at[Te](It[kr])),ot.onerror=wt;else for(kr=0;kr<pt;++kr)St.push(ot=at[Te](It[kr])),ot.onerror=wt}function ca(Xr){Xr=Xr.target.result,St.forEach(function(Xn,dn){return Xn.error!=null&&(kt[dn]=Xn.error)}),it({numFailures:nr,failures:kt,results:Te==="delete"?Me:St.map(function(Xn){return Xn.result}),lastResult:Xr})}ot.onerror=function(Xr){wt(Xr),ca(Xr)},ot.onsuccess=ca})},getMany:function(Le){var Ae=Le.trans,Te=Le.keys;return new Promise(function(Me,Re){Me=$t(Me);for(var Ve,it=Ae.objectStore(Ne),ut=Te.length,at=new Array(ut),st=0,ft=0,ot=function(St){St=St.target,at[St._pos]=St.result,++ft===st&&Me(at)},pt=Dt(Re),wt=0;wt<ut;++wt)Te[wt]!=null&&((Ve=it.get(Te[wt]))._pos=wt,Ve.onsuccess=ot,Ve.onerror=pt,++st);st===0&&Me(at)})},get:function(Le){var Ae=Le.trans,Te=Le.key;return new Promise(function(Me,Re){Me=$t(Me);var Ve=Ae.objectStore(Ne).get(Te);Ve.onsuccess=function(it){return Me(it.target.result)},Ve.onerror=Dt(Re)})},query:(ge=we,function(Le){return new Promise(function(Ae,Te){Ae=$t(Ae);var Me,Re,Ve,st=Le.trans,it=Le.values,ut=Le.limit,ot=Le.query,at=ut===1/0?void 0:ut,ft=ot.index,ot=ot.range,st=st.objectStore(Ne),ft=ft.isPrimaryKey?st:st.index(ft.name),ot=S(ot);if(ut===0)return Ae({result:[]});ge?((at=it?ft.getAll(ot,at):ft.getAllKeys(ot,at)).onsuccess=function(pt){return Ae({result:pt.target.result})},at.onerror=Dt(Te)):(Me=0,Re=!it&&"openKeyCursor"in ft?ft.openKeyCursor(ot):ft.openCursor(ot),Ve=[],Re.onsuccess=function(pt){var wt=Re.result;return wt?(Ve.push(it?wt.value:wt.primaryKey),++Me===ut?Ae({result:Ve}):void wt.continue()):Ae({result:Ve})},Re.onerror=Dt(Te))})}),openCursor:function(Le){var Ae=Le.trans,Te=Le.values,Me=Le.query,Re=Le.reverse,Ve=Le.unique;return new Promise(function(it,ut){it=$t(it);var ft=Me.index,at=Me.range,st=Ae.objectStore(Ne),st=ft.isPrimaryKey?st:st.index(ft.name),ft=Re?Ve?"prevunique":"prev":Ve?"nextunique":"next",ot=!Te&&"openKeyCursor"in st?st.openKeyCursor(S(at),ft):st.openCursor(S(at),ft);ot.onerror=Dt(ut),ot.onsuccess=$t(function(pt){var wt,St,kt,nr,It=ot.result;It?(It.___id=++Ci,It.done=!1,wt=It.continue.bind(It),St=(St=It.continuePrimaryKey)&&St.bind(It),kt=It.advance.bind(It),nr=function(){throw new Error("Cursor not stopped")},It.trans=Ae,It.stop=It.continue=It.continuePrimaryKey=It.advance=function(){throw new Error("Cursor not started")},It.fail=$t(ut),It.next=function(){var Or=this,kr=1;return this.start(function(){return kr--?Or.continue():Or.stop()}).then(function(){return Or})},It.start=function(Or){function kr(){if(ot.result)try{Or()}catch(Xr){It.fail(Xr)}else It.done=!0,It.start=function(){throw new Error("Cursor behind last entry")},It.stop()}var ca=new Promise(function(Xr,Xn){Xr=$t(Xr),ot.onerror=Dt(Xn),It.fail=Xn,It.stop=function(dn){It.stop=It.continue=It.continuePrimaryKey=It.advance=nr,Xr(dn)}});return ot.onsuccess=$t(function(Xr){ot.onsuccess=kr,kr()}),It.continue=wt,It.continuePrimaryKey=St,It.advance=kt,kr(),ca},it(It)):it(null)},ut)})},count:function(Le){var Ae=Le.query,Te=Le.trans,Me=Ae.index,Re=Ae.range;return new Promise(function(Ve,it){var ut=Te.objectStore(Ne),at=Me.isPrimaryKey?ut:ut.index(Me.name),ut=S(Re),at=ut?at.count(ut):at.count();at.onsuccess=$t(function(st){return Ve(st.target.result)}),at.onerror=Dt(it)})}}}var q,Z,le,je=(Z=ve,le=ki((q=o).objectStoreNames),{schema:{name:q.name,tables:le.map(function(ke){return Z.objectStore(ke)}).map(function(ke){var ge=ke.keyPath,Ae=ke.autoIncrement,Ne=u(ge),Le={},Ae={name:ke.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ge==null,compound:Ne,keyPath:ge,autoIncrement:Ae,unique:!0,extractKey:Zi(ge)},indexes:ki(ke.indexNames).map(function(Te){return ke.index(Te)}).map(function(Ve){var Me=Ve.name,Re=Ve.unique,it=Ve.multiEntry,Ve=Ve.keyPath,it={name:Me,compound:u(Ve),keyPath:Ve,unique:Re,multiEntry:it,extractKey:Zi(Ve)};return Le[ea(Ve)]=it}),getIndexByKeyPath:function(Te){return Le[ea(Te)]}};return Le[":id"]=Ae.primaryKey,ge!=null&&(Le[ea(ge)]=Ae.primaryKey),Ae})},hasGetAll:0<le.length&&"getAll"in Z.objectStore(le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ve=je.schema,we=je.hasGetAll,je=ve.tables.map(k),ce={};return je.forEach(function(ke){return ce[ke.name]=ke}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(ke){if(!ce[ke])throw new Error("Table '".concat(ke,"' not found"));return ce[ke]},MIN_KEY:-1/0,MAX_KEY:Xi(f),schema:ve}}function ts(o,f,v,S){var k=v.IDBKeyRange;return v.indexedDB,{dbcore:(S=ta(f,k,S),o.dbcore.reduce(function(q,Z){return Z=Z.create,n(n({},q),Z(q))},S))}}function oi(o,S){var v=S.db,S=ts(o._middlewares,v,o._deps,S);o.core=S.dbcore,o.tables.forEach(function(k){var q=k.name;o.core.schema.tables.some(function(Z){return Z.name===q})&&(k.core=o.core.table(q),o[q]instanceof o.Table&&(o[q].core=k.core))})}function ra(o,f,v,S){v.forEach(function(k){var q=S[k];f.forEach(function(Z){var le=function ve(we,je){return O(we,je)||(we=y(we))&&ve(we,je)}(Z,k);(!le||"value"in le&&le.value===void 0)&&(Z===o.Transaction.prototype||Z instanceof o.Transaction?_(Z,k,{get:function(){return this.table(k)},set:function(ve){m(this,k,{value:ve,writable:!0,configurable:!0,enumerable:!0})}}):Z[k]=new o.Table(k,q))})})}function ba(o,f){f.forEach(function(v){for(var S in v)v[S]instanceof o.Table&&delete v[S]})}function Ss(o,f){return o._cfg.version-f._cfg.version}function js(o,f,v,S){var k=o._dbSchema;v.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=es("$meta",_s("")[0],[]),o._storeNames.push("$meta"));var q=o._createTransaction("readwrite",o._storeNames,k);q.create(v),q._completion.catch(S);var Z=q._reject.bind(q),le=ct.transless||ct;Hr(function(){return ct.trans=q,ct.transless=le,f!==0?(oi(o,v),we=f,((ve=q).storeNames.includes("$meta")?ve.table("$meta").get("version").then(function(je){return je??we}):nt.resolve(we)).then(function(je){return ke=je,ge=q,Ne=v,Le=[],je=(ce=o)._versions,Ae=ce._dbSchema=Fi(0,ce.idbdb,Ne),(je=je.filter(function(Te){return Te._cfg.version>=ke})).length!==0?(je.forEach(function(Te){Le.push(function(){var Me=Ae,Re=Te._cfg.dbschema;Qn(ce,Me,Ne),Qn(ce,Re,Ne),Ae=ce._dbSchema=Re;var Ve=zn(Me,Re);Ve.add.forEach(function(ft){rs(Ne,ft[0],ft[1].primKey,ft[1].indexes)}),Ve.change.forEach(function(ft){if(ft.recreate)throw new me.Upgrade("Not yet support for changing primary key");var ot=Ne.objectStore(ft.name);ft.add.forEach(function(pt){return pn(ot,pt)}),ft.change.forEach(function(pt){ot.deleteIndex(pt.name),pn(ot,pt)}),ft.del.forEach(function(pt){return ot.deleteIndex(pt)})});var it=Te._cfg.contentUpgrade;if(it&&Te._cfg.version>ke){oi(ce,Ne),ge._memoizedTables={};var ut=U(Re);Ve.del.forEach(function(ft){ut[ft]=Me[ft]}),ba(ce,[ce.Transaction.prototype]),ra(ce,[ce.Transaction.prototype],c(ut),ut),ge.schema=ut;var at,st=Oe(it);return st&&nn(),Ve=nt.follow(function(){var ft;(at=it(ge))&&st&&(ft=Wr.bind(null,null),at.then(ft,ft))}),at&&typeof at.then=="function"?nt.resolve(at):Ve.then(function(){return at})}}),Le.push(function(Me){var Re,Ve,it=Te._cfg.dbschema;Re=it,Ve=Me,[].slice.call(Ve.db.objectStoreNames).forEach(function(ut){return Re[ut]==null&&Ve.db.deleteObjectStore(ut)}),ba(ce,[ce.Transaction.prototype]),ra(ce,[ce.Transaction.prototype],ce._storeNames,ce._dbSchema),ge.schema=ce._dbSchema}),Le.push(function(Me){ce.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ce.idbdb.version/10)===Te._cfg.version?(ce.idbdb.deleteObjectStore("$meta"),delete ce._dbSchema.$meta,ce._storeNames=ce._storeNames.filter(function(Re){return Re!=="$meta"})):Me.objectStore("$meta").put(Te._cfg.version,"version"))})}),function Te(){return Le.length?nt.resolve(Le.shift()(ge.idbtrans)).then(Te):nt.resolve()}().then(function(){li(Ae,Ne)})):nt.resolve();var ce,ke,ge,Ne,Le,Ae}).catch(Z)):(c(k).forEach(function(je){rs(v,je,k[je].primKey,k[je].indexes)}),oi(o,v),void nt.follow(function(){return o.on.populate.fire(q)}).catch(Z));var ve,we})}function Jn(o,f){li(o._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var v=Fi(0,o.idbdb,f);Qn(o,o._dbSchema,f);for(var S=0,k=zn(v,o._dbSchema).change;S<k.length;S++){var q=function(Z){if(Z.change.length||Z.recreate)return console.warn("Unable to patch indexes of table ".concat(Z.name," because it has changes on the type of index or primary key.")),{value:void 0};var le=f.objectStore(Z.name);Z.add.forEach(function(ve){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Z.name,".").concat(ve.src)),pn(le,ve)})}(k[S]);if(typeof q=="object")return q.value}}function zn(o,f){var v,S={del:[],add:[],change:[]};for(v in o)f[v]||S.del.push(v);for(v in f){var k=o[v],q=f[v];if(k){var Z={name:v,def:q,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(q.primKey.keyPath||"")||k.primKey.auto!==q.primKey.auto)Z.recreate=!0,S.change.push(Z);else{var le=k.idxByName,ve=q.idxByName,we=void 0;for(we in le)ve[we]||Z.del.push(we);for(we in ve){var je=le[we],ce=ve[we];je?je.src!==ce.src&&Z.change.push(ce):Z.add.push(ce)}(0<Z.del.length||0<Z.add.length||0<Z.change.length)&&S.change.push(Z)}}else S.add.push([v,q])}return S}function rs(o,f,v,S){var k=o.db.createObjectStore(f,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return S.forEach(function(q){return pn(k,q)}),k}function li(o,f){c(o).forEach(function(v){f.db.objectStoreNames.contains(v)||(de&&console.debug("Dexie: Creating missing table",v),rs(f,v,o[v].primKey,o[v].indexes))})}function pn(o,f){o.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function Fi(o,f,v){var S={};return j(f.objectStoreNames,0).forEach(function(k){for(var q=v.objectStore(k),Z=Qi(As(we=q.keyPath),we||"",!0,!1,!!q.autoIncrement,we&&typeof we!="string",!0),le=[],ve=0;ve<q.indexNames.length;++ve){var je=q.index(q.indexNames[ve]),we=je.keyPath,je=Qi(je.name,we,!!je.unique,!!je.multiEntry,!1,we&&typeof we!="string",!1);le.push(je)}S[k]=es(k,Z,le)}),S}function Qn(o,f,v){for(var S=v.db.objectStoreNames,k=0;k<S.length;++k){var q=S[k],Z=v.objectStore(q);o._hasGetAll="getAll"in Z;for(var le=0;le<Z.indexNames.length;++le){var ve=Z.indexNames[le],we=Z.index(ve).keyPath,je=typeof we=="string"?we:"["+j(we).join("+")+"]";!f[q]||(we=f[q].idxByName[je])&&(we.name=ve,delete f[q].idxByName[je],f[q].idxByName[ve]=we)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function _s(o){return o.split(",").map(function(f,v){var S=(f=f.trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Qi(S,k||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),u(k),v===0)})}var xa=(wa.prototype._parseStoresSpec=function(o,f){c(o).forEach(function(v){if(o[v]!==null){var S=_s(o[v]),k=S.shift();if(k.unique=!0,k.multi)throw new me.Schema("Primary key cannot be multi-valued");S.forEach(function(q){if(q.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!q.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),f[v]=es(v,k,S)}})},wa.prototype.stores=function(v){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,v):v;var v=f._versions,S={},k={};return v.forEach(function(q){h(S,q._cfg.storesSource),k=q._cfg.dbschema={},q._parseStoresSpec(S,k)}),f._dbSchema=k,ba(f,[f._allTables,f,f.Transaction.prototype]),ra(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],c(k),k),f._storeNames=c(k),this},wa.prototype.upgrade=function(o){return this._cfg.contentUpgrade=X(this._cfg.contentUpgrade||Qe,o),this},wa);function wa(){}function na(o,f){var v=o._dbNamesDB;return v||(v=o._dbNamesDB=new gn(Wi,{addons:[],indexedDB:o,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function ia(o){return o&&typeof o.databases=="function"}function Na(o){return Hr(function(){return ct.letThrough=!0,o()})}function Di(o){return!("from"in o)}var Fr=function(o,f){if(!this){var v=new Fr;return o&&"d"in o&&h(v,o),v}h(this,arguments.length?{d:1,from:o,to:1<arguments.length?f:o}:{d:0})};function ci(o,f,v){var S=Yt(f,v);if(!isNaN(S)){if(0<S)throw RangeError();if(Di(o))return h(o,{from:f,to:v,d:1});var k=o.l,S=o.r;if(Yt(v,o.from)<0)return k?ci(k,f,v):o.l={from:f,to:v,d:1,l:null,r:null},Ii(o);if(0<Yt(f,o.to))return S?ci(S,f,v):o.r={from:f,to:v,d:1,l:null,r:null},Ii(o);Yt(f,o.from)<0&&(o.from=f,o.l=null,o.d=S?S.d+1:1),0<Yt(v,o.to)&&(o.to=v,o.r=null,o.d=o.l?o.l.d+1:1),v=!o.r,k&&!o.l&&Oi(o,k),S&&v&&Oi(o,S)}}function Oi(o,f){Di(f)||function v(S,ve){var q=ve.from,Z=ve.to,le=ve.l,ve=ve.r;ci(S,q,Z),le&&v(S,le),ve&&v(S,ve)}(o,f)}function Ps(o,f){var v=ui(f),S=v.next();if(S.done)return!1;for(var k=S.value,q=ui(o),Z=q.next(k.from),le=Z.value;!S.done&&!Z.done;){if(Yt(le.from,k.to)<=0&&0<=Yt(le.to,k.from))return!0;Yt(k.from,le.from)<0?k=(S=v.next(le.from)).value:le=(Z=q.next(k.from)).value}return!1}function ui(o){var f=Di(o)?null:{s:0,n:o};return{next:function(v){for(var S=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,S)for(;f.n.l&&Yt(v,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!S||Yt(v,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Ii(o){var f,v,S=(((f=o.r)===null||f===void 0?void 0:f.d)||0)-(((v=o.l)===null||v===void 0?void 0:v.d)||0),k=1<S?"r":S<-1?"l":"";k&&(f=k=="r"?"l":"r",v=n({},o),S=o[k],o.from=S.from,o.to=S.to,o[k]=S[k],v[k]=S[f],(o[f]=v).d=Aa(v)),o.d=Aa(o)}function Aa(v){var f=v.r,v=v.l;return(f?v?Math.max(f.d,v.d):f.d:v?v.d:0)+1}function Hn(o,f){return c(f).forEach(function(v){o[v]?Oi(o[v],f[v]):o[v]=function S(k){var q,Z,le={};for(q in k)b(k,q)&&(Z=k[q],le[q]=!Z||typeof Z!="object"||D.has(Z.constructor)?Z:S(Z));return le}(f[v])}),o}function aa(o,f){return o.all||f.all||Object.keys(o).some(function(v){return f[v]&&Ps(f[v],o[v])})}w(Fr.prototype,((Qr={add:function(o){return Oi(this,o),this},addKey:function(o){return ci(this,o,o),this},addKeys:function(o){var f=this;return o.forEach(function(v){return ci(f,v,v)}),this},hasKey:function(o){var f=ui(this).next(o).value;return f&&Yt(f.from,o)<=0&&0<=Yt(f.to,o)}})[Y]=function(){return ui(this)},Qr));var p={},I={},ae=!1;function pe(o){Hn(I,o),ae||(ae=!0,setTimeout(function(){ae=!1,Fe(I,!(I={}))},0))}function Fe(o,f){f===void 0&&(f=!1);var v=new Set;if(o.all)for(var S=0,k=Object.values(p);S<k.length;S++)We(Z=k[S],o,v,f);else for(var q in o){var Z,le=/^idb\:\/\/(.*)\/(.*)\//.exec(q);le&&(q=le[1],le=le[2],(Z=p["idb://".concat(q,"/").concat(le)])&&We(Z,o,v,f))}v.forEach(function(ve){return ve()})}function We(o,f,v,S){for(var k=[],q=0,Z=Object.entries(o.queries.query);q<Z.length;q++){for(var le=Z[q],ve=le[0],we=[],je=0,ce=le[1];je<ce.length;je++){var ke=ce[je];aa(f,ke.obsSet)?ke.subscribers.forEach(function(Ae){return v.add(Ae)}):S&&we.push(ke)}S&&k.push([ve,we])}if(S)for(var ge=0,Ne=k;ge<Ne.length;ge++){var Le=Ne[ge],ve=Le[0],we=Le[1];o.queries.query[ve]=we}}function tt(o){var f=o._state,v=o._deps.indexedDB;if(f.isBeingOpened||o.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?fr(f.dbOpenError):o});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var S=f.openCanceller,k=Math.round(10*o.verno),q=!1;function Z(){if(f.openCanceller!==S)throw new me.DatabaseClosed("db.open() was cancelled")}function le(){return new nt(function(ke,ge){if(Z(),!v)throw new me.MissingAPI;var Ne=o.name,Le=f.autoSchema||!k?v.open(Ne):v.open(Ne,k);if(!Le)throw new me.MissingAPI;Le.onerror=Dt(ge),Le.onblocked=$t(o._fireOnBlocked),Le.onupgradeneeded=$t(function(Ae){var Te;je=Le.transaction,f.autoSchema&&!o._options.allowEmptyDB?(Le.onerror=Yi,je.abort(),Le.result.close(),(Te=v.deleteDatabase(Ne)).onsuccess=Te.onerror=$t(function(){ge(new me.NoSuchDatabase("Database ".concat(Ne," doesnt exist")))})):(je.onerror=Dt(ge),Ae=Ae.oldVersion>Math.pow(2,62)?0:Ae.oldVersion,ce=Ae<1,o.idbdb=Le.result,q&&Jn(o,je),js(o,Ae/10,je,ge))},ge),Le.onsuccess=$t(function(){je=null;var Ae,Te,Me,Re,Ve,it=o.idbdb=Le.result,ut=j(it.objectStoreNames);if(0<ut.length)try{var at=it.transaction((Re=ut).length===1?Re[0]:Re,"readonly");if(f.autoSchema)Te=it,Me=at,(Ae=o).verno=Te.version/10,Me=Ae._dbSchema=Fi(0,Te,Me),Ae._storeNames=j(Te.objectStoreNames,0),ra(Ae,[Ae._allTables],c(Me),Me);else if(Qn(o,o._dbSchema,at),((Ve=zn(Fi(0,(Ve=o).idbdb,at),Ve._dbSchema)).add.length||Ve.change.some(function(st){return st.add.length||st.change.length}))&&!q)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),it.close(),k=it.version+1,q=!0,ke(le());oi(o,at)}catch{}Rn.push(o),it.onversionchange=$t(function(st){f.vcFired=!0,o.on("versionchange").fire(st)}),it.onclose=$t(function(st){o.on("close").fire(st)}),ce&&(Ve=o._deps,at=Ne,it=Ve.indexedDB,Ve=Ve.IDBKeyRange,ia(it)||at===Wi||na(it,Ve).put({name:at}).catch(Qe)),ke()},ge)}).catch(function(ke){switch(ke==null?void 0:ke.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),le();break;case"VersionError":if(0<k)return k=0,le()}return nt.reject(ke)})}var ve,we=f.dbReadyResolve,je=null,ce=!1;return nt.race([S,(typeof navigator>"u"?nt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ke){function ge(){return indexedDB.databases().finally(ke)}ve=setInterval(ge,100),ge()}).finally(function(){return clearInterval(ve)}):Promise.resolve()).then(le)]).then(function(){return Z(),f.onReadyBeingFired=[],nt.resolve(Na(function(){return o.on.ready.fire(o.vip)})).then(function ke(){if(0<f.onReadyBeingFired.length){var ge=f.onReadyBeingFired.reduce(X,Qe);return f.onReadyBeingFired=[],nt.resolve(Na(function(){return ge(o.vip)})).then(ke)}})}).finally(function(){f.openCanceller===S&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(ke){f.dbOpenError=ke;try{je&&je.abort()}catch{}return S===f.openCanceller&&o._close(),fr(ke)}).finally(function(){f.openComplete=!0,we()}).then(function(){var ke;return ce&&(ke={},o.tables.forEach(function(ge){ge.schema.indexes.forEach(function(Ne){Ne.name&&(ke["idb://".concat(o.name,"/").concat(ge.name,"/").concat(Ne.name)]=new Fr(-1/0,[[[]]]))}),ke["idb://".concat(o.name,"/").concat(ge.name,"/")]=ke["idb://".concat(o.name,"/").concat(ge.name,"/:dels")]=new Fr(-1/0,[[[]]])}),Un(Ji).fire(ke),Fe(ke,!0)),o})}function yt(o){function f(q){return o.next(q)}var v=k(f),S=k(function(q){return o.throw(q)});function k(q){return function(ve){var le=q(ve),ve=le.value;return le.done?ve:ve&&typeof ve.then=="function"?ve.then(v,S):u(ve)?Promise.all(ve).then(v,S):v(ve)}}return k(f)()}function Lt(o,f,v){for(var S=u(o)?o.slice():[o],k=0;k<v;++k)S.push(f);return S}var zt={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return n(n({},o),{table:function(f){var v=o.table(f),S=v.schema,k={},q=[];function Z(ce,ke,ge){var Ne=ea(ce),Le=k[Ne]=k[Ne]||[],Ae=ce==null?0:typeof ce=="string"?1:ce.length,Te=0<ke,Te=n(n({},ge),{name:Te?"".concat(Ne,"(virtual-from:").concat(ge.name,")"):ge.name,lowLevelIndex:ge,isVirtual:Te,keyTail:ke,keyLength:Ae,extractKey:Zi(ce),unique:!Te&&ge.unique});return Le.push(Te),Te.isPrimaryKey||q.push(Te),1<Ae&&Z(Ae===2?ce[0]:ce.slice(0,Ae-1),ke+1,ge),Le.sort(function(Me,Re){return Me.keyTail-Re.keyTail}),Te}f=Z(S.primaryKey.keyPath,0,S.primaryKey),k[":id"]=[f];for(var le=0,ve=S.indexes;le<ve.length;le++){var we=ve[le];Z(we.keyPath,0,we)}function je(ce){var ke,ge=ce.query.index;return ge.isVirtual?n(n({},ce),{query:{index:ge.lowLevelIndex,range:(ke=ce.query.range,ge=ge.keyTail,{type:ke.type===1?2:ke.type,lower:Lt(ke.lower,ke.lowerOpen?o.MAX_KEY:o.MIN_KEY,ge),lowerOpen:!0,upper:Lt(ke.upper,ke.upperOpen?o.MIN_KEY:o.MAX_KEY,ge),upperOpen:!0})}}):ce}return n(n({},v),{schema:n(n({},S),{primaryKey:f,indexes:q,getIndexByKeyPath:function(ce){return(ce=k[ea(ce)])&&ce[0]}}),count:function(ce){return v.count(je(ce))},query:function(ce){return v.query(je(ce))},openCursor:function(ce){var ke=ce.query.index,ge=ke.keyTail,Ne=ke.isVirtual,Le=ke.keyLength;return Ne?v.openCursor(je(ce)).then(function(Te){return Te&&Ae(Te)}):v.openCursor(ce);function Ae(Te){return Object.create(Te,{continue:{value:function(Me){Me!=null?Te.continue(Lt(Me,ce.reverse?o.MAX_KEY:o.MIN_KEY,ge)):ce.unique?Te.continue(Te.key.slice(0,Le).concat(ce.reverse?o.MIN_KEY:o.MAX_KEY,ge)):Te.continue()}},continuePrimaryKey:{value:function(Me,Re){Te.continuePrimaryKey(Lt(Me,o.MAX_KEY,ge),Re)}},primaryKey:{get:function(){return Te.primaryKey}},key:{get:function(){var Me=Te.key;return Le===1?Me[0]:Me.slice(0,Le)}},value:{get:function(){return Te.value}}})}}})}})}};function Ut(o,f,v,S){return v=v||{},S=S||"",c(o).forEach(function(k){var q,Z,le;b(f,k)?(q=o[k],Z=f[k],typeof q=="object"&&typeof Z=="object"&&q&&Z?(le=fe(q))!==fe(Z)?v[S+k]=f[k]:le==="Object"?Ut(q,Z,v,S+k+"."):q!==Z&&(v[S+k]=f[k]):q!==Z&&(v[S+k]=f[k])):v[S+k]=void 0}),c(f).forEach(function(k){b(o,k)||(v[S+k]=f[k])}),v}function Xt(o,f){return f.type==="delete"?f.keys:f.keys||f.values.map(o.extractKey)}var xr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return n(n({},o),{table:function(f){var v=o.table(f),S=v.schema.primaryKey;return n(n({},v),{mutate:function(k){var q=ct.trans,Z=q.table(f).hook,le=Z.deleting,ve=Z.creating,we=Z.updating;switch(k.type){case"add":if(ve.fire===Qe)break;return q._promise("readwrite",function(){return je(k)},!0);case"put":if(ve.fire===Qe&&we.fire===Qe)break;return q._promise("readwrite",function(){return je(k)},!0);case"delete":if(le.fire===Qe)break;return q._promise("readwrite",function(){return je(k)},!0);case"deleteRange":if(le.fire===Qe)break;return q._promise("readwrite",function(){return function ce(ke,ge,Ne){return v.query({trans:ke,values:!1,query:{index:S,range:ge},limit:Ne}).then(function(Le){var Ae=Le.result;return je({type:"delete",keys:Ae,trans:ke}).then(function(Te){return 0<Te.numFailures?Promise.reject(Te.failures[0]):Ae.length<Ne?{failures:[],numFailures:0,lastResult:void 0}:ce(ke,n(n({},ge),{lower:Ae[Ae.length-1],lowerOpen:!0}),Ne)})})}(k.trans,k.range,1e4)},!0)}return v.mutate(k);function je(ce){var ke,ge,Ne,Le=ct.trans,Ae=ce.keys||Xt(S,ce);if(!Ae)throw new Error("Keys missing");return(ce=ce.type==="add"||ce.type==="put"?n(n({},ce),{keys:Ae}):n({},ce)).type!=="delete"&&(ce.values=a([],ce.values,!0)),ce.keys&&(ce.keys=a([],ce.keys,!0)),ke=v,Ne=Ae,((ge=ce).type==="add"?Promise.resolve([]):ke.getMany({trans:ge.trans,keys:Ne,cache:"immutable"})).then(function(Te){var Me=Ae.map(function(Re,Ve){var it,ut,at,st=Te[Ve],ft={onerror:null,onsuccess:null};return ce.type==="delete"?le.fire.call(ft,Re,st,Le):ce.type==="add"||st===void 0?(it=ve.fire.call(ft,Re,ce.values[Ve],Le),Re==null&&it!=null&&(ce.keys[Ve]=Re=it,S.outbound||T(ce.values[Ve],S.keyPath,Re))):(it=Ut(st,ce.values[Ve]),(ut=we.fire.call(ft,it,Re,st,Le))&&(at=ce.values[Ve],Object.keys(ut).forEach(function(ot){b(at,ot)?at[ot]=ut[ot]:T(at,ot,ut[ot])}))),ft});return v.mutate(ce).then(function(Re){for(var Ve=Re.failures,it=Re.results,ut=Re.numFailures,Re=Re.lastResult,at=0;at<Ae.length;++at){var st=(it||Ae)[at],ft=Me[at];st==null?ft.onerror&&ft.onerror(Ve[at]):ft.onsuccess&&ft.onsuccess(ce.type==="put"&&Te[at]?ce.values[at]:st)}return{failures:Ve,results:it,numFailures:ut,lastResult:Re}}).catch(function(Re){return Me.forEach(function(Ve){return Ve.onerror&&Ve.onerror(Re)}),Promise.reject(Re)})})}}})}})}};function wr(o,f,v){try{if(!f||f.keys.length<o.length)return null;for(var S=[],k=0,q=0;k<f.keys.length&&q<o.length;++k)Yt(f.keys[k],o[q])===0&&(S.push(v?M(f.values[k]):f.values[k]),++q);return S.length===o.length?S:null}catch{return null}}var Dr={stack:"dbcore",level:-1,create:function(o){return{table:function(f){var v=o.table(f);return n(n({},v),{getMany:function(S){if(!S.cache)return v.getMany(S);var k=wr(S.keys,S.trans._cache,S.cache==="clone");return k?nt.resolve(k):v.getMany(S).then(function(q){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?M(q):q},q})},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),v.mutate(S)}})}}}};function Jr(o,f){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function Mr(o,f){switch(o){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wn={stack:"dbcore",level:0,name:"Observability",create:function(o){var f=o.schema.name,v=new Fr(o.MIN_KEY,o.MAX_KEY);return n(n({},o),{transaction:function(S,k,q){if(ct.subscr&&k!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ct.querier));return o.transaction(S,k,q)},table:function(S){var k=o.table(S),q=k.schema,Z=q.primaryKey,ce=q.indexes,le=Z.extractKey,ve=Z.outbound,we=Z.autoIncrement&&ce.filter(function(ge){return ge.compound&&ge.keyPath.includes(Z.keyPath)}),je=n(n({},k),{mutate:function(ge){function Ne(ot){return ot="idb://".concat(f,"/").concat(S,"/").concat(ot),Re[ot]||(Re[ot]=new Fr)}var Le,Ae,Te,Me=ge.trans,Re=ge.mutatedParts||(ge.mutatedParts={}),Ve=Ne(""),it=Ne(":dels"),ut=ge.type,ft=ge.type==="deleteRange"?[ge.range]:ge.type==="delete"?[ge.keys]:ge.values.length<50?[Xt(Z,ge).filter(function(ot){return ot}),ge.values]:[],at=ft[0],st=ft[1],ft=ge.trans._cache;return u(at)?(Ve.addKeys(at),(ft=ut==="delete"||at.length===st.length?wr(at,ft):null)||it.addKeys(at),(ft||st)&&(Le=Ne,Ae=ft,Te=st,q.indexes.forEach(function(ot){var pt=Le(ot.name||"");function wt(kt){return kt!=null?ot.extractKey(kt):null}function St(kt){return ot.multiEntry&&u(kt)?kt.forEach(function(nr){return pt.addKey(nr)}):pt.addKey(kt)}(Ae||Te).forEach(function(kt,Or){var It=Ae&&wt(Ae[Or]),Or=Te&&wt(Te[Or]);Yt(It,Or)!==0&&(It!=null&&St(It),Or!=null&&St(Or))})}))):at?(st={from:(st=at.lower)!==null&&st!==void 0?st:o.MIN_KEY,to:(st=at.upper)!==null&&st!==void 0?st:o.MAX_KEY},it.add(st),Ve.add(st)):(Ve.add(v),it.add(v),q.indexes.forEach(function(ot){return Ne(ot.name).add(v)})),k.mutate(ge).then(function(ot){return!at||ge.type!=="add"&&ge.type!=="put"||(Ve.addKeys(ot.results),we&&we.forEach(function(pt){for(var wt=ge.values.map(function(It){return pt.extractKey(It)}),St=pt.keyPath.findIndex(function(It){return It===Z.keyPath}),kt=0,nr=ot.results.length;kt<nr;++kt)wt[kt][St]=ot.results[kt];Ne(pt.name).addKeys(wt)})),Me.mutatedParts=Hn(Me.mutatedParts||{},Re),ot})}}),ce=function(Ne){var Le=Ne.query,Ne=Le.index,Le=Le.range;return[Ne,new Fr((Ne=Le.lower)!==null&&Ne!==void 0?Ne:o.MIN_KEY,(Le=Le.upper)!==null&&Le!==void 0?Le:o.MAX_KEY)]},ke={get:function(ge){return[Z,new Fr(ge.key)]},getMany:function(ge){return[Z,new Fr().addKeys(ge.keys)]},count:ce,query:ce,openCursor:ce};return c(ke).forEach(function(ge){je[ge]=function(Ne){var Le=ct.subscr,Ae=!!Le,Te=Jr(ct,k)&&Mr(ge,Ne)?Ne.obsSet={}:Le;if(Ae){var Me=function(st){return st="idb://".concat(f,"/").concat(S,"/").concat(st),Te[st]||(Te[st]=new Fr)},Re=Me(""),Ve=Me(":dels"),Le=ke[ge](Ne),Ae=Le[0],Le=Le[1];if((ge==="query"&&Ae.isPrimaryKey&&!Ne.values?Ve:Me(Ae.name||"")).add(Le),!Ae.isPrimaryKey){if(ge!=="count"){var it=ge==="query"&&ve&&Ne.values&&k.query(n(n({},Ne),{values:!1}));return k[ge].apply(this,arguments).then(function(st){if(ge==="query"){if(ve&&Ne.values)return it.then(function(wt){return wt=wt.result,Re.addKeys(wt),st});var ft=Ne.values?st.result.map(le):st.result;(Ne.values?Re:Ve).addKeys(ft)}else if(ge==="openCursor"){var ot=st,pt=Ne.values;return ot&&Object.create(ot,{key:{get:function(){return Ve.addKey(ot.primaryKey),ot.key}},primaryKey:{get:function(){var wt=ot.primaryKey;return Ve.addKey(wt),wt}},value:{get:function(){return pt&&Re.addKey(ot.primaryKey),ot.value}}})}return st})}Ve.add(v)}}return k[ge].apply(this,arguments)}}),je}})}};function mn(o,f,v){if(v.numFailures===0)return f;if(f.type==="deleteRange")return null;var S=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return v.numFailures===S?null:(f=n({},f),u(f.keys)&&(f.keys=f.keys.filter(function(k,q){return!(q in v.failures)})),"values"in f&&u(f.values)&&(f.values=f.values.filter(function(k,q){return!(q in v.failures)})),f)}function Dn(o,f){return v=o,((S=f).lower===void 0||(S.lowerOpen?0<Yt(v,S.lower):0<=Yt(v,S.lower)))&&(o=o,(f=f).upper===void 0||(f.upperOpen?Yt(o,f.upper)<0:Yt(o,f.upper)<=0));var v,S}function ns(o,f,ke,S,k,q){if(!ke||ke.length===0)return o;var Z=f.query.index,le=Z.multiEntry,ve=f.query.range,we=S.schema.primaryKey.extractKey,je=Z.extractKey,ce=(Z.lowLevelIndex||Z).extractKey,ke=ke.reduce(function(ge,Ne){var Le=ge,Ae=[];if(Ne.type==="add"||Ne.type==="put")for(var Te=new Fr,Me=Ne.values.length-1;0<=Me;--Me){var Re,Ve=Ne.values[Me],it=we(Ve);Te.hasKey(it)||(Re=je(Ve),(le&&u(Re)?Re.some(function(ot){return Dn(ot,ve)}):Dn(Re,ve))&&(Te.addKey(it),Ae.push(Ve)))}switch(Ne.type){case"add":var ut=new Fr().addKeys(f.values?ge.map(function(pt){return we(pt)}):ge),Le=ge.concat(f.values?Ae.filter(function(pt){return pt=we(pt),!ut.hasKey(pt)&&(ut.addKey(pt),!0)}):Ae.map(function(pt){return we(pt)}).filter(function(pt){return!ut.hasKey(pt)&&(ut.addKey(pt),!0)}));break;case"put":var at=new Fr().addKeys(Ne.values.map(function(pt){return we(pt)}));Le=ge.filter(function(pt){return!at.hasKey(f.values?we(pt):pt)}).concat(f.values?Ae:Ae.map(function(pt){return we(pt)}));break;case"delete":var st=new Fr().addKeys(Ne.keys);Le=ge.filter(function(pt){return!st.hasKey(f.values?we(pt):pt)});break;case"deleteRange":var ft=Ne.range;Le=ge.filter(function(pt){return!Dn(we(pt),ft)})}return Le},o);return ke===o?o:(ke.sort(function(ge,Ne){return Yt(ce(ge),ce(Ne))||Yt(we(ge),we(Ne))}),f.limit&&f.limit<1/0&&(ke.length>f.limit?ke.length=f.limit:o.length===f.limit&&ke.length<f.limit&&(k.dirty=!0)),q?Object.freeze(ke):ke)}function Sa(o,f){return Yt(o.lower,f.lower)===0&&Yt(o.upper,f.upper)===0&&!!o.lowerOpen==!!f.lowerOpen&&!!o.upperOpen==!!f.upperOpen}function is(o,f){return function(v,S,k,q){if(v===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((S=Yt(v,S))===0){if(k&&q)return 0;if(k)return 1;if(q)return-1}return S}(o.lower,f.lower,o.lowerOpen,f.lowerOpen)<=0&&0<=function(v,S,k,q){if(v===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((S=Yt(v,S))===0){if(k&&q)return 0;if(k)return-1;if(q)return 1}return S}(o.upper,f.upper,o.upperOpen,f.upperOpen)}function ja(o,f,v,S){o.subscribers.add(v),S.addEventListener("abort",function(){var k,q;o.subscribers.delete(v),o.subscribers.size===0&&(k=o,q=f,setTimeout(function(){k.subscribers.size===0&&ne(q,k)},3e3))})}var as={stack:"dbcore",level:0,name:"Cache",create:function(o){var f=o.schema.name;return n(n({},o),{transaction:function(v,S,k){var q,Z,le=o.transaction(v,S,k);return S==="readwrite"&&(Z=(q=new AbortController).signal,k=function(ve){return function(){if(q.abort(),S==="readwrite"){for(var we=new Set,je=0,ce=v;je<ce.length;je++){var ke=ce[je],ge=p["idb://".concat(f,"/").concat(ke)];if(ge){var Ne=o.table(ke),Le=ge.optimisticOps.filter(function(pt){return pt.trans===le});if(le._explicit&&ve&&le.mutatedParts)for(var Ae=0,Te=Object.values(ge.queries.query);Ae<Te.length;Ae++)for(var Me=0,Re=(ut=Te[Ae]).slice();Me<Re.length;Me++)aa((at=Re[Me]).obsSet,le.mutatedParts)&&(ne(ut,at),at.subscribers.forEach(function(pt){return we.add(pt)}));else if(0<Le.length){ge.optimisticOps=ge.optimisticOps.filter(function(pt){return pt.trans!==le});for(var Ve=0,it=Object.values(ge.queries.query);Ve<it.length;Ve++)for(var ut,at,st,ft=0,ot=(ut=it[Ve]).slice();ft<ot.length;ft++)(at=ot[ft]).res!=null&&le.mutatedParts&&(ve&&!at.dirty?(st=Object.isFrozen(at.res),st=ns(at.res,at.req,Le,Ne,at,st),at.dirty?(ne(ut,at),at.subscribers.forEach(function(pt){return we.add(pt)})):st!==at.res&&(at.res=st,at.promise=nt.resolve({result:st}))):(at.dirty&&ne(ut,at),at.subscribers.forEach(function(pt){return we.add(pt)})))}}}we.forEach(function(pt){return pt()})}}},le.addEventListener("abort",k(!1),{signal:Z}),le.addEventListener("error",k(!1),{signal:Z}),le.addEventListener("complete",k(!0),{signal:Z})),le},table:function(v){var S=o.table(v),k=S.schema.primaryKey;return n(n({},S),{mutate:function(q){var Z=ct.trans;if(k.outbound||Z.db._options.cache==="disabled"||Z.explicit||Z.idbtrans.mode!=="readwrite")return S.mutate(q);var le=p["idb://".concat(f,"/").concat(v)];return le?(Z=S.mutate(q),q.type!=="add"&&q.type!=="put"||!(50<=q.values.length||Xt(k,q).some(function(ve){return ve==null}))?(le.optimisticOps.push(q),q.mutatedParts&&pe(q.mutatedParts),Z.then(function(ve){0<ve.numFailures&&(ne(le.optimisticOps,q),(ve=mn(0,q,ve))&&le.optimisticOps.push(ve),q.mutatedParts&&pe(q.mutatedParts))}),Z.catch(function(){ne(le.optimisticOps,q),q.mutatedParts&&pe(q.mutatedParts)})):Z.then(function(ve){var we=mn(0,n(n({},q),{values:q.values.map(function(je,ce){var ke;return ve.failures[ce]?je:(je=(ke=k.keyPath)!==null&&ke!==void 0&&ke.includes(".")?M(je):n({},je),T(je,k.keyPath,ve.results[ce]),je)})}),ve);le.optimisticOps.push(we),queueMicrotask(function(){return q.mutatedParts&&pe(q.mutatedParts)})}),Z):S.mutate(q)},query:function(q){if(!Jr(ct,S)||!Mr("query",q))return S.query(q);var Z=((we=ct.trans)===null||we===void 0?void 0:we.db._options.cache)==="immutable",ce=ct,le=ce.requery,ve=ce.signal,we=function(Ne,Le,Ae,Te){var Me=p["idb://".concat(Ne,"/").concat(Le)];if(!Me)return[];if(!(Le=Me.queries[Ae]))return[null,!1,Me,null];var Re=Le[(Te.query?Te.query.index.name:null)||""];if(!Re)return[null,!1,Me,null];switch(Ae){case"query":var Ve=Re.find(function(it){return it.req.limit===Te.limit&&it.req.values===Te.values&&Sa(it.req.query.range,Te.query.range)});return Ve?[Ve,!0,Me,Re]:[Re.find(function(it){return("limit"in it.req?it.req.limit:1/0)>=Te.limit&&(!Te.values||it.req.values)&&is(it.req.query.range,Te.query.range)}),!1,Me,Re];case"count":return Ve=Re.find(function(it){return Sa(it.req.query.range,Te.query.range)}),[Ve,!!Ve,Me,Re]}}(f,v,"query",q),je=we[0],ce=we[1],ke=we[2],ge=we[3];return je&&ce?je.obsSet=q.obsSet:(ce=S.query(q).then(function(Ne){var Le=Ne.result;if(je&&(je.res=Le),Z){for(var Ae=0,Te=Le.length;Ae<Te;++Ae)Object.freeze(Le[Ae]);Object.freeze(Le)}else Ne.result=M(Le);return Ne}).catch(function(Ne){return ge&&je&&ne(ge,je),Promise.reject(Ne)}),je={obsSet:q.obsSet,promise:ce,subscribers:new Set,type:"query",req:q,dirty:!1},ge?ge.push(je):(ge=[je],(ke=ke||(p["idb://".concat(f,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[q.query.index.name||""]=ge)),ja(je,ge,le,ve),je.promise.then(function(Ne){return{result:ns(Ne.result,q,ke==null?void 0:ke.optimisticOps,S,je,Z)}})}})}})}};function Ei(o,f){return new Proxy(o,{get:function(v,S,k){return S==="db"?f:Reflect.get(v,S,k)}})}var gn=(Jt.prototype.version=function(o){if(isNaN(o)||o<.1)throw new me.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var f=this._versions,v=f.filter(function(S){return S._cfg.version===o})[0];return v||(v=new this.Version(o),f.push(v),f.sort(Ss),v.stores({}),this._state.autoSchema=!1,v)},Jt.prototype._whenReady=function(o){var f=this;return this.idbdb&&(this._state.openComplete||ct.letThrough||this._vip)?o():new nt(function(v,S){if(f._state.openComplete)return S(new me.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void S(new me.DatabaseClosed);f.open().catch(Qe)}f._state.dbReadyPromise.then(v,S)}).then(o)},Jt.prototype.use=function(o){var f=o.stack,v=o.create,S=o.level,k=o.name;return k&&this.unuse({stack:f,name:k}),o=this._middlewares[f]||(this._middlewares[f]=[]),o.push({stack:f,create:v,level:S??10,name:k}),o.sort(function(q,Z){return q.level-Z.level}),this},Jt.prototype.unuse=function(o){var f=o.stack,v=o.name,S=o.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(k){return S?k.create!==S:!!v&&k.name!==v})),this},Jt.prototype.open=function(){var o=this;return Cn(Gt,function(){return tt(o)})},Jt.prototype._close=function(){var o=this._state,f=Rn.indexOf(this);if(0<=f&&Rn.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new nt(function(v){o.dbReadyResolve=v}),o.openCanceller=new nt(function(v,S){o.cancelOpen=S}))},Jt.prototype.close=function(v){var f=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;f?(v.isBeingOpened&&v.cancelOpen(new me.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new me.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Jt.prototype.delete=function(o){var f=this;o===void 0&&(o={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",S=this._state;return new nt(function(k,q){function Z(){f.close(o);var le=f._deps.indexedDB.deleteDatabase(f.name);le.onsuccess=$t(function(){var ve,we,je;ve=f._deps,we=f.name,je=ve.indexedDB,ve=ve.IDBKeyRange,ia(je)||we===Wi||na(je,ve).delete(we).catch(Qe),k()}),le.onerror=Dt(q),le.onblocked=f._fireOnBlocked}if(v)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(Z):Z()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var o=this;return c(this._allTables).map(function(f){return o._allTables[f]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var o=(function(f,v,S){var k=arguments.length;if(k<2)throw new me.InvalidArgument("Too few arguments");for(var q=new Array(k-1);--k;)q[k-1]=arguments[k];return S=q.pop(),[f,se(q),S]}).apply(this,arguments);return this._transaction.apply(this,o)},Jt.prototype._transaction=function(o,f,v){var S=this,k=ct.trans;k&&k.db===this&&o.indexOf("!")===-1||(k=null);var q,Z,le=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(Z=f.map(function(we){if(we=we instanceof S.Table?we.name:we,typeof we!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return we}),o=="r"||o===Va)q=Va;else{if(o!="rw"&&o!=Ki)throw new me.InvalidArgument("Invalid transaction mode: "+o);q=Ki}if(k){if(k.mode===Va&&q===Ki){if(!le)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&Z.forEach(function(we){if(k&&k.storeNames.indexOf(we)===-1){if(!le)throw new me.SubTransaction("Table "+we+" not included in parent transaction.");k=null}}),le&&k&&!k.active&&(k=null)}}catch(we){return k?k._promise(null,function(je,ce){ce(we)}):fr(we)}var ve=(function we(je,ce,ke,ge,Ne){return nt.resolve().then(function(){var Le=ct.transless||ct,Ae=je._createTransaction(ce,ke,je._dbSchema,ge);if(Ae.explicit=!0,Le={trans:Ae,transless:Le},ge)Ae.idbtrans=ge.idbtrans;else try{Ae.create(),Ae.idbtrans._explicit=!0,je._state.PR1398_maxLoop=3}catch(Re){return Re.name===Pe.InvalidState&&je.isOpen()&&0<--je._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),je.close({disableAutoOpen:!1}),je.open().then(function(){return we(je,ce,ke,null,Ne)})):fr(Re)}var Te,Me=Oe(Ne);return Me&&nn(),Le=nt.follow(function(){var Re;(Te=Ne.call(Ae,Ae))&&(Me?(Re=Wr.bind(null,null),Te.then(Re,Re)):typeof Te.next=="function"&&typeof Te.throw=="function"&&(Te=yt(Te)))},Le),(Te&&typeof Te.then=="function"?nt.resolve(Te).then(function(Re){return Ae.active?Re:fr(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Le.then(function(){return Te})).then(function(Re){return ge&&Ae._resolve(),Ae._completion.then(function(){return Re})}).catch(function(Re){return Ae._reject(Re),fr(Re)})})}).bind(null,this,q,Z,k,v);return k?k._promise(q,ve,"lock"):ct.trans?Cn(ct.transless,function(){return S._whenReady(ve)}):this._whenReady(ve)},Jt.prototype.table=function(o){if(!b(this._allTables,o))throw new me.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Jt);function Jt(o,f){var v=this;this._middlewares={},this.verno=0;var S=Jt.dependencies;this._options=f=n({addons:Jt.addons,autoOpen:!0,indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},S=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,q,Z,le,ve,we={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Qe,dbReadyPromise:null,cancelOpen:Qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};we.dbReadyPromise=new nt(function(ce){we.dbReadyResolve=ce}),we.openCanceller=new nt(function(ce,ke){we.cancelOpen=ke}),this._state=we,this.name=o,this.on=ai(this,"populate","blocked","versionchange","close",{ready:[X,Qe]}),this.on.ready.subscribe=C(this.on.ready.subscribe,function(ce){return function(ke,ge){Jt.vip(function(){var Ne,Le=v._state;Le.openComplete?(Le.dbOpenError||nt.resolve().then(ke),ge&&ce(ke)):Le.onReadyBeingFired?(Le.onReadyBeingFired.push(ke),ge&&ce(ke)):(ce(ke),Ne=v,ge||ce(function Ae(){Ne.on.ready.unsubscribe(ke),Ne.on.ready.unsubscribe(Ae)}))})}}),this.Collection=(k=this,$i(Ws.prototype,function(Te,Ae){this.db=k;var ge=$a,Ne=null;if(Ae)try{ge=Ae()}catch(Me){Ne=Me}var Le=Te._ctx,Ae=Le.table,Te=Ae.hook.reading.fire;this._ctx={table:Ae,index:Le.index,isPrimKey:!Le.index||Ae.schema.primKey.keyPath&&Le.index===Ae.schema.primKey.name,range:ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ne,or:Le.or,valueMapper:Te!==dt?Te:null}})),this.Table=(q=this,$i(Ya.prototype,function(ce,ke,ge){this.db=q,this._tx=ge,this.name=ce,this.schema=ke,this.hook=q._allTables[ce]?q._allTables[ce].hook:ai(null,{creating:[ue,Qe],reading:[Ct,dt],updating:[ht,Qe],deleting:[Mt,Qe]})})),this.Transaction=(Z=this,$i(Ns.prototype,function(ce,ke,ge,Ne,Le){var Ae=this;this.db=Z,this.mode=ce,this.storeNames=ke,this.schema=ge,this.chromeTransactionDurability=Ne,this.idbtrans=null,this.on=ai(this,"complete","error","abort"),this.parent=Le||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new nt(function(Te,Me){Ae._resolve=Te,Ae._reject=Me}),this._completion.then(function(){Ae.active=!1,Ae.on.complete.fire()},function(Te){var Me=Ae.active;return Ae.active=!1,Ae.on.error.fire(Te),Ae.parent?Ae.parent._reject(Te):Me&&Ae.idbtrans&&Ae.idbtrans.abort(),fr(Te)})})),this.Version=(le=this,$i(xa.prototype,function(ce){this.db=le,this._cfg={version:ce,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ve=this,$i(ws.prototype,function(ce,ke,ge){if(this.db=ve,this._ctx={table:ce,index:ke===":id"?null:ke,or:ge},this._cmp=this._ascending=Yt,this._descending=function(Ne,Le){return Yt(Le,Ne)},this._max=function(Ne,Le){return 0<Yt(Ne,Le)?Ne:Le},this._min=function(Ne,Le){return Yt(Ne,Le)<0?Ne:Le},this._IDBKeyRange=ve._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(ce){0<ce.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(ce){!ce.newVersion||ce.newVersion<ce.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(ce.oldVersion/10))}),this._maxKey=Xi(f.IDBKeyRange),this._createTransaction=function(ce,ke,ge,Ne){return new v.Transaction(ce,ke,ge,v._options.chromeTransactionDurability,Ne)},this._fireOnBlocked=function(ce){v.on("blocked").fire(ce),Rn.filter(function(ke){return ke.name===v.name&&ke!==v&&!ke._state.vcFired}).map(function(ke){return ke.on("versionchange").fire(ce)})},this.use(Dr),this.use(as),this.use(Wn),this.use(zt),this.use(xr);var je=new Proxy(this,{get:function(ce,ke,ge){if(ke==="_vip")return!0;if(ke==="table")return function(Le){return Ei(v.table(Le),je)};var Ne=Reflect.get(ce,ke,ge);return Ne instanceof Ya?Ei(Ne,je):ke==="tables"?Ne.map(function(Le){return Ei(Le,je)}):ke==="_createTransaction"?function(){return Ei(Ne.apply(this,arguments),je)}:Ne}});this.vip=je,S.forEach(function(ce){return ce(v)})}var di,Qr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_a=(sa.prototype.subscribe=function(o,f,v){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:f,complete:v})},sa.prototype[Qr]=function(){return this},sa);function sa(o){this._subscribe=o}try{di={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{di={indexedDB:null,IDBKeyRange:null}}function un(o){var f,v=!1,S=new _a(function(k){var q=Oe(o),Z,le=!1,ve={},we={},je={get closed(){return le},unsubscribe:function(){le||(le=!0,Z&&Z.abort(),ce&&Un.storagemutated.unsubscribe(ge))}};k.start&&k.start(je);var ce=!1,ke=function(){return _i(Ne)},ge=function(Le){Hn(ve,Le),aa(we,ve)&&ke()},Ne=function(){var Le,Ae,Te;!le&&di.indexedDB&&(ve={},Le={},Z&&Z.abort(),Z=new AbortController,Te=function(Me){var Re=er();try{q&&nn();var Ve=Hr(o,Me);return Ve=q?Ve.finally(Wr):Ve}finally{Re&&sr()}}(Ae={subscr:Le,signal:Z.signal,requery:ke,querier:o,trans:null}),Promise.resolve(Te).then(function(Me){v=!0,f=Me,le||Ae.signal.aborted||(ve={},function(Re){for(var Ve in Re)if(b(Re,Ve))return;return 1}(we=Le)||ce||(Un(Ji,ge),ce=!0),_i(function(){return!le&&k.next&&k.next(Me)}))},function(Me){v=!1,["DatabaseClosedError","AbortError"].includes(Me==null?void 0:Me.name)||le||_i(function(){le||k.error&&k.error(Me)})}))};return setTimeout(ke,0),je});return S.hasValue=function(){return v},S.getValue=function(){return f},S}var hi=gn;function oa(o){var f=Rr;try{Rr=!0,Un.storagemutated.fire(o),Fe(o,!0)}finally{Rr=f}}w(hi,n(n({},Xe),{delete:function(o){return new hi(o,{addons:[]}).delete()},exists:function(o){return new hi(o,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return f=hi.dependencies,v=f.indexedDB,f=f.IDBKeyRange,(ia(v)?Promise.resolve(v.databases()).then(function(S){return S.map(function(k){return k.name}).filter(function(k){return k!==Wi})}):na(v,f).toCollection().primaryKeys()).then(o)}catch{return fr(new me.MissingAPI)}var f,v},defineClass:function(){return function(o){h(this,o)}},ignoreTransaction:function(o){return ct.trans?Cn(ct.transless,o):o()},vip:Na,async:function(o){return function(){try{var f=yt(o.apply(this,arguments));return f&&typeof f.then=="function"?f:nt.resolve(f)}catch(v){return fr(v)}}},spawn:function(o,f,v){try{var S=yt(o.apply(v,f||[]));return S&&typeof S.then=="function"?S:nt.resolve(S)}catch(k){return fr(k)}},currentTransaction:{get:function(){return ct.trans||null}},waitFor:function(o,f){return f=nt.resolve(typeof o=="function"?hi.ignoreTransaction(o):o).timeout(f||6e4),ct.trans?ct.trans.waitFor(f):f},Promise:nt,debug:{get:function(){return de},set:function(o){xe(o)}},derive:L,extend:h,props:w,override:C,Events:ai,on:Un,liveQuery:un,extendObservabilitySet:Hn,getByKeyPath:ee,setByKeyPath:T,delByKeyPath:function(o,f){typeof f=="string"?T(o,f,void 0):"length"in f&&[].map.call(f,function(v){T(o,v,void 0)})},shallowClone:U,deepClone:M,getObjectDiff:Ut,cmp:Yt,asap:G,minKey:-1/0,addons:[],connections:Rn,errnames:Pe,dependencies:di,cache:p,semVer:"4.0.11",version:"4.0.11".split(".").map(function(o){return parseInt(o)}).reduce(function(o,f,v){return o+f/Math.pow(10,2*v)})})),hi.maxKey=Xi(hi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Un(Ji,function(o){Rr||(o=new CustomEvent(Fn,{detail:o}),Rr=!0,dispatchEvent(o),Rr=!1)}),addEventListener(Fn,function(o){o=o.detail,Rr||oa(o)}));var fi,Rr=!1,la=function(){};return typeof BroadcastChannel<"u"&&((la=function(){(fi=new BroadcastChannel(Fn)).onmessage=function(o){return o.data&&oa(o.data)}})(),typeof fi.unref=="function"&&fi.unref(),Un(Ji,function(o){Rr||fi.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!gn.disableBfCache&&o.persisted){de&&console.debug("Dexie: handling persisted pagehide"),fi!=null&&fi.close();for(var f=0,v=Rn;f<v.length;f++)v[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!gn.disableBfCache&&o.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),la(),oa({all:new Fr(-1/0,[[]])}))})),nt.rejectionMapper=function(o,f){return!o||o instanceof W||o instanceof TypeError||o instanceof SyntaxError||!o.name||!$e[o.name]?o:(f=new $e[o.name](f||o.message,o),"stack"in o&&_(f,"stack",{get:function(){return this.inner.stack}}),f)},xe(de),n(gn,Object.freeze({__proto__:null,Dexie:gn,liveQuery:un,Entity:Vi,cmp:Yt,PropModification:Gi,replacePrefix:function(o,f){return new Gi({replacePrefix:[o,f]})},add:function(o){return new Gi({add:o})},remove:function(o){return new Gi({remove:o})},default:gn,RangeSet:Fr,mergeRanges:Oi,rangesOverlap:Ps}),{default:gn}),gn})})(fd);var hp=fd.exports;const Ql=hc(hp),du=Symbol.for("Dexie"),Xl=globalThis[du]||(globalThis[du]=Ql);if(Ql.semVer!==Xl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ql.semVer} and ${Xl.semVer}`);class fp extends Xl{constructor(){super("POSDatabase");fa(this,"users");fa(this,"products");fa(this,"categories");fa(this,"transactions");fa(this,"activityLogs");fa(this,"settings");this.version(1).stores({users:"&id, username, email, role, isActive, createdAt",products:"&id, name, sku, categoryId, isActive, quantity, price, createdAt",categories:"&id, name, createdAt",transactions:"&id, transactionNumber, type, status, cashierId, createdAt, total",activityLogs:"&id, userId, action, entity, entityId, createdAt",settings:"&id"}),this.products.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.products.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.categories.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.categories.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.users.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.users.hook("updating",function(t,n,a,i){t.updatedAt=new Date}),this.transactions.hook("creating",function(t,n,a){n.createdAt=new Date,n.updatedAt=new Date}),this.activityLogs.hook("creating",function(t,n,a){n.createdAt=new Date})}}const He=new fp,pa=r=>({...r,name:r.name||"",description:r.description||"",sku:r.sku||"",barcode:r.barcode||"",categoryId:r.categoryId||"",imageUrl:r.imageUrl||"",price:Number(r.price)||0,cost:Number(r.cost)||0,quantity:Number(r.quantity)||0,minStockLevel:Number(r.minStockLevel)||0,isActive:!!r.isActive,createdAt:r.createdAt instanceof Date?r.createdAt:new Date(r.createdAt),updatedAt:r.updatedAt instanceof Date?r.updatedAt:new Date(r.updatedAt)});class Ni{static async getAll(){return await He.users.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.users.get(e)}static async getByUsername(e){return await He.users.where("username").equals(e).first()}static async create(e){return await He.users.add(e)}static async update(e,t){return await He.users.update(e,t)}static async delete(e){await He.users.delete(e)}static async getActiveUsers(){return await He.users.where("isActive").equals(1).toArray()}}class Ra{static async getAll(){return(await He.products.orderBy("name").toArray()).map(pa)}static async getById(e){const t=await He.products.get(e);return t?pa(t):void 0}static async getBySKU(e){const n=(await He.products.toArray()).find(a=>a.sku.toLowerCase()===e.toLowerCase());return n?pa(n):void 0}static async create(e){return await He.products.add(e)}static async update(e,t){return await He.products.update(e,t)}static async delete(e){await He.products.delete(e)}static async getByCategory(e){return(await He.products.where("categoryId").equals(e).toArray()).map(pa)}static async getActiveProducts(){return(await He.products.where("isActive").equals(1).toArray()).map(pa)}static async getLowStockProducts(e){return(await He.products.toArray()).map(pa).filter(n=>n.quantity<=(e||n.minStockLevel))}static async getOutOfStockProducts(){return(await He.products.where("quantity").equals(0).toArray()).map(pa)}static async updateStock(e,t){const n=await He.products.get(e);if(!n)throw new Error("Product not found");const a=pa(n),i=Math.max(0,a.quantity+t);return await He.products.update(e,{quantity:i})}static async searchProducts(e){const t=e.toLowerCase();return(await He.products.filter(a=>a.name.toLowerCase().includes(t)||a.sku.toLowerCase().includes(t)||(a.description?a.description.toLowerCase().includes(t):!1)).toArray()).map(pa)}}class us{static async getAll(){return await He.categories.orderBy("name").toArray()}static async getById(e){return await He.categories.get(e)}static async create(e){return await He.categories.add(e)}static async update(e,t){return await He.categories.update(e,t)}static async delete(e){const t=await He.products.where("categoryId").equals(e).count();if(t>0)throw new Error(`Cannot delete category. ${t} products are using this category.`);await He.categories.delete(e)}static async getCategoryWithProductCount(){const e=await He.categories.toArray();return await Promise.all(e.map(async n=>{const a=await He.products.where("categoryId").equals(n.id).count();return{...n,productCount:a}}))}}class Bs{static async getAll(){return await He.transactions.orderBy("createdAt").reverse().toArray()}static async getById(e){return await He.transactions.get(e)}static async create(e){return await He.transactions.add(e)}static async update(e,t){return await He.transactions.update(e,t)}static async delete(e){await He.transactions.delete(e)}static async getByDateRange(e,t){return await He.transactions.where("createdAt").between(e,t).reverse().toArray()}static async getByCashier(e){return await He.transactions.where("cashierId").equals(e).reverse().toArray()}static async getByType(e){return await He.transactions.where("type").equals(e).reverse().toArray()}static async getTodayTransactions(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);return await this.getByDateRange(t,n)}static async getSalesStats(e,t){const n=await this.getByDateRange(e,t),a=n.filter(i=>i.type==="sale"&&i.status==="completed");return{totalSales:a.reduce((i,c)=>i+c.total,0),totalTransactions:a.length,averageTransaction:a.length>0?a.reduce((i,c)=>i+c.total,0)/a.length:0,totalRefunds:n.filter(i=>i.type==="refund").reduce((i,c)=>i+c.total,0)}}}class po{static async getAll(){return await He.activityLogs.orderBy("createdAt").reverse().toArray()}static async create(e){return await He.activityLogs.add(e)}static async getByUser(e){return await He.activityLogs.where("userId").equals(e).reverse().toArray()}static async getByEntity(e,t){let n=He.activityLogs.where("entity").equals(e);return t&&(n=n.and(a=>a.entityId===t)),await n.reverse().toArray()}static async getRecent(e=100){return await He.activityLogs.orderBy("createdAt").reverse().limit(e).toArray()}static async cleanup(e=30){const t=new Date;return t.setDate(t.getDate()-e),await He.activityLogs.where("createdAt").below(t).delete()}}class ps{static async get(){return await He.settings.orderBy("id").first()}static async create(e){return await He.settings.add(e)}static async update(e){const t=await this.get();if(!t)throw new Error("Settings not found");return await He.settings.update(t.id,e)}static async getOrCreate(){let e=await this.get();if(!e){const t={id:"default",currency:"PHP",storeName:"My Store",autoBackup:!1,backupFrequency:"daily",lowStockAlert:!0,lowStockThreshold:5,createdAt:new Date,updatedAt:new Date};await this.create(t),e=t}return e}}class Us{static async initialize(){try{await He.open(),console.log("Database initialized successfully"),await ps.getOrCreate()}catch(e){throw console.error("Failed to initialize database:",e),e}}static async backup(){const e={users:await Ni.getAll(),products:await Ra.getAll(),categories:await us.getAll(),transactions:await Bs.getAll(),activityLogs:await po.getAll(),settings:await ps.get(),exportDate:new Date().toISOString(),version:"1.0"};return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}static async restore(e){try{const t=JSON.parse(e);await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear(),await He.settings.clear(),t.users&&await He.users.bulkAdd(t.users),t.products&&await He.products.bulkAdd(t.products),t.categories&&await He.categories.bulkAdd(t.categories),t.transactions&&await He.transactions.bulkAdd(t.transactions),t.activityLogs&&await He.activityLogs.bulkAdd(t.activityLogs),t.settings&&await He.settings.add(t.settings)}),console.log("Database restored successfully")}catch(t){throw console.error("Failed to restore database:",t),new Error("Invalid backup file or restore failed")}}static async clearAll(){await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs],async()=>{await He.users.clear(),await He.products.clear(),await He.categories.clear(),await He.transactions.clear(),await He.activityLogs.clear()}),await ps.getOrCreate(),localStorage.setItem("pos-data-cleared-intentionally","true"),console.log("All data cleared successfully. Sample data will not be re-initialized on reload.")}static wasDataClearedIntentionally(){return localStorage.getItem("pos-data-cleared-intentionally")==="true"}static clearIntentionalClearingFlag(){localStorage.removeItem("pos-data-cleared-intentionally")}static async getStats(){return{users:await He.users.count(),products:await He.products.count(),categories:await He.categories.count(),transactions:await He.transactions.count(),activityLogs:await He.activityLogs.count()}}}const pp=Object.freeze(Object.defineProperty({__proto__:null,ActivityLogService:po,CategoryService:us,DatabaseService:Us,ProductService:Ra,SettingsService:ps,TransactionService:Bs,UserService:Ni},Symbol.toStringTag,{value:"Module"})),Ro=(r,e=0)=>{const t=r.reduce((i,c)=>i+c.totalPrice,0),n=t*e/100,a=t-n;return{subtotal:t,tax:0,discount:n,total:a}},Gn=sp()(dp((r,e)=>({auth:{user:null,token:null,isAuthenticated:!1},login:(t,n)=>{r({auth:{user:t,token:n,isAuthenticated:!0}}),e().addActivityLog({userId:t.id,action:"LOGIN",entity:"USER",entityId:t.id,details:{username:t.username}})},logout:()=>{const t=e().auth.user;t&&e().addActivityLog({userId:t.id,action:"LOGOUT",entity:"USER",entityId:t.id,details:{username:t.username}}),r({auth:{user:null,token:null,isAuthenticated:!1}}),r({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},updateUser:t=>{r(n=>({auth:{...n.auth,user:t}}))},cart:{items:[],subtotal:0,tax:0,discount:0,total:0},addToCart:(t,n=1)=>{r(a=>{const i=a.cart.items.find(h=>h.product.id===t.id);let c;if(i)c=a.cart.items.map(h=>h.product.id===t.id?{...h,quantity:h.quantity+n,totalPrice:(h.quantity+n)*h.unitPrice}:h);else{const h={product:t,quantity:n,unitPrice:t.price,totalPrice:n*t.price};c=[...a.cart.items,h]}const u=Ro(c,a.cart.discount);return{cart:{items:c,...u}}})},removeFromCart:t=>{r(n=>{const a=n.cart.items.filter(c=>c.product.id!==t),i=Ro(a,n.cart.discount);return{cart:{items:a,...i}}})},updateCartItem:(t,n)=>{r(a=>{if(n<=0)return e().removeFromCart(t),a;const i=a.cart.items.map(u=>u.product.id===t?{...u,quantity:n,totalPrice:n*u.unitPrice}:u),c=Ro(i,a.cart.discount);return{cart:{items:i,...c}}})},clearCart:()=>{r({cart:{items:[],subtotal:0,tax:0,discount:0,total:0}})},applyDiscount:t=>{r(n=>{const a=Ro(n.cart.items,t);return{cart:{...n.cart,...a}}})},products:[],categories:[],loadProducts:async()=>{try{const t=await Ra.getAll();r({products:t})}catch(t){console.error("Failed to load products:",t),r({error:"Failed to load products"})}},loadCategories:async()=>{try{const t=await us.getAll();r({categories:t})}catch(t){console.error("Failed to load categories:",t),r({error:"Failed to load categories"})}},setProducts:t=>r({products:t}),setCategories:t=>r({categories:t}),addProduct:async t=>{try{await Ra.create(t),await e().loadProducts();const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"PRODUCT",entityId:t.id,details:{name:t.name,sku:t.sku}})}catch(n){throw console.error("Failed to add product:",n),n}},updateProduct:async(t,n)=>{try{await Ra.update(t,n),await e().loadProducts();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"PRODUCT",entityId:t,details:n})}catch(a){throw console.error("Failed to update product:",a),a}},deleteProduct:async t=>{try{const n=e().products.find(i=>i.id===t);await Ra.delete(t),await e().loadProducts();const a=e().auth.user;a&&n&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"PRODUCT",entityId:t,details:{name:n.name,sku:n.sku}})}catch(n){throw console.error("Failed to delete product:",n),n}},updateStock:async(t,n)=>{try{await Ra.updateStock(t,n),await e().loadProducts()}catch(a){throw console.error("Failed to update stock:",a),a}},addCategory:async t=>{try{await us.create(t),await e().loadCategories();const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"CATEGORY",entityId:t.id,details:{name:t.name}})}catch(n){throw console.error("Failed to add category:",n),n}},updateCategory:async(t,n)=>{try{await us.update(t,n),await e().loadCategories();const a=e().auth.user;a&&await e().addActivityLog({userId:a.id,action:"UPDATE",entity:"CATEGORY",entityId:t,details:n})}catch(a){throw console.error("Failed to update category:",a),a}},deleteCategory:async t=>{try{const n=e().categories.find(i=>i.id===t);await us.delete(t),await e().loadCategories();const a=e().auth.user;a&&n&&await e().addActivityLog({userId:a.id,action:"DELETE",entity:"CATEGORY",entityId:t,details:{name:n.name}})}catch(n){throw console.error("Failed to delete category:",n),n}},transactions:[],loadTransactions:async()=>{try{const t=await Bs.getAll();r({transactions:t})}catch(t){console.error("Failed to load transactions:",t),r({error:"Failed to load transactions"})}},setTransactions:t=>r({transactions:t}),addTransaction:async t=>{try{await Bs.create(t),await e().loadTransactions();for(const a of t.items)t.type==="sale"?await e().updateStock(a.productId,-a.quantity):t.type==="refund"&&await e().updateStock(a.productId,a.quantity);const n=e().auth.user;n&&await e().addActivityLog({userId:n.id,action:"CREATE",entity:"TRANSACTION",entityId:t.id,details:{type:t.type,total:t.total,itemCount:t.items.length}})}catch(n){throw console.error("Failed to add transaction:",n),n}},updateTransaction:async(t,n)=>{try{await Bs.update(t,n),await e().loadTransactions()}catch(a){throw console.error("Failed to update transaction:",a),a}},users:[],loadUsers:async()=>{try{const t=await Ni.getAll();r({users:t})}catch(t){console.error("Failed to load users:",t),r({error:"Failed to load users"})}},setUsers:t=>r({users:t}),addUser:async t=>{try{await Ni.create(t),await e().loadUsers()}catch(n){throw console.error("Failed to add user:",n),n}},updateUserData:async(t,n)=>{try{await Ni.update(t,n),await e().loadUsers()}catch(a){throw console.error("Failed to update user:",a),a}},deleteUser:async t=>{try{await Ni.delete(t),await e().loadUsers()}catch(n){throw console.error("Failed to delete user:",n),n}},activityLogs:[],loadActivityLogs:async()=>{try{const t=await po.getAll();r({activityLogs:t})}catch(t){console.error("Failed to load activity logs:",t),r({error:"Failed to load activity logs"})}},addActivityLog:async t=>{try{const n={...t,id:Date.now().toString(),createdAt:new Date};await po.create(n)}catch(n){console.error("Failed to add activity log:",n)}},loading:!1,error:null,setLoading:t=>r({loading:t}),setError:t=>r({error:t}),settings:{currency:"PHP",storeName:"My Store"},loadSettings:async()=>{try{const t=await ps.getOrCreate();r({settings:{currency:t.currency,storeName:t.storeName}})}catch(t){console.error("Failed to load settings:",t),r({error:"Failed to load settings"})}},updateSettings:async t=>{try{await ps.update(t),await e().loadSettings()}catch(n){throw console.error("Failed to update settings:",n),n}},initializeFromDatabase:async()=>{r({loading:!0,error:null});try{await Promise.all([e().loadSettings(),e().loadCategories(),e().loadProducts(),e().loadUsers(),e().loadTransactions()]),console.log("Store initialized from database successfully")}catch(t){console.error("Failed to initialize store from database:",t),r({error:"Failed to initialize application data"})}finally{r({loading:!1})}}}),{name:"pos-auth-storage",partialize:r=>({auth:r.auth})})),mp=()=>l.jsx("footer",{className:"bg-white border-t border-gray-200 py-4 px-6",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("p",{className:"text-sm text-gray-500",children:["Made with  by"," ",l.jsx("span",{className:"font-semibold text-gray-700",children:"AOG Tech"})]})})}),gp=({children:r})=>{var x,b,w;const e=Oh(),{auth:t,logout:n}=Gn(),[a,i]=Ft.useState(!1),u=[{name:"Dashboard",href:"/dashboard",icon:Rh,roles:["admin","manager"]},{name:"Sales",href:"/sales",icon:fs,roles:["admin","manager","cashier"]},{name:"Inventory",href:"/inventory",icon:ho,roles:["admin","manager"]},{name:"Reports",href:"/reports",icon:qh,roles:["admin","manager","cashier"]},{name:"Users",href:"/users",icon:Kl,roles:["admin"]},{name:"Settings",href:"/settings",icon:Vu,roles:["admin","manager"]}].filter(m=>{var _;return((_=t.user)==null?void 0:_.role)&&m.roles.includes(t.user.role)}),h=()=>{n()},y=m=>e.pathname===m;return l.jsxs("div",{className:"flex h-screen bg-gray-100",children:[a&&l.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>i(!1),children:l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),l.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${a?"translate-x-0":"-translate-x-full"}
      `,children:[l.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[l.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"POS System"}),l.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!1),children:l.jsx(zs,{className:"h-6 w-6"})})]}),l.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:u.map(m=>{const _=y(m.href),L=m.icon;return l.jsxs(os,{to:m.href,className:`
                  sidebar-nav group
                  ${_?"active":""}
                `,onClick:()=>i(!1),children:[l.jsx(L,{className:"mr-3 h-5 w-5"}),m.name]},m.name)})}),l.jsxs("div",{className:"border-t border-gray-200 p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(fc,{className:"h-8 w-8 text-gray-400"})}),l.jsxs("div",{className:"ml-3",children:[l.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(x=t.user)==null?void 0:x.firstName," ",(b=t.user)==null?void 0:b.lastName]}),l.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(w=t.user)==null?void 0:w.role})]})]}),l.jsxs("button",{onClick:h,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors duration-200",children:[l.jsx(Th,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:pl-0",children:[l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[l.jsx("button",{className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500",onClick:()=>i(!0),children:l.jsx(Mh,{className:"h-6 w-6"})}),l.jsx("div",{className:"flex-1 lg:ml-0",children:l.jsx("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:e.pathname.replace("/","")||"Dashboard"})}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsx("span",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString()})})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:r}),l.jsx(mp,{})]})]})};var bo=r=>r.type==="checkbox",ds=r=>r instanceof Date,Pn=r=>r==null;const pd=r=>typeof r=="object";var zr=r=>!Pn(r)&&!Array.isArray(r)&&pd(r)&&!ds(r),vp=r=>zr(r)&&r.target?bo(r.target)?r.target.checked:r.target.value:r,yp=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,bp=(r,e)=>r.has(yp(e)),xp=r=>{const e=r.constructor&&r.constructor.prototype;return zr(e)&&e.hasOwnProperty("isPrototypeOf")},gc=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wn(r){let e;const t=Array.isArray(r),n=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(gc&&(r instanceof Blob||n))&&(t||zr(r)))if(e=t?[]:{},!t&&!xp(r))e=r;else for(const a in r)r.hasOwnProperty(a)&&(e[a]=wn(r[a]));else return r;return e}var ul=r=>Array.isArray(r)?r.filter(Boolean):[],$r=r=>r===void 0,Pt=(r,e,t)=>{if(!e||!zr(r))return t;const n=ul(e.split(/[,[\].]+?/)).reduce((a,i)=>Pn(a)?a:a[i],r);return $r(n)||n===r?$r(r[e])?t:r[e]:n},Ri=r=>typeof r=="boolean",vc=r=>/^\w*$/.test(r),md=r=>ul(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Nr=(r,e,t)=>{let n=-1;const a=vc(e)?[e]:md(e),i=a.length,c=i-1;for(;++n<i;){const u=a[n];let h=t;if(n!==c){const y=r[u];h=zr(y)||Array.isArray(y)?y:isNaN(+a[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;r[u]=h,r=r[u]}};const hu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ma={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ft.createContext(null);var wp=(r,e,t,n=!0)=>{const a={defaultValues:e._defaultValues};for(const i in r)Object.defineProperty(a,i,{get:()=>{const c=i;return e._proxyFormState[c]!==xi.all&&(e._proxyFormState[c]=!n||xi.all),t&&(t[c]=!0),r[c]}});return a};const Np=typeof window<"u"?bi.useLayoutEffect:bi.useEffect;var qi=r=>typeof r=="string",Ap=(r,e,t,n,a)=>qi(r)?(n&&e.watch.add(r),Pt(t,r,a)):Array.isArray(r)?r.map(i=>(n&&e.watch.add(i),Pt(t,i))):(n&&(e.watchAll=!0),t),Sp=(r,e,t,n,a)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:a||!0}}:{},io=r=>Array.isArray(r)?r:[r],fu=()=>{let r=[];return{get observers(){return r},next:a=>{for(const i of r)i.next&&i.next(a)},subscribe:a=>(r.push(a),{unsubscribe:()=>{r=r.filter(i=>i!==a)}}),unsubscribe:()=>{r=[]}}},Zl=r=>Pn(r)||!pd(r);function qa(r,e){if(Zl(r)||Zl(e))return r===e;if(ds(r)&&ds(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const a of t){const i=r[a];if(!n.includes(a))return!1;if(a!=="ref"){const c=e[a];if(ds(i)&&ds(c)||zr(i)&&zr(c)||Array.isArray(i)&&Array.isArray(c)?!qa(i,c):i!==c)return!1}}return!0}var En=r=>zr(r)&&!Object.keys(r).length,yc=r=>r.type==="file",wi=r=>typeof r=="function",el=r=>{if(!gc)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},gd=r=>r.type==="select-multiple",bc=r=>r.type==="radio",jp=r=>bc(r)||bo(r),Il=r=>el(r)&&r.isConnected;function _p(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=$r(r)?n++:r[e[n++]];return r}function Pp(r){for(const e in r)if(r.hasOwnProperty(e)&&!$r(r[e]))return!1;return!0}function Zr(r,e){const t=Array.isArray(e)?e:vc(e)?[e]:md(e),n=t.length===1?r:_p(r,t),a=t.length-1,i=t[a];return n&&delete n[i],a!==0&&(zr(n)&&En(n)||Array.isArray(n)&&Pp(n))&&Zr(r,t.slice(0,-1)),r}var vd=r=>{for(const e in r)if(wi(r[e]))return!0;return!1};function tl(r,e={}){const t=Array.isArray(r);if(zr(r)||t)for(const n in r)Array.isArray(r[n])||zr(r[n])&&!vd(r[n])?(e[n]=Array.isArray(r[n])?[]:{},tl(r[n],e[n])):Pn(r[n])||(e[n]=!0);return e}function yd(r,e,t){const n=Array.isArray(r);if(zr(r)||n)for(const a in r)Array.isArray(r[a])||zr(r[a])&&!vd(r[a])?$r(e)||Zl(t[a])?t[a]=Array.isArray(r[a])?tl(r[a],[]):{...tl(r[a])}:yd(r[a],Pn(e)?{}:e[a],t[a]):t[a]=!qa(r[a],e[a]);return t}var Zs=(r,e)=>yd(r,e,tl(e));const pu={value:!1,isValid:!1},mu={value:!0,isValid:!0};var bd=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!$r(r[0].attributes.value)?$r(r[0].value)||r[0].value===""?mu:{value:r[0].value,isValid:!0}:mu:pu}return pu},xd=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>$r(r)?r:e?r===""?NaN:r&&+r:t&&qi(r)?new Date(r):n?n(r):r;const gu={isValid:!1,value:null};var wd=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,gu):gu;function vu(r){const e=r.ref;return yc(e)?e.files:bc(e)?wd(r.refs).value:gd(e)?[...e.selectedOptions].map(({value:t})=>t):bo(e)?bd(r.refs).value:xd($r(e.value)?r.ref.value:e.value,r)}var Lp=(r,e,t,n)=>{const a={};for(const i of r){const c=Pt(e,i);c&&Nr(a,i,c._f)}return{criteriaMode:t,names:[...r],fields:a,shouldUseNativeValidation:n}},rl=r=>r instanceof RegExp,eo=r=>$r(r)?r:rl(r)?r.source:zr(r)?rl(r.value)?r.value.source:r.value:r,yu=r=>({isOnSubmit:!r||r===xi.onSubmit,isOnBlur:r===xi.onBlur,isOnChange:r===xi.onChange,isOnAll:r===xi.all,isOnTouch:r===xi.onTouched});const bu="AsyncFunction";var kp=r=>!!r&&!!r.validate&&!!(wi(r.validate)&&r.validate.constructor.name===bu||zr(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===bu)),Cp=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),xu=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const ao=(r,e,t,n)=>{for(const a of t||Object.keys(r)){const i=Pt(r,a);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],a)&&!n)return!0;if(c.ref&&e(c.ref,c.name)&&!n)return!0;if(ao(u,e))break}else if(zr(u)&&ao(u,e))break}}};function wu(r,e,t){const n=Pt(r,t);if(n||vc(t))return{error:n,name:t};const a=t.split(".");for(;a.length;){const i=a.join("."),c=Pt(e,i),u=Pt(r,i);if(c&&!Array.isArray(c)&&t!==i)return{name:t};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};a.pop()}return{name:t}}var Fp=(r,e,t,n)=>{t(r);const{name:a,...i}=r;return En(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!n||xi.all))},Dp=(r,e,t)=>!r||!e||r===e||io(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),Op=(r,e,t,n,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(e||r):(t?n.isOnBlur:a.isOnBlur)?!r:(t?n.isOnChange:a.isOnChange)?r:!0,Ip=(r,e)=>!ul(Pt(r,e)).length&&Zr(r,e),Ep=(r,e,t)=>{const n=io(Pt(r,t));return Nr(n,"root",e[t]),Nr(r,t,n),r},Ko=r=>qi(r);function Nu(r,e,t="validate"){if(Ko(r)||Array.isArray(r)&&r.every(Ko)||Ri(r)&&!r)return{type:t,message:Ko(r)?r:"",ref:e}}var Ds=r=>zr(r)&&!rl(r)?r:{value:r,message:""},Au=async(r,e,t,n,a,i)=>{const{ref:c,refs:u,required:h,maxLength:y,minLength:x,min:b,max:w,pattern:m,validate:_,name:L,valueAsNumber:O,mount:P}=r._f,j=Pt(t,L);if(!P||e.has(L))return{};const C=u?u[0]:c,z=A=>{a&&C.reportValidity&&(C.setCustomValidity(Ri(A)?"":A||""),C.reportValidity())},G={},ee=bc(c),T=bo(c),U=ee||T,te=(O||yc(c))&&$r(c.value)&&$r(j)||el(c)&&c.value===""||j===""||Array.isArray(j)&&!j.length,se=Sp.bind(null,L,n,G),D=(A,M,V,fe=ma.maxLength,Y=ma.minLength)=>{const J=A?M:V;G[L]={type:A?fe:Y,message:J,ref:c,...se(A?fe:Y,J)}};if(i?!Array.isArray(j)||!j.length:h&&(!U&&(te||Pn(j))||Ri(j)&&!j||T&&!bd(u).isValid||ee&&!wd(u).isValid)){const{value:A,message:M}=Ko(h)?{value:!!h,message:h}:Ds(h);if(A&&(G[L]={type:ma.required,message:M,ref:C,...se(ma.required,M)},!n))return z(M),G}if(!te&&(!Pn(b)||!Pn(w))){let A,M;const V=Ds(w),fe=Ds(b);if(!Pn(j)&&!isNaN(j)){const Y=c.valueAsNumber||j&&+j;Pn(V.value)||(A=Y>V.value),Pn(fe.value)||(M=Y<fe.value)}else{const Y=c.valueAsDate||new Date(j),J=he=>new Date(new Date().toDateString()+" "+he),ne=c.type=="time",K=c.type=="week";qi(V.value)&&j&&(A=ne?J(j)>J(V.value):K?j>V.value:Y>new Date(V.value)),qi(fe.value)&&j&&(M=ne?J(j)<J(fe.value):K?j<fe.value:Y<new Date(fe.value))}if((A||M)&&(D(!!A,V.message,fe.message,ma.max,ma.min),!n))return z(G[L].message),G}if((y||x)&&!te&&(qi(j)||i&&Array.isArray(j))){const A=Ds(y),M=Ds(x),V=!Pn(A.value)&&j.length>+A.value,fe=!Pn(M.value)&&j.length<+M.value;if((V||fe)&&(D(V,A.message,M.message),!n))return z(G[L].message),G}if(m&&!te&&qi(j)){const{value:A,message:M}=Ds(m);if(rl(A)&&!j.match(A)&&(G[L]={type:ma.pattern,message:M,ref:c,...se(ma.pattern,M)},!n))return z(M),G}if(_){if(wi(_)){const A=await _(j,t),M=Nu(A,C);if(M&&(G[L]={...M,...se(ma.validate,M.message)},!n))return z(M.message),G}else if(zr(_)){let A={};for(const M in _){if(!En(A)&&!n)break;const V=Nu(await _[M](j,t),C,M);V&&(A={...V,...se(M,V.message)},z(V.message),n&&(G[L]=A))}if(!En(A)&&(G[L]={ref:C,...A},!n))return G}}return z(!0),G};const Tp={mode:xi.onSubmit,reValidateMode:xi.onChange,shouldFocusError:!0};function Mp(r={}){let e={...Tp,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:wi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let a=zr(e.defaultValues)||zr(e.values)?wn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:wn(a),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,y=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const w={array:fu(),state:fu()},m=e.criteriaMode===xi.all,_=X=>de=>{clearTimeout(y),y=setTimeout(X,de)},L=async X=>{if(!e.disabled&&(x.isValid||b.isValid||X)){const de=e.resolver?En((await T()).errors):await te(n,!0);de!==t.isValid&&w.state.next({isValid:de})}},O=(X,de)=>{!e.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((X||Array.from(u.mount)).forEach(xe=>{xe&&(de?Nr(t.validatingFields,xe,de):Zr(t.validatingFields,xe))}),w.state.next({validatingFields:t.validatingFields,isValidating:!En(t.validatingFields)}))},P=(X,de=[],xe,Be,Ke=!0,ze=!0)=>{if(Be&&xe&&!e.disabled){if(c.action=!0,ze&&Array.isArray(Pt(n,X))){const et=xe(Pt(n,X),Be.argA,Be.argB);Ke&&Nr(n,X,et)}if(ze&&Array.isArray(Pt(t.errors,X))){const et=xe(Pt(t.errors,X),Be.argA,Be.argB);Ke&&Nr(t.errors,X,et),Ip(t.errors,X)}if((x.touchedFields||b.touchedFields)&&ze&&Array.isArray(Pt(t.touchedFields,X))){const et=xe(Pt(t.touchedFields,X),Be.argA,Be.argB);Ke&&Nr(t.touchedFields,X,et)}(x.dirtyFields||b.dirtyFields)&&(t.dirtyFields=Zs(a,i)),w.state.next({name:X,isDirty:D(X,de),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Nr(i,X,de)},j=(X,de)=>{Nr(t.errors,X,de),w.state.next({errors:t.errors})},C=X=>{t.errors=X,w.state.next({errors:t.errors,isValid:!1})},z=(X,de,xe,Be)=>{const Ke=Pt(n,X);if(Ke){const ze=Pt(i,X,$r(xe)?Pt(a,X):xe);$r(ze)||Be&&Be.defaultChecked||de?Nr(i,X,de?ze:vu(Ke._f)):V(X,ze),c.mount&&L()}},G=(X,de,xe,Be,Ke)=>{let ze=!1,et=!1;const gt={name:X};if(!e.disabled){if(!xe||Be){(x.isDirty||b.isDirty)&&(et=t.isDirty,t.isDirty=gt.isDirty=D(),ze=et!==gt.isDirty);const _t=qa(Pt(a,X),de);et=!!Pt(t.dirtyFields,X),_t?Zr(t.dirtyFields,X):Nr(t.dirtyFields,X,!0),gt.dirtyFields=t.dirtyFields,ze=ze||(x.dirtyFields||b.dirtyFields)&&et!==!_t}if(xe){const _t=Pt(t.touchedFields,X);_t||(Nr(t.touchedFields,X,xe),gt.touchedFields=t.touchedFields,ze=ze||(x.touchedFields||b.touchedFields)&&_t!==xe)}ze&&Ke&&w.state.next(gt)}return ze?gt:{}},ee=(X,de,xe,Be)=>{const Ke=Pt(t.errors,X),ze=(x.isValid||b.isValid)&&Ri(de)&&t.isValid!==de;if(e.delayError&&xe?(h=_(()=>j(X,xe)),h(e.delayError)):(clearTimeout(y),h=null,xe?Nr(t.errors,X,xe):Zr(t.errors,X)),(xe?!qa(Ke,xe):Ke)||!En(Be)||ze){const et={...Be,...ze&&Ri(de)?{isValid:de}:{},errors:t.errors,name:X};t={...t,...et},w.state.next(et)}},T=async X=>{O(X,!0);const de=await e.resolver(i,e.context,Lp(X||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return O(X),de},U=async X=>{const{errors:de}=await T(X);if(X)for(const xe of X){const Be=Pt(de,xe);Be?Nr(t.errors,xe,Be):Zr(t.errors,xe)}else t.errors=de;return de},te=async(X,de,xe={valid:!0})=>{for(const Be in X){const Ke=X[Be];if(Ke){const{_f:ze,...et}=Ke;if(ze){const gt=u.array.has(ze.name),_t=Ke._f&&kp(Ke._f);_t&&x.validatingFields&&O([Be],!0);const Nt=await Au(Ke,u.disabled,i,m,e.shouldUseNativeValidation&&!de,gt);if(_t&&x.validatingFields&&O([Be]),Nt[ze.name]&&(xe.valid=!1,de))break;!de&&(Pt(Nt,ze.name)?gt?Ep(t.errors,Nt,ze.name):Nr(t.errors,ze.name,Nt[ze.name]):Zr(t.errors,ze.name))}!En(et)&&await te(et,de,xe)}}return xe.valid},se=()=>{for(const X of u.unMount){const de=Pt(n,X);de&&(de._f.refs?de._f.refs.every(xe=>!Il(xe)):!Il(de._f.ref))&&Pe(X)}u.unMount=new Set},D=(X,de)=>!e.disabled&&(X&&de&&Nr(i,X,de),!qa(he(),a)),A=(X,de,xe)=>Ap(X,u,{...c.mount?i:$r(de)?a:qi(X)?{[X]:de}:de},xe,de),M=X=>ul(Pt(c.mount?i:a,X,e.shouldUnregister?Pt(a,X,[]):[])),V=(X,de,xe={})=>{const Be=Pt(n,X);let Ke=de;if(Be){const ze=Be._f;ze&&(!ze.disabled&&Nr(i,X,xd(de,ze)),Ke=el(ze.ref)&&Pn(de)?"":de,gd(ze.ref)?[...ze.ref.options].forEach(et=>et.selected=Ke.includes(et.value)):ze.refs?bo(ze.ref)?ze.refs.forEach(et=>{(!et.defaultChecked||!et.disabled)&&(Array.isArray(Ke)?et.checked=!!Ke.find(gt=>gt===et.value):et.checked=Ke===et.value||!!Ke)}):ze.refs.forEach(et=>et.checked=et.value===Ke):yc(ze.ref)?ze.ref.value="":(ze.ref.value=Ke,ze.ref.type||w.state.next({name:X,values:wn(i)})))}(xe.shouldDirty||xe.shouldTouch)&&G(X,Ke,xe.shouldTouch,xe.shouldDirty,!0),xe.shouldValidate&&K(X)},fe=(X,de,xe)=>{for(const Be in de){if(!de.hasOwnProperty(Be))return;const Ke=de[Be],ze=X+"."+Be,et=Pt(n,ze);(u.array.has(X)||zr(Ke)||et&&!et._f)&&!ds(Ke)?fe(ze,Ke,xe):V(ze,Ke,xe)}},Y=(X,de,xe={})=>{const Be=Pt(n,X),Ke=u.array.has(X),ze=wn(de);Nr(i,X,ze),Ke?(w.array.next({name:X,values:wn(i)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&xe.shouldDirty&&w.state.next({name:X,dirtyFields:Zs(a,i),isDirty:D(X,ze)})):Be&&!Be._f&&!Pn(ze)?fe(X,ze,xe):V(X,ze,xe),xu(X,u)&&w.state.next({...t}),w.state.next({name:c.mount?X:void 0,values:wn(i)})},J=async X=>{c.mount=!0;const de=X.target;let xe=de.name,Be=!0;const Ke=Pt(n,xe),ze=_t=>{Be=Number.isNaN(_t)||ds(_t)&&isNaN(_t.getTime())||qa(_t,Pt(i,xe,_t))},et=yu(e.mode),gt=yu(e.reValidateMode);if(Ke){let _t,Nt;const Bt=de.type?vu(Ke._f):vp(X),lt=X.type===hu.BLUR||X.type===hu.FOCUS_OUT,hr=!Cp(Ke._f)&&!e.resolver&&!Pt(t.errors,xe)&&!Ke._f.deps||Op(lt,Pt(t.touchedFields,xe),t.isSubmitted,gt,et),Wt=xu(xe,u,lt);Nr(i,xe,Bt),lt?(Ke._f.onBlur&&Ke._f.onBlur(X),h&&h(0)):Ke._f.onChange&&Ke._f.onChange(X);const Tr=G(xe,Bt,lt),Gt=!En(Tr)||Wt;if(!lt&&w.state.next({name:xe,type:X.type,values:wn(i)}),hr)return(x.isValid||b.isValid)&&(e.mode==="onBlur"?lt&&L():lt||L()),Gt&&w.state.next({name:xe,...Wt?{}:Tr});if(!lt&&Wt&&w.state.next({...t}),e.resolver){const{errors:ct}=await T([xe]);if(ze(Bt),Be){const Cr=wu(t.errors,n,xe),Kt=wu(ct,n,Cr.name||xe);_t=Kt.error,xe=Kt.name,Nt=En(ct)}}else O([xe],!0),_t=(await Au(Ke,u.disabled,i,m,e.shouldUseNativeValidation))[xe],O([xe]),ze(Bt),Be&&(_t?Nt=!1:(x.isValid||b.isValid)&&(Nt=await te(n,!0)));Be&&(Ke._f.deps&&K(Ke._f.deps),ee(xe,Nt,_t,Tr))}},ne=(X,de)=>{if(Pt(t.errors,de)&&X.focus)return X.focus(),1},K=async(X,de={})=>{let xe,Be;const Ke=io(X);if(e.resolver){const ze=await U($r(X)?X:Ke);xe=En(ze),Be=X?!Ke.some(et=>Pt(ze,et)):xe}else X?(Be=(await Promise.all(Ke.map(async ze=>{const et=Pt(n,ze);return await te(et&&et._f?{[ze]:et}:et)}))).every(Boolean),!(!Be&&!t.isValid)&&L()):Be=xe=await te(n);return w.state.next({...!qi(X)||(x.isValid||b.isValid)&&xe!==t.isValid?{}:{name:X},...e.resolver||!X?{isValid:xe}:{},errors:t.errors}),de.shouldFocus&&!Be&&ao(n,ne,X?Ke:u.mount),Be},he=X=>{const de={...c.mount?i:a};return $r(X)?de:qi(X)?Pt(de,X):X.map(xe=>Pt(de,xe))},Oe=(X,de)=>({invalid:!!Pt((de||t).errors,X),isDirty:!!Pt((de||t).dirtyFields,X),error:Pt((de||t).errors,X),isValidating:!!Pt(t.validatingFields,X),isTouched:!!Pt((de||t).touchedFields,X)}),F=X=>{X&&io(X).forEach(de=>Zr(t.errors,de)),w.state.next({errors:X?t.errors:{}})},W=(X,de,xe)=>{const Be=(Pt(n,X,{_f:{}})._f||{}).ref,Ke=Pt(t.errors,X)||{},{ref:ze,message:et,type:gt,..._t}=Ke;Nr(t.errors,X,{..._t,...de,ref:Be}),w.state.next({name:X,errors:t.errors,isValid:!1}),xe&&xe.shouldFocus&&Be&&Be.focus&&Be.focus()},Q=(X,de)=>wi(X)?w.state.subscribe({next:xe=>X(A(void 0,de),xe)}):A(X,de,!0),ie=X=>w.state.subscribe({next:de=>{Dp(X.name,de.name,X.exact)&&Fp(de,X.formState||x,Mt,X.reRenderRoot)&&X.callback({values:{...i},...t,...de})}}).unsubscribe,oe=X=>(c.mount=!0,b={...b,...X.formState},ie({...X,formState:b})),Pe=(X,de={})=>{for(const xe of X?io(X):u.mount)u.mount.delete(xe),u.array.delete(xe),de.keepValue||(Zr(n,xe),Zr(i,xe)),!de.keepError&&Zr(t.errors,xe),!de.keepDirty&&Zr(t.dirtyFields,xe),!de.keepTouched&&Zr(t.touchedFields,xe),!de.keepIsValidating&&Zr(t.validatingFields,xe),!e.shouldUnregister&&!de.keepDefaultValue&&Zr(a,xe);w.state.next({values:wn(i)}),w.state.next({...t,...de.keepDirty?{isDirty:D()}:{}}),!de.keepIsValid&&L()},De=({disabled:X,name:de})=>{(Ri(X)&&c.mount||X||u.disabled.has(de))&&(X?u.disabled.add(de):u.disabled.delete(de))},me=(X,de={})=>{let xe=Pt(n,X);const Be=Ri(de.disabled)||Ri(e.disabled);return Nr(n,X,{...xe||{},_f:{...xe&&xe._f?xe._f:{ref:{name:X}},name:X,mount:!0,...de}}),u.mount.add(X),xe?De({disabled:Ri(de.disabled)?de.disabled:e.disabled,name:X}):z(X,!0,de.value),{...Be?{disabled:de.disabled||e.disabled}:{},...e.progressive?{required:!!de.required,min:eo(de.min),max:eo(de.max),minLength:eo(de.minLength),maxLength:eo(de.maxLength),pattern:eo(de.pattern)}:{},name:X,onChange:J,onBlur:J,ref:Ke=>{if(Ke){me(X,de),xe=Pt(n,X);const ze=$r(Ke.value)&&Ke.querySelectorAll&&Ke.querySelectorAll("input,select,textarea")[0]||Ke,et=jp(ze),gt=xe._f.refs||[];if(et?gt.find(_t=>_t===ze):ze===xe._f.ref)return;Nr(n,X,{_f:{...xe._f,...et?{refs:[...gt.filter(Il),ze,...Array.isArray(Pt(a,X))?[{}]:[]],ref:{type:ze.type,name:X}}:{ref:ze}}}),z(X,!1,void 0,ze)}else xe=Pt(n,X,{}),xe._f&&(xe._f.mount=!1),(e.shouldUnregister||de.shouldUnregister)&&!(bp(u.array,X)&&c.action)&&u.unMount.add(X)}}},$e=()=>e.shouldFocusError&&ao(n,ne,u.mount),Xe=X=>{Ri(X)&&(w.state.next({disabled:X}),ao(n,(de,xe)=>{const Be=Pt(n,xe);Be&&(de.disabled=Be._f.disabled||X,Array.isArray(Be._f.refs)&&Be._f.refs.forEach(Ke=>{Ke.disabled=Be._f.disabled||X}))},0,!1))},Qe=(X,de)=>async xe=>{let Be;xe&&(xe.preventDefault&&xe.preventDefault(),xe.persist&&xe.persist());let Ke=wn(i);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:ze,values:et}=await T();t.errors=ze,Ke=et}else await te(n);if(u.disabled.size)for(const ze of u.disabled)Nr(Ke,ze,void 0);if(Zr(t.errors,"root"),En(t.errors)){w.state.next({errors:{}});try{await X(Ke,xe)}catch(ze){Be=ze}}else de&&await de({...t.errors},xe),$e(),setTimeout($e);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:En(t.errors)&&!Be,submitCount:t.submitCount+1,errors:t.errors}),Be)throw Be},dt=(X,de={})=>{Pt(n,X)&&($r(de.defaultValue)?Y(X,wn(Pt(a,X))):(Y(X,de.defaultValue),Nr(a,X,wn(de.defaultValue))),de.keepTouched||Zr(t.touchedFields,X),de.keepDirty||(Zr(t.dirtyFields,X),t.isDirty=de.defaultValue?D(X,wn(Pt(a,X))):D()),de.keepError||(Zr(t.errors,X),x.isValid&&L()),w.state.next({...t}))},Ct=(X,de={})=>{const xe=X?wn(X):a,Be=wn(xe),Ke=En(X),ze=Ke?a:Be;if(de.keepDefaultValues||(a=xe),!de.keepValues){if(de.keepDirtyValues){const et=new Set([...u.mount,...Object.keys(Zs(a,i))]);for(const gt of Array.from(et))Pt(t.dirtyFields,gt)?Nr(ze,gt,Pt(i,gt)):Y(gt,Pt(ze,gt))}else{if(gc&&$r(X))for(const et of u.mount){const gt=Pt(n,et);if(gt&&gt._f){const _t=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(el(_t)){const Nt=_t.closest("form");if(Nt){Nt.reset();break}}}}for(const et of u.mount)Y(et,Pt(ze,et))}i=wn(ze),w.array.next({values:{...ze}}),w.state.next({values:{...ze}})}u={mount:de.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!x.isValid||!!de.keepIsValid||!!de.keepDirtyValues,c.watch=!!e.shouldUnregister,w.state.next({submitCount:de.keepSubmitCount?t.submitCount:0,isDirty:Ke?!1:de.keepDirty?t.isDirty:!!(de.keepDefaultValues&&!qa(X,a)),isSubmitted:de.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Ke?{}:de.keepDirtyValues?de.keepDefaultValues&&i?Zs(a,i):t.dirtyFields:de.keepDefaultValues&&X?Zs(a,X):de.keepDirty?t.dirtyFields:{},touchedFields:de.keepTouched?t.touchedFields:{},errors:de.keepErrors?t.errors:{},isSubmitSuccessful:de.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(X,de)=>Ct(wi(X)?X(i):X,de),ue=(X,de={})=>{const xe=Pt(n,X),Be=xe&&xe._f;if(Be){const Ke=Be.refs?Be.refs[0]:Be.ref;Ke.focus&&(Ke.focus(),de.shouldSelect&&wi(Ke.select)&&Ke.select())}},Mt=X=>{t={...t,...X}},rt={control:{register:me,unregister:Pe,getFieldState:Oe,handleSubmit:Qe,setError:W,_subscribe:ie,_runSchema:T,_focusError:$e,_getWatch:A,_getDirty:D,_setValid:L,_setFieldArray:P,_setDisabledField:De,_setErrors:C,_getFieldArray:M,_reset:Ct,_resetDefaultValues:()=>wi(e.defaultValues)&&e.defaultValues().then(X=>{qe(X,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:se,_disableForm:Xe,_subjects:w,_proxyFormState:x,get _fields(){return n},get _formValues(){return i},get _state(){return c},set _state(X){c=X},get _defaultValues(){return a},get _names(){return u},set _names(X){u=X},get _formState(){return t},get _options(){return e},set _options(X){e={...e,...X}}},subscribe:oe,trigger:K,register:me,handleSubmit:Qe,watch:Q,setValue:Y,getValues:he,reset:qe,resetField:dt,clearErrors:F,unregister:Pe,setError:W,setFocus:ue,getFieldState:Oe};return{...rt,formControl:rt}}function mo(r={}){const e=Ft.useRef(void 0),t=Ft.useRef(void 0),[n,a]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:wi(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:wi(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...r.formControl?r.formControl:Mp(r),formState:n},r.formControl&&r.defaultValues&&!wi(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions));const i=e.current.control;return i._options=r,Np(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),Ft.useEffect(()=>i._disableForm(r.disabled),[i,r.disabled]),Ft.useEffect(()=>{r.mode&&(i._options.mode=r.mode),r.reValidateMode&&(i._options.reValidateMode=r.reValidateMode)},[i,r.mode,r.reValidateMode]),Ft.useEffect(()=>{r.errors&&(i._setErrors(r.errors),i._focusError())},[i,r.errors]),Ft.useEffect(()=>{r.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,r.shouldUnregister]),Ft.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==n.isDirty&&i._subjects.state.next({isDirty:c})}},[i,n.isDirty]),Ft.useEffect(()=>{r.values&&!qa(r.values,t.current)?(i._reset(r.values,i._options.resetOptions),t.current=r.values,a(c=>({...c}))):i._resetDefaultValues()},[i,r.values]),Ft.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=wp(n,i),e.current}function Ua(r){let e=0;const n=r+"pos-system-salt-2024";for(let a=0;a<n.length;a++){const i=n.charCodeAt(a);e=(e<<5)-e+i,e=e&e}return"hash_"+Math.abs(e).toString(36)}function Rp(r,e){return Ua(r)===e}function qp(r=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<r;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Bp(r){const e=[];return r.length<6&&e.push("Password must be at least 6 characters long"),/[A-Z]/.test(r)||e.push("Password must contain at least one uppercase letter"),/[a-z]/.test(r)||e.push("Password must contain at least one lowercase letter"),/\d/.test(r)||e.push("Password must contain at least one number"),{isValid:e.length===0,errors:e}}const Up=()=>{const{login:r,setLoading:e,setError:t,loading:n,error:a}=Gn(),[i,c]=Ft.useState(!1),{register:u,handleSubmit:h,formState:{errors:y}}=mo(),x=async b=>{e(!0),t(null);try{await new Promise(m=>setTimeout(m,1e3));const w=await Ni.getByUsername(b.username);if(w&&w.isActive&&Rp(b.password,w.password)){await Ni.update(w.id,{lastLogin:new Date});const m="jwt-token-"+w.id+"-"+Date.now();r(w,m)}else t("Invalid username or password, or account is inactive")}catch(w){console.error("Login error:",w),t("Login failed. Please try again.")}finally{e(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{children:[l.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:l.jsx(Bh,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to POS System"}),l.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your credentials to access the system"})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h(x),children:[a&&l.jsx("div",{className:"rounded-md bg-red-50 p-4",children:l.jsx("div",{className:"text-sm text-red-700",children:a})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),l.jsx("input",{...u("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),type:"text",className:"input mt-1",placeholder:"Enter your username"}),y.username&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.username.message})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("input",{...u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:i?"text":"password",className:"input pr-10",placeholder:"Enter your password"}),l.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!i),children:i?l.jsx(Vl,{className:"h-5 w-5 text-gray-400"}):l.jsx($l,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password.message})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Demo Accounts"})})]}),l.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2",children:l.jsxs("div",{className:"text-center text-xs text-gray-500",children:[l.jsx("div",{className:"font-medium",children:"Admin: admin / password"}),l.jsx("div",{className:"font-medium",children:"Manager: manager / password"}),l.jsx("div",{className:"font-medium",children:"Cashier: cashier / password"})]})})]})]})]})})},Zt=r=>`${(Number(r)||0).toFixed(2)}`,zp=()=>{var C,z,G,ee;const{transactions:r,products:e,cart:t}=Gn(),[n,a]=Ft.useState(null),[i,c]=Ft.useState(!1),u=new Date,h=new Date(u.getFullYear(),u.getMonth(),u.getDate()),y=(r==null?void 0:r.filter(T=>T.createdAt>=h&&T.type==="sale"&&T.status==="completed"))||[],x=y.reduce((T,U)=>T+U.total,0),b=y.length,w=(e==null?void 0:e.filter(T=>T.quantity<=T.minStockLevel))||[],m=(e==null?void 0:e.reduce((T,U)=>T+U.cost*U.quantity,0))||0,_=(r==null?void 0:r.filter(T=>T.type==="sale"&&T.status==="completed").reduce((T,U)=>T+U.total,0))||0,L=((C=r==null?void 0:r.filter(T=>T.type==="sale"))==null?void 0:C.slice(0,5))||[],O=T=>{a(T),c(!0)},P=()=>{a(null),c(!1)},j=[{title:"Today's Sales",value:Zt(x),icon:$u,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:b.toString(),icon:fs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Sales",value:Zt(_),icon:Rs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Total Inventory Cost",value:Zt(m),icon:Gu,color:"text-orange-600",bgColor:"bg-orange-100"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-gray-500",children:"Welcome back! Here's what's happening today."})]}),l.jsx("div",{className:"text-sm text-gray-500",children:jr(new Date,"EEEE, MMMM do, yyyy")})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(T=>{const U=T.icon;return l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`p-2 rounded-lg ${T.bgColor}`,children:l.jsx(U,{className:`h-6 w-6 ${T.color}`})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:T.title}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.value})]})]})},T.title)})}),l.jsxs("div",{className:"card",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(os,{to:"/sales",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[l.jsx(fs,{className:"h-8 w-8 text-blue-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:"New Sale"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Process a new transaction"})]}),l.jsx(Cl,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),l.jsxs(os,{to:"/inventory",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[l.jsx(ho,{className:"h-8 w-8 text-purple-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:"Manage Inventory"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Add or update products"})]}),l.jsx(Cl,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),l.jsxs(os,{to:"/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[l.jsx(Yu,{className:"h-8 w-8 text-green-600 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Analyze sales data"})]}),l.jsx(Cl,{className:"h-5 w-5 text-gray-400 ml-auto"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"}),l.jsx(os,{to:"/reports",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"View all"})]}),L.length>0?l.jsx("div",{className:"space-y-3",children:L.map(T=>l.jsxs("div",{onClick:()=>O(T),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium text-gray-900",children:["#",T.transactionNumber]}),l.jsx("p",{className:"text-sm text-gray-500",children:jr(T.createdAt,"MMM dd, hh:mm a")})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"font-medium text-gray-900",children:Zt(T.total)}),l.jsx("p",{className:`text-xs ${T.status==="completed"?"text-green-600":"text-yellow-600"}`,children:T.status})]})]},T.id))}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(fs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),l.jsx(os,{to:"/inventory",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Manage"})]}),w.length>0?l.jsxs("div",{className:"space-y-3",children:[w.slice(0,5).map(T=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vo,{className:"h-5 w-5 text-red-500 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:T.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",T.sku]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-medium text-red-600",children:[T.quantity," left"]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",T.minStockLevel]})]})]},T.id)),w.length>5&&l.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["+",w.length-5," more items need attention"]})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ho,{className:"h-12 w-12 text-green-300 mx-auto mb-4"}),l.jsx("p",{className:"text-green-600 font-medium",children:"All products well stocked!"})]})]})]}),((z=t==null?void 0:t.items)==null?void 0:z.length)>0&&l.jsx("div",{className:"card bg-blue-50 border-blue-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Active Cart"}),l.jsxs("p",{className:"text-blue-700",children:[t.items.length," items  Total: ",Zt(t.total)]})]}),l.jsx(os,{to:"/sales",className:"btn btn-primary",children:"Continue Sale"})]})}),i&&n&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Rs,{className:"h-6 w-6 text-blue-600 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),l.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zs,{className:"h-6 w-6"})})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Rs,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),l.jsxs("p",{className:"font-medium",children:["#",n.transactionNumber]})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ju,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),l.jsx("p",{className:"font-medium",children:jr(n.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(fc,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),l.jsxs("p",{className:"font-medium",children:[(G=n.cashier)==null?void 0:G.firstName," ",(ee=n.cashier)==null?void 0:ee.lastName]})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Qu,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),l.jsx("p",{className:"font-medium capitalize",children:n.paymentMethod})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),l.jsx("div",{className:"space-y-2",children:n.items.map(T=>{var U;return l.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-900",children:((U=T.product)==null?void 0:U.name)||"Unknown Product"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Zt(T.unitPrice),"  ",T.quantity]})]}),l.jsx("div",{className:"text-right",children:l.jsx("p",{className:"font-medium text-gray-900",children:Zt(T.totalPrice)})})]},T.id)})})]}),l.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),l.jsx("span",{children:Zt(n.subtotal)})]}),n.discount>0&&l.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[l.jsx("span",{children:"Discount:"}),l.jsxs("span",{children:["-",Zt(n.discount)]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-2",children:l.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:Zt(n.total)})]})}),n.paymentMethod==="cash"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[l.jsx("span",{children:"Cash Received:"}),l.jsx("span",{children:Zt(n.paymentAmount)})]}),n.changeAmount>0&&l.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[l.jsx("span",{children:"Change Given:"}),l.jsx("span",{children:Zt(n.changeAmount)})]})]})]})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[l.jsx("div",{children:l.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${n.status==="completed"?"bg-green-100 text-green-800":n.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.items.length," item",n.items.length!==1?"s":""]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:P,className:"btn btn-outline",children:"Close"})})})]})})]})},Nd=({isOpen:r,onClose:e,onScan:t})=>{const[n,a]=Ft.useState(""),[i,c]=Ft.useState(!1);Ft.useEffect(()=>{r||(a(""),c(!1))},[r]),Ft.useEffect(()=>{let h;const y=x=>{!r||!i||(h&&clearTimeout(h),x.key==="Enter"?n.length>=3&&(t(n),a(""),c(!1)):x.key.length===1&&/[A-Za-z0-9\-_]/.test(x.key)&&(a(b=>b+x.key),h=setTimeout(()=>{n.length>=2&&(t(n+x.key),a(""),c(!1))},500)))};return i&&document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y),h&&clearTimeout(h)}},[r,i,n,t]);const u=()=>{n.length>=3&&(t(n),a(""))};return r?l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scan Barcode"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zs,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx($o,{className:"h-16 w-16 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 mb-2",children:i?"Scanning... Point scanner at barcode":"Ready to scan"}),l.jsxs("div",{className:"bg-gray-100 border rounded-lg p-3 mb-4",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Scanned Code:"}),l.jsx("p",{className:"font-mono text-lg font-semibold",children:n||"No code scanned yet"})]})]}),l.jsxs("div",{className:"space-y-3",children:[i?l.jsx("button",{onClick:()=>c(!1),className:"btn btn-outline w-full",children:"Stop Scanning"}):l.jsxs("button",{onClick:()=>c(!0),className:"btn btn-primary w-full",children:[l.jsx($o,{className:"h-4 w-4 mr-2"}),"Start Scanning"]}),n&&l.jsx("button",{onClick:u,className:"btn btn-success w-full",disabled:n.length<3,children:"Use This Code"})]}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsx("p",{children:" Point barcode scanner at any SKU/barcode"}),l.jsx("p",{children:" Code will be automatically detected"}),l.jsx("p",{children:" Manual entry: type alphanumeric characters and press Enter"})]})]})]})}):null},Hp=()=>{var fe,Y,J,ne;console.log("Sales component rendering...");const{products:r,categories:e,cart:t,addToCart:n,removeFromCart:a,updateCartItem:i,clearCart:c,addTransaction:u,auth:h,settings:y}=Gn();console.log("Sales - Store data:",{productsCount:(r==null?void 0:r.length)||0,categoriesCount:(e==null?void 0:e.length)||0,cartItems:((fe=t==null?void 0:t.items)==null?void 0:fe.length)||0,authUser:((Y=h==null?void 0:h.user)==null?void 0:Y.username)||"none"});const[x,b]=Ft.useState(""),[w,m]=Ft.useState(""),[_,L]=Ft.useState(0),[O,P]=Ft.useState(!1),[j,C]=Ft.useState(!1),[z,G]=Ft.useState(!1),[ee,T]=Ft.useState(null);if(!r||!e||!t)return console.log("Sales - Missing required data:",{products:!!r,categories:!!e,cart:!!t}),l.jsxs("div",{className:"p-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sales Page - Debug Mode"}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h2",{className:"font-medium text-yellow-800 mb-2",children:"Loading Debug Info:"}),l.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[l.jsxs("li",{children:["Products: ",r?`${r.length} items`:"Not loaded"]}),l.jsxs("li",{children:["Categories: ",e?`${e.length} items`:"Not loaded"]}),l.jsxs("li",{children:["Cart: ",t?"Initialized":"Not initialized"]}),l.jsxs("li",{children:["Auth: ",h!=null&&h.user?`${h.user.username} (${h.user.role})`:"Not authenticated"]})]}),l.jsx("p",{className:"mt-2 text-xs",children:"If this persists, check the browser console for errors."})]})]});const U=r.filter(K=>{if(!K||!K.name)return console.warn("Sales - Problematic product found:",K),!1;const he=(K==null?void 0:K.name)||"",Oe=(K==null?void 0:K.sku)||"",F=x.toLowerCase(),W=he.toLowerCase().includes(F)||Oe.toLowerCase().includes(F),Q=!w||(K==null?void 0:K.categoryId)===w;return W&&Q&&(K==null?void 0:K.isActive)&&((K==null?void 0:K.quantity)||0)>0});console.log("Sales - Filtered products:",U.length);const te=K=>{K.quantity>0&&n(K,1)},se=K=>{const he=r.find(Oe=>{var F;return Oe.sku.toLowerCase()===K.toLowerCase()||((F=Oe.barcode)==null?void 0:F.toLowerCase())===K.toLowerCase()});he?he.isActive&&he.quantity>0?(te(he),console.log(`Added ${he.name} to cart via barcode scan`)):alert(`Product "${he.name}" is not available for sale.`):alert(`Product with SKU "${K}" not found in inventory.`),G(!1)},D=(K,he)=>{he<=0?a(K):i(K,he)},A=()=>{var F;if(t.items.length===0)return;const K=Math.max(0,_-t.total),he=t.items.map((W,Q)=>({id:(Date.now()+Q).toString(),productId:W.product.id,product:W.product,quantity:W.quantity,unitPrice:W.unitPrice,totalPrice:W.totalPrice,discount:W.discount||0})),Oe={id:Date.now().toString(),transactionNumber:`TXN${Date.now()}`,type:"sale",status:"completed",items:he,subtotal:t.subtotal,tax:t.tax,discount:t.discount,total:t.total,paymentMethod:"cash",paymentAmount:_,changeAmount:K,cashierId:((F=h.user)==null?void 0:F.id)||"",cashier:h.user||void 0,createdAt:new Date,updatedAt:new Date};u(Oe),T(Oe),c(),P(!1),C(!0),L(0)},M=()=>{L(t.total),P(!0)},V=()=>{window.print()};return l.jsxs("div",{className:"h-full flex",children:[l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by name or SKU...",value:x,onChange:K=>b(K.target.value),className:"input pl-10"})]}),l.jsxs("button",{onClick:()=>G(!0),className:"btn btn-primary flex items-center",title:"Scan Barcode",children:[l.jsx($o,{className:"h-4 w-4 mr-2"}),"Scan"]}),l.jsxs("select",{value:w,onChange:K=>m(K.target.value),className:"input w-48",children:[l.jsx("option",{value:"",children:"All Categories"}),e.map(K=>l.jsx("option",{value:K.id,children:K.name},K.id))]})]})}),l.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:U.map(K=>l.jsx("div",{onClick:()=>te(K),className:"card p-4 cursor-pointer hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg mx-auto mb-3 flex items-center justify-center overflow-hidden",children:K.imageUrl?l.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"text-2xl",children:""})}),l.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-1 truncate",children:K.name}),l.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",K.sku]}),l.jsx("p",{className:"text-lg font-bold text-gray-900",children:Zt(K.price)}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",K.quantity]})]})},K.id))})})]}),l.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Current Sale"}),l.jsxs("div",{className:"flex items-center text-gray-500",children:[l.jsx(fs,{className:"h-5 w-5 mr-1"}),l.jsx("span",{children:t.items.length})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.items.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(fs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"Cart is empty"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Add products to start a sale"})]}):l.jsx("div",{className:"space-y-3",children:t.items.map(K=>l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:K.product.name}),l.jsx("button",{onClick:()=>a(K.product.id),className:"text-red-500 hover:text-red-700",children:l.jsx(Go,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>D(K.product.id,K.quantity-1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:l.jsx(Uh,{className:"h-3 w-3"})}),l.jsx("span",{className:"text-sm font-medium",children:K.quantity}),l.jsx("button",{onClick:()=>D(K.product.id,K.quantity+1),className:"w-6 h-6 rounded bg-gray-200 flex items-center justify-center hover:bg-gray-300",disabled:K.quantity>=K.product.quantity,children:l.jsx(pc,{className:"h-3 w-3"})})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:[Zt(K.unitPrice)," each"]}),l.jsx("p",{className:"font-medium text-gray-900",children:Zt(K.totalPrice)})]})]})]},K.product.id))})}),t.items.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{children:Zt(t.subtotal)})]}),t.discount>0&&l.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[l.jsx("span",{children:"Discount:"}),l.jsxs("span",{children:["-",Zt(t.discount)]})]}),l.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:Zt(t.total)})]})]}),l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsx("button",{onClick:M,className:"btn btn-primary w-full",children:"Process Payment"}),l.jsx("button",{onClick:()=>c(),className:"btn btn-outline w-full",children:"Clear Cart"})]})]})]}),O&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cash Payment"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:l.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[l.jsx("span",{children:"Total Amount:"}),l.jsx("span",{children:Zt(t.total)})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cash Received"}),l.jsx("input",{type:"number",value:_,onChange:K=>L(Number(K.target.value)),className:"input w-full text-lg",min:t.total,step:"0.01",placeholder:"Enter amount received",autoFocus:!0}),_>t.total&&l.jsx("div",{className:"mt-2 p-3 bg-green-50 rounded-lg",children:l.jsxs("span",{className:"text-lg font-bold text-green-800",children:["Change: ",Zt(_-t.total)]})}),_>0&&_<t.total&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg",children:l.jsxs("span",{className:"text-sm text-red-800",children:["Insufficient amount. Need ",Zt(t.total-_)," more."]})})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>P(!1),className:"flex-1 btn btn-outline",children:"Cancel"}),l.jsx("button",{onClick:A,disabled:_<t.total,className:"flex-1 btn btn-primary",children:"Complete Sale"})]})]})]})}),j&&ee&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:l.jsx(zh,{className:"h-6 w-6 text-green-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sale Completed!"})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4 font-mono text-sm",children:[l.jsxs("div",{className:"text-center mb-2",children:[l.jsx("h4",{className:"font-bold",children:y.storeName}),l.jsx("p",{className:"text-xs",children:"Receipt"})]}),l.jsxs("div",{className:"border-t border-gray-200 pt-2 mb-2",children:[l.jsxs("p",{children:["Transaction: #",ee.transactionNumber]}),l.jsxs("p",{children:["Date: ",jr(ee.createdAt,"MMM dd, yyyy hh:mm a")]}),l.jsxs("p",{children:["Cashier: ",(J=ee.cashier)==null?void 0:J.firstName," ",(ne=ee.cashier)==null?void 0:ne.lastName]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-2 mb-2",children:ee.items.map(K=>{var he;return l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsxs("span",{children:[(he=K.product)==null?void 0:he.name," x",K.quantity]}),l.jsx("span",{children:Zt(K.totalPrice)})]},K.id)})}),l.jsxs("div",{className:"border-t border-gray-200 pt-2 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{children:Zt(ee.subtotal)})]}),l.jsxs("div",{className:"flex justify-between font-bold",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:Zt(ee.total)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Payment (cash):"}),l.jsx("span",{children:Zt(ee.paymentAmount)})]}),ee.changeAmount>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Change:"}),l.jsx("span",{children:Zt(ee.changeAmount)})]})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:V,className:"flex-1 btn btn-outline",children:[l.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Print"]}),l.jsx("button",{onClick:()=>C(!1),className:"flex-1 btn btn-primary",children:"Done"})]})]})}),l.jsx(Nd,{isOpen:z,onClose:()=>G(!1),onScan:se})]})},Wp=()=>{var An,cr,Rt;const{products:r,categories:e,addProduct:t,updateProduct:n,deleteProduct:a,addCategory:i,updateCategory:c,deleteCategory:u,auth:h}=Gn(),[y,x]=Ft.useState(""),[b,w]=Ft.useState(""),[m,_]=Ft.useState(!1),[L,O]=Ft.useState(!1),[P,j]=Ft.useState(!1),[C,z]=Ft.useState(null),[G,ee]=Ft.useState(null),[T,U]=Ft.useState("name"),[te,se]=Ft.useState("asc"),[D,A]=Ft.useState(!1),[M,V]=Ft.useState([]),[fe,Y]=Ft.useState("all"),[J,ne]=Ft.useState("all"),[K,he]=Ft.useState(!1),[Oe,F]=Ft.useState(null),[W,Q]=Ft.useState(null),{register:ie,handleSubmit:oe,reset:Pe,setValue:De,watch:me,formState:{errors:$e,isSubmitting:Xe}}=mo(),{register:Qe,handleSubmit:dt,reset:Ct,formState:{errors:qe,isSubmitting:ue}}=mo(),Mt=me("sku"),ht=(Ce,bt)=>{F({type:Ce,message:bt}),setTimeout(()=>F(null),3e3)},rt=Ce=>{var er;const bt=(er=Ce.target.files)==null?void 0:er[0];if(!bt)return;if(bt.size>5*1024*1024){ht("error","Image size must be less than 5MB");return}if(!bt.type.startsWith("image/")){ht("error","Please select a valid image file");return}const Ot=new FileReader;Ot.onload=sr=>{var ar;const At=(ar=sr.target)==null?void 0:ar.result;Q(At),De("imageUrl",At)},Ot.readAsDataURL(bt)},X=()=>{Q(null),De("imageUrl","")},de=r.filter(Ce=>{var At;const bt=Ce.name.toLowerCase().includes(y.toLowerCase())||Ce.sku.toLowerCase().includes(y.toLowerCase())||((At=Ce.description)==null?void 0:At.toLowerCase().includes(y.toLowerCase())),Ot=!b||Ce.categoryId===b;let er=!0;fe==="low"?er=Ce.quantity<=Ce.minStockLevel&&Ce.quantity>0:fe==="out"&&(er=Ce.quantity===0);let sr=!0;return J==="active"?sr=Ce.isActive:J==="inactive"&&(sr=!Ce.isActive),bt&&Ot&&er&&sr}).sort((Ce,bt)=>{var er,sr;let Ot=0;switch(T){case"name":Ot=Ce.name.localeCompare(bt.name);break;case"price":Ot=Ce.price-bt.price;break;case"quantity":Ot=Ce.quantity-bt.quantity;break;case"category":const At=((er=e.find($t=>$t.id===Ce.categoryId))==null?void 0:er.name)||"",ar=((sr=e.find($t=>$t.id===bt.categoryId))==null?void 0:sr.name)||"";Ot=At.localeCompare(ar);break}return te==="asc"?Ot:-Ot}),xe=r.filter(Ce=>Ce.quantity<=Ce.minStockLevel&&Ce.quantity>0),Be=r.filter(Ce=>Ce.quantity===0),Ke=Ce=>{T===Ce?se(te==="asc"?"desc":"asc"):(U(Ce),se("asc"))},ze=Ce=>{const bt=Ce.trim();return bt.length>=3&&bt.length<=50&&/^[A-Za-z0-9\-_]+$/.test(bt)},et=(Ce,bt)=>r.some(Ot=>Ot.sku.toLowerCase()===Ce.toLowerCase()&&Ot.id!==bt),gt=Ce=>{var bt;Ce?(z(Ce),Q(Ce.imageUrl||null),Pe({name:Ce.name,description:Ce.description||"",sku:Ce.sku,barcode:Ce.barcode||"",price:Ce.price,cost:Ce.cost,quantity:Ce.quantity,minStockLevel:Ce.minStockLevel,categoryId:Ce.categoryId,isActive:Ce.isActive,imageUrl:Ce.imageUrl||""})):(z(null),Q(null),Pe({name:"",description:"",sku:"",barcode:"",price:0,cost:0,quantity:0,minStockLevel:5,categoryId:((bt=e[0])==null?void 0:bt.id)||"",isActive:!0,imageUrl:""})),_(!0)},_t=()=>{_(!1),z(null),Q(null),Pe()},Nt=async Ce=>{try{if(he(!0),!ze(Ce.sku)){ht("error","Invalid SKU format. Must be 3-50 alphanumeric characters (letters, numbers, hyphens, underscores).");return}if(et(Ce.sku,C==null?void 0:C.id)){ht("error","SKU already exists. Please use a different SKU.");return}const bt={...Ce,sku:Ce.sku.trim().toUpperCase(),barcode:Ce.barcode||Ce.sku.trim().toUpperCase()};if(C)n(C.id,{...bt,updatedAt:new Date}),ht("success","Product updated successfully!");else{const Ot={...bt,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};t(Ot),ht("success","Product added successfully!")}_t()}catch(bt){console.error("Error saving product:",bt),ht("error","Failed to save product. Please try again.")}finally{he(!1)}},Bt=async Ce=>{if(window.confirm(`Are you sure you want to delete "${Ce.name}"? This action cannot be undone.`))try{a(Ce.id),ht("success","Product deleted successfully!")}catch(bt){console.error("Error deleting product:",bt),ht("error","Failed to delete product. Please try again.")}},lt=Ce=>{if(M.length===0)return;const bt=Ce==="delete"?`Are you sure you want to delete ${M.length} selected products?`:`Are you sure you want to ${Ce} ${M.length} selected products?`;window.confirm(bt)&&(M.forEach(Ot=>{Ce==="delete"?a(Ot):n(Ot,{isActive:Ce==="activate",updatedAt:new Date})}),V([]),ht("success",`Bulk ${Ce} completed successfully!`))},hr=Ce=>{const bt=Ce.trim().toUpperCase(),Ot=r.find(er=>er.sku.toUpperCase()===bt||er.barcode===Ce);Ot?(gt(Ot),ht("success",`Found product: ${Ot.name}`)):(gt(),De("sku",bt),De("barcode",bt),ht("success","New product form opened with scanned SKU")),j(!1)},Wt=Ce=>{V(bt=>bt.includes(Ce)?bt.filter(Ot=>Ot!==Ce):[...bt,Ce])},Tr=()=>{M.length===de.length?V([]):V(de.map(Ce=>Ce.id))},Gt=()=>{const Ce=["Name","SKU","Category","Price","Cost","Quantity","Min Stock","Status"],bt=de.map(ar=>{var tr;const $t=((tr=e.find(_r=>_r.id===ar.categoryId))==null?void 0:tr.name)||"N/A";return[ar.name,ar.sku,$t,ar.price.toFixed(2),ar.cost.toFixed(2),ar.quantity,ar.minStockLevel,ar.isActive?"Active":"Inactive"]}),Ot=[Ce,...bt].map(ar=>ar.join(",")).join(`
`),er=new Blob([Ot],{type:"text/csv"}),sr=window.URL.createObjectURL(er),At=document.createElement("a");At.href=sr,At.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,At.click(),window.URL.revokeObjectURL(sr),ht("success","Inventory exported to CSV successfully!")},ct=Ce=>{Ce?(ee(Ce),Ct({name:Ce.name,description:Ce.description||""})):(ee(null),Ct({name:"",description:""})),O(!0)},Cr=()=>{O(!1),ee(null),Ct()},Kt=async Ce=>{try{if(G)c(G.id,{...Ce,updatedAt:new Date}),ht("success","Category updated successfully!");else{const bt={...Ce,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};i(bt),ht("success","Category added successfully!")}Cr()}catch(bt){console.error("Error saving category:",bt),ht("error","Failed to save category. Please try again.")}},Ln=async Ce=>{try{const bt=r.filter(Ot=>Ot.categoryId===Ce.id).length;if(bt>0){if(!window.confirm(`This category contains ${bt} products. Are you sure you want to delete it? You'll need to reassign those products to other categories first.`))return;ht("error",`Cannot delete category. ${bt} products are using this category. Please reassign them first.`);return}window.confirm(`Are you sure you want to delete the category "${Ce.name}"? This action cannot be undone.`)&&(u(Ce.id),ht("success","Category deleted successfully!"))}catch(bt){console.error("Error deleting category:",bt),ht("error",bt.message||"Failed to delete category. Please try again.")}},nt=((An=h.user)==null?void 0:An.role)==="admin"||((cr=h.user)==null?void 0:cr.role)==="manager",tn=((Rt=h.user)==null?void 0:Rt.role)==="admin";return l.jsxs("div",{className:"space-y-6",children:[Oe&&l.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${Oe.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:l.jsxs("div",{className:"flex items-center",children:[Oe.type==="success"?l.jsx(Hh,{className:"h-5 w-5 mr-2"}):l.jsx(Wh,{className:"h-5 w-5 mr-2"}),Oe.message]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Management"}),l.jsx("p",{className:"text-gray-500",children:"Manage your products and stock levels"}),l.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[l.jsxs("span",{children:["Total: ",r.length]}),l.jsxs("span",{children:["Active: ",r.filter(Ce=>Ce.isActive).length]}),l.jsxs("span",{children:["Low Stock: ",xe.length]}),l.jsxs("span",{children:["Out of Stock: ",Be.length]})]})]}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:nt&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>ct(),className:"btn btn-outline",children:[l.jsx(Kh,{className:"h-4 w-4 mr-2"}),"Manage Categories"]}),l.jsxs("button",{onClick:Gt,className:"btn btn-outline",children:[l.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Export"]}),l.jsxs("button",{onClick:()=>gt(),className:"btn btn-primary",children:[l.jsx(pc,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[xe.length>0&&l.jsx("div",{className:"card bg-orange-50 border-orange-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vo,{className:"h-5 w-5 text-orange-500 mr-2"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-orange-800 font-medium",children:"Low Stock Alert"}),l.jsxs("p",{className:"text-orange-700 text-sm",children:[xe.length," product(s) are running low on stock"]})]})]})}),Be.length>0&&l.jsx("div",{className:"card bg-red-50 border-red-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Vh,{className:"h-5 w-5 text-red-500 mr-2"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-red-800 font-medium",children:"Out of Stock"}),l.jsxs("p",{className:"text-red-700 text-sm",children:[Be.length," product(s) are out of stock"]})]})]})})]}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by name, SKU, or description...",value:y,onChange:Ce=>x(Ce.target.value),className:"input pl-10"})]}),l.jsxs("div",{className:"flex gap-2",children:[nt&&l.jsxs("button",{onClick:()=>j(!0),className:"btn btn-outline flex items-center",title:"Scan SKU",children:[l.jsx($o,{className:"h-4 w-4 mr-2"}),"Scan SKU"]}),l.jsxs("button",{onClick:()=>A(!D),className:"btn btn-outline flex items-center",children:[l.jsx($h,{className:"h-4 w-4 mr-2"}),"Filters"]})]})]}),D&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[l.jsxs("select",{value:b,onChange:Ce=>w(Ce.target.value),className:"input",children:[l.jsx("option",{value:"",children:"All Categories"}),e.map(Ce=>l.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),l.jsxs("select",{value:fe,onChange:Ce=>Y(Ce.target.value),className:"input",children:[l.jsx("option",{value:"all",children:"All Stock Levels"}),l.jsx("option",{value:"low",children:"Low Stock"}),l.jsx("option",{value:"out",children:"Out of Stock"})]}),l.jsxs("select",{value:J,onChange:Ce=>ne(Ce.target.value),className:"input",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"})]}),l.jsxs("button",{onClick:()=>{w(""),Y("all"),ne("all"),x("")},className:"btn btn-outline",children:[l.jsx(qs,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})}),M.length>0&&nt&&l.jsx("div",{className:"card bg-blue-50 border-blue-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-blue-900 font-medium",children:[M.length," product(s) selected"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>lt("activate"),className:"btn btn-outline btn-sm",children:"Activate"}),l.jsx("button",{onClick:()=>lt("deactivate"),className:"btn btn-outline btn-sm",children:"Deactivate"}),tn&&l.jsx("button",{onClick:()=>lt("delete"),className:"btn btn-outline btn-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})}),l.jsx("div",{className:"card overflow-hidden",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[nt&&l.jsx("th",{className:"w-12",children:l.jsx("input",{type:"checkbox",checked:M.length===de.length&&de.length>0,onChange:Tr,className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),l.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Ke("name"),children:l.jsxs("div",{className:"flex items-center",children:["Product",T==="name"&&l.jsx("span",{className:"ml-1",children:te==="asc"?"":""})]})}),l.jsx("th",{children:"SKU"}),l.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Ke("category"),children:l.jsxs("div",{className:"flex items-center",children:["Category",T==="category"&&l.jsx("span",{className:"ml-1",children:te==="asc"?"":""})]})}),l.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Ke("price"),children:l.jsxs("div",{className:"flex items-center",children:["Price",T==="price"&&l.jsx("span",{className:"ml-1",children:te==="asc"?"":""})]})}),l.jsx("th",{children:"Cost"}),l.jsx("th",{className:"cursor-pointer hover:bg-gray-100",onClick:()=>Ke("quantity"),children:l.jsxs("div",{className:"flex items-center",children:["Stock",T==="quantity"&&l.jsx("span",{className:"ml-1",children:te==="asc"?"":""})]})}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:de.map(Ce=>{const bt=e.find(sr=>sr.id===Ce.categoryId),Ot=Ce.quantity<=Ce.minStockLevel&&Ce.quantity>0,er=Ce.quantity===0;return l.jsxs("tr",{className:`
                    ${er?"bg-red-50":Ot?"bg-orange-50":""}
                    ${M.includes(Ce.id)?"bg-blue-50":""}
                  `,children:[nt&&l.jsx("td",{children:l.jsx("input",{type:"checkbox",checked:M.includes(Ce.id),onChange:()=>Wt(Ce.id),className:"h-4 w-4 text-blue-600 rounded border-gray-300"})}),l.jsx("td",{children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3 overflow-hidden",children:Ce.imageUrl?l.jsx("img",{src:Ce.imageUrl,alt:Ce.name,className:"w-full h-full object-cover"}):l.jsx(ho,{className:"h-5 w-5 text-gray-400"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:Ce.name}),Ce.description&&l.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:Ce.description})]})]})}),l.jsx("td",{children:l.jsx("span",{className:"text-sm font-mono",children:Ce.sku})}),l.jsx("td",{children:l.jsx("span",{className:"text-sm",children:(bt==null?void 0:bt.name)||"N/A"})}),l.jsx("td",{children:l.jsx("span",{className:"font-medium",children:Zt(Ce.price)})}),l.jsx("td",{children:l.jsx("span",{className:"text-sm text-gray-500",children:Zt(Ce.cost)})}),l.jsxs("td",{children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:`font-medium ${er?"text-red-600":Ot?"text-orange-600":"text-gray-900"}`,children:Ce.quantity}),(Ot||er)&&l.jsx(Vo,{className:`h-4 w-4 ml-1 ${er?"text-red-500":"text-orange-500"}`})]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",Ce.minStockLevel]})]}),l.jsx("td",{children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Ce.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Ce.isActive?"Active":"Inactive"})}),l.jsx("td",{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>gt(Ce),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Product",children:l.jsx(Gl,{className:"h-4 w-4"})}),tn&&l.jsx("button",{onClick:()=>Bt(Ce),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Product",children:l.jsx(Go,{className:"h-4 w-4"})})]})})]},Ce.id)})})]}),de.length===0&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ho,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No products found"}),(y||b||fe!=="all"||J!=="all")&&l.jsx("button",{onClick:()=>{x(""),w(""),Y("all"),ne("all")},className:"mt-2 text-blue-600 hover:text-blue-500 text-sm",children:"Clear filters"})]})]})}),L&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-full overflow-y-auto",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Management"}),l.jsx("button",{onClick:Cr,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zs,{className:"h-6 w-6"})})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[l.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:G?"Edit Category":"Add New Category"}),l.jsxs("form",{onSubmit:dt(Kt),className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),l.jsx("input",{...Qe("name",{required:"Category name is required",minLength:{value:2,message:"Category name must be at least 2 characters"}}),className:"input",placeholder:"Enter category name"}),qe.name&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:qe.name.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("input",{...Qe("description"),className:"input",placeholder:"Enter category description (optional)"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[G&&l.jsx("button",{type:"button",onClick:()=>{ee(null),Ct({name:"",description:""})},className:"btn btn-outline",children:"Cancel Edit"}),l.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:ue,children:[ue?l.jsx(qs,{className:"h-4 w-4 mr-2 animate-spin"}):null,G?"Update Category":"Add Category"]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Existing Categories"}),e.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Gh,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No categories found"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Add your first category above"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(Ce=>{const bt=r.filter(Ot=>Ot.categoryId===Ce.id).length;return l.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-medium text-gray-900",children:Ce.name}),Ce.description&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Ce.description}),l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[bt," product",bt!==1?"s":""]})]}),l.jsxs("div",{className:"flex space-x-1 ml-2",children:[l.jsx("button",{onClick:()=>ct(Ce),className:"p-1 text-blue-600 hover:text-blue-800",title:"Edit Category",children:l.jsx(Gl,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>Ln(Ce),className:"p-1 text-red-600 hover:text-red-800",title:"Delete Category",disabled:bt>0,children:l.jsx(Go,{className:"h-4 w-4"})})]})]})},Ce.id)})})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Cr,className:"btn btn-outline",children:"Close"})})})]})}),m&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-full overflow-y-auto",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:C?"Edit Product":"Add New Product"}),l.jsxs("form",{onSubmit:oe(Nt),className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 hover:bg-gray-100 transition-colors duration-200 group",children:W?l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("img",{src:W,alt:"Product preview",className:"w-full h-full object-cover rounded-lg"}),l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center",children:[l.jsx("button",{type:"button",onClick:X,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200 shadow-lg",children:l.jsx(zs,{className:"h-4 w-4"})}),l.jsxs("label",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:[l.jsxs("div",{className:"bg-white bg-opacity-90 rounded-lg px-3 py-2 flex items-center space-x-2 text-gray-700 hover:bg-opacity-100 transition-all duration-200",children:[l.jsx(Jo,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Change Image"})]}),l.jsx("input",{type:"file",accept:"image/*",onChange:rt,className:"hidden"})]})]})]}):l.jsxs("label",{className:"cursor-pointer w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-gray-600 transition-colors duration-200",children:[l.jsx(Yh,{className:"h-12 w-12 mb-3"}),l.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload image"}),l.jsx("p",{className:"text-xs text-gray-400",children:"or drag and drop"}),l.jsx("input",{type:"file",accept:"image/*",onChange:rt,className:"hidden"})]})})}),!W&&l.jsxs("label",{className:"btn btn-outline w-full cursor-pointer flex items-center justify-center",children:[l.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Upload Image",l.jsx("input",{type:"file",accept:"image/*",onChange:rt,className:"hidden"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: JPG, PNG, GIF"}),l.jsx("p",{className:"text-xs text-gray-400",children:"Maximum file size: 5MB"})]}),l.jsx("input",{...ie("imageUrl"),type:"hidden"})]})]}),l.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),l.jsx("input",{...ie("name",{required:"Product name is required",minLength:{value:2,message:"Product name must be at least 2 characters"}}),className:"input",placeholder:"Enter product name"}),$e.name&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.name.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),l.jsx("input",{...ie("sku",{required:"SKU is required",minLength:{value:3,message:"SKU must be at least 3 characters"},maxLength:{value:50,message:"SKU must be no more than 50 characters"},pattern:{value:/^[A-Za-z0-9\-_]+$/,message:"SKU can only contain letters, numbers, hyphens, and underscores"},validate:{unique:Ce=>et(Ce,C==null?void 0:C.id)?"SKU already exists":!0}}),className:"input",placeholder:"Enter SKU (e.g., PROD-001, SKU123)",maxLength:50}),$e.sku&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.sku.message}),Mt&&!ze(Mt)&&l.jsx("p",{className:"mt-1 text-sm text-orange-600",children:"SKU should be 3-50 alphanumeric characters"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),l.jsxs("select",{...ie("categoryId",{required:"Category is required"}),className:"input",children:[l.jsx("option",{value:"",children:"Select a category"}),e.map(Ce=>l.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),$e.categoryId&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.categoryId.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),l.jsx("input",{...ie("barcode"),className:"input",placeholder:"Enter barcode (optional)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),l.jsx("input",{...ie("price",{required:"Price is required",min:{value:.01,message:"Price must be greater than 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),$e.price&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.price.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost *"}),l.jsx("input",{...ie("cost",{required:"Cost is required",min:{value:0,message:"Cost must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),$e.cost&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.cost.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),l.jsx("input",{...ie("quantity",{required:"Quantity is required",min:{value:0,message:"Quantity must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"0"}),$e.quantity&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.quantity.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock Level *"}),l.jsx("input",{...ie("minStockLevel",{required:"Minimum stock level is required",min:{value:0,message:"Minimum stock level must be greater than or equal to 0"},valueAsNumber:!0}),type:"number",className:"input",placeholder:"5"}),$e.minStockLevel&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:$e.minStockLevel.message})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{...ie("description"),rows:3,className:"input",placeholder:"Enter product description (optional)"})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{...ie("isActive"),type:"checkbox",className:"h-4 w-4 text-blue-600 rounded border-gray-300"}),l.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active (available for sale)"})]})})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{type:"button",onClick:_t,className:"btn btn-outline",disabled:Xe||K,children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:Xe||K,children:[Xe||K?l.jsx(qs,{className:"h-4 w-4 mr-2 animate-spin"}):null,C?"Update Product":"Add Product"]})]})]})]})}),l.jsx(Nd,{isOpen:P,onClose:()=>j(!1),onScan:hr})]})},Kp="modulepreload",Vp=function(r,e){return new URL(r,e).href},Su={},nl=function(e,t,n){if(!t||t.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Vp(i,n),i in Su)return;Su[i]=!0;const c=i.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!n)for(let x=a.length-1;x>=0;x--){const b=a[x];if(b.href===i&&(!c||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const y=document.createElement("link");if(y.rel=c?"stylesheet":Kp,c||(y.as="script",y.crossOrigin=""),y.href=i,document.head.appendChild(y),c)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i})};var Nn=Uint8Array,$n=Uint16Array,xc=Int32Array,dl=new Nn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hl=new Nn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ec=new Nn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ad=function(r,e){for(var t=new $n(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var a=new xc(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)a[i]=i-t[n]<<5|n;return{b:t,r:a}},Sd=Ad(dl,2),jd=Sd.b,tc=Sd.r;jd[28]=258,tc[258]=28;var _d=Ad(hl,0),$p=_d.b,ju=_d.r,rc=new $n(32768);for(var Ar=0;Ar<32768;++Ar){var Ea=(Ar&43690)>>1|(Ar&21845)<<1;Ea=(Ea&52428)>>2|(Ea&13107)<<2,Ea=(Ea&61680)>>4|(Ea&3855)<<4,rc[Ar]=((Ea&65280)>>8|(Ea&255)<<8)>>1}var Ui=function(r,e,t){for(var n=r.length,a=0,i=new $n(e);a<n;++a)r[a]&&++i[r[a]-1];var c=new $n(e);for(a=1;a<e;++a)c[a]=c[a-1]+i[a-1]<<1;var u;if(t){u=new $n(1<<e);var h=15-e;for(a=0;a<n;++a)if(r[a])for(var y=a<<4|r[a],x=e-r[a],b=c[r[a]-1]++<<x,w=b|(1<<x)-1;b<=w;++b)u[rc[b]>>h]=y}else for(u=new $n(n),a=0;a<n;++a)r[a]&&(u[a]=rc[c[r[a]-1]++]>>15-r[a]);return u},Wa=new Nn(288);for(var Ar=0;Ar<144;++Ar)Wa[Ar]=8;for(var Ar=144;Ar<256;++Ar)Wa[Ar]=9;for(var Ar=256;Ar<280;++Ar)Wa[Ar]=7;for(var Ar=280;Ar<288;++Ar)Wa[Ar]=8;var go=new Nn(32);for(var Ar=0;Ar<32;++Ar)go[Ar]=5;var Gp=Ui(Wa,9,0),Yp=Ui(Wa,9,1),Jp=Ui(go,5,0),Qp=Ui(go,5,1),El=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},gi=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Tl=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},wc=function(r){return(r+7)/8|0},Pd=function(r,e,t){return(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length),new Nn(r.subarray(e,t))},Xp=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yi=function(r,e,t){var n=new Error(e||Xp[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,yi),!t)throw n;return n},Zp=function(r,e,t,n){var a=r.length,i=n?n.length:0;if(!a||e.f&&!e.l)return t||new Nn(0);var c=!t,u=c||e.i!=2,h=e.i;c&&(t=new Nn(a*3));var y=function(Xe){var Qe=t.length;if(Xe>Qe){var dt=new Nn(Math.max(Qe*2,Xe));dt.set(t),t=dt}},x=e.f||0,b=e.p||0,w=e.b||0,m=e.l,_=e.d,L=e.m,O=e.n,P=a*8;do{if(!m){x=gi(r,b,1);var j=gi(r,b+1,3);if(b+=3,j)if(j==1)m=Yp,_=Qp,L=9,O=5;else if(j==2){var ee=gi(r,b,31)+257,T=gi(r,b+10,15)+4,U=ee+gi(r,b+5,31)+1;b+=14;for(var te=new Nn(U),se=new Nn(19),D=0;D<T;++D)se[ec[D]]=gi(r,b+D*3,7);b+=T*3;for(var A=El(se),M=(1<<A)-1,V=Ui(se,A,1),D=0;D<U;){var fe=V[gi(r,b,M)];b+=fe&15;var C=fe>>4;if(C<16)te[D++]=C;else{var Y=0,J=0;for(C==16?(J=3+gi(r,b,3),b+=2,Y=te[D-1]):C==17?(J=3+gi(r,b,7),b+=3):C==18&&(J=11+gi(r,b,127),b+=7);J--;)te[D++]=Y}}var ne=te.subarray(0,ee),K=te.subarray(ee);L=El(ne),O=El(K),m=Ui(ne,L,1),_=Ui(K,O,1)}else yi(1);else{var C=wc(b)+4,z=r[C-4]|r[C-3]<<8,G=C+z;if(G>a){h&&yi(0);break}u&&y(w+z),t.set(r.subarray(C,G),w),e.b=w+=z,e.p=b=G*8,e.f=x;continue}if(b>P){h&&yi(0);break}}u&&y(w+131072);for(var he=(1<<L)-1,Oe=(1<<O)-1,F=b;;F=b){var Y=m[Tl(r,b)&he],W=Y>>4;if(b+=Y&15,b>P){h&&yi(0);break}if(Y||yi(2),W<256)t[w++]=W;else if(W==256){F=b,m=null;break}else{var Q=W-254;if(W>264){var D=W-257,ie=dl[D];Q=gi(r,b,(1<<ie)-1)+jd[D],b+=ie}var oe=_[Tl(r,b)&Oe],Pe=oe>>4;oe||yi(3),b+=oe&15;var K=$p[Pe];if(Pe>3){var ie=hl[Pe];K+=Tl(r,b)&(1<<ie)-1,b+=ie}if(b>P){h&&yi(0);break}u&&y(w+131072);var De=w+Q;if(w<K){var me=i-K,$e=Math.min(K,De);for(me+w<0&&yi(3);w<$e;++w)t[w]=n[me+w]}for(;w<De;++w)t[w]=t[w-K]}}e.l=m,e.p=F,e.b=w,e.f=x,m&&(x=1,e.m=L,e.d=_,e.n=O)}while(!x);return w!=t.length&&c?Pd(t,0,w):t.subarray(0,w)},ga=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},to=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Ml=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var a=t.length,i=t.slice();if(!a)return{t:kd,l:0};if(a==1){var c=new Nn(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(G,ee){return G.f-ee.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],y=0,x=1,b=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};x!=a-1;)u=t[t[y].f<t[b].f?y++:b++],h=t[y!=x&&t[y].f<t[b].f?y++:b++],t[x++]={s:-1,f:u.f+h.f,l:u,r:h};for(var w=i[0].s,n=1;n<a;++n)i[n].s>w&&(w=i[n].s);var m=new $n(w+1),_=nc(t[x-1],m,0);if(_>e){var n=0,L=0,O=_-e,P=1<<O;for(i.sort(function(ee,T){return m[T.s]-m[ee.s]||ee.f-T.f});n<a;++n){var j=i[n].s;if(m[j]>e)L+=P-(1<<_-m[j]),m[j]=e;else break}for(L>>=O;L>0;){var C=i[n].s;m[C]<e?L-=1<<e-m[C]++-1:++n}for(;n>=0&&L;--n){var z=i[n].s;m[z]==e&&(--m[z],++L)}_=e}return{t:new Nn(m),l:_}},nc=function(r,e,t){return r.s==-1?Math.max(nc(r.l,e,t+1),nc(r.r,e,t+1)):e[r.s]=t},_u=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new $n(++e),n=0,a=r[0],i=1,c=function(h){t[n++]=h},u=1;u<=e;++u)if(r[u]==a&&u!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=r[u]}return{c:t.subarray(0,n),n:e}},ro=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Ld=function(r,e,t){var n=t.length,a=wc(e+2);r[a]=n&255,r[a+1]=n>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var i=0;i<n;++i)r[a+i+4]=t[i];return(a+4+n)*8},Pu=function(r,e,t,n,a,i,c,u,h,y,x){ga(e,x++,t),++a[256];for(var b=Ml(a,15),w=b.t,m=b.l,_=Ml(i,15),L=_.t,O=_.l,P=_u(w),j=P.c,C=P.n,z=_u(L),G=z.c,ee=z.n,T=new $n(19),U=0;U<j.length;++U)++T[j[U]&31];for(var U=0;U<G.length;++U)++T[G[U]&31];for(var te=Ml(T,7),se=te.t,D=te.l,A=19;A>4&&!se[ec[A-1]];--A);var M=y+5<<3,V=ro(a,Wa)+ro(i,go)+c,fe=ro(a,w)+ro(i,L)+c+14+3*A+ro(T,se)+2*T[16]+3*T[17]+7*T[18];if(h>=0&&M<=V&&M<=fe)return Ld(e,x,r.subarray(h,h+y));var Y,J,ne,K;if(ga(e,x,1+(fe<V)),x+=2,fe<V){Y=Ui(w,m,0),J=w,ne=Ui(L,O,0),K=L;var he=Ui(se,D,0);ga(e,x,C-257),ga(e,x+5,ee-1),ga(e,x+10,A-4),x+=14;for(var U=0;U<A;++U)ga(e,x+3*U,se[ec[U]]);x+=3*A;for(var Oe=[j,G],F=0;F<2;++F)for(var W=Oe[F],U=0;U<W.length;++U){var Q=W[U]&31;ga(e,x,he[Q]),x+=se[Q],Q>15&&(ga(e,x,W[U]>>5&127),x+=W[U]>>12)}}else Y=Gp,J=Wa,ne=Jp,K=go;for(var U=0;U<u;++U){var ie=n[U];if(ie>255){var Q=ie>>18&31;to(e,x,Y[Q+257]),x+=J[Q+257],Q>7&&(ga(e,x,ie>>23&31),x+=dl[Q]);var oe=ie&31;to(e,x,ne[oe]),x+=K[oe],oe>3&&(to(e,x,ie>>5&8191),x+=hl[oe])}else to(e,x,Y[ie]),x+=J[ie]}return to(e,x,Y[256]),x+J[256]},e0=new xc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kd=new Nn(0),t0=function(r,e,t,n,a,i){var c=i.z||r.length,u=new Nn(n+c+5*(1+Math.ceil(c/7e3))+a),h=u.subarray(n,u.length-a),y=i.l,x=(i.r||0)&7;if(e){x&&(h[0]=i.r>>3);for(var b=e0[e-1],w=b>>13,m=b&8191,_=(1<<t)-1,L=i.p||new $n(32768),O=i.h||new $n(_+1),P=Math.ceil(t/3),j=2*P,C=function(Ct){return(r[Ct]^r[Ct+1]<<P^r[Ct+2]<<j)&_},z=new xc(25e3),G=new $n(288),ee=new $n(32),T=0,U=0,te=i.i||0,se=0,D=i.w||0,A=0;te+2<c;++te){var M=C(te),V=te&32767,fe=O[M];if(L[V]=fe,O[M]=V,D<=te){var Y=c-te;if((T>7e3||se>24576)&&(Y>423||!y)){x=Pu(r,h,0,z,G,ee,U,se,A,te-A,x),se=T=U=0,A=te;for(var J=0;J<286;++J)G[J]=0;for(var J=0;J<30;++J)ee[J]=0}var ne=2,K=0,he=m,Oe=V-fe&32767;if(Y>2&&M==C(te-Oe))for(var F=Math.min(w,Y)-1,W=Math.min(32767,te),Q=Math.min(258,Y);Oe<=W&&--he&&V!=fe;){if(r[te+ne]==r[te+ne-Oe]){for(var ie=0;ie<Q&&r[te+ie]==r[te+ie-Oe];++ie);if(ie>ne){if(ne=ie,K=Oe,ie>F)break;for(var oe=Math.min(Oe,ie-2),Pe=0,J=0;J<oe;++J){var De=te-Oe+J&32767,me=L[De],$e=De-me&32767;$e>Pe&&(Pe=$e,fe=De)}}}V=fe,fe=L[V],Oe+=V-fe&32767}if(K){z[se++]=268435456|tc[ne]<<18|ju[K];var Xe=tc[ne]&31,Qe=ju[K]&31;U+=dl[Xe]+hl[Qe],++G[257+Xe],++ee[Qe],D=te+ne,++T}else z[se++]=r[te],++G[r[te]]}}for(te=Math.max(te,D);te<c;++te)z[se++]=r[te],++G[r[te]];x=Pu(r,h,y,z,G,ee,U,se,A,te-A,x),y||(i.r=x&7|h[x/8|0]<<3,x-=7,i.h=O,i.p=L,i.i=te,i.w=D)}else{for(var te=i.w||0;te<c+y;te+=65535){var dt=te+65535;dt>=c&&(h[x/8|0]=y,dt=c),x=Ld(h,x+1,r.subarray(te,dt))}i.i=c}return Pd(u,0,n+wc(x)+a)},Cd=function(){var r=1,e=0;return{p:function(t){for(var n=r,a=e,i=t.length|0,c=0;c!=i;){for(var u=Math.min(c+2655,i);c<u;++c)a+=n+=t[c];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}r=n,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},r0=function(r,e,t,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),c=new Nn(i.length+r.length);c.set(i),c.set(r,i.length),r=c,a.w=i.length}return t0(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,a)},Fd=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},n0=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=Cd();a.p(e.dictionary),Fd(r,2,a.d())}},i0=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&yi(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&yi(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function ic(r,e){e||(e={});var t=Cd();t.p(r);var n=r0(r,e,e.dictionary?6:2,4);return n0(n,e),Fd(n,n.length-4,t.d()),n}function a0(r,e){return Zp(r.subarray(i0(r,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var s0=typeof TextDecoder<"u"&&new TextDecoder,o0=0;try{s0.decode(kd,{stream:!0}),o0=1}catch{}var qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Rl(){qt.console&&typeof qt.console.log=="function"&&qt.console.log.apply(qt.console,arguments)}var gr={log:Rl,warn:function(r){qt.console&&(typeof qt.console.warn=="function"?qt.console.warn.apply(qt.console,arguments):Rl.call(null,arguments))},error:function(r){qt.console&&(typeof qt.console.error=="function"?qt.console.error.apply(qt.console,arguments):Rl(r))}};function ql(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){ls(n.response,e,t)},n.onerror=function(){gr.error("could not download file")},n.send()}function Lu(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qo(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var so,ac,ls=qt.saveAs||((typeof window>"u"?"undefined":yr(window))!=="object"||window!==qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=qt.URL||qt.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Lu(a.href)?ql(r,e,t):qo(a,a.target="_blank"):qo(a)):(a.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){qo(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Lu(r))ql(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){qo(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:yr(i)!=="object"&&(gr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return ql(r,e,t);var a=r.type==="application/octet-stream",i=/constructor/i.test(qt.HTMLElement)||qt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&(typeof FileReader>"u"?"undefined":yr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var x=u.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=x:location=x,n=null},u.readAsDataURL(r)}else{var h=qt.URL||qt.webkitURL,y=h.createObjectURL(r);n?n.location=y:location.href=y,n=null,setTimeout(function(){h.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Dd(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var a=t[n].re,i=t[n].process,c=a.exec(r);c&&(e=i(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),y=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),y.length==1&&(y="0"+y),"#"+u+h+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bl(r,e){var t=r[0],n=r[1],a=r[2],i=r[3];t=vn(t,n,a,i,e[0],7,-680876936),i=vn(i,t,n,a,e[1],12,-389564586),a=vn(a,i,t,n,e[2],17,606105819),n=vn(n,a,i,t,e[3],22,-1044525330),t=vn(t,n,a,i,e[4],7,-176418897),i=vn(i,t,n,a,e[5],12,1200080426),a=vn(a,i,t,n,e[6],17,-1473231341),n=vn(n,a,i,t,e[7],22,-45705983),t=vn(t,n,a,i,e[8],7,1770035416),i=vn(i,t,n,a,e[9],12,-1958414417),a=vn(a,i,t,n,e[10],17,-42063),n=vn(n,a,i,t,e[11],22,-1990404162),t=vn(t,n,a,i,e[12],7,1804603682),i=vn(i,t,n,a,e[13],12,-40341101),a=vn(a,i,t,n,e[14],17,-1502002290),t=yn(t,n=vn(n,a,i,t,e[15],22,1236535329),a,i,e[1],5,-165796510),i=yn(i,t,n,a,e[6],9,-1069501632),a=yn(a,i,t,n,e[11],14,643717713),n=yn(n,a,i,t,e[0],20,-373897302),t=yn(t,n,a,i,e[5],5,-701558691),i=yn(i,t,n,a,e[10],9,38016083),a=yn(a,i,t,n,e[15],14,-660478335),n=yn(n,a,i,t,e[4],20,-405537848),t=yn(t,n,a,i,e[9],5,568446438),i=yn(i,t,n,a,e[14],9,-1019803690),a=yn(a,i,t,n,e[3],14,-187363961),n=yn(n,a,i,t,e[8],20,1163531501),t=yn(t,n,a,i,e[13],5,-1444681467),i=yn(i,t,n,a,e[2],9,-51403784),a=yn(a,i,t,n,e[7],14,1735328473),t=bn(t,n=yn(n,a,i,t,e[12],20,-1926607734),a,i,e[5],4,-378558),i=bn(i,t,n,a,e[8],11,-2022574463),a=bn(a,i,t,n,e[11],16,1839030562),n=bn(n,a,i,t,e[14],23,-35309556),t=bn(t,n,a,i,e[1],4,-1530992060),i=bn(i,t,n,a,e[4],11,1272893353),a=bn(a,i,t,n,e[7],16,-155497632),n=bn(n,a,i,t,e[10],23,-1094730640),t=bn(t,n,a,i,e[13],4,681279174),i=bn(i,t,n,a,e[0],11,-358537222),a=bn(a,i,t,n,e[3],16,-722521979),n=bn(n,a,i,t,e[6],23,76029189),t=bn(t,n,a,i,e[9],4,-640364487),i=bn(i,t,n,a,e[12],11,-421815835),a=bn(a,i,t,n,e[15],16,530742520),t=xn(t,n=bn(n,a,i,t,e[2],23,-995338651),a,i,e[0],6,-198630844),i=xn(i,t,n,a,e[7],10,1126891415),a=xn(a,i,t,n,e[14],15,-1416354905),n=xn(n,a,i,t,e[5],21,-57434055),t=xn(t,n,a,i,e[12],6,1700485571),i=xn(i,t,n,a,e[3],10,-1894986606),a=xn(a,i,t,n,e[10],15,-1051523),n=xn(n,a,i,t,e[1],21,-2054922799),t=xn(t,n,a,i,e[8],6,1873313359),i=xn(i,t,n,a,e[15],10,-30611744),a=xn(a,i,t,n,e[6],15,-1560198380),n=xn(n,a,i,t,e[13],21,1309151649),t=xn(t,n,a,i,e[4],6,-145523070),i=xn(i,t,n,a,e[11],10,-1120210379),a=xn(a,i,t,n,e[2],15,718787259),n=xn(n,a,i,t,e[9],21,-343485551),r[0]=za(t,r[0]),r[1]=za(n,r[1]),r[2]=za(a,r[2]),r[3]=za(i,r[3])}function fl(r,e,t,n,a,i){return e=za(za(e,r),za(n,i)),za(e<<a|e>>>32-a,t)}function vn(r,e,t,n,a,i,c){return fl(e&t|~e&n,r,e,a,i,c)}function yn(r,e,t,n,a,i,c){return fl(e&n|t&~n,r,e,a,i,c)}function bn(r,e,t,n,a,i,c){return fl(e^t^n,r,e,a,i,c)}function xn(r,e,t,n,a,i,c){return fl(t^(e|~n),r,e,a,i,c)}function Od(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Bl(n,l0(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Bl(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Bl(n,a),n}function l0(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}so=qt.atob.bind(qt),ac=qt.btoa.bind(qt);var ku="0123456789abcdef".split("");function c0(r){for(var e="",t=0;t<4;t++)e+=ku[r>>8*t+4&15]+ku[r>>8*t&15];return e}function u0(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function sc(r){return Od(r).map(u0).join("")}var d0=function(r){for(var e=0;e<r.length;e++)r[e]=c0(r[e]);return r.join("")}(Od("hello"))!="5d41402abc4b2a76b9719d911017c592";function za(r,e){if(d0){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function oc(r,e){var t,n,a,i;if(r!==t){for(var c=(a=r,i=1+(256/r.length>>0),new Array(i+1).join(a)),u=[],h=0;h<256;h++)u[h]=h;var y=0;for(h=0;h<256;h++){var x=u[h];y=(y+x+c.charCodeAt(h))%256,u[h]=u[y],u[y]=x}t=r,n=u}else u=n;var b=e.length,w=0,m=0,_="";for(h=0;h<b;h++)m=(m+(x=u[w=(w+1)%256]))%256,u[w]=u[m],u[m]=x,c=u[(u[w]+u[m])%256],_+=String.fromCharCode(e.charCodeAt(h)^c);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Cu={print:4,modify:8,copy:16,"annot-forms":32};function Ts(r,e,t,n){this.v=1,this.r=2;var a=192;r.forEach(function(u){if(Cu.perm!==void 0)throw new Error("Invalid permission: "+u);a+=Cu[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^a)),this.encryptionKey=sc(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=oc(this.encryptionKey,this.padding)}function Ms(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var a=r.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=r[n]}return e}function Fu(r){if(yr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,a){if(a=a||!1,typeof t!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!a],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[t]){var c=e[t][i];try{c[0].apply(r,n)}catch(u){qt.console&&gr.error("jsPDF PubSub Error",u.message,u)}c[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vo(r){if(!(this instanceof vo))return new vo(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function Id(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Ba(r,e,t,n,a){if(!(this instanceof Ba))return new Ba(r,e,t,n,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,Id.call(this,n,a)}function hs(r,e,t,n,a){if(!(this instanceof hs))return new hs(r,e,t,n,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Id.call(this,n,a)}function Et(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],c=[],u=1,h=16,y="S",x=null;yr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,a=r.format||a,i=r.compress||r.compressPdf||i,(x=r.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),y=r.defaultPathOperation||"S"),c=r.filters||(i===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,w={},m={internal:{},__private__:{}};m.__private__.PubSub=Fu;var _="1.3",L=m.__private__.getPdfVersion=function(){return _};m.__private__.setPdfVersion=function(p){_=p};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return O};var P=m.__private__.getPageFormat=function(p){return O[p]};a=a||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},C=j.COMPAT;function z(){this.saveGraphicsState(),ue(new At(lt,0,0,-lt,0,Hn()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),y="n",C=j.ADVANCED}function G(){this.restoreGraphicsState(),y="S",C=j.COMPAT}var ee=m.__private__.combineFontStyleAndFontWeight=function(p,I){if(p=="bold"&&I=="normal"||p=="bold"&&I==400||p=="normal"&&I=="italic"||p=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(p=I==400||I==="normal"?p==="italic"?"italic":"normal":I!=700&&I!=="bold"||p!=="normal"?(I==700?"bold":I)+""+p:"bold"),p};m.advancedAPI=function(p){var I=C===j.COMPAT;return I&&z.call(this),typeof p!="function"||(p(this),I&&G.call(this)),this},m.compatAPI=function(p){var I=C===j.ADVANCED;return I&&G.call(this),typeof p!="function"||(p(this),I&&z.call(this)),this},m.isAdvancedAPI=function(){return C===j.ADVANCED};var T,U=function(p){if(C!==j.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},te=m.roundToPrecision=m.__private__.roundToPrecision=function(p,I){var ae=e||I;if(isNaN(p)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(ae).replace(/0+$/,"")};T=m.hpf=m.__private__.hpf=typeof h=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return te(p,h)}:h==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return te(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return te(p,16)};var se=m.f2=m.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return te(p,2)},D=m.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return te(p,3)},A=m.scale=m.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return C===j.COMPAT?p*lt:C===j.ADVANCED?p:void 0},M=function(p){return C===j.COMPAT?Hn()-p:C===j.ADVANCED?p:void 0},V=function(p){return A(M(p))};m.__private__.setPrecision=m.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var fe,Y="00000000000000000000000000000000",J=m.__private__.getFileId=function(){return Y},ne=m.__private__.setFileId=function(p){return Y=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Yr=new Ts(x.userPermissions,x.userPassword,x.ownerPassword,Y)),Y};m.setFileId=function(p){return ne(p),this},m.getFileId=function(){return J()};var K=m.__private__.convertDateToPDFDate=function(p){var I=p.getTimezoneOffset(),ae=I<0?"+":"-",pe=Math.floor(Math.abs(I/60)),Fe=Math.abs(I%60),We=[ae,Q(pe),"'",Q(Fe),"'"].join("");return["D:",p.getFullYear(),Q(p.getMonth()+1),Q(p.getDate()),Q(p.getHours()),Q(p.getMinutes()),Q(p.getSeconds()),We].join("")},he=m.__private__.convertPDFDateToDate=function(p){var I=parseInt(p.substr(2,4),10),ae=parseInt(p.substr(6,2),10)-1,pe=parseInt(p.substr(8,2),10),Fe=parseInt(p.substr(10,2),10),We=parseInt(p.substr(12,2),10),tt=parseInt(p.substr(14,2),10);return new Date(I,ae,pe,Fe,We,tt,0)},Oe=m.__private__.setCreationDate=function(p){var I;if(p===void 0&&(p=new Date),p instanceof Date)I=K(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=p}return fe=I},F=m.__private__.getCreationDate=function(p){var I=fe;return p==="jsDate"&&(I=he(fe)),I};m.setCreationDate=function(p){return Oe(p),this},m.getCreationDate=function(p){return F(p)};var W,Q=m.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},ie=m.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},oe=0,Pe=[],De=[],me=0,$e=[],Xe=[],Qe=!1,dt=De,Ct=function(){oe=0,me=0,De=[],Pe=[],$e=[],ni=br(),Hr=br()};m.__private__.setCustomOutputDestination=function(p){Qe=!0,dt=p};var qe=function(p){Qe||(dt=p)};m.__private__.resetCustomOutputDestination=function(){Qe=!1,dt=De};var ue=m.__private__.out=function(p){return p=p.toString(),me+=p.length+1,dt.push(p),dt},Mt=m.__private__.write=function(p){return ue(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},ht=m.__private__.getArrayBuffer=function(p){for(var I=p.length,ae=new ArrayBuffer(I),pe=new Uint8Array(ae);I--;)pe[I]=p.charCodeAt(I);return ae},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return rt};var X=r.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(p){return X=C===j.ADVANCED?p/lt:p,this};var de,xe=m.__private__.getFontSize=m.getFontSize=function(){return C===j.COMPAT?X:X*lt},Be=r.R2L||!1;m.__private__.setR2L=m.setR2L=function(p){return Be=p,this},m.__private__.getR2L=m.getR2L=function(){return Be};var Ke,ze=m.__private__.setZoomMode=function(p){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))de=p;else if(isNaN(p)){if(I.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');de=p}else de=parseInt(p,10)};m.__private__.getZoomMode=function(){return de};var et,gt=m.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');Ke=p};m.__private__.getPageMode=function(){return Ke};var _t=m.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');et=p};m.__private__.getLayoutMode=function(){return et},m.__private__.setDisplayMode=m.setDisplayMode=function(p,I,ae){return ze(p),_t(I),gt(ae),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(p){if(Object.keys(Nt).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[p]},m.__private__.getDocumentProperties=function(){return Nt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(p){for(var I in Nt)Nt.hasOwnProperty(I)&&p[I]&&(Nt[I]=p[I]);return this},m.__private__.setDocumentProperty=function(p,I){if(Object.keys(Nt).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[p]=I};var Bt,lt,hr,Wt,Tr,Gt={},ct={},Cr=[],Kt={},Ln={},nt={},tn={},An=null,cr=0,Rt=[],Ce=new Fu(m),bt=r.hotfixes||[],Ot={},er={},sr=[],At=function p(I,ae,pe,Fe,We,tt){if(!(this instanceof p))return new p(I,ae,pe,Fe,We,tt);isNaN(I)&&(I=1),isNaN(ae)&&(ae=0),isNaN(pe)&&(pe=0),isNaN(Fe)&&(Fe=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[I,ae,pe,Fe,We,tt]};Object.defineProperty(At.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(At.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(At.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(At.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(At.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(At.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(At.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(At.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(At.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(At.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(At.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(At.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(At.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(At.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(At.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(At.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),At.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(p)},At.prototype.multiply=function(p){var I=p.sx*this.sx+p.shy*this.shx,ae=p.sx*this.shy+p.shy*this.sy,pe=p.shx*this.sx+p.sy*this.shx,Fe=p.shx*this.shy+p.sy*this.sy,We=p.tx*this.sx+p.ty*this.shx+this.tx,tt=p.tx*this.shy+p.ty*this.sy+this.ty;return new At(I,ae,pe,Fe,We,tt)},At.prototype.decompose=function(){var p=this.sx,I=this.shy,ae=this.shx,pe=this.sy,Fe=this.tx,We=this.ty,tt=Math.sqrt(p*p+I*I),yt=(p/=tt)*ae+(I/=tt)*pe;ae-=p*yt,pe-=I*yt;var Lt=Math.sqrt(ae*ae+pe*pe);return yt/=Lt,p*(pe/=Lt)<I*(ae/=Lt)&&(p=-p,I=-I,yt=-yt,tt=-tt),{scale:new At(tt,0,0,Lt,0,0),translate:new At(1,0,0,1,Fe,We),rotate:new At(p,I,-I,p,0,0),skew:new At(1,0,yt,1,0,0)}},At.prototype.toString=function(p){return this.join(" ")},At.prototype.inversed=function(){var p=this.sx,I=this.shy,ae=this.shx,pe=this.sy,Fe=this.tx,We=this.ty,tt=1/(p*pe-I*ae),yt=pe*tt,Lt=-I*tt,zt=-ae*tt,Ut=p*tt;return new At(yt,Lt,zt,Ut,-yt*Fe-zt*We,-Lt*Fe-Ut*We)},At.prototype.applyToPoint=function(p){var I=p.x*this.sx+p.y*this.shx+this.tx,ae=p.x*this.shy+p.y*this.sy+this.ty;return new Di(I,ae)},At.prototype.applyToRectangle=function(p){var I=this.applyToPoint(p),ae=this.applyToPoint(new Di(p.x+p.w,p.y+p.h));return new Fr(I.x,I.y,ae.x-I.x,ae.y-I.y)},At.prototype.clone=function(){var p=this.sx,I=this.shy,ae=this.shx,pe=this.sy,Fe=this.tx,We=this.ty;return new At(p,I,ae,pe,Fe,We)},m.Matrix=At;var ar=m.matrixMult=function(p,I){return I.multiply(p)},$t=new At(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=$t;var tr=function(p,I){if(!Ln[p]){var ae=(I instanceof Ba?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);I.id=ae,Ln[p]=ae,Kt[ae]=I,Ce.publish("addPattern",I)}};m.ShadingPattern=Ba,m.TilingPattern=hs,m.addShadingPattern=function(p,I){return U("addShadingPattern()"),tr(p,I),this},m.beginTilingPattern=function(p){U("beginTilingPattern()"),Oi(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},m.endTilingPattern=function(p,I){U("endTilingPattern()"),I.stream=Xe[W].join(`
`),tr(p,I),Ce.publish("endTilingPattern",I),sr.pop().restore()};var _r=m.__private__.newObject=function(){var p=br();return rn(p,!0),p},br=m.__private__.newObjectDeferred=function(){return oe++,Pe[oe]=function(){return me},oe},rn=function(p,I){return I=typeof I=="boolean"&&I,Pe[p]=me,I&&ue(p+" 0 obj"),p},ri=m.__private__.newAdditionalObject=function(){var p={objId:br(),content:""};return $e.push(p),p},ni=br(),Hr=br(),nn=m.__private__.decodeColorString=function(p){var I=p.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var ae=parseFloat(I[0]);I=[ae,ae,ae,"r"]}for(var pe="#",Fe=0;Fe<3;Fe++)pe+=("0"+Math.floor(255*parseFloat(I[Fe])).toString(16)).slice(-2);return pe},Wr=m.__private__.encodeColorString=function(p){var I;typeof p=="string"&&(p={ch1:p});var ae=p.ch1,pe=p.ch2,Fe=p.ch3,We=p.ch4,tt=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var yt=new Dd(ae);if(yt.ok)ae=yt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Lt=parseInt(ae.substr(1),16);ae=Lt>>16&255,pe=Lt>>8&255,Fe=255&Lt}if(pe===void 0||We===void 0&&ae===pe&&pe===Fe)if(typeof ae=="string")I=ae+" "+tt[0];else switch(p.precision){case 2:I=se(ae/255)+" "+tt[0];break;case 3:default:I=D(ae/255)+" "+tt[0]}else if(We===void 0||yr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return I=["1.","1.","1.",tt[1]].join(" ");if(typeof ae=="string")I=[ae,pe,Fe,tt[1]].join(" ");else switch(p.precision){case 2:I=[se(ae/255),se(pe/255),se(Fe/255),tt[1]].join(" ");break;default:case 3:I=[D(ae/255),D(pe/255),D(Fe/255),tt[1]].join(" ")}}else if(typeof ae=="string")I=[ae,pe,Fe,We,tt[2]].join(" ");else switch(p.precision){case 2:I=[se(ae),se(pe),se(Fe),se(We),tt[2]].join(" ");break;case 3:default:I=[D(ae),D(pe),D(Fe),D(We),tt[2]].join(" ")}return I},Sn=m.__private__.getFilters=function(){return c},kn=m.__private__.putStream=function(p){var I=(p=p||{}).data||"",ae=p.filters||Sn(),pe=p.alreadyAppliedFilters||[],Fe=p.addLength1||!1,We=I.length,tt=p.objectId,yt=function(Jr){return Jr};if(x!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(yt=Yr.encryptor(tt,0));var Lt={};ae===!0&&(ae=["FlateEncode"]);var zt=p.additionalKeyValues||[],Ut=(Lt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(I,ae):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Lt.data.length!==0&&(zt.push({key:"Length",value:Lt.data.length}),Fe===!0&&zt.push({key:"Length1",value:We})),Ut.length!=0)if(Ut.split("/").length-1==1)zt.push({key:"Filter",value:Ut});else{zt.push({key:"Filter",value:"["+Ut+"]"});for(var Xt=0;Xt<zt.length;Xt+=1)if(zt[Xt].key==="DecodeParms"){for(var xr=[],wr=0;wr<Lt.reverseChain.split("/").length-1;wr+=1)xr.push("null");xr.push(zt[Xt].value),zt[Xt].value="["+xr.join(" ")+"]"}}ue("<<");for(var Dr=0;Dr<zt.length;Dr++)ue("/"+zt[Dr].key+" "+zt[Dr].value);ue(">>"),Lt.data.length!==0&&(ue("stream"),ue(yt(Lt.data)),ue("endstream"))},Gr=m.__private__.putPage=function(p){var I=p.number,ae=p.data,pe=p.objId,Fe=p.contentsObjId;rn(pe,!0),ue("<</Type /Page"),ue("/Parent "+p.rootDictionaryObjId+" 0 R"),ue("/Resources "+p.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(T(p.mediaBox.bottomLeftX))+" "+parseFloat(T(p.mediaBox.bottomLeftY))+" "+T(p.mediaBox.topRightX)+" "+T(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&ue("/CropBox ["+T(p.cropBox.bottomLeftX)+" "+T(p.cropBox.bottomLeftY)+" "+T(p.cropBox.topRightX)+" "+T(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&ue("/BleedBox ["+T(p.bleedBox.bottomLeftX)+" "+T(p.bleedBox.bottomLeftY)+" "+T(p.bleedBox.topRightX)+" "+T(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&ue("/TrimBox ["+T(p.trimBox.bottomLeftX)+" "+T(p.trimBox.bottomLeftY)+" "+T(p.trimBox.topRightX)+" "+T(p.trimBox.topRightY)+"]"),p.artBox!==null&&ue("/ArtBox ["+T(p.artBox.bottomLeftX)+" "+T(p.artBox.bottomLeftY)+" "+T(p.artBox.topRightX)+" "+T(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&ue("/UserUnit "+p.userUnit),Ce.publish("putPage",{objId:pe,pageContext:Rt[I],pageNumber:I,page:ae}),ue("/Contents "+Fe+" 0 R"),ue(">>"),ue("endobj");var We=ae.join(`
`);return C===j.ADVANCED&&(We+=`
Q`),rn(Fe,!0),kn({data:We,filters:Sn(),objectId:Fe}),ue("endobj"),pe},ji=m.__private__.putPages=function(){var p,I,ae=[];for(p=1;p<=cr;p++)Rt[p].objId=br(),Rt[p].contentsObjId=br();for(p=1;p<=cr;p++)ae.push(Gr({number:p,data:Xe[p],objId:Rt[p].objId,contentsObjId:Rt[p].contentsObjId,mediaBox:Rt[p].mediaBox,cropBox:Rt[p].cropBox,bleedBox:Rt[p].bleedBox,trimBox:Rt[p].trimBox,artBox:Rt[p].artBox,userUnit:Rt[p].userUnit,rootDictionaryObjId:ni,resourceDictionaryObjId:Hr}));rn(ni,!0),ue("<</Type /Pages");var pe="/Kids [";for(I=0;I<cr;I++)pe+=ae[I]+" 0 R ";ue(pe+"]"),ue("/Count "+cr),ue(">>"),ue("endobj"),Ce.publish("postPutPages")},Cn=function(p){Ce.publish("putFont",{font:p,out:ue,newObject:_r,putStream:kn}),p.isAlreadyPutted!==!0&&(p.objectNumber=_r(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Ms(p.postScriptName)),ue("/Subtype /Type1"),typeof p.encoding=="string"&&ue("/Encoding /"+p.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},Hi=function(){for(var p in Gt)Gt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&Cn(Gt[p])},_i=function(p){p.objectNumber=_r();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[T(p.x),T(p.y),T(p.x+p.width),T(p.y+p.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var ae=p.pages[1].join(`
`);kn({data:ae,additionalKeyValues:I,objectId:p.objectNumber}),ue("endobj")},fr=function(){for(var p in Ot)Ot.hasOwnProperty(p)&&_i(Ot[p])},Yn=function(p,I){var ae,pe=[],Fe=1/(I-1);for(ae=0;ae<1;ae+=Fe)pe.push(ae);if(pe.push(1),p[0].offset!=0){var We={offset:0,color:p[0].color};p.unshift(We)}if(p[p.length-1].offset!=1){var tt={offset:1,color:p[p.length-1].color};p.push(tt)}for(var yt="",Lt=0,zt=0;zt<pe.length;zt++){for(ae=pe[zt];ae>p[Lt+1].offset;)Lt++;var Ut=p[Lt].offset,Xt=(ae-Ut)/(p[Lt+1].offset-Ut),xr=p[Lt].color,wr=p[Lt+1].color;yt+=ie(Math.round((1-Xt)*xr[0]+Xt*wr[0]).toString(16))+ie(Math.round((1-Xt)*xr[1]+Xt*wr[1]).toString(16))+ie(Math.round((1-Xt)*xr[2]+Xt*wr[2]).toString(16))}return yt.trim()},Mn=function(p,I){I||(I=21);var ae=_r(),pe=Yn(p.colors,I),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+I+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kn({data:pe,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),ue("endobj"),p.objectNumber=_r(),ue("<< /ShadingType "+p.type),ue("/ColorSpace /DeviceRGB");var We="/Coords ["+T(parseFloat(p.coords[0]))+" "+T(parseFloat(p.coords[1]))+" ";p.type===2?We+=T(parseFloat(p.coords[2]))+" "+T(parseFloat(p.coords[3])):We+=T(parseFloat(p.coords[2]))+" "+T(parseFloat(p.coords[3]))+" "+T(parseFloat(p.coords[4]))+" "+T(parseFloat(p.coords[5])),ue(We+="]"),p.matrix&&ue("/Matrix ["+p.matrix.toString()+"]"),ue("/Function "+ae+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},xs=function(p,I){var ae=br(),pe=_r();I.push({resourcesOid:ae,objectOid:pe}),p.objectNumber=pe;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+p.boundingBox.map(T).join(" ")+"]"}),Fe.push({key:"XStep",value:T(p.xStep)}),Fe.push({key:"YStep",value:T(p.yStep)}),Fe.push({key:"Resources",value:ae+" 0 R"}),p.matrix&&Fe.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),kn({data:p.stream,additionalKeyValues:Fe,objectId:p.objectNumber}),ue("endobj")},Rn=function(p){var I;for(I in Kt)Kt.hasOwnProperty(I)&&(Kt[I]instanceof Ba?Mn(Kt[I]):Kt[I]instanceof hs&&xs(Kt[I],p))},Wi=function(p){for(var I in p.objectNumber=_r(),ue("<<"),p)switch(I){case"opacity":ue("/ca "+se(p[I]));break;case"stroke-opacity":ue("/CA "+se(p[I]))}ue(">>"),ue("endobj")},Va=function(){var p;for(p in nt)nt.hasOwnProperty(p)&&Wi(nt[p])},Ki=function(){for(var p in ue("/XObject <<"),Ot)Ot.hasOwnProperty(p)&&Ot[p].objectNumber>=0&&ue("/"+p+" "+Ot[p].objectNumber+" 0 R");Ce.publish("putXobjectDict"),ue(">>")},ii=function(){Yr.oid=_r(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Yr.v),ue("/R "+Yr.r),ue("/U <"+Yr.toHexString(Yr.U)+">"),ue("/O <"+Yr.toHexString(Yr.O)+">"),ue("/P "+Yr.P),ue(">>"),ue("endobj")},$a=function(){for(var p in ue("/Font <<"),Gt)Gt.hasOwnProperty(p)&&(b===!1||b===!0&&w.hasOwnProperty(p))&&ue("/"+p+" "+Gt[p].objectNumber+" 0 R");ue(">>")},va=function(){if(Object.keys(Kt).length>0){for(var p in ue("/Shading <<"),Kt)Kt.hasOwnProperty(p)&&Kt[p]instanceof Ba&&Kt[p].objectNumber>=0&&ue("/"+p+" "+Kt[p].objectNumber+" 0 R");Ce.publish("putShadingPatternDict"),ue(">>")}},Vi=function(p){if(Object.keys(Kt).length>0){for(var I in ue("/Pattern <<"),Kt)Kt.hasOwnProperty(I)&&Kt[I]instanceof m.TilingPattern&&Kt[I].objectNumber>=0&&Kt[I].objectNumber<p&&ue("/"+I+" "+Kt[I].objectNumber+" 0 R");Ce.publish("putTilingPatternDict"),ue(">>")}},Yt=function(){if(Object.keys(nt).length>0){var p;for(p in ue("/ExtGState <<"),nt)nt.hasOwnProperty(p)&&nt[p].objectNumber>=0&&ue("/"+p+" "+nt[p].objectNumber+" 0 R");Ce.publish("putGStateDict"),ue(">>")}},Sr=function(p){rn(p.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$a(),va(),Vi(p.objectOid),Yt(),Ki(),ue(">>"),ue("endobj")},Ga=function(){var p=[];Hi(),Va(),fr(),Rn(p),Ce.publish("putResources"),p.forEach(Sr),Sr({resourcesOid:Hr,objectOid:Number.MAX_SAFE_INTEGER}),Ce.publish("postPutResources")},Ya=function(){Ce.publish("putAdditionalObjects");for(var p=0;p<$e.length;p++){var I=$e[p];rn(I.objId,!0),ue(I.content),ue("endobj")}Ce.publish("postPutAdditionalObjects")},lr=function(p){ct[p.fontName]=ct[p.fontName]||{},ct[p.fontName][p.fontStyle]=p.id},ai=function(p,I,ae,pe,Fe){var We={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:p,fontName:I,fontStyle:ae,encoding:pe,isStandardFont:Fe||!1,metadata:{}};return Ce.publish("addFont",{font:We,instance:this}),Gt[We.id]=We,lr(We),We.id},$i=function(p){for(var I=0,ae=rt.length;I<ae;I++){var pe=ai.call(this,p[I][0],p[I][1],p[I][2],rt[I][3],!0);b===!1&&(w[pe]=!0);var Fe=p[I][0].split("-");lr({id:pe,fontName:Fe[0],fontStyle:Fe[1]||""})}Ce.publish("addFonts",{fonts:Gt,dictionary:ct})},an=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(pe){var I=pe.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var ae="Error in function "+I.split(`
`)[0].split("<")[0]+": "+pe.message;if(!qt.console)throw new Error(ae);qt.console.error(ae,pe),qt.alert&&alert(ae)}},p.foo.bar=p,p.foo},Pi=function(p,I){var ae,pe,Fe,We,tt,yt,Lt,zt,Ut;if(Fe=(I=I||{}).sourceEncoding||"Unicode",tt=I.outputEncoding,(I.autoencode||tt)&&Gt[Bt].metadata&&Gt[Bt].metadata[Fe]&&Gt[Bt].metadata[Fe].encoding&&(We=Gt[Bt].metadata[Fe].encoding,!tt&&Gt[Bt].encoding&&(tt=Gt[Bt].encoding),!tt&&We.codePages&&(tt=We.codePages[0]),typeof tt=="string"&&(tt=We[tt]),tt)){for(Lt=!1,yt=[],ae=0,pe=p.length;ae<pe;ae++)(zt=tt[p.charCodeAt(ae)])?yt.push(String.fromCharCode(zt)):yt.push(p[ae]),yt[ae].charCodeAt(0)>>8&&(Lt=!0);p=yt.join("")}for(ae=p.length;Lt===void 0&&ae!==0;)p.charCodeAt(ae-1)>>8&&(Lt=!0),ae--;if(!Lt)return p;for(yt=I.noBOM?[]:[254,255],ae=0,pe=p.length;ae<pe;ae++){if((Ut=(zt=p.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yt.push(Ut),yt.push(zt-(Ut<<8))}return String.fromCharCode.apply(void 0,yt)},sn=m.__private__.pdfEscape=m.pdfEscape=function(p,I){return Pi(p,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Li=m.__private__.beginPage=function(p){Xe[++cr]=[],Rt[cr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},Qa(cr),qe(Xe[W])},Ja=function(p,I){var ae,pe,Fe;switch(t=I||t,typeof p=="string"&&(ae=P(p.toLowerCase()),Array.isArray(ae)&&(pe=ae[0],Fe=ae[1])),Array.isArray(p)&&(pe=p[0]*lt,Fe=p[1]*lt),isNaN(pe)&&(pe=a[0],Fe=a[1]),(pe>14400||Fe>14400)&&(gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Fe=Math.min(14400,Fe)),a=[pe,Fe],t.substr(0,1)){case"l":Fe>pe&&(a=[Fe,pe]);break;case"p":pe>Fe&&(a=[Fe,pe])}Li(a),ra(ts),ue(pn),na!==0&&ue(na+" J"),ia!==0&&ue(ia+" j"),Ce.publish("addPage",{pageNumber:cr})},ya=function(p){p>0&&p<=cr&&(Xe.splice(p,1),Rt.splice(p,1),cr--,W>cr&&(W=cr),this.setPage(W))},Qa=function(p){p>0&&p<=cr&&(W=p)},Gi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Xe.length-1},Xa=function(p,I,ae){var pe,Fe=void 0;return ae=ae||{},p=p!==void 0?p:Gt[Bt].fontName,I=I!==void 0?I:Gt[Bt].fontStyle,pe=p.toLowerCase(),ct[pe]!==void 0&&ct[pe][I]!==void 0?Fe=ct[pe][I]:ct[p]!==void 0&&ct[p][I]!==void 0?Fe=ct[p][I]:ae.disableWarning===!1&&gr.warn("Unable to look up font label for font '"+p+"', '"+I+"'. Refer to getFontList() for available fonts."),Fe||ae.noFallback||(Fe=ct.times[I])==null&&(Fe=ct.times.normal),Fe},Ws=m.__private__.putInfo=function(){var p=_r(),I=function(pe){return pe};for(var ae in x!==null&&(I=Yr.encryptor(p,0)),ue("<<"),ue("/Producer ("+sn(I("jsPDF "+Et.version))+")"),Nt)Nt.hasOwnProperty(ae)&&Nt[ae]&&ue("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+sn(I(Nt[ae]))+")");ue("/CreationDate ("+sn(I(fe))+")"),ue(">>"),ue("endobj")},Qt=m.__private__.putCatalog=function(p){var I=(p=p||{}).rootDictionaryObjId||ni;switch(_r(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+I+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+de;ae.substr(ae.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+se(de)+"]")}switch(et||(et="continuous"),et){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Ke&&ue("/PageMode /"+Ke),Ce.publish("putCatalog"),ue(">>"),ue("endobj")},Za=m.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(oe+1)),ue("/Root "+oe+" 0 R"),ue("/Info "+(oe-1)+" 0 R"),x!==null&&ue("/Encrypt "+Yr.oid+" 0 R"),ue("/ID [ <"+Y+"> <"+Y+"> ]"),ue(">>")},Ks=m.__private__.putHeader=function(){ue("%PDF-"+_),ue("%")},Vs=m.__private__.putXRef=function(){var p="0000000000";ue("xref"),ue("0 "+(oe+1)),ue("0000000000 65535 f ");for(var I=1;I<=oe;I++)typeof Pe[I]=="function"?ue((p+Pe[I]()).slice(-10)+" 00000 n "):Pe[I]!==void 0?ue((p+Pe[I]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Pr=m.__private__.buildDocument=function(){Ct(),qe(De),Ce.publish("buildDocument"),Ks(),ji(),Ya(),Ga(),x!==null&&ii(),Ws(),Qt();var p=me;return Vs(),Za(),ue("startxref"),ue(""+p),ue("%%EOF"),qe(Xe[W]),De.join(`
`)},qn=m.__private__.getBlob=function(p){return new Blob([ht(p)],{type:"application/pdf"})},si=m.output=m.__private__.output=an(function(p,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",p){case void 0:return Pr();case"save":m.save(I.filename);break;case"arraybuffer":return ht(Pr());case"blob":return qn(Pr());case"bloburi":case"bloburl":if(qt.URL!==void 0&&typeof qt.URL.createObjectURL=="function")return qt.URL&&qt.URL.createObjectURL(qn(Pr()))||void 0;gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",pe=Pr();try{ae=ac(pe)}catch{ae=ac(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+I.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Fe=I.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",yt=qt.open();return yt!==null&&yt.document.write(tt),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',zt=qt.open();if(zt!==null){zt.document.write(Lt);var Ut=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=I.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',xr=qt.open();if(xr!==null&&(xr.document.write(Xt),xr.document.title=I.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return qt.document.location.href=this.output("datauristring",I);default:return null}}),Bn=function(p){return Array.isArray(bt)===!0&&bt.indexOf(p)>-1};switch(n){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=Bn("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);lt=n}var Yr=null;Oe(),ne();var ws=function(p){return x!==null?Yr.encryptor(p,0):function(I){return I}},Lr=m.__private__.getPageInfo=m.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[p].objId,pageNumber:p,pageContext:Rt[p]}},Dt=m.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Rt)if(Rt[I].objId===p)break;return Lr(I)},Yi=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rt[W].objId,pageNumber:W,pageContext:Rt[W]}};m.addPage=function(){return Ja.apply(this,arguments),this},m.setPage=function(){return Qa.apply(this,arguments),qe.call(this,Xe[W]),this},m.insertPage=function(p){return this.addPage(),this.movePage(W,p),this},m.movePage=function(p,I){var ae,pe;if(p>I){ae=Xe[p],pe=Rt[p];for(var Fe=p;Fe>I;Fe--)Xe[Fe]=Xe[Fe-1],Rt[Fe]=Rt[Fe-1];Xe[I]=ae,Rt[I]=pe,this.setPage(I)}else if(p<I){ae=Xe[p],pe=Rt[p];for(var We=p;We<I;We++)Xe[We]=Xe[We+1],Rt[We]=Rt[We+1];Xe[I]=ae,Rt[I]=pe,this.setPage(I)}return this},m.deletePage=function(){return ya.apply(this,arguments),this},m.__private__.text=m.text=function(p,I,ae,pe,Fe){var We,tt,yt,Lt,zt,Ut,Xt,xr,wr,Dr=(pe=pe||{}).scope||this;if(typeof p=="number"&&typeof I=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Jr=ae;ae=I,I=p,p=Jr}if(arguments[3]instanceof At?(U("The transform parameter of text() with a Matrix value"),wr=Fe):(yt=arguments[4],Lt=arguments[5],yr(Xt=arguments[3])==="object"&&Xt!==null||(typeof yt=="string"&&(Lt=yt,yt=null),typeof Xt=="string"&&(Lt=Xt,Xt=null),typeof Xt=="number"&&(yt=Xt,Xt=null),pe={flags:Xt,angle:yt,align:Lt})),isNaN(I)||isNaN(ae)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Dr;var Mr="",Wn=!1,mn=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:ta,Dn=Dr.internal.scaleFactor;function ns(wt){return wt=wt.split("	").join(Array(pe.TabLen||9).join(" ")),sn(wt,Xt)}function Sa(wt){for(var St,kt=wt.concat(),nr=[],It=kt.length;It--;)typeof(St=kt.shift())=="string"?nr.push(St):Array.isArray(wt)&&(St.length===1||St[1]===void 0&&St[2]===void 0)?nr.push(St[0]):nr.push([St[0],St[1],St[2]]);return nr}function is(wt,St){var kt;if(typeof wt=="string")kt=St(wt)[0];else if(Array.isArray(wt)){for(var nr,It,Or=wt.concat(),kr=[],ca=Or.length;ca--;)typeof(nr=Or.shift())=="string"?kr.push(St(nr)[0]):Array.isArray(nr)&&typeof nr[0]=="string"&&(It=St(nr[0],nr[1],nr[2]),kr.push([It[0],It[1],It[2]]));kt=kr}return kt}var ja=!1,as=!0;if(typeof p=="string")ja=!0;else if(Array.isArray(p)){var Ei=p.concat();tt=[];for(var gn,Jt=Ei.length;Jt--;)(typeof(gn=Ei.shift())!="string"||Array.isArray(gn)&&typeof gn[0]!="string")&&(as=!1);ja=as}if(ja===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var di=X/Dr.internal.scaleFactor,Qr=di*(mn-1);switch(pe.baseline){case"bottom":ae-=Qr;break;case"top":ae+=di-Qr;break;case"hanging":ae+=di-2*Qr;break;case"middle":ae+=di/2-Qr}if((Ut=pe.maxWidth||0)>0&&(typeof p=="string"?p=Dr.splitTextToSize(p,Ut):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(wt,St){return wt.concat(Dr.splitTextToSize(St,Ut))},[]))),We={text:p,x:I,y:ae,options:pe,mutex:{pdfEscape:sn,activeFontKey:Bt,fonts:Gt,activeFontSize:X}},Ce.publish("preProcessText",We),p=We.text,yt=(pe=We.options).angle,!(wr instanceof At)&&yt&&typeof yt=="number"){yt*=Math.PI/180,pe.rotationDirection===0&&(yt=-yt),C===j.ADVANCED&&(yt=-yt);var _a=Math.cos(yt),sa=Math.sin(yt);wr=new At(_a,sa,-sa,_a,0,0)}else yt&&yt instanceof At&&(wr=yt);C!==j.ADVANCED||wr||(wr=$t),(zt=pe.charSpace||xa)!==void 0&&(Mr+=T(A(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=pe.horizontalScale)!==void 0&&(Mr+=T(100*xr)+` Tz
`),pe.lang;var un=-1,hi=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,oa=Dr.internal.getCurrentPageInfo().pageContext;switch(hi){case 0:case!1:case"fill":un=0;break;case 1:case!0:case"stroke":un=1;break;case 2:case"fillThenStroke":un=2;break;case 3:case"invisible":un=3;break;case 4:case"fillAndAddForClipping":un=4;break;case 5:case"strokeAndAddPathForClipping":un=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":un=6;break;case 7:case"addToPathForClipping":un=7}var fi=oa.usedRenderingMode!==void 0?oa.usedRenderingMode:-1;un!==-1?Mr+=un+` Tr
`:fi!==-1&&(Mr+=`0 Tr
`),un!==-1&&(oa.usedRenderingMode=un),Lt=pe.align||"left";var Rr,la=X*mn,o=Dr.internal.pageSize.getWidth(),f=Gt[Bt];zt=pe.charSpace||xa,Ut=pe.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var v=[],S=function(wt){return Dr.getStringUnitWidth(wt,{font:f,charSpace:zt,fontSize:X,doKerning:!1})*X/Dn};if(Object.prototype.toString.call(p)==="[object Array]"){var k;tt=Sa(p),Lt!=="left"&&(Rr=tt.map(S));var q,Z=0;if(Lt==="right"){I-=Rr[0],p=[],Jt=tt.length;for(var le=0;le<Jt;le++)le===0?(q=Jn(I),k=zn(ae)):(q=A(Z-Rr[le]),k=-la),p.push([tt[le],q,k]),Z=Rr[le]}else if(Lt==="center"){I-=Rr[0]/2,p=[],Jt=tt.length;for(var ve=0;ve<Jt;ve++)ve===0?(q=Jn(I),k=zn(ae)):(q=A((Z-Rr[ve])/2),k=-la),p.push([tt[ve],q,k]),Z=Rr[ve]}else if(Lt==="left"){p=[],Jt=tt.length;for(var we=0;we<Jt;we++)p.push(tt[we])}else if(Lt==="justify"&&f.encoding==="Identity-H"){p=[],Jt=tt.length,Ut=Ut!==0?Ut:o;for(var je=0,ce=0;ce<Jt;ce++)if(k=ce===0?zn(ae):-la,q=ce===0?Jn(I):je,ce<Jt-1){var ke=A((Ut-Rr[ce])/(tt[ce].split(" ").length-1)),ge=tt[ce].split(" ");p.push([ge[0]+" ",q,k]),je=0;for(var Ne=1;Ne<ge.length;Ne++){var Le=(S(ge[Ne-1]+" "+ge[Ne])-S(ge[Ne]))*Dn+ke;Ne==ge.length-1?p.push([ge[Ne],Le,0]):p.push([ge[Ne]+" ",Le,0]),je-=Le}}else p.push([tt[ce],q,k]);p.push(["",je,0])}else{if(Lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Jt=tt.length,Ut=Ut!==0?Ut:o,ce=0;ce<Jt;ce++)k=ce===0?zn(ae):-la,q=ce===0?Jn(I):0,ce<Jt-1?v.push(T(A((Ut-Rr[ce])/(tt[ce].split(" ").length-1)))):v.push(0),p.push([tt[ce],q,k])}}var Ae=typeof pe.R2L=="boolean"?pe.R2L:Be;Ae===!0&&(p=is(p,function(wt,St,kt){return[wt.split("").reverse().join(""),St,kt]})),We={text:p,x:I,y:ae,options:pe,mutex:{pdfEscape:sn,activeFontKey:Bt,fonts:Gt,activeFontSize:X}},Ce.publish("postProcessText",We),p=We.text,Wn=We.mutex.isHex||!1;var Te=Gt[Bt].encoding;Te!=="WinAnsiEncoding"&&Te!=="StandardEncoding"||(p=is(p,function(wt,St,kt){return[ns(wt),St,kt]})),tt=Sa(p),p=[];for(var Me,Re,Ve,it=0,ut=1,at=Array.isArray(tt[0])?ut:it,st="",ft=function(wt,St,kt){var nr="";return kt instanceof At?(kt=typeof pe.angle=="number"?ar(kt,new At(1,0,0,1,wt,St)):ar(new At(1,0,0,1,wt,St),kt),C===j.ADVANCED&&(kt=ar(new At(1,0,0,-1,0,0),kt)),nr=kt.join(" ")+` Tm
`):nr=T(wt)+" "+T(St)+` Td
`,nr},ot=0;ot<tt.length;ot++){switch(st="",at){case ut:Ve=(Wn?"<":"(")+tt[ot][0]+(Wn?">":")"),Me=parseFloat(tt[ot][1]),Re=parseFloat(tt[ot][2]);break;case it:Ve=(Wn?"<":"(")+tt[ot]+(Wn?">":")"),Me=Jn(I),Re=zn(ae)}v!==void 0&&v[ot]!==void 0&&(st=v[ot]+` Tw
`),ot===0?p.push(st+ft(Me,Re,wr)+Ve):at===it?p.push(st+Ve):at===ut&&p.push(st+ft(Me,Re,wr)+Ve)}p=at===it?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var pt=`BT
/`;return pt+=Bt+" "+X+` Tf
`,pt+=T(X*mn)+` TL
`,pt+=Qn+`
`,pt+=Mr,pt+=p,ue(pt+="ET"),w[Bt]=!0,Dr};var Ji=m.__private__.clip=m.clip=function(p){return ue(p==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ji("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ue("n"),this};var Fn=m.__private__.isValidStyle=function(p){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(I=!0),I};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(p){return Fn(p)&&(y=p),this};var Un=m.__private__.getStyle=m.getStyle=function(p){var I=y;switch(p){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=p}return I},Ns=m.close=function(){return ue("h"),this};m.stroke=function(){return ue("S"),this},m.fill=function(p){return cn("f",p),this},m.fillEvenOdd=function(p){return cn("f*",p),this},m.fillStroke=function(p){return cn("B",p),this},m.fillStrokeEvenOdd=function(p){return cn("B*",p),this};var cn=function(p,I){yr(I)==="object"?es(I,p):ue(p)},Qi=function(p){p===null||C===j.ADVANCED&&p===void 0||(p=Un(p),ue(p))};function As(p,I,ae,pe,Fe){var We=new hs(I||this.boundingBox,ae||this.xStep,pe||this.yStep,this.gState,Fe||this.matrix);We.stream=this.stream;var tt=p+"$$"+this.cloneIndex+++"$$";return tr(tt,We),We}var es=function(p,I){var ae=Ln[p.key],pe=Kt[ae];if(pe instanceof Ba)ue("q"),ue(Xi(I)),pe.gState&&m.setGState(pe.gState),ue(p.matrix.toString()+" cm"),ue("/"+ae+" sh"),ue("Q");else if(pe instanceof hs){var Fe=new At(1,0,0,-1,0,Hn());p.matrix&&(Fe=Fe.multiply(p.matrix||$t),ae=As.call(pe,p.key,p.boundingBox,p.xStep,p.yStep,Fe).id),ue("q"),ue("/Pattern cs"),ue("/"+ae+" scn"),pe.gState&&m.setGState(pe.gState),ue(I),ue("Q")}},Xi=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zi=m.moveTo=function(p,I){return ue(T(A(p))+" "+T(V(I))+" m"),this},ki=m.lineTo=function(p,I){return ue(T(A(p))+" "+T(V(I))+" l"),this},Ci=m.curveTo=function(p,I,ae,pe,Fe,We){return ue([T(A(p)),T(V(I)),T(A(ae)),T(V(pe)),T(A(Fe)),T(V(We)),"c"].join(" ")),this};m.__private__.line=m.line=function(p,I,ae,pe,Fe){if(isNaN(p)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Fn(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return C===j.COMPAT?this.lines([[ae-p,pe-I]],p,I,[1,1],Fe||"S"):this.lines([[ae-p,pe-I]],p,I,[1,1]).stroke()},m.__private__.lines=m.lines=function(p,I,ae,pe,Fe,We){var tt,yt,Lt,zt,Ut,Xt,xr,wr,Dr,Jr,Mr,Wn;if(typeof p=="number"&&(Wn=ae,ae=I,I=p,p=Wn),pe=pe||[1,1],We=We||!1,isNaN(I)||isNaN(ae)||!Array.isArray(p)||!Array.isArray(pe)||!Fn(Fe)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zi(I,ae),tt=pe[0],yt=pe[1],zt=p.length,Jr=I,Mr=ae,Lt=0;Lt<zt;Lt++)(Ut=p[Lt]).length===2?(Jr=Ut[0]*tt+Jr,Mr=Ut[1]*yt+Mr,ki(Jr,Mr)):(Xt=Ut[0]*tt+Jr,xr=Ut[1]*yt+Mr,wr=Ut[2]*tt+Jr,Dr=Ut[3]*yt+Mr,Jr=Ut[4]*tt+Jr,Mr=Ut[5]*yt+Mr,Ci(Xt,xr,wr,Dr,Jr,Mr));return We&&Ns(),Qi(Fe),this},m.path=function(p){for(var I=0;I<p.length;I++){var ae=p[I],pe=ae.c;switch(ae.op){case"m":Zi(pe[0],pe[1]);break;case"l":ki(pe[0],pe[1]);break;case"c":Ci.apply(this,pe);break;case"h":Ns()}}return this},m.__private__.rect=m.rect=function(p,I,ae,pe,Fe){if(isNaN(p)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Fn(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return C===j.COMPAT&&(pe=-pe),ue([T(A(p)),T(V(I)),T(A(ae)),T(A(pe)),"re"].join(" ")),Qi(Fe),this},m.__private__.triangle=m.triangle=function(p,I,ae,pe,Fe,We,tt){if(isNaN(p)||isNaN(I)||isNaN(ae)||isNaN(pe)||isNaN(Fe)||isNaN(We)||!Fn(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-p,pe-I],[Fe-ae,We-pe],[p-Fe,I-We]],p,I,[1,1],tt,!0),this},m.__private__.roundedRect=m.roundedRect=function(p,I,ae,pe,Fe,We,tt){if(isNaN(p)||isNaN(I)||isNaN(ae)||isNaN(pe)||isNaN(Fe)||isNaN(We)||!Fn(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*ae),We=Math.min(We,.5*pe),this.lines([[ae-2*Fe,0],[Fe*yt,0,Fe,We-We*yt,Fe,We],[0,pe-2*We],[0,We*yt,-Fe*yt,We,-Fe,We],[2*Fe-ae,0],[-Fe*yt,0,-Fe,-We*yt,-Fe,-We],[0,2*We-pe],[0,-We*yt,Fe*yt,-We,Fe,-We]],p+Fe,I,[1,1],tt,!0),this},m.__private__.ellipse=m.ellipse=function(p,I,ae,pe,Fe){if(isNaN(p)||isNaN(I)||isNaN(ae)||isNaN(pe)||!Fn(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*ae,tt=4/3*(Math.SQRT2-1)*pe;return Zi(p+ae,I),Ci(p+ae,I-tt,p+We,I-pe,p,I-pe),Ci(p-We,I-pe,p-ae,I-tt,p-ae,I),Ci(p-ae,I+tt,p-We,I+pe,p,I+pe),Ci(p+We,I+pe,p+ae,I+tt,p+ae,I),Qi(Fe),this},m.__private__.circle=m.circle=function(p,I,ae,pe){if(isNaN(p)||isNaN(I)||isNaN(ae)||!Fn(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,I,ae,ae,pe)},m.setFont=function(p,I,ae){return ae&&(I=ee(I,ae)),Bt=Xa(p,I,{disableWarning:!1}),this};var ea=m.__private__.getFont=m.getFont=function(){return Gt[Xa.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var p,I,ae={};for(p in ct)if(ct.hasOwnProperty(p))for(I in ae[p]=[],ct[p])ct[p].hasOwnProperty(I)&&ae[p].push(I);return ae},m.addFont=function(p,I,ae,pe,Fe){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(ae=ee(ae,pe)),Fe=Fe||"Identity-H",ai.call(this,p,I,ae,Fe)};var ta,ts=r.lineWidth||.200025,oi=m.__private__.getLineWidth=m.getLineWidth=function(){return ts},ra=m.__private__.setLineWidth=m.setLineWidth=function(p){return ts=p,ue(T(A(p))+" w"),this};m.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(p,I){if(p=p||[],I=I||0,isNaN(I)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(ae){return T(A(ae))}).join(" "),I=T(A(I)),ue("["+p+"] "+I+" d"),this};var ba=m.__private__.getLineHeight=m.getLineHeight=function(){return X*ta};m.__private__.getLineHeight=m.getLineHeight=function(){return X*ta};var Ss=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(ta=p),this},js=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ta};Ss(r.lineHeight);var Jn=m.__private__.getHorizontalCoordinate=function(p){return A(p)},zn=m.__private__.getVerticalCoordinate=function(p){return C===j.ADVANCED?p:Rt[W].mediaBox.topRightY-Rt[W].mediaBox.bottomLeftY-A(p)},rs=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(p){return T(Jn(p))},li=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(p){return T(zn(p))},pn=r.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return nn(pn)},m.__private__.setStrokeColor=m.setDrawColor=function(p,I,ae,pe){return pn=Wr({ch1:p,ch2:I,ch3:ae,ch4:pe,pdfColorType:"draw",precision:2}),ue(pn),this};var Fi=r.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return nn(Fi)},m.__private__.setFillColor=m.setFillColor=function(p,I,ae,pe){return Fi=Wr({ch1:p,ch2:I,ch3:ae,ch4:pe,pdfColorType:"fill",precision:2}),ue(Fi),this};var Qn=r.textColor||"0 g",_s=m.__private__.getTextColor=m.getTextColor=function(){return nn(Qn)};m.__private__.setTextColor=m.setTextColor=function(p,I,ae,pe){return Qn=Wr({ch1:p,ch2:I,ch3:ae,ch4:pe,pdfColorType:"text",precision:3}),this};var xa=r.charSpace,wa=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(xa||0)};m.__private__.setCharSpace=m.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xa=p,this};var na=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(p){var I=m.CapJoinStyles[p];if(I===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return na=I,ue(I+" J"),this};var ia=0;m.__private__.setLineJoin=m.setLineJoin=function(p){var I=m.CapJoinStyles[p];if(I===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ia=I,ue(I+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(T(A(p))+" M"),this},m.GState=vo,m.setGState=function(p){(p=typeof p=="string"?nt[tn[p]]:Na(null,p)).equals(An)||(ue("/"+p.id+" gs"),An=p)};var Na=function(p,I){if(!p||!tn[p]){var ae=!1;for(var pe in nt)if(nt.hasOwnProperty(pe)&&nt[pe].equals(I)){ae=!0;break}if(ae)I=nt[pe];else{var Fe="GS"+(Object.keys(nt).length+1).toString(10);nt[Fe]=I,I.id=Fe}return p&&(tn[p]=I.id),Ce.publish("addGState",I),I}};m.addGState=function(p,I){return Na(p,I),this},m.saveGraphicsState=function(){return ue("q"),Cr.push({key:Bt,size:X,color:Qn}),this},m.restoreGraphicsState=function(){ue("Q");var p=Cr.pop();return Bt=p.key,X=p.size,Qn=p.color,An=null,this},m.setCurrentTransformationMatrix=function(p){return ue(p.toString()+" cm"),this},m.comment=function(p){return ue("#"+p),this};var Di=function(p,I){var ae=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(We){isNaN(We)||(ae=parseFloat(We))}});var pe=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(We){isNaN(We)||(pe=parseFloat(We))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(We){Fe=We.toString()}}),this},Fr=function(p,I,ae,pe){Di.call(this,p,I),this.type="rect";var Fe=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(tt){isNaN(tt)||(Fe=parseFloat(tt))}});var We=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},ci=function(){this.page=cr,this.currentPage=W,this.pages=Xe.slice(0),this.pagesContext=Rt.slice(0),this.x=hr,this.y=Wt,this.matrix=Tr,this.width=Ii(W),this.height=Hn(W),this.outputDestination=dt,this.id="",this.objectNumber=-1};ci.prototype.restore=function(){cr=this.page,W=this.currentPage,Rt=this.pagesContext,Xe=this.pages,hr=this.x,Wt=this.y,Tr=this.matrix,Aa(W,this.width),aa(W,this.height),dt=this.outputDestination};var Oi=function(p,I,ae,pe,Fe){sr.push(new ci),cr=W=0,Xe=[],hr=p,Wt=I,Tr=Fe,Li([ae,pe])},Ps=function(p){if(er[p])sr.pop().restore();else{var I=new ci,ae="Xo"+(Object.keys(Ot).length+1).toString(10);I.id=ae,er[p]=ae,Ot[ae]=I,Ce.publish("addFormObject",I),sr.pop().restore()}};for(var ui in m.beginFormObject=function(p,I,ae,pe,Fe){return Oi(p,I,ae,pe,Fe),this},m.endFormObject=function(p){return Ps(p),this},m.doFormObject=function(p,I){var ae=Ot[er[p]];return ue("q"),ue(I.toString()+" cm"),ue("/"+ae.id+" Do"),ue("Q"),this},m.getFormObject=function(p){var I=Ot[er[p]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},m.save=function(p,I){return p=p||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(ls(qn(Pr()),p),typeof ls.unload=="function"&&qt.setTimeout&&setTimeout(ls.unload,911),this):new Promise(function(ae,pe){try{var Fe=ls(qn(Pr()),p);typeof ls.unload=="function"&&qt.setTimeout&&setTimeout(ls.unload,911),ae(Fe)}catch(We){pe(We.message)}})},Et.API)Et.API.hasOwnProperty(ui)&&(ui==="events"&&Et.API.events.length?function(p,I){var ae,pe,Fe;for(Fe=I.length-1;Fe!==-1;Fe--)ae=I[Fe][0],pe=I[Fe][1],p.subscribe.apply(p,[ae].concat(typeof pe=="function"?[pe]:pe))}(Ce,Et.API.events):m[ui]=Et.API[ui]);var Ii=m.getPageWidth=function(p){return(Rt[p=p||W].mediaBox.topRightX-Rt[p].mediaBox.bottomLeftX)/lt},Aa=m.setPageWidth=function(p,I){Rt[p].mediaBox.topRightX=I*lt+Rt[p].mediaBox.bottomLeftX},Hn=m.getPageHeight=function(p){return(Rt[p=p||W].mediaBox.topRightY-Rt[p].mediaBox.bottomLeftY)/lt},aa=m.setPageHeight=function(p,I){Rt[p].mediaBox.topRightY=I*lt+Rt[p].mediaBox.bottomLeftY};return m.internal={pdfEscape:sn,getStyle:Un,getFont:ea,getFontSize:xe,getCharSpace:wa,getTextColor:_s,getLineHeight:ba,getLineHeightFactor:js,getLineWidth:oi,write:Mt,getHorizontalCoordinate:Jn,getVerticalCoordinate:zn,getCoordinateString:rs,getVerticalCoordinateString:li,collections:{},newObject:_r,newAdditionalObject:ri,newObjectDeferred:br,newObjectDeferredBegin:rn,getFilters:Sn,putStream:kn,events:Ce,scaleFactor:lt,pageSize:{getWidth:function(){return Ii(W)},setWidth:function(p){Aa(W,p)},getHeight:function(){return Hn(W)},setHeight:function(p){aa(W,p)}},encryptionOptions:x,encryption:Yr,getEncryptor:ws,output:si,getNumberOfPages:Gi,pages:Xe,out:ue,f2:se,f3:D,getPageInfo:Lr,getPageInfoByObjId:Dt,getCurrentPageInfo:Yi,getPDFVersion:L,Point:Di,Rectangle:Fr,Matrix:At,hasHotfix:Bn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ii(W)},set:function(p){Aa(W,p)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Hn(W)},set:function(p){aa(W,p)},enumerable:!0,configurable:!0}),$i.call(m,rt),Bt="F1",Ja(a,t),Ce.publish("initialized"),m}Ts.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},Ts.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ts.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Ts.prototype.processOwnerPassword=function(r,e){return oc(sc(e).substr(0,5),r)},Ts.prototype.encryptor=function(r,e){var t=sc(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return oc(t,n)}},vo.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||yr(r)!==yr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Et.API={events:[]},Et.version="2.5.2";var Er=Et.API,Nc=1,bs=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Os=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(r){return r.toFixed(2)},Ta=function(r){return r.toFixed(5)};Er.__acroform__={};var Tn=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},Du=function(r){return r*Nc},Mi=function(r){var e=new Td,t=jt.internal.getHeight(r)||0,n=jt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Ht(n)),Number(Ht(t))],e},h0=Er.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},f0=Er.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},p0=Er.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},qr=Er.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return p0(r,e-1)},Br=Er.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return h0(r,e-1)},Ur=Er.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return f0(r,e-1)},m0=Er.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=r[0],i=r[1],c=r[2],u=r[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=n(i+u)||0,h.upperRight_X=t(a+c)||0,h.upperRight_Y=n(i)||0,[Number(Ht(h.lowerLeft_X)),Number(Ht(h.lowerLeft_Y)),Number(Ht(h.upperRight_X)),Number(Ht(h.upperRight_Y))]},g0=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=lc(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+Ht(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Mi(r);return i.scope=r.scope,i.stream=e.join(`
`),i}},lc=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var i=t,c=jt.internal.getHeight(r)||0;c=c<0?-c:c;var u=jt.internal.getWidth(r)||0;u=u<0?-u:u;var h=function(D,A,M){if(D+1<a.length){var V=A+" "+a[D+1][0];return Bo(V,r,M).width<=u-4}return!1};i++;e:for(;i>0;){e="",i--;var y,x,b=Bo("3",r,i).height,w=r.multiline?c-i:(c-b)/2,m=w+=2,_=0,L=0,O=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bo(e,r,i=12).width+", FieldWidth:"+u+`
`;break}for(var P="",j=0,C=0;C<a.length;C++)if(a.hasOwnProperty(C)){var z=!1;if(a[C].length!==1&&O!==a[C].length-1){if((b+2)*(j+2)+2>c)continue e;P+=a[C][O],z=!0,L=C,C--}else{P=(P+=a[C][O]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var G=parseInt(C),ee=h(G,P,i),T=C>=a.length-1;if(ee&&!T){P+=" ",O=0;continue}if(ee||T){if(T)L=G;else if(r.multiline&&(b+2)*(j+2)+2>c)continue e}else{if(!r.multiline||(b+2)*(j+2)+2>c)continue e;L=G}}for(var U="",te=_;te<=L;te++){var se=a[te];if(r.multiline){if(te===L){U+=se[O]+" ",O=(O+1)%se.length;continue}if(te===_){U+=se[se.length-1]+" ";continue}}U+=se[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,x=Bo(U,r,i).width,r.textAlign){case"right":y=u-x-2;break;case"center":y=(u-x)/2;break;case"left":default:y=2}e+=Ht(y)+" "+Ht(m)+` Td
`,e+="("+bs(U)+`) Tj
`,e+=-Ht(y)+` 0 Td
`,m=-(i+2),x=0,_=z?L:L+1,j++,P=""}break}return n.text=e,n.fontSize=i,n},Bo=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},v0={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},y0=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},b0=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,a=r[t];e.internal.newObjectDeferredBegin(a.objId,!0),yr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete r[n]}},x0=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Ai.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(v0)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Nc=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new Md,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&y0(i,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,a){var i=!n;for(var c in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],h=[],y=u.Rect;if(u.Rect&&(u.Rect=m0(u.Rect,a)),a.internal.newObjectDeferredBegin(u.objId,!0),u.DA=jt.createDefaultAppearanceStream(u),yr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=y,u.hasAppearanceStream&&!u.appearanceStreamContent){var x=g0(u);h.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(u.appearanceStreamContent){var b="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var m=u.appearanceStreamContent[w];if(b+="/"+w+" ",b+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var c in m)if(m.hasOwnProperty(c)){var _=m[c];typeof _=="function"&&(_=_.call(a,u)),b+="/"+c+" "+_+" ",a.internal.acroformPlugin.xForms.indexOf(_)>=0||a.internal.acroformPlugin.xForms.push(_)}}else typeof(_=m)=="function"&&(_=_.call(a,u)),b+="/"+c+" "+_,a.internal.acroformPlugin.xForms.indexOf(_)>=0||a.internal.acroformPlugin.xForms.push(_);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:u.objId}),a.internal.out("endobj")}i&&b0(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},Ed=Er.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(c){return c};if(Array.isArray(r)){for(var a="[",i=0;i<r.length;i++)switch(i!==0&&(a+=" "),yr(r[i])){case"boolean":case"number":case"object":a+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),a+="("+bs(n(r[i].toString()))+")"):a+=r[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ul=function(r,e,t){var n=function(a){return a};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+bs(n(r))+")"},Bi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bi.prototype.toString=function(){return this.objId+" 0 R"},Bi.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Bi.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],a=this[n];a&&(Array.isArray(a)?r.push({key:n,value:Ed(a,this.objId,this.scope)}):a instanceof Bi?(a.scope=this.scope,r.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:n,value:a}))}return r};var Td=function(){Bi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Tn(Td,Bi);var Md=function(){Bi.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+bs(t(r))+")"}},set:function(t){r=t}})};Tn(Md,Bi);var Ai=function r(){Bi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qr(e,3)},set:function(P){P?this.F=Br(e,3):this.F=Ur(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(P){n=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(P){n[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(P){n[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(P){n[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(P){n[3]=P}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof il)return;i="FieldObject"+r.FieldNum++}var P=function(j){return j};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+bs(P(i))+")"},set:function(P){i=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(P){i=P}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(P){u=P}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(P){h=P}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Nc:y},set:function(P){y=P}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(P){x=P}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof il||this instanceof Ha))return Ul(b,this.objId,this.scope)},set:function(P){P=P.toString(),b=P}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof en?w:Ul(w,this.objId,this.scope)},set:function(P){P=P.toString(),w=this instanceof en?P:P.substr(0,1)==="("?Os(P.substr(1,P.length-2)):Os(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof en?Os(w.substr(1,w.length-1)):w},set:function(P){P=P.toString(),w=this instanceof en?"/"+P:P}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof en?m:Ul(m,this.objId,this.scope)},set:function(P){P=P.toString(),m=this instanceof en?P:P.substr(0,1)==="("?Os(P.substr(1,P.length-2)):Os(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof en?Os(m.substr(1,m.length-1)):m},set:function(P){P=P.toString(),m=this instanceof en?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,L=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return L},set:function(P){P=!!P,L=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(P){_=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,1)},set:function(P){P?this.Ff=Br(this.Ff,1):this.Ff=Ur(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,2)},set:function(P){P?this.Ff=Br(this.Ff,2):this.Ff=Ur(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,3)},set:function(P){P?this.Ff=Br(this.Ff,3):this.Ff=Ur(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');O=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(O){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:O=2;break;case"center":case 1:O=1;break;case"left":case 0:default:O=0}}})};Tn(Ai,Bi);var ms=function(){Ai.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ed(e,this.objId,this.scope)},set:function(t){var n,a;a=[],typeof(n=t)=="string"&&(a=function(i,c,u){u||(u=1);for(var h,y=[];h=c.exec(i);)y.push(h[u]);return y}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,18)},set:function(t){t?this.Ff=Br(this.Ff,18):this.Ff=Ur(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Br(this.Ff,19):this.Ff=Ur(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,20)},set:function(t){t?(this.Ff=Br(this.Ff,20),e.sort()):this.Ff=Ur(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,22)},set:function(t){t?this.Ff=Br(this.Ff,22):this.Ff=Ur(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,23)},set:function(t){t?this.Ff=Br(this.Ff,23):this.Ff=Ur(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,27)},set:function(t){t?this.Ff=Br(this.Ff,27):this.Ff=Ur(this.Ff,27)}}),this.hasAppearanceStream=!1};Tn(ms,Ai);var gs=function(){ms.call(this),this.fontName="helvetica",this.combo=!1};Tn(gs,ms);var vs=function(){gs.call(this),this.combo=!0};Tn(vs,gs);var oo=function(){vs.call(this),this.edit=!0};Tn(oo,vs);var en=function(){Ai.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,15)},set:function(t){t?this.Ff=Br(this.Ff,15):this.Ff=Ur(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,16)},set:function(t){t?this.Ff=Br(this.Ff,16):this.Ff=Ur(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,17)},set:function(t){t?this.Ff=Br(this.Ff,17):this.Ff=Ur(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,26)},set:function(t){t?this.Ff=Br(this.Ff,26):this.Ff=Ur(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+bs(t(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){yr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Tn(en,Ai);var lo=function(){en.call(this),this.pushButton=!0};Tn(lo,en);var ys=function(){en.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Tn(ys,en);var il=function(){var r,e;Ai.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(u){return u};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),n)c.push("/"+i+" ("+bs(a(n[i]))+")");return c.push(">>"),c.join(`
`)},set:function(a){yr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Tn(il,Ai),ys.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},ys.prototype.createOption=function(r){var e=new il;return e.Parent=this,e.optionName=r,this.Kids.push(e),w0.call(this.scope,e),e};var co=function(){en.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=jt.CheckBox.createAppearanceStream()};Tn(co,en);var Ha=function(){Ai.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,13)},set:function(e){e?this.Ff=Br(this.Ff,13):this.Ff=Ur(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,21)},set:function(e){e?this.Ff=Br(this.Ff,21):this.Ff=Ur(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,23)},set:function(e){e?this.Ff=Br(this.Ff,23):this.Ff=Ur(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,24)},set:function(e){e?this.Ff=Br(this.Ff,24):this.Ff=Ur(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,25)},set:function(e){e?this.Ff=Br(this.Ff,25):this.Ff=Ur(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,26)},set:function(e){e?this.Ff=Br(this.Ff,26):this.Ff=Ur(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Tn(Ha,Ai);var uo=function(){Ha.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qr(this.Ff,14)},set:function(r){r?this.Ff=Br(this.Ff,14):this.Ff=Ur(this.Ff,14)}}),this.password=!0};Tn(uo,Ha);var jt={CheckBox:{createAppearanceStream:function(){return{N:{On:jt.CheckBox.YesNormal},D:{On:jt.CheckBox.YesPushDown,Off:jt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),i=lc(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Ht(jt.internal.getWidth(r))+" "+Ht(jt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Ht(i.fontSize)+" Tf "+a),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Mi(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),a=[],i=jt.internal.getHeight(r),c=jt.internal.getWidth(r),u=lc(r,r.caption);return a.push("1 g"),a.push("0 0 "+Ht(c)+" "+Ht(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ht(c-1)+" "+Ht(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Ht(u.fontSize)+" Tf "+n),a.push(u.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ht(jt.internal.getWidth(r))+" "+Ht(jt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:jt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=jt.RadioButton.Circle.YesNormal,e.D[r]=jt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Mi(r);e.scope=r.scope;var t=[],n=jt.internal.getWidth(r)<=jt.internal.getHeight(r)?jt.internal.getWidth(r)/4:jt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=jt.internal.Bezier_C,i=Number((n*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ta(jt.internal.getWidth(r)/2)+" "+Ta(jt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),t.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),t.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),t.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=[],n=jt.internal.getWidth(r)<=jt.internal.getHeight(r)?jt.internal.getWidth(r)/4:jt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*jt.internal.Bezier_C).toFixed(5)),c=Number((n*jt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ta(jt.internal.getWidth(r)/2)+" "+Ta(jt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ta(jt.internal.getWidth(r)/2)+" "+Ta(jt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=[],n=jt.internal.getWidth(r)<=jt.internal.getHeight(r)?jt.internal.getWidth(r)/4:jt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*jt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ta(jt.internal.getWidth(r)/2)+" "+Ta(jt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:jt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=jt.RadioButton.Cross.YesNormal,e.D[r]=jt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Mi(r);e.scope=r.scope;var t=[],n=jt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Ht(jt.internal.getWidth(r)-2)+" "+Ht(jt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Ht(n.x1.x)+" "+Ht(n.x1.y)+" m"),t.push(Ht(n.x2.x)+" "+Ht(n.x2.y)+" l"),t.push(Ht(n.x4.x)+" "+Ht(n.x4.y)+" m"),t.push(Ht(n.x3.x)+" "+Ht(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=jt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ht(jt.internal.getWidth(r))+" "+Ht(jt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ht(jt.internal.getWidth(r)-2)+" "+Ht(jt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Ht(t.x1.x)+" "+Ht(t.x1.y)+" m"),n.push(Ht(t.x2.x)+" "+Ht(t.x2.y)+" l"),n.push(Ht(t.x4.x)+" "+Ht(t.x4.y)+" m"),n.push(Ht(t.x3.x)+" "+Ht(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Mi(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ht(jt.internal.getWidth(r))+" "+Ht(jt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};jt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=jt.internal.getWidth(r),t=jt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},jt.internal.getWidth=function(r){var e=0;return yr(r)==="object"&&(e=Du(r.Rect[2])),e},jt.internal.getHeight=function(r){var e=0;return yr(r)==="object"&&(e=Du(r.Rect[3])),e};var w0=Er.addField=function(r){if(x0(this,r),!(r instanceof Ai))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Er.AcroFormChoiceField=ms,Er.AcroFormListBox=gs,Er.AcroFormComboBox=vs,Er.AcroFormEditBox=oo,Er.AcroFormButton=en,Er.AcroFormPushButton=lo,Er.AcroFormRadioButton=ys,Er.AcroFormCheckBox=co,Er.AcroFormTextField=Ha,Er.AcroFormPasswordField=uo,Er.AcroFormAppearance=jt,Er.AcroForm={ChoiceField:ms,ListBox:gs,ComboBox:vs,EditBox:oo,Button:en,PushButton:lo,RadioButton:ys,CheckBox:co,TextField:Ha,PasswordField:uo,Appearance:jt},Et.AcroForm={ChoiceField:ms,ListBox:gs,ComboBox:vs,EditBox:oo,Button:en,PushButton:lo,RadioButton:ys,CheckBox:co,TextField:Ha,PasswordField:uo,Appearance:jt};var N0=Et.AcroForm;function Rd(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(D,A){var M,V,fe,Y,J,ne=e;if((A=A||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(ee(D))for(J in t)for(fe=t[J],M=0;M<fe.length;M+=1){for(Y=!0,V=0;V<fe[M].length;V+=1)if(fe[M][V]!==void 0&&fe[M][V]!==D[V]){Y=!1;break}if(Y===!0){ne=J;break}}else for(J in t)for(fe=t[J],M=0;M<fe.length;M+=1){for(Y=!0,V=0;V<fe[M].length;V+=1)if(fe[M][V]!==void 0&&fe[M][V]!==D.charCodeAt(V)){Y=!1;break}if(Y===!0){ne=J;break}}return ne===e&&A!==e&&(ne=A),ne},a=function D(A){for(var M=this.internal.write,V=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:A.width}),Y.push({key:"Height",value:A.height}),A.colorSpace===O.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===O.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var J="",ne=0,K=A.transparency.length;ne<K;ne++)J+=A.transparency[ne]+" "+A.transparency[ne]+" ";Y.push({key:"Mask",value:"["+J+"]"})}A.sMask!==void 0&&Y.push({key:"SMask",value:A.objectId+1+" 0 R"});var he=A.filter!==void 0?["/"+A.filter]:void 0;if(V({data:A.data,additionalKeyValues:Y,alreadyAppliedFilters:he,objectId:A.objectId}),M("endobj"),"sMask"in A&&A.sMask!==void 0){var Oe="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,F={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:Oe,data:A.sMask};"filter"in A&&(F.filter=A.filter),D.call(this,F)}if(A.colorSpace===O.INDEXED){var W=this.internal.newObject();V({data:U(new Uint8Array(A.palette)),objectId:W}),M("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var A in D)a.call(this,D[A])},c=function(){var D,A=this.internal.collections.addImage_images,M=this.internal.write;for(var V in A)M("/I"+(D=A[V]).index,D.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var D=this.internal.collections.addImage_images;return u.call(this),D},y=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(D){return typeof r["process"+D.toUpperCase()]=="function"},b=function(D){return yr(D)==="object"&&D.nodeType===1},w=function(D,A){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var M=""+D.getAttribute("src");if(M.indexOf("data:image/")===0)return so(unescape(M).split("base64,").pop());var V=r.loadFile(M,!0);if(V!==void 0)return V}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var fe;switch(A){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;case"JPEG":case"JPG":default:fe="image/jpeg"}return so(D.toDataURL(fe,1).split("base64,").pop())}},m=function(D){var A=this.internal.collections.addImage_images;if(A){for(var M in A)if(D===A[M].alias)return A[M]}},_=function(D,A,M){return D||A||(D=-96,A=-96),D<0&&(D=-1*M.width*72/D/this.internal.scaleFactor),A<0&&(A=-1*M.height*72/A/this.internal.scaleFactor),D===0&&(D=A*M.width/M.height),A===0&&(A=D*M.height/M.width),[D,A]},L=function(D,A,M,V,fe,Y){var J=_.call(this,M,V,fe),ne=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,he=h.call(this);if(M=J[0],V=J[1],he[fe.index]=fe,Y){Y*=Math.PI/180;var Oe=Math.cos(Y),F=Math.sin(Y),W=function(ie){return ie.toFixed(4)},Q=[W(Oe),W(F),W(-1*F),W(Oe),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,ne(D),K(A+V),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([ne(M),"0","0",ne(V),"0","0","cm"].join(" "))):this.internal.write([ne(M),"0","0",ne(V),ne(D),K(A+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},O=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=r.__addimage__.sHashCode=function(D){var A,M,V=0;if(typeof D=="string")for(M=D.length,A=0;A<M;A++)V=(V<<5)-V+D.charCodeAt(A),V|=0;else if(ee(D))for(M=D.byteLength/2,A=0;A<M;A++)V=(V<<5)-V+D[A],V|=0;return V},C=r.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var A=!0;return D.length===0&&(A=!1),D.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(A=!1),A},z=r.__addimage__.extractImageFromDataUrl=function(D){var A=(D=D||"").split("base64,"),M=null;if(A.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(V)&&(M={mimeType:V[1],charset:V[2],data:A[1]})}return M},G=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(D){return G()&&D instanceof ArrayBuffer};var ee=r.__addimage__.isArrayBufferView=function(D){return G()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},T=r.__addimage__.binaryStringToUint8Array=function(D){for(var A=D.length,M=new Uint8Array(A),V=0;V<A;V++)M[V]=D.charCodeAt(V);return M},U=r.__addimage__.arrayBufferToBinaryString=function(D){for(var A="",M=ee(D)?D:new Uint8Array(D),V=0;V<M.length;V+=8192)A+=String.fromCharCode.apply(null,M.subarray(V,V+8192));return A};r.addImage=function(){var D,A,M,V,fe,Y,J,ne,K;if(typeof arguments[1]=="number"?(A=e,M=arguments[1],V=arguments[2],fe=arguments[3],Y=arguments[4],J=arguments[5],ne=arguments[6],K=arguments[7]):(A=arguments[1],M=arguments[2],V=arguments[3],fe=arguments[4],Y=arguments[5],J=arguments[6],ne=arguments[7],K=arguments[8]),yr(D=arguments[0])==="object"&&!b(D)&&"imageData"in D){var he=D;D=he.imageData,A=he.format||A||e,M=he.x||M||0,V=he.y||V||0,fe=he.w||he.width||fe,Y=he.h||he.height||Y,J=he.alias||J,ne=he.compression||ne,K=he.rotation||he.angle||K}var Oe=this.internal.getFilters();if(ne===void 0&&Oe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(M)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var F=te.call(this,D,A,J,ne);return L.call(this,M,V,fe,Y,F,K),this};var te=function(D,A,M,V){var fe,Y,J;if(typeof D=="string"&&n(D)===e){D=unescape(D);var ne=se(D,!1);(ne!==""||(ne=r.loadFile(D,!0))!==void 0)&&(D=ne)}if(b(D)&&(D=w(D,A)),A=n(D,A),!x(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((J=M)==null||J.length===0)&&(M=function(K){return typeof K=="string"||ee(K)?j(K):ee(K.data)?j(K.data):null}(D)),(fe=m.call(this,M))||(G()&&(D instanceof Uint8Array||A==="RGBA"||(Y=D,D=T(D))),fe=this["process"+A.toUpperCase()](D,y.call(this),M,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in r.image_compression?K:P.NONE}(V),Y)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},se=r.__addimage__.convertBase64ToBinaryString=function(D,A){var M;A=typeof A!="boolean"||A;var V,fe="";if(typeof D=="string"){V=(M=z(D))!==null?M.data:D;try{fe=so(V)}catch(Y){if(A)throw C(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return fe};r.getImageProperties=function(D){var A,M,V="";if(b(D)&&(D=w(D)),typeof D=="string"&&n(D)===e&&((V=se(D,!1))===""&&(V=r.loadFile(D)||""),D=V),M=n(D),!x(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!G()||D instanceof Uint8Array||(D=T(D)),!(A=this["process"+M.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=M,A}})(Et.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Et.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,a,i,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),y=t.pageContext.annotations,x=!1,b=0;b<y.length&&!x;b++)switch((n=y[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var w=0;w<y.length;w++){n=y[w];var m=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var L=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(L.objId),j=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+m(P(n.contents))+")",i+=" /Popup "+O.objId+" 0 R",i+=" /P "+h.objId+" 0 R",i+=" /T ("+m(P(j))+") >>",L.content=i;var C=L.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(i+=" /Open true"),i+=" >>",O.content=i,this.internal.write(L.objId,"0 R",O.objId,"0 R");break;case"freetext":a="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var z=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(_(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var G=this.annotations._nameMap[n.options.name];n.options.pageNumber=G.page,n.options.top=G.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(_(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ee=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+ee+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,a,i,c){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:y(n),w:h(t+a),h:y(n+i)},options:c,type:"link"})},r.textWithLink=function(t,n,a,i){var c,u,h=this.getTextWidth(t),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var x=this.splitTextToSize(t,u).length;c=Math.ceil(y*x)}else u=h,c=y;return this.text(t,n,a,i),a+=.2*y,i.align==="center"&&(n-=h/2),i.align==="right"&&(n-=h),this.link(n,a-y,u,c,i),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Et.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(L){return e[L.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(L){return typeof L=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(L)},u=r.__arabicParser__.isArabicEndLetter=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(L){return c(L)&&a.indexOf(L.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=1};var y=r.__arabicParser__.arabicLetterHasFinalForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length>=3};var x=r.__arabicParser__.arabicLetterHasMedialForm=function(L){return c(L)&&i(L)&&e[L.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(L){var O=0,P=t,j="",C=0;for(O=0;O<L.length;O+=1)P[L.charCodeAt(O)]!==void 0?(C++,typeof(P=P[L.charCodeAt(O)])=="number"&&(j+=String.fromCharCode(P),P=t,C=0),O===L.length-1&&(P=t,j+=L.charAt(O-(C-1)),O-=C-1,C=0)):(P=t,j+=L.charAt(O-C),O-=C,C=0);return j};r.__arabicParser__.isArabicDiacritic=function(L){return L!==void 0&&n[L.charCodeAt(0)]!==void 0};var w=r.__arabicParser__.getCorrectForm=function(L,O,P){return c(L)?i(L)===!1?-1:!y(L)||!c(O)&&!c(P)||!c(P)&&u(O)||u(L)&&!c(O)||u(L)&&h(O)||u(L)&&u(O)?0:x(L)&&c(O)&&!u(O)&&c(P)&&y(P)?3:u(L)||!c(P)?1:2:-1},m=function(L){var O=0,P=0,j=0,C="",z="",G="",ee=(L=L||"").split("\\s+"),T=[];for(O=0;O<ee.length;O+=1){for(T.push(""),P=0;P<ee[O].length;P+=1)C=ee[O][P],z=ee[O][P-1],G=ee[O][P+1],c(C)?(j=w(C,z,G),T[O]+=j!==-1?String.fromCharCode(e[C.charCodeAt(0)][j]):C):T[O]+=C;T[O]=b(T[O])}return T.join(" ")},_=r.__arabicParser__.processArabic=r.processArabic=function(){var L,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(O)){var j=0;for(P=[],j=0;j<O.length;j+=1)Array.isArray(O[j])?P.push([m(O[j][0]),O[j][1],O[j][2]]):P.push([m(O[j])]);L=P}else L=m(O);return typeof arguments[0]=="string"?L:(arguments[0].text=L,arguments[0])};r.events.push(["preProcessText",_])}(Et.API),Et.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var a;if((t=t||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Et.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(L){h=L}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(L){y=L}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(L){x=L}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(L){b=L}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(L){w=L}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(L){m=L}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(L){_=L}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,y){n.call(this);var x=(y=y||{}).fontSize||this.getFontSize(),b=y.font||this.getFont(),w=y.scaleFactor||this.internal.scaleFactor,m=0,_=0,L=0,O=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var P=y.maxWidth;P>0?typeof h=="string"?h=this.splitTextToSize(h,P):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(C,z){return C.concat(O.splitTextToSize(z,P))},[])):h=Array.isArray(h)?h:[h];for(var j=0;j<h.length;j++)m<(L=this.getStringUnitWidth(h[j],{font:b})*x)&&(m=L);return m!==0&&(_=h.length),{w:m/=w,h:Math.max((_*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/w,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var h;h=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var y=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===h.lineNumber?(h.x=(y.x||0)+(y.width||0),h.y=y.y||0):y.y+y.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,m&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=y.y+y.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-x,h.y+x,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+x,{align:"center",baseline:"top",maxWidth:h.width-x-x}):this.text(h.text,h.x+x,h.y+x,{align:"left",baseline:"top",maxWidth:h.width-x-x})),this.internal.__cell__.lastCell=h,this};r.table=function(h,y,x,b,w){if(n.call(this),!x)throw new Error("No data for PDF table.");var m,_,L,O,P=[],j=[],C=[],z={},G={},ee=[],T=[],U=(w=w||{}).autoSize||!1,te=w.printHeaders!==!1,se=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,D=w.margins||Object.assign({width:this.getPageWidth()},e),A=typeof w.padding=="number"?w.padding:3,M=w.headerBackgroundColor||"#c8c8c8",V=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=te,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=se,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=V,this.setFontSize(se),b==null)j=P=Object.keys(x[0]),C=P.map(function(){return"left"});else if(Array.isArray(b)&&yr(b[0])==="object")for(P=b.map(function(he){return he.name}),j=b.map(function(he){return he.prompt||he.name||""}),C=b.map(function(he){return he.align||"left"}),m=0;m<b.length;m+=1)G[b[m].name]=b[m].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(j=P=b,C=P.map(function(){return"left"}));if(U||Array.isArray(b)&&typeof b[0]=="string")for(m=0;m<P.length;m+=1){for(z[O=P[m]]=x.map(function(he){return he[O]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(j[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=z[O],this.setFont(void 0,"normal"),L=0;L<_.length;L+=1)ee.push(this.getTextDimensions(_[L],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[O]=Math.max.apply(null,ee)+A+A,ee=[]}if(te){var fe={};for(m=0;m<P.length;m+=1)fe[P[m]]={},fe[P[m]].text=j[m],fe[P[m]].align=C[m];var Y=u.call(this,fe,G);T=P.map(function(he){return new i(h,y,G[he],Y,fe[he].text,void 0,fe[he].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var J=b.reduce(function(he,Oe){return he[Oe.name]=Oe.align,he},{});for(m=0;m<x.length;m+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:m,data:x[m]},this);var ne=u.call(this,x[m],G);for(L=0;L<P.length;L+=1){var K=x[m][P[L]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:m,col:L,data:K},this),c.call(this,new i(h,y,G[P[L]],ne,K,m+2,J[P[L]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=y,this};var u=function(h,y){var x=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(m){var _=h[m];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,y[m]-x-x)},this).map(function(m){return this.getLineHeightFactor()*m.length*b/w+x+x},this).reduce(function(m,_){return Math.max(m,_)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,y){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){x=this.internal.__cell__.tableHeaderRow[m].clone(),y&&(x.y=this.internal.__cell__.margins.top||0,w.push(x)),x.lineNumber=h;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(_)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Et.API);var qd={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Bd=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cc=Rd(Bd),Ud=[100,200,300,400,500,600,700,800,900],A0=Rd(Ud);function uc(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return qd[i=i||"normal"]?i:"normal"}(r.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(r.weight),a=function(i){return typeof cc[i=i||"normal"]=="number"?i:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,n].join(" ")}}}function Ou(r,e,t,n){var a;for(a=t;a>=0&&a<e.length;a+=n)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=n)if(r[e[a]])return r[e[a]]}var S0={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Iu={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Eu(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function j0(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},S0,t.genericFontFamilies||{}),i=null,c=null,u=0;u<e.length;++u)if(a[(i=uc(e[u])).family]&&(i.family=a[i.family]),r.hasOwnProperty(i.family)){c=r[i.family];break}if(!(c=c||r[n]))throw new Error("Could not find a font-family for the rule '"+Eu(i)+"' and default family '"+n+"'.");if(c=function(h,y){if(y[h])return y[h];var x=cc[h],b=x<=cc.normal?-1:1,w=Ou(y,Bd,x,b);if(!w)throw new Error("Could not find a matching font-stretch value for "+h);return w}(i.stretch,c),c=function(h,y){if(y[h])return y[h];for(var x=qd[h],b=0;b<x.length;++b)if(y[x[b]])return y[x[b]];throw new Error("Could not find a matching font-style for "+h)}(i.style,c),!(c=function(h,y){if(y[h])return y[h];if(h===400&&y[500])return y[500];if(h===500&&y[400])return y[400];var x=A0[h],b=Ou(y,Ud,x,h<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+h);return b}(i.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Eu(i)+"'.");return c}function Tu(r){return r.trimLeft()}function _0(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function P0(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Uo,Mu,Ru,zl=["times"];(function(r){var e,t,n,a,i,c,u,h,y,x=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new h,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new c,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new c,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,y=new x}]);var b=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=F;Object.defineProperty(this,"pdf",{get:function(){return W}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(qe){Q=!!qe}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(qe){ie=!!qe}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(qe){isNaN(qe)||(oe=qe)}});var Pe=0;Object.defineProperty(this,"posY",{get:function(){return Pe},set:function(qe){isNaN(qe)||(Pe=qe)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(qe){var ue;typeof qe=="number"?ue=[qe,qe,qe,qe]:((ue=new Array(4))[0]=qe[0],ue[1]=qe.length>=2?qe[1]:ue[0],ue[2]=qe.length>=3?qe[2]:ue[0],ue[3]=qe.length>=4?qe[3]:ue[1]),y.margin=ue}});var De=!1;Object.defineProperty(this,"autoPaging",{get:function(){return De},set:function(qe){De=qe}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(qe){me=qe}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(qe){$e=qe}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(qe){qe instanceof x&&(y=qe)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(qe){y.path=qe}});var Xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Xe},set:function(qe){Xe=qe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(qe){var ue;ue=w(qe),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(qe){var ue=w(qe);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(qe){["butt","round","square"].indexOf(qe)!==-1&&(this.ctx.lineCap=qe,this.pdf.setLineCap(qe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(qe){isNaN(qe)||(this.ctx.lineWidth=qe,this.pdf.setLineWidth(qe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(qe){["bevel","round","miter"].indexOf(qe)!==-1&&(this.ctx.lineJoin=qe,this.pdf.setLineJoin(qe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(qe){isNaN(qe)||(this.ctx.miterLimit=qe,this.pdf.setMiterLimit(qe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(qe){this.ctx.textBaseline=qe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(qe){["right","end","center","left","start"].indexOf(qe)!==-1&&(this.ctx.textAlign=qe)}});var Qe=null;function dt(qe,ue){if(Qe===null){var Mt=function(ht){var rt=[];return Object.keys(ht).forEach(function(X){ht[X].forEach(function(de){var xe=null;switch(de){case"bold":xe={family:X,weight:"bold"};break;case"italic":xe={family:X,style:"italic"};break;case"bolditalic":xe={family:X,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:X}}xe!==null&&(xe.ref={name:X,style:de},rt.push(xe))})}),rt}(qe.getFontList());Qe=function(ht){for(var rt={},X=0;X<ht.length;++X){var de=uc(ht[X]),xe=de.family,Be=de.stretch,Ke=de.style,ze=de.weight;rt[xe]=rt[xe]||{},rt[xe][Be]=rt[xe][Be]||{},rt[xe][Be][Ke]=rt[xe][Be][Ke]||{},rt[xe][Be][Ke][ze]=de}return rt}(Mt.concat(ue))}return Qe}var Ct=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ct},set:function(qe){Qe=null,Ct=qe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(qe){var ue;if(this.ctx.font=qe,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(qe))!==null){var Mt=ue[1],ht=(ue[2],ue[3]),rt=ue[4],X=(ue[5],ue[6]),de=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(de==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:de==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var xe=function(Nt){var Bt,lt,hr=[],Wt=Nt.trim();if(Wt==="")return zl;if(Wt in Iu)return[Iu[Wt]];for(;Wt!=="";){switch(lt=null,Bt=(Wt=Tu(Wt)).charAt(0)){case'"':case"'":lt=_0(Wt.substring(1),Bt);break;default:lt=P0(Wt)}if(lt===null||(hr.push(lt[0]),(Wt=Tu(lt[1]))!==""&&Wt.charAt(0)!==","))return zl;Wt=Wt.replace(/^,/,"")}return hr}(X);if(this.fontFaces){var Be=j0(dt(this.pdf,this.fontFaces),xe.map(function(Nt){return{family:Nt,stretch:"normal",weight:ht,style:Mt}}));this.pdf.setFont(Be.ref.name,Be.ref.style)}else{var Ke="";(ht==="bold"||parseInt(ht,10)>=700||Mt==="bold")&&(Ke="bold"),Mt==="italic"&&(Ke+="italic"),Ke.length===0&&(Ke="normal");for(var ze="",et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<xe.length;gt++){if(this.pdf.internal.getFont(xe[gt],Ke,{noFallback:!0,disableWarning:!0})!==void 0){ze=xe[gt];break}if(Ke==="bolditalic"&&this.pdf.internal.getFont(xe[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ze=xe[gt],Ke="bold";else if(this.pdf.internal.getFont(xe[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ze=xe[gt],Ke="normal";break}}if(ze===""){for(var _t=0;_t<xe.length;_t++)if(et[xe[_t]]){ze=et[xe[_t]];break}}ze=ze===""?"Times":ze,this.pdf.setFont(ze,Ke)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(qe){this.ctx.globalCompositeOperation=qe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(qe){this.ctx.globalAlpha=qe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(qe){this.ctx.lineDashOffset=qe,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(qe){this.ctx.lineDash=qe,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(qe){this.ctx.ignoreClearRect=!!qe}})};b.prototype.setLineDash=function(F){this.lineDash=F},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){z.call(this,"fill",!1)},b.prototype.stroke=function(){z.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(F,W){if(isNaN(F)||isNaN(W))throw gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new c(F,W));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(F,W)},b.prototype.closePath=function(){var F=new c(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&yr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){F=new c(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(F.x,F.y)},b.prototype.lineTo=function(F,W){if(isNaN(F)||isNaN(W))throw gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new c(F,W));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new c(Q.x,Q.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},b.prototype.quadraticCurveTo=function(F,W,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(F)||isNaN(W))throw gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new c(Q,ie)),Pe=this.ctx.transform.applyToPoint(new c(F,W));this.path.push({type:"qct",x1:Pe.x,y1:Pe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new c(oe.x,oe.y)},b.prototype.bezierCurveTo=function(F,W,Q,ie,oe,Pe){if(isNaN(oe)||isNaN(Pe)||isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var De=this.ctx.transform.applyToPoint(new c(oe,Pe)),me=this.ctx.transform.applyToPoint(new c(F,W)),$e=this.ctx.transform.applyToPoint(new c(Q,ie));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:$e.x,y2:$e.y,x:De.x,y:De.y}),this.ctx.lastPoint=new c(De.x,De.y)},b.prototype.arc=function(F,W,Q,ie,oe,Pe){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie)||isNaN(oe))throw gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Pe=!!Pe,!this.ctx.transform.isIdentity){var De=this.ctx.transform.applyToPoint(new c(F,W));F=De.x,W=De.y;var me=this.ctx.transform.applyToPoint(new c(0,Q)),$e=this.ctx.transform.applyToPoint(new c(0,0));Q=Math.sqrt(Math.pow(me.x-$e.x,2)+Math.pow(me.y-$e.y,2))}Math.abs(oe-ie)>=2*Math.PI&&(ie=0,oe=2*Math.PI),this.path.push({type:"arc",x:F,y:W,radius:Q,startAngle:ie,endAngle:oe,counterclockwise:Pe})},b.prototype.arcTo=function(F,W,Q,ie,oe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(F,W,Q,ie){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,W),this.lineTo(F+Q,W),this.lineTo(F+Q,W+ie),this.lineTo(F,W+ie),this.lineTo(F,W),this.lineTo(F+Q,W),this.lineTo(F,W)},b.prototype.fillRect=function(F,W,Q,ie){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,W,Q,ie),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},b.prototype.strokeRect=function(F,W,Q,ie){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(F,W,Q,ie),this.stroke())},b.prototype.clearRect=function(F,W,Q,ie){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie))throw gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,W,Q,ie))},b.prototype.save=function(F){F=typeof F!="boolean"||F;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},b.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(W),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(F){var W,Q,ie,oe;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))W=0,Q=0,ie=0,oe=0;else{var Pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(Pe!==null)W=parseInt(Pe[1]),Q=parseInt(Pe[2]),ie=parseInt(Pe[3]),oe=1;else if((Pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)W=parseInt(Pe[1]),Q=parseInt(Pe[2]),ie=parseInt(Pe[3]),oe=parseFloat(Pe[4]);else{if(oe=1,typeof F=="string"&&F.charAt(0)!=="#"){var De=new Dd(F);F=De.ok?De.toHex():"#000000"}F.length===4?(W=F.substring(1,2),W+=W,Q=F.substring(2,3),Q+=Q,ie=F.substring(3,4),ie+=ie):(W=F.substring(1,3),Q=F.substring(3,5),ie=F.substring(5,7)),W=parseInt(W,16),Q=parseInt(Q,16),ie=parseInt(ie,16)}}return{r:W,g:Q,b:ie,a:oe,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(F,W,Q,ie){if(isNaN(W)||isNaN(Q)||typeof F!="string")throw gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!m.call(this)){var oe=ne(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;A.call(this,{text:F,x:W,y:Q,scale:Pe,angle:oe,align:this.textAlign,maxWidth:ie})}},b.prototype.strokeText=function(F,W,Q,ie){if(isNaN(W)||isNaN(Q)||typeof F!="string")throw gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ie=isNaN(ie)?void 0:ie;var oe=ne(this.ctx.transform.rotation),Pe=this.ctx.transform.scaleX;A.call(this,{text:F,x:W,y:Q,scale:Pe,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ie})}},b.prototype.measureText=function(F){if(typeof F!="string")throw gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Q=this.pdf.internal.scaleFactor,ie=W.internal.getFontSize(),oe=W.getStringUnitWidth(F)*ie/W.internal.scaleFactor,Pe=function(De){var me=(De=De||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new Pe({width:oe*=Math.round(96*Q/72*1e4)/1e4})},b.prototype.scale=function(F,W){if(isNaN(F)||isNaN(W))throw gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new h(F,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},b.prototype.rotate=function(F){if(isNaN(F))throw gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new h(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},b.prototype.translate=function(F,W){if(isNaN(F)||isNaN(W))throw gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new h(1,0,0,1,F,W);this.ctx.transform=this.ctx.transform.multiply(Q)},b.prototype.transform=function(F,W,Q,ie,oe,Pe){if(isNaN(F)||isNaN(W)||isNaN(Q)||isNaN(ie)||isNaN(oe)||isNaN(Pe))throw gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var De=new h(F,W,Q,ie,oe,Pe);this.ctx.transform=this.ctx.transform.multiply(De)},b.prototype.setTransform=function(F,W,Q,ie,oe,Pe){F=isNaN(F)?1:F,W=isNaN(W)?0:W,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?1:ie,oe=isNaN(oe)?0:oe,Pe=isNaN(Pe)?0:Pe,this.ctx.transform=new h(F,W,Q,ie,oe,Pe)};var L=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(F,W,Q,ie,oe,Pe,De,me,$e){var Xe=this.pdf.getImageProperties(F),Qe=1,dt=1,Ct=1,qe=1;ie!==void 0&&me!==void 0&&(Ct=me/ie,qe=$e/oe,Qe=Xe.width/ie*me/ie,dt=Xe.height/oe*$e/oe),Pe===void 0&&(Pe=W,De=Q,W=0,Q=0),ie!==void 0&&me===void 0&&(me=ie,$e=oe),ie===void 0&&me===void 0&&(me=Xe.width,$e=Xe.height);for(var ue,Mt=this.ctx.transform.decompose(),ht=ne(Mt.rotate.shx),rt=new h,X=(rt=(rt=(rt=rt.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale)).applyToRectangle(new u(Pe-W*Ct,De-Q*qe,ie*Qe,oe*dt)),de=O.call(this,X),xe=[],Be=0;Be<de.length;Be+=1)xe.indexOf(de[Be])===-1&&xe.push(de[Be]);if(C(xe),this.autoPaging)for(var Ke=xe[0],ze=xe[xe.length-1],et=Ke;et<ze+1;et++){this.pdf.setPage(et);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=et===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=et===1?0:Nt+(et-2)*Bt;if(this.ctx.clip_path.length!==0){var hr=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(ue,this.posX+this.margin[3],-lt+_t+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=hr}var Wt=JSON.parse(JSON.stringify(X));Wt=j([Wt],this.posX+this.margin[3],-lt+_t+this.ctx.prevPageLastElemOffset)[0];var Tr=(et>Ke||et<ze)&&L.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,Bt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,ht),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",X.x,X.y,X.w,X.h,null,null,ht)};var O=function(F,W,Q){var ie=[];W=W||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ie.push(Math.floor((F.y+oe)/Q)+1);break;case"arc":ie.push(Math.floor((F.y+oe-F.radius)/Q)+1),ie.push(Math.floor((F.y+oe+F.radius)/Q)+1);break;case"qct":var Pe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ie.push(Math.floor((Pe.y+oe)/Q)+1),ie.push(Math.floor((Pe.y+Pe.h+oe)/Q)+1);break;case"bct":var De=he(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ie.push(Math.floor((De.y+oe)/Q)+1),ie.push(Math.floor((De.y+De.h+oe)/Q)+1);break;case"rect":ie.push(Math.floor((F.y+oe)/Q)+1),ie.push(Math.floor((F.y+F.h+oe)/Q)+1)}for(var me=0;me<ie.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<ie[me];)P.call(this);return ie},P=function(){var F=this.fillStyle,W=this.strokeStyle,Q=this.font,ie=this.lineCap,oe=this.lineWidth,Pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=W,this.font=Q,this.lineCap=ie,this.lineWidth=oe,this.lineJoin=Pe},j=function(F,W,Q){for(var ie=0;ie<F.length;ie++)switch(F[ie].type){case"bct":F[ie].x2+=W,F[ie].y2+=Q;case"qct":F[ie].x1+=W,F[ie].y1+=Q;case"mt":case"lt":case"arc":default:F[ie].x+=W,F[ie].y+=Q}return F},C=function(F){return F.sort(function(W,Q){return W-Q})},z=function(F,W){for(var Q,ie,oe=this.fillStyle,Pe=this.strokeStyle,De=this.lineCap,me=this.lineWidth,$e=Math.abs(me*this.ctx.transform.scaleX),Xe=this.lineJoin,Qe=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),Ct=[],qe=0;qe<dt.length;qe++)if(dt[qe].x!==void 0)for(var ue=O.call(this,dt[qe]),Mt=0;Mt<ue.length;Mt+=1)Ct.indexOf(ue[Mt])===-1&&Ct.push(ue[Mt]);for(var ht=0;ht<Ct.length;ht++)for(;this.pdf.internal.getNumberOfPages()<Ct[ht];)P.call(this);if(C(Ct),this.autoPaging)for(var rt=Ct[0],X=Ct[Ct.length-1],de=rt;de<X+1;de++){this.pdf.setPage(de),this.fillStyle=oe,this.strokeStyle=Pe,this.lineCap=De,this.lineWidth=$e,this.lineJoin=Xe;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=de===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=de===1?0:Ke+(de-2)*ze;if(this.ctx.clip_path.length!==0){var gt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Q,this.posX+this.margin[3],-et+Be+this.ctx.prevPageLastElemOffset),G.call(this,F,!0),this.path=gt}if(ie=JSON.parse(JSON.stringify(Qe)),this.path=j(ie,this.posX+this.margin[3],-et+Be+this.ctx.prevPageLastElemOffset),W===!1||de===0){var _t=(de>rt||de<X)&&L.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,ze,null).clip().discardPath()),G.call(this,F,W),_t&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=$e,G.call(this,F,W),this.lineWidth=me;this.path=Qe},G=function(F,W){if((F!=="stroke"||W||!_.call(this))&&(F==="stroke"||W||!m.call(this))){for(var Q,ie,oe=[],Pe=this.path,De=0;De<Pe.length;De++){var me=Pe[De];switch(me.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:me,deltas:[],abs:[]});break;case"lt":var $e=oe.length;if(Pe[De-1]&&!isNaN(Pe[De-1].x)&&(Q=[me.x-Pe[De-1].x,me.y-Pe[De-1].y],$e>0)){for(;$e>=0;$e--)if(oe[$e-1].close!==!0&&oe[$e-1].begin!==!0){oe[$e-1].deltas.push(Q),oe[$e-1].abs.push(me);break}}break;case"bct":Q=[me.x1-Pe[De-1].x,me.y1-Pe[De-1].y,me.x2-Pe[De-1].x,me.y2-Pe[De-1].y,me.x-Pe[De-1].x,me.y-Pe[De-1].y],oe[oe.length-1].deltas.push(Q);break;case"qct":var Xe=Pe[De-1].x+2/3*(me.x1-Pe[De-1].x),Qe=Pe[De-1].y+2/3*(me.y1-Pe[De-1].y),dt=me.x+2/3*(me.x1-me.x),Ct=me.y+2/3*(me.y1-me.y),qe=me.x,ue=me.y;Q=[Xe-Pe[De-1].x,Qe-Pe[De-1].y,dt-Pe[De-1].x,Ct-Pe[De-1].y,qe-Pe[De-1].x,ue-Pe[De-1].y],oe[oe.length-1].deltas.push(Q);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(me)}}ie=W?null:F==="stroke"?"stroke":"fill";for(var Mt=!1,ht=0;ht<oe.length;ht++)if(oe[ht].arc)for(var rt=oe[ht].abs,X=0;X<rt.length;X++){var de=rt[X];de.type==="arc"?U.call(this,de.x,de.y,de.radius,de.startAngle,de.endAngle,de.counterclockwise,void 0,W,!Mt):M.call(this,de.x,de.y),Mt=!0}else if(oe[ht].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(oe[ht].begin!==!0){var xe=oe[ht].start.x,Be=oe[ht].start.y;V.call(this,oe[ht].deltas,xe,Be),Mt=!0}ie&&te.call(this,ie),W&&se.call(this)}},ee=function(F){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Q;case"top":return F+W-Q;case"hanging":return F+W-2*Q;case"middle":return F+W/2-Q;case"ideographic":return F;case"alphabetic":default:return F}},T=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(W,Q){this.colorStops.push([W,Q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(F,W,Q,ie,oe,Pe,De,me,$e){for(var Xe=Y.call(this,Q,ie,oe,Pe),Qe=0;Qe<Xe.length;Qe++){var dt=Xe[Qe];Qe===0&&($e?D.call(this,dt.x1+F,dt.y1+W):M.call(this,dt.x1+F,dt.y1+W)),fe.call(this,F,W,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}me?se.call(this):te.call(this,De)},te=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},se=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(F,W){this.pdf.internal.out(t(F)+" "+n(W)+" m")},A=function(F){var W;switch(F.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Q=this.pdf.getTextDimensions(F.text),ie=ee.call(this,F.y),oe=T.call(this,ie)-Q.h,Pe=this.ctx.transform.applyToPoint(new c(F.x,ie)),De=this.ctx.transform.decompose(),me=new h;me=(me=(me=me.multiply(De.translate)).multiply(De.skew)).multiply(De.scale);for(var $e,Xe,Qe,dt=this.ctx.transform.applyToRectangle(new u(F.x,ie,Q.w,Q.h)),Ct=me.applyToRectangle(new u(F.x,oe,Q.w,Q.h)),qe=O.call(this,Ct),ue=[],Mt=0;Mt<qe.length;Mt+=1)ue.indexOf(qe[Mt])===-1&&ue.push(qe[Mt]);if(C(ue),this.autoPaging)for(var ht=ue[0],rt=ue[ue.length-1],X=ht;X<rt+1;X++){this.pdf.setPage(X);var de=X===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],Ke=Be-this.margin[0],ze=this.pdf.internal.pageSize.width-this.margin[1],et=ze-this.margin[3],gt=X===1?0:xe+(X-2)*Ke;if(this.ctx.clip_path.length!==0){var _t=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j($e,this.posX+this.margin[3],-1*gt+de),G.call(this,"fill",!0),this.path=_t}var Nt=j([JSON.parse(JSON.stringify(Ct))],this.posX+this.margin[3],-gt+de+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Xe*F.scale),Qe=this.lineWidth,this.lineWidth=Qe*F.scale);var Bt=this.autoPaging!=="text";if(Bt||Nt.y+Nt.h<=Be){if(Bt||Nt.y>=de&&Nt.x<=ze){var lt=Bt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||ze-Nt.x)[0],hr=j([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-gt+de+this.ctx.prevPageLastElemOffset)[0],Wt=Bt&&(X>ht||X<rt)&&L.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,Ke,null).clip().discardPath()),this.pdf.text(lt,hr.x,hr.y,{angle:F.angle,align:W,renderingMode:F.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else Nt.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-Nt.y);F.scale>=.01&&(this.pdf.setFontSize(Xe),this.lineWidth=Qe)}else F.scale>=.01&&(Xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Xe*F.scale),Qe=this.lineWidth,this.lineWidth=Qe*F.scale),this.pdf.text(F.text,Pe.x+this.posX,Pe.y+this.posY,{angle:F.angle,align:W,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Xe),this.lineWidth=Qe)},M=function(F,W,Q,ie){Q=Q||0,ie=ie||0,this.pdf.internal.out(t(F+Q)+" "+n(W+ie)+" l")},V=function(F,W,Q){return this.pdf.lines(F,W,Q,null,null)},fe=function(F,W,Q,ie,oe,Pe,De,me){this.pdf.internal.out([e(a(Q+F)),e(i(ie+W)),e(a(oe+F)),e(i(Pe+W)),e(a(De+F)),e(i(me+W)),"c"].join(" "))},Y=function(F,W,Q,ie){for(var oe=2*Math.PI,Pe=Math.PI/2;W>Q;)W-=oe;var De=Math.abs(Q-W);De<oe&&ie&&(De=oe-De);for(var me=[],$e=ie?-1:1,Xe=W;De>1e-5;){var Qe=Xe+$e*Math.min(De,Pe);me.push(J.call(this,F,Xe,Qe)),De-=Math.abs(Qe-Xe),Xe=Qe}return me},J=function(F,W,Q){var ie=(Q-W)/2,oe=F*Math.cos(ie),Pe=F*Math.sin(ie),De=oe,me=-Pe,$e=De*De+me*me,Xe=$e+De*oe+me*Pe,Qe=4/3*(Math.sqrt(2*$e*Xe)-Xe)/(De*Pe-me*oe),dt=De-Qe*me,Ct=me+Qe*De,qe=dt,ue=-Ct,Mt=ie+W,ht=Math.cos(Mt),rt=Math.sin(Mt);return{x1:F*Math.cos(W),y1:F*Math.sin(W),x2:dt*ht-Ct*rt,y2:dt*rt+Ct*ht,x3:qe*ht-ue*rt,y3:qe*rt+ue*ht,x4:F*Math.cos(Q),y4:F*Math.sin(Q)}},ne=function(F){return 180*F/Math.PI},K=function(F,W,Q,ie,oe,Pe){var De=F+.5*(Q-F),me=W+.5*(ie-W),$e=oe+.5*(Q-oe),Xe=Pe+.5*(ie-Pe),Qe=Math.min(F,oe,De,$e),dt=Math.max(F,oe,De,$e),Ct=Math.min(W,Pe,me,Xe),qe=Math.max(W,Pe,me,Xe);return new u(Qe,Ct,dt-Qe,qe-Ct)},he=function(F,W,Q,ie,oe,Pe,De,me){var $e,Xe,Qe,dt,Ct,qe,ue,Mt,ht,rt,X,de,xe,Be,Ke=Q-F,ze=ie-W,et=oe-Q,gt=Pe-ie,_t=De-oe,Nt=me-Pe;for(Xe=0;Xe<41;Xe++)ht=(ue=(Qe=F+($e=Xe/40)*Ke)+$e*((Ct=Q+$e*et)-Qe))+$e*(Ct+$e*(oe+$e*_t-Ct)-ue),rt=(Mt=(dt=W+$e*ze)+$e*((qe=ie+$e*gt)-dt))+$e*(qe+$e*(Pe+$e*Nt-qe)-Mt),Xe==0?(X=ht,de=rt,xe=ht,Be=rt):(X=Math.min(X,ht),de=Math.min(de,rt),xe=Math.max(xe,ht),Be=Math.max(Be,rt));return new u(Math.round(X),Math.round(de),Math.round(xe-X),Math.round(Be-de))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,W,Q=(F=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:W}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Et.API),function(r){var e=function(i){var c,u,h,y,x,b,w,m,_,L;for(u=[],h=0,y=(i+=c="\0\0\0\0".slice(i.length%4||4)).length;y>h;h+=4)(x=(i.charCodeAt(h)<<24)+(i.charCodeAt(h+1)<<16)+(i.charCodeAt(h+2)<<8)+i.charCodeAt(h+3))!==0?(b=(x=((x=((x=((x=(x-(L=x%85))/85)-(_=x%85))/85)-(m=x%85))/85)-(w=x%85))/85)%85,u.push(b+33,w+33,m+33,_+33,L+33)):u.push(122);return function(O,P){for(var j=P;j>0;j--)O.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},t=function(i){var c,u,h,y,x,b=String,w="length",m=255,_="charCodeAt",L="slice",O="replace";for(i[L](-2),i=i[L](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),h=[],y=0,x=(i+=c="uuuuu"[L](i[w]%5||5))[w];x>y;y+=5)u=52200625*(i[_](y)-33)+614125*(i[_](y+1)-33)+7225*(i[_](y+2)-33)+85*(i[_](y+3)-33)+(i[_](y+4)-33),h.push(m&u>>24,m&u>>16,m&u>>8,m&u);return function(P,j){for(var C=j;C>0;C--)P.pop()}(h,c[w]),b.fromCharCode.apply(b,h)},n=function(i){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),c.test(i)===!1)return"";for(var u="",h=0;h<i.length;h+=2)u+=String.fromCharCode("0x"+(i[h]+i[h+1]));return u},a=function(i){for(var c=new Uint8Array(i.length),u=i.length;u--;)c[u]=i.charCodeAt(u);return i=(c=ic(c)).reduce(function(h,y){return h+String.fromCharCode(y)},"")};r.processDataByFilters=function(i,c){var u=0,h=i||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":h=t(h),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=n(h),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=a(h),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:h,reverseChain:y.reverse().join(" ")}}}(Et.API),function(r){r.loadFile=function(e,t,n){return function(a,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(h,y,x){var b=new XMLHttpRequest,w=0,m=function(_){var L=_.length,O=[],P=String.fromCharCode;for(w=0;w<L;w+=1)O.push(P(255&_.charCodeAt(w)));return O.join("")};if(b.open("GET",h,!y),b.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(b.onload=function(){b.status===200?x(m(this.responseText)):x(void 0)}),b.send(null),y&&b.status===200)return m(b.responseText)}(a,i,c)}catch{}return u}(e,t,n)},r.loadImageFile=r.loadFile}(Et.API),function(r){function e(){return(qt.html2canvas?Promise.resolve(qt.html2canvas):nl(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(qt.DOMPurify?Promise.resolve(qt.DOMPurify):nl(()=>import("./purify.es-2de9db7f.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=yr(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(c,u){var h=document.createElement(c);for(var y in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[y]=u.style[y];return h},i=function c(u){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),h);return y=(y=y.setProgress(1,c,1,[c])).set(u)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(c,u){return c.__proto__=u||i.prototype,c},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(t).then(function(h){return this.set({src:a("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},i.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(y,x){for(var b=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),w=y.firstChild;w;w=w.nextSibling)x!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||b.appendChild(h(w,x));return y.nodeType===1&&(y.nodeName==="CANVAS"?(b.width=y.width,b.height=y.height,b.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(b.value=y.value),b.addEventListener("load",function(){b.scrollTop=y.scrollTop,b.scrollLeft=y.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=this.opt.jsPDF,y=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=y,y)for(var w=0;w<y.length;++w){var m=y[w],_=m.src.find(function(L){return L.format==="truetype"});_&&h.addFont(_.url,m.ref.name,m.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,h.context2d.save(!0),u(this.prop.container,b)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(c,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},i.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},i.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},i.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(h){if(h in i.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(u)})},i.prototype.get=function(c,u){return this.then(function(){var h=c in i.template.prop?this.prop[c]:this.opt[c];return u?u(h):h})},i.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},i.prototype.setPageSize=function(c){function u(h,y){return Math.floor(h*y/72*96)}return this.then(function(){(c=c||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},i.prototype.setProgress=function(c,u,h,y){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(c,u,h,y){return this.setProgress(c?this.progress.val+c:null,u||null,h?this.progress.n+h:null,y?this.progress.stack.concat(y):null)},i.prototype.then=function(c,u){var h=this;return this.thenCore(c,u,function(y,x){return h.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(b){return h.updateProgress(null,y),b}).then(y,x).then(function(b){return h.updateProgress(1),b})})},i.prototype.thenCore=function(c,u,h){h=h||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),x=h.call(y,c,u);return i.convert(x,this.__proto__)},i.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},i.prototype.thenList=function(c){var u=this;return c.forEach(function(h){u=u.thenCore(h)}),u},i.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return i.convert(u,this)},i.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},i.prototype.error=function(c){return this.then(function(){throw new Error(c)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Et.getPageSize=function(c,u,h){if(yr(c)==="object"){var y=c;c=y.orientation,u=y.unit||u,h=y.format||h}u=u||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var x,b=(""+h).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+u}var m,_=0,L=0;if(w.hasOwnProperty(b))_=w[b][1]/x,L=w[b][0]/x;else try{_=h[1],L=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",L>_&&(m=L,L=_,_=m);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",_>L&&(m=L,L=_,_=m)}return{width:L,height:_,unit:u,k:x,orientation:c}},r.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(uc):null;var h=new i(u);return u.worker?h:h.from(c).doCallback()}}(Et.API),Et.API.addJS=function(r){return Ru=r,this.internal.events.subscribe("postPutResources",function(){Uo=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Uo+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Mu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ru+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Uo!==void 0&&Mu!==void 0&&this.internal.out("/Names <</JavaScript "+Uo+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),i=0;i<a.length;i++){var c=a[i],u=n.exec(c);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,x=[];for(i=0;i<y;i++){var b=t.internal.newObject();x.push(b);var w=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<x.length;i++)t.internal.write("(page_"+(i+1)+")"+x[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,a,i){var c={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var c=n.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var y=0;y<n.children.length;y++)this.renderItems(n.children[y])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Et.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,a,i,c,u){var h,y=this.decode.DCT_DECODE,x=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(h=function(b){for(var w,m=256*b.charCodeAt(4)+b.charCodeAt(5),_=b.length,L={width:0,height:0,numcomponents:1},O=4;O<_;O+=2){if(O+=m,e.indexOf(b.charCodeAt(O+1))!==-1){w=256*b.charCodeAt(O+5)+b.charCodeAt(O+6),L={width:256*b.charCodeAt(O+7)+b.charCodeAt(O+8),height:w,numcomponents:b.charCodeAt(O+9)};break}m=256*b.charCodeAt(O+2)+b.charCodeAt(O+3)}return L}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}x={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:y,index:n,alias:a}}return x}}(Et.API);var Is,zo,qu,Bu,Uu,L0=function(){var r,e,t;function n(i){var c,u,h,y,x,b,w,m,_,L,O,P,j,C;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),_=(function(){var z,G;for(G=[],z=0;z<4;++z)G.push(String.fromCharCode(this.data[this.pos++]));return G}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),y=this.readUInt16()||100,b.delay=1e3*x/y,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,c-=4),i=(b!=null?b.data:void 0)||this.imgData,P=0;0<=c?P<c:P>c;0<=c?++P:--P)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((L=h-this.transparency.indexed.length)>0)for(j=0;0<=L?j<L:j>L;0<=L?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":w=(O=this.read(c)).indexOf(0),m=String.fromCharCode.apply(String,O.slice(0,w)),this.text[m]=String.fromCharCode.apply(String,O.slice(w+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var c,u;for(u=[],c=0;0<=i?c<i:c>i;0<=i?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),h=0,y=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function x(b,w,m,_){var L,O,P,j,C,z,G,ee,T,U,te,se,D,A,M,V,fe,Y,J,ne,K,he=Math.ceil((y.width-b)/m),Oe=Math.ceil((y.height-w)/_),F=y.width==he&&y.height==Oe;for(A=c*he,se=F?u:new Uint8Array(A*Oe),z=i.length,D=0,O=0;D<Oe&&h<z;){switch(i[h++]){case 0:for(j=fe=0;fe<A;j=fe+=1)se[O++]=i[h++];break;case 1:for(j=Y=0;Y<A;j=Y+=1)L=i[h++],C=j<c?0:se[O-c],se[O++]=(L+C)%256;break;case 2:for(j=J=0;J<A;j=J+=1)L=i[h++],P=(j-j%c)/c,M=D&&se[(D-1)*A+P*c+j%c],se[O++]=(M+L)%256;break;case 3:for(j=ne=0;ne<A;j=ne+=1)L=i[h++],P=(j-j%c)/c,C=j<c?0:se[O-c],M=D&&se[(D-1)*A+P*c+j%c],se[O++]=(L+Math.floor((C+M)/2))%256;break;case 4:for(j=K=0;K<A;j=K+=1)L=i[h++],P=(j-j%c)/c,C=j<c?0:se[O-c],D===0?M=V=0:(M=se[(D-1)*A+P*c+j%c],V=P&&se[(D-1)*A+(P-1)*c+j%c]),G=C+M-V,ee=Math.abs(G-C),U=Math.abs(G-M),te=Math.abs(G-V),T=ee<=U&&ee<=te?C:U<=te?M:V,se[O++]=(L+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[h-1])}if(!F){var W=((w+D*_)*y.width+b)*c,Q=D*A;for(j=0;j<he;j+=1){for(var ie=0;ie<c;ie+=1)u[W++]=se[Q++];W+=(m-1)*c}}D++}}return i=a0(i),y.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),u},n.prototype.decodePalette=function(){var i,c,u,h,y,x,b,w,m;for(u=this.palette,x=this.transparency.indexed||[],y=new Uint8Array((x.length||0)+u.length),h=0,i=0,c=b=0,w=u.length;b<w;c=b+=3)y[h++]=u[c],y[h++]=u[c+1],y[h++]=u[c+2],y[h++]=(m=x[i++])!=null?m:255;return y},n.prototype.copyToImageData=function(i,c){var u,h,y,x,b,w,m,_,L,O,P;if(h=this.colors,L=null,u=this.hasAlphaChannel,this.palette.length&&(L=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),h=4,u=!0),_=(y=i.data||i).length,b=L||c,x=w=0,h===1)for(;x<_;)m=L?4*c[x/4]:w,O=b[m++],y[x++]=O,y[x++]=O,y[x++]=O,y[x++]=u?b[m++]:255,w=m;else for(;x<_;)m=L?4*c[x/4]:w,y[x++]=b[m++],y[x++]=b[m++],y[x++]=b[m++],y[x++]=u?b[m++]:255,w=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(qt)==="[object Window]"){try{e=qt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),r=function(i){var c;if(a()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var c,u,h,y,x,b,w,m;if(this.animation){for(m=[],u=x=0,b=(w=this.animation.frames).length;x<b;u=++x)c=w[u],h=i.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(h,y),c.imageData=h,m.push(c.image=r(h));return m}},n.prototype.renderFrame=function(i,c){var u,h,y;return u=(h=this.animation.frames)[c],y=h[c-1],c===0&&i.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?i.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&i.putImageData(y.imageData,y.xOffset,y.yOffset),u.blendOp===0&&i.clearRect(u.xOffset,u.yOffset,u.width,u.height),i.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(i){var c,u,h,y,x,b,w=this;return u=0,b=this.animation,y=b.numFrames,h=b.frames,x=b.numPlays,(c=function(){var m,_;if(m=u++%y,_=h[m],w.renderFrame(i,m),y>1&&u/y<x)return w.animation._timeout=setTimeout(c,_.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var c,u;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,c=i.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function k0(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,a=r[e++],i=a>>7,c=1<<(7&a)+1;r[e++],r[e++];var u=null,h=null;i&&(u=e,h=c,e+=3*c);var y=!0,x=[],b=0,w=null,m=0,_=null;for(this.width=t,this.height=n;y&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,_=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((D=r[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var L=r[e++];b=r[e++]|r[e++]<<8,w=r[e++],!(1&L)&&(w=null),m=L>>2&7,e++;break;case 254:for(;;){if(!((D=r[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var O=r[e++]|r[e++]<<8,P=r[e++]|r[e++]<<8,j=r[e++]|r[e++]<<8,C=r[e++]|r[e++]<<8,z=r[e++],G=z>>6&1,ee=1<<(7&z)+1,T=u,U=h,te=!1;z>>7&&(te=!0,T=e,U=ee,e+=3*ee);var se=e;for(e++;;){var D;if(!((D=r[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}x.push({x:O,y:P,width:j,height:C,has_local_palette:te,palette_offset:T,palette_size:U,data_offset:se,data_length:e-se,transparent_index:w,interlaced:!!G,delay:b,disposal:m});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return _},this.frameInfo=function(A){if(A<0||A>=x.length)throw new Error("Frame index out of range.");return x[A]},this.decodeAndBlitFrameBGRA=function(A,M){var V=this.frameInfo(A),fe=V.width*V.height,Y=new Uint8Array(fe);zu(r,V.data_offset,Y,fe);var J=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var K=V.width,he=t-K,Oe=K,F=4*(V.y*t+V.x),W=4*((V.y+V.height)*t+V.x),Q=F,ie=4*he;V.interlaced===!0&&(ie+=4*t*7);for(var oe=8,Pe=0,De=Y.length;Pe<De;++Pe){var me=Y[Pe];if(Oe===0&&(Oe=K,(Q+=ie)>=W&&(ie=4*he+4*t*(oe-1),Q=F+(K+he)*(oe<<1),oe>>=1)),me===ne)Q+=4;else{var $e=r[J+3*me],Xe=r[J+3*me+1],Qe=r[J+3*me+2];M[Q++]=Qe,M[Q++]=Xe,M[Q++]=$e,M[Q++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(A,M){var V=this.frameInfo(A),fe=V.width*V.height,Y=new Uint8Array(fe);zu(r,V.data_offset,Y,fe);var J=V.palette_offset,ne=V.transparent_index;ne===null&&(ne=256);var K=V.width,he=t-K,Oe=K,F=4*(V.y*t+V.x),W=4*((V.y+V.height)*t+V.x),Q=F,ie=4*he;V.interlaced===!0&&(ie+=4*t*7);for(var oe=8,Pe=0,De=Y.length;Pe<De;++Pe){var me=Y[Pe];if(Oe===0&&(Oe=K,(Q+=ie)>=W&&(ie=4*he+4*t*(oe-1),Q=F+(K+he)*(oe<<1),oe>>=1)),me===ne)Q+=4;else{var $e=r[J+3*me],Xe=r[J+3*me+1],Qe=r[J+3*me+2];M[Q++]=$e,M[Q++]=Xe,M[Q++]=Qe,M[Q++]=255}--Oe}}}function zu(r,e,t,n){for(var a=r[e++],i=1<<a,c=i+1,u=c+1,h=a+1,y=(1<<h)-1,x=0,b=0,w=0,m=r[e++],_=new Int32Array(4096),L=null;;){for(;x<16&&m!==0;)b|=r[e++]<<x,x+=8,m===1?m=r[e++]:--m;if(x<h)break;var O=b&y;if(b>>=h,x-=h,O!==i){if(O===c)break;for(var P=O<u?O:L,j=0,C=P;C>i;)C=_[C]>>8,++j;var z=C;if(w+j+(P!==O?1:0)>n)return void gr.log("Warning, gif stream longer than expected.");t[w++]=z;var G=w+=j;for(P!==O&&(t[w++]=z),C=P;j--;)C=_[C],t[--G]=255&C,C>>=8;L!==null&&u<4096&&(_[u++]=L<<8|z,u>=y+1&&h<12&&(++h,y=y<<1|1)),L=O}else u=c+1,y=(1<<(h=a+1))-1,L=null}return w!==n&&gr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Hl(r){var e,t,n,a,i,c=Math.floor,u=new Array(64),h=new Array(64),y=new Array(64),x=new Array(64),b=new Array(65535),w=new Array(65535),m=new Array(64),_=new Array(64),L=[],O=0,P=7,j=new Array(64),C=new Array(64),z=new Array(64),G=new Array(256),ee=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(F,W){for(var Q=0,ie=0,oe=new Array,Pe=1;Pe<=16;Pe++){for(var De=1;De<=F[Pe];De++)oe[W[ie]]=[],oe[W[ie]][0]=Q,oe[W[ie]][1]=Pe,ie++,Q++;Q*=2}return oe}function J(F){for(var W=F[0],Q=F[1]-1;Q>=0;)W&1<<Q&&(O|=1<<P),Q--,--P<0&&(O==255?(ne(255),ne(0)):ne(O),P=7,O=0)}function ne(F){L.push(F)}function K(F){ne(F>>8&255),ne(255&F)}function he(F,W,Q,ie,oe){for(var Pe,De=oe[0],me=oe[240],$e=function(rt,X){var de,xe,Be,Ke,ze,et,gt,_t,Nt,Bt,lt=0;for(Nt=0;Nt<8;++Nt){de=rt[lt],xe=rt[lt+1],Be=rt[lt+2],Ke=rt[lt+3],ze=rt[lt+4],et=rt[lt+5],gt=rt[lt+6];var hr=de+(_t=rt[lt+7]),Wt=de-_t,Tr=xe+gt,Gt=xe-gt,ct=Be+et,Cr=Be-et,Kt=Ke+ze,Ln=Ke-ze,nt=hr+Kt,tn=hr-Kt,An=Tr+ct,cr=Tr-ct;rt[lt]=nt+An,rt[lt+4]=nt-An;var Rt=.707106781*(cr+tn);rt[lt+2]=tn+Rt,rt[lt+6]=tn-Rt;var Ce=.382683433*((nt=Ln+Cr)-(cr=Gt+Wt)),bt=.5411961*nt+Ce,Ot=1.306562965*cr+Ce,er=.707106781*(An=Cr+Gt),sr=Wt+er,At=Wt-er;rt[lt+5]=At+bt,rt[lt+3]=At-bt,rt[lt+1]=sr+Ot,rt[lt+7]=sr-Ot,lt+=8}for(lt=0,Nt=0;Nt<8;++Nt){de=rt[lt],xe=rt[lt+8],Be=rt[lt+16],Ke=rt[lt+24],ze=rt[lt+32],et=rt[lt+40],gt=rt[lt+48];var ar=de+(_t=rt[lt+56]),$t=de-_t,tr=xe+gt,_r=xe-gt,br=Be+et,rn=Be-et,ri=Ke+ze,ni=Ke-ze,Hr=ar+ri,nn=ar-ri,Wr=tr+br,Sn=tr-br;rt[lt]=Hr+Wr,rt[lt+32]=Hr-Wr;var kn=.707106781*(Sn+nn);rt[lt+16]=nn+kn,rt[lt+48]=nn-kn;var Gr=.382683433*((Hr=ni+rn)-(Sn=_r+$t)),ji=.5411961*Hr+Gr,Cn=1.306562965*Sn+Gr,Hi=.707106781*(Wr=rn+_r),_i=$t+Hi,fr=$t-Hi;rt[lt+40]=fr+ji,rt[lt+24]=fr-ji,rt[lt+8]=_i+Cn,rt[lt+56]=_i-Cn,lt++}for(Nt=0;Nt<64;++Nt)Bt=rt[Nt]*X[Nt],m[Nt]=Bt>0?Bt+.5|0:Bt-.5|0;return m}(F,W),Xe=0;Xe<64;++Xe)_[T[Xe]]=$e[Xe];var Qe=_[0]-Q;Q=_[0],Qe==0?J(ie[0]):(J(ie[w[Pe=32767+Qe]]),J(b[Pe]));for(var dt=63;dt>0&&_[dt]==0;)dt--;if(dt==0)return J(De),Q;for(var Ct,qe=1;qe<=dt;){for(var ue=qe;_[qe]==0&&qe<=dt;)++qe;var Mt=qe-ue;if(Mt>=16){Ct=Mt>>4;for(var ht=1;ht<=Ct;++ht)J(me);Mt&=15}Pe=32767+_[qe],J(oe[(Mt<<4)+w[Pe]]),J(b[Pe]),qe++}return dt!=63&&J(De),Q}function Oe(F){F=Math.min(Math.max(F,1),100),i!=F&&(function(W){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var oe=c((Q[ie]*W+50)/100);oe=Math.min(Math.max(oe,1),255),u[T[ie]]=oe}for(var Pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],De=0;De<64;De++){var me=c((Pe[De]*W+50)/100);me=Math.min(Math.max(me,1),255),h[T[De]]=me}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Xe=0,Qe=0;Qe<8;Qe++)for(var dt=0;dt<8;dt++)y[Xe]=1/(u[T[Xe]]*$e[Qe]*$e[dt]*8),x[Xe]=1/(h[T[Xe]]*$e[Qe]*$e[dt]*8),Xe++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),i=F)}this.encode=function(F,W){W&&Oe(W),L=new Array,O=0,P=7,K(65496),K(65504),K(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),K(1),K(1),ne(0),ne(0),function(){K(65499),K(132),ne(0);for(var xe=0;xe<64;xe++)ne(u[xe]);ne(1);for(var Be=0;Be<64;Be++)ne(h[Be])}(),function(xe,Be){K(65472),K(17),ne(8),K(Be),K(xe),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(F.width,F.height),function(){K(65476),K(418),ne(0);for(var xe=0;xe<16;xe++)ne(U[xe+1]);for(var Be=0;Be<=11;Be++)ne(te[Be]);ne(16);for(var Ke=0;Ke<16;Ke++)ne(se[Ke+1]);for(var ze=0;ze<=161;ze++)ne(D[ze]);ne(1);for(var et=0;et<16;et++)ne(A[et+1]);for(var gt=0;gt<=11;gt++)ne(M[gt]);ne(17);for(var _t=0;_t<16;_t++)ne(V[_t+1]);for(var Nt=0;Nt<=161;Nt++)ne(fe[Nt])}(),K(65498),K(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var Q=0,ie=0,oe=0;O=0,P=7,this.encode.displayName="_encode_";for(var Pe,De,me,$e,Xe,Qe,dt,Ct,qe,ue=F.data,Mt=F.width,ht=F.height,rt=4*Mt,X=0;X<ht;){for(Pe=0;Pe<rt;){for(Xe=rt*X+Pe,dt=-1,Ct=0,qe=0;qe<64;qe++)Qe=Xe+(Ct=qe>>3)*rt+(dt=4*(7&qe)),X+Ct>=ht&&(Qe-=rt*(X+1+Ct-ht)),Pe+dt>=rt&&(Qe-=Pe+dt-rt+4),De=ue[Qe++],me=ue[Qe++],$e=ue[Qe++],j[qe]=(ee[De]+ee[me+256>>0]+ee[$e+512>>0]>>16)-128,C[qe]=(ee[De+768>>0]+ee[me+1024>>0]+ee[$e+1280>>0]>>16)-128,z[qe]=(ee[De+1280>>0]+ee[me+1536>>0]+ee[$e+1792>>0]>>16)-128;Q=he(j,y,Q,e,n),ie=he(C,x,ie,t,a),oe=he(z,x,oe,t,a),Pe+=32}X+=8}if(P>=0){var de=[];de[1]=P+1,de[0]=(1<<P+1)-1,J(de)}return K(65497),new Uint8Array(L)},r=r||50,function(){for(var F=String.fromCharCode,W=0;W<256;W++)G[W]=F(W)}(),e=Y(U,te),t=Y(A,M),n=Y(se,D),a=Y(V,fe),function(){for(var F=1,W=2,Q=1;Q<=15;Q++){for(var ie=F;ie<W;ie++)w[32767+ie]=Q,b[32767+ie]=[],b[32767+ie][1]=Q,b[32767+ie][0]=ie;for(var oe=-(W-1);oe<=-F;oe++)w[32767+oe]=Q,b[32767+oe]=[],b[32767+oe][1]=Q,b[32767+oe][0]=W-1+oe;F<<=1,W<<=1}}(),function(){for(var F=0;F<256;F++)ee[F]=19595*F,ee[F+256>>0]=38470*F,ee[F+512>>0]=7471*F+32768,ee[F+768>>0]=-11059*F,ee[F+1024>>0]=-21709*F,ee[F+1280>>0]=32768*F+8421375,ee[F+1536>>0]=-27439*F,ee[F+1792>>0]=-5329*F}(),Oe(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function vi(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hu(r){function e(U){if(!U)throw Error("assert :P")}function t(U,te,se){for(var D=0;4>D;D++)if(U[te+D]!=se.charCodeAt(D))return!0;return!1}function n(U,te,se,D,A){for(var M=0;M<A;M++)U[te+M]=se[D+M]}function a(U,te,se,D){for(var A=0;A<D;A++)U[te+A]=se}function i(U){return new Int32Array(U)}function c(U,te){for(var se=[],D=0;D<U;D++)se.push(new te);return se}function u(U,te){var se=[];return function D(A,M,V){for(var fe=V[M],Y=0;Y<fe&&(A.push(V.length>M+1?[]:new te),!(V.length<M+1));Y++)D(A[Y],M+1,V)}(se,0,U),se}var h=function(){var U=this;function te(s,d){for(var g=1<<d-1>>>0;s&g;)g>>>=1;return g?(s&g-1)+g:s}function se(s,d,g,N,E){e(!(N%g));do s[d+(N-=g)]=E;while(0<N)}function D(s,d,g,N,E){if(e(2328>=E),512>=E)var R=i(512);else if((R=i(E))==null)return 0;return function(B,H,$,re,ye,Ie){var Ee,_e,Je=H,Ue=1<<$,be=i(16),Se=i(16);for(e(ye!=0),e(re!=null),e(B!=null),e(0<$),_e=0;_e<ye;++_e){if(15<re[_e])return 0;++be[re[_e]]}if(be[0]==ye)return 0;for(Se[1]=0,Ee=1;15>Ee;++Ee){if(be[Ee]>1<<Ee)return 0;Se[Ee+1]=Se[Ee]+be[Ee]}for(_e=0;_e<ye;++_e)Ee=re[_e],0<re[_e]&&(Ie[Se[Ee]++]=_e);if(Se[15]==1)return(re=new A).g=0,re.value=Ie[0],se(B,Je,1,Ue,re),Ue;var Ge,Ze=-1,Ye=Ue-1,xt=0,mt=1,Tt=1,vt=1<<$;for(_e=0,Ee=1,ye=2;Ee<=$;++Ee,ye<<=1){if(mt+=Tt<<=1,0>(Tt-=be[Ee]))return 0;for(;0<be[Ee];--be[Ee])(re=new A).g=Ee,re.value=Ie[_e++],se(B,Je+xt,ye,vt,re),xt=te(xt,Ee)}for(Ee=$+1,ye=2;15>=Ee;++Ee,ye<<=1){if(mt+=Tt<<=1,0>(Tt-=be[Ee]))return 0;for(;0<be[Ee];--be[Ee]){if(re=new A,(xt&Ye)!=Ze){for(Je+=vt,Ge=1<<(Ze=Ee)-$;15>Ze&&!(0>=(Ge-=be[Ze]));)++Ze,Ge<<=1;Ue+=vt=1<<(Ge=Ze-$),B[H+(Ze=xt&Ye)].g=Ge+$,B[H+Ze].value=Je-H-Ze}re.g=Ee-$,re.value=Ie[_e++],se(B,Je+(xt>>$),ye,vt,re),xt=te(xt,Ee)}}return mt!=2*Se[15]-1?0:Ue}(s,d,g,N,E,R)}function A(){this.value=this.g=0}function M(){this.value=this.g=0}function V(){this.G=c(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Jt,M)}function fe(s,d,g,N){e(s!=null),e(d!=null),e(2147483648>N),s.Ca=254,s.I=0,s.b=-8,s.Ka=0,s.oa=d,s.pa=g,s.Jd=d,s.Yc=g+N,s.Zc=4<=N?g+N-4+1:g,Pe(s)}function Y(s,d){for(var g=0;0<d--;)g|=me(s,128)<<d;return g}function J(s,d){var g=Y(s,d);return De(s)?-g:g}function ne(s,d,g,N){var E,R=0;for(e(s!=null),e(d!=null),e(4294967288>N),s.Sb=N,s.Ra=0,s.u=0,s.h=0,4<N&&(N=4),E=0;E<N;++E)R+=d[g+E]<<8*E;s.Ra=R,s.bb=N,s.oa=d,s.pa=g}function K(s){for(;8<=s.u&&s.bb<s.Sb;)s.Ra>>>=8,s.Ra+=s.oa[s.pa+s.bb]<<_a-8>>>0,++s.bb,s.u-=8;Q(s)&&(s.h=1,s.u=0)}function he(s,d){if(e(0<=d),!s.h&&d<=Qr){var g=W(s)&di[d];return s.u+=d,K(s),g}return s.h=1,s.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(s){return s.Ra>>>(s.u&_a-1)>>>0}function Q(s){return e(s.bb<=s.Sb),s.h||s.bb==s.Sb&&s.u>_a}function ie(s,d){s.u=d,s.h=Q(s)}function oe(s){s.u>=sa&&(e(s.u>=sa),K(s))}function Pe(s){e(s!=null&&s.oa!=null),s.pa<s.Zc?(s.I=(s.oa[s.pa++]|s.I<<8)>>>0,s.b+=8):(e(s!=null&&s.oa!=null),s.pa<s.Yc?(s.b+=8,s.I=s.oa[s.pa++]|s.I<<8):s.Ka?s.b=0:(s.I<<=8,s.b+=8,s.Ka=1))}function De(s){return Y(s,1)}function me(s,d){var g=s.Ca;0>s.b&&Pe(s);var N=s.b,E=g*d>>>8,R=(s.I>>>N>E)+0;for(R?(g-=E,s.I-=E+1<<N>>>0):g=E+1,N=g,E=0;256<=N;)E+=8,N>>=8;return N=7^E+un[N],s.b-=N,s.Ca=(g<<N)-1,R}function $e(s,d,g){s[d+0]=g>>24&255,s[d+1]=g>>16&255,s[d+2]=g>>8&255,s[d+3]=g>>0&255}function Xe(s,d){return s[d+0]<<0|s[d+1]<<8}function Qe(s,d){return Xe(s,d)|s[d+2]<<16}function dt(s,d){return Xe(s,d)|Xe(s,d+2)<<16}function Ct(s,d){var g=1<<d;return e(s!=null),e(0<d),s.X=i(g),s.X==null?0:(s.Mb=32-d,s.Xa=d,1)}function qe(s,d){e(s!=null),e(d!=null),e(s.Xa==d.Xa),n(d.X,0,s.X,0,1<<d.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function Mt(s,d,g,N){e(g!=null),e(N!=null);var E=g[0],R=N[0];return E==0&&(E=(s*R+d/2)/d),R==0&&(R=(d*E+s/2)/s),0>=E||0>=R?0:(g[0]=E,N[0]=R,1)}function ht(s,d){return s+(1<<d)-1>>>d}function rt(s,d){return((4278255360&s)+(4278255360&d)>>>0&4278255360)+((16711935&s)+(16711935&d)>>>0&16711935)>>>0}function X(s,d){U[d]=function(g,N,E,R,B,H,$){var re;for(re=0;re<B;++re){var ye=U[s](H[$+re-1],E,R+re);H[$+re]=rt(g[N+re],ye)}}}function de(){this.ud=this.hd=this.jd=0}function xe(s,d){return((4278124286&(s^d))>>>1)+(s&d)>>>0}function Be(s){return 0<=s&&256>s?s:0>s?0:255<s?255:void 0}function Ke(s,d){return Be(s+(s-d+.5>>1))}function ze(s,d,g){return Math.abs(d-g)-Math.abs(s-g)}function et(s,d,g,N,E,R,B){for(N=R[B-1],g=0;g<E;++g)R[B+g]=N=rt(s[d+g],N)}function gt(s,d,g,N,E){var R;for(R=0;R<g;++R){var B=s[d+R],H=B>>8&255,$=16711935&($=($=16711935&B)+((H<<16)+H));N[E+R]=(4278255360&B)+$>>>0}}function _t(s,d){d.jd=s>>0&255,d.hd=s>>8&255,d.ud=s>>16&255}function Nt(s,d,g,N,E,R){var B;for(B=0;B<N;++B){var H=d[g+B],$=H>>>8,re=H,ye=255&(ye=(ye=H>>>16)+((s.jd<<24>>24)*($<<24>>24)>>>5));re=255&(re=(re=re+((s.hd<<24>>24)*($<<24>>24)>>>5))+((s.ud<<24>>24)*(ye<<24>>24)>>>5)),E[R+B]=(4278255360&H)+(ye<<16)+re}}function Bt(s,d,g,N,E){U[d]=function(R,B,H,$,re,ye,Ie,Ee,_e){for($=Ie;$<Ee;++$)for(Ie=0;Ie<_e;++Ie)re[ye++]=E(H[N(R[B++])])},U[s]=function(R,B,H,$,re,ye,Ie){var Ee=8>>R.b,_e=R.Ea,Je=R.K[0],Ue=R.w;if(8>Ee)for(R=(1<<R.b)-1,Ue=(1<<Ee)-1;B<H;++B){var be,Se=0;for(be=0;be<_e;++be)be&R||(Se=N($[re++])),ye[Ie++]=E(Je[Se&Ue]),Se>>=Ee}else U["VP8LMapColor"+g]($,re,Je,Ue,ye,Ie,B,H,_e)}}function lt(s,d,g,N,E){for(g=d+g;d<g;){var R=s[d++];N[E++]=R>>16&255,N[E++]=R>>8&255,N[E++]=R>>0&255}}function hr(s,d,g,N,E){for(g=d+g;d<g;){var R=s[d++];N[E++]=R>>16&255,N[E++]=R>>8&255,N[E++]=R>>0&255,N[E++]=R>>24&255}}function Wt(s,d,g,N,E){for(g=d+g;d<g;){var R=(B=s[d++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;N[E++]=R,N[E++]=B}}function Tr(s,d,g,N,E){for(g=d+g;d<g;){var R=(B=s[d++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;N[E++]=R,N[E++]=B}}function Gt(s,d,g,N,E){for(g=d+g;d<g;){var R=s[d++];N[E++]=R>>0&255,N[E++]=R>>8&255,N[E++]=R>>16&255}}function ct(s,d,g,N,E,R){if(R==0)for(g=d+g;d<g;)$e(N,((R=s[d++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),E+=32;else n(N,E,s,d,g)}function Cr(s,d){U[d][0]=U[s+"0"],U[d][1]=U[s+"1"],U[d][2]=U[s+"2"],U[d][3]=U[s+"3"],U[d][4]=U[s+"4"],U[d][5]=U[s+"5"],U[d][6]=U[s+"6"],U[d][7]=U[s+"7"],U[d][8]=U[s+"8"],U[d][9]=U[s+"9"],U[d][10]=U[s+"10"],U[d][11]=U[s+"11"],U[d][12]=U[s+"12"],U[d][13]=U[s+"13"],U[d][14]=U[s+"0"],U[d][15]=U[s+"0"]}function Kt(s){return s==ml||s==gl||s==So||s==vl}function Ln(){this.eb=[],this.size=this.A=this.fb=0}function nt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ln,this.f.kb=new nt,this.sd=null}function An(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rt(s){return alert("todo:WebPSamplerProcessPlane"),s.T}function Ce(s,d){var g=s.T,N=d.ba.f.RGBA,E=N.eb,R=N.fb+s.ka*N.A,B=ei[d.ba.S],H=s.y,$=s.O,re=s.f,ye=s.N,Ie=s.ea,Ee=s.W,_e=d.cc,Je=d.dc,Ue=d.Mc,be=d.Nc,Se=s.ka,Ge=s.ka+s.T,Ze=s.U,Ye=Ze+1>>1;for(Se==0?B(H,$,null,null,re,ye,Ie,Ee,re,ye,Ie,Ee,E,R,null,null,Ze):(B(d.ec,d.fc,H,$,_e,Je,Ue,be,re,ye,Ie,Ee,E,R-N.A,E,R,Ze),++g);Se+2<Ge;Se+=2)_e=re,Je=ye,Ue=Ie,be=Ee,ye+=s.Rc,Ee+=s.Rc,R+=2*N.A,B(H,($+=2*s.fa)-s.fa,H,$,_e,Je,Ue,be,re,ye,Ie,Ee,E,R-N.A,E,R,Ze);return $+=s.fa,s.j+Ge<s.o?(n(d.ec,d.fc,H,$,Ze),n(d.cc,d.dc,re,ye,Ye),n(d.Mc,d.Nc,Ie,Ee,Ye),g--):1&Ge||B(H,$,null,null,re,ye,Ie,Ee,re,ye,Ie,Ee,E,R+N.A,null,null,Ze),g}function bt(s,d,g){var N=s.F,E=[s.J];if(N!=null){var R=s.U,B=d.ba.S,H=B==Ao||B==So;d=d.ba.f.RGBA;var $=[0],re=s.ka;$[0]=s.T,s.Kb&&(re==0?--$[0]:(--re,E[0]-=s.width),s.j+s.ka+s.T==s.o&&($[0]=s.o-s.j-re));var ye=d.eb;re=d.fb+re*d.A,s=St(N,E[0],s.width,R,$,ye,re+(H?0:3),d.A),e(g==$),s&&Kt(B)&&pt(ye,re,H,R,$,d.A)}return 0}function Ot(s){var d=s.ma,g=d.ba.S,N=11>g,E=g==wo||g==No||g==Ao||g==pl||g==12||Kt(g);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!as(d.Oa,s,E?11:12))return 0;if(E&&Kt(g)&&tt(),s.da)alert("todo:use_scaling");else{if(N){if(d.Ib=Rt,s.Kb){if(g=s.U+1>>1,d.memory=i(s.U+2*g),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+s.U,d.Mc=d.cc,d.Nc=d.dc+g,d.Ib=Ce,tt()}}else alert("todo:EmitYUV");E&&(d.Jb=bt,N&&Fe())}if(N&&!Oc){for(s=0;256>s;++s)ch[s]=89858*(s-128)+_o>>jo,hh[s]=-22014*(s-128)+_o,dh[s]=-45773*(s-128),uh[s]=113618*(s-128)+_o>>jo;for(s=Gs;s<xl;++s)d=76283*(s-16)+_o>>jo,fh[s-Gs]=mn(d,255),ph[s-Gs]=mn(d+8>>4,15);Oc=1}return 1}function er(s){var d=s.ma,g=s.U,N=s.T;return e(!(1&s.ka)),0>=g||0>=N?0:(g=d.Ib(s,d),d.Jb!=null&&d.Jb(s,d,g),d.Dc+=g,1)}function sr(s){s.ma.memory=null}function At(s,d,g,N){return he(s,8)!=47?0:(d[0]=he(s,14)+1,g[0]=he(s,14)+1,N[0]=he(s,1),he(s,3)!=0?0:!s.h)}function ar(s,d){if(4>s)return s+1;var g=s-2>>1;return(2+(1&s)<<g)+he(d,g)+1}function $t(s,d){return 120<d?d-120:1<=(g=((g=Yd[d-1])>>4)*s+(8-(15&g)))?g:1;var g}function tr(s,d,g){var N=W(g),E=s[d+=255&N].g-8;return 0<E&&(ie(g,g.u+8),N=W(g),d+=s[d].value,d+=N&(1<<E)-1),ie(g,g.u+s[d].g),s[d].value}function _r(s,d,g){return g.g+=s.g,g.value+=s.value<<d>>>0,e(8>=g.g),s.g}function br(s,d,g){var N=s.xc;return e((d=N==0?0:s.vc[s.md*(g>>N)+(d>>N)])<s.Wb),s.Ya[d]}function rn(s,d,g,N){var E=s.ab,R=s.c*d,B=s.C;d=B+d;var H=g,$=N;for(N=s.Ta,g=s.Ua;0<E--;){var re=s.gc[E],ye=B,Ie=d,Ee=H,_e=$,Je=($=N,H=g,re.Ea);switch(e(ye<Ie),e(Ie<=re.nc),re.hc){case 2:fi(Ee,_e,(Ie-ye)*Je,$,H);break;case 0:var Ue=ye,be=Ie,Se=$,Ge=H,Ze=(vt=re).Ea;Ue==0&&(hi(Ee,_e,null,null,1,Se,Ge),et(Ee,_e+1,0,0,Ze-1,Se,Ge+1),_e+=Ze,Ge+=Ze,++Ue);for(var Ye=1<<vt.b,xt=Ye-1,mt=ht(Ze,vt.b),Tt=vt.K,vt=vt.w+(Ue>>vt.b)*mt;Ue<be;){var or=Tt,ur=vt,ir=1;for(oa(Ee,_e,Se,Ge-Ze,1,Se,Ge);ir<Ze;){var rr=(ir&~xt)+Ye;rr>Ze&&(rr=Ze),(0,v[or[ur++]>>8&15])(Ee,_e+ +ir,Se,Ge+ir-Ze,rr-ir,Se,Ge+ir),ir=rr}_e+=Ze,Ge+=Ze,++Ue&xt||(vt+=mt)}Ie!=re.nc&&n($,H-Je,$,H+(Ie-ye-1)*Je,Je);break;case 1:for(Je=Ee,be=_e,Ze=(Ee=re.Ea)-(Ge=Ee&~(Se=(_e=1<<re.b)-1)),Ue=ht(Ee,re.b),Ye=re.K,re=re.w+(ye>>re.b)*Ue;ye<Ie;){for(xt=Ye,mt=re,Tt=new de,vt=be+Ge,or=be+Ee;be<vt;)_t(xt[mt++],Tt),S(Tt,Je,be,_e,$,H),be+=_e,H+=_e;be<or&&(_t(xt[mt++],Tt),S(Tt,Je,be,Ze,$,H),be+=Ze,H+=Ze),++ye&Se||(re+=Ue)}break;case 3:if(Ee==$&&_e==H&&0<re.b){for(be=$,Ee=Je=H+(Ie-ye)*Je-(Ge=(Ie-ye)*ht(re.Ea,re.b)),_e=$,Se=H,Ue=[],Ge=(Ze=Ge)-1;0<=Ge;--Ge)Ue[Ge]=_e[Se+Ge];for(Ge=Ze-1;0<=Ge;--Ge)be[Ee+Ge]=Ue[Ge];Rr(re,ye,Ie,$,Je,$,H)}else Rr(re,ye,Ie,Ee,_e,$,H)}H=N,$=g}$!=g&&n(N,g,H,$,R)}function ri(s,d){var g=s.V,N=s.Ba+s.c*s.C,E=d-s.C;if(e(d<=s.l.o),e(16>=E),0<E){var R=s.l,B=s.Ta,H=s.Ua,$=R.width;if(rn(s,E,g,N),E=H=[H],e((g=s.C)<(N=d)),e(R.v<R.va),N>R.o&&(N=R.o),g<R.j){var re=R.j-g;g=R.j,E[0]+=re*$}if(g>=N?g=0:(E[0]+=4*R.v,R.ka=g-R.j,R.U=R.va-R.v,R.T=N-g,g=1),g){if(H=H[0],11>(g=s.ca).S){var ye=g.f.RGBA,Ie=(N=g.S,E=R.U,R=R.T,re=ye.eb,ye.A),Ee=R;for(ye=ye.fb+s.Ma*ye.A;0<Ee--;){var _e=B,Je=H,Ue=E,be=re,Se=ye;switch(N){case xo:k(_e,Je,Ue,be,Se);break;case wo:q(_e,Je,Ue,be,Se);break;case ml:q(_e,Je,Ue,be,Se),pt(be,Se,0,Ue,1,0);break;case Ac:ve(_e,Je,Ue,be,Se);break;case No:ct(_e,Je,Ue,be,Se,1);break;case gl:ct(_e,Je,Ue,be,Se,1),pt(be,Se,0,Ue,1,0);break;case Ao:ct(_e,Je,Ue,be,Se,0);break;case So:ct(_e,Je,Ue,be,Se,0),pt(be,Se,1,Ue,1,0);break;case pl:Z(_e,Je,Ue,be,Se);break;case vl:Z(_e,Je,Ue,be,Se),wt(be,Se,Ue,1,0);break;case Sc:le(_e,Je,Ue,be,Se);break;default:e(0)}H+=$,ye+=Ie}s.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(s.Ma<=g.height)}}s.C=d,e(s.C<=s.i)}function ni(s){var d;if(0<s.ua)return 0;for(d=0;d<s.Wb;++d){var g=s.Ya[d].G,N=s.Ya[d].H;if(0<g[1][N[1]+0].g||0<g[2][N[2]+0].g||0<g[3][N[3]+0].g)return 0}return 1}function Hr(s,d,g,N,E,R){if(s.Z!=0){var B=s.qd,H=s.rd;for(e(La[s.Z]!=null);d<g;++d)La[s.Z](B,H,N,E,N,E,R),B=N,H=E,E+=R;s.qd=B,s.rd=H}}function nn(s,d){var g=s.l.ma,N=g.Z==0||g.Z==1?s.l.j:s.C;if(N=s.C<N?N:s.C,e(d<=s.l.o),d>N){var E=s.l.width,R=g.ca,B=g.tb+E*N,H=s.V,$=s.Ba+s.c*N,re=s.gc;e(s.ab==1),e(re[0].hc==3),o(re[0],N,d,H,$,R,B),Hr(g,N,d,R,B,E)}s.C=s.Ma=d}function Wr(s,d,g,N,E,R,B){var H=s.$/N,$=s.$%N,re=s.m,ye=s.s,Ie=g+s.$,Ee=Ie;E=g+N*E;var _e=g+N*R,Je=280+ye.ua,Ue=s.Pb?H:16777216,be=0<ye.ua?ye.Wa:null,Se=ye.wc,Ge=Ie<_e?br(ye,$,H):null;e(s.C<R),e(_e<=E);var Ze=!1;e:for(;;){for(;Ze||Ie<_e;){var Ye=0;if(H>=Ue){var xt=Ie-g;e((Ue=s).Pb),Ue.wd=Ue.m,Ue.xd=xt,0<Ue.s.ua&&qe(Ue.s.Wa,Ue.s.vb),Ue=H+Qd}if($&Se||(Ge=br(ye,$,H)),e(Ge!=null),Ge.Qb&&(d[Ie]=Ge.qb,Ze=!0),!Ze)if(oe(re),Ge.jc){Ye=re,xt=d;var mt=Ie,Tt=Ge.pd[W(Ye)&Jt-1];e(Ge.jc),256>Tt.g?(ie(Ye,Ye.u+Tt.g),xt[mt]=Tt.value,Ye=0):(ie(Ye,Ye.u+Tt.g-256),e(256<=Tt.value),Ye=Tt.value),Ye==0&&(Ze=!0)}else Ye=tr(Ge.G[0],Ge.H[0],re);if(re.h)break;if(Ze||256>Ye){if(!Ze)if(Ge.nd)d[Ie]=(Ge.qb|Ye<<8)>>>0;else{if(oe(re),Ze=tr(Ge.G[1],Ge.H[1],re),oe(re),xt=tr(Ge.G[2],Ge.H[2],re),mt=tr(Ge.G[3],Ge.H[3],re),re.h)break;d[Ie]=(mt<<24|Ze<<16|Ye<<8|xt)>>>0}if(Ze=!1,++Ie,++$>=N&&($=0,++H,B!=null&&H<=R&&!(H%16)&&B(s,H),be!=null))for(;Ee<Ie;)Ye=d[Ee++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye}else if(280>Ye){if(Ye=ar(Ye-256,re),xt=tr(Ge.G[4],Ge.H[4],re),oe(re),xt=$t(N,xt=ar(xt,re)),re.h)break;if(Ie-g<xt||E-Ie<Ye)break e;for(mt=0;mt<Ye;++mt)d[Ie+mt]=d[Ie+mt-xt];for(Ie+=Ye,$+=Ye;$>=N;)$-=N,++H,B!=null&&H<=R&&!(H%16)&&B(s,H);if(e(Ie<=E),$&Se&&(Ge=br(ye,$,H)),be!=null)for(;Ee<Ie;)Ye=d[Ee++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye}else{if(!(Ye<Je))break e;for(Ze=Ye-280,e(be!=null);Ee<Ie;)Ye=d[Ee++],be.X[(506832829*Ye&4294967295)>>>be.Mb]=Ye;Ye=Ie,e(!(Ze>>>(xt=be).Xa)),d[Ye]=xt.X[Ze],Ze=!0}Ze||e(re.h==Q(re))}if(s.Pb&&re.h&&Ie<E)e(s.m.h),s.a=5,s.m=s.wd,s.$=s.xd,0<s.s.ua&&qe(s.s.vb,s.s.Wa);else{if(re.h)break e;B!=null&&B(s,H>R?R:H),s.a=0,s.$=Ie-g}return 1}return s.a=3,0}function Sn(s){e(s!=null),s.vc=null,s.yc=null,s.Ya=null;var d=s.Wa;d!=null&&(d.X=null),s.vb=null,e(s!=null)}function kn(){var s=new Ps;return s==null?null:(s.a=0,s.xb=Pc,Cr("Predictor","VP8LPredictors"),Cr("Predictor","VP8LPredictors_C"),Cr("PredictorAdd","VP8LPredictorsAdd"),Cr("PredictorAdd","VP8LPredictorsAdd_C"),fi=gt,S=Nt,k=lt,q=hr,Z=Wt,le=Tr,ve=Gt,U.VP8LMapColor32b=la,U.VP8LMapColor8b=f,s)}function Gr(s,d,g,N,E){var R=1,B=[s],H=[d],$=N.m,re=N.s,ye=null,Ie=0;e:for(;;){if(g)for(;R&&he($,1);){var Ee=B,_e=H,Je=N,Ue=1,be=Je.m,Se=Je.gc[Je.ab],Ge=he(be,2);if(Je.Oc&1<<Ge)R=0;else{switch(Je.Oc|=1<<Ge,Se.hc=Ge,Se.Ea=Ee[0],Se.nc=_e[0],Se.K=[null],++Je.ab,e(4>=Je.ab),Ge){case 0:case 1:Se.b=he(be,3)+2,Ue=Gr(ht(Se.Ea,Se.b),ht(Se.nc,Se.b),0,Je,Se.K),Se.K=Se.K[0];break;case 3:var Ze,Ye=he(be,8)+1,xt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Ee[0]=ht(Se.Ea,xt),Se.b=xt,Ze=Ue=Gr(Ye,1,0,Je,Se.K)){var mt,Tt=Ye,vt=Se,or=1<<(8>>vt.b),ur=i(or);if(ur==null)Ze=0;else{var ir=vt.K[0],rr=vt.w;for(ur[0]=vt.K[0][0],mt=1;mt<1*Tt;++mt)ur[mt]=rt(ir[rr+mt],ur[mt-1]);for(;mt<4*or;++mt)ur[mt]=0;vt.K[0]=null,vt.K[0]=ur,Ze=1}}Ue=Ze;break;case 2:break;default:e(0)}R=Ue}}if(B=B[0],H=H[0],R&&he($,1)&&!(R=1<=(Ie=he($,4))&&11>=Ie)){N.a=3;break e}var mr;if(mr=R)t:{var pr,Vt,Kr,On=N,Vr=B,In=H,dr=Ie,Kn=g,Vn=On.m,on=On.s,hn=[null],jn=1,ti=0,Ti=Jd[dr];r:for(;;){if(Kn&&he(Vn,1)){var ln=he(Vn,3)+2,da=ht(Vr,ln),ss=ht(In,ln),Ls=da*ss;if(!Gr(da,ss,0,On,hn))break r;for(hn=hn[0],on.xc=ln,pr=0;pr<Ls;++pr){var ka=hn[pr]>>8&65535;hn[pr]=ka,ka>=jn&&(jn=ka+1)}}if(Vn.h)break r;for(Vt=0;5>Vt;++Vt){var Ir=jc[Vt];!Vt&&0<dr&&(Ir+=1<<dr),ti<Ir&&(ti=Ir)}var wl=c(jn*Ti,A),Tc=jn,Mc=c(Tc,V);if(Mc==null)var Lo=null;else e(65536>=Tc),Lo=Mc;var Ys=i(ti);if(Lo==null||Ys==null||wl==null){On.a=1;break r}var ko=wl;for(pr=Kr=0;pr<jn;++pr){var mi=Lo[pr],ks=mi.G,Cs=mi.H,Rc=0,Co=1,qc=0;for(Vt=0;5>Vt;++Vt){Ir=jc[Vt],ks[Vt]=ko,Cs[Vt]=Kr,!Vt&&0<dr&&(Ir+=1<<dr);i:{var Fo,Nl=Ir,Do=On,Js=Ys,vh=ko,yh=Kr,Al=0,Ca=Do.m,bh=he(Ca,1);if(a(Js,0,0,Nl),bh){var xh=he(Ca,1)+1,wh=he(Ca,1),Bc=he(Ca,wh==0?1:8);Js[Bc]=1,xh==2&&(Js[Bc=he(Ca,8)]=1);var Oo=1}else{var Uc=i(19),zc=he(Ca,4)+4;if(19<zc){Do.a=3;var Io=0;break i}for(Fo=0;Fo<zc;++Fo)Uc[Gd[Fo]]=he(Ca,3);var Sl=void 0,Qs=void 0,Hc=Do,Nh=Uc,Eo=Nl,Wc=Js,jl=0,Fa=Hc.m,Kc=8,Vc=c(128,A);n:for(;D(Vc,0,7,Nh,19);){if(he(Fa,1)){var Ah=2+2*he(Fa,3);if((Sl=2+he(Fa,Ah))>Eo)break n}else Sl=Eo;for(Qs=0;Qs<Eo&&Sl--;){oe(Fa);var $c=Vc[0+(127&W(Fa))];ie(Fa,Fa.u+$c.g);var Fs=$c.value;if(16>Fs)Wc[Qs++]=Fs,Fs!=0&&(Kc=Fs);else{var Sh=Fs==16,Gc=Fs-16,jh=Vd[Gc],Yc=he(Fa,Kd[Gc])+jh;if(Qs+Yc>Eo)break n;for(var _h=Sh?Kc:0;0<Yc--;)Wc[Qs++]=_h}}jl=1;break n}jl||(Hc.a=3),Oo=jl}(Oo=Oo&&!Ca.h)&&(Al=D(vh,yh,8,Js,Nl)),Oo&&Al!=0?Io=Al:(Do.a=3,Io=0)}if(Io==0)break r;if(Co&&$d[Vt]==1&&(Co=ko[Kr].g==0),Rc+=ko[Kr].g,Kr+=Io,3>=Vt){var Xs,_l=Ys[0];for(Xs=1;Xs<Ir;++Xs)Ys[Xs]>_l&&(_l=Ys[Xs]);qc+=_l}}if(mi.nd=Co,mi.Qb=0,Co&&(mi.qb=(ks[3][Cs[3]+0].value<<24|ks[1][Cs[1]+0].value<<16|ks[2][Cs[2]+0].value)>>>0,Rc==0&&256>ks[0][Cs[0]+0].value&&(mi.Qb=1,mi.qb+=ks[0][Cs[0]+0].value<<8)),mi.jc=!mi.Qb&&6>qc,mi.jc){var To,ha=mi;for(To=0;To<Jt;++To){var Da=To,Oa=ha.pd[Da],Mo=ha.G[0][ha.H[0]+Da];256<=Mo.value?(Oa.g=Mo.g+256,Oa.value=Mo.value):(Oa.g=0,Oa.value=0,Da>>=_r(Mo,8,Oa),Da>>=_r(ha.G[1][ha.H[1]+Da],16,Oa),Da>>=_r(ha.G[2][ha.H[2]+Da],0,Oa),_r(ha.G[3][ha.H[3]+Da],24,Oa))}}}on.vc=hn,on.Wb=jn,on.Ya=Lo,on.yc=wl,mr=1;break t}mr=0}if(!(R=mr)){N.a=3;break e}if(0<Ie){if(re.ua=1<<Ie,!Ct(re.Wa,Ie)){N.a=1,R=0;break e}}else re.ua=0;var Pl=N,Jc=B,Ph=H,Ll=Pl.s,kl=Ll.xc;if(Pl.c=Jc,Pl.i=Ph,Ll.md=ht(Jc,kl),Ll.wc=kl==0?-1:(1<<kl)-1,g){N.xb=ih;break e}if((ye=i(B*H))==null){N.a=1,R=0;break e}R=(R=Wr(N,ye,0,B,H,H,null))&&!$.h;break e}return R?(E!=null?E[0]=ye:(e(ye==null),e(g)),N.$=0,g||Sn(re)):Sn(re),R}function ji(s,d){var g=s.c*s.i,N=g+d+16*d;return e(s.c<=d),s.V=i(N),s.V==null?(s.Ta=null,s.Ua=0,s.a=1,0):(s.Ta=s.V,s.Ua=s.Ba+g+d,1)}function Cn(s,d){var g=s.C,N=d-g,E=s.V,R=s.Ba+s.c*g;for(e(d<=s.l.o);0<N;){var B=16<N?16:N,H=s.l.ma,$=s.l.width,re=$*B,ye=H.ca,Ie=H.tb+$*g,Ee=s.Ta,_e=s.Ua;rn(s,B,E,R),kt(Ee,_e,ye,Ie,re),Hr(H,g,g+B,ye,Ie,$),N-=B,E+=B*s.c,g+=B}e(g==d),s.C=s.Ma=d}function Hi(){this.ub=this.yd=this.td=this.Rb=0}function _i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Yn(){this.Yb=function(){var s=[];return function d(g,N,E){for(var R=E[N],B=0;B<R&&(g.push(E.length>N+1?[]:0),!(E.length<N+1));B++)d(g[B],N+1,E)}(s,0,[3,11]),s}()}function Mn(){this.jb=i(3),this.Wc=u([4,8],Yn),this.Xc=u([4,17],Yn)}function xs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Rn(){this.ld=this.La=this.dd=this.tc=0}function Wi(){this.Na=this.la=0}function Va(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ki(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ii(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rn),this.Y=0,this.ya=Array(new Ki),this.aa=0,this.l=new Vi}function $a(){this.y=i(16),this.f=i(8),this.ea=i(8)}function va(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new Hi,this.Kc=new _i,this.ed=new xs,this.Qa=new fr,this.Ic=this.$c=this.Aa=0,this.D=new ii,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Oe),this.ia=0,this.pb=c(4,Va),this.Pa=new Mn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $a),this.Hd=0,this.rb=Array(new Wi),this.sb=0,this.wa=Array(new Rn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ki),this.L=this.aa=0,this.gd=u([4,2],Rn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yt(){var s=new va;return s!=null&&(s.a=0,s.sc="OK",s.cb=0,s.Xb=0,$s||($s=lr)),s}function Sr(s,d,g){return s.a==0&&(s.a=d,s.sc=g,s.cb=0),0}function Ga(s,d,g){return 3<=g&&s[d+0]==157&&s[d+1]==1&&s[d+2]==42}function Ya(s,d){if(s==null)return 0;if(s.a=0,s.sc="OK",d==null)return Sr(s,2,"null VP8Io passed to VP8GetHeaders()");var g=d.data,N=d.w,E=d.ha;if(4>E)return Sr(s,7,"Truncated header.");var R=g[N+0]|g[N+1]<<8|g[N+2]<<16,B=s.Od;if(B.Rb=!(1&R),B.td=R>>1&7,B.yd=R>>4&1,B.ub=R>>5,3<B.td)return Sr(s,3,"Incorrect keyframe parameters.");if(!B.yd)return Sr(s,4,"Frame not displayable.");N+=3,E-=3;var H=s.Kc;if(B.Rb){if(7>E)return Sr(s,7,"cannot parse picture header");if(!Ga(g,N,E))return Sr(s,3,"Bad code word");H.c=16383&(g[N+4]<<8|g[N+3]),H.Td=g[N+4]>>6,H.i=16383&(g[N+6]<<8|g[N+5]),H.Ud=g[N+6]>>6,N+=7,E-=7,s.za=H.c+15>>4,s.Ub=H.i+15>>4,d.width=H.c,d.height=H.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,a((R=s.Pa).jb,0,255,R.jb.length),e((R=s.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,a(R.Zb,0,0,R.Zb.length),a(R.Lb,0,0,R.Lb)}if(B.ub>E)return Sr(s,7,"bad partition length");fe(R=s.m,g,N,B.ub),N+=B.ub,E-=B.ub,B.Rb&&(H.Ld=De(R),H.Kd=De(R)),H=s.Qa;var $,re=s.Pa;if(e(R!=null),e(H!=null),H.Cb=De(R),H.Cb){if(H.Bb=De(R),De(R)){for(H.Fb=De(R),$=0;4>$;++$)H.Zb[$]=De(R)?J(R,7):0;for($=0;4>$;++$)H.Lb[$]=De(R)?J(R,6):0}if(H.Bb)for($=0;3>$;++$)re.jb[$]=De(R)?Y(R,8):255}else H.Bb=0;if(R.Ka)return Sr(s,3,"cannot parse segment header");if((H=s.ed).zd=De(R),H.Tb=Y(R,6),H.wb=Y(R,3),H.Pc=De(R),H.Pc&&De(R)){for(re=0;4>re;++re)De(R)&&(H.vd[re]=J(R,6));for(re=0;4>re;++re)De(R)&&(H.od[re]=J(R,6))}if(s.L=H.Tb==0?0:H.zd?1:2,R.Ka)return Sr(s,3,"cannot parse filter header");var ye=E;if(E=$=N,N=$+ye,H=ye,s.Xb=(1<<Y(s.m,2))-1,ye<3*(re=s.Xb))g=7;else{for($+=3*re,H-=3*re,ye=0;ye<re;++ye){var Ie=g[E+0]|g[E+1]<<8|g[E+2]<<16;Ie>H&&(Ie=H),fe(s.Jc[+ye],g,$,Ie),$+=Ie,H-=Ie,E+=3}fe(s.Jc[+re],g,$,H),g=$<N?0:5}if(g!=0)return Sr(s,g,"cannot parse partitions");for(g=Y($=s.m,7),E=De($)?J($,4):0,N=De($)?J($,4):0,H=De($)?J($,4):0,re=De($)?J($,4):0,$=De($)?J($,4):0,ye=s.Qa,Ie=0;4>Ie;++Ie){if(ye.Cb){var Ee=ye.Zb[Ie];ye.Fb||(Ee+=g)}else{if(0<Ie){s.pb[Ie]=s.pb[0];continue}Ee=g}var _e=s.pb[Ie];_e.Sc[0]=yl[mn(Ee+E,127)],_e.Sc[1]=bl[mn(Ee+0,127)],_e.Eb[0]=2*yl[mn(Ee+N,127)],_e.Eb[1]=101581*bl[mn(Ee+H,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=yl[mn(Ee+re,117)],_e.Qc[1]=bl[mn(Ee+$,127)],_e.lc=Ee+$}if(!B.Rb)return Sr(s,4,"Not a key frame.");for(De(R),B=s.Pa,g=0;4>g;++g){for(E=0;8>E;++E)for(N=0;3>N;++N)for(H=0;11>H;++H)re=me(R,rh[g][E][N][H])?Y(R,8):eh[g][E][N][H],B.Wc[g][E].Yb[N][H]=re;for(E=0;17>E;++E)B.Xc[g][E]=B.Wc[g][nh[E]]}return s.kc=De(R),s.kc&&(s.Bd=Y(R,8)),s.cb=1}function lr(s,d,g,N,E,R,B){var H=d[E].Yb[g];for(g=0;16>E;++E){if(!me(s,H[g+0]))return E;for(;!me(s,H[g+1]);)if(H=d[++E].Yb[0],g=0,E==16)return 16;var $=d[E+1].Yb;if(me(s,H[g+2])){var re=s,ye=0;if(me(re,(Ee=H)[(Ie=g)+3]))if(me(re,Ee[Ie+6])){for(H=0,Ie=2*(ye=me(re,Ee[Ie+8]))+(Ee=me(re,Ee[Ie+9+ye])),ye=0,Ee=Xd[Ie];Ee[H];++H)ye+=ye+me(re,Ee[H]);ye+=3+(8<<Ie)}else me(re,Ee[Ie+7])?(ye=7+2*me(re,165),ye+=me(re,145)):ye=5+me(re,159);else ye=me(re,Ee[Ie+4])?3+me(re,Ee[Ie+5]):2;H=$[2]}else ye=1,H=$[1];$=B+Zd[E],0>(re=s).b&&Pe(re);var Ie,Ee=re.b,_e=(Ie=re.Ca>>1)-(re.I>>Ee)>>31;--re.b,re.Ca+=_e,re.Ca|=1,re.I-=(Ie+1&_e)<<Ee,R[$]=((ye^_e)-_e)*N[(0<E)+0]}return 16}function ai(s){var d=s.rb[s.sb-1];d.la=0,d.Na=0,a(s.zc,0,0,s.zc.length),s.ja=0}function $i(s,d){if(s==null)return 0;if(d==null)return Sr(s,2,"NULL VP8Io parameter in VP8Decode().");if(!s.cb&&!Ya(s,d))return 0;if(e(s.cb),d.ac==null||d.ac(d)){d.ob&&(s.L=0);var g=Po[s.L];if(s.L==2?(s.yb=0,s.zb=0):(s.yb=d.v-g>>4,s.zb=d.j-g>>4,0>s.yb&&(s.yb=0),0>s.zb&&(s.zb=0)),s.Va=d.o+15+g>>4,s.Hb=d.va+15+g>>4,s.Hb>s.za&&(s.Hb=s.za),s.Va>s.Ub&&(s.Va=s.Ub),0<s.L){var N=s.ed;for(g=0;4>g;++g){var E;if(s.Qa.Cb){var R=s.Qa.Lb[g];s.Qa.Fb||(R+=N.Tb)}else R=N.Tb;for(E=0;1>=E;++E){var B=s.gd[g][E],H=R;if(N.Pc&&(H+=N.vd[0],E&&(H+=N.od[0])),0<(H=0>H?0:63<H?63:H)){var $=H;0<N.wb&&($=4<N.wb?$>>2:$>>1)>9-N.wb&&($=9-N.wb),1>$&&($=1),B.dd=$,B.tc=2*H+$,B.ld=40<=H?2:15<=H?1:0}else B.tc=0;B.La=E}}}g=0}else Sr(s,6,"Frame setup failed"),g=s.a;if(g=g==0){if(g){s.$c=0,0<s.Aa||(s.Ic=gh);e:{g=s.Ic,N=4*($=s.za);var re=32*$,ye=$+1,Ie=0<s.L?$*(0<s.Aa?2:1):0,Ee=(s.Aa==2?2:1)*$;if((B=N+832+(E=3*(16*g+Po[s.L])/2*re)+(R=s.Fa!=null&&0<s.Fa.length?s.Kc.c*s.Kc.i:0))!=B)g=0;else{if(B>s.Vb){if(s.Vb=0,s.Ec=i(B),s.Fc=0,s.Ec==null){g=Sr(s,1,"no memory during frame initialization.");break e}s.Vb=B}B=s.Ec,H=s.Fc,s.Ac=B,s.Bc=H,H+=N,s.Gd=c(re,$a),s.Hd=0,s.rb=c(ye+1,Wi),s.sb=1,s.wa=Ie?c(Ie,Rn):null,s.Y=0,s.D.Nb=0,s.D.wa=s.wa,s.D.Y=s.Y,0<s.Aa&&(s.D.Y+=$),e(!0),s.oc=B,s.pc=H,H+=832,s.ya=c(Ee,Ki),s.aa=0,s.D.ya=s.ya,s.D.aa=s.aa,s.Aa==2&&(s.D.aa+=$),s.R=16*$,s.B=8*$,$=(re=Po[s.L])*s.R,re=re/2*s.B,s.sa=B,s.ta=H+$,s.qa=s.sa,s.ra=s.ta+16*g*s.R+re,s.Ha=s.qa,s.Ia=s.ra+8*g*s.B+re,s.$c=0,H+=E,s.mb=R?B:null,s.nb=R?H:null,e(H+R<=s.Fc+s.Vb),ai(s),a(s.Ac,s.Bc,0,N),g=1}}if(g){if(d.ka=0,d.y=s.sa,d.O=s.ta,d.f=s.qa,d.N=s.ra,d.ea=s.Ha,d.Vd=s.Ia,d.fa=s.R,d.Rc=s.B,d.F=null,d.J=0,!ca){for(g=-255;255>=g;++g)nr[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)It[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Or[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)kr[255+g]=0>g?0:255<g?255:g;ca=1}we=Ws,je=ya,ke=Qa,ge=Gi,Ne=Xa,ce=Ja,Le=Fi,Ae=Qn,Te=wa,Me=na,Re=_s,Ve=xa,it=ia,ut=Na,at=js,st=Jn,ft=zn,ot=rs,pi[0]=Fn,pi[1]=Za,pi[2]=Yi,pi[3]=Ji,pi[4]=Un,pi[5]=cn,pi[6]=Ns,pi[7]=Qi,pi[8]=es,pi[9]=As,Pa[0]=Bn,Pa[1]=Vs,Pa[2]=Pr,Pa[3]=qn,Pa[4]=Yr,Pa[5]=ws,Pa[6]=Lr,ua[0]=Ci,ua[1]=Ks,ua[2]=Xi,ua[3]=Zi,ua[4]=ta,ua[5]=ea,ua[6]=ts,g=1}else g=0}g&&(g=function(_e,Je){for(_e.M=0;_e.M<_e.Va;++_e.M){var Ue,be=_e.Jc[_e.M&_e.Xb],Se=_e.m,Ge=_e;for(Ue=0;Ue<Ge.za;++Ue){var Ze=Se,Ye=Ge,xt=Ye.Ac,mt=Ye.Bc+4*Ue,Tt=Ye.zc,vt=Ye.ya[Ye.aa+Ue];if(Ye.Qa.Bb?vt.$b=me(Ze,Ye.Pa.jb[0])?2+me(Ze,Ye.Pa.jb[2]):me(Ze,Ye.Pa.jb[1]):vt.$b=0,Ye.kc&&(vt.Ad=me(Ze,Ye.Bd)),vt.Za=!me(Ze,145)+0,vt.Za){var or=vt.Ob,ur=0;for(Ye=0;4>Ye;++Ye){var ir,rr=Tt[0+Ye];for(ir=0;4>ir;++ir){rr=th[xt[mt+ir]][rr];for(var mr=_c[me(Ze,rr[0])];0<mr;)mr=_c[2*mr+me(Ze,rr[mr])];rr=-mr,xt[mt+ir]=rr}n(or,ur,xt,mt,4),ur+=4,Tt[0+Ye]=rr}}else rr=me(Ze,156)?me(Ze,128)?1:3:me(Ze,163)?2:0,vt.Ob[0]=rr,a(xt,mt,rr,4),a(Tt,0,rr,4);vt.Dd=me(Ze,142)?me(Ze,114)?me(Ze,183)?1:3:2:0}if(Ge.m.Ka)return Sr(_e,7,"Premature end-of-partition0 encountered.");for(;_e.ja<_e.za;++_e.ja){if(Ge=be,Ze=(Se=_e).rb[Se.sb-1],xt=Se.rb[Se.sb+Se.ja],Ue=Se.ya[Se.aa+Se.ja],mt=Se.kc?Ue.Ad:0)Ze.la=xt.la=0,Ue.Za||(Ze.Na=xt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var pr,Vt;if(Ze=xt,xt=Ge,mt=Se.Pa.Xc,Tt=Se.ya[Se.aa+Se.ja],vt=Se.pb[Tt.$b],Ye=Tt.ad,or=0,ur=Se.rb[Se.sb-1],rr=ir=0,a(Ye,or,0,384),Tt.Za)var Kr=0,On=mt[3];else{mr=i(16);var Vr=Ze.Na+ur.Na;if(Vr=$s(xt,mt[1],Vr,vt.Eb,0,mr,0),Ze.Na=ur.Na=(0<Vr)+0,1<Vr)we(mr,0,Ye,or);else{var In=mr[0]+3>>3;for(mr=0;256>mr;mr+=16)Ye[or+mr]=In}Kr=1,On=mt[0]}var dr=15&Ze.la,Kn=15&ur.la;for(mr=0;4>mr;++mr){var Vn=1&Kn;for(In=Vt=0;4>In;++In)dr=dr>>1|(Vn=(Vr=$s(xt,On,Vr=Vn+(1&dr),vt.Sc,Kr,Ye,or))>Kr)<<7,Vt=Vt<<2|(3<Vr?3:1<Vr?2:Ye[or+0]!=0),or+=16;dr>>=4,Kn=Kn>>1|Vn<<7,ir=(ir<<8|Vt)>>>0}for(On=dr,Kr=Kn>>4,pr=0;4>pr;pr+=2){for(Vt=0,dr=Ze.la>>4+pr,Kn=ur.la>>4+pr,mr=0;2>mr;++mr){for(Vn=1&Kn,In=0;2>In;++In)Vr=Vn+(1&dr),dr=dr>>1|(Vn=0<(Vr=$s(xt,mt[2],Vr,vt.Qc,0,Ye,or)))<<3,Vt=Vt<<2|(3<Vr?3:1<Vr?2:Ye[or+0]!=0),or+=16;dr>>=2,Kn=Kn>>1|Vn<<5}rr|=Vt<<4*pr,On|=dr<<4<<pr,Kr|=(240&Kn)<<pr}Ze.la=On,ur.la=Kr,Tt.Hc=ir,Tt.Gc=rr,Tt.ia=43690&rr?0:vt.ia,mt=!(ir|rr)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[Ue.$b][Ue.Za],Se.wa[Se.Y+Se.ja].La|=!mt),Ge.Ka)return Sr(_e,7,"Premature end-of-file encountered.")}if(ai(_e),Se=Je,Ge=1,Ue=(be=_e).D,Ze=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Ue.M=be.M,Ue.uc=Ze,is(be,Ue),Ge=1,Ue=(Vt=be.D).Nb,Ze=(rr=Po[be.L])*be.R,xt=rr/2*be.B,mr=16*Ue*be.R,In=8*Ue*be.B,mt=be.sa,Tt=be.ta-Ze+mr,vt=be.qa,Ye=be.ra-xt+In,or=be.Ha,ur=be.Ia-xt+In,Kn=(dr=Vt.M)==0,ir=dr>=be.Va-1,be.Aa==2&&is(be,Vt),Vt.uc)for(Vn=(Vr=be).D.M,e(Vr.D.uc),Vt=Vr.yb;Vt<Vr.Hb;++Vt){Kr=Vt,On=Vn;var on=(hn=(Ir=Vr).D).Nb;pr=Ir.R;var hn=hn.wa[hn.Y+Kr],jn=Ir.sa,ti=Ir.ta+16*on*pr+16*Kr,Ti=hn.dd,ln=hn.tc;if(ln!=0)if(e(3<=ln),Ir.L==1)0<Kr&&st(jn,ti,pr,ln+4),hn.La&&ot(jn,ti,pr,ln),0<On&&at(jn,ti,pr,ln+4),hn.La&&ft(jn,ti,pr,ln);else{var da=Ir.B,ss=Ir.qa,Ls=Ir.ra+8*on*da+8*Kr,ka=Ir.Ha,Ir=Ir.Ia+8*on*da+8*Kr;on=hn.ld,0<Kr&&(Ae(jn,ti,pr,ln+4,Ti,on),Me(ss,Ls,ka,Ir,da,ln+4,Ti,on)),hn.La&&(Ve(jn,ti,pr,ln,Ti,on),ut(ss,Ls,ka,Ir,da,ln,Ti,on)),0<On&&(Le(jn,ti,pr,ln+4,Ti,on),Te(ss,Ls,ka,Ir,da,ln+4,Ti,on)),hn.La&&(Re(jn,ti,pr,ln,Ti,on),it(ss,Ls,ka,Ir,da,ln,Ti,on))}}if(be.ia&&alert("todo:DitherRow"),Se.put!=null){if(Vt=16*dr,dr=16*(dr+1),Kn?(Se.y=be.sa,Se.O=be.ta+mr,Se.f=be.qa,Se.N=be.ra+In,Se.ea=be.Ha,Se.W=be.Ia+In):(Vt-=rr,Se.y=mt,Se.O=Tt,Se.f=vt,Se.N=Ye,Se.ea=or,Se.W=ur),ir||(dr-=rr),dr>Se.o&&(dr=Se.o),Se.F=null,Se.J=null,be.Fa!=null&&0<be.Fa.length&&Vt<dr&&(Se.J=aa(be,Se,Vt,dr-Vt),Se.F=be.mb,Se.F==null&&Se.F.length==0)){Ge=Sr(be,3,"Could not decode alpha data.");break e}Vt<Se.j&&(rr=Se.j-Vt,Vt=Se.j,e(!(1&rr)),Se.O+=be.R*rr,Se.N+=be.B*(rr>>1),Se.W+=be.B*(rr>>1),Se.F!=null&&(Se.J+=Se.width*rr)),Vt<dr&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Vt-Se.j,Se.U=Se.va-Se.v,Se.T=dr-Vt,Ge=Se.put(Se))}Ue+1!=be.Ic||ir||(n(be.sa,be.ta-Ze,mt,Tt+16*be.R,Ze),n(be.qa,be.ra-xt,vt,Ye+8*be.B,xt),n(be.Ha,be.Ia-xt,or,ur+8*be.B,xt))}if(!Ge)return Sr(_e,6,"Output aborted.")}return 1}(s,d)),d.bc!=null&&d.bc(d),g&=1}return g?(s.cb=0,g):0}function an(s,d,g,N,E){E=s[d+g+32*N]+(E>>3),s[d+g+32*N]=-256&E?0>E?0:255:E}function Pi(s,d,g,N,E,R){an(s,d,0,g,N+E),an(s,d,1,g,N+R),an(s,d,2,g,N-R),an(s,d,3,g,N-E)}function sn(s){return(20091*s>>16)+s}function Li(s,d,g,N){var E,R=0,B=i(16);for(E=0;4>E;++E){var H=s[d+0]+s[d+8],$=s[d+0]-s[d+8],re=(35468*s[d+4]>>16)-sn(s[d+12]),ye=sn(s[d+4])+(35468*s[d+12]>>16);B[R+0]=H+ye,B[R+1]=$+re,B[R+2]=$-re,B[R+3]=H-ye,R+=4,d++}for(E=R=0;4>E;++E)H=(s=B[R+0]+4)+B[R+8],$=s-B[R+8],re=(35468*B[R+4]>>16)-sn(B[R+12]),an(g,N,0,0,H+(ye=sn(B[R+4])+(35468*B[R+12]>>16))),an(g,N,1,0,$+re),an(g,N,2,0,$-re),an(g,N,3,0,H-ye),R++,N+=32}function Ja(s,d,g,N){var E=s[d+0]+4,R=35468*s[d+4]>>16,B=sn(s[d+4]),H=35468*s[d+1]>>16;Pi(g,N,0,E+B,s=sn(s[d+1]),H),Pi(g,N,1,E+R,s,H),Pi(g,N,2,E-R,s,H),Pi(g,N,3,E-B,s,H)}function ya(s,d,g,N,E){Li(s,d,g,N),E&&Li(s,d+16,g,N+4)}function Qa(s,d,g,N){je(s,d+0,g,N,1),je(s,d+32,g,N+128,1)}function Gi(s,d,g,N){var E;for(s=s[d+0]+4,E=0;4>E;++E)for(d=0;4>d;++d)an(g,N,d,E,s)}function Xa(s,d,g,N){s[d+0]&&ge(s,d+0,g,N),s[d+16]&&ge(s,d+16,g,N+4),s[d+32]&&ge(s,d+32,g,N+128),s[d+48]&&ge(s,d+48,g,N+128+4)}function Ws(s,d,g,N){var E,R=i(16);for(E=0;4>E;++E){var B=s[d+0+E]+s[d+12+E],H=s[d+4+E]+s[d+8+E],$=s[d+4+E]-s[d+8+E],re=s[d+0+E]-s[d+12+E];R[0+E]=B+H,R[8+E]=B-H,R[4+E]=re+$,R[12+E]=re-$}for(E=0;4>E;++E)B=(s=R[0+4*E]+3)+R[3+4*E],H=R[1+4*E]+R[2+4*E],$=R[1+4*E]-R[2+4*E],re=s-R[3+4*E],g[N+0]=B+H>>3,g[N+16]=re+$>>3,g[N+32]=B-H>>3,g[N+48]=re-$>>3,N+=64}function Qt(s,d,g){var N,E=d-32,R=dn,B=255-s[E-1];for(N=0;N<g;++N){var H,$=R,re=B+s[d-1];for(H=0;H<g;++H)s[d+H]=$[re+s[E+H]];d+=32}}function Za(s,d){Qt(s,d,4)}function Ks(s,d){Qt(s,d,8)}function Vs(s,d){Qt(s,d,16)}function Pr(s,d){var g;for(g=0;16>g;++g)n(s,d+32*g,s,d-32,16)}function qn(s,d){var g;for(g=16;0<g;--g)a(s,d,s[d-1],16),d+=32}function si(s,d,g){var N;for(N=0;16>N;++N)a(d,g+32*N,s,16)}function Bn(s,d){var g,N=16;for(g=0;16>g;++g)N+=s[d-1+32*g]+s[d+g-32];si(N>>5,s,d)}function Yr(s,d){var g,N=8;for(g=0;16>g;++g)N+=s[d-1+32*g];si(N>>4,s,d)}function ws(s,d){var g,N=8;for(g=0;16>g;++g)N+=s[d+g-32];si(N>>4,s,d)}function Lr(s,d){si(128,s,d)}function Dt(s,d,g){return s+2*d+g+2>>2}function Yi(s,d){var g,N=d-32;for(N=new Uint8Array([Dt(s[N-1],s[N+0],s[N+1]),Dt(s[N+0],s[N+1],s[N+2]),Dt(s[N+1],s[N+2],s[N+3]),Dt(s[N+2],s[N+3],s[N+4])]),g=0;4>g;++g)n(s,d+32*g,N,0,N.length)}function Ji(s,d){var g=s[d-1],N=s[d-1+32],E=s[d-1+64],R=s[d-1+96];$e(s,d+0,16843009*Dt(s[d-1-32],g,N)),$e(s,d+32,16843009*Dt(g,N,E)),$e(s,d+64,16843009*Dt(N,E,R)),$e(s,d+96,16843009*Dt(E,R,R))}function Fn(s,d){var g,N=4;for(g=0;4>g;++g)N+=s[d+g-32]+s[d-1+32*g];for(N>>=3,g=0;4>g;++g)a(s,d+32*g,N,4)}function Un(s,d){var g=s[d-1+0],N=s[d-1+32],E=s[d-1+64],R=s[d-1-32],B=s[d+0-32],H=s[d+1-32],$=s[d+2-32],re=s[d+3-32];s[d+0+96]=Dt(N,E,s[d-1+96]),s[d+1+96]=s[d+0+64]=Dt(g,N,E),s[d+2+96]=s[d+1+64]=s[d+0+32]=Dt(R,g,N),s[d+3+96]=s[d+2+64]=s[d+1+32]=s[d+0+0]=Dt(B,R,g),s[d+3+64]=s[d+2+32]=s[d+1+0]=Dt(H,B,R),s[d+3+32]=s[d+2+0]=Dt($,H,B),s[d+3+0]=Dt(re,$,H)}function Ns(s,d){var g=s[d+1-32],N=s[d+2-32],E=s[d+3-32],R=s[d+4-32],B=s[d+5-32],H=s[d+6-32],$=s[d+7-32];s[d+0+0]=Dt(s[d+0-32],g,N),s[d+1+0]=s[d+0+32]=Dt(g,N,E),s[d+2+0]=s[d+1+32]=s[d+0+64]=Dt(N,E,R),s[d+3+0]=s[d+2+32]=s[d+1+64]=s[d+0+96]=Dt(E,R,B),s[d+3+32]=s[d+2+64]=s[d+1+96]=Dt(R,B,H),s[d+3+64]=s[d+2+96]=Dt(B,H,$),s[d+3+96]=Dt(H,$,$)}function cn(s,d){var g=s[d-1+0],N=s[d-1+32],E=s[d-1+64],R=s[d-1-32],B=s[d+0-32],H=s[d+1-32],$=s[d+2-32],re=s[d+3-32];s[d+0+0]=s[d+1+64]=R+B+1>>1,s[d+1+0]=s[d+2+64]=B+H+1>>1,s[d+2+0]=s[d+3+64]=H+$+1>>1,s[d+3+0]=$+re+1>>1,s[d+0+96]=Dt(E,N,g),s[d+0+64]=Dt(N,g,R),s[d+0+32]=s[d+1+96]=Dt(g,R,B),s[d+1+32]=s[d+2+96]=Dt(R,B,H),s[d+2+32]=s[d+3+96]=Dt(B,H,$),s[d+3+32]=Dt(H,$,re)}function Qi(s,d){var g=s[d+0-32],N=s[d+1-32],E=s[d+2-32],R=s[d+3-32],B=s[d+4-32],H=s[d+5-32],$=s[d+6-32],re=s[d+7-32];s[d+0+0]=g+N+1>>1,s[d+1+0]=s[d+0+64]=N+E+1>>1,s[d+2+0]=s[d+1+64]=E+R+1>>1,s[d+3+0]=s[d+2+64]=R+B+1>>1,s[d+0+32]=Dt(g,N,E),s[d+1+32]=s[d+0+96]=Dt(N,E,R),s[d+2+32]=s[d+1+96]=Dt(E,R,B),s[d+3+32]=s[d+2+96]=Dt(R,B,H),s[d+3+64]=Dt(B,H,$),s[d+3+96]=Dt(H,$,re)}function As(s,d){var g=s[d-1+0],N=s[d-1+32],E=s[d-1+64],R=s[d-1+96];s[d+0+0]=g+N+1>>1,s[d+2+0]=s[d+0+32]=N+E+1>>1,s[d+2+32]=s[d+0+64]=E+R+1>>1,s[d+1+0]=Dt(g,N,E),s[d+3+0]=s[d+1+32]=Dt(N,E,R),s[d+3+32]=s[d+1+64]=Dt(E,R,R),s[d+3+64]=s[d+2+64]=s[d+0+96]=s[d+1+96]=s[d+2+96]=s[d+3+96]=R}function es(s,d){var g=s[d-1+0],N=s[d-1+32],E=s[d-1+64],R=s[d-1+96],B=s[d-1-32],H=s[d+0-32],$=s[d+1-32],re=s[d+2-32];s[d+0+0]=s[d+2+32]=g+B+1>>1,s[d+0+32]=s[d+2+64]=N+g+1>>1,s[d+0+64]=s[d+2+96]=E+N+1>>1,s[d+0+96]=R+E+1>>1,s[d+3+0]=Dt(H,$,re),s[d+2+0]=Dt(B,H,$),s[d+1+0]=s[d+3+32]=Dt(g,B,H),s[d+1+32]=s[d+3+64]=Dt(N,g,B),s[d+1+64]=s[d+3+96]=Dt(E,N,g),s[d+1+96]=Dt(R,E,N)}function Xi(s,d){var g;for(g=0;8>g;++g)n(s,d+32*g,s,d-32,8)}function Zi(s,d){var g;for(g=0;8>g;++g)a(s,d,s[d-1],8),d+=32}function ki(s,d,g){var N;for(N=0;8>N;++N)a(d,g+32*N,s,8)}function Ci(s,d){var g,N=8;for(g=0;8>g;++g)N+=s[d+g-32]+s[d-1+32*g];ki(N>>4,s,d)}function ea(s,d){var g,N=4;for(g=0;8>g;++g)N+=s[d+g-32];ki(N>>3,s,d)}function ta(s,d){var g,N=4;for(g=0;8>g;++g)N+=s[d-1+32*g];ki(N>>3,s,d)}function ts(s,d){ki(128,s,d)}function oi(s,d,g){var N=s[d-g],E=s[d+0],R=3*(E-N)+Xr[1020+s[d-2*g]-s[d+g]],B=Xn[112+(R+4>>3)];s[d-g]=dn[255+N+Xn[112+(R+3>>3)]],s[d+0]=dn[255+E-B]}function ra(s,d,g,N){var E=s[d+0],R=s[d+g];return Zn[255+s[d-2*g]-s[d-g]]>N||Zn[255+R-E]>N}function ba(s,d,g,N){return 4*Zn[255+s[d-g]-s[d+0]]+Zn[255+s[d-2*g]-s[d+g]]<=N}function Ss(s,d,g,N,E){var R=s[d-3*g],B=s[d-2*g],H=s[d-g],$=s[d+0],re=s[d+g],ye=s[d+2*g],Ie=s[d+3*g];return 4*Zn[255+H-$]+Zn[255+B-re]>N?0:Zn[255+s[d-4*g]-R]<=E&&Zn[255+R-B]<=E&&Zn[255+B-H]<=E&&Zn[255+Ie-ye]<=E&&Zn[255+ye-re]<=E&&Zn[255+re-$]<=E}function js(s,d,g,N){var E=2*N+1;for(N=0;16>N;++N)ba(s,d+N,g,E)&&oi(s,d+N,g)}function Jn(s,d,g,N){var E=2*N+1;for(N=0;16>N;++N)ba(s,d+N*g,1,E)&&oi(s,d+N*g,1)}function zn(s,d,g,N){var E;for(E=3;0<E;--E)js(s,d+=4*g,g,N)}function rs(s,d,g,N){var E;for(E=3;0<E;--E)Jn(s,d+=4,g,N)}function li(s,d,g,N,E,R,B,H){for(R=2*R+1;0<E--;){if(Ss(s,d,g,R,B))if(ra(s,d,g,H))oi(s,d,g);else{var $=s,re=d,ye=g,Ie=$[re-2*ye],Ee=$[re-ye],_e=$[re+0],Je=$[re+ye],Ue=$[re+2*ye],be=27*(Ge=Xr[1020+3*(_e-Ee)+Xr[1020+Ie-Je]])+63>>7,Se=18*Ge+63>>7,Ge=9*Ge+63>>7;$[re-3*ye]=dn[255+$[re-3*ye]+Ge],$[re-2*ye]=dn[255+Ie+Se],$[re-ye]=dn[255+Ee+be],$[re+0]=dn[255+_e-be],$[re+ye]=dn[255+Je-Se],$[re+2*ye]=dn[255+Ue-Ge]}d+=N}}function pn(s,d,g,N,E,R,B,H){for(R=2*R+1;0<E--;){if(Ss(s,d,g,R,B))if(ra(s,d,g,H))oi(s,d,g);else{var $=s,re=d,ye=g,Ie=$[re-ye],Ee=$[re+0],_e=$[re+ye],Je=Xn[112+((Ue=3*(Ee-Ie))+4>>3)],Ue=Xn[112+(Ue+3>>3)],be=Je+1>>1;$[re-2*ye]=dn[255+$[re-2*ye]+be],$[re-ye]=dn[255+Ie+Ue],$[re+0]=dn[255+Ee-Je],$[re+ye]=dn[255+_e-be]}d+=N}}function Fi(s,d,g,N,E,R){li(s,d,g,1,16,N,E,R)}function Qn(s,d,g,N,E,R){li(s,d,1,g,16,N,E,R)}function _s(s,d,g,N,E,R){var B;for(B=3;0<B;--B)pn(s,d+=4*g,g,1,16,N,E,R)}function xa(s,d,g,N,E,R){var B;for(B=3;0<B;--B)pn(s,d+=4,1,g,16,N,E,R)}function wa(s,d,g,N,E,R,B,H){li(s,d,E,1,8,R,B,H),li(g,N,E,1,8,R,B,H)}function na(s,d,g,N,E,R,B,H){li(s,d,1,E,8,R,B,H),li(g,N,1,E,8,R,B,H)}function ia(s,d,g,N,E,R,B,H){pn(s,d+4*E,E,1,8,R,B,H),pn(g,N+4*E,E,1,8,R,B,H)}function Na(s,d,g,N,E,R,B,H){pn(s,d+4,1,E,8,R,B,H),pn(g,N+4,1,E,8,R,B,H)}function Di(){this.ba=new tn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ci(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Oi(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new A}function Ps(){this.xb=this.a=0,this.l=new Vi,this.ca=new tn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Oi,this.ab=0,this.gc=c(4,ci),this.Oc=0}function ui(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ii(s,d,g,N,E,R,B){for(s=s==null?0:s[d+0],d=0;d<B;++d)E[R+d]=s+g[N+d]&255,s=E[R+d]}function Aa(s,d,g,N,E,R,B){var H;if(s==null)Ii(null,null,g,N,E,R,B);else for(H=0;H<B;++H)E[R+H]=s[d+H]+g[N+H]&255}function Hn(s,d,g,N,E,R,B){if(s==null)Ii(null,null,g,N,E,R,B);else{var H,$=s[d+0],re=$,ye=$;for(H=0;H<B;++H)re=ye+($=s[d+H])-re,ye=g[N+H]+(-256&re?0>re?0:255:re)&255,re=$,E[R+H]=ye}}function aa(s,d,g,N){var E=d.width,R=d.o;if(e(s!=null&&d!=null),0>g||0>=N||g+N>R)return null;if(!s.Cc){if(s.ga==null){var B;if(s.ga=new ui,(B=s.ga==null)||(B=d.width*d.o,e(s.Gb.length==0),s.Gb=i(B),s.Uc=0,s.Gb==null?B=0:(s.mb=s.Gb,s.nb=s.Uc,s.rc=null,B=1),B=!B),!B){B=s.ga;var H=s.Fa,$=s.P,re=s.qc,ye=s.mb,Ie=s.nb,Ee=$+1,_e=re-1,Je=B.l;if(e(H!=null&&ye!=null&&d!=null),La[0]=null,La[1]=Ii,La[2]=Aa,La[3]=Hn,B.ca=ye,B.tb=Ie,B.c=d.width,B.i=d.height,e(0<B.c&&0<B.i),1>=re)d=0;else if(B.$a=H[$+0]>>0&3,B.Z=H[$+0]>>2&3,B.Lc=H[$+0]>>4&3,$=H[$+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||$)d=0;else if(Je.put=er,Je.ac=Ot,Je.bc=sr,Je.ma=B,Je.width=d.width,Je.height=d.height,Je.Da=d.Da,Je.v=d.v,Je.va=d.va,Je.j=d.j,Je.o=d.o,B.$a)e:{e(B.$a==1),d=kn();t:for(;;){if(d==null){d=0;break e}if(e(B!=null),B.mc=d,d.c=B.c,d.i=B.i,d.l=B.l,d.l.ma=B,d.l.width=B.c,d.l.height=B.i,d.a=0,ne(d.m,H,Ee,_e),!Gr(B.c,B.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&ni(d.s)?(B.ic=1,H=d.c*d.i,d.Ta=null,d.Ua=0,d.V=i(H),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(B.ic=0,d=ji(d,B.c)),!d))break t;d=1;break e}B.mc=null,d=0}else d=_e>=B.c*B.i;B=!d}if(B)return null;s.ga.Lc!=1?s.Ga=0:N=R-g}e(s.ga!=null),e(g+N<=R);e:{if(d=(H=s.ga).c,R=H.l.o,H.$a==0){if(Ee=s.rc,_e=s.Vc,Je=s.Fa,$=s.P+1+g*d,re=s.mb,ye=s.nb+g*d,e($<=s.P+s.qc),H.Z!=0)for(e(La[H.Z]!=null),B=0;B<N;++B)La[H.Z](Ee,_e,Je,$,re,ye,d),Ee=re,_e=ye,ye+=d,$+=d;else for(B=0;B<N;++B)n(re,ye,Je,$,d),Ee=re,_e=ye,ye+=d,$+=d;s.rc=Ee,s.Vc=_e}else{if(e(H.mc!=null),d=g+N,e((B=H.mc)!=null),e(d<=B.i),B.C>=d)d=1;else if(H.ic||Fe(),H.ic){H=B.V,Ee=B.Ba,_e=B.c;var Ue=B.i,be=(Je=1,$=B.$/_e,re=B.$%_e,ye=B.m,Ie=B.s,B.$),Se=_e*Ue,Ge=_e*d,Ze=Ie.wc,Ye=be<Ge?br(Ie,re,$):null;e(be<=Se),e(d<=Ue),e(ni(Ie));t:for(;;){for(;!ye.h&&be<Ge;){if(re&Ze||(Ye=br(Ie,re,$)),e(Ye!=null),oe(ye),256>(Ue=tr(Ye.G[0],Ye.H[0],ye)))H[Ee+be]=Ue,++be,++re>=_e&&(re=0,++$<=d&&!($%16)&&nn(B,$));else{if(!(280>Ue)){Je=0;break t}Ue=ar(Ue-256,ye);var xt,mt=tr(Ye.G[4],Ye.H[4],ye);if(oe(ye),!(be>=(mt=$t(_e,mt=ar(mt,ye)))&&Se-be>=Ue)){Je=0;break t}for(xt=0;xt<Ue;++xt)H[Ee+be+xt]=H[Ee+be+xt-mt];for(be+=Ue,re+=Ue;re>=_e;)re-=_e,++$<=d&&!($%16)&&nn(B,$);be<Ge&&re&Ze&&(Ye=br(Ie,re,$))}e(ye.h==Q(ye))}nn(B,$>d?d:$);break t}!Je||ye.h&&be<Se?(Je=0,B.a=ye.h?5:3):B.$=be,d=Je}else d=Wr(B,B.V,B.Ba,B.c,B.i,d,Cn);if(!d){N=0;break e}}g+N>=R&&(s.Cc=1),N=1}if(!N)return null;if(s.Cc&&((N=s.ga)!=null&&(N.mc=null),s.ga=null,0<s.Ga))return alert("todo:WebPDequantizeLevels"),null}return s.nb+g*E}function p(s,d,g,N,E,R){for(;0<E--;){var B,H=s,$=d+(g?1:0),re=s,ye=d+(g?0:3);for(B=0;B<N;++B){var Ie=re[ye+4*B];Ie!=255&&(Ie*=32897,H[$+4*B+0]=H[$+4*B+0]*Ie>>23,H[$+4*B+1]=H[$+4*B+1]*Ie>>23,H[$+4*B+2]=H[$+4*B+2]*Ie>>23)}d+=R}}function I(s,d,g,N,E){for(;0<N--;){var R;for(R=0;R<g;++R){var B=s[d+2*R+0],H=15&(re=s[d+2*R+1]),$=4369*H,re=(240&re|re>>4)*$>>16;s[d+2*R+0]=(240&B|B>>4)*$>>16&240|(15&B|B<<4)*$>>16>>4&15,s[d+2*R+1]=240&re|H}d+=E}}function ae(s,d,g,N,E,R,B,H){var $,re,ye=255;for(re=0;re<E;++re){for($=0;$<N;++$){var Ie=s[d+$];R[B+4*$]=Ie,ye&=Ie}d+=g,B+=H}return ye!=255}function pe(s,d,g,N,E){var R;for(R=0;R<E;++R)g[N+R]=s[d+R]>>8}function Fe(){pt=p,wt=I,St=ae,kt=pe}function We(s,d,g){U[s]=function(N,E,R,B,H,$,re,ye,Ie,Ee,_e,Je,Ue,be,Se,Ge,Ze){var Ye,xt=Ze-1>>1,mt=H[$+0]|re[ye+0]<<16,Tt=Ie[Ee+0]|_e[Je+0]<<16;e(N!=null);var vt=3*mt+Tt+131074>>2;for(d(N[E+0],255&vt,vt>>16,Ue,be),R!=null&&(vt=3*Tt+mt+131074>>2,d(R[B+0],255&vt,vt>>16,Se,Ge)),Ye=1;Ye<=xt;++Ye){var or=H[$+Ye]|re[ye+Ye]<<16,ur=Ie[Ee+Ye]|_e[Je+Ye]<<16,ir=mt+or+Tt+ur+524296,rr=ir+2*(or+Tt)>>3;vt=rr+mt>>1,mt=(ir=ir+2*(mt+ur)>>3)+or>>1,d(N[E+2*Ye-1],255&vt,vt>>16,Ue,be+(2*Ye-1)*g),d(N[E+2*Ye-0],255&mt,mt>>16,Ue,be+(2*Ye-0)*g),R!=null&&(vt=ir+Tt>>1,mt=rr+ur>>1,d(R[B+2*Ye-1],255&vt,vt>>16,Se,Ge+(2*Ye-1)*g),d(R[B+2*Ye+0],255&mt,mt>>16,Se,Ge+(2*Ye+0)*g)),mt=or,Tt=ur}1&Ze||(vt=3*mt+Tt+131074>>2,d(N[E+Ze-1],255&vt,vt>>16,Ue,be+(Ze-1)*g),R!=null&&(vt=3*Tt+mt+131074>>2,d(R[B+Ze-1],255&vt,vt>>16,Se,Ge+(Ze-1)*g)))}}function tt(){ei[xo]=ah,ei[wo]=Lc,ei[Ac]=sh,ei[No]=kc,ei[Ao]=Cc,ei[pl]=Fc,ei[Sc]=oh,ei[ml]=Lc,ei[gl]=kc,ei[So]=Cc,ei[vl]=Fc}function yt(s){return s&~lh?0>s?0:255:s>>Dc}function Lt(s,d){return yt((19077*s>>8)+(26149*d>>8)-14234)}function zt(s,d,g){return yt((19077*s>>8)-(6419*d>>8)-(13320*g>>8)+8708)}function Ut(s,d){return yt((19077*s>>8)+(33050*d>>8)-17685)}function Xt(s,d,g,N,E){N[E+0]=Lt(s,g),N[E+1]=zt(s,d,g),N[E+2]=Ut(s,d)}function xr(s,d,g,N,E){N[E+0]=Ut(s,d),N[E+1]=zt(s,d,g),N[E+2]=Lt(s,g)}function wr(s,d,g,N,E){var R=zt(s,d,g);d=R<<3&224|Ut(s,d)>>3,N[E+0]=248&Lt(s,g)|R>>5,N[E+1]=d}function Dr(s,d,g,N,E){var R=240&Ut(s,d)|15;N[E+0]=240&Lt(s,g)|zt(s,d,g)>>4,N[E+1]=R}function Jr(s,d,g,N,E){N[E+0]=255,Xt(s,d,g,N,E+1)}function Mr(s,d,g,N,E){xr(s,d,g,N,E),N[E+3]=255}function Wn(s,d,g,N,E){Xt(s,d,g,N,E),N[E+3]=255}function mn(s,d){return 0>s?0:s>d?d:s}function Dn(s,d,g){U[s]=function(N,E,R,B,H,$,re,ye,Ie){for(var Ee=ye+(-2&Ie)*g;ye!=Ee;)d(N[E+0],R[B+0],H[$+0],re,ye),d(N[E+1],R[B+0],H[$+0],re,ye+g),E+=2,++B,++$,ye+=2*g;1&Ie&&d(N[E+0],R[B+0],H[$+0],re,ye)}}function ns(s,d,g){return g==0?s==0?d==0?6:5:d==0?4:0:g}function Sa(s,d,g,N,E){switch(s>>>30){case 3:je(d,g,N,E,0);break;case 2:ce(d,g,N,E);break;case 1:ge(d,g,N,E)}}function is(s,d){var g,N,E=d.M,R=d.Nb,B=s.oc,H=s.pc+40,$=s.oc,re=s.pc+584,ye=s.oc,Ie=s.pc+600;for(g=0;16>g;++g)B[H+32*g-1]=129;for(g=0;8>g;++g)$[re+32*g-1]=129,ye[Ie+32*g-1]=129;for(0<E?B[H-1-32]=$[re-1-32]=ye[Ie-1-32]=129:(a(B,H-32-1,127,21),a($,re-32-1,127,9),a(ye,Ie-32-1,127,9)),N=0;N<s.za;++N){var Ee=d.ya[d.aa+N];if(0<N){for(g=-1;16>g;++g)n(B,H+32*g-4,B,H+32*g+12,4);for(g=-1;8>g;++g)n($,re+32*g-4,$,re+32*g+4,4),n(ye,Ie+32*g-4,ye,Ie+32*g+4,4)}var _e=s.Gd,Je=s.Hd+N,Ue=Ee.ad,be=Ee.Hc;if(0<E&&(n(B,H-32,_e[Je].y,0,16),n($,re-32,_e[Je].f,0,8),n(ye,Ie-32,_e[Je].ea,0,8)),Ee.Za){var Se=B,Ge=H-32+16;for(0<E&&(N>=s.za-1?a(Se,Ge,_e[Je].y[15],4):n(Se,Ge,_e[Je+1].y,0,4)),g=0;4>g;g++)Se[Ge+128+g]=Se[Ge+256+g]=Se[Ge+384+g]=Se[Ge+0+g];for(g=0;16>g;++g,be<<=2)Se=B,Ge=H+Ic[g],pi[Ee.Ob[g]](Se,Ge),Sa(be,Ue,16*+g,Se,Ge)}else if(Se=ns(N,E,Ee.Ob[0]),Pa[Se](B,H),be!=0)for(g=0;16>g;++g,be<<=2)Sa(be,Ue,16*+g,B,H+Ic[g]);for(g=Ee.Gc,Se=ns(N,E,Ee.Dd),ua[Se]($,re),ua[Se](ye,Ie),be=Ue,Se=$,Ge=re,255&(Ee=g>>0)&&(170&Ee?ke(be,256,Se,Ge):Ne(be,256,Se,Ge)),Ee=ye,be=Ie,255&(g>>=8)&&(170&g?ke(Ue,320,Ee,be):Ne(Ue,320,Ee,be)),E<s.Ub-1&&(n(_e[Je].y,0,B,H+480,16),n(_e[Je].f,0,$,re+224,8),n(_e[Je].ea,0,ye,Ie+224,8)),g=8*R*s.B,_e=s.sa,Je=s.ta+16*N+16*R*s.R,Ue=s.qa,Ee=s.ra+8*N+g,be=s.Ha,Se=s.Ia+8*N+g,g=0;16>g;++g)n(_e,Je+g*s.R,B,H+32*g,16);for(g=0;8>g;++g)n(Ue,Ee+g*s.B,$,re+32*g,8),n(be,Se+g*s.B,ye,Ie+32*g,8)}}function ja(s,d,g,N,E,R,B,H,$){var re=[0],ye=[0],Ie=0,Ee=$!=null?$.kd:0,_e=$??new Fr;if(s==null||12>g)return 7;_e.data=s,_e.w=d,_e.ha=g,d=[d],g=[g],_e.gb=[_e.gb];e:{var Je=d,Ue=g,be=_e.gb;if(e(s!=null),e(Ue!=null),e(be!=null),be[0]=0,12<=Ue[0]&&!t(s,Je[0],"RIFF")){if(t(s,Je[0]+8,"WEBP")){be=3;break e}var Se=dt(s,Je[0]+4);if(12>Se||4294967286<Se){be=3;break e}if(Ee&&Se>Ue[0]-8){be=7;break e}be[0]=Se,Je[0]+=12,Ue[0]-=12}be=0}if(be!=0)return be;for(Se=0<_e.gb[0],g=g[0];;){e:{var Ge=s;Ue=d,be=g;var Ze=re,Ye=ye,xt=Je=[0];if((vt=Ie=[Ie])[0]=0,8>be[0])be=7;else{if(!t(Ge,Ue[0],"VP8X")){if(dt(Ge,Ue[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var mt=dt(Ge,Ue[0]+8),Tt=1+Qe(Ge,Ue[0]+12);if(2147483648<=Tt*(Ge=1+Qe(Ge,Ue[0]+15))){be=3;break e}xt!=null&&(xt[0]=mt),Ze!=null&&(Ze[0]=Tt),Ye!=null&&(Ye[0]=Ge),Ue[0]+=18,be[0]-=18,vt[0]=1}be=0}}if(Ie=Ie[0],Je=Je[0],be!=0)return be;if(Ue=!!(2&Je),!Se&&Ie)return 3;if(R!=null&&(R[0]=!!(16&Je)),B!=null&&(B[0]=Ue),H!=null&&(H[0]=0),B=re[0],Je=ye[0],Ie&&Ue&&$==null){be=0;break}if(4>g){be=7;break}if(Se&&Ie||!Se&&!Ie&&!t(s,d[0],"ALPH")){g=[g],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{mt=s,be=d,Se=g;var vt=_e.gb;Ze=_e.na,Ye=_e.P,xt=_e.Sa,Tt=22,e(mt!=null),e(Se!=null),Ge=be[0];var or=Se[0];for(e(Ze!=null),e(xt!=null),Ze[0]=null,Ye[0]=null,xt[0]=0;;){if(be[0]=Ge,Se[0]=or,8>or){be=7;break e}var ur=dt(mt,Ge+4);if(4294967286<ur){be=3;break e}var ir=8+ur+1&-2;if(Tt+=ir,0<vt&&Tt>vt){be=3;break e}if(!t(mt,Ge,"VP8 ")||!t(mt,Ge,"VP8L")){be=0;break e}if(or[0]<ir){be=7;break e}t(mt,Ge,"ALPH")||(Ze[0]=mt,Ye[0]=Ge+8,xt[0]=ur),Ge+=ir,or-=ir}}if(g=g[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],be!=0)break}g=[g],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(vt=s,be=d,Se=g,Ze=_e.gb[0],Ye=_e.Ja,xt=_e.xa,mt=be[0],Ge=!t(vt,mt,"VP8 "),Tt=!t(vt,mt,"VP8L"),e(vt!=null),e(Se!=null),e(Ye!=null),e(xt!=null),8>Se[0])be=7;else{if(Ge||Tt){if(vt=dt(vt,mt+4),12<=Ze&&vt>Ze-12){be=3;break e}if(Ee&&vt>Se[0]-8){be=7;break e}Ye[0]=vt,be[0]+=8,Se[0]-=8,xt[0]=Tt}else xt[0]=5<=Se[0]&&vt[mt+0]==47&&!(vt[mt+4]>>5),Ye[0]=Se[0];be=0}if(g=g[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],d=d[0],be!=0)break;if(4294967286<_e.Ja)return 3;if(H==null||Ue||(H[0]=_e.xa?2:1),B=[B],Je=[Je],_e.xa){if(5>g){be=7;break}H=B,Ee=Je,Ue=R,s==null||5>g?s=0:5<=g&&s[d+0]==47&&!(s[d+4]>>5)?(Se=[0],vt=[0],Ze=[0],ne(Ye=new F,s,d,g),At(Ye,Se,vt,Ze)?(H!=null&&(H[0]=Se[0]),Ee!=null&&(Ee[0]=vt[0]),Ue!=null&&(Ue[0]=Ze[0]),s=1):s=0):s=0}else{if(10>g){be=7;break}H=Je,s==null||10>g||!Ga(s,d+3,g-3)?s=0:(Ee=s[d+0]|s[d+1]<<8|s[d+2]<<16,Ue=16383&(s[d+7]<<8|s[d+6]),s=16383&(s[d+9]<<8|s[d+8]),1&Ee||3<(Ee>>1&7)||!(Ee>>4&1)||Ee>>5>=_e.Ja||!Ue||!s?s=0:(B&&(B[0]=Ue),H&&(H[0]=s),s=1))}if(!s||(B=B[0],Je=Je[0],Ie&&(re[0]!=B||ye[0]!=Je)))return 3;$!=null&&($[0]=_e,$.offset=d-$.w,e(4294967286>d-$.w),e($.offset==$.ha-g));break}return be==0||be==7&&Ie&&$==null?(R!=null&&(R[0]|=_e.na!=null&&0<_e.na.length),N!=null&&(N[0]=B),E!=null&&(E[0]=Je),0):be}function as(s,d,g){var N=d.width,E=d.height,R=0,B=0,H=N,$=E;if(d.Da=s!=null&&0<s.Da,d.Da&&(H=s.cd,$=s.bd,R=s.v,B=s.j,11>g||(R&=-2,B&=-2),0>R||0>B||0>=H||0>=$||R+H>N||B+$>E))return 0;if(d.v=R,d.j=B,d.va=R+H,d.o=B+$,d.U=H,d.T=$,d.da=s!=null&&0<s.da,d.da){if(!Mt(H,$,g=[s.ib],R=[s.hb]))return 0;d.ib=g[0],d.hb=R[0]}return d.ob=s!=null&&s.ob,d.Kb=s==null||!s.Sd,d.da&&(d.ob=d.ib<3*N/4&&d.hb<3*E/4,d.Kb=0),1}function Ei(s){if(s==null)return 2;if(11>s.S){var d=s.f.RGBA;d.fb+=(s.height-1)*d.A,d.A=-d.A}else d=s.f.kb,s=s.height,d.O+=(s-1)*d.fa,d.fa=-d.fa,d.N+=(s-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(s-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(s-1)*d.lb,d.lb=-d.lb);return 0}function gn(s,d,g,N){if(N==null||0>=s||0>=d)return 2;if(g!=null){if(g.Da){var E=g.cd,R=g.bd,B=-2&g.v,H=-2&g.j;if(0>B||0>H||0>=E||0>=R||B+E>s||H+R>d)return 2;s=E,d=R}if(g.da){if(!Mt(s,d,E=[g.ib],R=[g.hb]))return 2;s=E[0],d=R[0]}}N.width=s,N.height=d;e:{var $=N.width,re=N.height;if(s=N.S,0>=$||0>=re||!(s>=xo&&13>s))s=2;else{if(0>=N.Rd&&N.sd==null){B=R=E=d=0;var ye=(H=$*Ec[s])*re;if(11>s||(R=(re+1)/2*(d=($+1)/2),s==12&&(B=(E=$)*re)),(re=i(ye+2*R+B))==null){s=1;break e}N.sd=re,11>s?(($=N.f.RGBA).eb=re,$.fb=0,$.A=H,$.size=ye):(($=N.f.kb).y=re,$.O=0,$.fa=H,$.Fd=ye,$.f=re,$.N=0+ye,$.Ab=d,$.Cd=R,$.ea=re,$.W=0+ye+R,$.Db=d,$.Ed=R,s==12&&($.F=re,$.J=0+ye+2*R),$.Tc=B,$.lb=E)}if(d=1,E=N.S,R=N.width,B=N.height,E>=xo&&13>E)if(11>E)s=N.f.RGBA,d&=(H=Math.abs(s.A))*(B-1)+R<=s.size,d&=H>=R*Ec[E],d&=s.eb!=null;else{s=N.f.kb,H=(R+1)/2,ye=(B+1)/2,$=Math.abs(s.fa),re=Math.abs(s.Ab);var Ie=Math.abs(s.Db),Ee=Math.abs(s.lb),_e=Ee*(B-1)+R;d&=$*(B-1)+R<=s.Fd,d&=re*(ye-1)+H<=s.Cd,d=(d&=Ie*(ye-1)+H<=s.Ed)&$>=R&re>=H&Ie>=H,d&=s.y!=null,d&=s.f!=null,d&=s.ea!=null,E==12&&(d&=Ee>=R,d&=_e<=s.Tc,d&=s.F!=null)}else d=0;s=d?0:2}}return s!=0||g!=null&&g.fd&&(s=Ei(N)),s}var Jt=64,di=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qr=24,_a=32,sa=8,un=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];X("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(s){return s},U.Predictor2=function(s,d,g){return d[g+0]},U.Predictor3=function(s,d,g){return d[g+1]},U.Predictor4=function(s,d,g){return d[g-1]},U.Predictor5=function(s,d,g){return xe(xe(s,d[g+1]),d[g+0])},U.Predictor6=function(s,d,g){return xe(s,d[g-1])},U.Predictor7=function(s,d,g){return xe(s,d[g+0])},U.Predictor8=function(s,d,g){return xe(d[g-1],d[g+0])},U.Predictor9=function(s,d,g){return xe(d[g+0],d[g+1])},U.Predictor10=function(s,d,g){return xe(xe(s,d[g-1]),xe(d[g+0],d[g+1]))},U.Predictor11=function(s,d,g){var N=d[g+0];return 0>=ze(N>>24&255,s>>24&255,(d=d[g-1])>>24&255)+ze(N>>16&255,s>>16&255,d>>16&255)+ze(N>>8&255,s>>8&255,d>>8&255)+ze(255&N,255&s,255&d)?N:s},U.Predictor12=function(s,d,g){var N=d[g+0];return(Be((s>>24&255)+(N>>24&255)-((d=d[g-1])>>24&255))<<24|Be((s>>16&255)+(N>>16&255)-(d>>16&255))<<16|Be((s>>8&255)+(N>>8&255)-(d>>8&255))<<8|Be((255&s)+(255&N)-(255&d)))>>>0},U.Predictor13=function(s,d,g){var N=d[g-1];return(Ke((s=xe(s,d[g+0]))>>24&255,N>>24&255)<<24|Ke(s>>16&255,N>>16&255)<<16|Ke(s>>8&255,N>>8&255)<<8|Ke(s>>0&255,N>>0&255))>>>0};var hi=U.PredictorAdd0;U.PredictorAdd1=et,X("Predictor2","PredictorAdd2"),X("Predictor3","PredictorAdd3"),X("Predictor4","PredictorAdd4"),X("Predictor5","PredictorAdd5"),X("Predictor6","PredictorAdd6"),X("Predictor7","PredictorAdd7"),X("Predictor8","PredictorAdd8"),X("Predictor9","PredictorAdd9"),X("Predictor10","PredictorAdd10"),X("Predictor11","PredictorAdd11"),X("Predictor12","PredictorAdd12"),X("Predictor13","PredictorAdd13");var oa=U.PredictorAdd2;Bt("ColorIndexInverseTransform","MapARGB","32b",function(s){return s>>8&255},function(s){return s}),Bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(s){return s},function(s){return s>>8&255});var fi,Rr=U.ColorIndexInverseTransform,la=U.MapARGB,o=U.VP8LColorIndexInverseTransformAlpha,f=U.MapAlpha,v=U.VP8LPredictorsAdd=[];v.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var S,k,q,Z,le,ve,we,je,ce,ke,ge,Ne,Le,Ae,Te,Me,Re,Ve,it,ut,at,st,ft,ot,pt,wt,St,kt,nr=i(511),It=i(2041),Or=i(225),kr=i(767),ca=0,Xr=It,Xn=Or,dn=kr,Zn=nr,xo=0,wo=1,Ac=2,No=3,Ao=4,pl=5,Sc=6,ml=7,gl=8,So=9,vl=10,Kd=[2,3,7],Vd=[3,3,11],jc=[280,256,256,256,40],$d=[0,1,1,1,0],Gd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qd=8,yl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],$s=null,Xd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_c=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],eh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],th=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Pa=[],pi=[],ua=[],ih=1,Pc=2,La=[],ei=[];We("UpsampleRgbLinePair",Xt,3),We("UpsampleBgrLinePair",xr,3),We("UpsampleRgbaLinePair",Wn,4),We("UpsampleBgraLinePair",Mr,4),We("UpsampleArgbLinePair",Jr,4),We("UpsampleRgba4444LinePair",Dr,2),We("UpsampleRgb565LinePair",wr,2);var ah=U.UpsampleRgbLinePair,sh=U.UpsampleBgrLinePair,Lc=U.UpsampleRgbaLinePair,kc=U.UpsampleBgraLinePair,Cc=U.UpsampleArgbLinePair,Fc=U.UpsampleRgba4444LinePair,oh=U.UpsampleRgb565LinePair,jo=16,_o=1<<jo-1,Gs=-227,xl=482,Dc=6,lh=(256<<Dc)-1,Oc=0,ch=i(256),uh=i(256),dh=i(256),hh=i(256),fh=i(xl-Gs),ph=i(xl-Gs);Dn("YuvToRgbRow",Xt,3),Dn("YuvToBgrRow",xr,3),Dn("YuvToRgbaRow",Wn,4),Dn("YuvToBgraRow",Mr,4),Dn("YuvToArgbRow",Jr,4),Dn("YuvToRgba4444Row",Dr,2),Dn("YuvToRgb565Row",wr,2);var Ic=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Po=[0,2,8],mh=[8,7,6,4,4,2,2,2,1,1,1,1],gh=1;this.WebPDecodeRGBA=function(s,d,g,N,E){var R=wo,B=new Di,H=new tn;B.ba=H,H.S=R,H.width=[H.width],H.height=[H.height];var $=H.width,re=H.height,ye=new An;if(ye==null||s==null)var Ie=2;else e(ye!=null),Ie=ja(s,d,g,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Ie!=0?$=0:($!=null&&($[0]=ye.width[0]),re!=null&&(re[0]=ye.height[0]),$=1),$){H.width=H.width[0],H.height=H.height[0],N!=null&&(N[0]=H.width),E!=null&&(E[0]=H.height);e:{if(N=new Vi,(E=new Fr).data=s,E.w=d,E.ha=g,E.kd=1,d=[0],e(E!=null),((s=ja(E.data,E.w,E.ha,null,null,null,d,null,E))==0||s==7)&&d[0]&&(s=4),(d=s)==0){if(e(B!=null),N.data=E.data,N.w=E.w+E.offset,N.ha=E.ha-E.offset,N.put=er,N.ac=Ot,N.bc=sr,N.ma=B,E.xa){if((s=kn())==null){B=1;break e}if(function(Ee,_e){var Je=[0],Ue=[0],be=[0];t:for(;;){if(Ee==null)return 0;if(_e==null)return Ee.a=2,0;if(Ee.l=_e,Ee.a=0,ne(Ee.m,_e.data,_e.w,_e.ha),!At(Ee.m,Je,Ue,be)){Ee.a=3;break t}if(Ee.xb=Pc,_e.width=Je[0],_e.height=Ue[0],!Gr(Je[0],Ue[0],1,Ee,null))break t;return 1}return e(Ee.a!=0),0}(s,N)){if(N=(d=gn(N.width,N.height,B.Oa,B.ba))==0){t:{N=s;r:for(;;){if(N==null){N=0;break t}if(e(N.s.yc!=null),e(N.s.Ya!=null),e(0<N.s.Wb),e((g=N.l)!=null),e((E=g.ma)!=null),N.xb!=0){if(N.ca=E.ba,N.tb=E.tb,e(N.ca!=null),!as(E.Oa,g,No)){N.a=2;break r}if(!ji(N,g.width)||g.da)break r;if((g.da||Kt(N.ca.S))&&Fe(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&Fe()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!Ct(N.s.vb,N.s.Wa.Xa)){N.a=1;break r}N.xb=0}if(!Wr(N,N.V,N.Ba,N.c,N.i,g.o,ri))break r;E.Dc=N.Ma,N=1;break t}e(N.a!=0),N=0}N=!N}N&&(d=s.a)}else d=s.a}else{if((s=new Yt)==null){B=1;break e}if(s.Fa=E.na,s.P=E.P,s.qc=E.Sa,Ya(s,N)){if((d=gn(N.width,N.height,B.Oa,B.ba))==0){if(s.Aa=0,g=B.Oa,e((E=s)!=null),g!=null){if(0<($=0>($=g.Md)?0:100<$?255:255*$/100)){for(re=ye=0;4>re;++re)12>(Ie=E.pb[re]).lc&&(Ie.ia=$*mh[0>Ie.lc?0:Ie.lc]>>3),ye|=Ie.ia;ye&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=g.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}$i(s,N)||(d=s.a)}}else d=s.a}d==0&&B.Oa!=null&&B.Oa.fd&&(d=Ei(B.ba))}B=d}R=B!=0?null:11>R?H.f.RGBA.eb:H.f.kb.y}else R=null;return R};var Ec=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(U,te){for(var se="",D=0;D<4;D++)se+=String.fromCharCode(U[te++]);return se}function x(U,te){return(U[te+0]<<0|U[te+1]<<8|U[te+2]<<16)>>>0}function b(U,te){return(U[te+0]<<0|U[te+1]<<8|U[te+2]<<16|U[te+3]<<24)>>>0}new h;var w=[0],m=[0],_=[],L=new h,O=r,P=function(U,te){var se={},D=0,A=!1,M=0,V=0;if(se.frames=[],!function(W,Q,ie,oe){for(var Pe=0;Pe<oe;Pe++)if(W[Q+Pe]!=ie.charCodeAt(Pe))return!0;return!1}(U,te,"RIFF",4)){var fe,Y;for(b(U,te+=4),te+=8;te<U.length;){var J=y(U,te),ne=b(U,te+=4);te+=4;var K=ne+(1&ne);switch(J){case"VP8 ":case"VP8L":se.frames[D]===void 0&&(se.frames[D]={}),(F=se.frames[D]).src_off=A?V:te-8,F.src_size=M+ne+8,D++,A&&(A=!1,M=0,V=0);break;case"VP8X":(F=se.header={}).feature_flags=U[te];var he=te+4;F.canvas_width=1+x(U,he),he+=3,F.canvas_height=1+x(U,he),he+=3;break;case"ALPH":A=!0,M=K+8,V=te-8;break;case"ANIM":(F=se.header).bgcolor=b(U,te),he=te+4,F.loop_count=(fe=U)[(Y=he)+0]<<0|fe[Y+1]<<8,he+=2;break;case"ANMF":var Oe,F;(F=se.frames[D]={}).offset_x=2*x(U,te),te+=3,F.offset_y=2*x(U,te),te+=3,F.width=1+x(U,te),te+=3,F.height=1+x(U,te),te+=3,F.duration=x(U,te),te+=3,Oe=U[te++],F.dispose=1&Oe,F.blend=Oe>>1&1}J!="ANMF"&&(te+=K)}return se}}(O,0);P.response=O,P.rgbaoutput=!0,P.dataurl=!1;var j=P.header?P.header:null,C=P.frames?P.frames:null;if(j){j.loop_counter=j.loop_count,w=[j.canvas_height],m=[j.canvas_width];for(var z=0;z<C.length&&C[z].blend!=0;z++);}var G=C[0],ee=L.WebPDecodeRGBA(O,G.src_off,G.src_size,m,w);G.rgba=ee,G.imgwidth=m[0],G.imgheight=w[0];for(var T=0;T<m[0]*w[0]*4;T++)_[T]=ee[T];return this.width=m,this.height=w,this.data=_,this}(function(r){var e=function(){return typeof ic=="function"},t=function(w,m,_,L){var O=4,P=c;switch(L){case r.image_compression.FAST:O=1,P=i;break;case r.image_compression.MEDIUM:O=6,P=u;break;case r.image_compression.SLOW:O=9,P=h}w=n(w,m,_,P);var j=ic(w,{level:O});return r.__addimage__.arrayBufferToBinaryString(j)},n=function(w,m,_,L){for(var O,P,j,C=w.length/m,z=new Uint8Array(w.length+C),G=x(),ee=0;ee<C;ee+=1){if(j=ee*m,O=w.subarray(j,j+m),L)z.set(L(O,_,P),j+ee);else{for(var T,U=G.length,te=[];T<U;T+=1)te[T]=G[T](O,_,P);var se=b(te.concat());z.set(te[se],j+ee)}P=O}return z},a=function(w){var m=Array.apply([],w);return m.unshift(0),m},i=function(w,m){var _,L=[],O=w.length;L[0]=1;for(var P=0;P<O;P+=1)_=w[P-m]||0,L[P+1]=w[P]-_+256&255;return L},c=function(w,m,_){var L,O=[],P=w.length;O[0]=2;for(var j=0;j<P;j+=1)L=_&&_[j]||0,O[j+1]=w[j]-L+256&255;return O},u=function(w,m,_){var L,O,P=[],j=w.length;P[0]=3;for(var C=0;C<j;C+=1)L=w[C-m]||0,O=_&&_[C]||0,P[C+1]=w[C]+256-(L+O>>>1)&255;return P},h=function(w,m,_){var L,O,P,j,C=[],z=w.length;C[0]=4;for(var G=0;G<z;G+=1)L=w[G-m]||0,O=_&&_[G]||0,P=_&&_[G-m]||0,j=y(L,O,P),C[G+1]=w[G]-j+256&255;return C},y=function(w,m,_){if(w===m&&m===_)return w;var L=Math.abs(m-_),O=Math.abs(w-_),P=Math.abs(w+m-_-_);return L<=O&&L<=P?w:O<=P?m:_},x=function(){return[a,i,c,u,h]},b=function(w){var m=w.map(function(_){return _.reduce(function(L,O){return L+Math.abs(O)},0)});return m.indexOf(Math.min.apply(null,m))};r.processPNG=function(w,m,_,L){var O,P,j,C,z,G,ee,T,U,te,se,D,A,M,V,fe=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(j=new L0(w)).imgData,P=j.bits,O=j.colorSpace,z=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){U=(T=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,se=new Uint8Array(U*j.colors),te=new Uint8Array(U);var J,ne=j.pixelBitlength-j.bits;for(M=0,V=0;M<U;M++){for(A=T[M],J=0;J<ne;)se[V++]=A>>>J&255,J+=j.bits;te[M]=A>>>J&255}}if(j.bits===16){U=(T=new Uint32Array(j.decodePixels().buffer)).length,se=new Uint8Array(U*(32/j.pixelBitlength)*j.colors),te=new Uint8Array(U*(32/j.pixelBitlength)),D=j.colors>1,M=0,V=0;for(var K=0;M<U;)A=T[M++],se[V++]=A>>>0&255,D&&(se[V++]=A>>>16&255,A=T[M++],se[V++]=A>>>0&255),te[K++]=A>>>16&255;P=8}L!==r.image_compression.NONE&&e()?(w=t(se,j.width*j.colors,j.colors,L),ee=t(te,j.width,1,L)):(w=se,ee=te,fe=void 0)}if(j.colorType===3&&(O=this.color_spaces.INDEXED,G=j.palette,j.transparency.indexed)){var he=j.transparency.indexed,Oe=0;for(M=0,U=he.length;M<U;++M)Oe+=he[M];if((Oe/=255)===U-1&&he.indexOf(0)!==-1)C=[he.indexOf(0)];else if(Oe!==U){for(T=j.decodePixels(),te=new Uint8Array(T.length),M=0,U=T.length;M<U;M++)te[M]=he[T[M]];ee=t(te,j.width,1)}}var F=function(W){var Q;switch(W){case r.image_compression.FAST:Q=11;break;case r.image_compression.MEDIUM:Q=13;break;case r.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(L);return fe===this.decode.FLATE_DECODE&&(Y="/Predictor "+F+" "),Y+="/Colors "+z+" /BitsPerComponent "+P+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:_,data:w,index:m,filter:fe,decodeParameters:Y,transparency:C,palette:G,sMask:ee,predictor:F,width:j.width,height:j.height,bitsPerComponent:P,colorSpace:O}}}})(Et.API),function(r){r.processGIF89A=function(e,t,n,a){var i=new k0(e),c=i.width,u=i.height,h=[];i.decodeAndBlitFrameRGBA(0,h);var y={data:h,width:c,height:u},x=new Hl(100).encode(y,100);return r.processJPEG.call(this,x,t,n,a)},r.processGIF87A=r.processGIF89A}(Et.API),vi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},vi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){gr.log("bit decode error:"+t)}},vi.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*a*4,u=0;u<8&&8*a+u<this.width;u++){var h=this.palette[i>>7-u&1];this.data[c+4*u]=h.blue,this.data[c+4*u+1]=h.green,this.data[c+4*u+2]=h.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},vi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*a*4,u=i>>4,h=15&i,y=this.palette[u];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*a+1>=this.width)break;y=this.palette[h],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},vi.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;if(a<this.palette.length){var c=this.palette[a];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},vi.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&e)/e*255|0,u=(i>>5&e)/e*255|0,h=(i>>10&e)/e*255|0,y=i>>15?255:0,x=n*this.width*4+4*a;this.data[x]=h,this.data[x+1]=u,this.data[x+2]=c,this.data[x+3]=y}this.pos+=r}},vi.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,y=(c>>11)/e*255|0,x=a*this.width*4+4*i;this.data[x]=y,this.data[x+1]=h,this.data[x+2]=u,this.data[x+3]=255}this.pos+=r}},vi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},vi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=i,this.data[u+1]=a,this.data[u+2]=n,this.data[u+3]=c}},vi.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,a){var i=new vi(e,!1),c=i.width,u=i.height,h={data:i.getData(),width:c,height:u},y=new Hl(100).encode(h,100);return r.processJPEG.call(this,y,t,n,a)}}(Et.API),Hu.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,a){var i=new Hu(e),c=i.width,u=i.height,h={data:i.getData(),width:c,height:u},y=new Hl(100).encode(h,100);return r.processJPEG.call(this,y,t,n,a)}}(Et.API),Et.API.processRGBA=function(r,e,t){for(var n=r.data,a=n.length,i=new Uint8Array(a/4*3),c=new Uint8Array(a/4),u=0,h=0,y=0;y<a;y+=4){var x=n[y],b=n[y+1],w=n[y+2],m=n[y+3];i[u++]=x,i[u++]=b,i[u++]=w,c[h++]=m}var _=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Et.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Is=Et.API,zo=Is.getCharWidthsArray=function(r,e){var t,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:a.metadata.Unicode.widths,h=u.fof?u.fof:1,y=e.kerning?e.kerning:a.metadata.Unicode.kerning,x=y.fof?y.fof:1,b=e.doKerning!==!1,w=0,m=r.length,_=0,L=u[0]||h,O=[];for(t=0;t<m;t++)n=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?O.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+c*(1e3/i)||0)/1e3):(w=b&&yr(y[n])==="object"&&!isNaN(parseInt(y[n][_],10))?y[n][_]/x:0,O.push((u[n]||L)/h+w)),_=n;return O},qu=Is.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Is.processArabic&&(r=Is.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,a)/t:zo.apply(this,arguments).reduce(function(i,c){return i+c},0)},Bu=function(r,e,t,n){for(var a=[],i=0,c=r.length,u=0;i!==c&&u+e[i]<t;)u+=e[i],i++;a.push(r.slice(0,i));var h=i;for(u=0;i!==c;)u+e[i]>n&&(a.push(r.slice(h,i)),u=0,h=i),u+=e[i],i++;return h!==i&&a.push(r.slice(h,i)),a},Uu=function(r,e,t){t||(t={});var n,a,i,c,u,h,y,x=[],b=[x],w=t.textIndent||0,m=0,_=0,L=r.split(" "),O=zo.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?L[0].length+2:t.lineIndent||0){var P=Array(h).join(" "),j=[];L.map(function(z){(z=z.split(/\s*\n/)).length>1?j=j.concat(z.map(function(G,ee){return(ee&&G.length?`
`:"")+G})):j.push(z[0])}),L=j,h=qu.apply(this,[P,t])}for(i=0,c=L.length;i<c;i++){var C=0;if(n=L[i],h&&n[0]==`
`&&(n=n.substr(1),C=1),w+m+(_=(a=zo.apply(this,[n,t])).reduce(function(z,G){return z+G},0))>e||C){if(_>e){for(u=Bu.apply(this,[n,a,e-(w+m),e]),x.push(u.shift()),x=[u.pop()];u.length;)b.push([u.shift()]);_=a.slice(n.length-(x[0]?x[0].length:0)).reduce(function(z,G){return z+G},0)}else x=[n];b.push(x),w=_+h,m=O}else x.push(n),w+=m+_,m=O}return y=h?function(z,G){return(G?P:"")+z.join(" ")}:function(z){return z.join(" ")},b.map(y)},Is.splitTextToSize=function(r,e,t){var n,a=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var b=this.internal.getFont(x.fontName,x.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=t.lineIndent;var u,h,y=[];for(u=0,h=n.length;u<h;u++)y=y.concat(Uu.apply(this,[n[u],c,i]));return y},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},a=0;a<e.length;a++)t[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var i=function(b){return"0x"+parseInt(b,10).toString(16)},c=r.__fontmetrics__.compress=function(b){var w,m,_,L,O=["{"];for(var P in b){if(w=b[P],isNaN(parseInt(P,10))?m="'"+P+"'":(P=parseInt(P,10),m=(m=i(P).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof w=="number")w<0?(_=i(w).slice(3),L="-"):(_=i(w).slice(2),L=""),_=L+_.slice(0,-1)+n[_.slice(-1)];else{if(yr(w)!=="object")throw new Error("Don't know what to do with value type "+yr(w)+".");_=c(w)}O.push(m+_)}return O.push("}"),O.join("")},u=r.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,m,_,L,O={},P=1,j=O,C=[],z="",G="",ee=b.length-1,T=1;T<ee;T+=1)(L=b[T])=="'"?w?(_=w.join(""),w=void 0):w=[]:w?w.push(L):L=="{"?(C.push([j,_]),j={},_=void 0):L=="}"?((m=C.pop())[0][m[1]]=j,_=void 0,j=m[0]):L=="-"?P=-1:_===void 0?t.hasOwnProperty(L)?(z+=t[L],_=parseInt(z,16)*P,P=1,z=""):z+=L:t.hasOwnProperty(L)?(G+=t[L],j[_]=parseInt(G,16)*P,P=1,_=void 0,G=""):G+=L;return O},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},x={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(b){var w=b.font,m=x.Unicode[w.postScriptName];m&&(w.metadata.Unicode={},w.metadata.Unicode.widths=m.widths,w.metadata.Unicode.kerning=m.kerning);var _=y.Unicode[w.postScriptName];_&&(w.metadata.Unicode.encoding=_,w.encoding=_.codePages[0])}])}(Et.API),function(r){var e=function(t){for(var n=t.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a};r.API.events.push(["addFont",function(t){var n=void 0,a=t.font,i=t.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(so(u)),c.metadata=r.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,n)}}])}(Et),function(r){function e(){return(qt.canvg?Promise.resolve(qt.canvg):nl(()=>import("./index.es-3c3c1151.js"),["./index.es-3c3c1151.js","./vendor-36f7ab30.js","./utils-570e0bc6.js"],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Et.API.addSvgAsImage=function(t,n,a,i,c,u,h,y){if(isNaN(n)||isNaN(a))throw gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(c))throw gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=i,x.height=c;var b=x.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,x.width,x.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(_){return _.fromString(b,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(w)}).then(function(){m.addImage(x.toDataURL("image/jpeg",1),n,a,i,c,h,y)})}}(),Et.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,t);return this},Et.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,a,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),h=[],y=0,x=0,b=0;function w(_,L){var O,P=!1;for(O=0;O<_.length;O+=1)_[O]===L&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var m=u.length;for(b=0;b<m;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(yr(r)==="object"){for(a in r)if(i=r[a],w(u,a)&&i!==void 0){if(t[a].type==="boolean"&&typeof i=="boolean")t[a].value=i;else if(t[a].type==="name"&&w(t[a].valueSet,i))t[a].value=i;else if(t[a].type==="integer"&&Number.isInteger(i))t[a].value=i;else if(t[a].type==="array"){for(y=0;y<i.length;y+=1)if(n=!0,i[y].length===1&&typeof i[y][0]=="number")h.push(String(i[y]-1));else if(i[y].length>1){for(x=0;x<i[y].length;x+=1)typeof i[y][x]!="number"&&(n=!1);n===!0&&h.push([i[y][0]-1,i[y][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,L=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?L.push("/"+_+" /"+t[_].value):L.push("/"+_+" "+t[_].value));L.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+L.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),y=i.length+c.length+u.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(a+i+c+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Et.API),function(r){var e=r.API,t=e.pdfEscape16=function(i,c){for(var u,h=c.metadata.Unicode.widths,y=["","0","00","000","0000"],x=[""],b=0,w=i.length;b<w;++b){if(u=c.metadata.characterToGlyph(i.charCodeAt(b)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=i.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return x.join("");u=u.toString(16),x.push(y[4-u.length],u)}return x.join("")},n=function(i){var c,u,h,y,x,b,w;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,w=(u=Object.keys(i).sort(function(m,_){return m-_})).length;b<w;b++)c=u[b],h.length>=100&&(x+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(y=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+y+">"));return h.length&&(x+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(c){var u=c.font,h=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),m="",_=0;_<w.length;_++)m+=String.fromCharCode(w[_]);var L=y();x({data:m,addLength1:!0,objectId:L}),h("endobj");var O=y();x({data:n(u.metadata.toUnicode),addLength1:!0,objectId:O}),h("endobj");var P=y();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ms(u.fontName)),h("/FontFile2 "+L+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var j=y();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ms(u.fontName)),h("/FontDescriptor "+P+" 0 R"),h("/W "+r.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=y(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+O+" 0 R"),h("/BaseFont /"+Ms(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+j+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(c){var u=c.font,h=c.out,y=c.newObject,x=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,w="",m=0;m<b.length;m++)w+=String.fromCharCode(b[m]);var _=y();x({data:w,addLength1:!0,objectId:_}),h("endobj");var L=y();x({data:n(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var O=y();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+_+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Ms(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=y();for(var P=0;P<u.metadata.hmtx.widths.length;P++)u.metadata.hmtx.widths[P]=parseInt(u.metadata.hmtx.widths[P]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+L+" 0 R/BaseFont/"+Ms(u.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(i)}]);var a=function(i){var c,u=i.text||"",h=i.x,y=i.y,x=i.options||{},b=i.mutex||{},w=b.pdfEscape,m=b.activeFontKey,_=b.fonts,L=m,O="",P=0,j="",C=_[L].encoding;if(_[L].encoding!=="Identity-H")return{text:u,x:h,y,options:x,mutex:b};for(j=u,L=m,Array.isArray(u)&&(j=u[0]),P=0;P<j.length;P+=1)_[L].metadata.hasOwnProperty("cmap")&&(c=_[L].metadata.cmap.unicode.codeMap[j[P].charCodeAt(0)]),c||j[P].charCodeAt(0)<256&&_[L].metadata.hasOwnProperty("Unicode")?O+=j[P]:O+="";var z="";return parseInt(L.slice(1))<14||C==="WinAnsiEncoding"?z=w(O,L).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(z=t(O,_[L])),b.isHex=!0,{text:z,x:h,y,options:x,mutex:b}};e.events.push(["postProcessText",function(i){var c=i.text||"",u=[],h={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?u.push([a(Object.assign({},h,{text:c[y][0]})).text,c[y][1],c[y][2]]):u.push(a(Object.assign({},h,{text:c[y]})).text);i.text=u}else i.text=a(Object.assign({},h,{text:c})).text}])}(Et),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Et.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var a,i,c,u,h,y,x,b=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},L={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,C=0;this.__bidiEngine__={};var z=function(D){var A=D.charCodeAt(),M=A>>8,V=L[M];return V!==void 0?b[256*V+(255&A)]:M===252||M===253?"AL":P.test(M)?"L":M===8?"R":"N"},G=function(D){for(var A,M=0;M<D.length;M++){if((A=z(D.charAt(M)))==="L")return!1;if(A==="R")return!0}return!1},ee=function(D,A,M,V){var fe,Y,J,ne,K=A[V];switch(K){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(K="AN");break;case"AL":j=!0,K="R";break;case"WS":K="N";break;case"CS":V<1||V+1>=A.length||(fe=M[V-1])!=="EN"&&fe!=="AN"||(Y=A[V+1])!=="EN"&&Y!=="AN"?K="N":j&&(Y="AN"),K=Y===fe?Y:"N";break;case"ES":K=(fe=V>0?M[V-1]:"B")==="EN"&&V+1<A.length&&A[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&M[V-1]==="EN"){K="EN";break}if(j){K="N";break}for(J=V+1,ne=A.length;J<ne&&A[J]==="ET";)J++;K=J<ne&&A[J]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ne=A.length,J=V+1;J<ne&&A[J]==="NSM";)J++;if(J<ne){var he=D[V],Oe=he>=1425&&he<=2303||he===64286;if(fe=A[J],Oe&&(fe==="R"||fe==="AL")){K="R";break}}}K=V<1||(fe=A[V-1])==="B"?"N":M[V-1];break;case"B":j=!1,a=!0,K=C;break;case"S":i=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":K="N"}return K},T=function(D,A,M){var V=D.split("");return M&&U(V,M,{hiLevel:C}),V.reverse(),A&&A.reverse(),V.join("")},U=function(D,A,M){var V,fe,Y,J,ne,K=-1,he=D.length,Oe=0,F=[],W=C?m:w,Q=[];for(j=!1,a=!1,i=!1,fe=0;fe<he;fe++)Q[fe]=z(D[fe]);for(Y=0;Y<he;Y++){if(ne=Oe,F[Y]=ee(D,Q,F,Y),V=240&(Oe=W[ne][_[F[Y]]]),Oe&=15,A[Y]=J=W[Oe][5],V>0)if(V===16){for(fe=K;fe<Y;fe++)A[fe]=1;K=-1}else K=-1;if(W[Oe][6])K===-1&&(K=Y);else if(K>-1){for(fe=K;fe<Y;fe++)A[fe]=J;K=-1}Q[Y]==="B"&&(A[Y]=0),M.hiLevel|=J}i&&function(ie,oe,Pe){for(var De=0;De<Pe;De++)if(ie[De]==="S"){oe[De]=C;for(var me=De-1;me>=0&&ie[me]==="WS";me--)oe[me]=C}}(Q,A,he)},te=function(D,A,M,V,fe){if(!(fe.hiLevel<D)){if(D===1&&C===1&&!a)return A.reverse(),void(M&&M.reverse());for(var Y,J,ne,K,he=A.length,Oe=0;Oe<he;){if(V[Oe]>=D){for(ne=Oe+1;ne<he&&V[ne]>=D;)ne++;for(K=Oe,J=ne-1;K<J;K++,J--)Y=A[K],A[K]=A[J],A[J]=Y,M&&(Y=M[K],M[K]=M[J],M[J]=Y);Oe=ne}Oe++}}},se=function(D,A,M){var V=D.split(""),fe={hiLevel:C};return M||(M=[]),U(V,M,fe),function(Y,J,ne){if(ne.hiLevel!==0&&x)for(var K,he=0;he<Y.length;he++)J[he]===1&&(K=O.indexOf(Y[he]))>=0&&(Y[he]=O[K+1])}(V,M,fe),te(2,V,A,M,fe),te(1,V,A,M,fe),V.join("")};return this.__bidiEngine__.doBidiReorder=function(D,A,M){if(function(fe,Y){if(Y)for(var J=0;J<fe.length;J++)Y[J]=J;u===void 0&&(u=G(fe)),y===void 0&&(y=G(fe))}(D,A),c||!h||y)if(c&&h&&u^y)C=u?1:0,D=T(D,A,M);else if(!c&&h&&y)C=u?1:0,D=se(D,A,M),D=T(D,A);else if(!c||u||h||y){if(c&&!h&&u^y)D=T(D,A),u?(C=0,D=se(D,A,M)):(C=1,D=se(D,A,M),D=T(D,A));else if(c&&u&&!h&&y)C=1,D=se(D,A,M),D=T(D,A);else if(!c&&!h&&u^y){var V=x;u?(C=1,D=se(D,A,M),C=0,x=!1,D=se(D,A,M),x=V):(C=0,D=se(D,A,M),D=T(D,A),C=1,x=!1,D=se(D,A,M),x=V,D=T(D,A))}}else C=0,D=se(D,A,M);else C=u?1:0,D=se(D,A,M);return D},this.__bidiEngine__.setOptions=function(D){D&&(c=D.isInputVisual,h=D.isOutputVisual,u=D.isInputRtl,y=D.isOutputRtl,x=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var a=n.text,i=(n.x,n.y,n.options||{}),c=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var u=0;for(c=[],u=0;u<a.length;u+=1)Object.prototype.toString.call(a[u])==="[object Array]"?c.push([t.doBidiReorder(a[u][0]),a[u][1],a[u][2]]):c.push([t.doBidiReorder(a[u])]);n.text=c}else n.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(Et),Et.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ka(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new W0(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new C0(this.contents),this.head=new D0(this),this.name=new M0(this),this.cmap=new zd(this),this.toUnicode={},this.hhea=new O0(this),this.maxp=new R0(this),this.hmtx=new q0(this),this.post=new E0(this),this.os2=new I0(this),this.loca=new H0(this),this.glyf=new B0(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,h,y;for(y=[],c=0,u=(h=this.bbox).length;c<u;c++)e=h[c],y.push(Math.round(e*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var a,i,c,u;for(c=0,i=0,u=(e=""+e).length;0<=u?i<u:i>u;i=0<=u?++i:--i)a=e.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var Si,Ka=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,a,i,c,u,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),c=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^c)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*i+65536*c+256*u+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(this.writeByte(t));return i},r}(),C0=function(){var r;function e(t){var n,a,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,a,i,c,u,h,y,x,b,w,m,_,L;for(L in m=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(m)/h),c=Math.floor(b/h),x=16*m-b,(a=new Ka).writeInt(this.scalarType),a.writeShort(m),a.writeShort(b),a.writeShort(c),a.writeShort(x),i=16*m,y=a.pos+i,u=null,_=[],t)for(w=t[L],a.writeString(L),a.writeInt(r(w)),a.writeInt(y),a.writeInt(w.length),_=_.concat(w),L==="head"&&(u=y),y+=w.length;y%4;)_.push(0),y++;return a.write(_),n=2981146554-r(a.data),a.pos=u+8,a.writeUInt32(n),a.data},r=function(t){var n,a,i,c;for(t=Hd.call(t);t.length%4;)t.push(0);for(i=new Ka(t),a=0,n=0,c=t.length;n<c;n=n+=4)a+=i.readUInt32();return 4294967295&a},e}(),F0={}.hasOwnProperty,zi=function(r,e){for(var t in e)F0.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Si=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var D0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ka).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Wu=function(){function r(e,t){var n,a,i,c,u,h,y,x,b,w,m,_,L,O,P,j,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(m=e.readUInt16(),w=m/2,e.pos+=6,i=function(){var z,G;for(G=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)G.push(e.readUInt16());return G}(),e.pos+=2,L=function(){var z,G;for(G=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)G.push(e.readUInt16());return G}(),y=function(){var z,G;for(G=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)G.push(e.readUInt16());return G}(),x=function(){var z,G;for(G=[],h=z=0;0<=w?z<w:z>w;h=0<=w?++z:--z)G.push(e.readUInt16());return G}(),a=(this.length-e.pos+this.offset)/2,u=function(){var z,G;for(G=[],h=z=0;0<=a?z<a:z>a;h=0<=a?++z:--z)G.push(e.readUInt16());return G}(),h=P=0,C=i.length;P<C;h=++P)for(O=i[h],n=j=_=L[h];_<=O?j<=O:j>=O;n=_<=O?++j:--j)x[h]===0?c=n+y[h]:(c=u[x[h]/2+(n-_)-(w-h)]||0)!==0&&(c+=y[h]),this.codeMap[n]=65535&c}e.pos=b}return r.encode=function(e,t){var n,a,i,c,u,h,y,x,b,w,m,_,L,O,P,j,C,z,G,ee,T,U,te,se,D,A,M,V,fe,Y,J,ne,K,he,Oe,F,W,Q,ie,oe,Pe,De,me,$e,Xe,Qe;switch(V=new Ka,c=Object.keys(e).sort(function(dt,Ct){return dt-Ct}),t){case"macroman":for(L=0,O=function(){var dt=[];for(_=0;_<256;++_)dt.push(0);return dt}(),j={0:0},i={},fe=0,K=c.length;fe<K;fe++)j[me=e[a=c[fe]]]==null&&(j[me]=++L),i[a]={old:e[a],new:j[e[a]]},O[a]=j[e[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(O),{charMap:i,subtable:V.data,maxGlyphID:L+1};case"unicode":for(A=[],b=[],C=0,j={},n={},P=y=null,Y=0,he=c.length;Y<he;Y++)j[G=e[a=c[Y]]]==null&&(j[G]=++C),n[a]={old:G,new:j[G]},u=j[G]-a,P!=null&&u===y||(P&&b.push(P),A.push(a),y=u),P=a;for(P&&b.push(P),b.push(65535),A.push(65535),se=2*(te=A.length),U=2*Math.pow(Math.log(te)/Math.LN2,2),w=Math.log(U/2)/Math.LN2,T=2*te-U,h=[],ee=[],m=[],_=J=0,Oe=A.length;J<Oe;_=++J){if(D=A[_],x=b[_],D===65535){h.push(0),ee.push(0);break}if(D-(M=n[D].new)>=32768)for(h.push(0),ee.push(2*(m.length+te-_)),a=ne=D;D<=x?ne<=x:ne>=x;a=D<=x?++ne:--ne)m.push(n[a].new);else h.push(M-D),ee.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*te+2*m.length),V.writeUInt16(0),V.writeUInt16(se),V.writeUInt16(U),V.writeUInt16(w),V.writeUInt16(T),Pe=0,F=b.length;Pe<F;Pe++)a=b[Pe],V.writeUInt16(a);for(V.writeUInt16(0),De=0,W=A.length;De<W;De++)a=A[De],V.writeUInt16(a);for($e=0,Q=h.length;$e<Q;$e++)u=h[$e],V.writeUInt16(u);for(Xe=0,ie=ee.length;Xe<ie;Xe++)z=ee[Xe],V.writeUInt16(z);for(Qe=0,oe=m.length;Qe<oe;Qe++)L=m[Qe],V.writeUInt16(L);return{charMap:n,subtable:V.data,maxGlyphID:C+1}}},r}(),zd=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,a,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new Wu(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var a,i;return n==null&&(n="macroman"),a=Wu.encode(t,n),(i=new Ka).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},e}(),O0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),I0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(t.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),E0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="post",e.prototype.parse=function(t){var n,a,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var c;for(a=t.readUInt16(),this.glyphNameIndex=[],c=0;0<=a?c<a:c>a;c=0<=a?++c:--c)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 196608:break;case 262144:return this.map=(function(){var u,h,y;for(y=[],c=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;c=0<=h?++u:--u)y.push(t.readUInt32());return y}).call(this)}},e}(),T0=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},M0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="name",e.prototype.parse=function(t){var n,a,i,c,u,h,y,x,b,w,m;for(t.pos=this.offset,t.readShort(),n=t.readShort(),h=t.readShort(),a=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+h+t.readShort()});for(y={},c=b=0,w=a.length;b<w;c=++b)i=a[c],t.pos=i.offset,x=t.readString(i.length),u=new T0(x,i),y[m=i.nameID]==null&&(y[m]=[]),y[i.nameID].push(u);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),R0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),q0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,a,i,c,u,h,y;for(t.pos=this.offset,this.metrics=[],n=0,h=this.file.hhea.numberOfMetrics;0<=h?n<h:n>h;n=0<=h?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,b;for(b=[],n=x=0;0<=i?x<i:x>i;n=0<=i?++x:--x)b.push(t.readInt16());return b}(),this.widths=(function(){var x,b,w,m;for(m=[],x=0,b=(w=this.metrics).length;x<b;x++)c=w[x],m.push(c.advance);return m}).call(this),a=this.widths[this.widths.length-1],y=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)y.push(this.widths.push(a));return y},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Hd=[].slice,B0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,a,i,c,u,h,y,x,b,w;return t in this.cache?this.cache[t]:(c=this.file.loca,n=this.file.contents,a=c.indexOf(t),(i=c.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+a,u=(h=new Ka(n.read(i))).readShort(),x=h.readShort(),w=h.readShort(),y=h.readShort(),b=h.readShort(),this.cache[t]=u===-1?new z0(h,x,w,y,b):new U0(h,u,x,w,y,b),this.cache[t]))},e.prototype.encode=function(t,n,a){var i,c,u,h,y;for(u=[],c=[],h=0,y=n.length;h<y;h++)i=t[n[h]],c.push(u.length),i&&(u=u.concat(i.encode(a)));return c.push(u.length),{table:u,offsets:c}},e}(),U0=function(){function r(e,t,n,a,i,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),z0=function(){function r(e,t,n,a,i){var c,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ka(Hd.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),H0=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return zi(e,Si),e.prototype.tag="loca",e.prototype.parse=function(t){var n,a;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=2)c.push(2*t.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],a=0,i=this.length;a<i;a+=4)c.push(t.readUInt32());return c}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var a=new Uint32Array(this.offsets.length),i=0,c=0,u=0;u<a.length;++u)if(a[u]=i,c<n.length&&n[c]==u){++c,a[u]=i;var h=this.offsets[u],y=this.offsets[u+1]-h;y>0&&(i+=y)}for(var x=new Array(4*a.length),b=0;b<a.length;++b)x[4*b+3]=255&a[b],x[4*b+2]=(65280&a[b])>>8,x[4*b+1]=(16711680&a[b])>>16,x[4*b]=(4278190080&a[b])>>24;return x},e}(),W0=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=a[n];return e},r.prototype.glyphsFor=function(e){var t,n,a,i,c,u,h;for(a={},c=0,u=e.length;c<u;c++)a[i=e[c]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(n=a[i])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in h=this.glyphsFor(t))n=h[i],a[i]=n;return a},r.prototype.encode=function(e,t){var n,a,i,c,u,h,y,x,b,w,m,_,L,O,P;for(a in n=zd.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),m={0:0},P=n.charMap)m[(h=P[a]).old]=h.new;for(_ in w=n.maxGlyphID,c)_ in m||(m[_]=w++);return x=function(j){var C,z;for(C in z={},j)z[j[C]]=C;return z}(m),b=Object.keys(x).sort(function(j,C){return j-C}),L=function(){var j,C,z;for(z=[],j=0,C=b.length;j<C;j++)u=b[j],z.push(x[u]);return z}(),i=this.font.glyf.encode(c,L,m),y=this.font.loca.encode(i.offsets,L),O={cmap:this.font.cmap.raw(),glyf:i.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},r}();Et.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,a,i,c;if(Array.isArray(t))return"["+function(){var u,h,y;for(y=[],u=0,h=t.length;u<h;u++)n=t[u],y.push(e.convert(n));return y}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in i=["<<"],t)c=t[a],i.push("/"+a+" "+e.convert(c));return i.push(">>"),i.join(`
`)}return""+t},e}();const K0=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:N0,AcroFormAppearance:jt,AcroFormButton:en,AcroFormCheckBox:co,AcroFormChoiceField:ms,AcroFormComboBox:vs,AcroFormEditBox:oo,AcroFormListBox:gs,AcroFormPasswordField:uo,AcroFormPushButton:lo,AcroFormRadioButton:ys,AcroFormTextField:Ha,GState:vo,ShadingPattern:Ba,TilingPattern:hs,default:Et,jsPDF:Et},Symbol.toStringTag,{value:"Module"}));var Wd={exports:{}};const V0=Dh(K0);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(r,e){(function(n,a){r.exports=a(function(){try{return V0}catch{}}())})(typeof globalThis<"u"?globalThis:typeof no<"u"?no:typeof window<"u"?window:typeof self<"u"?self:no,function(t){return function(){var n={172:function(u,h){var y=this&&this.__extends||function(){var w=function(m,_){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(L[P]=O[P])},w(m,_)};return function(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");w(m,_);function L(){this.constructor=m}m.prototype=_===null?Object.create(_):(L.prototype=_.prototype,new L)}}();Object.defineProperty(h,"__esModule",{value:!0}),h.CellHookData=h.HookData=void 0;var x=function(){function w(m,_,L){this.table=_,this.pageNumber=_.pageNumber,this.pageCount=this.pageNumber,this.settings=_.settings,this.cursor=L,this.doc=m.getDocument()}return w}();h.HookData=x;var b=function(w){y(m,w);function m(_,L,O,P,j,C){var z=w.call(this,_,L,C)||this;return z.cell=O,z.row=P,z.column=j,z.section=P.section,z}return m}(x);h.CellHookData=b},340:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0});var x=y(4),b=y(136),w=y(744),m=y(776),_=y(664),L=y(972);function O(P){P.API.autoTable=function(){for(var j=[],C=0;C<arguments.length;C++)j[C]=arguments[C];var z;j.length===1?z=j[0]:(console.error("Use of deprecated autoTable initiation"),z=j[2]||{},z.columns=j[0],z.body=j[1]);var G=(0,m.parseInput)(this,z),ee=(0,L.createTable)(this,G);return(0,_.drawTable)(this,ee),this},P.API.lastAutoTable=!1,P.API.previousAutoTable=!1,P.API.autoTable.previous=!1,P.API.autoTableText=function(j,C,z,G){(0,b.default)(j,C,z,G,this)},P.API.autoTableSetDefaults=function(j){return w.DocHandler.setDefaults(j,this),this},P.autoTableSetDefaults=function(j,C){w.DocHandler.setDefaults(j,C)},P.API.autoTableHtmlToJson=function(j,C){var z;if(C===void 0&&(C=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var G=new w.DocHandler(this),ee=(0,x.parseHtml)(G,j,window,C,!1),T=ee.head,U=ee.body,te=((z=T[0])===null||z===void 0?void 0:z.map(function(se){return se.content}))||[];return{columns:te,rows:U,data:U}},P.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var j=this.lastAutoTable;return j&&j.finalY?j.finalY:0},P.API.autoTableAddPageContent=function(j){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),P.API.autoTable.globalDefaults||(P.API.autoTable.globalDefaults={}),P.API.autoTable.globalDefaults.addPageContent=j,this},P.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}h.default=O},136:function(u,h){Object.defineProperty(h,"__esModule",{value:!0});function y(x,b,w,m,_){m=m||{};var L=1.15,O=_.internal.scaleFactor,P=_.internal.getFontSize()/O,j=_.getLineHeightFactor?_.getLineHeightFactor():L,C=P*j,z=/\r\n|\r|\n/g,G="",ee=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(G=typeof x=="string"?x.split(z):x,ee=G.length||1),w+=P*(2-L),m.valign==="middle"?w-=ee/2*C:m.valign==="bottom"&&(w-=ee*C),m.halign==="center"||m.halign==="right"){var T=P;if(m.halign==="center"&&(T*=.5),G&&ee>=1){for(var U=0;U<G.length;U++)_.text(G[U],b-_.getStringUnitWidth(G[U])*T,w),w+=C;return _}b-=_.getStringUnitWidth(x)*T}return m.halign==="justify"?_.text(x,b,w,{maxWidth:m.maxWidth||100,align:"justify"}):_.text(x,b,w),_}h.default=y},420:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.getPageAvailableWidth=h.parseSpacing=h.getFillStyle=h.addTableBorder=h.getStringWidth=void 0;function y(_,L,O){O.applyStyles(L,!0);var P=Array.isArray(_)?_:[_],j=P.map(function(C){return O.getTextWidth(C)}).reduce(function(C,z){return Math.max(C,z)},0);return j}h.getStringWidth=y;function x(_,L,O,P){var j=L.settings.tableLineWidth,C=L.settings.tableLineColor;_.applyStyles({lineWidth:j,lineColor:C});var z=b(j,!1);z&&_.rect(O.x,O.y,L.getWidth(_.pageSize().width),P.y-O.y,z)}h.addTableBorder=x;function b(_,L){var O=_>0,P=L||L===0;return O&&P?"DF":O?"S":P?"F":null}h.getFillStyle=b;function w(_,L){var O,P,j,C;if(_=_||L,Array.isArray(_)){if(_.length>=4)return{top:_[0],right:_[1],bottom:_[2],left:_[3]};if(_.length===3)return{top:_[0],right:_[1],bottom:_[2],left:_[1]};if(_.length===2)return{top:_[0],right:_[1],bottom:_[0],left:_[1]};_.length===1?_=_[0]:_=L}return typeof _=="object"?(typeof _.vertical=="number"&&(_.top=_.vertical,_.bottom=_.vertical),typeof _.horizontal=="number"&&(_.right=_.horizontal,_.left=_.horizontal),{left:(O=_.left)!==null&&O!==void 0?O:L,top:(P=_.top)!==null&&P!==void 0?P:L,right:(j=_.right)!==null&&j!==void 0?j:L,bottom:(C=_.bottom)!==null&&C!==void 0?C:L}):(typeof _!="number"&&(_=L),{top:_,right:_,bottom:_,left:_})}h.parseSpacing=w;function m(_,L){var O=w(L.settings.margin,0);return _.pageSize().width-(O.left+O.right)}h.getPageAvailableWidth=m},796:function(u,h){var y=this&&this.__extends||function(){var m=function(_,L){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(O[j]=P[j])},m(_,L)};return function(_,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");m(_,L);function O(){this.constructor=_}_.prototype=L===null?Object.create(L):(O.prototype=L.prototype,new O)}}();Object.defineProperty(h,"__esModule",{value:!0}),h.getTheme=h.defaultStyles=h.HtmlRowInput=void 0;var x=function(m){y(_,m);function _(L){var O=m.call(this)||this;return O._element=L,O}return _}(Array);h.HtmlRowInput=x;function b(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}h.defaultStyles=b;function w(m){var _={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return _[m]}h.getTheme=w},903:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseCss=void 0;var x=y(420);function b(O,P,j,C,z){var G={},ee=1.3333333333333333,T=m(P,function(K){return z.getComputedStyle(K).backgroundColor});T!=null&&(G.fillColor=T);var U=m(P,function(K){return z.getComputedStyle(K).color});U!=null&&(G.textColor=U);var te=L(C,j);te&&(G.cellPadding=te);var se="borderTopColor",D=ee*j,A=C.borderTopWidth;if(C.borderBottomWidth===A&&C.borderRightWidth===A&&C.borderLeftWidth===A){var M=(parseFloat(A)||0)/D;M&&(G.lineWidth=M)}else G.lineWidth={top:(parseFloat(C.borderTopWidth)||0)/D,right:(parseFloat(C.borderRightWidth)||0)/D,bottom:(parseFloat(C.borderBottomWidth)||0)/D,left:(parseFloat(C.borderLeftWidth)||0)/D},G.lineWidth.top||(G.lineWidth.right?se="borderRightColor":G.lineWidth.bottom?se="borderBottomColor":G.lineWidth.left&&(se="borderLeftColor"));var V=m(P,function(K){return z.getComputedStyle(K)[se]});V!=null&&(G.lineColor=V);var fe=["left","right","center","justify"];fe.indexOf(C.textAlign)!==-1&&(G.halign=C.textAlign),fe=["middle","bottom","top"],fe.indexOf(C.verticalAlign)!==-1&&(G.valign=C.verticalAlign);var Y=parseInt(C.fontSize||"");isNaN(Y)||(G.fontSize=Y/ee);var J=w(C);J&&(G.fontStyle=J);var ne=(C.fontFamily||"").toLowerCase();return O.indexOf(ne)!==-1&&(G.font=ne),G}h.parseCss=b;function w(O){var P="";return(O.fontWeight==="bold"||O.fontWeight==="bolder"||parseInt(O.fontWeight)>=700)&&(P="bold"),(O.fontStyle==="italic"||O.fontStyle==="oblique")&&(P+="italic"),P}function m(O,P){var j=_(O,P);if(!j)return null;var C=j.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!C||!Array.isArray(C))return null;var z=[parseInt(C[1]),parseInt(C[2]),parseInt(C[3])],G=parseInt(C[4]);return G===0||isNaN(z[0])||isNaN(z[1])||isNaN(z[2])?null:z}function _(O,P){var j=P(O);return j==="rgba(0, 0, 0, 0)"||j==="transparent"||j==="initial"||j==="inherit"?O.parentElement==null?null:_(O.parentElement,P):j}function L(O,P){var j=[O.paddingTop,O.paddingRight,O.paddingBottom,O.paddingLeft],C=96/(72/P),z=(parseInt(O.lineHeight)-parseInt(O.fontSize))/P/2,G=j.map(function(T){return parseInt(T||"0")/C}),ee=(0,x.parseSpacing)(G,0);return z>ee.top&&(ee.top=z),z>ee.bottom&&(ee.bottom=z),ee}},744:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.DocHandler=void 0;var y={},x=function(){function b(w){this.jsPDFDocument=w,this.userStyles={textColor:w.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:w.internal.getFontSize(),fontStyle:w.internal.getFont().fontStyle,font:w.internal.getFont().fontName,lineWidth:w.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:w.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(w,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=w:y=w},b.unifyColor=function(w){return Array.isArray(w)?w:typeof w=="number"?[w,w,w]:typeof w=="string"?[w]:null},b.prototype.applyStyles=function(w,m){var _,L,O;m===void 0&&(m=!1),w.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w.fontStyle);var P=this.jsPDFDocument.internal.getFont(),j=P.fontStyle,C=P.fontName;if(w.font&&(C=w.font),w.fontStyle){j=w.fontStyle;var z=this.getFontList()[C];z&&z.indexOf(j)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(z[0]),j=z[0])}if(this.jsPDFDocument.setFont(C,j),w.fontSize&&this.jsPDFDocument.setFontSize(w.fontSize),!m){var G=b.unifyColor(w.fillColor);G&&(_=this.jsPDFDocument).setFillColor.apply(_,G),G=b.unifyColor(w.textColor),G&&(L=this.jsPDFDocument).setTextColor.apply(L,G),G=b.unifyColor(w.lineColor),G&&(O=this.jsPDFDocument).setDrawColor.apply(O,G),typeof w.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(w.lineWidth)}},b.prototype.splitTextToSize=function(w,m,_){return this.jsPDFDocument.splitTextToSize(w,m,_)},b.prototype.rect=function(w,m,_,L,O){return this.jsPDFDocument.rect(w,m,_,L,O)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(w){return this.jsPDFDocument.getTextWidth(w)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(w){this.jsPDFDocument.setPage(w)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return y||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var w=this.jsPDFDocument.internal.pageSize;return w.width==null&&(w={width:w.getWidth(),height:w.getHeight()}),w},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var w=this.jsPDFDocument;return w.getLineHeightFactor?w.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(w){return w/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var w=this.jsPDFDocument.internal.getCurrentPageInfo();return w?w.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b}();h.DocHandler=x},4:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseHtml=void 0;var x=y(903),b=y(796);function w(L,O,P,j,C){var z,G;j===void 0&&(j=!1),C===void 0&&(C=!1);var ee;typeof O=="string"?ee=P.document.querySelector(O):ee=O;var T=Object.keys(L.getFontList()),U=L.scaleFactor(),te=[],se=[],D=[];if(!ee)return console.error("Html table could not be found with input: ",O),{head:te,body:se,foot:D};for(var A=0;A<ee.rows.length;A++){var M=ee.rows[A],V=(G=(z=M==null?void 0:M.parentElement)===null||z===void 0?void 0:z.tagName)===null||G===void 0?void 0:G.toLowerCase(),fe=m(T,U,P,M,j,C);fe&&(V==="thead"?te.push(fe):V==="tfoot"?D.push(fe):se.push(fe))}return{head:te,body:se,foot:D}}h.parseHtml=w;function m(L,O,P,j,C,z){for(var G=new b.HtmlRowInput(j),ee=0;ee<j.cells.length;ee++){var T=j.cells[ee],U=P.getComputedStyle(T);if(C||U.display!=="none"){var te=void 0;z&&(te=(0,x.parseCss)(L,T,O,U,P)),G.push({rowSpan:T.rowSpan,colSpan:T.colSpan,styles:te,_element:T,content:_(T)})}}var se=P.getComputedStyle(j);if(G.length>0&&(C||se.display!=="none"))return G}function _(L){var O=L.cloneNode(!0);return O.innerHTML=O.innerHTML.replace(/\n/g,"").replace(/ +/g," "),O.innerHTML=O.innerHTML.split(/<br.*?>/).map(function(P){return P.trim()}).join(`
`),O.innerText||O.textContent||""}},776:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.parseInput=void 0;var x=y(4),b=y(356),w=y(420),m=y(744),_=y(792);function L(ee,T){var U=new m.DocHandler(ee),te=U.getDocumentOptions(),se=U.getGlobalOptions();(0,_.default)(U,se,te,T);var D=(0,b.assign)({},se,te,T),A;typeof window<"u"&&(A=window);var M=O(se,te,T),V=P(se,te,T),fe=j(U,D),Y=z(U,D,A);return{id:T.tableId,content:Y,hooks:V,styles:M,settings:fe}}h.parseInput=L;function O(ee,T,U){for(var te={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},se=function(V){if(V==="columnStyles"){var fe=ee[V],Y=T[V],J=U[V];te.columnStyles=(0,b.assign)({},fe,Y,J)}else{var ne=[ee,T,U],K=ne.map(function(he){return he[V]||{}});te[V]=(0,b.assign)({},K[0],K[1],K[2])}},D=0,A=Object.keys(te);D<A.length;D++){var M=A[D];se(M)}return te}function P(ee,T,U){for(var te=[ee,T,U],se={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,A=te;D<A.length;D++){var M=A[D];M.didParseCell&&se.didParseCell.push(M.didParseCell),M.willDrawCell&&se.willDrawCell.push(M.willDrawCell),M.didDrawCell&&se.didDrawCell.push(M.didDrawCell),M.willDrawPage&&se.willDrawPage.push(M.willDrawPage),M.didDrawPage&&se.didDrawPage.push(M.didDrawPage)}return se}function j(ee,T){var U,te,se,D,A,M,V,fe,Y,J,ne,K,he=(0,w.parseSpacing)(T.margin,40/ee.scaleFactor()),Oe=(U=C(ee,T.startY))!==null&&U!==void 0?U:he.top,F;T.showFoot===!0?F="everyPage":T.showFoot===!1?F="never":F=(te=T.showFoot)!==null&&te!==void 0?te:"everyPage";var W;T.showHead===!0?W="everyPage":T.showHead===!1?W="never":W=(se=T.showHead)!==null&&se!==void 0?se:"everyPage";var Q=(D=T.useCss)!==null&&D!==void 0?D:!1,ie=T.theme||(Q?"plain":"striped"),oe=!!T.horizontalPageBreak,Pe=(A=T.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(M=T.includeHiddenHtml)!==null&&M!==void 0?M:!1,useCss:Q,theme:ie,startY:Oe,margin:he,pageBreak:(V=T.pageBreak)!==null&&V!==void 0?V:"auto",rowPageBreak:(fe=T.rowPageBreak)!==null&&fe!==void 0?fe:"auto",tableWidth:(Y=T.tableWidth)!==null&&Y!==void 0?Y:"auto",showHead:W,showFoot:F,tableLineWidth:(J=T.tableLineWidth)!==null&&J!==void 0?J:0,tableLineColor:(ne=T.tableLineColor)!==null&&ne!==void 0?ne:200,horizontalPageBreak:oe,horizontalPageBreakRepeat:Pe,horizontalPageBreakBehaviour:(K=T.horizontalPageBreakBehaviour)!==null&&K!==void 0?K:"afterAllRows"}}function C(ee,T){var U=ee.getLastAutoTable(),te=ee.scaleFactor(),se=ee.pageNumber(),D=!1;if(U&&U.startPageNumber){var A=U.startPageNumber+U.pageNumber-1;D=A===se}return typeof T=="number"?T:(T==null||T===!1)&&D&&(U==null?void 0:U.finalY)!=null?U.finalY+20/te:null}function z(ee,T,U){var te=T.head||[],se=T.body||[],D=T.foot||[];if(T.html){var A=T.includeHiddenHtml;if(U){var M=(0,x.parseHtml)(ee,T.html,U,A,T.useCss)||{};te=M.head||te,se=M.body||te,D=M.foot||te}else console.error("Cannot parse html in non browser environment")}var V=T.columns||G(te,se,D);return{columns:V,head:te,body:se,foot:D}}function G(ee,T,U){var te=ee[0]||T[0]||U[0]||[],se=[];return Object.keys(te).filter(function(D){return D!=="_element"}).forEach(function(D){var A=1,M;Array.isArray(te)?M=te[parseInt(D)]:M=te[D],typeof M=="object"&&!Array.isArray(M)&&(A=(M==null?void 0:M.colSpan)||1);for(var V=0;V<A;V++){var fe=void 0;Array.isArray(te)?fe=se.length:fe=D+(V>0?"_".concat(V):"");var Y={dataKey:fe};se.push(Y)}}),se}},792:function(u,h){Object.defineProperty(h,"__esModule",{value:!0});function y(b,w,m,_){for(var L=function(C){C&&typeof C!="object"&&console.error("The options parameter should be of type object, is: "+typeof C),typeof C.extendWidth<"u"&&(C.tableWidth=C.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof C.margins<"u"&&(typeof C.margin>"u"&&(C.margin=C.margins),console.error("Use of deprecated option: margins, use margin instead.")),C.startY&&typeof C.startY!="number"&&(console.error("Invalid value for startY option",C.startY),delete C.startY),!C.didDrawPage&&(C.afterPageContent||C.beforePageContent||C.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),C.didDrawPage=function(D){b.applyStyles(b.userStyles),C.beforePageContent&&C.beforePageContent(D),b.applyStyles(b.userStyles),C.afterPageContent&&C.afterPageContent(D),b.applyStyles(b.userStyles),C.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){C[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var A=D[0],M=D[1];C[M]&&(console.error("Use of deprecated option ".concat(M,". Use ").concat(A," instead")),C[A]=C[M])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var A=typeof D=="string"?D:D[0],M=typeof D=="string"?D:D[1];typeof C[A]<"u"&&(typeof C.styles[M]>"u"&&(C.styles[M]=C[A]),console.error("Use of deprecated option: "+A+", use the style "+M+" instead."))});for(var z=0,G=["styles","bodyStyles","headStyles","footStyles"];z<G.length;z++){var ee=G[z];x(C[ee]||{})}for(var T=C.columnStyles||{},U=0,te=Object.keys(T);U<te.length;U++){var se=te[U];x(T[se]||{})}},O=0,P=[w,m,_];O<P.length;O++){var j=P[O];L(j)}}h.default=y;function x(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}},260:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.Column=h.Cell=h.Row=h.Table=void 0;var x=y(796),b=y(172),w=y(420),m=function(){function P(j,C){this.pageNumber=1,this.pageCount=1,this.id=j.id,this.settings=j.settings,this.styles=j.styles,this.hooks=j.hooks,this.columns=C.columns,this.head=C.head,this.body=C.body,this.foot=C.foot}return P.prototype.getHeadHeight=function(j){return this.head.reduce(function(C,z){return C+z.getMaxCellHeight(j)},0)},P.prototype.getFootHeight=function(j){return this.foot.reduce(function(C,z){return C+z.getMaxCellHeight(j)},0)},P.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},P.prototype.callCellHooks=function(j,C,z,G,ee,T){for(var U=0,te=C;U<te.length;U++){var se=te[U],D=new b.CellHookData(j,this,z,G,ee,T),A=se(D)===!1;if(z.text=Array.isArray(z.text)?z.text:[z.text],A)return!1}return!0},P.prototype.callEndPageHooks=function(j,C){j.applyStyles(j.userStyles);for(var z=0,G=this.hooks.didDrawPage;z<G.length;z++){var ee=G[z];ee(new b.HookData(j,this,C))}},P.prototype.callWillDrawPageHooks=function(j,C){for(var z=0,G=this.hooks.willDrawPage;z<G.length;z++){var ee=G[z];ee(new b.HookData(j,this,C))}},P.prototype.getWidth=function(j){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var C=this.columns.reduce(function(G,ee){return G+ee.wrappedWidth},0);return C}else{var z=this.settings.margin;return j-z.left-z.right}},P}();h.Table=m;var _=function(){function P(j,C,z,G,ee){ee===void 0&&(ee=!1),this.height=0,this.raw=j,j instanceof x.HtmlRowInput&&(this.raw=j._element,this.element=j._element),this.index=C,this.section=z,this.cells=G,this.spansMultiplePages=ee}return P.prototype.getMaxCellHeight=function(j){var C=this;return j.reduce(function(z,G){var ee;return Math.max(z,((ee=C.cells[G.index])===null||ee===void 0?void 0:ee.height)||0)},0)},P.prototype.hasRowSpan=function(j){var C=this;return j.filter(function(z){var G=C.cells[z.index];return G?G.rowSpan>1:!1}).length>0},P.prototype.canEntireRowFit=function(j,C){return this.getMaxCellHeight(C)<=j},P.prototype.getMinimumRowHeight=function(j,C){var z=this;return j.reduce(function(G,ee){var T=z.cells[ee.index];if(!T)return 0;var U=C.getLineHeight(T.styles.fontSize),te=T.padding("vertical"),se=te+U;return se>G?se:G},0)},P}();h.Row=_;var L=function(){function P(j,C,z){var G,ee;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=C,this.section=z,this.raw=j;var T=j;j!=null&&typeof j=="object"&&!Array.isArray(j)?(this.rowSpan=j.rowSpan||1,this.colSpan=j.colSpan||1,T=(ee=(G=j.content)!==null&&G!==void 0?G:j.title)!==null&&ee!==void 0?ee:j,j._element&&(this.raw=j._element)):(this.rowSpan=1,this.colSpan=1);var U=T!=null?""+T:"",te=/\r\n|\r|\n/g;this.text=U.split(te)}return P.prototype.getTextPos=function(){var j;if(this.styles.valign==="top")j=this.y+this.padding("top");else if(this.styles.valign==="bottom")j=this.y+this.height-this.padding("bottom");else{var C=this.height-this.padding("vertical");j=this.y+C/2+this.padding("top")}var z;if(this.styles.halign==="right")z=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var G=this.width-this.padding("horizontal");z=this.x+G/2+this.padding("left")}else z=this.x+this.padding("left");return{x:z,y:j}},P.prototype.getContentHeight=function(j,C){C===void 0&&(C=1.15);var z=Array.isArray(this.text)?this.text.length:1,G=this.styles.fontSize/j*C,ee=z*G+this.padding("vertical");return Math.max(ee,this.styles.minCellHeight)},P.prototype.padding=function(j){var C=(0,w.parseSpacing)(this.styles.cellPadding,0);return j==="vertical"?C.top+C.bottom:j==="horizontal"?C.left+C.right:C[j]},P}();h.Cell=L;var O=function(){function P(j,C,z){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=j,this.raw=C,this.index=z}return P.prototype.getMaxCustomCellWidth=function(j){for(var C=0,z=0,G=j.allRows();z<G.length;z++){var ee=G[z],T=ee.cells[this.index];T&&typeof T.styles.cellWidth=="number"&&(C=Math.max(C,T.styles.cellWidth))}return C},P}();h.Column=O},356:function(u,h){Object.defineProperty(h,"__esModule",{value:!0}),h.assign=void 0;function y(x,b,w,m,_){if(x==null)throw new TypeError("Cannot convert undefined or null to object");for(var L=Object(x),O=1;O<arguments.length;O++){var P=arguments[O];if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(L[j]=P[j])}return L}h.assign=y},972:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.createTable=void 0;var x=y(744),b=y(260),w=y(324),m=y(796),_=y(356);function L(ee,T){var U=new x.DocHandler(ee),te=O(T,U.scaleFactor()),se=new b.Table(T,te);return(0,w.calculateWidths)(U,se),U.applyStyles(U.userStyles),se}h.createTable=L;function O(ee,T){var U=ee.content,te=z(U.columns);if(U.head.length===0){var se=j(te,"head");se&&U.head.push(se)}if(U.foot.length===0){var se=j(te,"foot");se&&U.foot.push(se)}var D=ee.settings.theme,A=ee.styles;return{columns:te,head:P("head",U.head,te,A,D,T),body:P("body",U.body,te,A,D,T),foot:P("foot",U.foot,te,A,D,T)}}function P(ee,T,U,te,se,D){var A={},M=T.map(function(V,fe){for(var Y=0,J={},ne=0,K=0,he=0,Oe=U;he<Oe.length;he++){var F=Oe[he];if(A[F.index]==null||A[F.index].left===0)if(K===0){var W=void 0;Array.isArray(V)?W=V[F.index-ne-Y]:W=V[F.dataKey];var Q={};typeof W=="object"&&!Array.isArray(W)&&(Q=(W==null?void 0:W.styles)||{});var ie=G(ee,F,fe,se,te,D,Q),oe=new b.Cell(W,ie,ee);J[F.dataKey]=oe,J[F.index]=oe,K=oe.colSpan-1,A[F.index]={left:oe.rowSpan-1,times:K}}else K--,ne++;else A[F.index].left--,K=A[F.index].times,Y++}return new b.Row(V,fe,ee,J)});return M}function j(ee,T){var U={};return ee.forEach(function(te){if(te.raw!=null){var se=C(T,te.raw);se!=null&&(U[te.dataKey]=se)}}),Object.keys(U).length>0?U:null}function C(ee,T){if(ee==="head"){if(typeof T=="object")return T.header||T.title||null;if(typeof T=="string"||typeof T=="number")return T}else if(ee==="foot"&&typeof T=="object")return T.footer;return null}function z(ee){return ee.map(function(T,U){var te,se,D;return typeof T=="object"?D=(se=(te=T.dataKey)!==null&&te!==void 0?te:T.key)!==null&&se!==void 0?se:U:D=U,new b.Column(D,T,U)})}function G(ee,T,U,te,se,D,A){var M=(0,m.getTheme)(te),V;ee==="head"?V=se.headStyles:ee==="body"?V=se.bodyStyles:ee==="foot"&&(V=se.footStyles);var fe=(0,_.assign)({},M.table,M[ee],se.styles,V),Y=se.columnStyles[T.dataKey]||se.columnStyles[T.index]||{},J=ee==="body"?Y:{},ne=ee==="body"&&U%2===0?(0,_.assign)({},M.alternateRow,se.alternateRowStyles):{},K=(0,m.defaultStyles)(D),he=(0,_.assign)({},K,fe,ne,J);return(0,_.assign)(he,A)}},664:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.addPage=h.drawTable=void 0;var x=y(420),b=y(260),w=y(744),m=y(356),_=y(136),L=y(224);function O(Y,J){var ne=J.settings,K=ne.startY,he=ne.margin,Oe={x:he.left,y:K},F=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns),W=K+he.bottom+F;if(ne.pageBreak==="avoid"){var Q=J.body,ie=Q.reduce(function(De,me){return De+me.height},0);W+=ie}var oe=new w.DocHandler(Y);(ne.pageBreak==="always"||ne.startY!=null&&W>oe.pageSize().height)&&(fe(oe),Oe.y=he.top),J.callWillDrawPageHooks(oe,Oe);var Pe=(0,m.assign)({},Oe);J.startPageNumber=oe.pageNumber(),ne.horizontalPageBreak?P(oe,J,Pe,Oe):(oe.applyStyles(oe.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&J.head.forEach(function(De){return se(oe,J,De,Oe,J.columns)}),oe.applyStyles(oe.userStyles),J.body.forEach(function(De,me){var $e=me===J.body.length-1;te(oe,J,De,$e,Pe,Oe,J.columns)}),oe.applyStyles(oe.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&J.foot.forEach(function(De){return se(oe,J,De,Oe,J.columns)})),(0,x.addTableBorder)(oe,J,Pe,Oe),J.callEndPageHooks(oe,Oe),J.finalY=Oe.y,Y.lastAutoTable=J,Y.previousAutoTable=J,Y.autoTable&&(Y.autoTable.previous=J),oe.applyStyles(oe.userStyles)}h.drawTable=O;function P(Y,J,ne,K){var he=(0,L.calculateAllColumnsCanFitInPage)(Y,J),Oe=J.settings;if(Oe.horizontalPageBreakBehaviour==="afterAllRows")he.forEach(function(ie,oe){Y.applyStyles(Y.userStyles),oe>0?V(Y,J,ne,K,ie.columns,!0):j(Y,J,K,ie.columns),C(Y,J,ne,K,ie.columns),G(Y,J,K,ie.columns)});else for(var F=-1,W=he[0],Q=function(){var ie=F;if(W){Y.applyStyles(Y.userStyles);var oe=W.columns;F>=0?V(Y,J,ne,K,oe,!0):j(Y,J,K,oe),ie=z(Y,J,F+1,K,oe),G(Y,J,K,oe)}var Pe=ie-F;he.slice(1).forEach(function(De){Y.applyStyles(Y.userStyles),V(Y,J,ne,K,De.columns,!0),z(Y,J,F+1,K,De.columns,Pe),G(Y,J,K,De.columns)}),F=ie};F<J.body.length-1;)Q()}function j(Y,J,ne,K){var he=J.settings;Y.applyStyles(Y.userStyles),(he.showHead==="firstPage"||he.showHead==="everyPage")&&J.head.forEach(function(Oe){return se(Y,J,Oe,ne,K)})}function C(Y,J,ne,K,he){Y.applyStyles(Y.userStyles),J.body.forEach(function(Oe,F){var W=F===J.body.length-1;te(Y,J,Oe,W,ne,K,he)})}function z(Y,J,ne,K,he,Oe){Y.applyStyles(Y.userStyles),Oe=Oe??J.body.length;var F=Math.min(ne+Oe,J.body.length),W=-1;return J.body.slice(ne,F).forEach(function(Q,ie){var oe=ne+ie===J.body.length-1,Pe=M(Y,J,oe,K);Q.canEntireRowFit(Pe,he)&&(se(Y,J,Q,K,he),W=ne+ie)}),W}function G(Y,J,ne,K){var he=J.settings;Y.applyStyles(Y.userStyles),(he.showFoot==="lastPage"||he.showFoot==="everyPage")&&J.foot.forEach(function(Oe){return se(Y,J,Oe,ne,K)})}function ee(Y,J,ne){var K=ne.getLineHeight(Y.styles.fontSize),he=Y.padding("vertical"),Oe=Math.floor((J-he)/K);return Math.max(0,Oe)}function T(Y,J,ne,K){var he={};Y.spansMultiplePages=!0,Y.height=0;for(var Oe=0,F=0,W=ne.columns;F<W.length;F++){var Q=W[F],ie=Y.cells[Q.index];if(ie){Array.isArray(ie.text)||(ie.text=[ie.text]);var oe=new b.Cell(ie.raw,ie.styles,ie.section);oe=(0,m.assign)(oe,ie),oe.text=[];var Pe=ee(ie,J,K);ie.text.length>Pe&&(oe.text=ie.text.splice(Pe,ie.text.length));var De=K.scaleFactor(),me=K.getLineHeightFactor();ie.contentHeight=ie.getContentHeight(De,me),ie.contentHeight>=J&&(ie.contentHeight=J,oe.styles.minCellHeight-=J),ie.contentHeight>Y.height&&(Y.height=ie.contentHeight),oe.contentHeight=oe.getContentHeight(De,me),oe.contentHeight>Oe&&(Oe=oe.contentHeight),he[Q.index]=oe}}var $e=new b.Row(Y.raw,-1,Y.section,he,!0);$e.height=Oe;for(var Xe=0,Qe=ne.columns;Xe<Qe.length;Xe++){var Q=Qe[Xe],oe=$e.cells[Q.index];oe&&(oe.height=$e.height);var ie=Y.cells[Q.index];ie&&(ie.height=Y.height)}return $e}function U(Y,J,ne,K){var he=Y.pageSize().height,Oe=K.settings.margin,F=Oe.top+Oe.bottom,W=he-F;J.section==="body"&&(W-=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns));var Q=J.getMinimumRowHeight(K.columns,Y),ie=Q<ne;if(Q>W)return console.error("Will not be able to print row ".concat(J.index," correctly since it's minimum height is larger than page height")),!0;if(!ie)return!1;var oe=J.hasRowSpan(K.columns),Pe=J.getMaxCellHeight(K.columns)>W;return Pe?(oe&&console.error("The content of row ".concat(J.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(oe||K.settings.rowPageBreak==="avoid")}function te(Y,J,ne,K,he,Oe,F){var W=M(Y,J,K,Oe);if(ne.canEntireRowFit(W,F))se(Y,J,ne,Oe,F);else if(U(Y,ne,W,J)){var Q=T(ne,W,J,Y);se(Y,J,ne,Oe,F),V(Y,J,he,Oe,F),te(Y,J,Q,K,he,Oe,F)}else V(Y,J,he,Oe,F),te(Y,J,ne,K,he,Oe,F)}function se(Y,J,ne,K,he){K.x=J.settings.margin.left;for(var Oe=0,F=he;Oe<F.length;Oe++){var W=F[Oe],Q=ne.cells[W.index];if(!Q){K.x+=W.width;continue}Y.applyStyles(Q.styles),Q.x=K.x,Q.y=K.y;var ie=J.callCellHooks(Y,J.hooks.willDrawCell,Q,ne,W,K);if(ie===!1){K.x+=W.width;continue}D(Y,Q,K);var oe=Q.getTextPos();(0,_.default)(Q.text,oe.x,oe.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},Y.getDocument()),J.callCellHooks(Y,J.hooks.didDrawCell,Q,ne,W,K),K.x+=W.width}K.y+=ne.height}function D(Y,J,ne){var K=J.styles;if(Y.getDocument().setFillColor(Y.getDocument().getFillColor()),typeof K.lineWidth=="number"){var he=(0,x.getFillStyle)(K.lineWidth,K.fillColor);he&&Y.rect(J.x,ne.y,J.width,J.height,he)}else typeof K.lineWidth=="object"&&(K.fillColor&&Y.rect(J.x,ne.y,J.width,J.height,"F"),A(Y,J,ne,K.lineWidth))}function A(Y,J,ne,K){var he,Oe,F,W;K.top&&(he=ne.x,Oe=ne.y,F=ne.x+J.width,W=ne.y,K.right&&(F+=.5*K.right),K.left&&(he-=.5*K.left),Q(K.top,he,Oe,F,W)),K.bottom&&(he=ne.x,Oe=ne.y+J.height,F=ne.x+J.width,W=ne.y+J.height,K.right&&(F+=.5*K.right),K.left&&(he-=.5*K.left),Q(K.bottom,he,Oe,F,W)),K.left&&(he=ne.x,Oe=ne.y,F=ne.x,W=ne.y+J.height,K.top&&(Oe-=.5*K.top),K.bottom&&(W+=.5*K.bottom),Q(K.left,he,Oe,F,W)),K.right&&(he=ne.x+J.width,Oe=ne.y,F=ne.x+J.width,W=ne.y+J.height,K.top&&(Oe-=.5*K.top),K.bottom&&(W+=.5*K.bottom),Q(K.right,he,Oe,F,W));function Q(ie,oe,Pe,De,me){Y.getDocument().setLineWidth(ie),Y.getDocument().line(oe,Pe,De,me,"S")}}function M(Y,J,ne,K){var he=J.settings.margin.bottom,Oe=J.settings.showFoot;return(Oe==="everyPage"||Oe==="lastPage"&&ne)&&(he+=J.getFootHeight(J.columns)),Y.pageSize().height-K.y-he}function V(Y,J,ne,K,he,Oe){he===void 0&&(he=[]),Oe===void 0&&(Oe=!1),Y.applyStyles(Y.userStyles),J.settings.showFoot==="everyPage"&&!Oe&&J.foot.forEach(function(W){return se(Y,J,W,K,he)}),J.callEndPageHooks(Y,K);var F=J.settings.margin;(0,x.addTableBorder)(Y,J,ne,K),fe(Y),J.pageNumber++,J.pageCount++,K.x=F.left,K.y=F.top,ne.y=F.top,J.callWillDrawPageHooks(Y,K),J.settings.showHead==="everyPage"&&(J.head.forEach(function(W){return se(Y,J,W,K,he)}),Y.applyStyles(Y.userStyles))}h.addPage=V;function fe(Y){var J=Y.pageNumber();Y.setPage(J+1);var ne=Y.pageNumber();return ne===J?(Y.addPage(),!0):!1}},224:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.calculateAllColumnsCanFitInPage=void 0;var x=y(420);function b(m,_,L){var O;L===void 0&&(L={});var P=(0,x.getPageAvailableWidth)(m,_),j=new Map,C=[],z=[],G=[];_.settings.horizontalPageBreakRepeat,Array.isArray(_.settings.horizontalPageBreakRepeat)?G=_.settings.horizontalPageBreakRepeat:(typeof _.settings.horizontalPageBreakRepeat=="string"||typeof _.settings.horizontalPageBreakRepeat=="number")&&(G=[_.settings.horizontalPageBreakRepeat]),G.forEach(function(te){var se=_.columns.find(function(D){return D.dataKey===te||D.index===te});se&&!j.has(se.index)&&(j.set(se.index,!0),C.push(se.index),z.push(_.columns[se.index]),P-=se.wrappedWidth)});for(var ee=!0,T=(O=L==null?void 0:L.start)!==null&&O!==void 0?O:0;T<_.columns.length;){if(j.has(T)){T++;continue}var U=_.columns[T].wrappedWidth;if(ee||P>=U)ee=!1,C.push(T),z.push(_.columns[T]),P-=U;else break;T++}return{colIndexes:C,columns:z,lastIndex:T-1}}function w(m,_){for(var L=[],O=0;O<_.columns.length;O++){var P=b(m,_,{start:O});P.columns.length&&(L.push(P),O=P.lastIndex)}return L}h.calculateAllColumnsCanFitInPage=w},324:function(u,h,y){Object.defineProperty(h,"__esModule",{value:!0}),h.ellipsize=h.resizeColumns=h.calculateWidths=void 0;var x=y(420);function b(C,z){w(C,z);var G=[],ee=0;z.columns.forEach(function(U){var te=U.getMaxCustomCellWidth(z);te?U.width=te:(U.width=U.wrappedWidth,G.push(U)),ee+=U.width});var T=z.getWidth(C.pageSize().width)-ee;T&&(T=m(G,T,function(U){return Math.max(U.minReadableWidth,U.minWidth)})),T&&(T=m(G,T,function(U){return U.minWidth})),T=Math.abs(T),!z.settings.horizontalPageBreak&&T>.1/C.scaleFactor()&&(T=T<1?T:Math.round(T),console.warn("Of the table content, ".concat(T," units width could not fit page"))),L(z),O(z,C),_(z)}h.calculateWidths=b;function w(C,z){var G=C.scaleFactor(),ee=z.settings.horizontalPageBreak,T=(0,x.getPageAvailableWidth)(C,z);z.allRows().forEach(function(U){for(var te=0,se=z.columns;te<se.length;te++){var D=se[te],A=U.cells[D.index];if(A){var M=z.hooks.didParseCell;z.callCellHooks(C,M,A,U,D,null);var V=A.padding("horizontal");A.contentWidth=(0,x.getStringWidth)(A.text,A.styles,C)+V;var fe=(0,x.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,C);if(A.minReadableWidth=fe+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||ee===!0)A.contentWidth>T?(A.minWidth=T,A.wrappedWidth=T):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var Y=10/G;A.minWidth=A.styles.minCellWidth||Y,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),z.allRows().forEach(function(U){for(var te=0,se=z.columns;te<se.length;te++){var D=se[te],A=U.cells[D.index];if(A&&A.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,A.wrappedWidth),D.minWidth=Math.max(D.minWidth,A.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,A.minReadableWidth);else{var M=z.styles.columnStyles[D.dataKey]||z.styles.columnStyles[D.index]||{},V=M.cellWidth||M.minCellWidth;V&&typeof V=="number"&&(D.minWidth=V,D.wrappedWidth=V)}A&&(A.colSpan>1&&!D.minWidth&&(D.minWidth=A.minWidth),A.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=A.minWidth))}})}function m(C,z,G){for(var ee=z,T=C.reduce(function(Y,J){return Y+J.wrappedWidth},0),U=0;U<C.length;U++){var te=C[U],se=te.wrappedWidth/T,D=ee*se,A=te.width+D,M=G(te),V=A<M?M:A;z-=V-te.width,te.width=V}if(z=Math.round(z*1e10)/1e10,z){var fe=C.filter(function(Y){return z<0?Y.width>G(Y):!0});fe.length&&(z=m(fe,z,G))}return z}h.resizeColumns=m;function _(C){for(var z={},G=1,ee=C.allRows(),T=0;T<ee.length;T++)for(var U=ee[T],te=0,se=C.columns;te<se.length;te++){var D=se[te],A=z[D.index];if(G>1)G--,delete U.cells[D.index];else if(A)A.cell.height+=U.height,G=A.cell.colSpan,delete U.cells[D.index],A.left--,A.left<=1&&delete z[D.index];else{var M=U.cells[D.index];if(!M)continue;if(M.height=U.height,M.rowSpan>1){var V=ee.length-T,fe=M.rowSpan>V?V:M.rowSpan;z[D.index]={cell:M,left:fe,row:U}}}}}function L(C){for(var z=C.allRows(),G=0;G<z.length;G++)for(var ee=z[G],T=null,U=0,te=0,se=0;se<C.columns.length;se++){var D=C.columns[se];if(te-=1,te>1&&C.columns[se+1])U+=D.width,delete ee.cells[D.index];else if(T){var A=T;delete ee.cells[D.index],T=null,A.width=D.width+U}else{var A=ee.cells[D.index];if(!A)continue;if(te=A.colSpan,U=0,A.colSpan>1){T=A,U+=D.width;continue}A.width=D.width+U}}}function O(C,z){for(var G={count:0,height:0},ee=0,T=C.allRows();ee<T.length;ee++){for(var U=T[ee],te=0,se=C.columns;te<se.length;te++){var D=se[te],A=U.cells[D.index];if(A){z.applyStyles(A.styles,!0);var M=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=z.splitTextToSize(A.text,M+1/z.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=P(A.text,M,A.styles,z,"...");else if(A.styles.overflow==="hidden")A.text=P(A.text,M,A.styles,z,"");else if(typeof A.styles.overflow=="function"){var V=A.styles.overflow(A.text,M);typeof V=="string"?A.text=[V]:A.text=V}A.contentHeight=A.getContentHeight(z.scaleFactor(),z.getLineHeightFactor());var fe=A.contentHeight/A.rowSpan;A.rowSpan>1&&G.count*G.height<fe*A.rowSpan?G={height:fe,count:A.rowSpan}:G&&G.count>0&&G.height>fe&&(fe=G.height),fe>U.height&&(U.height=fe)}}G.count--}}function P(C,z,G,ee,T){return C.map(function(U){return j(U,z,G,ee,T)})}h.ellipsize=P;function j(C,z,G,ee,T){var U=1e4*ee.scaleFactor();if(z=Math.ceil(z*U)/U,z>=(0,x.getStringWidth)(C,G,ee))return C;for(;z<(0,x.getStringWidth)(C+T,G,ee)&&!(C.length<=1);)C=C.substring(0,C.length-1);return C.trim()+T}},964:function(u){if(typeof t>"u"){var h=new Error("Cannot find module 'undefined'");throw h.code="MODULE_NOT_FOUND",h}u.exports=t}},a={};function i(u){var h=a[u];if(h!==void 0)return h.exports;var y=a[u]={exports:{}};return n[u].call(y.exports,y,y.exports,i),y.exports}var c={};return function(){var u=c;Object.defineProperty(u,"__esModule",{value:!0}),u.Cell=u.Column=u.Row=u.Table=u.CellHookData=u.__drawTable=u.__createTable=u.applyPlugin=void 0;var h=i(340),y=i(776),x=i(664),b=i(972),w=i(260);Object.defineProperty(u,"Table",{enumerable:!0,get:function(){return w.Table}});var m=i(172);Object.defineProperty(u,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var _=i(260);Object.defineProperty(u,"Cell",{enumerable:!0,get:function(){return _.Cell}}),Object.defineProperty(u,"Column",{enumerable:!0,get:function(){return _.Column}}),Object.defineProperty(u,"Row",{enumerable:!0,get:function(){return _.Row}});function L(z){(0,h.default)(z)}u.applyPlugin=L;function O(z,G){var ee=(0,y.parseInput)(z,G),T=(0,b.createTable)(z,ee);(0,x.drawTable)(z,T)}function P(z,G){var ee=(0,y.parseInput)(z,G);return(0,b.createTable)(z,ee)}u.__createTable=P;function j(z,G){(0,x.drawTable)(z,G)}u.__drawTable=j;try{var C=i(964);C.jsPDF&&(C=C.jsPDF),L(C)}catch{}u.default=O}(),c}()})})(Wd);var $0=Wd.exports;const dc=hc($0),G0=r=>{const e=new Et("portrait","mm","a4"),t=210,n=297,a=15,i=t-2*a,c=[59,130,246],u=[107,114,128];let h=20;e.setFillColor(c[0],c[1],c[2]),e.rect(0,0,t,35,"F"),e.setTextColor(255,255,255),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Sales Report",a,20),e.setFontSize(10),e.setFont("helvetica","normal");const y=`${jr(r.dateRange.start,"MMM dd, yyyy")} - ${jr(r.dateRange.end,"MMM dd, yyyy")}`;e.text(y,a,28),e.setFontSize(8),e.text(`Generated: ${jr(new Date,"MMM dd, yyyy hh:mm a")}`,t-60,28),h=45,e.setTextColor(0,0,0),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Executive Summary",a,h),h+=10;const x=[["Total Sales",`PHP ${r.totalSales.toFixed(2)}`],["Total Transactions",r.totalTransactions.toString()],["Total Inventory Cost",`PHP ${r.totalInventoryCost.toFixed(2)}`],["Total Profit",`PHP ${r.totalProfit.toFixed(2)}`]];if(dc(e,{startY:h,head:[["Metric","Value"]],body:x,theme:"grid",headStyles:{fillColor:c,textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{fontSize:9,cellPadding:4,halign:"center"},columnStyles:{0:{cellWidth:i*.65,halign:"center",fontStyle:"normal"},1:{cellWidth:i*.35,halign:"center",fontStyle:"bold"}},margin:{left:a,right:a},tableWidth:i,styles:{cellPadding:4,valign:"middle",halign:"center"}}),h=e.lastAutoTable.finalY+15,h>n-60&&(e.addPage(),h=20),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Recent Transactions",a,h),h+=10,r.transactions.length>0){const m=r.transactions.slice(0,15).map(_=>{var L,O,P,j;return[`#${_.transactionNumber.slice(-4)}`,jr(_.createdAt,"MM/dd hh:mm a"),_.items.length.toString(),_.paymentMethod.charAt(0).toUpperCase(),`PHP ${_.total.toFixed(0)}`,`${((O=(L=_.cashier)==null?void 0:L.firstName)==null?void 0:O[0])||""}${((j=(P=_.cashier)==null?void 0:P.lastName)==null?void 0:j[0])||""}`]});dc(e,{startY:h,head:[["ID","Date/Time","Items","Pay","Total","By"]],body:m,theme:"striped",headStyles:{fillColor:c,textColor:255,fontSize:10,fontStyle:"bold",halign:"center",valign:"middle",cellPadding:6},bodyStyles:{fontSize:9,halign:"center",valign:"middle",cellPadding:5},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:i*.15,halign:"center"},1:{cellWidth:i*.25,halign:"center"},2:{cellWidth:i*.12,halign:"center"},3:{cellWidth:i*.12,halign:"center"},4:{cellWidth:i*.18,halign:"center"},5:{cellWidth:i*.18,halign:"center"}},margin:{left:a,right:a},tableWidth:i,styles:{halign:"center",valign:"middle",lineColor:[229,229,229],lineWidth:.5}})}const b=e.getNumberOfPages();for(let m=1;m<=b;m++)e.setPage(m),e.setFontSize(7),e.setTextColor(u[0],u[1],u[2]),e.text(`Page ${m} of ${b}`,t-25,n-10),e.text("Generated by POS System",a,n-10);const w=`sales-report-${jr(r.dateRange.start,"yyyy-MM-dd")}-to-${jr(r.dateRange.end,"yyyy-MM-dd")}.pdf`;e.save(w)},Y0=(r,e)=>{const t=new Et("portrait","mm","a4"),n=210,a=297,i=15,c=n-2*i;t.setFillColor(59,130,246),t.rect(0,0,n,35,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Detailed Transaction Report",i,20),t.setFontSize(10),t.setFont("helvetica","normal");const u=`${jr(e.start,"MMM dd, yyyy")} - ${jr(e.end,"MMM dd, yyyy")}`;t.text(u,i,28);let h=45;if(r.length===0)t.setTextColor(0,0,0),t.setFontSize(12),t.text("No transactions found for the selected period.",i,h);else{const b=r.reduce((m,_)=>m+_.total,0);t.setTextColor(0,0,0),t.setFontSize(12),t.text(`Total Transactions: ${r.length}`,i,h),t.text(`Total Amount: PHP ${b.toFixed(2)}`,i,h+10),h+=25,r.slice(0,50).forEach(m=>{var _,L;if(h>a-70&&(t.addPage(),h=20),t.setFontSize(11),t.setFont("helvetica","bold"),t.text(`#${m.transactionNumber}`,i,h),t.setFont("helvetica","normal"),t.setFontSize(9),t.text(`${jr(m.createdAt,"MMM dd, yyyy hh:mm a")}`,i,h+8),t.text(`${((_=m.cashier)==null?void 0:_.firstName)||""} ${((L=m.cashier)==null?void 0:L.lastName)||""}`,i+50,h+8),t.text(`${m.paymentMethod}`,i+100,h+8),t.text(`PHP ${m.total.toFixed(2)}`,i+130,h+8),h+=18,m.items.length>0){const O=m.items.map(P=>{var j,C;return[((C=(j=P.product)==null?void 0:j.name)==null?void 0:C.substring(0,30))||"Unknown Product",P.quantity.toString(),`PHP ${P.unitPrice.toFixed(2)}`,`PHP ${P.totalPrice.toFixed(2)}`]});dc(t,{startY:h,head:[["Product","Qty","Price","Total"]],body:O,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:255,fontSize:8,halign:"center"},bodyStyles:{fontSize:7,halign:"center"},columnStyles:{0:{cellWidth:c*.5,halign:"center"},1:{cellWidth:c*.15,halign:"center"},2:{cellWidth:c*.175,halign:"center"},3:{cellWidth:c*.175,halign:"center"}},margin:{left:i,right:i},tableWidth:c,styles:{halign:"center"}}),h=t.lastAutoTable.finalY+8}t.setDrawColor(200,200,200),t.line(i,h,n-i,h),h+=8}),r.length>50&&(h>a-30&&(t.addPage(),h=20),t.setFontSize(9),t.setTextColor(107,114,128),t.text(`Note: Report limited to first 50 transactions. Total transactions in period: ${r.length}`,i,h))}const y=t.getNumberOfPages();for(let b=1;b<=y;b++)t.setPage(b),t.setFontSize(7),t.setTextColor(107,114,128),t.text(`Page ${b} of ${y}`,n-25,a-10),t.text("Generated by POS System",i,a-10);const x=`detailed-transactions-${jr(e.start,"yyyy-MM-dd")}-to-${jr(e.end,"yyyy-MM-dd")}.pdf`;t.save(x)},J0=()=>{var se,D;const{transactions:r,products:e}=Gn(),[t,n]=Ft.useState("today"),[a,i]=Ft.useState(jr(new Date,"yyyy-MM-dd")),[c,u]=Ft.useState(jr(new Date,"yyyy-MM-dd")),[h,y]=Ft.useState(null),[x,b]=Ft.useState(!1),w=()=>{const A=new Date;switch(t){case"today":return{start:eu(A),end:tu(A)};case"week":return{start:tf(A),end:rf(A)};case"month":return{start:Zh(A),end:ef(A)};case"custom":return{start:new Date(a),end:new Date(c)};default:return{start:eu(A),end:tu(A)}}},{start:m,end:_}=w(),L=r.filter(A=>A.createdAt>=m&&A.createdAt<=_&&A.type==="sale"&&A.status==="completed"),O=L.reduce((A,M)=>A+M.total,0),P=L.length,j=(e==null?void 0:e.reduce((A,M)=>A+M.cost*M.quantity,0))||0,C=L.reduce((A,M)=>{const V=M.items.reduce((fe,Y)=>{var ne;const J=(Y.unitPrice-(((ne=Y.product)==null?void 0:ne.cost)||0))*Y.quantity;return fe+J},0);return A+V},0),z=()=>{const M=[["Transaction ID","Date","Time","Total","Payment Method","Items Count"],...L.map(J=>[J.transactionNumber,jr(J.createdAt,"yyyy-MM-dd"),jr(J.createdAt,"hh:mm:ss a"),J.total.toFixed(2),J.paymentMethod,J.items.length.toString()])].map(J=>J.join(",")).join(`
`),V=new Blob([M],{type:"text/csv"}),fe=window.URL.createObjectURL(V),Y=document.createElement("a");Y.href=fe,Y.download=`sales-report-${jr(m,"yyyy-MM-dd")}-to-${jr(_,"yyyy-MM-dd")}.csv`,Y.click(),window.URL.revokeObjectURL(fe)},G=()=>{G0({transactions:L,dateRange:{start:m,end:_},totalSales:O,totalTransactions:P,totalInventoryCost:j,totalProfit:C})},ee=()=>{Y0(L,{start:m,end:_})},T=[{title:"Total Sales",value:Zt(O),icon:$u,color:"text-green-600",bgColor:"bg-green-100"},{title:"Transactions",value:P.toString(),icon:fs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Inventory Cost",value:Zt(j),icon:Gu,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Total Profit",value:Zt(C),icon:Yu,color:"text-purple-600",bgColor:"bg-purple-100"}],U=A=>{y(A),b(!0)},te=()=>{y(null),b(!1)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Reports"}),l.jsx("p",{className:"text-gray-500",children:"Analyze your sales performance and trends"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:z,className:"btn btn-outline",disabled:L.length===0,children:[l.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),l.jsxs("button",{onClick:G,className:"btn btn-primary",disabled:L.length===0,children:[l.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Summary PDF"]}),l.jsxs("button",{onClick:ee,className:"btn btn-secondary",disabled:L.length===0,children:[l.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Detailed PDF"]})]})]}),l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[l.jsx("div",{className:"flex space-x-2",children:[{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"month",label:"This Month"},{key:"custom",label:"Custom"}].map(A=>l.jsx("button",{onClick:()=>n(A.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===A.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A.label},A.key))}),t==="custom"&&l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"date",value:a,onChange:A=>i(A.target.value),className:"input text-sm"}),l.jsx("span",{className:"text-gray-500 self-center",children:"to"}),l.jsx("input",{type:"date",value:c,onChange:A=>u(A.target.value),className:"input text-sm"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map(A=>{const M=A.icon;return l.jsx("div",{className:"card",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`p-2 rounded-lg ${A.bgColor}`,children:l.jsx(M,{className:`h-6 w-6 ${A.color}`})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:A.title}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.value})]})]})},A.title)})}),l.jsxs("div",{className:"card",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Transactions"}),L.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Transaction ID"}),l.jsx("th",{children:"Date & Time"}),l.jsx("th",{children:"Items"}),l.jsx("th",{children:"Payment"}),l.jsx("th",{children:"Total"}),l.jsx("th",{children:"Cashier"})]})}),l.jsx("tbody",{children:L.slice(0,10).map(A=>{var M,V;return l.jsxs("tr",{onClick:()=>U(A),className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",children:[l.jsx("td",{children:l.jsxs("span",{className:"font-mono text-sm",children:["#",A.transactionNumber]})}),l.jsx("td",{children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium",children:jr(A.createdAt,"MMM dd, yyyy")}),l.jsx("div",{className:"text-sm text-gray-500",children:jr(A.createdAt,"hh:mm:ss a")})]})}),l.jsx("td",{children:l.jsxs("span",{className:"text-sm",children:[A.items.length," items"]})}),l.jsx("td",{children:l.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 capitalize",children:A.paymentMethod})}),l.jsx("td",{children:l.jsxs("span",{className:"font-medium",children:["",A.total.toFixed(2)]})}),l.jsx("td",{children:l.jsxs("span",{className:"text-sm text-gray-900",children:[(M=A.cashier)==null?void 0:M.firstName," ",(V=A.cashier)==null?void 0:V.lastName]})})]},A.id)})})]})}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Qc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No transactions found for this period"})]})]}),x&&h&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-full overflow-y-auto",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Rs,{className:"h-6 w-6 text-blue-600 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaction Details"})]}),l.jsx("button",{onClick:te,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zs,{className:"h-6 w-6"})})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Rs,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Number"}),l.jsxs("p",{className:"font-medium",children:["#",h.transactionNumber]})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ju,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),l.jsx("p",{className:"font-medium",children:jr(h.createdAt,"MMM dd, yyyy hh:mm:ss a")})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(fc,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Cashier"}),l.jsxs("p",{className:"font-medium",children:[(se=h.cashier)==null?void 0:se.firstName," ",(D=h.cashier)==null?void 0:D.lastName]})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Qu,{className:"h-4 w-4 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Payment Method"}),l.jsx("p",{className:"font-medium capitalize",children:h.paymentMethod})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Items Purchased"}),l.jsx("div",{className:"space-y-2",children:h.items.map(A=>{var M;return l.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-900",children:((M=A.product)==null?void 0:M.name)||"Unknown Product"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Zt(A.unitPrice),"  ",A.quantity]})]}),l.jsx("div",{className:"text-right",children:l.jsx("p",{className:"font-medium text-gray-900",children:Zt(A.totalPrice)})})]},A.id)})})]}),l.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Payment Summary"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),l.jsx("span",{children:Zt(h.subtotal)})]}),h.discount>0&&l.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[l.jsx("span",{children:"Discount:"}),l.jsxs("span",{children:["-",Zt(h.discount)]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-2",children:l.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:Zt(h.total)})]})}),h.paymentMethod==="cash"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[l.jsx("span",{children:"Cash Received:"}),l.jsx("span",{children:Zt(h.paymentAmount)})]}),h.changeAmount>0&&l.jsxs("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[l.jsx("span",{children:"Change Given:"}),l.jsx("span",{children:Zt(h.changeAmount)})]})]})]})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[l.jsx("div",{children:l.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})}),l.jsxs("p",{className:"text-sm text-gray-500",children:[h.items.length," item",h.items.length!==1?"s":""]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:te,className:"btn btn-outline",children:"Close"})})})]})})]})},Q0=()=>{var A;const{users:r,addUser:e,updateUserData:t,deleteUser:n,auth:a}=Gn(),[i,c]=Ft.useState(!1),[u,h]=Ft.useState(null),[y,x]=Ft.useState(!1),[b,w]=Ft.useState(!1),[m,_]=Ft.useState(""),{register:L,handleSubmit:O,reset:P,watch:j,setValue:C,formState:{errors:z}}=mo(),G=j("password");if(((A=a.user)==null?void 0:A.role)!=="admin")return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Qh,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),l.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage users."})]})});const ee=M=>{M?(h(M),P({username:M.username,email:M.email,firstName:M.firstName,lastName:M.lastName,role:M.role,isActive:M.isActive,password:"",confirmPassword:""})):(h(null),P({username:"",email:"",firstName:"",lastName:"",role:"cashier",isActive:!0,password:"",confirmPassword:""})),_(""),c(!0)},T=()=>{c(!1),h(null),_(""),x(!1),w(!1),P()},U=()=>{const M=qp(10);_(M),C("password",M),C("confirmPassword",M)},te=M=>{if(M.password!==M.confirmPassword){alert("Passwords do not match!");return}if(!u||M.password){const V=Bp(M.password);if(!V.isValid){alert(`Password requirements:
`+V.errors.join(`
`));return}}if(u){const V={username:M.username,email:M.email,firstName:M.firstName,lastName:M.lastName,role:M.role,isActive:M.isActive,updatedAt:new Date};M.password&&(V.password=Ua(M.password)),t(u.id,V)}else{const V={id:Date.now().toString(),username:M.username,email:M.email,password:Ua(M.password),firstName:M.firstName,lastName:M.lastName,role:M.role,isActive:M.isActive,createdAt:new Date,updatedAt:new Date};e(V)}T()},se=M=>{var V;if(M.id===((V=a.user)==null?void 0:V.id)){alert("You cannot delete your own account.");return}window.confirm(`Are you sure you want to delete user "${M.username}"?`)&&n(M.id)},D=M=>{switch(M){case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"cashier":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),l.jsx("p",{className:"text-gray-500",children:"Manage employee accounts and permissions"})]}),l.jsxs("button",{onClick:()=>ee(),className:"btn btn-primary",children:[l.jsx(pc,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),l.jsx("div",{className:"card overflow-hidden",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"User"}),l.jsx("th",{children:"Email"}),l.jsx("th",{children:"Role"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Created Date"}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:r.map(M=>{var V;return l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-3",children:l.jsx(Kl,{className:"h-5 w-5 text-gray-400"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium text-gray-900",children:[M.firstName," ",M.lastName]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["@",M.username]})]})]})}),l.jsx("td",{children:l.jsx("span",{className:"text-sm text-gray-900",children:M.email})}),l.jsx("td",{children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${D(M.role)}`,children:M.role})}),l.jsx("td",{children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${M.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.isActive?"Active":"Inactive"})}),l.jsx("td",{children:l.jsx("span",{className:"text-sm text-gray-500",children:new Date(M.createdAt).toLocaleDateString()})}),l.jsx("td",{children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>ee(M),className:"p-1 text-blue-600 hover:text-blue-800",children:l.jsx(Gl,{className:"h-4 w-4"})}),M.id!==((V=a.user)==null?void 0:V.id)&&l.jsx("button",{onClick:()=>se(M),className:"p-1 text-red-600 hover:text-red-800",children:l.jsx(Go,{className:"h-4 w-4"})})]})})]},M.id)})})]}),r.length===0&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Kl,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No users found"})]})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:u?"Edit User":"Add New User"}),l.jsxs("form",{onSubmit:O(te),className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),l.jsx("input",{...L("firstName",{required:"First name is required"}),className:"input",placeholder:"Enter first name"}),z.firstName&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.firstName.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),l.jsx("input",{...L("lastName",{required:"Last name is required"}),className:"input",placeholder:"Enter last name"}),z.lastName&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.lastName.message})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),l.jsx("input",{...L("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}}),className:"input",placeholder:"Enter username"}),z.username&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.username.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),l.jsx("input",{...L("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),type:"email",className:"input",placeholder:"Enter email address"}),z.email&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.email.message})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",u?"(leave blank to keep current)":"*"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{...L("password",u?{}:{required:"Password is required for new users"}),type:y?"text":"password",className:"input pr-20",placeholder:u?"Enter new password (optional)":"Enter password"}),l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[l.jsx("button",{type:"button",onClick:U,className:"p-2 text-blue-600 hover:text-blue-800 mr-1",title:"Generate random password",children:l.jsx(qs,{className:"h-4 w-4"})}),l.jsx("button",{type:"button",onClick:()=>x(!y),className:"p-2 text-gray-500 hover:text-gray-700",children:y?l.jsx(Vl,{className:"h-4 w-4"}):l.jsx($l,{className:"h-4 w-4"})})]})]}),z.password&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.password.message}),m&&l.jsxs("p",{className:"mt-1 text-sm text-green-600",children:["Generated password: ",l.jsx("span",{className:"font-mono font-bold",children:m}),l.jsx("br",{}),l.jsx("span",{className:"text-xs",children:"Make sure to save this password!"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Password ",u?"(if changing password)":"*"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{...L("confirmPassword",u?{}:{required:"Please confirm the password"}),type:b?"text":"password",className:"input pr-10",placeholder:"Confirm password"}),l.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:b?l.jsx(Vl,{className:"h-4 w-4"}):l.jsx($l,{className:"h-4 w-4"})})]}),z.confirmPassword&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.confirmPassword.message}),G&&j("confirmPassword")&&G!==j("confirmPassword")&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Passwords do not match"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),l.jsxs("select",{...L("role",{required:"Role is required"}),className:"input",children:[l.jsx("option",{value:"cashier",children:"Cashier"}),l.jsx("option",{value:"manager",children:"Manager"}),l.jsx("option",{value:"admin",children:"Admin"})]}),z.role&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.role.message}),l.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[l.jsx("strong",{children:"Cashier:"})," Can process sales and view basic reports",l.jsx("br",{}),l.jsx("strong",{children:"Manager:"})," Can manage inventory and view detailed reports",l.jsx("br",{}),l.jsx("strong",{children:"Admin:"})," Full access to all features"]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{...L("isActive"),type:"checkbox",className:"h-4 w-4 text-primary-600 rounded border-gray-300"}),l.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active user (can login)"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:T,className:"btn btn-outline",children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},X0=()=>{var L,O,P,j,C,z;const{settings:r,updateSettings:e,auth:t,transactions:n,products:a,users:i,initializeFromDatabase:c}=Gn(),{register:u,handleSubmit:h,formState:{errors:y}}=mo({defaultValues:{storeName:r.storeName,currency:"PHP"}}),x=G=>{e({...G,currency:"PHP"}),alert("Settings saved successfully!")},b=async()=>{try{const G=await Us.backup(),ee=window.URL.createObjectURL(G),T=document.createElement("a");T.href=ee,T.download=`pos-backup-${new Date().toISOString().split("T")[0]}.json`,T.click(),window.URL.revokeObjectURL(ee)}catch(G){console.error("Export failed:",G),alert("Failed to export data. Please try again.")}},w=async G=>{var U;const ee=(U=G.target.files)==null?void 0:U[0];if(!ee)return;if(G.target.value="",!ee.name.endsWith(".json")){alert("Please select a valid JSON backup file");return}const T=new FileReader;T.onload=async te=>{var se;try{const D=(se=te.target)==null?void 0:se.result,A=JSON.parse(D);if(!A.version||!A.users&&!A.products&&!A.transactions){alert("Invalid backup file format. This does not appear to be a valid POS backup file.");return}if(window.confirm("This will overwrite all current data including transactions, products, and users. This action cannot be undone. Are you sure?"))try{await Us.restore(D),await c(),alert("Data imported successfully! All data has been restored from the backup.")}catch(M){console.error("Import failed:",M),alert("Failed to import data. The backup file may be corrupted or incompatible.")}}catch(D){console.error("Failed to parse backup file:",D),alert("Invalid backup file format. Please select a valid JSON backup file.")}},T.readAsText(ee)},m=async()=>{if(window.confirm("This will delete ALL data including transactions, products, and users. This action cannot be undone. Are you sure?")&&window.confirm("Final confirmation: This will permanently delete everything. Are you sure you want to proceed?"))try{await Us.clearAll(),await c(),alert("All data has been successfully cleared.")}catch(G){console.error("Clear data failed:",G),alert("Failed to clear data. Please try again.")}};return((L=t.user)==null?void 0:L.role)==="admin"||((O=t.user)==null?void 0:O.role)==="manager"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),l.jsx("p",{className:"text-gray-500",children:"Configure your POS system preferences"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Store Information"}),l.jsxs("form",{onSubmit:h(x),className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),l.jsx("input",{...u("storeName",{required:"Store name is required"}),className:"input",placeholder:"Enter store name"}),y.storeName&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.storeName.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),l.jsx("select",{...u("currency",{required:"Currency is required"}),className:"input",disabled:!0,children:l.jsx("option",{value:"PHP",children:"PHP - Philippine Peso"})}),y.currency&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.currency.message})]}),l.jsxs("button",{type:"submit",className:"btn btn-primary",children:[l.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Total Products:"}),l.jsx("span",{className:"font-medium",children:a.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Total Transactions:"}),l.jsx("span",{className:"font-medium",children:n.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Total Users:"}),l.jsx("span",{className:"font-medium",children:i.length})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Current User:"}),l.jsxs("span",{className:"font-medium",children:[(P=t.user)==null?void 0:P.firstName," ",(j=t.user)==null?void 0:j.lastName]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"User Role:"}),l.jsx("span",{className:"font-medium capitalize",children:(C=t.user)==null?void 0:C.role})]})]})]})]}),((z=t.user)==null?void 0:z.role)==="admin"&&l.jsxs("div",{className:"card",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Yo,{className:"h-5 w-5 text-blue-600 mr-2"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Export Data"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Download a backup of all your data"}),l.jsxs("button",{onClick:b,className:"btn btn-outline w-full",children:[l.jsx(Yo,{className:"h-4 w-4 mr-2"}),"Export Backup"]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors duration-200",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Jo,{className:"h-5 w-5 text-green-600 mr-2"}),l.jsx("h3",{className:"font-medium text-gray-900",children:"Import Data"})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restore data from a backup file"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",accept:".json",onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"backup-file-input"}),l.jsx("label",{htmlFor:"backup-file-input",className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-green-300 rounded-lg cursor-pointer bg-green-50 hover:bg-green-100 transition-colors duration-200",children:l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsx(Jo,{className:"h-6 w-6 text-green-600 mb-2"}),l.jsx("p",{className:"text-sm font-medium text-green-800",children:"Click to upload"}),l.jsx("p",{className:"text-xs text-green-600",children:"JSON files only"})]})})]})]}),l.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Xc,{className:"h-5 w-5 text-red-600 mr-2"}),l.jsx("h3",{className:"font-medium text-red-900",children:"Clear All Data"})]}),l.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Permanently delete all system data"}),l.jsxs("button",{onClick:m,className:"btn btn-danger w-full",children:[l.jsx(Xc,{className:"h-4 w-4 mr-2"}),"Clear Data"]})]})]}),l.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),l.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:l.jsx("p",{children:"Always create regular backups of your data. The clear data operation is irreversible and will permanently delete all transactions, products, and user data."})})]})]})})]})]}):l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Vu,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),l.jsx("p",{className:"text-gray-500",children:"You don't have permission to manage settings."})]})})};class yo{static async checkAndMigrate(){if(localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true"){console.log("Migration already completed, skipping...");return}const t=this.getLegacyData();if(!t||this.isLegacyDataEmpty(t)){console.log("No legacy data found, marking migration as complete"),this.markMigrationComplete();return}console.log("Starting migration from localStorage to IndexedDB...");try{await this.migrateLegacyData(t),this.markMigrationComplete(),this.backupLegacyData(),console.log("Migration completed successfully")}catch(n){throw console.error("Migration failed:",n),n}}static getLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(!e)return null;const t=JSON.parse(e);return t.state||t}catch(e){return console.error("Failed to parse legacy data:",e),null}}static isLegacyDataEmpty(e){return(!e.users||e.users.length===0)&&(!e.products||e.products.length===0)&&(!e.categories||e.categories.length===0)&&(!e.transactions||e.transactions.length===0)}static async migrateLegacyData(e){var t,n,a,i,c;console.log("Migrating legacy data:",{users:((t=e.users)==null?void 0:t.length)||0,products:((n=e.products)==null?void 0:n.length)||0,categories:((a=e.categories)==null?void 0:a.length)||0,transactions:((i=e.transactions)==null?void 0:i.length)||0,activityLogs:((c=e.activityLogs)==null?void 0:c.length)||0}),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{if(e.categories&&e.categories.length>0){for(const u of e.categories)try{await He.categories.get(u.id)?console.log(`Category ${u.id} already exists, skipping...`):await He.categories.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate category:",u.id,h)}console.log(`Processed ${e.categories.length} categories`)}if(e.users&&e.users.length>0){for(const u of e.users)try{await He.users.get(u.id)?console.log(`User ${u.id} already exists, skipping...`):await He.users.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date,lastLogin:u.lastLogin?new Date(u.lastLogin):void 0})}catch(h){console.error("Failed to migrate user:",u.id,h)}console.log(`Processed ${e.users.length} users`)}if(e.products&&e.products.length>0){for(const u of e.products)try{await He.products.get(u.id)?console.log(`Product ${u.id} already exists, skipping...`):await He.products.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate product:",u.id,h)}console.log(`Processed ${e.products.length} products`)}if(e.transactions&&e.transactions.length>0){for(const u of e.transactions)try{await He.transactions.get(u.id)?console.log(`Transaction ${u.id} already exists, skipping...`):await He.transactions.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date,updatedAt:u.updatedAt?new Date(u.updatedAt):new Date})}catch(h){console.error("Failed to migrate transaction:",u.id,h)}console.log(`Processed ${e.transactions.length} transactions`)}if(e.activityLogs&&e.activityLogs.length>0){for(const u of e.activityLogs)try{await He.activityLogs.get(u.id)?console.log(`Activity log ${u.id} already exists, skipping...`):await He.activityLogs.add({...u,createdAt:u.createdAt?new Date(u.createdAt):new Date})}catch(h){console.error("Failed to migrate activity log:",u.id,h)}console.log(`Processed ${e.activityLogs.length} activity logs`)}if(e.settings)try{if(await He.settings.get("migrated"))console.log("Settings already exist, skipping...");else{const h={id:"migrated",currency:"PHP",storeName:e.settings.storeName||"My Store",storeAddress:e.settings.storeAddress,storePhone:e.settings.storePhone,storeEmail:e.settings.storeEmail,autoBackup:e.settings.autoBackup||!1,backupFrequency:e.settings.backupFrequency||"daily",lowStockAlert:e.settings.lowStockAlert!==void 0?e.settings.lowStockAlert:!0,lowStockThreshold:e.settings.lowStockThreshold||5,createdAt:new Date,updatedAt:new Date};await He.settings.add(h),console.log("Migrated settings")}}catch(u){console.error("Failed to migrate settings:",u)}})}static markMigrationComplete(){localStorage.setItem(this.MIGRATION_FLAG_KEY,"true")}static backupLegacyData(){try{const e=localStorage.getItem(this.LEGACY_STORAGE_KEY);if(e){const t=`${this.LEGACY_STORAGE_KEY}-backup-${Date.now()}`;localStorage.setItem(t,e),console.log(`Legacy data backed up to ${t}`)}}catch(e){console.error("Failed to backup legacy data:",e)}}static async forceMigration(){try{console.log("Forcing migration: clearing database and migration flag"),localStorage.removeItem(this.MIGRATION_FLAG_KEY),await Us.clearAll(),await this.checkAndMigrate()}catch(e){throw console.error("Force migration failed:",e),e}}static resetMigrationFlag(){localStorage.removeItem(this.MIGRATION_FLAG_KEY),console.log("Migration flag reset. Next app load will trigger migration check.")}static async exportToLegacyFormat(){const e={users:await Ni.getAll(),products:await Ra.getAll(),categories:await us.getAll(),transactions:await Bs.getAll(),activityLogs:await po.getAll(),settings:await ps.get()};return JSON.stringify({state:e},null,2)}static getMigrationStatus(){var i,c,u,h,y;const e=localStorage.getItem(this.MIGRATION_FLAG_KEY)==="true",t=this.getLegacyData(),n=t&&!this.isLegacyDataEmpty(t);let a=0;return t&&(a=(((i=t.users)==null?void 0:i.length)||0)+(((c=t.products)==null?void 0:c.length)||0)+(((u=t.categories)==null?void 0:u.length)||0)+(((h=t.transactions)==null?void 0:h.length)||0)+(((y=t.activityLogs)==null?void 0:y.length)||0)),{migrationCompleted:e,hasLegacyData:!!n,legacyDataSize:a}}static async clearDatabase(){try{console.log(" Starting complete database and localStorage cleanup..."),He.isOpen()&&(console.log(" Closing database connection..."),He.close(),await new Promise(h=>setTimeout(h,500))),console.log(" Deleting IndexedDB database..."),await He.delete(),await new Promise(h=>setTimeout(h,500)),console.log(" Clearing ALL localStorage...");const e=[];for(let h=0;h<localStorage.length;h++){const y=localStorage.key(h);y&&e.push(y)}e.forEach(h=>{(h.includes("pos")||h.includes("store")||h.includes("auth")||h.includes("migration")||h.includes("database"))&&(console.log(` Removing localStorage key: ${h}`),localStorage.removeItem(h))}),[this.MIGRATION_FLAG_KEY,this.LEGACY_STORAGE_KEY,"pos-auth-storage","pos-store","pos-migrated-to-db","pos-data-cleared-intentionally","react-pos-store","zustand-store","posSystemStore"].forEach(h=>{localStorage.removeItem(h),console.log(` Cleared specific key: ${h}`)});try{sessionStorage.clear(),console.log(" Cleared sessionStorage")}catch(h){console.warn("Could not clear sessionStorage:",h)}await new Promise(h=>setTimeout(h,1e3)),console.log(" Re-opening database with fresh schema..."),await He.open();const n=await He.users.count(),a=await He.products.count(),i=await He.categories.count(),c=await He.transactions.count(),u=await He.activityLogs.count();if(console.log(" Database cleared successfully"),console.log(` Verification - Users: ${n}, Products: ${a}, Categories: ${i}, Transactions: ${c}, Logs: ${u}`),n>0||a>0||i>0){console.warn(" Warning: Some data still exists after clearing. Attempting force clear..."),await He.transaction("rw",[He.users,He.products,He.categories,He.transactions,He.activityLogs,He.settings],async()=>{const b=await He.users.toArray();for(const O of b)await He.users.delete(O.id);const w=await He.products.toArray();for(const O of w)await He.products.delete(O.id);const m=await He.categories.toArray();for(const O of m)await He.categories.delete(O.id);const _=await He.transactions.toArray();for(const O of _)await He.transactions.delete(O.id);const L=await He.activityLogs.toArray();for(const O of L)await He.activityLogs.delete(O.id);await He.settings.clear()}),console.log(" Force clear completed");const h=await He.users.count(),y=await He.products.count(),x=await He.categories.count();console.log(` Final verification - Users: ${h}, Products: ${y}, Categories: ${x}`)}}catch(e){console.error(" Failed to clear database:",e);const t=e instanceof Error?e.message:"Unknown error occurred";throw new Error(`Database clear failed: ${t}`)}}}fa(yo,"LEGACY_STORAGE_KEY","pos-store"),fa(yo,"MIGRATION_FLAG_KEY","pos-migrated-to-db");const Z0=async()=>{console.log("Checking if sample data should be initialized...");try{const{ProductService:r,CategoryService:e,UserService:t,DatabaseService:n}=await nl(()=>Promise.resolve().then(()=>pp),void 0,import.meta.url);if(n.wasDataClearedIntentionally()){console.log(" Data was cleared intentionally. Skipping sample data initialization."),console.log(' To restore sample data, use the "Reset Database" option instead of "Clear All Data".');return}const a=await r.getAll(),i=await e.getAll(),c=await t.getAll();if(a.length>0&&i.length>0&&c.length>0){console.log("Sample data already exists, skipping initialization");return}console.log("Initializing fresh sample data...");const u=[{id:"user-1",username:"admin",email:"admin@pos.com",password:Ua("password"),role:"admin",firstName:"Admin",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-2",username:"manager",email:"manager@pos.com",password:Ua("password"),role:"manager",firstName:"Manager",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-3",username:"cashier",email:"cashier@pos.com",password:Ua("password"),role:"cashier",firstName:"Cashier",lastName:"User",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"user-4",username:"admin123",email:"admin123@pos.com",password:Ua("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date}],h=[{id:"cat-1",name:"Beverages",description:"Drinks and beverages",createdAt:new Date,updatedAt:new Date},{id:"cat-2",name:"Snacks",description:"Snacks and confectionery",createdAt:new Date,updatedAt:new Date},{id:"cat-3",name:"Dairy",description:"Milk and dairy products",createdAt:new Date,updatedAt:new Date},{id:"cat-4",name:"Bakery",description:"Bread and baked goods",createdAt:new Date,updatedAt:new Date},{id:"cat-5",name:"Household",description:"Household items and cleaning supplies",createdAt:new Date,updatedAt:new Date}],y=[{id:"prod-1",name:"Coca Cola 500ml",description:"Refreshing cola drink",sku:"COLA-500ML",barcode:"123456789012",price:2.5,cost:1.25,quantity:50,minStockLevel:10,categoryId:"cat-1",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-2",name:"Bottled Water 1L",description:"Pure drinking water",sku:"WATER-1L",barcode:"123456789013",price:1.5,cost:.75,quantity:100,minStockLevel:20,categoryId:"cat-1",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-3",name:"Potato Chips",description:"Crispy potato chips",sku:"CHIPS-001",barcode:"123456789014",price:3,cost:1.5,quantity:75,minStockLevel:15,categoryId:"cat-2",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-4",name:"Chocolate Bar",description:"Milk chocolate bar",sku:"CHOC-BAR",barcode:"123456789015",price:2.25,cost:1,quantity:60,minStockLevel:12,categoryId:"cat-2",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-5",name:"Whole Milk 1L",description:"Fresh whole milk",sku:"MILK-1L",barcode:"123456789016",price:3.5,cost:2,quantity:30,minStockLevel:8,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-6",name:"White Bread",description:"Fresh white bread loaf",sku:"BREAD-WHT",barcode:"123456789017",price:2.75,cost:1.4,quantity:25,minStockLevel:5,categoryId:"cat-4",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-7",name:"Paper Towels",description:"Absorbent paper towels",sku:"PPR-TOWEL",barcode:"123456789018",price:4.5,cost:2.25,quantity:40,minStockLevel:10,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-8",name:"Orange Juice 1L",description:"100% pure orange juice",sku:"OJ-1L",barcode:"123456789019",price:4.25,cost:2.5,quantity:35,minStockLevel:8,categoryId:"cat-1",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-9",name:"Cheese Slices",description:"Processed cheese slices",sku:"CHEESE-SLC",barcode:"123456789020",price:5.5,cost:3,quantity:20,minStockLevel:5,categoryId:"cat-3",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date},{id:"prod-10",name:"Dish Soap",description:"Liquid dish soap",sku:"SOAP-DISH",barcode:"123456789021",price:3.75,cost:1.8,quantity:30,minStockLevel:7,categoryId:"cat-5",isActive:!0,imageUrl:"",createdAt:new Date,updatedAt:new Date}];console.log("Adding users...");for(const x of u)try{await He.users.put(x),console.log(` Added user: ${x.username}`)}catch{console.log(` User ${x.username} might already exist, skipping...`)}console.log("Adding categories...");for(const x of h)try{await He.categories.put(x),console.log(` Added category: ${x.name}`)}catch{console.log(` Category ${x.name} might already exist, skipping...`)}console.log("Adding products...");for(const x of y)try{await He.products.put(x),console.log(` Added product: ${x.name}`)}catch{console.log(` Product ${x.name} might already exist, skipping...`)}console.log("Sample data initialized successfully")}catch(r){throw console.error("Failed to initialize sample data:",r),r}};async function em(){try{console.log("Initializing POS Database..."),await Us.initialize(),await yo.checkAndMigrate(),await Z0(),console.log("Database initialization completed")}catch(r){throw console.error("Database initialization failed:",r),r}}async function tm(){try{if(await Ni.getByUsername("admin123")){console.log("User admin123 already exists");return}const e={id:"user-admin123-"+Date.now(),username:"admin123",email:"admin123@pos.com",password:Ua("adminpassword"),role:"admin",firstName:"Administrator",lastName:"Account",isActive:!0,createdAt:new Date,updatedAt:new Date};await Ni.create(e),console.log(" Admin user created successfully!"),console.log("Username: admin123"),console.log("Password: adminpassword"),console.log("Role: admin")}catch(r){throw console.error("Failed to create admin123 user:",r),r}}const Es=({children:r,allowedRoles:e,fallbackPath:t="/sales"})=>{var a;const{auth:n}=Gn();return!((a=n.user)!=null&&a.role)||!e.includes(n.user.role)?l.jsx(Wl,{to:t,replace:!0}):l.jsx(l.Fragment,{children:r})},Ku=()=>{var e;const{auth:r}=Gn();return((e=r.user)==null?void 0:e.role)==="cashier"?l.jsx(Wl,{to:"/sales",replace:!0}):l.jsx(Wl,{to:"/dashboard",replace:!0})},rm=()=>{const[r,e]=bi.useState(!0),[t,n]=bi.useState(null),[a,i]=bi.useState(null),[c,u]=bi.useState(!1),{auth:h,initializeFromDatabase:y}=Gn();bi.useEffect(()=>{const m=Gn.persist.onFinishHydration(()=>{u(!0)});return Gn.persist.hasHydrated()&&u(!0),m},[]);const x=async()=>{try{e(!0),n(null),i(null),console.log("Starting application initialization..."),await em(),await y(),await tm(),console.log("Application initialized successfully")}catch(m){console.error("Initialization failed:",m);const _=m instanceof Error?m.message:"Unknown error occurred";n(`Failed to initialize application: ${_}`),m instanceof Error&&i(m.stack||"No stack trace available")}finally{e(!1)}};bi.useEffect(()=>{x()},[y]);const b=async()=>{if(window.confirm("This will reset the database and may fix the error, but all data will be lost. Continue?"))try{e(!0),n(null),i(null),await yo.clearDatabase(),await new Promise(m=>setTimeout(m,1e3)),await x(),t||window.confirm("Database reset successfully! Refresh the page for a clean start?")&&window.location.reload()}catch(m){console.error("Failed to reset database:",m),n("Failed to reset database. Please try refreshing the page manually."),i("If the problem persists, try using a different browser or clearing your browser storage.")}},w=async()=>{try{e(!0),n(null),yo.resetMigrationFlag(),await x()}catch(m){console.error("Failed to reset migration:",m),n("Failed to reset migration. Please try the database reset option.")}};return r||!c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(qs,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Initializing POS System"}),l.jsx("p",{className:"text-gray-500",children:c?"Setting up database and loading data...":"Loading session..."})]})}):t?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"text-center max-w-lg",children:[l.jsx(Vo,{className:"h-16 w-16 text-red-600 mx-auto mb-6"}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Initialization Failed"}),l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[l.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Error:"}),l.jsx("p",{className:"text-red-700 text-sm mb-3",children:t}),a&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Details:"}),l.jsx("p",{className:"text-red-700 text-sm",children:a})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>x(),className:"btn btn-primary w-full",children:[l.jsx(qs,{className:"h-4 w-4 mr-2"}),"Retry Initialization"]}),t.includes("Key already exists")||t.includes("ConstraintError")?l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:w,className:"btn btn-outline w-full",children:"Reset Migration"}),l.jsxs("button",{onClick:b,className:"btn btn-warning w-full",children:[l.jsx(Zc,{className:"h-4 w-4 mr-2"}),"Reset Database"]})]}):l.jsxs("button",{onClick:b,className:"btn btn-danger w-full",children:[l.jsx(Zc,{className:"h-4 w-4 mr-2"}),"Reset Database"]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:[l.jsx("p",{children:"If the problem persists:"}),l.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[l.jsx("li",{children:"Try using a different browser"}),l.jsx("li",{children:"Clear your browser's storage/cache"}),l.jsx("li",{children:"Check if you have enough disk space"}),l.jsx("li",{children:"Disable browser extensions temporarily"})]})]})]})]})}):l.jsx(Ih,{children:h.isAuthenticated?l.jsx(gp,{children:l.jsxs(Eh,{children:[l.jsx(Ia,{path:"/",element:l.jsx(Ku,{})}),l.jsx(Ia,{path:"/dashboard",element:l.jsx(Es,{allowedRoles:["admin","manager"],children:l.jsx(zp,{})})}),l.jsx(Ia,{path:"/sales",element:l.jsx(Es,{allowedRoles:["admin","manager","cashier"],children:l.jsx(Hp,{})})}),l.jsx(Ia,{path:"/inventory",element:l.jsx(Es,{allowedRoles:["admin","manager"],children:l.jsx(Wp,{})})}),l.jsx(Ia,{path:"/reports",element:l.jsx(Es,{allowedRoles:["admin","manager","cashier"],children:l.jsx(J0,{})})}),l.jsx(Ia,{path:"/users",element:l.jsx(Es,{allowedRoles:["admin"],children:l.jsx(Q0,{})})}),l.jsx(Ia,{path:"/settings",element:l.jsx(Es,{allowedRoles:["admin","manager"],children:l.jsx(X0,{})})}),l.jsx(Ia,{path:"*",element:l.jsx(Ku,{})})]})}):l.jsx(Up,{})})};const nm=new kf({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});Yl.createRoot(document.getElementById("root")).render(l.jsx(Ft.StrictMode,{children:l.jsx(If,{client:nm,children:l.jsx(rm,{})})}));
